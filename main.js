/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={954:(t,e,n)=>{n.d(e,{k:()=>Ql,j:()=>Gl});const s=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&s+1<t.length&&56320==(64512&t.charCodeAt(s+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++s)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},r={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let e=0;e<t.length;e+=3){const r=t[e],i=e+1<t.length,o=i?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=r>>2,h=(3&r)<<4|o>>4;let l=(15&o)<<2|c>>6,d=63&c;a||(d=64,i||(l=64)),s.push(n[u],n[h],n[l],n[d])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[s++]=String.fromCharCode(55296+(i>>10)),e[s++]=String.fromCharCode(56320+(1023&i))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==o||null==a||null==c)throw new i;const u=r<<2|o>>4;if(s.push(u),64!==a){const t=o<<4&240|a>>2;if(s.push(t),64!==c){const t=a<<6&192|c;s.push(t)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=s(t);return r.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const t="MISSING_ENV_VAR".__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return r.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},c=()=>{var t;return null===(t=a())||void 0===t?void 0:t.config};class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}class h extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l.prototype.create)}}class l{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,r=this.errors[t],i=r?function(t,e){return t.replace(d,((t,n)=>{const s=e[n];return null!=s?String(s):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new h(s,o,n)}}const d=/\{\$([^}]+)}/g;function f(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const n=t[r],i=e[r];if(g(n)&&g(i)){if(!f(n,i))return!1}else if(n!==i)return!1}for(const t of s)if(!n.includes(t))return!1;return!0}function g(t){return null!==t&&"object"==typeof t}function p(t){return t&&t._delegate?t._delegate:t}class m{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const y="[DEFAULT]";class v{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new u;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),s=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(s)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:y})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=y){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=y){return this.instances.has(t)}getOptions(t=y){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(s);return s}onInit(t,e){var n;const s=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&t(i,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===y?void 0:s),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var s;return n||null}normalizeInstanceIdentifier(t=y){return this.component?this.component.multipleInstances?t:y:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class w{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new v(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const E=[];var b,T;(T=b||(b={}))[T.DEBUG=0]="DEBUG",T[T.VERBOSE=1]="VERBOSE",T[T.INFO=2]="INFO",T[T.WARN=3]="WARN",T[T.ERROR=4]="ERROR",T[T.SILENT=5]="SILENT";const C={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},S=b.INFO,I={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},A=(t,e,...n)=>{if(e<t.logLevel)return;const s=(new Date).toISOString(),r=I[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${s}]  ${t.name}:`,...n)};class _{constructor(t){this.name=t,this._logLevel=S,this._logHandler=A,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in b))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?C[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...t),this._logHandler(this,b.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...t),this._logHandler(this,b.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,b.INFO,...t),this._logHandler(this,b.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,b.WARN,...t),this._logHandler(this,b.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,b.ERROR,...t),this._logHandler(this,b.ERROR,...t)}}const D=(t,e)=>e.some((e=>t instanceof e));let k,N;const x=new WeakMap,L=new WeakMap,R=new WeakMap,M=new WeakMap,O=new WeakMap;let P={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return L.get(t);if("objectStoreNames"===e)return t.objectStoreNames||R.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return V(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function F(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(N||(N=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(U(this),t),V(x.get(this))}:function(...t){return V(e.apply(U(this),t))}:function(t,...n){const s=e.call(U(this),t,...n);return R.set(s,t.sort?t.sort():[t]),V(s)}:(t instanceof IDBTransaction&&function(t){if(L.has(t))return;const e=new Promise(((e,n)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",i),t.removeEventListener("abort",i)},r=()=>{e(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",i),t.addEventListener("abort",i)}));L.set(t,e)}(t),D(t,k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,P):t);var e}function V(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",i)},r=()=>{e(V(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",i)}));return e.then((e=>{e instanceof IDBCursor&&x.set(e,t)})).catch((()=>{})),O.set(e,t),e}(t);if(M.has(t))return M.get(t);const e=F(t);return e!==t&&(M.set(t,e),O.set(e,t)),e}const U=t=>O.get(t),B=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],q=new Map;function $(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(q.get(e))return q.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=j.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!B.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,r?"readwrite":"readonly");let o=i.store;return s&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&i.done]))[0]};return q.set(e,i),i}var z;z=P,P={...z,get:(t,e,n)=>$(t,e)||z.get(t,e,n),has:(t,e)=>!!$(t,e)||z.has(t,e)};class K{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const H="@firebase/app",G="0.9.12",Q=new _("@firebase/app"),W="[DEFAULT]",X={[H]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Y=new Map,J=new Map;function Z(t,e){try{t.container.addComponent(e)}catch(n){Q.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tt(t){const e=t.name;if(J.has(e))return Q.debug(`There were multiple attempts to register component ${e}.`),!1;J.set(e,t);for(const e of Y.values())Z(e,t);return!0}const et=new l("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new m("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}function st(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const s=Object.assign({name:W,automaticDataCollectionEnabled:!1},e),r=s.name;if("string"!=typeof r||!r)throw et.create("bad-app-name",{appName:String(r)});if(n||(n=c()),!n)throw et.create("no-options");const i=Y.get(r);if(i){if(f(n,i.options)&&f(s,i.config))return i;throw et.create("duplicate-app",{appName:r})}const o=new w(r);for(const t of J.values())o.addComponent(t);const a=new nt(n,s,o);return Y.set(r,a),a}function rt(t,e,n){var s;let r=null!==(s=X[t])&&void 0!==s?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const t=[`Unable to register library "${r}" with version "${e}":`];return i&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Q.warn(t.join(" "))}tt(new m(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const it="firebase-heartbeat-database",ot=1,at="firebase-heartbeat-store";let ct=null;function ut(){return ct||(ct=function(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=V(o);return s&&o.addEventListener("upgradeneeded",(t=>{s(V(o.result),t.oldVersion,t.newVersion,V(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{i&&t.addEventListener("close",(()=>i())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(it,ot,{upgrade:(t,e)=>{0===e&&t.createObjectStore(at)}}).catch((t=>{throw et.create("idb-open",{originalErrorMessage:t.message})}))),ct}async function ht(t,e){try{const n=(await ut()).transaction(at,"readwrite"),s=n.objectStore(at);await s.put(e,lt(t)),await n.done}catch(t){if(t instanceof h)Q.warn(t.message);else{const e=et.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});Q.warn(e.message)}}}function lt(t){return`${t.name}!${t.options.appId}`}class dt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new gt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=ft();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=ft(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let s=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),pt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),pt(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),s=o(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ft(){return(new Date).toISOString().substring(0,10)}class gt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await ut();return await e.transaction(at).objectStore(at).get(lt(t))}catch(t){if(t instanceof h)Q.warn(t.message);else{const e=et.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Q.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function pt(t){return o(JSON.stringify({version:2,heartbeats:t})).length}tt(new m("platform-logger",(t=>new K(t)),"PRIVATE")),tt(new m("heartbeat",(t=>new dt(t)),"PRIVATE")),rt(H,G,""),rt(H,G,"esm2017"),rt("fire-js",""),rt("firebase","9.22.2","app");var mt,yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vt={},wt=wt||{},Et=yt||self;function bt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Tt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ct="closure_uid_"+(1e9*Math.random()>>>0),St=0;function It(t,e,n){return t.call.apply(t.bind,arguments)}function At(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _t(t,e,n){return(_t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?It:At).apply(null,arguments)}function Dt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function kt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return e.prototype[n].apply(t,r)}}function Nt(){this.s=this.s,this.o=this.o}Nt.prototype.s=!1,Nt.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Ct)&&t[Ct]||(t[Ct]=++St))},Nt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Lt(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Rt(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(bt(n)){const e=t.length||0,s=n.length||0;t.length=e+s;for(let r=0;r<s;r++)t[e+r]=n[r]}else t.push(n)}}function Mt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var Ot=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Et.addEventListener("test",(()=>{}),e),Et.removeEventListener("test",(()=>{}),e)}catch(t){}return t}();function Pt(t){return/^[\s\xa0]*$/.test(t)}function Ft(){var t=Et.navigator;return t&&(t=t.userAgent)?t:""}function Vt(t){return-1!=Ft().indexOf(t)}function Ut(t){return Ut[" "](t),t}Ut[" "]=function(){};var Bt,jt,qt,$t=Vt("Opera"),zt=Vt("Trident")||Vt("MSIE"),Kt=Vt("Edge"),Ht=Kt||zt,Gt=Vt("Gecko")&&!(-1!=Ft().toLowerCase().indexOf("webkit")&&!Vt("Edge"))&&!(Vt("Trident")||Vt("MSIE"))&&!Vt("Edge"),Qt=-1!=Ft().toLowerCase().indexOf("webkit")&&!Vt("Edge");function Wt(){var t=Et.document;return t?t.documentMode:void 0}t:{var Xt="",Yt=(jt=Ft(),Gt?/rv:([^\);]+)(\)|;)/.exec(jt):Kt?/Edge\/([\d\.]+)/.exec(jt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(jt):Qt?/WebKit\/(\S+)/.exec(jt):$t?/(?:Version)[ \/]?(\S+)/.exec(jt):void 0);if(Yt&&(Xt=Yt?Yt[1]:""),zt){var Jt=Wt();if(null!=Jt&&Jt>parseFloat(Xt)){Bt=String(Jt);break t}}Bt=Xt}Et.document&&zt?qt=Wt()||parseInt(Bt,10)||void 0:qt=void 0;var Zt=qt;function te(t,e){if(Mt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Gt){t:{try{Ut(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ee[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&te.$.h.call(this)}}kt(te,Mt);var ee={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),se=0;function re(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=r,this.key=++se,this.fa=this.ia=!1}function ie(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function oe(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function ae(t){const e={};for(const n in t)e[n]=t[n];return e}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(t,e){let n,s;for(let e=1;e<arguments.length;e++){for(n in s=arguments[e],s)t[n]=s[n];for(let e=0;e<ce.length;e++)n=ce[e],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function he(t){this.src=t,this.g={},this.h=0}function le(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=xt(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ie(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function de(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==s)return r}return-1}he.prototype.add=function(t,e,n,s,r){var i=t.toString();(t=this.g[i])||(t=this.g[i]=[],this.h++);var o=de(t,e,s,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new re(e,this.src,i,!!s,r)).ia=n,t.push(e)),e};var fe="closure_lm_"+(1e6*Math.random()|0),ge={};function pe(t,e,n,s,r){if(s&&s.once)return ye(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)pe(t,e[i],n,s,r);return null}return n=Se(n),t&&t[ne]?t.O(e,n,Tt(s)?!!s.capture:!!s,r):me(t,e,n,!1,s,r)}function me(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=Tt(r)?!!r.capture:!!r,a=Te(t);if(a||(t[fe]=a=new he(t)),(n=a.add(e,n,s,o,i)).proxy)return n;if(s=function(){const t=be;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)Ot||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(Ee(e.toString()),s);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(s)}return n}function ye(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)ye(t,e[i],n,s,r);return null}return n=Se(n),t&&t[ne]?t.P(e,n,Tt(s)?!!s.capture:!!s,r):me(t,e,n,!0,s,r)}function ve(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)ve(t,e[i],n,s,r);else s=Tt(s)?!!s.capture:!!s,n=Se(n),t&&t[ne]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=de(i=t.g[e],n,s,r))&&(ie(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete t.g[e],t.h--))):t&&(t=Te(t))&&(e=t.g[e.toString()],t=-1,e&&(t=de(e,n,s,r)),(n=-1<t?e[t]:null)&&we(n))}function we(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[ne])le(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Ee(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=Te(e))?(le(n,t),0==n.h&&(n.src=null,e[fe]=null)):ie(t)}}}function Ee(t){return t in ge?ge[t]:ge[t]="on"+t}function be(t,e){if(t.fa)t=!0;else{e=new te(e,this);var n=t.listener,s=t.la||t.src;t.ia&&we(t),t=n.call(s,e)}return t}function Te(t){return(t=t[fe])instanceof he?t:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(t){return"function"==typeof t?t:(t[Ce]||(t[Ce]=function(e){return t.handleEvent(e)}),t[Ce])}function Ie(){Nt.call(this),this.i=new he(this),this.S=this,this.J=null}function Ae(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,"string"==typeof e)e=new Mt(e,t);else if(e instanceof Mt)e.target=e.target||t;else{var r=e;ue(e=new Mt(s,t),r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=_e(o,s,!0,e)&&r}if(r=_e(o=e.g=t,s,!0,e)&&r,r=_e(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)r=_e(o=e.g=n[i],s,!1,e)&&r}function _e(t,e,n,s){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&le(t.i,o),r=!1!==a.call(c,s)&&r}}return r&&!s.defaultPrevented}kt(Ie,Nt),Ie.prototype[ne]=!0,Ie.prototype.removeEventListener=function(t,e,n,s){ve(this,t,e,n,s)},Ie.prototype.N=function(){if(Ie.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)ie(n[s]);delete e.g[t],e.h--}}this.J=null},Ie.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)},Ie.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};var De=Et.JSON.stringify;function ke(){var t=Pe;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ne=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new xe),(t=>t.reset()));class xe{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Le(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Re(t){Et.setTimeout((()=>{throw t}),0)}let Me,Oe=!1,Pe=new class{constructor(){this.h=this.g=null}add(t,e){const n=Ne.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Fe=()=>{const t=Et.Promise.resolve(void 0);Me=()=>{t.then(Ve)}};var Ve=()=>{for(var t;t=ke();){try{t.h.call(t.g)}catch(t){Re(t)}var e=Ne;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Oe=!1};function Ue(t,e){Ie.call(this),this.h=t||1,this.g=e||Et,this.j=_t(this.qb,this),this.l=Date.now()}function Be(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function je(t,e,n){if("function"==typeof t)n&&(t=_t(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_t(t.handleEvent,t)}return 2147483647<Number(e)?-1:Et.setTimeout(t,e||0)}function qe(t){t.g=je((()=>{t.g=null,t.i&&(t.i=!1,qe(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}kt(Ue,Ie),(mt=Ue.prototype).ga=!1,mt.T=null,mt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ae(this,"tick"),this.ga&&(Be(this),this.start()))}},mt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.N=function(){Ue.$.N.call(this),Be(this),delete this.g};class $e extends Nt{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:qe(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(t){Nt.call(this),this.h=t,this.g={}}kt(ze,Nt);var Ke=[];function He(t,e,n,s){Array.isArray(n)||(n&&(Ke[0]=n.toString()),n=Ke);for(var r=0;r<n.length;r++){var i=pe(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ge(t){oe(t.g,(function(t,e){this.g.hasOwnProperty(e)&&we(t)}),t),t.g={}}function Qe(){this.g=!0}function We(t,e,n,s){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<r.length;o++)r[o]=""}}}return De(n)}catch(t){return e}}(t,n)+(s?" "+s:"")}))}ze.prototype.N=function(){ze.$.N.call(this),Ge(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qe.prototype.Ea=function(){this.g=!1},Qe.prototype.info=function(){};var Xe={},Ye=null;function Je(){return Ye=Ye||new Ie}function Ze(t){Mt.call(this,Xe.Ta,t)}function tn(t){const e=Je();Ae(e,new Ze(e))}function en(t,e){Mt.call(this,Xe.STAT_EVENT,t),this.stat=e}function nn(t){const e=Je();Ae(e,new en(e,t))}function sn(t,e){Mt.call(this,Xe.Ua,t),this.size=e}function rn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Et.setTimeout((function(){t()}),e)}Xe.Ta="serverreachability",kt(Ze,Mt),Xe.STAT_EVENT="statevent",kt(en,Mt),Xe.Ua="timingevent",kt(sn,Mt);var on={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},an={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cn(){}function un(t){return t.h||(t.h=t.i())}function hn(){}cn.prototype.h=null;var ln,dn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fn(){Mt.call(this,"d")}function gn(){Mt.call(this,"c")}function pn(){}function mn(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new ze(this),this.P=vn,t=Ht?125:void 0,this.V=new Ue(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new yn}function yn(){this.i=null,this.g="",this.h=!1}kt(fn,Mt),kt(gn,Mt),kt(pn,cn),pn.prototype.g=function(){return new XMLHttpRequest},pn.prototype.i=function(){return{}},ln=new pn;var vn=45e3,wn={},En={};function bn(t,e,n){t.L=1,t.v=Bn(On(e)),t.s=n,t.S=!0,Tn(t,null)}function Tn(t,e){t.G=Date.now(),An(t),t.A=On(t.v);var n=t.A,s=t.W;Array.isArray(s)||(s=[String(s)]),Zn(n.i,"t",s),t.C=0,n=t.l.J,t.h=new yn,t.g=Js(t.l,n?e:null,!t.s),0<t.O&&(t.M=new $e(_t(t.Pa,t,t.g),t.O)),He(t.U,t.g,"readystatechange",t.nb),e=t.I?ae(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),tn(),function(t,e,n,s,r,i){t.info((function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var h=u[0];u=u[1];var l=h.split("_");o=2<=l.length&&"type"==l[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.W,t.s)}function Cn(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function Sn(t,e,n){let s,r=!0;for(;!t.J&&t.C<n.length;){if(s=In(t,n),s==En){4==e&&(t.o=4,nn(14),r=!1),We(t.j,t.m,null,"[Incomplete Response]");break}if(s==wn){t.o=4,nn(15),We(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}We(t.j,t.m,s,null),xn(t,s)}Cn(t)&&s!=En&&s!=wn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,nn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zs(e),e.M=!0,nn(11))):(We(t.j,t.m,n,"[Invalid Chunked Response]"),Nn(t),kn(t))}function In(t,e){var n=t.C,s=e.indexOf("\n",n);return-1==s?En:(n=Number(e.substring(n,s)),isNaN(n)?wn:(s+=1)+n>e.length?En:(e=e.slice(s,s+n),t.C=s+n,e))}function An(t){t.Y=Date.now()+t.P,_n(t,t.P)}function _n(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=rn(_t(t.lb,t),e)}function Dn(t){t.B&&(Et.clearTimeout(t.B),t.B=null)}function kn(t){0==t.l.H||t.J||Gs(t.l,t)}function Nn(t){Dn(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Be(t.V),Ge(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function xn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||is(n.i,t)))if(!t.K&&is(n.i,t)&&3==n.H){try{var s=n.Ja.g.parse(e)}catch(t){s=null}if(Array.isArray(s)&&3==s.length){var r=s;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Hs(n),Ps(n)}$s(n),nn(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=rn(_t(n.ib,n),6e3));if(1>=rs(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Ws(n,11)}else if((t.K||n.g==t)&&Hs(n),!Pt(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const e=u[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=u[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const h=u[5];null!=h&&"number"==typeof h&&0<h&&(s=1.5*h,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const l=t.g;if(l){const t=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var i=s.i;i.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(os(i,i.h),i.h=null))}if(s.F){const t=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(s.Da=t,Un(s.I,s.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((s=n).wa=Ys(s,s.J?s.pa:null,s.Y),o.K){as(s.i,o);var a=o,c=s.L;c&&a.setTimeout(c),a.B&&(Dn(a),An(a)),s.g=o}else qs(s);0<n.j.length&&Vs(n)}else"stop"!=u[0]&&"close"!=u[0]||Ws(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Ws(n,7):Os(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}tn()}catch(t){}}function Ln(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(bt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(bt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}(t),s=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(bt(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}for(s in e=[],n=0,t)e[n++]=t[s];return e}(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}(mt=mn.prototype).setTimeout=function(t){this.P=t},mt.nb=function(t){t=t.target;const e=this.M;e&&3==ks(t)?e.l():this.Pa(t)},mt.Pa=function(t){try{if(t==this.g)t:{const h=ks(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||Ht||this.g&&(this.h.h||this.g.ja()||Ns(this.g)))){this.J||4!=h||7==e||tn(),Dn(this);var n=this.g.da();this.ca=n;e:if(Cn(this)){var s=Ns(this.g);t="";var r=s.length,i=4==ks(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nn(this),kn(this);var o="";break e}this.h.i=new Et.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,s,r,i,o){t.info((function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pt(a)){var u=a;break e}}u=null}if(!(n=u)){this.i=!1,this.o=3,nn(12),Nn(this),kn(this);break t}We(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xn(this,n)}this.S?(Sn(this,h,o),Ht&&this.i&&3==h&&(He(this.U,this.V,"tick",this.mb),this.V.start())):(We(this.j,this.m,o,null),xn(this,o)),4==h&&Nn(this),this.i&&!this.J&&(4==h?Gs(this.l,this):(this.i=!1,An(this)))}else(function(t){const e={};t=(t.g&&2<=ks(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<t.length;s++){if(Pt(t[s]))continue;var n=Le(t[s]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=e[r]||[];e[r]=i,i.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,nn(12)):(this.o=0,nn(13)),Nn(this),kn(this)}}}catch(t){}},mt.mb=function(){if(this.g){var t=ks(this.g),e=this.g.ja();this.C<e.length&&(Dn(this),Sn(this,t,e),this.i&&4!=t&&An(this))}},mt.cancel=function(){this.J=!0,Nn(this)},mt.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.L&&(tn(),nn(17)),Nn(this),this.o=2,kn(this)):_n(this,this.Y-t)};var Rn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Mn){this.h=t.h,Pn(this,t.j),this.s=t.s,this.g=t.g,Fn(this,t.m),this.l=t.l;var e=t.i,n=new Wn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Vn(this,n),this.o=t.o}else t&&(e=String(t).match(Rn))?(this.h=!1,Pn(this,e[1]||"",!0),this.s=jn(e[2]||""),this.g=jn(e[3]||"",!0),Fn(this,e[4]),this.l=jn(e[5]||"",!0),Vn(this,e[6]||"",!0),this.o=jn(e[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}function On(t){return new Mn(t)}function Pn(t,e,n){t.j=n?jn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Vn(t,e,n){e instanceof Wn?(t.i=e,function(t,e){e&&!t.j&&(Xn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=qn(e,Gn)),t.i=new Wn(e,t.h))}function Un(t,e,n){t.i.set(e,n)}function Bn(t){return Un(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$n),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $n(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qn(e,zn,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Hn:Kn,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qn(n,Qn)),t.join("")};var zn=/[#\/\?@]/g,Kn=/[#\?:]/g,Hn=/[#\?]/g,Gn=/[#\?@]/g,Qn=/#/g;function Wn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xn(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t,e){Xn(t),e=ts(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Jn(t,e){return Xn(t),e=ts(t,e),t.g.has(e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.i=null,t.g.set(ts(t,e),Lt(n)),t.h+=n.length)}function ts(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function es(t){this.l=t||ns,t=Et.PerformanceNavigationTiming?0<(t=Et.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=Wn.prototype).add=function(t,e){Xn(this),this.i=null,t=ts(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},mt.forEach=function(t,e){Xn(this),this.g.forEach((function(n,s){n.forEach((function(n){t.call(e,n,s,this)}),this)}),this)},mt.ta=function(){Xn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let t=0;t<r.length;t++)n.push(e[s])}return n},mt.Z=function(t){Xn(this);let e=[];if("string"==typeof t)Jn(this,t)&&(e=e.concat(this.g.get(ts(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},mt.set=function(t,e){return Xn(this),this.i=null,Jn(this,t=ts(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},mt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var r=i;""!==o[s]&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};var ns=10;function ss(t){return!!t.h||!!t.g&&t.g.size>=t.j}function rs(t){return t.h?1:t.g?t.g.size:0}function is(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function os(t,e){t.g?t.g.add(e):t.h=e}function as(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function cs(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Lt(t.i)}es.prototype.cancel=function(){if(this.i=cs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var us=class{stringify(t){return Et.JSON.stringify(t,void 0)}parse(t){return Et.JSON.parse(t,void 0)}};function hs(){this.g=new us}function ls(t,e,n){const s=n||"";try{Ln(t,(function(t,n){let r=t;Tt(t)&&(r=De(t)),e.push(s+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}function ds(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch(t){}}function fs(t){this.l=t.fc||null,this.j=t.ob||!1}function gs(t,e){Ie.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kt(fs,cn),fs.prototype.g=function(){return new gs(this.l,this.j)},fs.prototype.i=function(t){return function(){return t}}({}),kt(gs,Ie);var ps=0;function ms(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function ys(t){t.readyState=4,t.l=null,t.j=null,t.A=null,vs(t)}function vs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(mt=gs.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,vs(this)},mt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ys(this)),this.readyState=ps},mt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,vs(this)),this.g&&(this.readyState=3,vs(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Et.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ms(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},mt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ys(this):vs(this),3==this.readyState&&ms(this)}},mt.Za=function(t){this.g&&(this.response=this.responseText=t,ys(this))},mt.Ya=function(t){this.g&&(this.response=t,ys(this))},mt.ka=function(){this.g&&ys(this)},mt.setRequestHeader=function(t,e){this.v.append(t,e)},mt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(gs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ws=Et.JSON.parse;function Es(t){Ie.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bs,this.L=this.M=!1}kt(Es,Ie);var bs="",Ts=/^https?$/i,Cs=["POST","PUT"];function Ss(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Is(t),_s(t)}function Is(t){t.F||(t.F=!0,Ae(t,"complete"),Ae(t,"error"))}function As(t){if(t.h&&void 0!==wt&&(!t.C[1]||4!=ks(t)||2!=t.da()))if(t.v&&4==ks(t))je(t.La,0,t);else if(Ae(t,"readystatechange"),4==ks(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===o){var r=String(t.I).match(Rn)[1]||null;!r&&Et.self&&Et.self.location&&(r=Et.self.location.protocol.slice(0,-1)),s=!Ts.test(r?r.toLowerCase():"")}n=s}if(n)Ae(t,"complete"),Ae(t,"success");else{t.m=6;try{var i=2<ks(t)?t.g.statusText:""}catch(t){i=""}t.j=i+" ["+t.da()+"]",Is(t)}}finally{_s(t)}}}function _s(t,e){if(t.g){Ds(t);const n=t.g,s=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ae(t,"ready");try{n.onreadystatechange=s}catch(t){}}}function Ds(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Et.clearTimeout(t.A),t.A=null)}function ks(t){return t.g?t.g.readyState:0}function Ns(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case bs:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function xs(t){let e="";return oe(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Ls(t,e,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=xs(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Un(t,e,n))}function Rs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ms(t){this.Ga=0,this.j=[],this.l=new Qe,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rs("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rs("baseRetryDelayMs",5e3,t),this.hb=Rs("retryDelaySeedMs",1e4,t),this.eb=Rs("forwardChannelMaxRetries",2,t),this.xa=Rs("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new es(t&&t.concurrentRequestLimit),this.Ja=new hs,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Os(t){if(Fs(t),3==t.H){var e=t.W++,n=On(t.I);if(Un(n,"SID",t.K),Un(n,"RID",e),Un(n,"TYPE","terminate"),Bs(t,n),(e=new mn(t,t.l,e)).L=2,e.v=Bn(On(n)),n=!1,Et.navigator&&Et.navigator.sendBeacon)try{n=Et.navigator.sendBeacon(e.v.toString(),"")}catch(t){}!n&&Et.Image&&((new Image).src=e.v,n=!0),n||(e.g=Js(e.l,null),e.g.ha(e.v)),e.G=Date.now(),An(e)}Xs(t)}function Ps(t){t.g&&(zs(t),t.g.cancel(),t.g=null)}function Fs(t){Ps(t),t.u&&(Et.clearTimeout(t.u),t.u=null),Hs(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Et.clearTimeout(t.m),t.m=null)}function Vs(t){if(!ss(t.i)&&!t.m){t.m=!0;var e=t.Na;Me||Fe(),Oe||(Me(),Oe=!0),Pe.add(e,t),t.C=0}}function Us(t,e){var n;n=e?e.m:t.W++;const s=On(t.I);Un(s,"SID",t.K),Un(s,"RID",n),Un(s,"AID",t.V),Bs(t,s),t.o&&t.s&&Ls(s,t.o,t.s),n=new mn(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=js(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),os(t.i,n),bn(n,s,e)}function Bs(t,e){t.na&&oe(t.na,(function(t,n){Un(e,n,t)})),t.h&&Ln({},(function(t,n){Un(e,n,t)}))}function js(t,e,n){n=Math.min(t.j.length,n);var s=t.h?_t(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let i=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),i=!1;else try{ls(a,t,"req"+n+"_")}catch(t){s&&s(a)}}if(i){s=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,s}function qs(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Me||Fe(),Oe||(Me(),Oe=!0),Pe.add(e,t),t.A=0}}function $s(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=rn(_t(t.Ma,t),Qs(t,t.A)),t.A++,0))}function zs(t){null!=t.B&&(Et.clearTimeout(t.B),t.B=null)}function Ks(t){t.g=new mn(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=On(t.wa);Un(e,"RID","rpc"),Un(e,"SID",t.K),Un(e,"AID",t.V),Un(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Un(e,"TO",t.qa),Un(e,"TYPE","xmlhttp"),Bs(t,e),t.o&&t.s&&Ls(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Bn(On(e)),n.s=null,n.S=!0,Tn(n,t)}function Hs(t){null!=t.v&&(Et.clearTimeout(t.v),t.v=null)}function Gs(t,e){var n=null;if(t.g==e){Hs(t),zs(t),t.g=null;var s=2}else{if(!is(t.i,e))return;n=e.F,as(t.i,e),s=1}if(0!=t.H)if(e.i)if(1==s){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;Ae(s=Je(),new sn(s,n)),Vs(t)}else qs(t);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==s&&function(t,e){return!(rs(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=rn(_t(t.Na,t,e),Qs(t,t.C)),t.C++,0)))}(t,e)||2==s&&$s(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ws(t,5);break;case 4:Ws(t,10);break;case 3:Ws(t,6);break;default:Ws(t,2)}}function Qs(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ws(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var s=_t(t.pb,t);n||(n=new Mn("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||Pn(n,"https"),Bn(n)),function(t,e){const n=new Qe;if(Et.Image){const s=new Image;s.onload=Dt(ds,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Dt(ds,n,s,"TestLoadImage: error",!1,e),s.onabort=Dt(ds,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Dt(ds,n,s,"TestLoadImage: timeout",!1,e),Et.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=t}else e(!1)}(n.toString(),s)}else nn(2);t.H=0,t.h&&t.h.za(e),Xs(t),Fs(t)}function Xs(t){if(t.H=0,t.ma=[],t.h){const e=cs(t.i);0==e.length&&0==t.j.length||(Rt(t.ma,e),Rt(t.ma,t.j),t.i.i.length=0,Lt(t.j),t.j.length=0),t.h.ya()}}function Ys(t,e,n){var s=n instanceof Mn?On(n):new Mn(n);if(""!=s.g)e&&(s.g=e+"."+s.g),Fn(s,s.m);else{var r=Et.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new Mn(null);s&&Pn(i,s),e&&(i.g=e),r&&Fn(i,r),n&&(i.l=n),s=i}return n=t.F,e=t.Da,n&&e&&Un(s,n,e),Un(s,"VER",t.ra),Bs(t,s),s}function Js(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ha&&!t.va?new Es(new fs({ob:!0})):new Es(t.va)).Oa(t.J),e}function Zs(){}function tr(){if(zt&&!(10<=Number(Zt)))throw Error("Environmental error: no available transport.")}function er(t,e){Ie.call(this),this.g=new Ms(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Pt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pt(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new rr(this)}function nr(t){fn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function sr(){gn.call(this),this.status=1}function rr(t){this.g=t}function ir(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function or(t,e,n){n||(n=0);var s=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)s[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)s[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var i=t.g[3],o=e+(i^n&(r^i))+s[0]+3614090360&4294967295;o=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=n+(o<<7&4294967295|o>>>25))+((o=i+(r^e&(n^r))+s[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(e^n))+s[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(i^e))+s[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(r^i))+s[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^e&(n^r))+s[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(e^n))+s[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(i^e))+s[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(r^i))+s[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^e&(n^r))+s[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(e^n))+s[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(i^e))+s[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(r^i))+s[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^e&(n^r))+s[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(e^n))+s[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(i^e))+s[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^i&(n^r))+s[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(e^n))+s[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(i^e))+s[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(r^i))+s[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^i&(n^r))+s[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(e^n))+s[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(i^e))+s[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(r^i))+s[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^i&(n^r))+s[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(e^n))+s[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(i^e))+s[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(r^i))+s[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^i&(n^r))+s[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(e^n))+s[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(i^e))+s[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(r^i))+s[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^i)+s[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^r)+s[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^e^n)+s[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^e)+s[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^i)+s[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^r)+s[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^e^n)+s[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^e)+s[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^i)+s[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^r)+s[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^e^n)+s[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^e)+s[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^i)+s[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^r)+s[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^e^n)+s[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^e)+s[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~i))+s[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~r))+s[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(i|~n))+s[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~e))+s[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~i))+s[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~r))+s[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(i|~n))+s[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~e))+s[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~i))+s[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~r))+s[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(i|~n))+s[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~e))+s[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(e=n+((o=e+(r^(n|~i))+s[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~r))+s[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=i+((o=r+(e^(i|~n))+s[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+i&4294967295}function ar(t,e){this.h=e;for(var n=[],s=!0,r=t.length-1;0<=r;r--){var i=0|t[r];s&&i==e||(n[r]=i,s=!1)}this.g=n}(mt=Es.prototype).Oa=function(t){this.M=t},mt.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ln.g(),this.C=this.u?un(this.u):un(ln),this.g.onreadystatechange=_t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Ss(this,t)}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const t of s.keys())n.set(t,s.get(t))}s=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Et.FormData&&t instanceof Et.FormData,!(0<=xt(Cs,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ds(this),0<this.B&&((this.L=function(t){return zt&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_t(this.ua,this)):this.A=je(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Ss(this,t)}},mt.ua=function(){void 0!==wt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ae(this,"timeout"),this.abort(8))},mt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ae(this,"complete"),Ae(this,"abort"),_s(this))},mt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_s(this,!0)),Es.$.N.call(this)},mt.La=function(){this.s||(this.G||this.v||this.l?As(this):this.kb())},mt.kb=function(){As(this)},mt.isActive=function(){return!!this.g},mt.da=function(){try{return 2<ks(this)?this.g.status:-1}catch(t){return-1}},mt.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},mt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ws(e)}},mt.Ia=function(){return this.m},mt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=Ms.prototype).ra=8,mt.H=1,mt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new mn(this,this.l,t);let i=this.s;if(this.U&&(i?(i=ae(i),ue(i,this.U)):i=this.U),null!==this.o||this.O||(r.I=i,i=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var s=this.j[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=js(this,r,e),Un(n=On(this.I),"RID",t),Un(n,"CVER",22),this.F&&Un(n,"X-HTTP-Session-Id",this.F),Bs(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(xs(i)))+"&"+e:this.o&&Ls(n,this.o,i)),os(this.i,r),this.bb&&Un(n,"TYPE","init"),this.P?(Un(n,"$req",e),Un(n,"SID","null"),r.aa=!0,bn(r,n,null)):bn(r,n,e),this.H=2}}else 3==this.H&&(t?Us(this,t):0==this.j.length||ss(this.i)||Us(this))},mt.Ma=function(){if(this.u=null,Ks(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=rn(_t(this.jb,this),t)}},mt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nn(10),Ps(this),Ks(this))},mt.ib=function(){null!=this.v&&(this.v=null,Ps(this),$s(this),nn(19))},mt.pb=function(t){t?(this.l.info("Successfully pinged google.com"),nn(2)):(this.l.info("Failed to ping google.com"),nn(1))},mt.isActive=function(){return!!this.h&&this.h.isActive(this)},(mt=Zs.prototype).Ba=function(){},mt.Aa=function(){},mt.za=function(){},mt.ya=function(){},mt.isActive=function(){return!0},mt.Va=function(){},tr.prototype.g=function(t,e){return new er(t,e)},kt(er,Ie),er.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;nn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ys(t,null,t.Y),Vs(t)},er.prototype.close=function(){Os(this.g)},er.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=De(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Vs(e)},er.prototype.N=function(){this.g.h=null,delete this.j,Os(this.g),delete this.g,er.$.N.call(this)},kt(nr,fn),kt(sr,gn),kt(rr,Zs),rr.prototype.Ba=function(){Ae(this.g,"a")},rr.prototype.Aa=function(t){Ae(this.g,new nr(t))},rr.prototype.za=function(t){Ae(this.g,new sr)},rr.prototype.ya=function(){Ae(this.g,"b")},kt(ir,(function(){this.blockSize=-1})),ir.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ir.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,s=this.m,r=this.h,i=0;i<e;){if(0==r)for(;i<=n;)or(this,t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(s[r++]=t.charCodeAt(i++),r==this.blockSize){or(this,s),r=0;break}}else for(;i<e;)if(s[r++]=t[i++],r==this.blockSize){or(this,s),r=0;break}}this.h=r,this.i+=e},ir.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};var cr={};function ur(t){return-128<=t&&128>t?function(t,e){var n=cr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new ar([0|t],0>t?-1:0)}(t)}(t):new ar([0|t],0>t?-1:0)}function hr(t){if(isNaN(t)||!isFinite(t))return dr;if(0>t)return yr(hr(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=lr;return new ar(e,0)}var lr=4294967296,dr=ur(0),fr=ur(1),gr=ur(16777216);function pr(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function mr(t){return-1==t.h}function yr(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new ar(n,~t.h).add(fr)}function vr(t,e){return t.add(yr(e))}function wr(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Er(t,e){this.g=t,this.h=e}function br(t,e){if(pr(e))throw Error("division by zero");if(pr(t))return new Er(dr,dr);if(mr(t))return e=br(yr(t),e),new Er(yr(e.g),yr(e.h));if(mr(e))return e=br(t,yr(e)),new Er(yr(e.g),e.h);if(30<t.g.length){if(mr(t)||mr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=fr,s=e;0>=s.X(t);)n=Tr(n),s=Tr(s);var r=Cr(n,1),i=Cr(s,1);for(s=Cr(s,2),n=Cr(n,2);!pr(s);){var o=i.add(s);0>=o.X(t)&&(r=r.add(n),i=o),s=Cr(s,1),n=Cr(n,1)}return e=vr(t,r.R(e)),new Er(r,e)}for(r=dr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),o=(i=hr(n)).R(e);mr(o)||0<o.X(t);)o=(i=hr(n-=s)).R(e);pr(i)&&(i=fr),r=r.add(i),t=vr(t,o)}return new Er(r,t)}function Tr(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new ar(n,t.h)}function Cr(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,r=[],i=0;i<s;i++)r[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ar(r,t.h)}(mt=ar.prototype).ea=function(){if(mr(this))return-yr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:lr+s)*e,e*=lr}return t},mt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(pr(this))return"0";if(mr(this))return"-"+yr(this).toString(t);for(var e=hr(Math.pow(t,6)),n=this,s="";;){var r=br(n,e).g,i=((0<(n=vr(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(pr(n=r))return i+s;for(;6>i.length;)i="0"+i;s=i+s}},mt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},mt.X=function(t){return mr(t=vr(this,t))?-1:pr(t)?0:1},mt.abs=function(){return mr(this)?yr(this):this},mt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,r=0;r<=e;r++){var i=s+(65535&this.D(r))+(65535&t.D(r)),o=(i>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);s=o>>>16,i&=65535,o&=65535,n[r]=o<<16|i}return new ar(n,-2147483648&n[n.length-1]?-1:0)},mt.R=function(t){if(pr(this)||pr(t))return dr;if(mr(this))return mr(t)?yr(this).R(yr(t)):yr(yr(this).R(t));if(mr(t))return yr(this.R(yr(t)));if(0>this.X(gr)&&0>t.X(gr))return hr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var r=0;r<t.g.length;r++){var i=this.D(s)>>>16,o=65535&this.D(s),a=t.D(r)>>>16,c=65535&t.D(r);n[2*s+2*r]+=o*c,wr(n,2*s+2*r),n[2*s+2*r+1]+=i*c,wr(n,2*s+2*r+1),n[2*s+2*r+1]+=o*a,wr(n,2*s+2*r+1),n[2*s+2*r+2]+=i*a,wr(n,2*s+2*r+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new ar(n,0)},mt.gb=function(t){return br(this,t).h},mt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new ar(n,this.h&t.h)},mt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new ar(n,this.h|t.h)},mt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new ar(n,this.h^t.h)},tr.prototype.createWebChannel=tr.prototype.g,er.prototype.send=er.prototype.u,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,an.COMPLETE="complete",hn.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",Ie.prototype.listen=Ie.prototype.O,Es.prototype.listenOnce=Es.prototype.P,Es.prototype.getLastError=Es.prototype.Sa,Es.prototype.getLastErrorCode=Es.prototype.Ia,Es.prototype.getStatus=Es.prototype.da,Es.prototype.getResponseJson=Es.prototype.Wa,Es.prototype.getResponseText=Es.prototype.ja,Es.prototype.send=Es.prototype.ha,Es.prototype.setWithCredentials=Es.prototype.Oa,ir.prototype.digest=ir.prototype.l,ir.prototype.reset=ir.prototype.reset,ir.prototype.update=ir.prototype.j,ar.prototype.add=ar.prototype.add,ar.prototype.multiply=ar.prototype.R,ar.prototype.modulo=ar.prototype.gb,ar.prototype.compare=ar.prototype.X,ar.prototype.toNumber=ar.prototype.ea,ar.prototype.toString=ar.prototype.toString,ar.prototype.getBits=ar.prototype.D,ar.fromNumber=hr,ar.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return yr(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=hr(Math.pow(n,8)),r=dr,i=0;i<e.length;i+=8){var o=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+o),n);8>o?(o=hr(Math.pow(n,o)),r=r.R(o).add(hr(a))):r=(r=r.R(s)).add(hr(a))}return r};var Sr=vt.createWebChannelTransport=function(){return new tr},Ir=vt.getStatEventTarget=function(){return Je()},Ar=vt.ErrorCode=on,_r=vt.EventType=an,Dr=vt.Event=Xe,kr=vt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Nr=vt.FetchXmlHttpFactory=fs,xr=vt.WebChannel=hn,Lr=vt.XhrIo=Es,Rr=vt.Md5=ir,Mr=vt.Integer=ar;const Or="@firebase/firestore";class Pr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let Fr="9.22.2";const Vr=new _("@firebase/firestore");function Ur(){return Vr.logLevel}function Br(t,...e){if(Vr.logLevel<=b.DEBUG){const n=e.map($r);Vr.debug(`Firestore (${Fr}): ${t}`,...n)}}function jr(t,...e){if(Vr.logLevel<=b.ERROR){const n=e.map($r);Vr.error(`Firestore (${Fr}): ${t}`,...n)}}function qr(t,...e){if(Vr.logLevel<=b.WARN){const n=e.map($r);Vr.warn(`Firestore (${Fr}): ${t}`,...n)}}function $r(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function zr(t="Unexpected state"){const e=`FIRESTORE (${Fr}) INTERNAL ASSERTION FAILED: `+t;throw jr(e),new Error(e)}function Kr(t,e){t||zr()}function Hr(t,e){return t}const Gr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qr extends h{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Xr{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Yr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Pr.UNAUTHENTICATED)))}shutdown(){}}class Jr{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Zr{constructor(t){this.t=t,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const s=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Wr,t.enqueueRetryable((()=>s(this.currentUser)))};const i=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await s(this.currentUser)}))},o=t=>{Br("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Br("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Wr)}}),0),i()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Br("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Kr("string"==typeof e.accessToken),new Xr(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Kr(null===t||"string"==typeof t),new Pr(t)}}class ti{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ei{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new ti(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(Pr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ni{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class si{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const n=t=>{null!=t.error&&Br("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.T;return this.T=t.token,Br("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const s=t=>{Br("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.I.onInit((t=>s(t))),setTimeout((()=>{if(!this.appCheck){const t=this.I.getImmediate({optional:!0});t?s(t):Br("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Kr("string"==typeof t.token),this.T=t.token,new ni(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ri(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ii{static A(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=ri(40);for(let s=0;s<n.length;++s)e.length<20&&n[s]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[s]%62))}return e}}function oi(t,e){return t<e?-1:t>e?1:0}function ai(t,e,n){return t.length===e.length&&t.every(((t,s)=>n(t,e[s])))}class ci{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ci.fromMillis(Date.now())}static fromDate(t){return ci.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ci(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?oi(this.nanoseconds,t.nanoseconds):oi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ui{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ui(t)}static min(){return new ui(new ci(0,0))}static max(){return new ui(new ci(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hi{constructor(t,e,n){void 0===e?e=0:e>t.length&&zr(),void 0===n?n=t.length-e:n>t.length-e&&zr(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===hi.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof hi?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const n=t.get(s),r=e.get(s);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class li extends hi{construct(t,e,n){return new li(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Qr(Gr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new li(e)}static emptyPath(){return new li([])}}const di=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends hi{construct(t,e,n){return new fi(t,e,n)}static isValidIdentifier(t){return di.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fi(["__name__"])}static fromServerFormat(t){const e=[];let n="",s=0;const r=()=>{if(0===n.length)throw new Qr(Gr.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let i=!1;for(;s<t.length;){const e=t[s];if("\\"===e){if(s+1===t.length)throw new Qr(Gr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[s+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Qr(Gr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,s+=2}else"`"===e?(i=!i,s++):"."!==e||i?(n+=e,s++):(r(),s++)}if(r(),i)throw new Qr(Gr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fi(e)}static emptyPath(){return new fi([])}}class gi{constructor(t){this.path=t}static fromPath(t){return new gi(li.fromString(t))}static fromName(t){return new gi(li.fromString(t).popFirst(5))}static empty(){return new gi(li.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===li.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return li.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gi(new li(t.slice()))}}function pi(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new mi(ui.min(),gi.empty(),-1)}static max(){return new mi(ui.max(),gi.empty(),-1)}}function yi(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=gi.comparator(t.documentKey,e.documentKey),0!==n?n:oi(t.largestBatchId,e.largestBatchId))}const vi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ei(t){if(t.code!==Gr.FAILED_PRECONDITION||t.message!==vi)throw t;Br("LocalStore","Unexpectedly lost primary lease")}class bi{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&zr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new bi(((n,s)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,s)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof bi?e:bi.resolve(e)}catch(t){return bi.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):bi.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):bi.reject(e)}static resolve(t){return new bi(((e,n)=>{e(t)}))}static reject(t){return new bi(((e,n)=>{n(t)}))}static waitFor(t){return new bi(((e,n)=>{let s=0,r=0,i=!1;t.forEach((t=>{++s,t.next((()=>{++r,i&&r===s&&e()}),(t=>n(t)))})),i=!0,r===s&&e()}))}static or(t){let e=bi.resolve(!1);for(const n of t)e=e.next((t=>t?bi.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,s)=>{n.push(e.call(this,t,s))})),this.waitFor(n)}static mapArray(t,e){return new bi(((n,s)=>{const r=t.length,i=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{i[c]=t,++o,o===r&&n(i)}),(t=>s(t)))}}))}static doWhile(t,e){return new bi(((n,s)=>{const r=()=>{!0===t()?e().next((()=>{r()}),s):n()};r()}))}}function Ti(t){return"IndexedDbTransactionError"===t.name}class Ci{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ot(t),this.ut=t=>e.writeSequenceNumber(t))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}function Si(t){return null==t}function Ii(t){return 0===t&&1/t==-1/0}Ci.ct=-1;function Ai(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _i(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Di(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ki{constructor(t,e){this.comparator=t,this.root=e||xi.EMPTY}insert(t,e){return new ki(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(t){return new ki(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(0===s)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ni(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ni(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ni(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ni(this.root,t,this.comparator,!0)}}class Ni{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xi{constructor(t,e,n,s,r){this.key=t,this.value=e,this.color=null!=n?n:xi.RED,this.left=null!=s?s:xi.EMPTY,this.right=null!=r?r:xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,r){return new xi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const r=n(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,e,n),null):0===r?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===e(t,s.key)){if(s.right.isEmpty())return xi.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zr();if(this.right.isRed())throw zr();const t=this.left.check();if(t!==this.right.check())throw zr();return t+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1,xi.EMPTY=new class{constructor(){this.size=0}get key(){throw zr()}get value(){throw zr()}get color(){throw zr()}get left(){throw zr()}get right(){throw zr()}copy(t,e,n,s,r){return this}insert(t,e,n){return new xi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Li{constructor(t){this.comparator=t,this.data=new ki(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ri(this.data.getIterator())}getIteratorFrom(t){return new Ri(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Li))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(0!==this.comparator(t,s))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Li(this.comparator);return e.data=t,e}}class Ri{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mi{constructor(t){this.fields=t,t.sort(fi.comparator)}static empty(){return new Mi([])}unionWith(t){let e=new Li(fi.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Mi(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ai(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Oi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Oi("Invalid base64 string: "+t):t}}(t);return new Pi(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Pi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return oi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pi.EMPTY_BYTE_STRING=new Pi("");const Fi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(t){if(Kr(!!t),"string"==typeof t){let e=0;const n=Fi.exec(t);if(Kr(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ui(t.seconds),nanos:Ui(t.nanos)}}function Ui(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Bi(t){return"string"==typeof t?Pi.fromBase64String(t):Pi.fromUint8Array(t)}function ji(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qi(t){const e=t.mapValue.fields.__previous_value__;return ji(e)?qi(e):e}function $i(t){const e=Vi(t.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}class zi{constructor(t,e,n,s,r,i,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ki{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Ki&&t.projectId===this.projectId&&t.database===this.database}}const Hi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ji(t)?4:oo(t)?9007199254740991:10:zr()}function Qi(t,e){if(t===e)return!0;const n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $i(t).isEqual($i(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Vi(t.timestampValue),s=Vi(e.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Bi(t.bytesValue).isEqual(Bi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ui(t.geoPointValue.latitude)===Ui(e.geoPointValue.latitude)&&Ui(t.geoPointValue.longitude)===Ui(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ui(t.integerValue)===Ui(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ui(t.doubleValue),s=Ui(e.doubleValue);return n===s?Ii(n)===Ii(s):isNaN(n)&&isNaN(s)}return!1}(t,e);case 9:return ai(t.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:return function(t,e){const n=t.mapValue.fields||{},s=e.mapValue.fields||{};if(Ai(n)!==Ai(s))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===s[t]||!Qi(n[t],s[t])))return!1;return!0}(t,e);default:return zr()}}function Wi(t,e){return void 0!==(t.values||[]).find((t=>Qi(t,e)))}function Xi(t,e){if(t===e)return 0;const n=Gi(t),s=Gi(e);if(n!==s)return oi(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return oi(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ui(t.integerValue||t.doubleValue),s=Ui(e.integerValue||e.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(t,e);case 3:return Yi(t.timestampValue,e.timestampValue);case 4:return Yi($i(t),$i(e));case 5:return oi(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Bi(t),s=Bi(e);return n.compareTo(s)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),s=e.split("/");for(let t=0;t<n.length&&t<s.length;t++){const e=oi(n[t],s[t]);if(0!==e)return e}return oi(n.length,s.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=oi(Ui(t.latitude),Ui(e.latitude));return 0!==n?n:oi(Ui(t.longitude),Ui(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],s=e.values||[];for(let t=0;t<n.length&&t<s.length;++t){const e=Xi(n[t],s[t]);if(e)return e}return oi(n.length,s.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Hi.mapValue&&e===Hi.mapValue)return 0;if(t===Hi.mapValue)return 1;if(e===Hi.mapValue)return-1;const n=t.fields||{},s=Object.keys(n),r=e.fields||{},i=Object.keys(r);s.sort(),i.sort();for(let t=0;t<s.length&&t<i.length;++t){const e=oi(s[t],i[t]);if(0!==e)return e;const o=Xi(n[s[t]],r[i[t]]);if(0!==o)return o}return oi(s.length,i.length)}(t.mapValue,e.mapValue);default:throw zr()}}function Yi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oi(t,e);const n=Vi(t),s=Vi(e),r=oi(n.seconds,s.seconds);return 0!==r?r:oi(n.nanos,s.nanos)}function Ji(t){return Zi(t)}function Zi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Vi(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Bi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,gi.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const s of t.values||[])n?n=!1:e+=",",e+=Zi(s);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",s=!0;for(const r of e)s?s=!1:n+=",",n+=`${r}:${Zi(t.fields[r])}`;return n+"}"}(t.mapValue):zr();var e,n}function to(t){return!!t&&"integerValue"in t}function eo(t){return!!t&&"arrayValue"in t}function no(t){return!!t&&"nullValue"in t}function so(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ro(t){return!!t&&"mapValue"in t}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _i(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=io(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oo(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class ao{constructor(t){this.value=t}static empty(){return new ao({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ro(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=io(e)}setAll(t){let e=fi.emptyPath(),n={},s=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,s),n={},s=[],e=r.popLast()}t?n[r.lastSegment()]=io(t):s.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,s)}delete(t){const e=this.field(t.popLast());ro(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Qi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];ro(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){_i(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new ao(io(this.value))}}function co(t){const e=[];return _i(t.fields,((t,n)=>{const s=new fi([t]);if(ro(n)){const t=co(n.mapValue).fields;if(0===t.length)e.push(s);else for(const n of t)e.push(s.child(n))}else e.push(s)})),new Mi(e)}class uo{constructor(t,e,n,s,r,i,o){this.key=t,this.documentType=e,this.version=n,this.readTime=s,this.createTime=r,this.data=i,this.documentState=o}static newInvalidDocument(t){return new uo(t,0,ui.min(),ui.min(),ui.min(),ao.empty(),0)}static newFoundDocument(t,e,n,s){return new uo(t,1,e,ui.min(),n,s,0)}static newNoDocument(t,e){return new uo(t,2,e,ui.min(),ui.min(),ao.empty(),0)}static newUnknownDocument(t,e){return new uo(t,3,e,ui.min(),ui.min(),ao.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ui.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ao.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ao.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ui.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof uo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new uo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ho{constructor(t,e){this.position=t,this.inclusive=e}}function lo(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(s=i.field.isKeyField()?gi.comparator(gi.fromName(o.referenceValue),n.key):Xi(o,n.data.field(i.field)),"desc"===i.dir&&(s*=-1),0!==s)break}return s}function fo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qi(t.position[n],e.position[n]))return!1;return!0}class go{constructor(t,e="asc"){this.field=t,this.dir=e}}function po(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class mo{}class yo extends mo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new So(t,e,n):"array-contains"===e?new Do(t,n):"in"===e?new ko(t,n):"not-in"===e?new No(t,n):"array-contains-any"===e?new xo(t,n):new yo(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Io(t,n):new Ao(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Xi(e,this.value)):null!==e&&Gi(this.value)===Gi(e)&&this.matchesComparison(Xi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vo extends mo{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new vo(t,e)}matches(t){return wo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft((t=>t.isInequality()));return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function wo(t){return"and"===t.op}function Eo(t){return function(t){for(const e of t.filters)if(e instanceof vo)return!1;return!0}(t)&&wo(t)}function bo(t){if(t instanceof yo)return t.field.canonicalString()+t.op.toString()+Ji(t.value);if(Eo(t))return t.filters.map((t=>bo(t))).join(",");{const e=t.filters.map((t=>bo(t))).join(",");return`${t.op}(${e})`}}function To(t,e){return t instanceof yo?function(t,e){return e instanceof yo&&t.op===e.op&&t.field.isEqual(e.field)&&Qi(t.value,e.value)}(t,e):t instanceof vo?function(t,e){return e instanceof vo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,s)=>t&&To(n,e.filters[s])),!0)}(t,e):void zr()}function Co(t){return t instanceof yo?function(t){return`${t.field.canonicalString()} ${t.op} ${Ji(t.value)}`}(t):t instanceof vo?function(t){return t.op.toString()+" {"+t.getFilters().map(Co).join(" ,")+"}"}(t):"Filter"}class So extends yo{constructor(t,e,n){super(t,e,n),this.key=gi.fromName(n.referenceValue)}matches(t){const e=gi.comparator(t.key,this.key);return this.matchesComparison(e)}}class Io extends yo{constructor(t,e){super(t,"in",e),this.keys=_o(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Ao extends yo{constructor(t,e){super(t,"not-in",e),this.keys=_o(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function _o(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>gi.fromName(t.referenceValue)))}class Do extends yo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return eo(e)&&Wi(e.arrayValue,this.value)}}class ko extends yo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Wi(this.value.arrayValue,e)}}class No extends yo{constructor(t,e){super(t,"not-in",e)}matches(t){if(Wi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Wi(this.value.arrayValue,e)}}class xo extends yo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!eo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Wi(this.value.arrayValue,t)))}}class Lo{constructor(t,e=null,n=[],s=[],r=null,i=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=i,this.endAt=o,this.dt=null}}function Ro(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Lo(t,e,n,s,r,i,o)}function Mo(t){const e=Hr(t);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>bo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Si(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Ji(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Ji(t))).join(",")),e.dt=t}return e.dt}function Oo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!po(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!To(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fo(t.startAt,e.startAt)&&fo(t.endAt,e.endAt)}function Po(t){return gi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Fo{constructor(t,e=null,n=[],s=[],r=null,i="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=i,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Vo(t){return new Fo(t)}function Uo(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Bo(t){const e=Hr(t);if(null===e.wt){e.wt=[];const t=function(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.wt.push(new go(t)),e.wt.push(new go(fi.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.wt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new go(fi.keyField(),t))}}}return e.wt}function jo(t){const e=Hr(t);if(!e._t)if("F"===e.limitType)e._t=Ro(e.path,e.collectionGroup,Bo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Bo(e)){const e="desc"===n.dir?"asc":"desc";t.push(new go(n.field,e))}const n=e.endAt?new ho(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ho(e.startAt.position,e.startAt.inclusive):null;e._t=Ro(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}return e._t}function qo(t,e,n){return new Fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $o(t,e){return Oo(jo(t),jo(e))&&t.limitType===e.limitType}function zo(t){return`${Mo(jo(t))}|lt:${t.limitType}`}function Ko(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Co(t))).join(", ")}]`),Si(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Ji(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Ji(t))).join(",")),`Target(${e})`}(jo(t))}; limitType=${t.limitType})`}function Ho(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):gi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Bo(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const s=lo(t,e,n);return t.inclusive?s<=0:s<0}(t.startAt,Bo(t),e)||t.endAt&&!function(t,e,n){const s=lo(t,e,n);return t.inclusive?s>=0:s>0}(t.endAt,Bo(t),e))}(t,e)}function Go(t){return(e,n)=>{let s=!1;for(const r of Bo(t)){const t=Qo(r,e,n);if(0!==t)return t;s=s||r.field.isKeyField()}return 0}}function Qo(t,e,n){const s=t.field.isKeyField()?gi.comparator(e.key,n.key):function(t,e,n){const s=e.data.field(t),r=n.data.field(t);return null!==s&&null!==r?Xi(s,r):zr()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return zr()}}class Wo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,s]of n)if(this.equalsFn(e,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(void 0===s)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],t))return void(s[n]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return 1===n.length?delete this.inner[e]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(t){_i(this.inner,((e,n)=>{for(const[e,s]of n)t(e,s)}))}isEmpty(){return Di(this.inner)}size(){return this.innerSize}}const Xo=new ki(gi.comparator);function Yo(){return Xo}const Jo=new ki(gi.comparator);function Zo(...t){let e=Jo;for(const n of t)e=e.insert(n.key,n);return e}function ta(t){let e=Jo;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ea(){return sa()}function na(){return sa()}function sa(){return new Wo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ra=new ki(gi.comparator),ia=new Li(gi.comparator);function oa(...t){let e=ia;for(const n of t)e=e.add(n);return e}const aa=new Li(oi);function ca(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ii(e)?"-0":e}}function ua(t){return{integerValue:""+t}}function ha(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Ii(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ua(e):ca(t,e)}class la{constructor(){this._=void 0}}function da(t,e,n){return t instanceof pa?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&ji(e)&&(e=qi(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ma?ya(t,e):t instanceof va?wa(t,e):function(t,e){const n=ga(t,e),s=ba(n)+ba(t.gt);return to(n)&&to(t.gt)?ua(s):ca(t.serializer,s)}(t,e)}function fa(t,e,n){return t instanceof ma?ya(t,e):t instanceof va?wa(t,e):n}function ga(t,e){return t instanceof Ea?to(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class pa extends la{}class ma extends la{constructor(t){super(),this.elements=t}}function ya(t,e){const n=Ta(e);for(const e of t.elements)n.some((t=>Qi(t,e)))||n.push(e);return{arrayValue:{values:n}}}class va extends la{constructor(t){super(),this.elements=t}}function wa(t,e){let n=Ta(e);for(const e of t.elements)n=n.filter((t=>!Qi(t,e)));return{arrayValue:{values:n}}}class Ea extends la{constructor(t,e){super(),this.serializer=t,this.gt=e}}function ba(t){return Ui(t.integerValue||t.doubleValue)}function Ta(t){return eo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ca{constructor(t,e){this.version=t,this.transformResults=e}}class Sa{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Sa}static exists(t){return new Sa(void 0,t)}static updateTime(t){return new Sa(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ia(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Aa{}function _a(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Fa(t.key,Sa.none()):new La(t.key,t.data,Sa.none());{const n=t.data,s=ao.empty();let r=new Li(fi.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?s.delete(t):s.set(t,e),r=r.add(t)}return new Ra(t.key,s,new Mi(r.toArray()),Sa.none())}}function Da(t,e,n){t instanceof La?function(t,e,n){const s=t.value.clone(),r=Oa(t.fieldTransforms,e,n.transformResults);s.setAll(r),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):t instanceof Ra?function(t,e,n){if(!Ia(t.precondition,e))return void e.convertToUnknownDocument(n.version);const s=Oa(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Ma(t)),r.setAll(s),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,s){return t instanceof La?function(t,e,n,s){if(!Ia(t.precondition,e))return n;const r=t.value.clone(),i=Pa(t.fieldTransforms,s,e);return r.setAll(i),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ra?function(t,e,n,s){if(!Ia(t.precondition,e))return n;const r=Pa(t.fieldTransforms,s,e),i=e.data;return i.setAll(Ma(t)),i.setAll(r),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,s):function(t,e,n){return Ia(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Na(t,e){let n=null;for(const s of t.fieldTransforms){const t=e.data.field(s.field),r=ga(s.transform,t||null);null!=r&&(null===n&&(n=ao.empty()),n.set(s.field,r))}return n||null}function xa(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ai(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ma&&e instanceof ma||t instanceof va&&e instanceof va?ai(t.elements,e.elements,Qi):t instanceof Ea&&e instanceof Ea?Qi(t.gt,e.gt):t instanceof pa&&e instanceof pa}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class La extends Aa{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ra extends Aa{constructor(t,e,n,s,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Ma(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Oa(t,e,n){const s=new Map;Kr(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,fa(o,a,n[r]))}return s}function Pa(t,e,n){const s=new Map;for(const r of t){const t=r.transform,i=n.data.field(r.field);s.set(r.field,da(t,i,e))}return s}class Fa extends Aa{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Va extends Aa{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ua{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const s=this.mutations[e];s.key.isEqual(t.key)&&Da(s,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=ka(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=ka(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=na();return this.mutations.forEach((s=>{const r=t.get(s.key),i=r.overlayedDocument;let o=this.applyToLocalView(i,r.mutatedFields);o=e.has(s.key)?null:o;const a=_a(i,o);null!==a&&n.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(ui.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),oa())}isEqual(t){return this.batchId===t.batchId&&ai(this.mutations,t.mutations,((t,e)=>xa(t,e)))&&ai(this.baseMutations,t.baseMutations,((t,e)=>xa(t,e)))}}class Ba{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){Kr(t.mutations.length===n.length);let s=ra;const r=t.mutations;for(let t=0;t<r.length;t++)s=s.insert(r[t].key,n[t].version);return new Ba(t,e,n,s)}}class ja{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qa{constructor(t,e){this.count=t,this.unchangedNames=e}}var $a,za;function Ka(t){if(void 0===t)return jr("GRPC error has no .code"),Gr.UNKNOWN;switch(t){case $a.OK:return Gr.OK;case $a.CANCELLED:return Gr.CANCELLED;case $a.UNKNOWN:return Gr.UNKNOWN;case $a.DEADLINE_EXCEEDED:return Gr.DEADLINE_EXCEEDED;case $a.RESOURCE_EXHAUSTED:return Gr.RESOURCE_EXHAUSTED;case $a.INTERNAL:return Gr.INTERNAL;case $a.UNAVAILABLE:return Gr.UNAVAILABLE;case $a.UNAUTHENTICATED:return Gr.UNAUTHENTICATED;case $a.INVALID_ARGUMENT:return Gr.INVALID_ARGUMENT;case $a.NOT_FOUND:return Gr.NOT_FOUND;case $a.ALREADY_EXISTS:return Gr.ALREADY_EXISTS;case $a.PERMISSION_DENIED:return Gr.PERMISSION_DENIED;case $a.FAILED_PRECONDITION:return Gr.FAILED_PRECONDITION;case $a.ABORTED:return Gr.ABORTED;case $a.OUT_OF_RANGE:return Gr.OUT_OF_RANGE;case $a.UNIMPLEMENTED:return Gr.UNIMPLEMENTED;case $a.DATA_LOSS:return Gr.DATA_LOSS;default:return zr()}}(za=$a||($a={}))[za.OK=0]="OK",za[za.CANCELLED=1]="CANCELLED",za[za.UNKNOWN=2]="UNKNOWN",za[za.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",za[za.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",za[za.NOT_FOUND=5]="NOT_FOUND",za[za.ALREADY_EXISTS=6]="ALREADY_EXISTS",za[za.PERMISSION_DENIED=7]="PERMISSION_DENIED",za[za.UNAUTHENTICATED=16]="UNAUTHENTICATED",za[za.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",za[za.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",za[za.ABORTED=10]="ABORTED",za[za.OUT_OF_RANGE=11]="OUT_OF_RANGE",za[za.UNIMPLEMENTED=12]="UNIMPLEMENTED",za[za.INTERNAL=13]="INTERNAL",za[za.UNAVAILABLE=14]="UNAVAILABLE",za[za.DATA_LOSS=15]="DATA_LOSS";class Ha{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ga}static getOrCreateInstance(){return null===Ga&&(Ga=new Ha),Ga}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach((e=>e(t)))}}let Ga=null;const Qa=new Mr([4294967295,4294967295],0);function Wa(t){const e=(new TextEncoder).encode(t),n=new Rr;return n.update(e),new Uint8Array(n.digest())}function Xa(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Mr([n,s],0),new Mr([r,i],0)]}class Ya{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ja(`Invalid padding: ${e}`);if(n<0)throw new Ja(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Ja(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Ja(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=Mr.fromNumber(this.It)}Et(t,e,n){let s=t.add(e.multiply(Mr.fromNumber(n)));return 1===s.compare(Qa)&&(s=new Mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=Wa(t),[n,s]=Xa(e);for(let t=0;t<this.hashCount;t++){const e=this.Et(n,s,t);if(!this.At(e))return!1}return!0}static create(t,e,n){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),i=new Ya(r,s,e);return n.forEach((t=>i.insert(t))),i}insert(t){if(0===this.It)return;const e=Wa(t),[n,s]=Xa(e);for(let t=0;t<this.hashCount;t++){const e=this.Et(n,s,t);this.Rt(e)}}Rt(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Za{constructor(t,e,n,s,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const s=new Map;return s.set(t,tc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Za(ui.min(),s,new ki(oi),Yo(),oa())}}class tc{constructor(t,e,n,s,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new tc(n,e,oa(),oa(),oa())}}class ec{constructor(t,e,n,s){this.Pt=t,this.removedTargetIds=e,this.key=n,this.bt=s}}class nc{constructor(t,e){this.targetId=t,this.Vt=e}}class sc{constructor(t,e,n=Pi.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class rc{constructor(){this.St=0,this.Dt=ac(),this.Ct=Pi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=oa(),e=oa(),n=oa();return this.Dt.forEach(((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:zr()}})),new tc(this.Ct,this.xt,t,e,n)}Ft(){this.Nt=!1,this.Dt=ac()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ic{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=Yo(),this.zt=oc(),this.Wt=new ki(oi)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,(e=>{const n=this.Zt(e);switch(t.state){case 0:this.te(e)&&n.$t(t.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(t.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(e);break;case 3:this.te(e)&&(n.Kt(),n.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),n.$t(t.resumeToken));break;default:zr()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach(((t,n)=>{this.te(n)&&e(n)}))}ne(t){var e;const n=t.targetId,s=t.Vt.count,r=this.se(n);if(r){const i=r.target;if(Po(i))if(0===s){const t=new gi(i.path);this.Yt(n,t,uo.newNoDocument(t,ui.min()))}else Kr(1===s);else{const r=this.ie(n);if(r!==s){const s=this.re(t,r);if(0!==s){this.ee(n);const t=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,t)}null===(e=Ha.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(t,e,n){var s,r,i,o,a,c;const u={localCacheCount:e,existenceFilterCount:n.count},h=n.unchangedNames;return h&&(u.bloomFilter={applied:0===t,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===(i=null===(r=null==h?void 0:h.bits)||void 0===r?void 0:r.bitmap)||void 0===i?void 0:i.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),u}(s,r,t.Vt))}}}}re(t,e){const{unchangedNames:n,count:s}=t.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,c;try{a=Bi(r).toUint8Array()}catch(t){if(t instanceof Oi)return qr("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw t}try{c=new Ya(a,i,o)}catch(t){return qr(t instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",t),1}return 0===c.It?1:s!==e-this.oe(t.targetId,c)?2:0}oe(t,e){const n=this.Gt.getRemoteKeysForTarget(t);let s=0;return n.forEach((n=>{const r=this.Gt.ue(),i=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;e.vt(i)||(this.Yt(t,n,null),s++)})),s}ce(t){const e=new Map;this.Qt.forEach(((n,s)=>{const r=this.se(s);if(r){if(n.current&&Po(r.target)){const e=new gi(r.target.path);null!==this.jt.get(e)||this.ae(s,e)||this.Yt(s,e,uo.newNoDocument(e,t))}n.Mt&&(e.set(s,n.Ot()),n.Ft())}}));let n=oa();this.zt.forEach(((t,e)=>{let s=!0;e.forEachWhile((t=>{const e=this.se(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(s=!1,!1)})),s&&(n=n.add(t))})),this.jt.forEach(((e,n)=>n.setReadTime(t)));const s=new Za(t,e,this.Wt,this.jt,n);return this.jt=Yo(),this.zt=oc(),this.Wt=new ki(oi),s}Jt(t,e){if(!this.te(t))return;const n=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,n),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,n){if(!this.te(t))return;const s=this.Zt(t);this.ae(t,e)?s.Bt(e,1):s.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),n&&(this.jt=this.jt.insert(e,n))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new rc,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Li(oi),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||Br("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new rc),this.Gt.getRemoteKeysForTarget(t).forEach((e=>{this.Yt(t,e,null)}))}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function oc(){return new ki(gi.comparator)}function ac(){return new ki(gi.comparator)}const cc={asc:"ASCENDING",desc:"DESCENDING"},uc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hc={and:"AND",or:"OR"};class lc{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function dc(t,e){return t.useProto3Json||Si(e)?e:{value:e}}function fc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gc(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pc(t,e){return fc(t,e.toTimestamp())}function mc(t){return Kr(!!t),ui.fromTimestamp(function(t){const e=Vi(t);return new ci(e.seconds,e.nanos)}(t))}function yc(t,e){return function(t){return new li(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function vc(t){const e=li.fromString(t);return Kr(Pc(e)),e}function wc(t,e){return yc(t.databaseId,e.path)}function Ec(t,e){const n=vc(e);if(n.get(1)!==t.databaseId.projectId)throw new Qr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Qr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new gi(Cc(n))}function bc(t,e){return yc(t.databaseId,e)}function Tc(t){return new li(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cc(t){return Kr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Sc(t,e,n){return{name:wc(t,e),fields:n.value.mapValue.fields}}function Ic(t,e){return{documents:[bc(t,e.path)]}}function Ac(t,e){const n={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(n.parent=bc(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=bc(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(t){if(0!==t.length)return Mc(vo.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const i=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Lc(t.field),direction:kc(t.dir)}}(t)))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=dc(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function _c(t){let e=function(t){const e=vc(t);return 4===e.length?li.emptyPath():Cc(e)}(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Kr(1===s);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let i=[];n.where&&(i=function(t){const e=Dc(t);return e instanceof vo&&Eo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new go(Rc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Si(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new ho(n,e)}(n.startAt));let u=null;return n.endAt&&(u=function(t){const e=!t.before,n=t.values||[];return new ho(n,e)}(n.endAt)),function(t,e,n,s,r,i,o,a){return new Fo(t,e,n,s,r,i,o,a)}(e,r,o,i,a,"F",c,u)}function Dc(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Rc(t.unaryFilter.field);return yo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Rc(t.unaryFilter.field);return yo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rc(t.unaryFilter.field);return yo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Rc(t.unaryFilter.field);return yo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return zr()}}(t):void 0!==t.fieldFilter?function(t){return yo.create(Rc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zr()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return vo.create(t.compositeFilter.filters.map((t=>Dc(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return zr()}}(t.compositeFilter.op))}(t):zr()}function kc(t){return cc[t]}function Nc(t){return uc[t]}function xc(t){return hc[t]}function Lc(t){return{fieldPath:t.canonicalString()}}function Rc(t){return fi.fromServerFormat(t.fieldPath)}function Mc(t){return t instanceof yo?function(t){if("=="===t.op){if(so(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NAN"}};if(no(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(so(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NOT_NAN"}};if(no(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lc(t.field),op:Nc(t.op),value:t.value}}}(t):t instanceof vo?function(t){const e=t.getFilters().map((t=>Mc(t)));return 1===e.length?e[0]:{compositeFilter:{op:xc(t.op),filters:e}}}(t):zr()}function Oc(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Pc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Fc{constructor(t,e,n,s,r=ui.min(),i=ui.min(),o=Pi.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Fc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Vc{constructor(t){this.fe=t}}function Uc(t){const e=_c({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?qo(e,e.limit,"L"):e}class Bc{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(Ui(t.integerValue));else if("doubleValue"in t){const n=Ui(t.doubleValue);isNaN(n)?this.ye(e,13):(this.ye(e,15),Ii(n)?e.pe(0):e.pe(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ye(e,20),"string"==typeof n?e.Ie(n):(e.Ie(`${n.seconds||""}`),e.pe(n.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(Bi(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ye(e,45),e.pe(n.latitude||0),e.pe(n.longitude||0)}else"mapValue"in t?oo(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):zr()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const n=t.fields||{};this.ye(e,55);for(const t of Object.keys(n))this.Te(t,e),this.me(n[t],e)}Pe(t,e){const n=t.values||[];this.ye(e,50);for(const t of n)this.me(t,e)}ve(t,e){this.ye(e,37),gi.fromName(t).path.forEach((t=>{this.ye(e,60),this.be(t,e)}))}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}Bc.Ve=new Bc;class jc{constructor(){this.rn=new qc}addToCollectionParentIndex(t,e){return this.rn.add(e),bi.resolve()}getCollectionParents(t,e){return bi.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return bi.resolve()}deleteFieldIndex(t,e){return bi.resolve()}getDocumentsMatchingTarget(t,e){return bi.resolve(null)}getIndexType(t,e){return bi.resolve(0)}getFieldIndexes(t,e){return bi.resolve([])}getNextCollectionGroupToUpdate(t){return bi.resolve(null)}getMinOffset(t,e){return bi.resolve(mi.min())}getMinOffsetFromCollectionGroup(t,e){return bi.resolve(mi.min())}updateCollectionGroup(t,e,n){return bi.resolve()}updateIndexEntries(t,e){return bi.resolve()}}class qc{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new Li(li.comparator),r=!s.has(n);return this.index[e]=s.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new Li(li.comparator)).toArray()}}new Uint8Array(0);class $c{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new $c(t,$c.DEFAULT_COLLECTION_PERCENTILE,$c.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$c.DEFAULT_COLLECTION_PERCENTILE=10,$c.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$c.DEFAULT=new $c(41943040,$c.DEFAULT_COLLECTION_PERCENTILE,$c.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$c.DISABLED=new $c(-1,0,0);class zc{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new zc(0)}static Mn(){return new zc(-1)}}class Kc{constructor(){this.changes=new Wo((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,uo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?bi.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Hc{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Gc{constructor(t,e,n,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=s}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(n=s,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&ka(n.mutation,t,Mi.empty(),ci.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,oa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=oa()){const s=ea();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,n).next((t=>{let e=Zo();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=ea();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,oa())))}populateOverlays(t,e,n){const s=[];return n.forEach((t=>{e.has(t)||s.push(t)})),this.documentOverlayCache.getOverlays(t,s).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,s){let r=Yo();const i=sa(),o=sa();return e.forEach(((t,e)=>{const o=n.get(e.key);s.has(e.key)&&(void 0===o||o.mutation instanceof Ra)?r=r.insert(e.key,e):void 0!==o?(i.set(e.key,o.mutation.getFieldMask()),ka(o.mutation,e,o.mutation.getFieldMask(),ci.now())):i.set(e.key,Mi.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>i.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Hc(e,null!==(n=i.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=sa();let s=new ki(((t,e)=>t-e)),r=oa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const i=e.get(t);if(null===i)return;let o=n.get(t)||Mi.empty();o=r.applyToLocalView(i,o),n.set(t,o);const a=(s.get(r.batchId)||oa()).add(t);s=s.insert(r.batchId,a)}))})).next((()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const s=o.getNext(),a=s.key,c=s.value,u=na();c.forEach((t=>{if(!r.has(t)){const s=_a(e.get(t),n.get(t));null!==s&&u.set(t,s),r=r.add(t)}})),i.push(this.documentOverlayCache.saveOverlays(t,a,u))}return bi.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return gi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,s).next((r=>{const i=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,s-r.size):bi.resolve(ea());let o=-1,a=r;return i.next((e=>bi.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?bi.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,oa()))).next((t=>({batchId:o,changes:ta(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new gi(e)).next((t=>{let e=Zo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const s=e.collectionGroup;let r=Zo();return this.indexManager.getCollectionParents(t,s).next((i=>bi.forEach(i,(i=>{const o=function(t,e){return new Fo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,i.child(s));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(t,e,n){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s)))).next((t=>{s.forEach(((e,n)=>{const s=n.getKey();null===t.get(s)&&(t=t.insert(s,uo.newInvalidDocument(s)))}));let n=Zo();return t.forEach(((t,r)=>{const i=s.get(t);void 0!==i&&ka(i.mutation,r,Mi.empty(),ci.now()),Ho(e,r)&&(n=n.insert(t,r))})),n}))}}class Qc{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return bi.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var n;return this.cs.set(e.id,{id:(n=e).id,version:n.version,createTime:mc(n.createTime)}),bi.resolve()}getNamedQuery(t,e){return bi.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,function(t){return{name:t.name,query:Uc(t.bundledQuery),readTime:mc(t.readTime)}}(e)),bi.resolve()}}class Wc{constructor(){this.overlays=new ki(gi.comparator),this.ls=new Map}getOverlay(t,e){return bi.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ea();return bi.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,s)=>{this.we(t,e,s)})),bi.resolve()}removeOverlaysForBatchId(t,e,n){const s=this.ls.get(n);return void 0!==s&&(s.forEach((t=>this.overlays=this.overlays.remove(t))),this.ls.delete(n)),bi.resolve()}getOverlaysForCollection(t,e,n){const s=ea(),r=e.length+1,i=new gi(e.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const t=o.getNext().value,i=t.getKey();if(!e.isPrefixOf(i.path))break;i.path.length===r&&t.largestBatchId>n&&s.set(t.getKey(),t)}return bi.resolve(s)}getOverlaysForCollectionGroup(t,e,n,s){let r=new ki(((t,e)=>t-e));const i=this.overlays.getIterator();for(;i.hasNext();){const t=i.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=ea(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ea(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=s)););return bi.resolve(o)}we(t,e,n){const s=this.overlays.get(n.key);if(null!==s){const t=this.ls.get(s.largestBatchId).delete(n.key);this.ls.set(s.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new ja(e,n));let r=this.ls.get(e);void 0===r&&(r=oa(),this.ls.set(e,r)),this.ls.set(e,r.add(n.key))}}class Xc{constructor(){this.fs=new Li(Yc.ds),this.ws=new Li(Yc._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const n=new Yc(t,e);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.ys(new Yc(t,e))}ps(t,e){t.forEach((t=>this.removeReference(t,e)))}Is(t){const e=new gi(new li([])),n=new Yc(e,t),s=new Yc(e,t+1),r=[];return this.ws.forEachInRange([n,s],(t=>{this.ys(t),r.push(t.key)})),r}Ts(){this.fs.forEach((t=>this.ys(t)))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new gi(new li([])),n=new Yc(e,t),s=new Yc(e,t+1);let r=oa();return this.ws.forEachInRange([n,s],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new Yc(t,0),n=this.fs.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Yc{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return gi.comparator(t.key,e.key)||oi(t.As,e.As)}static _s(t,e){return oi(t.As,e.As)||gi.comparator(t.key,e.key)}}class Jc{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Li(Yc.ds)}checkEmpty(t){return bi.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,s){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ua(r,e,n,s);this.mutationQueue.push(i);for(const e of s)this.Rs=this.Rs.add(new Yc(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return bi.resolve(i)}lookupMutationBatch(t,e){return bi.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.bs(n),r=s<0?0:s;return bi.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return bi.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return bi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Yc(e,0),s=new Yc(e,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,s],(t=>{const e=this.Ps(t.As);r.push(e)})),bi.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Li(oi);return e.forEach((t=>{const e=new Yc(t,0),s=new Yc(t,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([e,s],(t=>{n=n.add(t.As)}))})),bi.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let r=n;gi.isDocumentKey(r)||(r=r.child(""));const i=new Yc(new gi(r),0);let o=new Li(oi);return this.Rs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===s&&(o=o.add(t.As)),!0)}),i),bi.resolve(this.Vs(o))}Vs(t){const e=[];return t.forEach((t=>{const n=this.Ps(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Kr(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return bi.forEach(e.mutations,(s=>{const r=new Yc(s.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Rs=n}))}Cn(t){}containsKey(t,e){const n=new Yc(e,0),s=this.Rs.firstAfterOrEqual(n);return bi.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,bi.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Zc{constructor(t){this.Ds=t,this.docs=new ki(gi.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,s=this.docs.get(n),r=s?s.size:0,i=this.Ds(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return bi.resolve(n?n.document.mutableCopy():uo.newInvalidDocument(e))}getEntries(t,e){let n=Yo();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():uo.newInvalidDocument(t))})),bi.resolve(n)}getDocumentsMatchingQuery(t,e,n,s){let r=Yo();const i=e.path,o=new gi(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!i.isPrefixOf(t.path))break;t.path.length>i.length+1||yi(pi(o),n)<=0||(s.has(o.key)||Ho(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return bi.resolve(r)}getAllFromCollectionGroup(t,e,n,s){zr()}Cs(t,e){return bi.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new tu(this)}getSize(t){return bi.resolve(this.size)}}class tu extends Kc{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?e.push(this.os.addEntry(t,s)):this.os.removeEntry(n)})),bi.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class eu{constructor(t){this.persistence=t,this.xs=new Wo((t=>Mo(t)),Oo),this.lastRemoteSnapshotVersion=ui.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Xc,this.targetCount=0,this.Ms=zc.kn()}forEachTarget(t,e){return this.xs.forEach(((t,n)=>e(n))),bi.resolve()}getLastRemoteSnapshotVersion(t){return bi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return bi.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),bi.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ns&&(this.Ns=e),bi.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new zc(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,bi.resolve()}updateTargetData(t,e){return this.Fn(e),bi.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,bi.resolve()}removeTargets(t,e,n){let s=0;const r=[];return this.xs.forEach(((i,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.xs.delete(i),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)})),bi.waitFor(r).next((()=>s))}getTargetCount(t){return bi.resolve(this.targetCount)}getTargetData(t,e){const n=this.xs.get(e)||null;return bi.resolve(n)}addMatchingKeys(t,e,n){return this.ks.gs(e,n),bi.resolve()}removeMatchingKeys(t,e,n){this.ks.ps(e,n);const s=this.persistence.referenceDelegate,r=[];return s&&e.forEach((e=>{r.push(s.markPotentiallyOrphaned(t,e))})),bi.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),bi.resolve()}getMatchingKeysForTargetId(t,e){const n=this.ks.Es(e);return bi.resolve(n)}containsKey(t,e){return bi.resolve(this.ks.containsKey(e))}}class nu{constructor(t,e){this.$s={},this.overlays={},this.Os=new Ci(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new eu(this),this.indexManager=new jc,this.remoteDocumentCache=function(t){return new Zc(t)}((t=>this.referenceDelegate.Ls(t))),this.serializer=new Vc(e),this.qs=new Qc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Wc,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.$s[t.toKey()];return n||(n=new Jc(e,this.referenceDelegate),this.$s[t.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,n){Br("MemoryPersistence","Starting transaction:",t);const s=new su(this.Os.next());return this.referenceDelegate.Us(),n(s).next((t=>this.referenceDelegate.Ks(s).next((()=>t)))).toPromise().then((t=>(s.raiseOnCommittedEvent(),t)))}Gs(t,e){return bi.or(Object.values(this.$s).map((n=>()=>n.containsKey(t,e))))}}class su extends wi{constructor(t){super(),this.currentSequenceNumber=t}}class ru{constructor(t){this.persistence=t,this.Qs=new Xc,this.js=null}static zs(t){return new ru(t)}get Ws(){if(this.js)return this.js;throw zr()}addReference(t,e,n){return this.Qs.addReference(n,e),this.Ws.delete(n.toString()),bi.resolve()}removeReference(t,e,n){return this.Qs.removeReference(n,e),this.Ws.add(n.toString()),bi.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),bi.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach((t=>this.Ws.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Ws.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bi.forEach(this.Ws,(n=>{const s=gi.fromPath(n);return this.Hs(t,s).next((t=>{t||e.removeEntry(s,ui.min())}))})).next((()=>(this.js=null,e.apply(t))))}updateLimboDocument(t,e){return this.Hs(t,e).next((t=>{t?this.Ws.delete(e.toString()):this.Ws.add(e.toString())}))}Ls(t){return 0}Hs(t,e){return bi.or([()=>bi.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class iu{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.Fi=n,this.Bi=s}static Li(t,e){let n=oa(),s=oa();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:s=s.add(t.doc.key)}return new iu(t,e.fromCache,n,s)}}class ou{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,n,s){return this.Ki(t,e).next((r=>r||this.Gi(t,e,s,n))).next((n=>n||this.Qi(t,e)))}Ki(t,e){if(Uo(e))return bi.resolve(null);let n=jo(e);return this.indexManager.getIndexType(t,n).next((s=>0===s?null:(null!==e.limit&&1===s&&(e=qo(e,null,"F"),n=jo(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((s=>{const r=oa(...s);return this.Ui.getDocuments(t,r).next((s=>this.indexManager.getMinOffset(t,n).next((n=>{const i=this.ji(e,s);return this.zi(e,i,r,n.readTime)?this.Ki(t,qo(e,null,"F")):this.Wi(t,i,e,n)}))))})))))}Gi(t,e,n,s){return Uo(e)||s.isEqual(ui.min())?this.Qi(t,e):this.Ui.getDocuments(t,n).next((r=>{const i=this.ji(e,r);return this.zi(e,i,n,s)?this.Qi(t,e):(Ur()<=b.DEBUG&&Br("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ko(e)),this.Wi(t,i,e,function(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ui.fromTimestamp(1e9===s?new ci(n+1,0):new ci(n,s));return new mi(r,gi.empty(),e)}(s,-1)))}))}ji(t,e){let n=new Li(Go(t));return e.forEach(((e,s)=>{Ho(t,s)&&(n=n.add(s))})),n}zi(t,e,n,s){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Qi(t,e){return Ur()<=b.DEBUG&&Br("QueryEngine","Using full collection scan to execute query:",Ko(e)),this.Ui.getDocumentsMatchingQuery(t,e,mi.min())}Wi(t,e,n,s){return this.Ui.getDocumentsMatchingQuery(t,n,s).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class au{constructor(t,e,n,s){this.persistence=t,this.Hi=e,this.serializer=s,this.Ji=new ki(oi),this.Yi=new Wo((t=>Mo(t)),Oo),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(n)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Gc(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ji)))}}async function cu(t,e){const n=Hr(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.mutationQueue.getAllMutationBatches(t).next((r=>(s=r,n.tr(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],i=[];let o=oa();for(const t of s){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({er:t,removedBatchIds:r,addedBatchIds:i})))}))}))}function uu(t){const e=Hr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Bs.getLastRemoteSnapshotVersion(t)))}function hu(t,e){const n=Hr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function lu(t,e,n){const s=Hr(t),r=s.Ji.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(t=>s.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Ti(t))throw t;Br("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(r.target)}function du(t,e,n){const s=Hr(t);let r=ui.min(),i=oa();return s.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const s=Hr(t),r=s.Yi.get(n);return void 0!==r?bi.resolve(s.Ji.get(r)):s.Bs.getTargetData(e,n)}(s,t,jo(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{i=t}))})).next((()=>s.Hi.getDocumentsMatchingQuery(t,e,n?r:ui.min(),n?i:oa()))).next((t=>(function(t,e,n){let s=t.Xi.get(e)||ui.min();n.forEach(((t,e)=>{e.readTime.compareTo(s)>0&&(s=e.readTime)})),t.Xi.set(e,s)}(s,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,ir:i})))))}class fu{constructor(){this.activeTargetIds=aa}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gu{constructor(){this.Hr=new fu,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,n){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new fu,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class pu{Yr(t){}shutdown(){}}class mu{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Br("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){Br("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yu=null;function vu(){return null===yu?yu=268435456+Math.round(2147483648*Math.random()):yu++,"0x"+yu.toString(16)}const wu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Eu{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const bu="WebChannelConnection";class Tu extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.mo=e+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,n,s,r){const i=vu(),o=this.To(t,e);Br("RestConnection",`Sending RPC '${t}' ${i}:`,o,n);const a={};return this.Eo(a,s,r),this.Ao(t,o,a,n).then((e=>(Br("RestConnection",`Received RPC '${t}' ${i}: `,e),e)),(e=>{throw qr("RestConnection",`RPC '${t}' ${i} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,s,r,i){return this.Io(t,e,n,s,r)}Eo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Fr,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}To(t,e){const n=wu[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,n,s){const r=vu();return new Promise(((i,o)=>{const a=new Lr;a.setWithCredentials(!0),a.listenOnce(_r.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ar.NO_ERROR:const e=a.getResponseJson();Br(bu,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),i(e);break;case Ar.TIMEOUT:Br(bu,`RPC '${t}' ${r} timed out`),o(new Qr(Gr.DEADLINE_EXCEEDED,"Request time out"));break;case Ar.HTTP_ERROR:const n=a.getStatus();if(Br(bu,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Gr).indexOf(e)>=0?e:Gr.UNKNOWN}(e.status);o(new Qr(t,e.message))}else o(new Qr(Gr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Qr(Gr.UNAVAILABLE,"Connection failed."));break;default:zr()}}finally{Br(bu,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(s);Br(bu,`RPC '${t}' ${r} sending request:`,s),a.send(e,"POST",c,n,15)}))}Ro(t,e,n){const s=vu(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Sr(),o=Ir(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Nr({})),this.Eo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const u=r.join("");Br(bu,`Creating RPC '${t}' stream ${s}: ${u}`,a);const h=i.createWebChannel(u,a);let l=!1,d=!1;const f=new Eu({ro:e=>{d?Br(bu,`Not sending because RPC '${t}' stream ${s} is closed:`,e):(l||(Br(bu,`Opening RPC '${t}' stream ${s} transport.`),h.open(),l=!0),Br(bu,`RPC '${t}' stream ${s} sending:`,e),h.send(e))},oo:()=>h.close()}),g=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return g(h,xr.EventType.OPEN,(()=>{d||Br(bu,`RPC '${t}' stream ${s} transport opened.`)})),g(h,xr.EventType.CLOSE,(()=>{d||(d=!0,Br(bu,`RPC '${t}' stream ${s} transport closed`),f.wo())})),g(h,xr.EventType.ERROR,(e=>{d||(d=!0,qr(bu,`RPC '${t}' stream ${s} transport errored:`,e),f.wo(new Qr(Gr.UNAVAILABLE,"The operation could not be completed")))})),g(h,xr.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];Kr(!!r);const i=r,o=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){Br(bu,`RPC '${t}' stream ${s} received error:`,o);const e=o.status;let n=function(t){const e=$a[t];if(void 0!==e)return Ka(e)}(e),r=o.message;void 0===n&&(n=Gr.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.wo(new Qr(n,r)),h.close()}else Br(bu,`RPC '${t}' stream ${s} received:`,r),f._o(r)}})),g(o,Dr.STAT_EVENT,(e=>{e.stat===kr.PROXY?Br(bu,`RPC '${t}' stream ${s} detected buffering proxy`):e.stat===kr.NOPROXY&&Br(bu,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function Cu(){return"undefined"!=typeof document?document:null}function Su(t){return new lc(t,!0)}class Iu{constructor(t,e,n=1e3,s=1.5,r=6e4){this.ii=t,this.timerId=e,this.Po=n,this.bo=s,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),s=Math.max(0,e-n);s>0&&Br("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,(()=>(this.Co=Date.now(),t()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Au{constructor(t,e,n,s,r,i,o,a){this.ii=t,this.$o=n,this.Oo=s,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Iu(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(t){this.Ho(),this.stream.send(t)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(t,e){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():e&&e.code===Gr.RESOURCE_EXHAUSTED?(jr(e.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):e&&e.code===Gr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.ao(e)}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Fo===e&&this.Zo(t,n)}),(e=>{t((()=>{const t=new Qr(Gr.UNKNOWN,"Fetching auth token failed: "+e.message);return this.tu(t)}))}))}Zo(t,e){const n=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((t=>{n((()=>this.tu(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(t){return Br("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget((()=>this.Fo===t?e():(Br("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _u extends Au{constructor(t,e,n,s,r,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,i),this.serializer=r}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zr()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(t,e){return t.useProto3Json?(Kr(void 0===e||"string"==typeof e),Pi.fromBase64String(e||"")):(Kr(void 0===e||e instanceof Uint8Array),Pi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Gr.UNKNOWN:Ka(t.code);return new Qr(e,t.message||"")}(o);n=new sc(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ec(t,s.document.name),i=mc(s.document.updateTime),o=s.document.createTime?mc(s.document.createTime):ui.min(),a=new ao({mapValue:{fields:s.document.fields}}),c=uo.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new ec(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ec(t,s.document),i=s.readTime?mc(s.readTime):ui.min(),o=uo.newNoDocument(r,i),a=s.removedTargetIds||[];n=new ec([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ec(t,s.document),i=s.removedTargetIds||[];n=new ec([],i,r,null)}else{if(!("filter"in e))return zr();{e.filter;const t=e.filter;t.targetId;const{count:s=0,unchangedNames:r}=t,i=new qa(s,r),o=t.targetId;n=new nc(o,i)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ui.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?ui.min():e.readTime?mc(e.readTime):ui.min()}(t);return this.listener.nu(e,n)}su(t){const e={};e.database=Tc(this.serializer),e.addTarget=function(t,e){let n;const s=e.target;if(n=Po(s)?{documents:Ic(t,s)}:{query:Ac(t,s)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=gc(t,e.resumeToken);const s=dc(t,e.expectedCount);null!==s&&(n.expectedCount=s)}else if(e.snapshotVersion.compareTo(ui.min())>0){n.readTime=fc(t,e.snapshotVersion.toTimestamp());const s=dc(t,e.expectedCount);null!==s&&(n.expectedCount=s)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zr()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.Wo(e)}iu(t){const e={};e.database=Tc(this.serializer),e.removeTarget=t,this.Wo(e)}}class Du extends Au{constructor(t,e,n,s,r,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,i),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(Kr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function(t,e){return t&&t.length>0?(Kr(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?mc(t.updateTime):mc(e);return n.isEqual(ui.min())&&(n=mc(e)),new Ca(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=mc(t.commitTime);return this.listener.cu(n,e)}return Kr(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=Tc(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof La)n={update:Sc(t,e.key,e.value)};else if(e instanceof Fa)n={delete:wc(t,e.key)};else if(e instanceof Ra)n={update:Sc(t,e.key,e.data),updateMask:Oc(e.fieldMask)};else{if(!(e instanceof Va))return zr();n={verify:wc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof pa)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ma)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof va)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ea)return{fieldPath:e.field.canonicalString(),increment:n.gt};throw zr()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:pc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zr()}(t,e.precondition)),n}(this.serializer,t)))};this.Wo(e)}}class ku extends class{}{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Qr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,r])=>this.connection.Io(t,e,n,s,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Gr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Qr(Gr.UNKNOWN,t.toString())}))}vo(t,e,n,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.vo(t,e,n,r,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Gr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Qr(Gr.UNKNOWN,t.toString())}))}terminate(){this.lu=!0}}class Nu{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(jr(e),this.mu=!1):Br("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class xu{constructor(t,e,n,s,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr((t=>{n.enqueueAndForget((async()=>{Bu(this)&&(Br("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Hr(t);e.vu.add(4),await Ru(e),e.bu.set("Unknown"),e.vu.delete(4),await Lu(e)}(this))}))})),this.bu=new Nu(n,s)}}async function Lu(t){if(Bu(t))for(const e of t.Ru)await e(!0)}async function Ru(t){for(const e of t.Ru)await e(!1)}function Mu(t,e){const n=Hr(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Uu(n)?Vu(n):sh(n).Ko()&&Pu(n,e))}function Ou(t,e){const n=Hr(t),s=sh(n);n.Au.delete(e),s.Ko()&&Fu(n,e),0===n.Au.size&&(s.Ko()?s.jo():Bu(n)&&n.bu.set("Unknown"))}function Pu(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ui.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sh(t).su(e)}function Fu(t,e){t.Vu.qt(e),sh(t).iu(e)}function Vu(t){t.Vu=new ic({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),sh(t).start(),t.bu.gu()}function Uu(t){return Bu(t)&&!sh(t).Uo()&&t.Au.size>0}function Bu(t){return 0===Hr(t).vu.size}function ju(t){t.Vu=void 0}async function qu(t){t.Au.forEach(((e,n)=>{Pu(t,e)}))}async function $u(t,e){ju(t),Uu(t)?(t.bu.Iu(e),Vu(t)):t.bu.set("Unknown")}async function zu(t,e,n){if(t.bu.set("Online"),e instanceof sc&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const s of e.targetIds)t.Au.has(s)&&(await t.remoteSyncer.rejectListen(s,n),t.Au.delete(s),t.Vu.removeTarget(s))}(t,e)}catch(n){Br("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ku(t,n)}else if(e instanceof ec?t.Vu.Ht(e):e instanceof nc?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(ui.min()))try{const e=await uu(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Vu.ce(e);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.Au.get(s);r&&t.Au.set(s,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const s=t.Au.get(e);if(!s)return;t.Au.set(e,s.withResumeToken(Pi.EMPTY_BYTE_STRING,s.snapshotVersion)),Fu(t,e);const r=new Fc(s.target,e,n,s.sequenceNumber);Pu(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Br("RemoteStore","Failed to raise snapshot:",e),await Ku(t,e)}}async function Ku(t,e,n){if(!Ti(e))throw e;t.vu.add(1),await Ru(t),t.bu.set("Offline"),n||(n=()=>uu(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Br("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Lu(t)}))}function Hu(t,e){return e().catch((n=>Ku(t,n,e)))}async function Gu(t){const e=Hr(t),n=rh(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Qu(e);)try{const t=await hu(e.localStore,s);if(null===t){0===e.Eu.length&&n.jo();break}s=t.batchId,Wu(e,t)}catch(t){await Ku(e,t)}Xu(e)&&Yu(e)}function Qu(t){return Bu(t)&&t.Eu.length<10}function Wu(t,e){t.Eu.push(e);const n=rh(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Xu(t){return Bu(t)&&!rh(t).Uo()&&t.Eu.length>0}function Yu(t){rh(t).start()}async function Ju(t){rh(t).hu()}async function Zu(t){const e=rh(t);for(const n of t.Eu)e.uu(n.mutations)}async function th(t,e,n){const s=t.Eu.shift(),r=Ba.from(s,e,n);await Hu(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Gu(t)}async function eh(t,e){e&&rh(t).ou&&await async function(t,e){if(function(t){switch(t){default:return zr();case Gr.CANCELLED:case Gr.UNKNOWN:case Gr.DEADLINE_EXCEEDED:case Gr.RESOURCE_EXHAUSTED:case Gr.INTERNAL:case Gr.UNAVAILABLE:case Gr.UNAUTHENTICATED:return!1;case Gr.INVALID_ARGUMENT:case Gr.NOT_FOUND:case Gr.ALREADY_EXISTS:case Gr.PERMISSION_DENIED:case Gr.FAILED_PRECONDITION:case Gr.ABORTED:case Gr.OUT_OF_RANGE:case Gr.UNIMPLEMENTED:case Gr.DATA_LOSS:return!0}}(n=e.code)&&n!==Gr.ABORTED){const n=t.Eu.shift();rh(t).Qo(),await Hu(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Gu(t)}var n}(t,e),Xu(t)&&Yu(t)}async function nh(t,e){const n=Hr(t);n.asyncQueue.verifyOperationInProgress(),Br("RemoteStore","RemoteStore received new credentials");const s=Bu(n);n.vu.add(3),await Ru(n),s&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Lu(n)}function sh(t){return t.Su||(t.Su=function(t,e,n){const s=Hr(t);return s.fu(),new _u(e,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{uo:qu.bind(null,t),ao:$u.bind(null,t),nu:zu.bind(null,t)}),t.Ru.push((async e=>{e?(t.Su.Qo(),Uu(t)?Vu(t):t.bu.set("Unknown")):(await t.Su.stop(),ju(t))}))),t.Su}function rh(t){return t.Du||(t.Du=function(t,e,n){const s=Hr(t);return s.fu(),new Du(e,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{uo:Ju.bind(null,t),ao:eh.bind(null,t),au:Zu.bind(null,t),cu:th.bind(null,t)}),t.Ru.push((async e=>{e?(t.Du.Qo(),await Gu(t)):(await t.Du.stop(),t.Eu.length>0&&(Br("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))}))),t.Du}class ih{constructor(t,e,n,s,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,s,r){const i=Date.now()+n,o=new ih(t,e,i,s,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qr(Gr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oh(t,e){if(jr("AsyncQueue",`${e}: ${t}`),Ti(t))return new Qr(Gr.UNAVAILABLE,`${e}: ${t}`);throw t}class ah{constructor(t){this.comparator=t?(e,n)=>t(e,n)||gi.comparator(e.key,n.key):(t,e)=>gi.comparator(t.key,e.key),this.keyedMap=Zo(),this.sortedSet=new ki(this.comparator)}static emptySet(t){return new ah(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ah))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(!t.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new ah;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class ch{constructor(){this.Cu=new ki(gi.comparator)}track(t){const e=t.doc.key,n=this.Cu.get(e);n?0!==t.type&&3===n.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==n.type?this.Cu=this.Cu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Cu=this.Cu.remove(e):1===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):zr():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class uh{constructor(t,e,n,s,r,i,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,s,r){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new uh(t,e,ah.emptySet(e),i,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$o(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class hh{constructor(){this.Nu=void 0,this.listeners=[]}}class lh{constructor(){this.queries=new Wo((t=>zo(t)),$o),this.onlineState="Unknown",this.ku=new Set}}async function dh(t,e){const n=Hr(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new hh),r)try{i.Nu=await n.onListen(s)}catch(t){const n=oh(t,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(n)}n.queries.set(s,i),i.listeners.push(e),e.Mu(n.onlineState),i.Nu&&e.$u(i.Nu)&&mh(n)}async function fh(t,e){const n=Hr(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const t=i.listeners.indexOf(e);t>=0&&(i.listeners.splice(t,1),r=0===i.listeners.length)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function gh(t,e){const n=Hr(t);let s=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.listeners)e.$u(t)&&(s=!0);r.Nu=t}}s&&mh(n)}function ph(t,e,n){const s=Hr(t),r=s.queries.get(e);if(r)for(const t of r.listeners)t.onError(n);s.queries.delete(e)}function mh(t){t.ku.forEach((t=>{t.next()}))}class yh{constructor(t,e,n){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new uh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Ku||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){if(t.docChanges.length>0)return!0;const e=this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Uu(t){t=uh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class vh{constructor(t){this.key=t}}class wh{constructor(t){this.key=t}}class Eh{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=oa(),this.mutatedKeys=oa(),this.tc=Go(t),this.ec=new ah(this.tc)}get nc(){return this.Yu}sc(t,e){const n=e?e.ic:new ch,s=e?e.ec:this.ec;let r=e?e.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,c="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((t,e)=>{const u=s.get(t),h=Ho(this.query,e)?e:null,l=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;u&&h?u.data.isEqual(h.data)?l!==d&&(n.track({type:3,doc:h}),f=!0):this.rc(u,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.tc(h,a)>0||c&&this.tc(h,c)<0)&&(o=!0)):!u&&h?(n.track({type:0,doc:h}),f=!0):u&&!h&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(h?(i=i.add(h),r=d?r.add(t):r.delete(t)):(i=i.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const t="F"===this.query.limitType?i.last():i.first();i=i.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ec:i,ic:n,zi:o,mutatedKeys:r}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const s=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const r=t.ic.xu();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr()}};return n(t)-n(e)}(t.type,e.type)||this.tc(t.doc,e.doc))),this.oc(n);const i=e?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==r.length||a?{snapshot:new uh(this.query,t.ec,s,r,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ch,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach((t=>this.Yu=this.Yu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Yu=this.Yu.delete(t))),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=oa(),this.ec.forEach((t=>{this.ac(t.key)&&(this.Zu=this.Zu.add(t.key))}));const e=[];return t.forEach((t=>{this.Zu.has(t)||e.push(new wh(t))})),this.Zu.forEach((n=>{t.has(n)||e.push(new vh(n))})),e}hc(t){this.Yu=t.ir,this.Zu=oa();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return uh.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class bh{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Th{constructor(t){this.key=t,this.fc=!1}}class Ch{constructor(t,e,n,s,r,i){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new Wo((t=>zo(t)),$o),this._c=new Map,this.mc=new Set,this.gc=new ki(gi.comparator),this.yc=new Map,this.Ic=new Xc,this.Tc={},this.Ec=new Map,this.Ac=zc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Sh(t,e){const n=function(t){const e=Hr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ah.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dh.bind(null,e),e.dc.nu=gh.bind(null,e.eventManager),e.dc.Pc=ph.bind(null,e.eventManager),e}(t);let s,r;const i=n.wc.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.lc();else{const t=await function(t,e){const n=Hr(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let s;return n.Bs.getTargetData(t,e).next((r=>r?(s=r,bi.resolve(s)):n.Bs.allocateTargetId(t).next((r=>(s=new Fc(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Bs.addTargetData(t,s).next((()=>s)))))))})).then((t=>{const s=n.Ji.get(t.targetId);return(null===s||t.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(t.targetId,t),n.Yi.set(e,t.targetId)),t}))}(n.localStore,jo(e)),i=n.sharedClientState.addLocalQueryTarget(t.targetId);s=t.targetId,r=await async function(t,e,n,s,r){t.Rc=(e,n,s)=>async function(t,e,n,s){let r=e.view.sc(n);r.zi&&(r=await du(t.localStore,e.query,!1).then((({documents:t})=>e.view.sc(t,r))));const i=s&&s.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,i);return Oh(t,e.targetId,o.cc),o.snapshot}(t,e,n,s);const i=await du(t.localStore,e,!0),o=new Eh(e,i.ir),a=o.sc(i.documents),c=tc.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==t.onlineState,r),u=o.applyChanges(a,t.isPrimaryClient,c);Oh(t,n,u.cc);const h=new bh(e,n,o);return t.wc.set(e,h),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}(n,e,s,"current"===i,t.resumeToken),n.isPrimaryClient&&Mu(n.remoteStore,t)}return r}async function Ih(t,e){const n=Hr(t),s=n.wc.get(e),r=n._c.get(s.targetId);if(r.length>1)return n._c.set(s.targetId,r.filter((t=>!$o(t,e)))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await lu(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),Ou(n.remoteStore,s.targetId),Rh(n,s.targetId)})).catch(Ei)):(Rh(n,s.targetId),await lu(n.localStore,s.targetId,!0))}async function Ah(t,e){const n=Hr(t);try{const t=await function(t,e){const n=Hr(t),s=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const o=[];e.targetChanges.forEach(((i,a)=>{const c=r.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(t,i.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(t,i.addedDocuments,a))));let u=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?u=u.withResumeToken(Pi.EMPTY_BYTE_STRING,ui.min()).withLastLimboFreeSnapshotVersion(ui.min()):i.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(i.resumeToken,s)),r=r.insert(a,u),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,i)&&o.push(n.Bs.updateTargetData(t,u))}));let a=Yo(),c=oa();if(e.documentUpdates.forEach((s=>{e.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,s))})),o.push(function(t,e,n){let s=oa(),r=oa();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=Yo();return n.forEach(((n,i)=>{const o=t.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),i.isNoDocument()&&i.version.isEqual(ui.min())?(e.removeEntry(n,i.readTime),s=s.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(i),s=s.insert(n,i)):Br("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)})),{nr:s,sr:r}}))}(t,i,e.documentUpdates).next((t=>{a=t.nr,c=t.sr}))),!s.isEqual(ui.min())){const e=n.Bs.getLastRemoteSnapshotVersion(t).next((e=>n.Bs.setTargetsMetadata(t,t.currentSequenceNumber,s)));o.push(e)}return bi.waitFor(o).next((()=>i.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Ji=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const s=n.yc.get(e);s&&(Kr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?s.fc=!0:t.modifiedDocuments.size>0?Kr(s.fc):t.removedDocuments.size>0&&(Kr(s.fc),s.fc=!1))})),await Vh(n,t,e)}catch(t){await Ei(t)}}function _h(t,e,n){const s=Hr(t);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const t=[];s.wc.forEach(((n,s)=>{const r=s.view.Mu(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Hr(t);n.onlineState=e;let s=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.Mu(e)&&(s=!0)})),s&&mh(n)}(s.eventManager,e),t.length&&s.dc.nu(t),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Dh(t,e,n){const s=Hr(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.yc.get(e),i=r&&r.key;if(i){let t=new ki(gi.comparator);t=t.insert(i,uo.newNoDocument(i,ui.min()));const n=oa().add(i),r=new Za(ui.min(),new Map,new ki(oi),t,n);await Ah(s,r),s.gc=s.gc.remove(i),s.yc.delete(e),Fh(s)}else await lu(s.localStore,e,!1).then((()=>Rh(s,e,n))).catch(Ei)}async function kh(t,e){const n=Hr(t),s=e.batch.batchId;try{const t=await function(t,e){const n=Hr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const s=e.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,s){const r=n.batch,i=r.keys();let o=bi.resolve();return i.forEach((t=>{o=o.next((()=>s.getEntry(e,t))).next((e=>{const i=n.docVersions.get(t);Kr(null!==i),e.version.compareTo(i)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),s.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=oa();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,s)))}))}(n.localStore,e);Lh(n,s,null),xh(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Vh(n,t)}catch(t){await Ei(t)}}async function Nh(t,e,n){const s=Hr(t);try{const t=await function(t,e){const n=Hr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let s;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Kr(null!==e),s=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,s,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,s))).next((()=>n.localDocuments.getDocuments(t,s)))}))}(s.localStore,e);Lh(s,e,n),xh(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Vh(s,t)}catch(n){await Ei(n)}}function xh(t,e){(t.Ec.get(e)||[]).forEach((t=>{t.resolve()})),t.Ec.delete(e)}function Lh(t,e,n){const s=Hr(t);let r=s.Tc[s.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),s.Tc[s.currentUser.toKey()]=r}}function Rh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t._c.get(e))t.wc.delete(s),n&&t.dc.Pc(s,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach((e=>{t.Ic.containsKey(e)||Mh(t,e)}))}function Mh(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(Ou(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Fh(t))}function Oh(t,e,n){for(const s of n)s instanceof vh?(t.Ic.addReference(s.key,e),Ph(t,s)):s instanceof wh?(Br("SyncEngine","Document no longer in limbo: "+s.key),t.Ic.removeReference(s.key,e),t.Ic.containsKey(s.key)||Mh(t,s.key)):zr()}function Ph(t,e){const n=e.key,s=n.path.canonicalString();t.gc.get(n)||t.mc.has(s)||(Br("SyncEngine","New document in limbo: "+n),t.mc.add(s),Fh(t))}function Fh(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new gi(li.fromString(e)),s=t.Ac.next();t.yc.set(s,new Th(n)),t.gc=t.gc.insert(n,s),Mu(t.remoteStore,new Fc(jo(Vo(n.path)),s,"TargetPurposeLimboResolution",Ci.ct))}}async function Vh(t,e,n){const s=Hr(t),r=[],i=[],o=[];s.wc.isEmpty()||(s.wc.forEach(((t,a)=>{o.push(s.Rc(a,e,n).then((t=>{if((t||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=iu.Li(a.targetId,t);i.push(e)}})))})),await Promise.all(o),s.dc.nu(r),await async function(t,e){const n=Hr(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>bi.forEach(e,(e=>bi.forEach(e.Fi,(s=>n.persistence.referenceDelegate.addReference(t,e.targetId,s))).next((()=>bi.forEach(e.Bi,(s=>n.persistence.referenceDelegate.removeReference(t,e.targetId,s)))))))))}catch(t){if(!Ti(t))throw t;Br("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Ji.get(e),s=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(s);n.Ji=n.Ji.insert(e,r)}}}(s.localStore,i))}async function Uh(t,e){const n=Hr(t);if(!n.currentUser.isEqual(e)){Br("SyncEngine","User change. New user:",e.toKey());const t=await cu(n.localStore,e);n.currentUser=e,function(t,e){t.Ec.forEach((t=>{t.forEach((t=>{t.reject(new Qr(Gr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ec.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Vh(n,t.er)}}function Bh(t,e){const n=Hr(t),s=n.yc.get(e);if(s&&s.fc)return oa().add(s.key);{let t=oa();const s=n._c.get(e);if(!s)return t;for(const e of s){const s=n.wc.get(e);t=t.unionWith(s.view.nc)}return t}}function jh(t){const e=Hr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nh.bind(null,e),e}class qh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Su(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,s){return new au(t,e,n,s)}(this.persistence,new ou,t.initialUser,this.serializer)}createPersistence(t){return new nu(ru.zs,this.serializer)}createSharedClientState(t){return new gu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class $h{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>_h(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uh.bind(null,this.syncEngine),await async function(t,e){const n=Hr(t);e?(n.vu.delete(2),await Lu(n)):e||(n.vu.add(2),await Ru(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new lh}createDatastore(t){const e=Su(t.databaseInfo.databaseId),n=(s=t.databaseInfo,new Tu(s));var s;return function(t,e,n,s){return new ku(t,e,n,s)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,s=t.asyncQueue,r=t=>_h(this.syncEngine,t,0),i=mu.D()?new mu:new pu,new xu(e,n,s,r,i);var e,n,s,r,i}createSyncEngine(t,e){return function(t,e,n,s,r,i,o){const a=new Ch(t,e,n,s,r,i);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Hr(t);Br("RemoteStore","RemoteStore shutting down."),e.vu.add(5),await Ru(e),e.Pu.shutdown(),e.bu.set("Unknown")}(this.remoteStore)}}class zh{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):jr("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class Kh{constructor(t,e,n,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=Pr.UNAUTHENTICATED,this.clientId=ii.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Br("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Br("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=oh(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Hh(t,e){t.asyncQueue.verifyOperationInProgress(),Br("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async t=>{s.isEqual(t)||(await cu(e.localStore,t),s=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Gh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Br("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Gr.FAILED_PRECONDITION||t.code===Gr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;qr("Error using user provided cache. Falling back to memory cache: "+n),await Hh(t,new qh)}}else Br("FirestoreClient","Using default OfflineComponentProvider"),await Hh(t,new qh);return t._offlineComponents}(t);Br("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener((t=>nh(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>nh(e.remoteStore,n))),t._onlineComponents=e}async function Qh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Br("FirestoreClient","Using user provided OnlineComponentProvider"),await Gh(t,t._uninitializedComponentsProvider._online)):(Br("FirestoreClient","Using default OnlineComponentProvider"),await Gh(t,new $h))),t._onlineComponents}async function Wh(t){const e=await Qh(t),n=e.eventManager;return n.onListen=Sh.bind(null,e.syncEngine),n.onUnlisten=Ih.bind(null,e.syncEngine),n}function Xh(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Yh=new Map;function Jh(t,e,n){if(!n)throw new Qr(Gr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Zh(t){if(!gi.isDocumentKey(t))throw new Qr(Gr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tl(t){if(gi.isDocumentKey(t))throw new Qr(Gr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function el(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":zr()}function nl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Qr(Gr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=el(t);throw new Qr(Gr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class sl{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Qr(Gr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qr(Gr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,s){if(!0===e&&!0===s)throw new Qr(Gr.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xh(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Qr(Gr.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Qr(Gr.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Qr(Gr.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class rl{constructor(t,e,n,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qr(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Qr(Gr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sl(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Yr;switch(t.type){case"firstParty":return new ei(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Qr(Gr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Yh.get(t);e&&(Br("ComponentProvider","Removing Datastore"),Yh.delete(t),e.terminate())}(this),Promise.resolve()}}class il{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new al(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new il(this.firestore,t,this._key)}}class ol{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ol(this.firestore,t,this._query)}}class al extends ol{constructor(t,e,n){super(t,e,Vo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new il(this.firestore,null,new gi(t))}withConverter(t){return new al(this.firestore,t,this._path)}}function cl(t,e,...n){if(t=p(t),Jh("collection","path",e),t instanceof rl){const s=li.fromString(e,...n);return tl(s),new al(t,null,s)}{if(!(t instanceof il||t instanceof al))throw new Qr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(li.fromString(e,...n));return tl(s),new al(t.firestore,null,s)}}function ul(t,e,...n){if(t=p(t),1===arguments.length&&(e=ii.A()),Jh("doc","path",e),t instanceof rl){const s=li.fromString(e,...n);return Zh(s),new il(t,null,new gi(s))}{if(!(t instanceof il||t instanceof al))throw new Qr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(li.fromString(e,...n));return Zh(s),new il(t.firestore,t instanceof al?t.converter:null,new gi(s))}}class hl{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Iu(this,"async_queue_retry"),this.Xc=()=>{const t=Cu();t&&Br("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const t=Cu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=Cu();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise((()=>{}));const e=new Wr;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Qc.push(t),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(t){if(!Ti(t))throw t;Br("AsyncQueue","Operation failed with retryable error: "+t)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(t){const e=this.Gc.then((()=>(this.Hc=!0,t().catch((t=>{this.Wc=t,this.Hc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw jr("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Hc=!1,t))))));return this.Gc=e,e}enqueueAfterDelay(t,e,n){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const s=ih.createAndSchedule(this,t,e,n,(t=>this.na(t)));return this.zc.push(s),s}Zc(){this.Wc&&zr()}verifyOperationInProgress(){}async sa(){let t;do{t=this.Gc,await t}while(t!==this.Gc)}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then((()=>{this.zc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()}))}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}class ll extends rl{constructor(t,e,n,s){super(t,e,n,s),this.type="firestore",this._queue=new hl,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fl(this),this._firestoreClient.terminate()}}function dl(t){return t._firestoreClient||fl(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fl(t){var e,n,s;const r=t._freezeSettings(),i=function(t,e,n,s){return new zi(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Xh(s.experimentalLongPollingOptions),s.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Kh(t._authCredentials,t._appCheckCredentials,t._queue,i),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(s=r.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}class gl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gl(Pi.fromBase64String(t))}catch(t){throw new Qr(Gr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new gl(Pi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class pl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class ml{constructor(t){this._methodName=t}}class yl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Qr(Gr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Qr(Gr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return oi(this._lat,t._lat)||oi(this._long,t._long)}}const vl=/^__.*__$/;class wl{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Ra(t,this.data,this.fieldMask,e,this.fieldTransforms):new La(t,this.data,e,this.fieldTransforms)}}function El(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr()}}class bl{constructor(t,e,n,s,r,i){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new bl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.aa({path:n,la:!1});return s.fa(t),s}da(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.aa({path:n,la:!1});return s.ua(),s}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return Ll(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(El(this.ca)&&vl.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class Tl{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Su(t)}ya(t,e,n,s=!1){return new bl({ca:t,methodName:e,ga:n,path:fi.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cl(t){const e=t._freezeSettings(),n=Su(t._databaseId);return new Tl(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sl(t,e,n,s,r,i={}){const o=t.ya(i.merge||i.mergeFields?2:0,e,n,r);Dl("Data must be an object, but it was:",o,s);const a=Al(s,o);let c,u;if(i.merge)c=new Mi(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const t=[];for(const s of i.mergeFields){const r=kl(e,s,n);if(!o.contains(r))throw new Qr(Gr.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Rl(t,r)||t.push(r)}c=new Mi(t),u=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=o.fieldTransforms;return new wl(new ao(a),c,u)}function Il(t,e){if(_l(t=p(t)))return Dl("Unsupported field value:",e,t),Al(t,e);if(t instanceof ml)return function(t,e){if(!El(e.ca))throw e._a(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e._a(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,e){const n=[];let s=0;for(const r of t){let t=Il(r,e.wa(s));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),s++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=p(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ha(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=ci.fromDate(t);return{timestampValue:fc(e.serializer,n)}}if(t instanceof ci){const n=new ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:fc(e.serializer,n)}}if(t instanceof yl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gl)return{bytesValue:gc(e.serializer,t._byteString)};if(t instanceof il){const n=e.databaseId,s=t.firestore._databaseId;if(!s.isEqual(n))throw e._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:yc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e._a(`Unsupported field value: ${el(t)}`)}(t,e)}function Al(t,e){const n={};return Di(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(t,((t,s)=>{const r=Il(s,e.ha(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function _l(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ci||t instanceof yl||t instanceof gl||t instanceof il||t instanceof ml)}function Dl(t,e,n){if(!_l(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const s=el(n);throw"an object"===s?e._a(t+" a custom object"):e._a(t+" "+s)}}function kl(t,e,n){if((e=p(e))instanceof pl)return e._internalPath;if("string"==typeof e)return xl(t,e);throw Ll("Field path arguments must be of type string or ",t,!1,void 0,n)}const Nl=new RegExp("[~\\*/\\[\\]]");function xl(t,e,n){if(e.search(Nl)>=0)throw Ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pl(...e.split("."))._internalPath}catch(s){throw Ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ll(t,e,n,s,r){const i=s&&!s.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new Qr(Gr.INVALID_ARGUMENT,a+t+c)}function Rl(t,e){return t.some((t=>t.isEqual(e)))}class Ml{constructor(t,e,n,s,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new il(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Ol(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Pl("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Ol extends Ml{data(){return super.data()}}function Pl(t,e){return"string"==typeof e?xl(t,e):e instanceof pl?e._internalPath:e._delegate._internalPath}class Fl{convertValue(t,e="none"){switch(Gi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Bi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw zr()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return _i(t,((t,s)=>{n[t]=this.convertValue(s,e)})),n}convertGeoPoint(t){return new yl(Ui(t.latitude),Ui(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=qi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp($i(t));default:return null}}convertTimestamp(t){const e=Vi(t);return new ci(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=li.fromString(t);Kr(Pc(n));const s=new Ki(n.get(1),n.get(3)),r=new gi(n.popFirst(5));return s.isEqual(e)||jr(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}class Vl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ul extends Ml{constructor(t,e,n,s,r,i){super(t,e,n,s,i),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Pl("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Bl extends Ul{data(t={}){return super.data(t)}}class jl{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Vl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Bl(this._firestore,this._userDataWriter,n.key,n,new Vl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qr(Gr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const s=new Bl(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Vl(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const s=new Bl(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Vl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,i=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),i=n.indexOf(e.doc.key)),{type:ql(e.type),doc:s,oldIndex:r,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ql(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr()}}class $l extends Fl{constructor(t){super(),this.firestore=t}convertBytes(t){return new gl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new il(this.firestore,null,e)}}function zl(t){t=nl(t,ol);const e=nl(t.firestore,ll),n=dl(e),s=new $l(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Qr(Gr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,n={}){const s=new Wr;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,r){const i=new zh({next:n=>{e.enqueueAndForget((()=>fh(t,o))),n.fromCache&&"server"===s.source?r.reject(new Qr(Gr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new yh(n,i,{includeMetadataChanges:!0,Ku:!0});return dh(t,o)}(await Wh(t),t.asyncQueue,e,n,s))),s.promise}(n,t._query).then((n=>new jl(e,s,t,n)))}function Kl(t,e,n){t=nl(t,il);const s=nl(t.firestore,ll),r=function(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}(t.converter,e,n);return function(t,e){return function(t,e){const n=new Wr;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const s=jh(t);try{const t=await function(t,e){const n=Hr(t),s=ci.now(),r=e.reduce(((t,e)=>t.add(e.key)),oa());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Yo(),c=oa();return n.Zi.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{i=r;const o=[];for(const t of e){const e=Na(t,i.get(t.key).overlayedDocument);null!=e&&o.push(new Ra(t.key,e,co(e.value.mapValue),Sa.exists(!0)))}return n.mutationQueue.addMutationBatch(t,s,o,e)})).next((e=>{o=e;const s=e.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,s)}))})).then((()=>({batchId:o.batchId,changes:ta(i)})))}(s.localStore,e);s.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let s=t.Tc[t.currentUser.toKey()];s||(s=new ki(oi)),s=s.insert(e,n),t.Tc[t.currentUser.toKey()]=s}(s,t.batchId,n),await Vh(s,t.changes),await Gu(s.remoteStore)}catch(t){const e=oh(t,"Failed to persist write");n.reject(e)}}(await function(t){return Qh(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(dl(t),e)}(s,[Sl(Cl(s),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Sa.none())])}!function(t,e=!0){Fr="9.22.2",tt(new m("firestore",((t,{instanceIdentifier:n,options:s})=>{const r=t.getProvider("app").getImmediate(),i=new ll(new Zr(t.getProvider("auth-internal")),new si(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Qr(Gr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(t.options.projectId,e)}(r,n),r);return s=Object.assign({useFetchStreams:e},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),rt(Or,"3.12.2",t),rt(Or,"3.12.2","esm2017")}();const Hl=function(t,e){const n="string"==typeof t?t:"(default)",s=function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:function(t=W){const e=Y.get(t);if(!e&&t===W&&c())return st();if(!e)throw et.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:n});if(!s._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=a())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),s]:[e.substring(0,n),s]})("firestore");t&&function(t,e,n,s={}){var r;const i=(t=nl(t,rl))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==a&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),s.mockUserToken){let e,n;if("string"==typeof s.mockUserToken)e=s.mockUserToken,n=Pr.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(i)),""].join(".")}(s.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const i=s.mockUserToken.sub||s.mockUserToken.user_id;if(!i)throw new Qr(Gr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Pr(i)}t._authCredentials=new Jr(new Xr(e,n))}}(s,...t)}return s}(st({apiKey:"AIzaSyDtK7q2GcDLLV_tsTg05Q5EB1Qe-Qvsqmk",authDomain:"where-is-waldo-4eb8f.firebaseapp.com",projectId:"where-is-waldo-4eb8f",storageBucket:"where-is-waldo-4eb8f.appspot.com",messagingSenderId:"721147782545",appId:"1:721147782545:web:35d976dcd7877c8b742630"})),Gl=(()=>{const t=document.getElementById("backgroundImg"),e=e=>{const n=t.getBoundingClientRect(),s=e.clientX-n.left,r=e.clientY-n.top,i=window.innerWidth/1920;return{x:s,y:r,scaledX:s/i,scaledY:r/i}};return{characters:{bowser:{left:1430,top:3130,right:1730,bottom:3424},neo:{left:690,top:4700,right:900,bottom:4900},waldo:{left:1450,top:6550,right:1650,bottom:6750},meg:{left:256,top:484,right:456,bottom:684},pikachu:{left:982,top:1437,right:1182,bottom:1637},mike:{left:1121,top:1538,right:1321,bottom:1738}},getCoordinates:e,getCoordinateArea:t=>{const{scaledX:n,scaledY:s}=e(t),r={left:n-100,top:s-100,right:n+100,bottom:s+100};console.log(`Area: ${JSON.stringify(r)}`)}}})(),Ql=(()=>{const t=Gl.characters;return{storeCharacterLocations:()=>{try{Object.entries(t).forEach((([t,{left:e,top:n,right:s,bottom:r}])=>{Kl(ul(Hl,"characterLocations",t),{left:e,top:n,right:s,bottom:r}).then((()=>{console.log(`${t} location stored successfully.`)})).catch((e=>{console.error(`Error storing ${t} location:`,e)}))}))}catch(t){console.error("Error storing character locations:",t)}},getCharacterLocations:async()=>{try{(await zl(cl(Hl,"characterLocations"))).forEach((t=>{const e=t.id,{left:n,top:s,right:r,bottom:i}=t.data();console.log(`${e}: (${n}, ${s}, ${r}, ${i})`)}))}catch(t){console.error("Error retrieving character locations:",t)}},verifyClickedPosition:async(t,e,n)=>{try{const s=await zl(cl(Hl,"characterLocations"));let r=null;return s.forEach((s=>{const i=s.id,{left:o,top:a,right:c,bottom:u}=s.data();("cyberpunk"!==n||"bowser"!==i&&"neo"!==i&&"waldo"!==i)&&("robot"!==n||"meg"!==i&&"pikachu"!==i&&"mike"!==i)||t>=o&&t<=c&&e>=a&&e<=u&&(r=i)})),r}catch(t){return console.error("Error verifying clicked position:",t),null}},checkUserExists:async(t,e)=>{try{const n=ul(Hl,`userTimes-${e}`,t);return(await function(t){t=nl(t,il);const e=nl(t.firestore,ll);return function(t,e,n={}){const s=new Wr;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,r){const i=new zh({next:i=>{e.enqueueAndForget((()=>fh(t,o)));const a=i.docs.has(n);!a&&i.fromCache?r.reject(new Qr(Gr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&i.fromCache&&s&&"server"===s.source?r.reject(new Qr(Gr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(i)},error:t=>r.reject(t)}),o=new yh(Vo(n.path),i,{includeMetadataChanges:!0,Ku:!0});return dh(t,o)}(await Wh(t),t.asyncQueue,e,n,s))),s.promise}(dl(e),t._key).then((n=>function(t,e,n){const s=n.docs.get(e._key),r=new $l(t);return new Ul(t,r,e._key,s,new Vl(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n)))}(n)).exists()}catch(e){return console.error(`Error checking if user ${t} exists:`,e),!1}},storeUserTime:async(t,e,n)=>{try{await Kl(ul(Hl,`userTimes-${n}`,t),{time:e})}catch(e){console.error(`Error storing user time for ${t}:`,e)}},getTop10Times:async t=>{try{const e=await zl(cl(Hl,`userTimes-${t}`)),n=[];return e.forEach((t=>{const e=t.id,{time:s}=t.data();n.push({username:e,time:s})})),n.sort(((t,e)=>t.time.localeCompare(e.time))),n.slice(0,10)}catch(t){console.error("Error retrieving user times:",t)}}}})()},768:(t,e,n)=>{n.d(e,{Q:()=>h});const s=(t,e,n)=>{const s=t;s.style.left=`${e}px`,s.style.top=`${n}px`},r=(t,e)=>{const n=document.createElement("div");return n.className=t,e&&(n.textContent=e),n},i=(t,e)=>{const n=document.createElement("button");return n.textContent=t,n.type="button",n.dataset.character=e,n.addEventListener("click",h.handleCharacterButtonClick),n},o=t=>{t.parentNode&&t.parentNode.removeChild(t)},a=(()=>{const t=document.querySelector("#content"),e=[],n=[];return{createFeedbackMsg:(e,n,i,o="red")=>{const a=r("feedback",e);s(a,n-150,i-100),a.style.background=`rgba(${"green"===o?"0, 255, 0":"255, 0, 0"}, 0.7)`,t.appendChild(a),setTimeout((()=>{a.remove()}),5e3)},removeCircle:()=>{if(e.length>0){const t=e.pop();o(t)}},createCircle:(n,i)=>{const o=r("circle");s(o,n-50,i-50),t.appendChild(o),e.push(o)},removePopup:()=>{if(n.length>0){const t=n.pop();o(t)}},createPopup:(e,o,a)=>{const c=r("choice");e+60>window.innerWidth-150?s(c,e-160,o-70):s(c,e+60,o-70);const u=h.getGameChoice();let l;"cyberpunk"===u?l=[{text:"Bowser",character:"bowser"},{text:"Neo",character:"neo"},{text:"Waldo",character:"waldo"}]:"robot"===u&&(l=[{text:"Meg",character:"meg"},{text:"Pikachu",character:"pikachu"},{text:"Mike",character:"mike"}]),l.forEach((t=>{const e=i(t.text,t.character);a.includes(t.character)&&(e.classList.add("found"),e.removeEventListener("click",h.handleCharacterButtonClick)),c.appendChild(e)})),t.appendChild(c),n.push(c)},createTable:t=>{const e=h.getGameChoice(),n=document.querySelector("#leaderboardHeading"),s=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();n.textContent=`Top 10 For ${s}:`;const r=document.querySelector("#timer");document.querySelector("#currentUserTime").textContent=`Your time: ${r.textContent}.`;const i=document.querySelector("#tableBody");i.textContent="",t.forEach((t=>{const e=document.createElement("tr"),n=document.createElement("td");n.textContent=t.username;const s=document.createElement("td");s.textContent=t.time,e.appendChild(n),e.appendChild(s),i.appendChild(e)}))}}})();var c=n(954);const u=(()=>{const t=document.querySelector("#timer");let e,n=0;const s=()=>{clearInterval(e)},r=t=>{t.closest(".overlay").style.display="flex",t.style.display="flex"},i=t=>{t.closest(".overlay").style.display="none",t.style.display="none"};return{startTimer:()=>{const n=(new Date).getTime();e=setInterval((()=>{const e=(t=>{const e=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4),s=Math.floor(t%6e4/1e3);return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}.${String(t%1e3).padStart(3,"0")}`})((new Date).getTime()-n);t.textContent=e}),1)},stopTimer:s,resetTimer:()=>{s(),t.textContent="00:00:00"},resetCount:()=>{document.querySelector("#count").textContent="0/3"},updateCount:()=>{const t=document.querySelector("#count"),e=document.querySelectorAll(".grayed-out").length;t.textContent=`${e}/3`},grayOutCharacterIcon:t=>{const e=document.querySelector(`#${t}`);e&&e.classList.add("grayed-out")},clearCharacterIcons:()=>{["bowser","neo","waldo"].forEach((t=>{const e=document.querySelector(`#${t}`);e&&e.classList.remove("grayed-out")}))},showModal:r,hideModal:i,getLeaderboard:(e,n)=>{const s=document.querySelector(".endgame input");n.addEventListener("click",(()=>{(async()=>{const n=s.value.trim();if(n){if(await c.k.checkUserExists(n,e))return;c.k.storeUserTime(n,t.textContent,e);const s=await c.k.getTop10Times(e);a.createTable(s),r(document.querySelector(".modal.leaderboard"))}})(),i(document.querySelector(".modal.endgame"))}))},updateActiveDot:()=>{document.querySelectorAll(".dot").forEach(((t,e)=>{e===n?t.classList.add("active"):t.classList.remove("active")}))},updateActiveSlide:t=>{const e=document.querySelectorAll(".slide"),s=e.length;e[n].classList.remove("active"),"left"===t?(n=(n-1+s)%s,e[n].style.transform="translateX(-100%)",e[n].style.opacity="0"):"right"===t&&(n=(n+1)%s,e[n].style.transform="translateX(100%)",e[n].style.opacity="0"),e[n].classList.add("active"),setTimeout((()=>{e[n].style.transform="translateX(0)",e[n].style.opacity="1"}),0)},setBackgroundImage:()=>{const t=document.querySelector("#backgroundImg");switch(h.getGameChoice()){case"cyberpunk":default:t.src="../dist/images/cyberpunk-city.jpg";break;case"robot":t.src="../dist/images/robot-city.jpg"}},setCharacterIcons:()=>{const t=document.querySelectorAll(".character > .icon"),e=document.querySelectorAll(".character > .text > h3"),n={cyberpunk:[{icon:"../dist/images/bowser.png",title:"Bowser"},{icon:"../dist/images/neo.png",title:"Neo"},{icon:"../dist/images/waldo.png",title:"Waldo"}],robot:[{icon:"../dist/images/meg.png",title:"Meg"},{icon:"../dist/images/pikachu.png",title:"Pikachu"},{icon:"../dist/images/mike.png",title:"Mike"}]};(n[h.getGameChoice()]||n.default).forEach(((n,s)=>{t[s].src=n.icon,e[s].textContent=n.title}))},setCharacterId:()=>{document.querySelectorAll(".character").forEach((t=>{const e=t.querySelector("img");if(e){const n=e.src.split("/").pop().split(".")[0];t.id=n}}))}}})(),h=(()=>{const t=document.querySelector("#content"),e=document.querySelector("#dropdownButton"),n=document.querySelector("#dropdownMenu"),s=document.querySelectorAll(".startButton"),r=document.querySelector("#playAgainButton"),i=document.querySelector("#submitUsername"),o=document.querySelector(".modal.initial"),h=document.querySelector(".modal.endgame"),l=document.querySelector(".modal.leaderboard"),d=document.querySelector(".arrow.left"),f=document.querySelector(".arrow.right"),g=document.querySelector(".endgame input"),p=document.querySelector("#usernameError");let m=!1,y=!1,v=!1,w=null,E=null;const b=[],T=t=>{const e=t.target;return E=e.dataset.choice,m||(u.hideModal(o),u.startTimer(),m=!0,y=!0,v=!0,u.setBackgroundImage(),u.setCharacterIcons(),u.setCharacterId()),E},C=()=>{m=!1,y=!1,v=!1,w=null,b.length=0,g.value="",p.textContent="",u.resetCount(),u.resetTimer(),u.clearCharacterIcons(),u.hideModal(l),u.hideModal(h),u.showModal(o)},S=async t=>{if(m&&!t.target.closest("header")&&!t.target.closest("footer")&&!t.target.closest(".overlay")){if(y){const{x:e,y:n,scaledX:s,scaledY:r}=c.j.getCoordinates(t);a.createCircle(e,n),a.createPopup(e,n,b);try{w=await c.k.verifyClickedPosition(s,r,E)}catch(t){console.error("Error verifying clicked position:",t)}}else a.removeCircle(),a.removePopup();y=!y,v=!v}},I=t=>{const{x:e,y:n}=c.j.getCoordinates(t);a.removePopup();const s=t.target.dataset.character;if(w===s){const t=w.charAt(0).toUpperCase()+w.slice(1).toLowerCase();a.createFeedbackMsg(`Found ${t}!`,e,n,"green"),u.grayOutCharacterIcon(s),u.updateCount(),b.push(s),a.removePopup(),a.createPopup(e,n,b),3===b.length&&(u.stopTimer(),u.getLeaderboard(E,i),u.showModal(h))}else a.createFeedbackMsg("Keep looking!",e,n);return!1};return{init:()=>{d.addEventListener("click",(()=>{u.updateActiveSlide("left"),u.updateActiveDot()})),f.addEventListener("click",(()=>{u.updateActiveSlide("right"),u.updateActiveDot()})),t.addEventListener("click",S),document.querySelectorAll(".choice button").forEach((t=>{t.addEventListener("click",I)})),e.addEventListener("click",(()=>{n.classList.toggle("show"),e.textContent=n.classList.contains("show")?"▲ Hide Characters ▲":"▼ Show Characters ▼"})),s.forEach((t=>{t.addEventListener("click",T)})),r.addEventListener("click",C),u.hideModal(l),u.hideModal(h),u.showModal(o)},handleCharacterButtonClick:I,getGameChoice:()=>E}})();h.init()}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(954),n(768)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkIsR0FBMEIsaUJBQWYrVSxXQUF5QixPQUFPQSxXQUMzQyxJQUNDLE9BQU9uWSxNQUFRLElBQUltWixTQUFTLGNBQWIsRUFDaEIsQ0FBRSxNQUFPcFYsR0FDUixHQUFzQixpQkFBWFosT0FBcUIsT0FBT0EsTUFDeEMsQ0FDQSxDQVB1QixHQ0F4QmtnRSxFQUFvQnRwRCxFQUFJLENBQUM4cEQsRUFBS3QxRCxJQUFVakosT0FBT0UsVUFBVTBVLGVBQWUxSyxLQUFLcTBELEVBQUt0MUQsR0NHbEY4MEQsRUFBb0IsS0FDTUEsRUFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtLmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL3NyYy9maXJlYmFzZS5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL3NyYy9hcHAtbG9naWMuanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9zcmMvcmVuZGVyLmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vc3JjL2FwcC5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxuY29uc3QgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG5jb25zdCBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxuY29uc3QgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUJhc2U2NFN0cmluZ0Vycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cclxuICovXHJcbmNsYXNzIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3InO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxuY29uc3QgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXHJcbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICpcclxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0c0Zyb21HbG9iYWwgPSAoKSA9PiBnZXRHbG9iYWwoKS5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbi8qKlxyXG4gKiBBdHRlbXB0IHRvIHJlYWQgZGVmYXVsdHMgZnJvbSBhIEpTT04gc3RyaW5nIHByb3ZpZGVkIHRvXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb3IgYSBKU09OIGZpbGUgd2hvc2UgcGF0aCBpcyBpblxyXG4gKiBwcm9jZXNzKC4pZW52KC4pX19GSVJFQkFTRV9ERUZBVUxUU19QQVRIX19cclxuICogVGhlIGRvdHMgYXJlIGluIHBhcmVucyBiZWNhdXNlIGNlcnRhaW4gY29tcGlsZXJzIChWaXRlPykgY2Fubm90XHJcbiAqIGhhbmRsZSBzZWVpbmcgdGhhdCB2YXJpYWJsZSBpbiBjb21tZW50cy5cclxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzY4MzhcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVmYXVsdHNKc29uU3RyaW5nID0gcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4gICAgaWYgKGRlZmF1bHRzSnNvblN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlZmF1bHRzSnNvblN0cmluZyk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUNvb2tpZSA9ICgpID0+IHtcclxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG1hdGNoO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgvX19GSVJFQkFTRV9ERUZBVUxUU19fPShbXjtdKykvKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gU29tZSBlbnZpcm9ubWVudHMgc3VjaCBhcyBBbmd1bGFyIFVuaXZlcnNhbCBTU1IgaGF2ZSBhXHJcbiAgICAgICAgLy8gYGRvY3VtZW50YCBvYmplY3QgYnV0IGVycm9yIG9uIGFjY2Vzc2luZyBgZG9jdW1lbnQuY29va2llYC5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWNvZGVkID0gbWF0Y2ggJiYgYmFzZTY0RGVjb2RlKG1hdGNoWzFdKTtcclxuICAgIHJldHVybiBkZWNvZGVkICYmIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbn07XHJcbi8qKlxyXG4gKiBHZXQgdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuIEl0IGNoZWNrcyBpbiBvcmRlcjpcclxuICogKDEpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBhcyBhIHByb3BlcnR5IG9mIGBnbG9iYWxUaGlzYFxyXG4gKiAoMikgaWYgc3VjaCBhbiBvYmplY3Qgd2FzIHByb3ZpZGVkIG9uIGEgc2hlbGwgZW52aXJvbm1lbnQgdmFyaWFibGVcclxuICogKDMpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBpbiBhIGNvb2tpZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0cyA9ICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChnZXREZWZhdWx0c0Zyb21HbG9iYWwoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUNvb2tpZSgpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2F0Y2gtYWxsIGZvciBiZWluZyB1bmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWVcclxuICAgICAgICAgKiB0byBhbnkgZW52aXJvbm1lbnQgY2FzZSB3ZSBoYXZlIG5vdCBhY2NvdW50ZWQgZm9yLiBMb2cgdG9cclxuICAgICAgICAgKiBpbmZvIGluc3RlYWQgb2Ygc3dhbGxvd2luZyBzbyB3ZSBjYW4gZmluZCB0aGVzZSB1bmtub3duIGNhc2VzXHJcbiAgICAgICAgICogYW5kIGFkZCBwYXRocyBmb3IgdGhlbSBpZiBuZWVkZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc29sZS5pbmZvKGBVbmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWUgdG86ICR7ZX1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3Qgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBVUkwgaG9zdCBmb3JtYXR0ZWQgbGlrZSBgMTI3LjAuMC4xOjk5OTlgIG9yIGBbOjoxXTo0MDAwYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCA9IChwcm9kdWN0TmFtZSkgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtdWxhdG9ySG9zdHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltwcm9kdWN0TmFtZV07IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3RuYW1lIGFuZCBwb3J0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgcGFpciBvZiBob3N0bmFtZSBhbmQgcG9ydCBsaWtlIGBbXCI6OjFcIiwgNDAwMF1gIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQgPSAocHJvZHVjdE5hbWUpID0+IHtcclxuICAgIGNvbnN0IGhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KHByb2R1Y3ROYW1lKTtcclxuICAgIGlmICghaG9zdCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IGhvc3QubGFzdEluZGV4T2YoJzonKTsgLy8gRmluZGluZyB0aGUgbGFzdCBzaW5jZSBJUHY2IGFkZHIgYWxzbyBoYXMgY29sb25zLlxyXG4gICAgaWYgKHNlcGFyYXRvckluZGV4IDw9IDAgfHwgc2VwYXJhdG9ySW5kZXggKyAxID09PSBob3N0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBob3N0ICR7aG9zdH0gd2l0aCBubyBzZXBhcmF0ZSBob3N0bmFtZSBhbmQgcG9ydCFgKTtcclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChob3N0LnN1YnN0cmluZyhzZXBhcmF0b3JJbmRleCArIDEpLCAxMCk7XHJcbiAgICBpZiAoaG9zdFswXSA9PT0gJ1snKSB7XHJcbiAgICAgICAgLy8gQnJhY2tldC1xdW90ZWQgYFtpcHY2YWRkcl06cG9ydGAgPT4gcmV0dXJuIFwiaXB2NmFkZHJcIiAod2l0aG91dCBicmFja2V0cykuXHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygxLCBzZXBhcmF0b3JJbmRleCAtIDEpLCBwb3J0XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLCBwb3J0XTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgRmlyZWJhc2UgYXBwIGNvbmZpZyBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRBcHBDb25maWcgPSAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb25maWc7IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIGV4cGVyaW1lbnRhbCBzZXR0aW5nIG9uIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0IChwcm9wZXJ0aWVzXHJcbiAqIHByZWZpeGVkIGJ5IFwiX1wiKVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXRFeHBlcmltZW50YWxTZXR0aW5nID0gKG5hbWUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2BfJHtuYW1lfWBdOyB9O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBEZWZlcnJlZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICBjb25zdCBoZWFkZXIgPSB7XHJcbiAgICAgICAgYWxnOiAnbm9uZScsXHJcbiAgICAgICAgdHlwZTogJ0pXVCdcclxuICAgIH07XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xyXG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcclxuICAgIGlmICghc3ViKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLCBhdWQ6IHByb2plY3QsIGlhdCwgZXhwOiBpYXQgKyAzNjAwLCBhdXRoX3RpbWU6IGlhdCwgc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgXS5qb2luKCcuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQgb3Igc3BlY2lmaWVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGZvcmNlRW52aXJvbm1lbnQgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yY2VFbnZpcm9ubWVudDtcclxuICAgIGlmIChmb3JjZUVudmlyb25tZW50ID09PSAnbm9kZScpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdicm93c2VyJykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBydW50aW1lID0gdHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCdcclxuICAgICAgICA/IGNocm9tZS5ydW50aW1lXHJcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgPyBicm93c2VyLnJ1bnRpbWVcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xyXG5mdW5jdGlvbiBpc0lFKCkge1xyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpO1xyXG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgVW5pdmVyc2FsIFdpbmRvd3MgUGxhdGZvcm0gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNVV1AoKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdNU0FwcEhvc3QvJykgPj0gMDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZVNkaygpIHtcclxuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XHJcbn1cclxuLyoqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgcnVubmluZyBpbiBTYWZhcmkuICovXHJcbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xyXG4gICAgcmV0dXJuICghaXNOb2RlKCkgJiZcclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxyXG4gICAgICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgLy8gVHlwZXNjcmlwdCBzdHJpbmcgbGl0ZXJhbHMgZm9yIHR5cGUtc2FmZSBjb2Rlc1xyXG4gKiAgIHR5cGUgRXJyID1cclxuICogICAgICd1bmtub3duJyB8XHJcbiAqICAgICAnb2JqZWN0LW5vdC1mb3VuZCdcclxuICogICAgIDtcclxuICpcclxuICogICAvLyBDbG9zdXJlIGVudW0gZm9yIHR5cGUtc2FmZSBlcnJvciBjb2Rlc1xyXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cclxuICogICB2YXIgRXJyID0ge1xyXG4gKiAgICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxyXG4gKiAgIH1cclxuICpcclxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xyXG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcclxuICogICAgICdmaWxlLW5vdC1mb3VuZCc6IFwiQ291bGQgbm90IGZpbmQgZmlsZTogeyRmaWxlfVwiLFxyXG4gKiAgIH07XHJcbiAqXHJcbiAqICAgLy8gVHlwZS1zYWZlIGZ1bmN0aW9uIC0gbXVzdCBwYXNzIGEgdmFsaWQgZXJyb3IgY29kZSBhcyBwYXJhbS5cclxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XHJcbiAqXHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkZJTEVfTk9UX0ZPVU5ELCB7J2ZpbGUnOiBmaWxlTmFtZX0pO1xyXG4gKiAgIC4uLlxyXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxyXG4gKlxyXG4gKiAgIGNhdGNoIChlKSB7XHJcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xyXG4gKiAgICAgaWYgKChlIGFzIEZpcmViYXNlRXJyb3IpPy5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY29kZSwgbWVzc2FnZSwgXHJcbiAgICAvKiogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZWplY3RzIGlmIHRoZSBnaXZlbiBwcm9taXNlIGRvZXNuJ3QgcmVzb2x2ZSBpbiB0aW1lSW5NUyBtaWxsaXNlY29uZHMuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzZVdpdGhUaW1lb3V0KHByb21pc2UsIHRpbWVJbk1TID0gMjAwMCkge1xyXG4gICAgY29uc3QgZGVmZXJyZWRQcm9taXNlID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRlZmVycmVkUHJvbWlzZS5yZWplY3QoJ3RpbWVvdXQhJyksIHRpbWVJbk1TKTtcclxuICAgIHByb21pc2UudGhlbihkZWZlcnJlZFByb21pc2UucmVzb2x2ZSwgZGVmZXJyZWRQcm9taXNlLnJlamVjdCk7XHJcbiAgICByZXR1cm4gZGVmZXJyZWRQcm9taXNlLnByb21pc2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICBjb25zdCBvYmogPSB7fTtcclxuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xyXG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICBpZiAoIXF1ZXJ5U3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxuY2xhc3MgU2hhMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgbGV0IGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgY29uc3QgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBkaWdlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5leHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBzdWJzY3JpYmUobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIGxldCBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIHVuc3Vic2NyaWJlT25lKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgc2VuZE9uZShpLCBmbikge1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKGVycikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgbGV0IGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJnTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ25hbWVzcGFjZScpICsgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb3BpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgdXVpZC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgdXVpZHY0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgYyA9PiB7XHJcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XHJcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgfSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXHJcbi8qKlxyXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxyXG4gKiBTZWVcclxuICogaHR0cDovL2dvL3NhZmUtY2xpZW50LWJlaGF2aW9yI3N0ZXAtMS1kZXRlcm1pbmUtdGhlLWFwcHJvcHJpYXRlLXJldHJ5LWludGVydmFsLXRvLWhhbmRsZS1zcGlrZS10cmFmZmljXHJcbiAqIGZvciBjb250ZXh0LlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIGNvbnN0IGN1cnJCYXNlVmFsdWUgPSBpbnRlcnZhbE1pbGxpcyAqIE1hdGgucG93KGJhY2tvZmZGYWN0b3IsIGJhY2tvZmZDb3VudCk7XHJcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxyXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXHJcbiAgICBjb25zdCByYW5kb21XYWl0ID0gTWF0aC5yb3VuZChcclxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXHJcbiAgICBSQU5ET01fRkFDVE9SICpcclxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcclxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcclxuICAgICAgICAvLyBpZiB3ZSBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcclxuICAgICAgICAyKTtcclxuICAgIC8vIExpbWl0cyBiYWNrb2ZmIHRvIG1heCB0byBhdm9pZCBlZmZlY3RpdmVseSBwZXJtYW5lbnQgYmFja29mZi5cclxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcclxuICovXHJcbmZ1bmN0aW9uIG9yZGluYWwoaSkge1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XHJcbn1cclxuZnVuY3Rpb24gaW5kaWNhdG9yKGkpIHtcclxuICAgIGkgPSBNYXRoLmFicyhpKTtcclxuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xyXG4gICAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xyXG4gICAgICAgIHJldHVybiAndGgnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciwgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXREZWZhdWx0QXBwQ29uZmlnLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0LCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldERlZmF1bHRzLCBnZXRFeHBlcmltZW50YWxTZXR0aW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHByb21pc2VXaXRoVGltZW91dCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHV1aWR2NCwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGV0aGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkxBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRNdWx0aXBsZUluc3RhbmNlcyhtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbmNsYXNzIFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIGdldChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH1cclxuICAgIGdldEltbWVkaWF0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW4gbm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldENvbXBvbmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgaXNDb21wb25lbnRTZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXHJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xyXG4gICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVYUExJQ0lUICovKTtcclxuICAgIH1cclxufVxyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH1cclxuICAgIGdldFByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJjb25zdCBpbnN0YW5jZU9mQW55ID0gKG9iamVjdCwgY29uc3RydWN0b3JzKSA9PiBjb25zdHJ1Y3RvcnMuc29tZSgoYykgPT4gb2JqZWN0IGluc3RhbmNlb2YgYyk7XG5cbmxldCBpZGJQcm94eWFibGVUeXBlcztcbmxldCBjdXJzb3JBZHZhbmNlTWV0aG9kcztcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSB7XG4gICAgcmV0dXJuIChpZGJQcm94eWFibGVUeXBlcyB8fFxuICAgICAgICAoaWRiUHJveHlhYmxlVHlwZXMgPSBbXG4gICAgICAgICAgICBJREJEYXRhYmFzZSxcbiAgICAgICAgICAgIElEQk9iamVjdFN0b3JlLFxuICAgICAgICAgICAgSURCSW5kZXgsXG4gICAgICAgICAgICBJREJDdXJzb3IsXG4gICAgICAgICAgICBJREJUcmFuc2FjdGlvbixcbiAgICAgICAgXSkpO1xufVxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpIHtcbiAgICByZXR1cm4gKGN1cnNvckFkdmFuY2VNZXRob2RzIHx8XG4gICAgICAgIChjdXJzb3JBZHZhbmNlTWV0aG9kcyA9IFtcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuYWR2YW5jZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWUsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlUHJpbWFyeUtleSxcbiAgICAgICAgXSkpO1xufVxuY29uc3QgY3Vyc29yUmVxdWVzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvbkRvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUod3JhcChyZXF1ZXN0LnJlc3VsdCkpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICB9KTtcbiAgICBwcm9taXNlXG4gICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyBTaW5jZSBjdXJzb3JpbmcgcmV1c2VzIHRoZSBJREJSZXF1ZXN0ICgqc2lnaCopLCB3ZSBjYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIChzZWUgd3JhcEZ1bmN0aW9uKS5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCQ3Vyc29yKSB7XG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0TWFwLnNldCh2YWx1ZSwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2F0Y2hpbmcgdG8gYXZvaWQgXCJVbmNhdWdodCBQcm9taXNlIGV4Y2VwdGlvbnNcIlxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIC8vIFRoaXMgbWFwcGluZyBleGlzdHMgaW4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGJ1dCBkb2Vzbid0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNmb3JtQ2FjaGUuIFRoaXNcbiAgICAvLyBpcyBiZWNhdXNlIHdlIGNyZWF0ZSBtYW55IHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdC5cbiAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KHByb21pc2UsIHJlcXVlc3QpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHR4KSB7XG4gICAgLy8gRWFybHkgYmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBkb25lIHByb21pc2UgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgaWYgKHRyYW5zYWN0aW9uRG9uZU1hcC5oYXModHgpKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgZG9uZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QodHguZXJyb3IgfHwgbmV3IERPTUV4Y2VwdGlvbignQWJvcnRFcnJvcicsICdBYm9ydEVycm9yJykpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICAvLyBDYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsLlxuICAgIHRyYW5zYWN0aW9uRG9uZU1hcC5zZXQodHgsIGRvbmUpO1xufVxubGV0IGlkYlByb3h5VHJhcHMgPSB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciB0cmFuc2FjdGlvbi5kb25lLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkb25lJylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Eb25lTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgLy8gUG9seWZpbGwgZm9yIG9iamVjdFN0b3JlTmFtZXMgYmVjYXVzZSBvZiBFZGdlLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdvYmplY3RTdG9yZU5hbWVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2JqZWN0U3RvcmVOYW1lcyB8fCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcbiAgICB9LFxuICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XG4gICAgfSxcbn07XG5mdW5jdGlvbiByZXBsYWNlVHJhcHMoY2FsbGJhY2spIHtcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XG59XG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxuICAgIC8vIEVkZ2UgZG9lc24ndCBzdXBwb3J0IG9iamVjdFN0b3JlTmFtZXMgKGJvb28pLCBzbyB3ZSBwb2x5ZmlsbCBpdCBoZXJlLlxuICAgIGlmIChmdW5jID09PSBJREJEYXRhYmFzZS5wcm90b3R5cGUudHJhbnNhY3Rpb24gJiZcbiAgICAgICAgISgnb2JqZWN0U3RvcmVOYW1lcycgaW4gSURCVHJhbnNhY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0b3JlTmFtZXMsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZnVuYy5jYWxsKHVud3JhcCh0aGlzKSwgc3RvcmVOYW1lcywgLi4uYXJncyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuc2V0KHR4LCBzdG9yZU5hbWVzLnNvcnQgPyBzdG9yZU5hbWVzLnNvcnQoKSA6IFtzdG9yZU5hbWVzXSk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0eCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcChjdXJzb3JSZXF1ZXN0TWFwLmdldCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgIHJldHVybiB3cmFwKGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gd3JhcEZ1bmN0aW9uKHZhbHVlKTtcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcmV0dXJuLCBpdCBqdXN0IGNyZWF0ZXMgYSAnZG9uZScgcHJvbWlzZSBmb3IgdGhlIHRyYW5zYWN0aW9uLFxuICAgIC8vIHdoaWNoIGlzIGxhdGVyIHJldHVybmVkIGZvciB0cmFuc2FjdGlvbi5kb25lIChzZWUgaWRiT2JqZWN0SGFuZGxlcikuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pXG4gICAgICAgIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih2YWx1ZSk7XG4gICAgaWYgKGluc3RhbmNlT2ZBbnkodmFsdWUsIGdldElkYlByb3h5YWJsZVR5cGVzKCkpKVxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBpZGJQcm94eVRyYXBzKTtcbiAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmFsdWUgYmFjayBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gdHJhbnNmb3JtIGl0LlxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHdyYXAodmFsdWUpIHtcbiAgICAvLyBXZSBzb21ldGltZXMgZ2VuZXJhdGUgbXVsdGlwbGUgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0IChlZyB3aGVuIGN1cnNvcmluZyksIGJlY2F1c2VcbiAgICAvLyBJREIgaXMgd2VpcmQgYW5kIGEgc2luZ2xlIElEQlJlcXVlc3QgY2FuIHlpZWxkIG1hbnkgcmVzcG9uc2VzLCBzbyB0aGVzZSBjYW4ndCBiZSBjYWNoZWQuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QodmFsdWUpO1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgdHJhbnNmb3JtZWQgdGhpcyB2YWx1ZSBiZWZvcmUsIHJldXNlIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZS5cbiAgICAvLyBUaGlzIGlzIGZhc3RlciwgYnV0IGl0IGFsc28gcHJvdmlkZXMgb2JqZWN0IGVxdWFsaXR5LlxuICAgIGlmICh0cmFuc2Zvcm1DYWNoZS5oYXModmFsdWUpKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpO1xuICAgIC8vIE5vdCBhbGwgdHlwZXMgYXJlIHRyYW5zZm9ybWVkLlxuICAgIC8vIFRoZXNlIG1heSBiZSBwcmltaXRpdmUgdHlwZXMsIHNvIHRoZXkgY2FuJ3QgYmUgV2Vha01hcCBrZXlzLlxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdHJhbnNmb3JtQ2FjaGUuc2V0KHZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQobmV3VmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuY29uc3QgdW53cmFwID0gKHZhbHVlKSA9PiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcblxuZXhwb3J0IHsgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGFzIGEsIGluc3RhbmNlT2ZBbnkgYXMgaSwgcmVwbGFjZVRyYXBzIGFzIHIsIHVud3JhcCBhcyB1LCB3cmFwIGFzIHcgfTtcbiIsImltcG9ydCB7IHcgYXMgd3JhcCwgciBhcyByZXBsYWNlVHJhcHMgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcbmV4cG9ydCB7IHUgYXMgdW53cmFwLCB3IGFzIHdyYXAgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcblxuLyoqXG4gKiBPcGVuIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKiBAcGFyYW0gdmVyc2lvbiBTY2hlbWEgdmVyc2lvbi5cbiAqIEBwYXJhbSBjYWxsYmFja3MgQWRkaXRpb25hbCBjYWxsYmFja3MuXG4gKi9cbmZ1bmN0aW9uIG9wZW5EQihuYW1lLCB2ZXJzaW9uLCB7IGJsb2NrZWQsIHVwZ3JhZGUsIGJsb2NraW5nLCB0ZXJtaW5hdGVkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBvcGVuUHJvbWlzZSA9IHdyYXAocmVxdWVzdCk7XG4gICAgaWYgKHVwZ3JhZGUpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB1cGdyYWRlKHdyYXAocmVxdWVzdC5yZXN1bHQpLCBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCB3cmFwKHJlcXVlc3QudHJhbnNhY3Rpb24pLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoZXZlbnQpID0+IGJsb2NrZWQoXG4gICAgICAgIC8vIENhc3RpbmcgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC1ET00tbGliLWdlbmVyYXRvci9wdWxsLzE0MDVcbiAgICAgICAgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICB9XG4gICAgb3BlblByb21pc2VcbiAgICAgICAgLnRoZW4oKGRiKSA9PiB7XG4gICAgICAgIGlmICh0ZXJtaW5hdGVkKVxuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB0ZXJtaW5hdGVkKCkpO1xuICAgICAgICBpZiAoYmxvY2tpbmcpIHtcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCAoZXZlbnQpID0+IGJsb2NraW5nKGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICByZXR1cm4gb3BlblByb21pc2U7XG59XG4vKipcbiAqIERlbGV0ZSBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICovXG5mdW5jdGlvbiBkZWxldGVEQihuYW1lLCB7IGJsb2NrZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShuYW1lKTtcbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoZXZlbnQpID0+IGJsb2NrZWQoXG4gICAgICAgIC8vIENhc3RpbmcgZHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC1ET00tbGliLWdlbmVyYXRvci9wdWxsLzE0MDVcbiAgICAgICAgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdyYXAocmVxdWVzdCkudGhlbigoKSA9PiB1bmRlZmluZWQpO1xufVxuXG5jb25zdCByZWFkTWV0aG9kcyA9IFsnZ2V0JywgJ2dldEtleScsICdnZXRBbGwnLCAnZ2V0QWxsS2V5cycsICdjb3VudCddO1xuY29uc3Qgd3JpdGVNZXRob2RzID0gWydwdXQnLCAnYWRkJywgJ2RlbGV0ZScsICdjbGVhciddO1xuY29uc3QgY2FjaGVkTWV0aG9kcyA9IG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHtcbiAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBJREJEYXRhYmFzZSAmJlxuICAgICAgICAhKHByb3AgaW4gdGFyZ2V0KSAmJlxuICAgICAgICB0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApKVxuICAgICAgICByZXR1cm4gY2FjaGVkTWV0aG9kcy5nZXQocHJvcCk7XG4gICAgY29uc3QgdGFyZ2V0RnVuY05hbWUgPSBwcm9wLnJlcGxhY2UoL0Zyb21JbmRleCQvLCAnJyk7XG4gICAgY29uc3QgdXNlSW5kZXggPSBwcm9wICE9PSB0YXJnZXRGdW5jTmFtZTtcbiAgICBjb25zdCBpc1dyaXRlID0gd3JpdGVNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKTtcbiAgICBpZiAoXG4gICAgLy8gQmFpbCBpZiB0aGUgdGFyZ2V0IGRvZXNuJ3QgZXhpc3Qgb24gdGhlIHRhcmdldC4gRWcsIGdldEFsbCBpc24ndCBpbiBFZGdlLlxuICAgICEodGFyZ2V0RnVuY05hbWUgaW4gKHVzZUluZGV4ID8gSURCSW5kZXggOiBJREJPYmplY3RTdG9yZSkucHJvdG90eXBlKSB8fFxuICAgICAgICAhKGlzV3JpdGUgfHwgcmVhZE1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1ldGhvZCA9IGFzeW5jIGZ1bmN0aW9uIChzdG9yZU5hbWUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogdW5kZWZpbmVkIGd6aXBwcyBiZXR0ZXIsIGJ1dCBmYWlscyBpbiBFZGdlIDooXG4gICAgICAgIGNvbnN0IHR4ID0gdGhpcy50cmFuc2FjdGlvbihzdG9yZU5hbWUsIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seScpO1xuICAgICAgICBsZXQgdGFyZ2V0ID0gdHguc3RvcmU7XG4gICAgICAgIGlmICh1c2VJbmRleClcbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5pbmRleChhcmdzLnNoaWZ0KCkpO1xuICAgICAgICAvLyBNdXN0IHJlamVjdCBpZiBvcCByZWplY3RzLlxuICAgICAgICAvLyBJZiBpdCdzIGEgd3JpdGUgb3BlcmF0aW9uLCBtdXN0IHJlamVjdCBpZiB0eC5kb25lIHJlamVjdHMuXG4gICAgICAgIC8vIE11c3QgcmVqZWN0IHdpdGggb3AgcmVqZWN0aW9uIGZpcnN0LlxuICAgICAgICAvLyBNdXN0IHJlc29sdmUgd2l0aCBvcCB2YWx1ZS5cbiAgICAgICAgLy8gTXVzdCBoYW5kbGUgYm90aCBwcm9taXNlcyAobm8gdW5oYW5kbGVkIHJlamVjdGlvbnMpXG4gICAgICAgIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgdGFyZ2V0W3RhcmdldEZ1bmNOYW1lXSguLi5hcmdzKSxcbiAgICAgICAgICAgIGlzV3JpdGUgJiYgdHguZG9uZSxcbiAgICAgICAgXSkpWzBdO1xuICAgIH07XG4gICAgY2FjaGVkTWV0aG9kcy5zZXQocHJvcCwgbWV0aG9kKTtcbiAgICByZXR1cm4gbWV0aG9kO1xufVxucmVwbGFjZVRyYXBzKChvbGRUcmFwcykgPT4gKHtcbiAgICAuLi5vbGRUcmFwcyxcbiAgICBnZXQ6ICh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSA9PiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5nZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlciksXG4gICAgaGFzOiAodGFyZ2V0LCBwcm9wKSA9PiAhIWdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmhhcyh0YXJnZXQsIHByb3ApLFxufSkpO1xuXG5leHBvcnQgeyBkZWxldGVEQiwgb3BlbkRCIH07XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBzZXRVc2VyTG9nSGFuZGxlciwgc2V0TG9nTGV2ZWwgYXMgc2V0TG9nTGV2ZWwkMSB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBnZXREZWZhdWx0QXBwQ29uZmlnLCBkZWVwRXF1YWwsIEZpcmViYXNlRXJyb3IsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmV4cG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBvcGVuREIgfSBmcm9tICdpZGInO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIGdldFBsYXRmb3JtSW5mb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VydmljZS5saWJyYXJ5fS8ke3NlcnZpY2UudmVyc2lvbn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgY29uc3QgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XHJcbiAgICByZXR1cm4gKGNvbXBvbmVudCA9PT0gbnVsbCB8fCBjb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudC50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjkuMTJcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FwcCcpO1xuXG5jb25zdCBuYW1lJG4gPSBcIkBmaXJlYmFzZS9hcHAtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbSA9IFwiQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRsID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbmNvbnN0IG5hbWUkayA9IFwiQGZpcmViYXNlL2FwcC1jaGVjay1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRqID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrXCI7XG5cbmNvbnN0IG5hbWUkaSA9IFwiQGZpcmViYXNlL2F1dGhcIjtcblxuY29uc3QgbmFtZSRoID0gXCJAZmlyZWJhc2UvYXV0aC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRnID0gXCJAZmlyZWJhc2UvZGF0YWJhc2VcIjtcblxuY29uc3QgbmFtZSRmID0gXCJAZmlyZWJhc2UvZGF0YWJhc2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZSA9IFwiQGZpcmViYXNlL2Z1bmN0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGQgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYyA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcblxuY29uc3QgbmFtZSRiID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRhID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nXCI7XG5cbmNvbnN0IG5hbWUkOSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ4ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2VcIjtcblxuY29uc3QgbmFtZSQ3ID0gXCJAZmlyZWJhc2UvcGVyZm9ybWFuY2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNiA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWdcIjtcblxuY29uc3QgbmFtZSQ1ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ0ID0gXCJAZmlyZWJhc2Uvc3RvcmFnZVwiO1xuXG5jb25zdCBuYW1lJDMgPSBcIkBmaXJlYmFzZS9zdG9yYWdlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDIgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuY29uc3QgbmFtZSQxID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lID0gXCJmaXJlYmFzZVwiO1xuY29uc3QgdmVyc2lvbiA9IFwiOS4yMi4yXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBhcHAgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xyXG5jb25zdCBQTEFURk9STV9MT0dfU1RSSU5HID0ge1xyXG4gICAgW25hbWUkb106ICdmaXJlLWNvcmUnLFxyXG4gICAgW25hbWUkbl06ICdmaXJlLWNvcmUtY29tcGF0JyxcclxuICAgIFtuYW1lJGxdOiAnZmlyZS1hbmFseXRpY3MnLFxyXG4gICAgW25hbWUkbV06ICdmaXJlLWFuYWx5dGljcy1jb21wYXQnLFxyXG4gICAgW25hbWUkal06ICdmaXJlLWFwcC1jaGVjaycsXHJcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXBwLWNoZWNrLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRpXTogJ2ZpcmUtYXV0aCcsXHJcbiAgICBbbmFtZSRoXTogJ2ZpcmUtYXV0aC1jb21wYXQnLFxyXG4gICAgW25hbWUkZ106ICdmaXJlLXJ0ZGInLFxyXG4gICAgW25hbWUkZl06ICdmaXJlLXJ0ZGItY29tcGF0JyxcclxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbicsXHJcbiAgICBbbmFtZSRkXTogJ2ZpcmUtZm4tY29tcGF0JyxcclxuICAgIFtuYW1lJGNdOiAnZmlyZS1paWQnLFxyXG4gICAgW25hbWUkYl06ICdmaXJlLWlpZC1jb21wYXQnLFxyXG4gICAgW25hbWUkYV06ICdmaXJlLWZjbScsXHJcbiAgICBbbmFtZSQ5XTogJ2ZpcmUtZmNtLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ4XTogJ2ZpcmUtcGVyZicsXHJcbiAgICBbbmFtZSQ3XTogJ2ZpcmUtcGVyZi1jb21wYXQnLFxyXG4gICAgW25hbWUkNl06ICdmaXJlLXJjJyxcclxuICAgIFtuYW1lJDVdOiAnZmlyZS1yYy1jb21wYXQnLFxyXG4gICAgW25hbWUkNF06ICdmaXJlLWdjcycsXHJcbiAgICBbbmFtZSQzXTogJ2ZpcmUtZ2NzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQyXTogJ2ZpcmUtZnN0JyxcclxuICAgIFtuYW1lJDFdOiAnZmlyZS1mc3QtY29tcGF0JyxcclxuICAgICdmaXJlLWpzJzogJ2ZpcmUtanMnLFxyXG4gICAgW25hbWVdOiAnZmlyZS1qcy1hbGwnXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IF9hcHBzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogUmVnaXN0ZXJlZCBjb21wb25lbnRzLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmNvbnN0IF9jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgYmVpbmcgYWRkZWQgdG8gdGhpcyBhcHAncyBjb250YWluZXJcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGFwcC5jb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwICR7YXBwLm5hbWV9YCwgZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICBhcHAuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyXHJcbiAqIEByZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICBpZiAoX2NvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIF9jb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xyXG4gICAgLy8gYWRkIHRoZSBjb21wb25lbnQgdG8gZXhpc3RpbmcgYXBwIGluc3RhbmNlc1xyXG4gICAgZm9yIChjb25zdCBhcHAgb2YgX2FwcHMudmFsdWVzKCkpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICpcclxuICogQHJldHVybnMgdGhlIHByb3ZpZGVyIGZvciB0aGUgc2VydmljZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkge1xyXG4gICAgY29uc3QgaGVhcnRiZWF0Q29udHJvbGxlciA9IGFwcC5jb250YWluZXJcclxuICAgICAgICAuZ2V0UHJvdmlkZXIoJ2hlYXJ0YmVhdCcpXHJcbiAgICAgICAgLmdldEltbWVkaWF0ZSh7IG9wdGlvbmFsOiB0cnVlIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdENvbnRyb2xsZXIpIHtcclxuICAgICAgICB2b2lkIGhlYXJ0YmVhdENvbnRyb2xsZXIudHJpZ2dlckhlYXJ0YmVhdCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShhcHAsIG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBUZXN0IG9ubHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCkge1xyXG4gICAgX2NvbXBvbmVudHMuY2xlYXIoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBpbml0aWFsaXplQXBwKCkgZmlyc3QnLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcclxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBbXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqL106ICdOZWVkIHRvIHByb3ZpZGUgb3B0aW9ucywgd2hlbiBub3QgYmVpbmcgZGVwbG95ZWQgdG8gaG9zdGluZyB2aWEgc291cmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIFtcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIHdyaXRpbmcgdG8gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1kZWxldGVcIiAvKiBBcHBFcnJvci5JREJfREVMRVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAoX29wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IF9vcHRpb25zO1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSBnZXREZWZhdWx0QXBwQ29uZmlnKCkpO1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1vcHRpb25zXCIgLyogQXBwRXJyb3IuTk9fT1BUSU9OUyAqLyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCAmJiBuYW1lID09PSBERUZBVUxUX0VOVFJZX05BTUUgJiYgZ2V0RGVmYXVsdEFwcENvbmZpZygpKSB7XHJcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVBcHAoKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuLyoqXHJcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcclxuICogc2VydmljZXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZGVsZXRlQXBwKGFwcClcclxuICogICAudGhlbihmdW5jdGlvbigpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gKiAgIH0pXHJcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XHJcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxyXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXHJcbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgbGV0IGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lO1xyXG4gICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIENvbXBvbmVudFR5cGUuVkVSU0lPTiAqLykpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXHJcbiAqIHRoZSBGaXJlYmFzZSBTREsgbWFrZXMgYSBsb2dnaW5nIGNhbGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfTE9HX0FSR1VNRU5UICovKTtcclxuICAgIH1cclxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgYXJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcclxuICogYHZlcmJvc2VgIGxvZ3MgYXJlIG5vdCkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxvZ0xldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1kYXRhYmFzZSc7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBTVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1zdG9yZSc7XHJcbmxldCBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQl9OQU1FLCBEQl9WRVJTSU9OLCB7XHJcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJcclxuICAgICAgICAgICAgLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAuZ2V0KGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKGFwcCwgaGVhcnRiZWF0T2JqZWN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQoaGVhcnRiZWF0T2JqZWN0LCBjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgICAgIGF3YWl0IHR4LmRvbmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNvbXB1dGVLZXkoYXBwKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwLm5hbWV9ISR7YXBwLm9wdGlvbnMuYXBwSWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBNQVhfSEVBREVSX0JZVEVTID0gMTAyNDtcclxuLy8gMzAgZGF5c1xyXG5jb25zdCBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBIZWFydGJlYXRTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbi1tZW1vcnkgY2FjaGUgZm9yIGhlYXJ0YmVhdHMsIHVzZWQgYnkgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHRvIGdlbmVyYXRlXHJcbiAgICAgICAgICogdGhlIGhlYWRlciBzdHJpbmcuXHJcbiAgICAgICAgICogU3RvcmVzIG9uZSByZWNvcmQgcGVyIGRhdGUuIFRoaXMgd2lsbCBiZSBjb25zb2xpZGF0ZWQgaW50byB0aGUgc3RhbmRhcmRcclxuICAgICAgICAgKiBmb3JtYXQgb2Ygb25lIHJlY29yZCBwZXIgdXNlciBhZ2VudCBzdHJpbmcgYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBoZWFkZXIuXHJcbiAgICAgICAgICogUG9wdWxhdGVkIGZyb20gaW5kZXhlZERCIHdoZW4gdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGFuZCBzaG91bGRcclxuICAgICAgICAgKiBiZSBrZXB0IGluIHN5bmMgd2l0aCBpbmRleGVkREIuXHJcbiAgICAgICAgICogTGVhdmUgcHVibGljIGZvciBlYXNpZXIgdGVzdGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB0aGlzLl9zdG9yYWdlID0gbmV3IEhlYXJ0YmVhdFN0b3JhZ2VJbXBsKGFwcCk7XHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZSA9IHRoaXMuX3N0b3JhZ2UucmVhZCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgdG8gcmVwb3J0IGEgaGVhcnRiZWF0LiBUaGUgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZVxyXG4gICAgICogYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgb2JqZWN0LCB1cGRhdGUgaGVhcnRiZWF0c0NhY2hlLCBhbmQgcGVyc2lzdCBpdFxyXG4gICAgICogdG8gSW5kZXhlZERCLlxyXG4gICAgICogTm90ZSB0aGF0IHdlIG9ubHkgc3RvcmUgb25lIGhlYXJ0YmVhdCBwZXIgZGF5LiBTbyBpZiBhIGhlYXJ0YmVhdCBmb3IgdG9kYXkgaXNcclxuICAgICAqIGFscmVhZHkgbG9nZ2VkLCBzdWJzZXF1ZW50IGNhbGxzIHRvIHRoaXMgZnVuY3Rpb24gaW4gdGhlIHNhbWUgZGF5IHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdHJpZ2dlckhlYXJ0YmVhdCgpIHtcclxuICAgICAgICBjb25zdCBwbGF0Zm9ybUxvZ2dlciA9IHRoaXMuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcigncGxhdGZvcm0tbG9nZ2VyJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIFwiRmlyZWJhc2UgdXNlciBhZ2VudFwiIHN0cmluZyBmcm9tIHRoZSBwbGF0Zm9ybSBsb2dnZXJcclxuICAgICAgICAvLyBzZXJ2aWNlLCBub3QgdGhlIGJyb3dzZXIgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBhZ2VudCA9IHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEbyBub3Qgc3RvcmUgYSBoZWFydGJlYXQgaWYgb25lIGlzIGFscmVhZHkgc3RvcmVkIGZvciB0aGlzIGRheVxyXG4gICAgICAgIC8vIG9yIGlmIGEgaGVhZGVyIGhhcyBhbHJlYWR5IGJlZW4gc2VudCB0b2RheS5cclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9PT0gZGF0ZSB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5zb21lKHNpbmdsZURhdGVIZWFydGJlYXQgPT4gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlID09PSBkYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBkYXRlLiBDcmVhdGUgb25lLlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5wdXNoKHsgZGF0ZSwgYWdlbnQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBlbnRyaWVzIG9sZGVyIHRoYW4gMzAgZGF5cy5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmZpbHRlcihzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGJUaW1lc3RhbXAgPSBuZXcgRGF0ZShzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpLnZhbHVlT2YoKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vdyAtIGhiVGltZXN0YW1wIDw9IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgd2hpY2ggY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBoZWFydGJlYXQtc3BlY2lmaWMgaGVhZGVyIGRpcmVjdGx5LlxyXG4gICAgICogSXQgYWxzbyBjbGVhcnMgYWxsIGhlYXJ0YmVhdHMgZnJvbSBtZW1vcnkgYXMgd2VsbCBhcyBpbiBJbmRleGVkREIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogQ29uc3VtaW5nIHByb2R1Y3QgU0RLcyBzaG91bGQgbm90IHNlbmQgdGhlIGhlYWRlciBpZiB0aGlzIG1ldGhvZFxyXG4gICAgICogcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIC8vIEV4dHJhY3QgYXMgbWFueSBoZWFydGJlYXRzIGZyb20gdGhlIGNhY2hlIGFzIHdpbGwgZml0IHVuZGVyIHRoZSBzaXplIGxpbWl0LlxyXG4gICAgICAgIGNvbnN0IHsgaGVhcnRiZWF0c1RvU2VuZCwgdW5zZW50RW50cmllcyB9ID0gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIodGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlclN0cmluZyA9IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c1RvU2VuZCB9KSk7XHJcbiAgICAgICAgLy8gU3RvcmUgbGFzdCBzZW50IGRhdGUgdG8gcHJldmVudCBhbm90aGVyIGJlaW5nIGxvZ2dlZC9zZW50IGZvciB0aGUgc2FtZSBkYXkuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgaWYgKHVuc2VudEVudHJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBTdG9yZSBhbnkgdW5zZW50IGVudHJpZXMgaWYgdGhleSBleGlzdC5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB1bnNlbnRFbnRyaWVzO1xyXG4gICAgICAgICAgICAvLyBUaGlzIHNlZW1zIG1vcmUgbGlrZWx5IHRoYW4gZW1wdHlpbmcgdGhlIGFycmF5IChiZWxvdykgdG8gbGVhZCB0byBzb21lIG9kZCBzdGF0ZVxyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgY2FjaGUgaXNuJ3QgZW1wdHkgYW5kIHRoaXMgd2lsbCBiZSBjYWxsZWQgYWdhaW4gb24gdGhlIG5leHQgcmVxdWVzdCxcclxuICAgICAgICAgICAgLy8gYW5kIGlzIHByb2JhYmx5IHNhZmVzdCBpZiB3ZSBhd2FpdCBpdC5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gW107XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCB3YWl0IGZvciB0aGlzLCB0byByZWR1Y2UgbGF0ZW5jeS5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVyU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFVUQ0RhdGVTdHJpbmcoKSB7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAvLyBSZXR1cm5zIGRhdGUgZm9ybWF0ICdZWVlZLU1NLUREJ1xyXG4gICAgcmV0dXJuIHRvZGF5LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcihoZWFydGJlYXRzQ2FjaGUsIG1heFNpemUgPSBNQVhfSEVBREVSX0JZVEVTKSB7XHJcbiAgICAvLyBIZWFydGJlYXRzIGdyb3VwZWQgYnkgdXNlciBhZ2VudCBpbiB0aGUgc3RhbmRhcmQgZm9ybWF0IHRvIGJlIHNlbnQgaW5cclxuICAgIC8vIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRzVG9TZW5kID0gW107XHJcbiAgICAvLyBTaW5nbGUgZGF0ZSBmb3JtYXQgaGVhcnRiZWF0cyB0aGF0IGFyZSBub3Qgc2VudC5cclxuICAgIGxldCB1bnNlbnRFbnRyaWVzID0gaGVhcnRiZWF0c0NhY2hlLnNsaWNlKCk7XHJcbiAgICBmb3IgKGNvbnN0IHNpbmdsZURhdGVIZWFydGJlYXQgb2YgaGVhcnRiZWF0c0NhY2hlKSB7XHJcbiAgICAgICAgLy8gTG9vayBmb3IgYW4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSB1c2VyIGFnZW50LlxyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdEVudHJ5ID0gaGVhcnRiZWF0c1RvU2VuZC5maW5kKGhiID0+IGhiLmFnZW50ID09PSBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50KTtcclxuICAgICAgICBpZiAoIWhlYXJ0YmVhdEVudHJ5KSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGVudHJ5IGZvciB0aGlzIHVzZXIgYWdlbnQgZXhpc3RzLCBjcmVhdGUgb25lLlxyXG4gICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW3NpbmdsZURhdGVIZWFydGJlYXQuZGF0ZV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgaGVhcnRiZWF0XHJcbiAgICAgICAgICAgICAgICAvLyBlbnRyeSBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucHVzaChzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBkYXRlXHJcbiAgICAgICAgICAgIC8vIGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUG9wIHVuc2VudCBlbnRyeSBmcm9tIHF1ZXVlLiAoU2tpcHBlZCBpZiBhZGRpbmcgdGhlIGVudHJ5IGV4Y2VlZGVkXHJcbiAgICAgICAgLy8gcXVvdGEgYW5kIHRoZSBsb29wIGJyZWFrcyBlYXJseS4pXHJcbiAgICAgICAgdW5zZW50RW50cmllcyA9IHVuc2VudEVudHJpZXMuc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQsXHJcbiAgICAgICAgdW5zZW50RW50cmllc1xyXG4gICAgfTtcclxufVxyXG5jbGFzcyBIZWFydGJlYXRTdG9yYWdlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlID0gdGhpcy5ydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCkge1xyXG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgYWxsIGhlYXJ0YmVhdHMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlYWQoKSB7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiSGVhcnRiZWF0T2JqZWN0ID0gYXdhaXQgcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkYkhlYXJ0YmVhdE9iamVjdCB8fCB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiOS4yMi4yXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cblxudmFyIGssZ29vZz1nb29nfHx7fSxsPWNvbW1vbmpzR2xvYmFsfHxzZWxmO2Z1bmN0aW9uIGFhKGEpe3ZhciBiPXR5cGVvZiBhO2I9XCJvYmplY3RcIiE9Yj9iOmE/QXJyYXkuaXNBcnJheShhKT9cImFycmF5XCI6YjpcIm51bGxcIjtyZXR1cm4gXCJhcnJheVwiPT1ifHxcIm9iamVjdFwiPT1iJiZcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGh9ZnVuY3Rpb24gcChhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gXCJvYmplY3RcIj09YiYmbnVsbCE9YXx8XCJmdW5jdGlvblwiPT1ifWZ1bmN0aW9uIGJhKGEpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxjYSkmJmFbY2FdfHwoYVtjYV09KytkYSl9dmFyIGNhPVwiY2xvc3VyZV91aWRfXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCksZGE9MDtmdW5jdGlvbiBlYShhLGIsYyl7cmV0dXJuIGEuY2FsbC5hcHBseShhLmJpbmQsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGZhKGEsYixjKXtpZighYSl0aHJvdyBFcnJvcigpO2lmKDI8YXJndW1lbnRzLmxlbmd0aCl7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoZSxkKTtyZXR1cm4gYS5hcHBseShiLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHEoYSxiLGMpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kJiYtMSE9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQudG9TdHJpbmcoKS5pbmRleE9mKFwibmF0aXZlIGNvZGVcIik/cT1lYTpxPWZhO3JldHVybiBxLmFwcGx5KG51bGwsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGhhKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fWZ1bmN0aW9uIHIoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuJD1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EuYWM9ZnVuY3Rpb24oZCxlLGYpe2Zvcih2YXIgaD1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLG49MjtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWhbbi0yXT1hcmd1bWVudHNbbl07cmV0dXJuIGIucHJvdG90eXBlW2VdLmFwcGx5KGQsaCl9O31mdW5jdGlvbiB2KCl7dGhpcy5zPXRoaXMuczt0aGlzLm89dGhpcy5vO312YXIgaWE9MDt2LnByb3RvdHlwZS5zPSExO3YucHJvdG90eXBlLnNhPWZ1bmN0aW9uKCl7aWYoIXRoaXMucyYmKHRoaXMucz0hMCx0aGlzLk4oKSwwIT1pYSkpe2JhKHRoaXMpO319O3YucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtpZih0aGlzLm8pZm9yKDt0aGlzLm8ubGVuZ3RoOyl0aGlzLm8uc2hpZnQoKSgpO307Y29uc3Qga2E9QXJyYXkucHJvdG90eXBlLmluZGV4T2Y/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChhLGIsdm9pZCAwKX06ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpcmV0dXJuIFwic3RyaW5nXCIhPT10eXBlb2YgYnx8MSE9Yi5sZW5ndGg/LTE6YS5pbmRleE9mKGIsMCk7Zm9yKGxldCBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYyBpbiBhJiZhW2NdPT09YilyZXR1cm4gYztyZXR1cm4gLTF9O2Z1bmN0aW9uIG1hKGEpe2NvbnN0IGI9YS5sZW5ndGg7aWYoMDxiKXtjb25zdCBjPUFycmF5KGIpO2ZvcihsZXQgZD0wO2Q8YjtkKyspY1tkXT1hW2RdO3JldHVybiBjfXJldHVybiBbXX1cbmZ1bmN0aW9uIG5hKGEsYil7Zm9yKGxldCBjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKyl7Y29uc3QgZD1hcmd1bWVudHNbY107aWYoYWEoZCkpe2NvbnN0IGU9YS5sZW5ndGh8fDAsZj1kLmxlbmd0aHx8MDthLmxlbmd0aD1lK2Y7Zm9yKGxldCBoPTA7aDxmO2grKylhW2UraF09ZFtoXTt9ZWxzZSBhLnB1c2goZCk7fX1mdW5jdGlvbiB3KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO313LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307dmFyIG9hPWZ1bmN0aW9uKCl7aWYoIWwuYWRkRXZlbnRMaXN0ZW5lcnx8IU9iamVjdC5kZWZpbmVQcm9wZXJ0eSlyZXR1cm4gITE7dmFyIGE9ITEsYj1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe2E9ITA7fX0pO3RyeXtsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsKCk9Pnt9LGIpLGwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RcIiwoKT0+e30sYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB4KGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX1mdW5jdGlvbiBwYSgpe3ZhciBhPWwubmF2aWdhdG9yO3JldHVybiBhJiYoYT1hLnVzZXJBZ2VudCk/YTpcIlwifWZ1bmN0aW9uIHkoYSl7cmV0dXJuIC0xIT1wYSgpLmluZGV4T2YoYSl9ZnVuY3Rpb24gcWEoYSl7cWFbXCIgXCJdKGEpO3JldHVybiBhfXFhW1wiIFwiXT1mdW5jdGlvbigpe307ZnVuY3Rpb24gcmEoYSxiKXt2YXIgYz1zYTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsYSk/Y1thXTpjW2FdPWIoYSl9dmFyIHRhPXkoXCJPcGVyYVwiKSx6PXkoXCJUcmlkZW50XCIpfHx5KFwiTVNJRVwiKSx1YT15KFwiRWRnZVwiKSx2YT11YXx8eix3YT15KFwiR2Vja29cIikmJiEoLTEhPXBhKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2Via2l0XCIpJiYheShcIkVkZ2VcIikpJiYhKHkoXCJUcmlkZW50XCIpfHx5KFwiTVNJRVwiKSkmJiF5KFwiRWRnZVwiKSx4YT0tMSE9cGEoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJ3ZWJraXRcIikmJiF5KFwiRWRnZVwiKTtmdW5jdGlvbiB5YSgpe3ZhciBhPWwuZG9jdW1lbnQ7cmV0dXJuIGE/YS5kb2N1bWVudE1vZGU6dm9pZCAwfXZhciB6YTtcbmE6e3ZhciBBYT1cIlwiLEJhPWZ1bmN0aW9uKCl7dmFyIGE9cGEoKTtpZih3YSlyZXR1cm4gL3J2OihbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKHVhKXJldHVybiAvRWRnZVxcLyhbXFxkXFwuXSspLy5leGVjKGEpO2lmKHopcmV0dXJuIC9cXGIoPzpNU0lFfHJ2KVs6IF0oW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZih4YSlyZXR1cm4gL1dlYktpdFxcLyhcXFMrKS8uZXhlYyhhKTtpZih0YSlyZXR1cm4gLyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhhKX0oKTtCYSYmKEFhPUJhP0JhWzFdOlwiXCIpO2lmKHope3ZhciBDYT15YSgpO2lmKG51bGwhPUNhJiZDYT5wYXJzZUZsb2F0KEFhKSl7emE9U3RyaW5nKENhKTticmVhayBhfX16YT1BYTt9dmFyIERhO2lmKGwuZG9jdW1lbnQmJnope3ZhciBFYT15YSgpO0RhPUVhP0VhOnBhcnNlSW50KHphLDEwKXx8dm9pZCAwO31lbHNlIERhPXZvaWQgMDt2YXIgRmE9RGE7ZnVuY3Rpb24gQShhLGIpe3cuY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZih3YSl7YTp7dHJ5e3FhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpHYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLiQuaC5jYWxsKHRoaXMpO319cihBLHcpO3ZhciBHYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS4kLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBIYT1cImNsb3N1cmVfbGlzdGVuYWJsZV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCk7dmFyIElhPTA7ZnVuY3Rpb24gSmEoYSxiLGMsZCxlKXt0aGlzLmxpc3RlbmVyPWE7dGhpcy5wcm94eT1udWxsO3RoaXMuc3JjPWI7dGhpcy50eXBlPWM7dGhpcy5jYXB0dXJlPSEhZDt0aGlzLmxhPWU7dGhpcy5rZXk9KytJYTt0aGlzLmZhPXRoaXMuaWE9ITE7fWZ1bmN0aW9uIEthKGEpe2EuZmE9ITA7YS5saXN0ZW5lcj1udWxsO2EucHJveHk9bnVsbDthLnNyYz1udWxsO2EubGE9bnVsbDt9ZnVuY3Rpb24gTmEoYSxiLGMpe2Zvcihjb25zdCBkIGluIGEpYi5jYWxsKGMsYVtkXSxkLGEpO31mdW5jdGlvbiBPYShhLGIpe2Zvcihjb25zdCBjIGluIGEpYi5jYWxsKHZvaWQgMCxhW2NdLGMsYSk7fWZ1bmN0aW9uIFBhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9Y29uc3QgUWE9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gUmEoYSxiKXtsZXQgYyxkO2ZvcihsZXQgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2ZvcihsZXQgZj0wO2Y8UWEubGVuZ3RoO2YrKyljPVFhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIFNhKGEpe3RoaXMuc3JjPWE7dGhpcy5nPXt9O3RoaXMuaD0wO31TYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS50b1N0cmluZygpO2E9dGhpcy5nW2ZdO2F8fChhPXRoaXMuZ1tmXT1bXSx0aGlzLmgrKyk7dmFyIGg9VGEoYSxiLGQsZSk7LTE8aD8oYj1hW2hdLGN8fChiLmlhPSExKSk6KGI9bmV3IEphKGIsdGhpcy5zcmMsZiwhIWQsZSksYi5pYT1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIFVhKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5nKXt2YXIgZD1hLmdbY10sZT1rYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKEthKGIpLDA9PWEuZ1tjXS5sZW5ndGgmJihkZWxldGUgYS5nW2NdLGEuaC0tKSk7fX1cbmZ1bmN0aW9uIFRhKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLmZhJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5sYT09ZClyZXR1cm4gZX1yZXR1cm4gLTF9dmFyIFZhPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksV2E9e307ZnVuY3Rpb24gWWEoYSxiLGMsZCxlKXtpZihkJiZkLm9uY2UpcmV0dXJuIFphKGEsYixjLGQsZSk7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspWWEoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPSRhKGMpO3JldHVybiBhJiZhW0hhXT9hLk8oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmFiKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBhYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1iYihhKTtufHwoYVtWYV09bj1uZXcgU2EoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9Y2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKW9hfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGRiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBjYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfWNvbnN0IGI9ZWI7cmV0dXJuIGF9ZnVuY3Rpb24gWmEoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylaYShhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9JGEoYyk7cmV0dXJuIGEmJmFbSGFdP2EuUChiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6YWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylmYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz0kYShjKSxhJiZhW0hhXSk/KGE9YS5pLGI9U3RyaW5nKGIpLnRvU3RyaW5nKCksYiBpbiBhLmcmJihmPWEuZ1tiXSxjPVRhKGYsYyxkLGUpLC0xPGMmJihLYShmW2NdKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZixjLDEpLDA9PWYubGVuZ3RoJiYoZGVsZXRlIGEuZ1tiXSxhLmgtLSkpKSk6YSYmKGE9YmIoYSkpJiYoYj1hLmdbYi50b1N0cmluZygpXSxhPS0xLGImJihhPVRhKGIsYyxkLGUpKSwoYz0tMTxhP2JbYV06bnVsbCkmJmdiKGMpKTt9XG5mdW5jdGlvbiBnYihhKXtpZihcIm51bWJlclwiIT09dHlwZW9mIGEmJmEmJiFhLmZhKXt2YXIgYj1hLnNyYztpZihiJiZiW0hhXSlVYShiLmksYSk7ZWxzZSB7dmFyIGM9YS50eXBlLGQ9YS5wcm94eTtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCxhLmNhcHR1cmUpOmIuZGV0YWNoRXZlbnQ/Yi5kZXRhY2hFdmVudChkYihjKSxkKTpiLmFkZExpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyKGQpOyhjPWJiKGIpKT8oVWEoYyxhKSwwPT1jLmgmJihjLnNyYz1udWxsLGJbVmFdPW51bGwpKTpLYShhKTt9fX1mdW5jdGlvbiBkYihhKXtyZXR1cm4gYSBpbiBXYT9XYVthXTpXYVthXT1cIm9uXCIrYX1mdW5jdGlvbiBlYihhLGIpe2lmKGEuZmEpYT0hMDtlbHNlIHtiPW5ldyBBKGIsdGhpcyk7dmFyIGM9YS5saXN0ZW5lcixkPWEubGF8fGEuc3JjO2EuaWEmJmdiKGEpO2E9Yy5jYWxsKGQsYik7fXJldHVybiBhfVxuZnVuY3Rpb24gYmIoYSl7YT1hW1ZhXTtyZXR1cm4gYSBpbnN0YW5jZW9mIFNhP2E6bnVsbH12YXIgaGI9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApO2Z1bmN0aW9uICRhKGEpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXJldHVybiBhO2FbaGJdfHwoYVtoYl09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVtoYl19ZnVuY3Rpb24gQigpe3YuY2FsbCh0aGlzKTt0aGlzLmk9bmV3IFNhKHRoaXMpO3RoaXMuUz10aGlzO3RoaXMuSj1udWxsO31yKEIsdik7Qi5wcm90b3R5cGVbSGFdPSEwO0IucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7ZmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gQyhhLGIpe3ZhciBjLGQ9YS5KO2lmKGQpZm9yKGM9W107ZDtkPWQuSiljLnB1c2goZCk7YT1hLlM7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHcoYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB3KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgdyhkLGEpO1JhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1pYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1pYihoLGQsITAsYikmJmU7ZT1pYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1pYihoLGQsITEsYikmJmU7fVxuQi5wcm90b3R5cGUuTj1mdW5jdGlvbigpe0IuJC5OLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKUthKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLko9bnVsbDt9O0IucHJvdG90eXBlLk89ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qi5wcm90b3R5cGUuUD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIGliKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguZmEmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix0PWgubGF8fGguc3JjO2guaWEmJlVhKGEuaSxoKTtlPSExIT09bi5jYWxsKHQsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgamI9bC5KU09OLnN0cmluZ2lmeTtjbGFzcyBrYntjb25zdHJ1Y3RvcihhLGIpe3RoaXMuaT1hO3RoaXMuaj1iO3RoaXMuaD0wO3RoaXMuZz1udWxsO31nZXQoKXtsZXQgYTswPHRoaXMuaD8odGhpcy5oLS0sYT10aGlzLmcsdGhpcy5nPWEubmV4dCxhLm5leHQ9bnVsbCk6YT10aGlzLmkoKTtyZXR1cm4gYX19ZnVuY3Rpb24gbGIoKXt2YXIgYT1tYjtsZXQgYj1udWxsO2EuZyYmKGI9YS5nLGEuZz1hLmcubmV4dCxhLmd8fChhLmg9bnVsbCksYi5uZXh0PW51bGwpO3JldHVybiBifWNsYXNzIG5ie2NvbnN0cnVjdG9yKCl7dGhpcy5oPXRoaXMuZz1udWxsO31hZGQoYSxiKXtjb25zdCBjPW9iLmdldCgpO2Muc2V0KGEsYik7dGhpcy5oP3RoaXMuaC5uZXh0PWM6dGhpcy5nPWM7dGhpcy5oPWM7fX12YXIgb2I9bmV3IGtiKCgpPT5uZXcgcGIsYT0+YS5yZXNldCgpKTtjbGFzcyBwYntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiBxYihhKXt2YXIgYj0xO2E9YS5zcGxpdChcIjpcIik7Y29uc3QgYz1bXTtmb3IoOzA8YiYmYS5sZW5ndGg7KWMucHVzaChhLnNoaWZ0KCkpLGItLTthLmxlbmd0aCYmYy5wdXNoKGEuam9pbihcIjpcIikpO3JldHVybiBjfWZ1bmN0aW9uIHJiKGEpe2wuc2V0VGltZW91dCgoKT0+e3Rocm93IGE7fSwwKTt9bGV0IHNiLHRiPSExLG1iPW5ldyBuYix2Yj0oKT0+e2NvbnN0IGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtzYj0oKT0+e2EudGhlbih1Yik7fTt9O3ZhciB1Yj0oKT0+e2Zvcih2YXIgYTthPWxiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7cmIoYyk7fXZhciBiPW9iO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fXRiPSExO307ZnVuY3Rpb24gd2IoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5oPWF8fDE7dGhpcy5nPWJ8fGw7dGhpcy5qPXEodGhpcy5xYix0aGlzKTt0aGlzLmw9RGF0ZS5ub3coKTt9cih3YixCKTtrPXdiLnByb3RvdHlwZTtrLmdhPSExO2suVD1udWxsO2sucWI9ZnVuY3Rpb24oKXtpZih0aGlzLmdhKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMubDswPGEmJmE8LjgqdGhpcy5oP3RoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oLWEpOih0aGlzLlQmJih0aGlzLmcuY2xlYXJUaW1lb3V0KHRoaXMuVCksdGhpcy5UPW51bGwpLEModGhpcyxcInRpY2tcIiksdGhpcy5nYSYmKHhiKHRoaXMpLHRoaXMuc3RhcnQoKSkpO319O2suc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmdhPSEwO3RoaXMuVHx8KHRoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oKSx0aGlzLmw9RGF0ZS5ub3coKSk7fTtcbmZ1bmN0aW9uIHhiKGEpe2EuZ2E9ITE7YS5UJiYoYS5nLmNsZWFyVGltZW91dChhLlQpLGEuVD1udWxsKTt9ay5OPWZ1bmN0aW9uKCl7d2IuJC5OLmNhbGwodGhpcyk7eGIodGhpcyk7ZGVsZXRlIHRoaXMuZzt9O2Z1bmN0aW9uIHliKGEsYixjKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSljJiYoYT1xKGEsYykpO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5oYW5kbGVFdmVudClhPXEoYS5oYW5kbGVFdmVudCxhKTtlbHNlIHRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTtyZXR1cm4gMjE0NzQ4MzY0NzxOdW1iZXIoYik/LTE6bC5zZXRUaW1lb3V0KGEsYnx8MCl9ZnVuY3Rpb24gemIoYSl7YS5nPXliKCgpPT57YS5nPW51bGw7YS5pJiYoYS5pPSExLHpiKGEpKTt9LGEuaik7Y29uc3QgYj1hLmg7YS5oPW51bGw7YS5tLmFwcGx5KG51bGwsYik7fWNsYXNzIEFiIGV4dGVuZHMgdntjb25zdHJ1Y3RvcihhLGIpe3N1cGVyKCk7dGhpcy5tPWE7dGhpcy5qPWI7dGhpcy5oPW51bGw7dGhpcy5pPSExO3RoaXMuZz1udWxsO31sKGEpe3RoaXMuaD1hcmd1bWVudHM7dGhpcy5nP3RoaXMuaT0hMDp6Yih0aGlzKTt9Tigpe3N1cGVyLk4oKTt0aGlzLmcmJihsLmNsZWFyVGltZW91dCh0aGlzLmcpLHRoaXMuZz1udWxsLHRoaXMuaT0hMSx0aGlzLmg9bnVsbCk7fX1mdW5jdGlvbiBCYihhKXt2LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O31yKEJiLHYpO3ZhciBDYj1bXTtmdW5jdGlvbiBEYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKENiWzBdPWMudG9TdHJpbmcoKSksYz1DYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPVlhKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gRmIoYSl7TmEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZnYihiKTt9LGEpO2EuZz17fTt9QmIucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtCYi4kLk4uY2FsbCh0aGlzKTtGYih0aGlzKTt9O0JiLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIEdiKCl7dGhpcy5nPSEwO31HYi5wcm90b3R5cGUuRWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBIYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHQ9MDt0PG4ubGVuZ3RoO3QrKyl7dmFyIG09blt0XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHU9bVswXTttPW1bMV07dmFyIEw9dS5zcGxpdChcIl9cIik7aD0yPD1MLmxlbmd0aCYmXCJ0eXBlXCI9PUxbMV0/aCsodStcIj1cIittK1wiJlwiKTpoKyh1K1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIEliKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBEKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK0piKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBLYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9R2IucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gSmIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIGpiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgRT17fSxMYj1udWxsO2Z1bmN0aW9uIE1iKCl7cmV0dXJuIExiPUxifHxuZXcgQn1FLlRhPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gTmIoYSl7dy5jYWxsKHRoaXMsRS5UYSxhKTt9cihOYix3KTtmdW5jdGlvbiBPYihhKXtjb25zdCBiPU1iKCk7QyhiLG5ldyBOYihiKSk7fUUuU1RBVF9FVkVOVD1cInN0YXRldmVudFwiO2Z1bmN0aW9uIFBiKGEsYil7dy5jYWxsKHRoaXMsRS5TVEFUX0VWRU5ULGEpO3RoaXMuc3RhdD1iO31yKFBiLHcpO2Z1bmN0aW9uIEYoYSl7Y29uc3QgYj1NYigpO0MoYixuZXcgUGIoYixhKSk7fUUuVWE9XCJ0aW1pbmdldmVudFwiO2Z1bmN0aW9uIFFiKGEsYil7dy5jYWxsKHRoaXMsRS5VYSxhKTt0aGlzLnNpemU9Yjt9cihRYix3KTtcbmZ1bmN0aW9uIFJiKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBTYj17Tk9fRVJST1I6MCxyYjoxLEViOjIsRGI6Myx5Yjo0LENiOjUsRmI6NixRYTo3LFRJTUVPVVQ6OCxJYjo5fTt2YXIgVGI9e3diOlwiY29tcGxldGVcIixTYjpcInN1Y2Nlc3NcIixSYTpcImVycm9yXCIsUWE6XCJhYm9ydFwiLEtiOlwicmVhZHlcIixMYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEdiOlwiaW5jcmVtZW50YWxkYXRhXCIsSmI6XCJwcm9ncmVzc1wiLHpiOlwiZG93bmxvYWRwcm9ncmVzc1wiLCRiOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gVWIoKXt9VWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBWYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiBXYigpe312YXIgWGI9e09QRU46XCJhXCIsdmI6XCJiXCIsUmE6XCJjXCIsSGI6XCJkXCJ9O2Z1bmN0aW9uIFliKCl7dy5jYWxsKHRoaXMsXCJkXCIpO31yKFliLHcpO2Z1bmN0aW9uIFpiKCl7dy5jYWxsKHRoaXMsXCJjXCIpO31yKFpiLHcpO3ZhciAkYjtmdW5jdGlvbiBhYygpe31yKGFjLFViKTthYy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9O2FjLnByb3RvdHlwZS5pPWZ1bmN0aW9uKCl7cmV0dXJuIHt9fTskYj1uZXcgYWM7ZnVuY3Rpb24gYmMoYSxiLGMsZCl7dGhpcy5sPWE7dGhpcy5qPWI7dGhpcy5tPWM7dGhpcy5XPWR8fDE7dGhpcy5VPW5ldyBCYih0aGlzKTt0aGlzLlA9Y2M7YT12YT8xMjU6dm9pZCAwO3RoaXMuVj1uZXcgd2IoYSk7dGhpcy5JPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuTD10aGlzLkc9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRj1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5jYT0tMTt0aGlzLko9ITE7dGhpcy5PPTA7dGhpcy5NPW51bGw7dGhpcy5iYT10aGlzLks9dGhpcy5hYT10aGlzLlM9ITE7dGhpcy5oPW5ldyBkYzt9ZnVuY3Rpb24gZGMoKXt0aGlzLmk9bnVsbDt0aGlzLmc9XCJcIjt0aGlzLmg9ITE7fXZhciBjYz00NUUzLGVjPXt9LGZjPXt9O2s9YmMucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gZ2MoYSxiLGMpe2EuTD0xO2Eudj1oYyhHKGIpKTthLnM9YzthLlM9ITA7aWMoYSxudWxsKTt9ZnVuY3Rpb24gaWMoYSxiKXthLkc9RGF0ZS5ub3coKTtqYyhhKTthLkE9RyhhLnYpO3ZhciBjPWEuQSxkPWEuVztBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7a2MoYy5pLFwidFwiLGQpO2EuQz0wO2M9YS5sLko7YS5oPW5ldyBkYzthLmc9bGMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5NPW5ldyBBYihxKGEuUGEsYSxhLmcpLGEuTykpO0RiKGEuVSxhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5uYik7Yj1hLkk/UGEoYS5JKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5oYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5oYShhLkEsYS51LG51bGwsYikpO09iKCk7SGIoYS5qLGEudSxhLkEsYS5tLGEuVyxhLnMpO31cbmsubmI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTTtiJiYzPT1IKGEpP2IubCgpOnRoaXMuUGEoYSk7fTtcbmsuUGE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCB1PUgodGhpcy5nKTt2YXIgYj10aGlzLmcuSWEoKTtjb25zdCBMPXRoaXMuZy5kYSgpO2lmKCEoMz51KSYmKDMhPXV8fHZhfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmphKCl8fG1jKHRoaXMuZykpKSl7dGhpcy5KfHw0IT11fHw3PT1ifHwoOD09Ynx8MD49TD9PYigzKTpPYigyKSk7bmModGhpcyk7dmFyIGM9dGhpcy5nLmRhKCk7dGhpcy5jYT1jO2I6aWYob2ModGhpcykpe3ZhciBkPW1jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09SCh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7SSh0aGlzKTtwYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmphKCk7dGhpcy5pPTIwMD09YztJYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5XLHUsYyk7aWYodGhpcy5pKXtpZih0aGlzLmFhJiYhdGhpcy5LKXtiOntpZih0aGlzLmcpe3ZhciBuLHQ9dGhpcy5nO2lmKChuPXQuZz90LmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKTpudWxsKSYmIXgobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRCh0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5LPSEwLHFjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0YoMTIpO0kodGhpcyk7cGModGhpcyk7YnJlYWsgYX19dGhpcy5TPyhyYyh0aGlzLHUsaCksdmEmJnRoaXMuaSYmMz09dSYmKERiKHRoaXMuVSx0aGlzLlYsXCJ0aWNrXCIsdGhpcy5tYiksXG50aGlzLlYuc3RhcnQoKSkpOihEKHRoaXMuaix0aGlzLm0saCxudWxsKSxxYyh0aGlzLGgpKTs0PT11JiZJKHRoaXMpO3RoaXMuaSYmIXRoaXMuSiYmKDQ9PXU/c2ModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsamModGhpcykpKTt9ZWxzZSB0Yyh0aGlzLmcpLDQwMD09YyYmMDxoLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5vPTMsRigxMikpOih0aGlzLm89MCxGKDEzKSksSSh0aGlzKSxwYyh0aGlzKTt9fX1jYXRjaCh1KXt9ZmluYWxseXt9fTtmdW5jdGlvbiBvYyhhKXtyZXR1cm4gYS5nP1wiR0VUXCI9PWEudSYmMiE9YS5MJiZhLmwuSGE6ITF9XG5mdW5jdGlvbiByYyhhLGIsYyl7bGV0IGQ9ITAsZTtmb3IoOyFhLkomJmEuQzxjLmxlbmd0aDspaWYoZT11YyhhLGMpLGU9PWZjKXs0PT1iJiYoYS5vPTQsRigxNCksZD0hMSk7RChhLmosYS5tLG51bGwsXCJbSW5jb21wbGV0ZSBSZXNwb25zZV1cIik7YnJlYWt9ZWxzZSBpZihlPT1lYyl7YS5vPTQ7RigxNSk7RChhLmosYS5tLGMsXCJbSW52YWxpZCBDaHVua11cIik7ZD0hMTticmVha31lbHNlIEQoYS5qLGEubSxlLG51bGwpLHFjKGEsZSk7b2MoYSkmJmUhPWZjJiZlIT1lYyYmKGEuaC5nPVwiXCIsYS5DPTApOzQhPWJ8fDAhPWMubGVuZ3RofHxhLmguaHx8KGEubz0xLEYoMTYpLGQ9ITEpO2EuaT1hLmkmJmQ7ZD8wPGMubGVuZ3RoJiYhYS5iYSYmKGEuYmE9ITAsYj1hLmwsYi5nPT1hJiZiLmNhJiYhYi5NJiYoYi5sLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHZjKGIpLGIuTT0hMCxGKDExKSkpOihEKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksSShhKSxwYyhhKSk7fWsubWI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPUgodGhpcy5nKSxiPXRoaXMuZy5qYSgpO3RoaXMuQzxiLmxlbmd0aCYmKG5jKHRoaXMpLHJjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmpjKHRoaXMpKTt9fTtmdW5jdGlvbiB1YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBmYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZWM7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGZjO2I9Yi5zbGljZShkLGQrYyk7YS5DPWQrYztyZXR1cm4gYn1rLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuSj0hMDtJKHRoaXMpO307ZnVuY3Rpb24gamMoYSl7YS5ZPURhdGUubm93KCkrYS5QO3djKGEsYS5QKTt9XG5mdW5jdGlvbiB3YyhhLGIpe2lmKG51bGwhPWEuQil0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO2EuQj1SYihxKGEubGIsYSksYik7fWZ1bmN0aW9uIG5jKGEpe2EuQiYmKGwuY2xlYXJUaW1lb3V0KGEuQiksYS5CPW51bGwpO31rLmxiPWZ1bmN0aW9uKCl7dGhpcy5CPW51bGw7Y29uc3QgYT1EYXRlLm5vdygpOzA8PWEtdGhpcy5ZPyhLYih0aGlzLmosdGhpcy5BKSwyIT10aGlzLkwmJihPYigpLEYoMTcpKSxJKHRoaXMpLHRoaXMubz0yLHBjKHRoaXMpKTp3Yyh0aGlzLHRoaXMuWS1hKTt9O2Z1bmN0aW9uIHBjKGEpezA9PWEubC5IfHxhLkp8fHNjKGEubCxhKTt9ZnVuY3Rpb24gSShhKXtuYyhhKTt2YXIgYj1hLk07YiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYi5zYSYmYi5zYSgpO2EuTT1udWxsO3hiKGEuVik7RmIoYS5VKTthLmcmJihiPWEuZyxhLmc9bnVsbCxiLmFib3J0KCksYi5zYSgpKTt9XG5mdW5jdGlvbiBxYyhhLGIpe3RyeXt2YXIgYz1hLmw7aWYoMCE9Yy5IJiYoYy5nPT1hfHx4YyhjLmksYSkpKWlmKCFhLksmJnhjKGMuaSxhKSYmMz09Yy5IKXt0cnl7dmFyIGQ9Yy5KYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5HKzNFMzxhLkcpeWMoYyksemMoYyk7ZWxzZSBicmVhayBhO0FjKGMpO0YoMTgpO319ZWxzZSBjLkZhPWVbMV0sMDxjLkZhLWMuViYmMzc1MDA+ZVsyXSYmYy5HJiYwPT1jLkEmJiFjLnYmJihjLnY9UmIocShjLmliLGMpLDZFMykpO2lmKDE+PUJjKGMuaSkmJmMub2Epe3RyeXtjLm9hKCk7fWNhdGNoKG0pe31jLm9hPXZvaWQgMDt9fWVsc2UgSihjLDExKTt9ZWxzZSBpZigoYS5LfHxjLmc9PWEpJiZ5YyhjKSwheChiKSlmb3IoZT1jLkphLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO2MuVj1cbm1bMF07bT1tWzFdO2lmKDI9PWMuSClpZihcImNcIj09bVswXSl7Yy5LPW1bMV07Yy5wYT1tWzJdO2NvbnN0IHU9bVszXTtudWxsIT11JiYoYy5yYT11LGMubC5pbmZvKFwiVkVSPVwiK2MucmEpKTtjb25zdCBMPW1bNF07bnVsbCE9TCYmKGMuR2E9TCxjLmwuaW5mbyhcIlNWRVI9XCIrYy5HYSkpO2NvbnN0IExhPW1bNV07bnVsbCE9TGEmJlwibnVtYmVyXCI9PT10eXBlb2YgTGEmJjA8TGEmJihkPTEuNSpMYSxjLkw9ZCxjLmwuaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBsYT1hLmc7aWYobGEpe2NvbnN0IE1hPWxhLmc/bGEuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihNYSl7dmFyIGY9ZC5pO2YuZ3x8LTE9PU1hLmluZGV4T2YoXCJzcGR5XCIpJiYtMT09TWEuaW5kZXhPZihcInF1aWNcIikmJi0xPT1NYS5pbmRleE9mKFwiaDJcIil8fChmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKENjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkYpe2NvbnN0IEViPVxubGEuZz9sYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDtFYiYmKGQuRGE9RWIsSyhkLkksZC5GLEViKSk7fX1jLkg9MztjLmgmJmMuaC5CYSgpO2MuY2EmJihjLlM9RGF0ZS5ub3coKS1hLkcsYy5sLmluZm8oXCJIYW5kc2hha2UgUlRUOiBcIitjLlMrXCJtc1wiKSk7ZD1jO3ZhciBoPWE7ZC53YT1EYyhkLGQuSj9kLnBhOm51bGwsZC5ZKTtpZihoLkspe0VjKGQuaSxoKTt2YXIgbj1oLHQ9ZC5MO3QmJm4uc2V0VGltZW91dCh0KTtuLkImJihuYyhuKSxqYyhuKSk7ZC5nPWg7fWVsc2UgRmMoZCk7MDxjLmoubGVuZ3RoJiZHYyhjKTt9ZWxzZSBcInN0b3BcIiE9bVswXSYmXCJjbG9zZVwiIT1tWzBdfHxKKGMsNyk7ZWxzZSAzPT1jLkgmJihcInN0b3BcIj09bVswXXx8XCJjbG9zZVwiPT1tWzBdP1wic3RvcFwiPT1tWzBdP0ooYyw3KTpIYyhjKTpcIm5vb3BcIiE9bVswXSYmYy5oJiZjLmguQWEobSksYy5BPTApO31PYig0KTt9Y2F0Y2gobSl7fX1mdW5jdGlvbiBJYyhhKXtpZihhLlomJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuWilyZXR1cm4gYS5aKCk7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBNYXAmJmEgaW5zdGFuY2VvZiBNYXB8fFwidW5kZWZpbmVkXCIhPT10eXBlb2YgU2V0JiZhIGluc3RhbmNlb2YgU2V0KXJldHVybiBBcnJheS5mcm9tKGEudmFsdWVzKCkpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihhYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBKYyhhKXtpZihhLnRhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLnRhKXJldHVybiBhLnRhKCk7aWYoIWEuWnx8XCJmdW5jdGlvblwiIT10eXBlb2YgYS5aKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIE1hcCYmYSBpbnN0YW5jZW9mIE1hcClyZXR1cm4gQXJyYXkuZnJvbShhLmtleXMoKSk7aWYoIShcInVuZGVmaW5lZFwiIT09dHlwZW9mIFNldCYmYSBpbnN0YW5jZW9mIFNldCkpe2lmKGFhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBiPVtdO2E9YS5sZW5ndGg7Zm9yKHZhciBjPTA7YzxhO2MrKyliLnB1c2goYyk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGNvbnN0IGQgaW4gYSliW2MrK109ZDtyZXR1cm4gYn19fVxuZnVuY3Rpb24gS2MoYSxiKXtpZihhLmZvckVhY2gmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZm9yRWFjaClhLmZvckVhY2goYix2b2lkIDApO2Vsc2UgaWYoYWEoYSl8fFwic3RyaW5nXCI9PT10eXBlb2YgYSlBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsYix2b2lkIDApO2Vsc2UgZm9yKHZhciBjPUpjKGEpLGQ9SWMoYSksZT1kLmxlbmd0aCxmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9dmFyIExjPVJlZ0V4cChcIl4oPzooW146Lz8jLl0rKTopPyg/Oi8vKD86KFteXFxcXFxcXFwvPyNdKilAKT8oW15cXFxcXFxcXC8/I10qPykoPzo6KFswLTldKykpPyg/PVtcXFxcXFxcXC8/I118JCkpPyhbXj8jXSspPyg/OlxcXFw/KFteI10qKSk/KD86IyhbXFxcXHNcXFxcU10qKSk/JFwiKTtmdW5jdGlvbiBNYyhhLGIpe2lmKGEpe2E9YS5zcGxpdChcIiZcIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uaW5kZXhPZihcIj1cIiksZT1udWxsO2lmKDA8PWQpe3ZhciBmPWFbY10uc3Vic3RyaW5nKDAsZCk7ZT1hW2NdLnN1YnN0cmluZyhkKzEpO31lbHNlIGY9YVtjXTtiKGYsZT9kZWNvZGVVUklDb21wb25lbnQoZS5yZXBsYWNlKC9cXCsvZyxcIiBcIikpOlwiXCIpO319fWZ1bmN0aW9uIE0oYSl7dGhpcy5nPXRoaXMucz10aGlzLmo9XCJcIjt0aGlzLm09bnVsbDt0aGlzLm89dGhpcy5sPVwiXCI7dGhpcy5oPSExO2lmKGEgaW5zdGFuY2VvZiBNKXt0aGlzLmg9YS5oO05jKHRoaXMsYS5qKTt0aGlzLnM9YS5zO3RoaXMuZz1hLmc7T2ModGhpcyxhLm0pO3RoaXMubD1hLmw7dmFyIGI9YS5pO3ZhciBjPW5ldyBQYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgTWFwKGIuZyksYy5oPWIuaCk7UWModGhpcyxjKTt0aGlzLm89YS5vO31lbHNlIGEmJihiPVN0cmluZyhhKS5tYXRjaChMYykpPyh0aGlzLmg9ITEsTmModGhpcyxiWzFdfHxcIlwiLCEwKSx0aGlzLnM9UmMoYlsyXXx8XCJcIiksdGhpcy5nPVJjKGJbM118fFwiXCIsITApLE9jKHRoaXMsYls0XSksdGhpcy5sPVJjKGJbNV18fFwiXCIsITApLFFjKHRoaXMsYls2XXx8XCJcIiwhMCksdGhpcy5vPVJjKGJbN118fFwiXCIpKToodGhpcy5oPSExLHRoaXMuaT1uZXcgUGMobnVsbCx0aGlzLmgpKTt9XG5NLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5qO2ImJmEucHVzaChTYyhiLFRjLCEwKSxcIjpcIik7dmFyIGM9dGhpcy5nO2lmKGN8fFwiZmlsZVwiPT1iKWEucHVzaChcIi8vXCIpLChiPXRoaXMucykmJmEucHVzaChTYyhiLFRjLCEwKSxcIkBcIiksYS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLm0sbnVsbCE9YyYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmwpdGhpcy5nJiZcIi9cIiE9Yy5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKFNjKGMsXCIvXCI9PWMuY2hhckF0KDApP1VjOlZjLCEwKSk7KGM9dGhpcy5pLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5vKSYmYS5wdXNoKFwiI1wiLFNjKGMsV2MpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtmdW5jdGlvbiBHKGEpe3JldHVybiBuZXcgTShhKX1cbmZ1bmN0aW9uIE5jKGEsYixjKXthLmo9Yz9SYyhiLCEwKTpiO2EuaiYmKGEuaj1hLmoucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gT2MoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2EubT1iO31lbHNlIGEubT1udWxsO31mdW5jdGlvbiBRYyhhLGIsYyl7YiBpbnN0YW5jZW9mIFBjPyhhLmk9YixYYyhhLmksYS5oKSk6KGN8fChiPVNjKGIsWWMpKSxhLmk9bmV3IFBjKGIsYS5oKSk7fWZ1bmN0aW9uIEsoYSxiLGMpe2EuaS5zZXQoYixjKTt9ZnVuY3Rpb24gaGMoYSl7SyhhLFwienhcIixNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV5EYXRlLm5vdygpKS50b1N0cmluZygzNikpO3JldHVybiBhfVxuZnVuY3Rpb24gUmMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFNjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsWmMpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIFpjKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9dmFyIFRjPS9bI1xcL1xcP0BdL2csVmM9L1sjXFw/Ol0vZyxVYz0vWyNcXD9dL2csWWM9L1sjXFw/QF0vZyxXYz0vIy9nO2Z1bmN0aW9uIFBjKGEsYil7dGhpcy5oPXRoaXMuZz1udWxsO3RoaXMuaT1hfHxudWxsO3RoaXMuaj0hIWI7fVxuZnVuY3Rpb24gTihhKXthLmd8fChhLmc9bmV3IE1hcCxhLmg9MCxhLmkmJk1jKGEuaSxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31rPVBjLnByb3RvdHlwZTtrLmFkZD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7dmFyIGM9dGhpcy5nLmdldChhKTtjfHx0aGlzLmcuc2V0KGEsYz1bXSk7Yy5wdXNoKGIpO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gJGMoYSxiKXtOKGEpO2I9TyhhLGIpO2EuZy5oYXMoYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGEuZy5kZWxldGUoYikpO31mdW5jdGlvbiBhZChhLGIpe04oYSk7Yj1PKGEsYik7cmV0dXJuIGEuZy5oYXMoYil9XG5rLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtOKHRoaXMpO3RoaXMuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EuY2FsbChiLGUsZCx0aGlzKTt9LHRoaXMpO30sdGhpcyk7fTtrLnRhPWZ1bmN0aW9uKCl7Tih0aGlzKTtjb25zdCBhPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKSxiPUFycmF5LmZyb20odGhpcy5nLmtleXMoKSksYz1bXTtmb3IobGV0IGQ9MDtkPGIubGVuZ3RoO2QrKyl7Y29uc3QgZT1hW2RdO2ZvcihsZXQgZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTt9cmV0dXJuIGN9O2suWj1mdW5jdGlvbihhKXtOKHRoaXMpO2xldCBiPVtdO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlhZCh0aGlzLGEpJiYoYj1iLmNvbmNhdCh0aGlzLmcuZ2V0KE8odGhpcyxhKSkpKTtlbHNlIHthPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKyliPWIuY29uY2F0KGFbY10pO31yZXR1cm4gYn07XG5rLnNldD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7YWQodGhpcyxhKSYmKHRoaXMuaC09dGhpcy5nLmdldChhKS5sZW5ndGgpO3RoaXMuZy5zZXQoYSxbYl0pO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ay5nZXQ9ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gYjthPXRoaXMuWihhKTtyZXR1cm4gMDxhLmxlbmd0aD9TdHJpbmcoYVswXSk6Yn07ZnVuY3Rpb24ga2MoYSxiLGMpeyRjKGEsYik7MDxjLmxlbmd0aCYmKGEuaT1udWxsLGEuZy5zZXQoTyhhLGIpLG1hKGMpKSxhLmgrPWMubGVuZ3RoKTt9XG5rLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5pKXJldHVybiB0aGlzLmk7aWYoIXRoaXMuZylyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9QXJyYXkuZnJvbSh0aGlzLmcua2V5cygpKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtjb25zdCBmPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZCkpLGg9dGhpcy5aKGQpO2ZvcihkPTA7ZDxoLmxlbmd0aDtkKyspe3ZhciBlPWY7XCJcIiE9PWhbZF0mJihlKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGhbZF0pKSk7YS5wdXNoKGUpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBPKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifVxuZnVuY3Rpb24gWGMoYSxiKXtiJiYhYS5qJiYoTihhKSxhLmk9bnVsbCxhLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe3ZhciBlPWQudG9Mb3dlckNhc2UoKTtkIT1lJiYoJGModGhpcyxkKSxrYyh0aGlzLGUsYykpO30sYSkpO2Euaj1iO312YXIgYmQ9Y2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmc9YTt0aGlzLm1hcD1iO319O2Z1bmN0aW9uIGNkKGEpe3RoaXMubD1hfHxkZDtsLlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZz8oYT1sLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpLGE9MDxhLmxlbmd0aCYmKFwiaHFcIj09YVswXS5uZXh0SG9wUHJvdG9jb2x8fFwiaDJcIj09YVswXS5uZXh0SG9wUHJvdG9jb2wpKTphPSEhKGwuZyYmbC5nLkthJiZsLmcuS2EoKSYmbC5nLkthKCkuZWMpO3RoaXMuaj1hP3RoaXMubDoxO3RoaXMuZz1udWxsOzE8dGhpcy5qJiYodGhpcy5nPW5ldyBTZXQpO3RoaXMuaD1udWxsO3RoaXMuaT1bXTt9dmFyIGRkPTEwO2Z1bmN0aW9uIGVkKGEpe3JldHVybiBhLmg/ITA6YS5nP2EuZy5zaXplPj1hLmo6ITF9ZnVuY3Rpb24gQmMoYSl7cmV0dXJuIGEuaD8xOmEuZz9hLmcuc2l6ZTowfWZ1bmN0aW9uIHhjKGEsYil7cmV0dXJuIGEuaD9hLmg9PWI6YS5nP2EuZy5oYXMoYik6ITF9ZnVuY3Rpb24gQ2MoYSxiKXthLmc/YS5nLmFkZChiKTphLmg9Yjt9XG5mdW5jdGlvbiBFYyhhLGIpe2EuaCYmYS5oPT1iP2EuaD1udWxsOmEuZyYmYS5nLmhhcyhiKSYmYS5nLmRlbGV0ZShiKTt9Y2QucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuaT1mZCh0aGlzKTtpZih0aGlzLmgpdGhpcy5oLmNhbmNlbCgpLHRoaXMuaD1udWxsO2Vsc2UgaWYodGhpcy5nJiYwIT09dGhpcy5nLnNpemUpe2Zvcihjb25zdCBhIG9mIHRoaXMuZy52YWx1ZXMoKSlhLmNhbmNlbCgpO3RoaXMuZy5jbGVhcigpO319O2Z1bmN0aW9uIGZkKGEpe2lmKG51bGwhPWEuaClyZXR1cm4gYS5pLmNvbmNhdChhLmguRik7aWYobnVsbCE9YS5nJiYwIT09YS5nLnNpemUpe2xldCBiPWEuaTtmb3IoY29uc3QgYyBvZiBhLmcudmFsdWVzKCkpYj1iLmNvbmNhdChjLkYpO3JldHVybiBifXJldHVybiBtYShhLmkpfXZhciBnZD1jbGFzc3tzdHJpbmdpZnkoYSl7cmV0dXJuIGwuSlNPTi5zdHJpbmdpZnkoYSx2b2lkIDApfXBhcnNlKGEpe3JldHVybiBsLkpTT04ucGFyc2UoYSx2b2lkIDApfX07ZnVuY3Rpb24gaGQoKXt0aGlzLmc9bmV3IGdkO31mdW5jdGlvbiBpZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1qYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIGpkKGEsYil7Y29uc3QgYz1uZXcgR2I7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIGtkKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIGxkKGEpe3RoaXMubD1hLmZjfHxudWxsO3RoaXMuaj1hLm9ifHwhMTt9cihsZCxVYik7bGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG1kKHRoaXMubCx0aGlzLmopfTtsZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBtZChhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLkY9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1uZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXIobWQsQik7dmFyIG5kPTA7az1tZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPW5kKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7b2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkZ8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLiRhLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKS5jYXRjaCgoKT0+e30pOzE8PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5nJiY0IT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLmc9ITEscGQodGhpcykpO3RoaXMucmVhZHlTdGF0ZT1uZDt9O1xuay4kYT1mdW5jdGlvbihhKXtpZih0aGlzLmcmJih0aGlzLmw9YSx0aGlzLmh8fCh0aGlzLnN0YXR1cz10aGlzLmwuc3RhdHVzLHRoaXMuc3RhdHVzVGV4dD10aGlzLmwuc3RhdHVzVGV4dCx0aGlzLmg9YS5oZWFkZXJzLHRoaXMucmVhZHlTdGF0ZT0yLG9kKHRoaXMpKSx0aGlzLmcmJih0aGlzLnJlYWR5U3RhdGU9MyxvZCh0aGlzKSx0aGlzLmcpKSlpZihcImFycmF5YnVmZmVyXCI9PT10aGlzLnJlc3BvbnNlVHlwZSlhLmFycmF5QnVmZmVyKCkudGhlbih0aGlzLllhLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgbC5SZWFkYWJsZVN0cmVhbSYmXCJib2R5XCJpbiBhKXt0aGlzLmo9YS5ib2R5LmdldFJlYWRlcigpO2lmKHRoaXMudSl7aWYodGhpcy5yZXNwb25zZVR5cGUpdGhyb3cgRXJyb3IoJ3Jlc3BvbnNlVHlwZSBtdXN0IGJlIGVtcHR5IGZvciBcInN0cmVhbUJpbmFyeUNodW5rc1wiIG1vZGUgcmVzcG9uc2VzLicpO3RoaXMucmVzcG9uc2U9XG5bXTt9ZWxzZSB0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsdGhpcy5BPW5ldyBUZXh0RGVjb2RlcjtxZCh0aGlzKTt9ZWxzZSBhLnRleHQoKS50aGVuKHRoaXMuWmEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO307ZnVuY3Rpb24gcWQoYSl7YS5qLnJlYWQoKS50aGVuKGEuWGEuYmluZChhKSkuY2F0Y2goYS5rYS5iaW5kKGEpKTt9ay5YYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe2lmKHRoaXMudSYmYS52YWx1ZSl0aGlzLnJlc3BvbnNlLnB1c2goYS52YWx1ZSk7ZWxzZSBpZighdGhpcy51KXt2YXIgYj1hLnZhbHVlP2EudmFsdWU6bmV3IFVpbnQ4QXJyYXkoMCk7aWYoYj10aGlzLkEuZGVjb2RlKGIse3N0cmVhbTohYS5kb25lfSkpdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dCs9Yjt9YS5kb25lP3BkKHRoaXMpOm9kKHRoaXMpOzM9PXRoaXMucmVhZHlTdGF0ZSYmcWQodGhpcyk7fX07XG5rLlphPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9YSxwZCh0aGlzKSk7fTtrLllhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9YSxwZCh0aGlzKSk7fTtrLmthPWZ1bmN0aW9uKCl7dGhpcy5nJiZwZCh0aGlzKTt9O2Z1bmN0aW9uIHBkKGEpe2EucmVhZHlTdGF0ZT00O2EubD1udWxsO2Euaj1udWxsO2EuQT1udWxsO29kKGEpO31rLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnYuYXBwZW5kKGEsYik7fTtrLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmg/dGhpcy5oLmdldChhLnRvTG93ZXJDYXNlKCkpfHxcIlwiOlwiXCJ9O1xuay5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5oKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj10aGlzLmguZW50cmllcygpO2Zvcih2YXIgYz1iLm5leHQoKTshYy5kb25lOyljPWMudmFsdWUsYS5wdXNoKGNbMF0rXCI6IFwiK2NbMV0pLGM9Yi5uZXh0KCk7cmV0dXJuIGEuam9pbihcIlxcclxcblwiKX07ZnVuY3Rpb24gb2QoYSl7YS5vbnJlYWR5c3RhdGVjaGFuZ2UmJmEub25yZWFkeXN0YXRlY2hhbmdlLmNhbGwoYSk7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZC5wcm90b3R5cGUsXCJ3aXRoQ3JlZGVudGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5jbHVkZVwiPT09dGhpcy5tfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tPWE/XCJpbmNsdWRlXCI6XCJzYW1lLW9yaWdpblwiO319KTt2YXIgcmQ9bC5KU09OLnBhcnNlO2Z1bmN0aW9uIFAoYSl7Qi5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgTWFwO3RoaXMudT1hfHxudWxsO3RoaXMuaD0hMTt0aGlzLkM9dGhpcy5nPW51bGw7dGhpcy5JPVwiXCI7dGhpcy5tPTA7dGhpcy5qPVwiXCI7dGhpcy5sPXRoaXMuRz10aGlzLnY9dGhpcy5GPSExO3RoaXMuQj0wO3RoaXMuQT1udWxsO3RoaXMuSz1zZDt0aGlzLkw9dGhpcy5NPSExO31yKFAsQik7dmFyIHNkPVwiXCIsdGQ9L15odHRwcz8kL2ksdWQ9W1wiUE9TVFwiLFwiUFVUXCJdO2s9UC5wcm90b3R5cGU7ay5PYT1mdW5jdGlvbihhKXt0aGlzLk09YTt9O1xuay5oYT1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmcpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5JK1wiOyBuZXdVcmk9XCIrYSk7Yj1iP2IudG9VcHBlckNhc2UoKTpcIkdFVFwiO3RoaXMuST1hO3RoaXMuaj1cIlwiO3RoaXMubT0wO3RoaXMuRj0hMTt0aGlzLmg9ITA7dGhpcy5nPXRoaXMudT90aGlzLnUuZygpOiRiLmcoKTt0aGlzLkM9dGhpcy51P1ZiKHRoaXMudSk6VmIoJGIpO3RoaXMuZy5vbnJlYWR5c3RhdGVjaGFuZ2U9cSh0aGlzLkxhLHRoaXMpO3RyeXt0aGlzLkc9ITAsdGhpcy5nLm9wZW4oYixTdHJpbmcoYSksITApLHRoaXMuRz0hMTt9Y2F0Y2goZil7dmQodGhpcyxmKTtyZXR1cm59YT1jfHxcIlwiO2M9bmV3IE1hcCh0aGlzLmhlYWRlcnMpO2lmKGQpaWYoT2JqZWN0LmdldFByb3RvdHlwZU9mKGQpPT09T2JqZWN0LnByb3RvdHlwZSlmb3IodmFyIGUgaW4gZCljLnNldChlLGRbZV0pO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT09XG50eXBlb2YgZC5rZXlzJiZcImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5nZXQpZm9yKGNvbnN0IGYgb2YgZC5rZXlzKCkpYy5zZXQoZixkLmdldChmKSk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gaW5wdXQgdHlwZSBmb3Igb3B0X2hlYWRlcnM6IFwiK1N0cmluZyhkKSk7ZD1BcnJheS5mcm9tKGMua2V5cygpKS5maW5kKGY9PlwiY29udGVudC10eXBlXCI9PWYudG9Mb3dlckNhc2UoKSk7ZT1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTshKDA8PWthKHVkLGIpKXx8ZHx8ZXx8Yy5zZXQoXCJDb250ZW50LVR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIpO2Zvcihjb25zdCBbZixoXW9mIGMpdGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoZixoKTt0aGlzLksmJih0aGlzLmcucmVzcG9uc2VUeXBlPXRoaXMuSyk7XCJ3aXRoQ3JlZGVudGlhbHNcImluIHRoaXMuZyYmdGhpcy5nLndpdGhDcmVkZW50aWFscyE9PXRoaXMuTSYmKHRoaXMuZy53aXRoQ3JlZGVudGlhbHM9XG50aGlzLk0pO3RyeXt3ZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLkw9eGQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy51YSx0aGlzKSk6dGhpcy5BPXliKHRoaXMudWEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt2ZCh0aGlzLGYpO319O2Z1bmN0aW9uIHhkKGEpe3JldHVybiB6JiZcIm51bWJlclwiPT09dHlwZW9mIGEudGltZW91dCYmdm9pZCAwIT09YS5vbnRpbWVvdXR9ay51YT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiZ0aGlzLmcmJih0aGlzLmo9XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdGhpcy5CK1wibXMsIGFib3J0aW5nXCIsdGhpcy5tPTgsQyh0aGlzLFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKTt9O2Z1bmN0aW9uIHZkKGEsYil7YS5oPSExO2EuZyYmKGEubD0hMCxhLmcuYWJvcnQoKSxhLmw9ITEpO2Euaj1iO2EubT01O3lkKGEpO3pkKGEpO31cbmZ1bmN0aW9uIHlkKGEpe2EuRnx8KGEuRj0hMCxDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXCJlcnJvclwiKSk7fWsuYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSx0aGlzLm09YXx8NyxDKHRoaXMsXCJjb21wbGV0ZVwiKSxDKHRoaXMsXCJhYm9ydFwiKSx6ZCh0aGlzKSk7fTtrLk49ZnVuY3Rpb24oKXt0aGlzLmcmJih0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSksemQodGhpcywhMCkpO1AuJC5OLmNhbGwodGhpcyk7fTtrLkxhPWZ1bmN0aW9uKCl7dGhpcy5zfHwodGhpcy5HfHx0aGlzLnZ8fHRoaXMubD9BZCh0aGlzKTp0aGlzLmtiKCkpO307ay5rYj1mdW5jdGlvbigpe0FkKHRoaXMpO307XG5mdW5jdGlvbiBBZChhKXtpZihhLmgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiYoIWEuQ1sxXXx8NCE9SChhKXx8MiE9YS5kYSgpKSlpZihhLnYmJjQ9PUgoYSkpeWIoYS5MYSwwLGEpO2Vsc2UgaWYoQyhhLFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1IKGEpKXthLmg9ITE7dHJ5e2NvbnN0IGg9YS5kYSgpO2E6c3dpdGNoKGgpe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYj0hMDticmVhayBhO2RlZmF1bHQ6Yj0hMTt9dmFyIGM7aWYoIShjPWIpKXt2YXIgZDtpZihkPTA9PT1oKXt2YXIgZT1TdHJpbmcoYS5JKS5tYXRjaChMYylbMV18fG51bGw7IWUmJmwuc2VsZiYmbC5zZWxmLmxvY2F0aW9uJiYoZT1sLnNlbGYubG9jYXRpb24ucHJvdG9jb2wuc2xpY2UoMCwtMSkpO2Q9IXRkLnRlc3QoZT9lLnRvTG93ZXJDYXNlKCk6XCJcIik7fWM9ZDt9aWYoYylDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXCJzdWNjZXNzXCIpO2Vsc2Uge2EubT1cbjY7dHJ5e3ZhciBmPTI8SChhKT9hLmcuc3RhdHVzVGV4dDpcIlwiO31jYXRjaChuKXtmPVwiXCI7fWEuaj1mK1wiIFtcIithLmRhKCkrXCJdXCI7eWQoYSk7fX1maW5hbGx5e3pkKGEpO319fWZ1bmN0aW9uIHpkKGEsYil7aWYoYS5nKXt3ZChhKTtjb25zdCBjPWEuZyxkPWEuQ1swXT8oKT0+e306bnVsbDthLmc9bnVsbDthLkM9bnVsbDtifHxDKGEsXCJyZWFkeVwiKTt0cnl7Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDt9Y2F0Y2goZSl7fX19ZnVuY3Rpb24gd2QoYSl7YS5nJiZhLkwmJihhLmcub250aW1lb3V0PW51bGwpO2EuQSYmKGwuY2xlYXJUaW1lb3V0KGEuQSksYS5BPW51bGwpO31rLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5nfTtmdW5jdGlvbiBIKGEpe3JldHVybiBhLmc/YS5nLnJlYWR5U3RhdGU6MH1rLmRhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPEgodGhpcyk/dGhpcy5nLnN0YXR1czotMX1jYXRjaChhKXtyZXR1cm4gLTF9fTtcbmsuamE9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZz90aGlzLmcucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2goYSl7cmV0dXJuIFwiXCJ9fTtrLldhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7dmFyIGI9dGhpcy5nLnJlc3BvbnNlVGV4dDthJiYwPT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7cmV0dXJuIHJkKGIpfX07ZnVuY3Rpb24gbWMoYSl7dHJ5e2lmKCFhLmcpcmV0dXJuIG51bGw7aWYoXCJyZXNwb25zZVwiaW4gYS5nKXJldHVybiBhLmcucmVzcG9uc2U7c3dpdGNoKGEuSyl7Y2FzZSBzZDpjYXNlIFwidGV4dFwiOnJldHVybiBhLmcucmVzcG9uc2VUZXh0O2Nhc2UgXCJhcnJheWJ1ZmZlclwiOmlmKFwibW96UmVzcG9uc2VBcnJheUJ1ZmZlclwiaW4gYS5nKXJldHVybiBhLmcubW96UmVzcG9uc2VBcnJheUJ1ZmZlcn1yZXR1cm4gbnVsbH1jYXRjaChiKXtyZXR1cm4gbnVsbH19XG5mdW5jdGlvbiB0YyhhKXtjb25zdCBiPXt9O2E9KGEuZyYmMjw9SChhKT9hLmcuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl8fFwiXCI6XCJcIikuc3BsaXQoXCJcXHJcXG5cIik7Zm9yKGxldCBkPTA7ZDxhLmxlbmd0aDtkKyspe2lmKHgoYVtkXSkpY29udGludWU7dmFyIGM9cWIoYVtkXSk7Y29uc3QgZT1jWzBdO2M9Y1sxXTtpZihcInN0cmluZ1wiIT09dHlwZW9mIGMpY29udGludWU7Yz1jLnRyaW0oKTtjb25zdCBmPWJbZV18fFtdO2JbZV09ZjtmLnB1c2goYyk7fU9hKGIsZnVuY3Rpb24oZCl7cmV0dXJuIGQuam9pbihcIiwgXCIpfSk7fWsuSWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtrLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIFwic3RyaW5nXCI9PT10eXBlb2YgdGhpcy5qP3RoaXMuajpTdHJpbmcodGhpcy5qKX07ZnVuY3Rpb24gQmQoYSl7bGV0IGI9XCJcIjtOYShhLGZ1bmN0aW9uKGMsZCl7Yis9ZDtiKz1cIjpcIjtiKz1jO2IrPVwiXFxyXFxuXCI7fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gQ2QoYSxiLGMpe2E6e2ZvcihkIGluIGMpe3ZhciBkPSExO2JyZWFrIGF9ZD0hMDt9ZHx8KGM9QmQoYyksXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhudWxsIT1jJiZlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKSk6SyhhLGIsYykpO31mdW5jdGlvbiBEZChhLGIsYyl7cmV0dXJuIGMmJmMuaW50ZXJuYWxDaGFubmVsUGFyYW1zP2MuaW50ZXJuYWxDaGFubmVsUGFyYW1zW2FdfHxiOmJ9XG5mdW5jdGlvbiBFZChhKXt0aGlzLkdhPTA7dGhpcy5qPVtdO3RoaXMubD1uZXcgR2I7dGhpcy5wYT10aGlzLndhPXRoaXMuST10aGlzLlk9dGhpcy5nPXRoaXMuRGE9dGhpcy5GPXRoaXMubmE9dGhpcy5vPXRoaXMuVT10aGlzLnM9bnVsbDt0aGlzLmZiPXRoaXMuVz0wO3RoaXMuY2I9RGQoXCJmYWlsRmFzdFwiLCExLGEpO3RoaXMuRz10aGlzLnY9dGhpcy51PXRoaXMubT10aGlzLmg9bnVsbDt0aGlzLmFhPSEwO3RoaXMuRmE9dGhpcy5WPS0xO3RoaXMuYmE9dGhpcy5BPXRoaXMuQz0wO3RoaXMuYWI9RGQoXCJiYXNlUmV0cnlEZWxheU1zXCIsNUUzLGEpO3RoaXMuaGI9RGQoXCJyZXRyeURlbGF5U2VlZE1zXCIsMUU0LGEpO3RoaXMuZWI9RGQoXCJmb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIiwyLGEpO3RoaXMueGE9RGQoXCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNcIiwyRTQsYSk7dGhpcy52YT1hJiZhLnhtbEh0dHBGYWN0b3J5fHx2b2lkIDA7dGhpcy5IYT1hJiZhLmRjfHwhMTt0aGlzLkw9XG52b2lkIDA7dGhpcy5KPWEmJmEuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy5LPVwiXCI7dGhpcy5pPW5ldyBjZChhJiZhLmNvbmN1cnJlbnRSZXF1ZXN0TGltaXQpO3RoaXMuSmE9bmV3IGhkO3RoaXMuUD1hJiZhLmZhc3RIYW5kc2hha2V8fCExO3RoaXMuTz1hJiZhLmVuY29kZUluaXRNZXNzYWdlSGVhZGVyc3x8ITE7dGhpcy5QJiZ0aGlzLk8mJih0aGlzLk89ITEpO3RoaXMuYmI9YSYmYS5iY3x8ITE7YSYmYS5FYSYmdGhpcy5sLkVhKCk7YSYmYS5mb3JjZUxvbmdQb2xsaW5nJiYodGhpcy5hYT0hMSk7dGhpcy5jYT0hdGhpcy5QJiZ0aGlzLmFhJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLnFhPXZvaWQgMDthJiZhLmxvbmdQb2xsaW5nVGltZW91dCYmMDxhLmxvbmdQb2xsaW5nVGltZW91dCYmKHRoaXMucWE9YS5sb25nUG9sbGluZ1RpbWVvdXQpO3RoaXMub2E9dm9pZCAwO3RoaXMuUz0wO3RoaXMuTT0hMTt0aGlzLm1hPXRoaXMuQj1udWxsO31rPUVkLnByb3RvdHlwZTtcbmsucmE9ODtrLkg9MTtmdW5jdGlvbiBIYyhhKXtGZChhKTtpZigzPT1hLkgpe3ZhciBiPWEuVysrLGM9RyhhLkkpO0soYyxcIlNJRFwiLGEuSyk7SyhjLFwiUklEXCIsYik7SyhjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0dkKGEsYyk7Yj1uZXcgYmMoYSxhLmwsYik7Yi5MPTI7Yi52PWhjKEcoYykpO2M9ITE7aWYobC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24pdHJ5e2M9bC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbihiLnYudG9TdHJpbmcoKSxcIlwiKTt9Y2F0Y2goZCl7fSFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPWxjKGIubCxudWxsKSxiLmcuaGEoYi52KSk7Yi5HPURhdGUubm93KCk7amMoYik7fUhkKGEpO31mdW5jdGlvbiB6YyhhKXthLmcmJih2YyhhKSxhLmcuY2FuY2VsKCksYS5nPW51bGwpO31cbmZ1bmN0aW9uIEZkKGEpe3pjKGEpO2EudSYmKGwuY2xlYXJUaW1lb3V0KGEudSksYS51PW51bGwpO3ljKGEpO2EuaS5jYW5jZWwoKTthLm0mJihcIm51bWJlclwiPT09dHlwZW9mIGEubSYmbC5jbGVhclRpbWVvdXQoYS5tKSxhLm09bnVsbCk7fWZ1bmN0aW9uIEdjKGEpe2lmKCFlZChhLmkpJiYhYS5tKXthLm09ITA7dmFyIGI9YS5OYTtzYnx8dmIoKTt0Ynx8KHNiKCksdGI9ITApO21iLmFkZChiLGEpO2EuQz0wO319ZnVuY3Rpb24gSWQoYSxiKXtpZihCYyhhLmkpPj1hLmkuai0oYS5tPzE6MCkpcmV0dXJuICExO2lmKGEubSlyZXR1cm4gYS5qPWIuRi5jb25jYXQoYS5qKSwhMDtpZigxPT1hLkh8fDI9PWEuSHx8YS5DPj0oYS5jYj8wOmEuZWIpKXJldHVybiAhMTthLm09UmIocShhLk5hLGEsYiksSmQoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLk5hPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkgpe2lmKCFhKXt0aGlzLlc9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlcrKztjb25zdCBlPW5ldyBiYyh0aGlzLHRoaXMubCxhKTtsZXQgZj10aGlzLnM7dGhpcy5VJiYoZj8oZj1QYShmKSxSYShmLHRoaXMuVSkpOmY9dGhpcy5VKTtudWxsIT09dGhpcy5vfHx0aGlzLk98fChlLkk9ZixmPW51bGwpO2lmKHRoaXMuUClhOnt2YXIgYj0wO2Zvcih2YXIgYz0wO2M8dGhpcy5qLmxlbmd0aDtjKyspe2I6e3ZhciBkPXRoaXMualtjXTtpZihcIl9fZGF0YV9fXCJpbiBkLm1hcCYmKGQ9ZC5tYXAuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMuai5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj1cbjFFMztiPUtkKHRoaXMsZSxiKTtjPUcodGhpcy5JKTtLKGMsXCJSSURcIixhKTtLKGMsXCJDVkVSXCIsMjIpO3RoaXMuRiYmSyhjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkYpO0dkKHRoaXMsYyk7ZiYmKHRoaXMuTz9iPVwiaGVhZGVycz1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKEJkKGYpKSkrXCImXCIrYjp0aGlzLm8mJkNkKGMsdGhpcy5vLGYpKTtDYyh0aGlzLmksZSk7dGhpcy5iYiYmSyhjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLlA/KEsoYyxcIiRyZXFcIixiKSxLKGMsXCJTSURcIixcIm51bGxcIiksZS5hYT0hMCxnYyhlLGMsbnVsbCkpOmdjKGUsYyxiKTt0aGlzLkg9Mjt9fWVsc2UgMz09dGhpcy5IJiYoYT9MZCh0aGlzLGEpOjA9PXRoaXMuai5sZW5ndGh8fGVkKHRoaXMuaSl8fExkKHRoaXMpKTt9O1xuZnVuY3Rpb24gTGQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5XKys7Y29uc3QgZD1HKGEuSSk7SyhkLFwiU0lEXCIsYS5LKTtLKGQsXCJSSURcIixjKTtLKGQsXCJBSURcIixhLlYpO0dkKGEsZCk7YS5vJiZhLnMmJkNkKGQsYS5vLGEucyk7Yz1uZXcgYmMoYSxhLmwsYyxhLkMrMSk7bnVsbD09PWEubyYmKGMuST1hLnMpO2ImJihhLmo9Yi5GLmNvbmNhdChhLmopKTtiPUtkKGEsYywxRTMpO2Muc2V0VGltZW91dChNYXRoLnJvdW5kKC41KmEueGEpK01hdGgucm91bmQoLjUqYS54YSpNYXRoLnJhbmRvbSgpKSk7Q2MoYS5pLGMpO2djKGMsZCxiKTt9ZnVuY3Rpb24gR2QoYSxiKXthLm5hJiZOYShhLm5hLGZ1bmN0aW9uKGMsZCl7SyhiLGQsYyk7fSk7YS5oJiZLYyh7fSxmdW5jdGlvbihjLGQpe0soYixkLGMpO30pO31cbmZ1bmN0aW9uIEtkKGEsYixjKXtjPU1hdGgubWluKGEuai5sZW5ndGgsYyk7dmFyIGQ9YS5oP3EoYS5oLlZhLGEuaCxhKTpudWxsO2E6e3ZhciBlPWEuajtsZXQgZj0tMTtmb3IoOzspe2NvbnN0IGg9W1wiY291bnQ9XCIrY107LTE9PWY/MDxjPyhmPWVbMF0uZyxoLnB1c2goXCJvZnM9XCIrZikpOmY9MDpoLnB1c2goXCJvZnM9XCIrZik7bGV0IG49ITA7Zm9yKGxldCB0PTA7dDxjO3QrKyl7bGV0IG09ZVt0XS5nO2NvbnN0IHU9ZVt0XS5tYXA7bS09ZjtpZigwPm0pZj1NYXRoLm1heCgwLGVbdF0uZy0xMDApLG49ITE7ZWxzZSB0cnl7aWQodSxoLFwicmVxXCIrbStcIl9cIik7fWNhdGNoKEwpe2QmJmQodSk7fX1pZihuKXtkPWguam9pbihcIiZcIik7YnJlYWsgYX19fWE9YS5qLnNwbGljZSgwLGMpO2IuRj1hO3JldHVybiBkfWZ1bmN0aW9uIEZjKGEpe2lmKCFhLmcmJiFhLnUpe2EuYmE9MTt2YXIgYj1hLk1hO3NifHx2YigpO3RifHwoc2IoKSx0Yj0hMCk7bWIuYWRkKGIsYSk7YS5BPTA7fX1cbmZ1bmN0aW9uIEFjKGEpe2lmKGEuZ3x8YS51fHwzPD1hLkEpcmV0dXJuICExO2EuYmErKzthLnU9UmIocShhLk1hLGEpLEpkKGEsYS5BKSk7YS5BKys7cmV0dXJuICEwfWsuTWE9ZnVuY3Rpb24oKXt0aGlzLnU9bnVsbDtNZCh0aGlzKTtpZih0aGlzLmNhJiYhKHRoaXMuTXx8bnVsbD09dGhpcy5nfHwwPj10aGlzLlMpKXt2YXIgYT0yKnRoaXMuUzt0aGlzLmwuaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lciBlbmFibGVkOiBcIithKTt0aGlzLkI9UmIocSh0aGlzLmpiLHRoaXMpLGEpO319O2suamI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmwuaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMubC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLkc9ITEsdGhpcy5NPSEwLEYoMTApLHpjKHRoaXMpLE1kKHRoaXMpKTt9O1xuZnVuY3Rpb24gdmMoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIE1kKGEpe2EuZz1uZXcgYmMoYSxhLmwsXCJycGNcIixhLmJhKTtudWxsPT09YS5vJiYoYS5nLkk9YS5zKTthLmcuTz0wO3ZhciBiPUcoYS53YSk7SyhiLFwiUklEXCIsXCJycGNcIik7SyhiLFwiU0lEXCIsYS5LKTtLKGIsXCJBSURcIixhLlYpO0soYixcIkNJXCIsYS5HP1wiMFwiOlwiMVwiKTshYS5HJiZhLnFhJiZLKGIsXCJUT1wiLGEucWEpO0soYixcIlRZUEVcIixcInhtbGh0dHBcIik7R2QoYSxiKTthLm8mJmEucyYmQ2QoYixhLm8sYS5zKTthLkwmJmEuZy5zZXRUaW1lb3V0KGEuTCk7dmFyIGM9YS5nO2E9YS5wYTtjLkw9MTtjLnY9aGMoRyhiKSk7Yy5zPW51bGw7Yy5TPSEwO2ljKGMsYSk7fWsuaWI9ZnVuY3Rpb24oKXtudWxsIT10aGlzLnYmJih0aGlzLnY9bnVsbCx6Yyh0aGlzKSxBYyh0aGlzKSxGKDE5KSk7fTtcbmZ1bmN0aW9uIHljKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31mdW5jdGlvbiBzYyhhLGIpe3ZhciBjPW51bGw7aWYoYS5nPT1iKXt5YyhhKTt2YyhhKTthLmc9bnVsbDt2YXIgZD0yO31lbHNlIGlmKHhjKGEuaSxiKSljPWIuRixFYyhhLmksYiksZD0xO2Vsc2UgcmV0dXJuO2lmKDAhPWEuSClpZihiLmkpaWYoMT09ZCl7Yz1iLnM/Yi5zLmxlbmd0aDowO2I9RGF0ZS5ub3coKS1iLkc7dmFyIGU9YS5DO2Q9TWIoKTtDKGQsbmV3IFFiKGQsYykpO0djKGEpO31lbHNlIEZjKGEpO2Vsc2UgaWYoZT1iLm8sMz09ZXx8MD09ZSYmMDxiLmNhfHwhKDE9PWQmJklkKGEsYil8fDI9PWQmJkFjKGEpKSlzd2l0Y2goYyYmMDxjLmxlbmd0aCYmKGI9YS5pLGIuaT1iLmkuY29uY2F0KGMpKSxlKXtjYXNlIDE6SihhLDUpO2JyZWFrO2Nhc2UgNDpKKGEsMTApO2JyZWFrO2Nhc2UgMzpKKGEsNik7YnJlYWs7ZGVmYXVsdDpKKGEsMik7fX1cbmZ1bmN0aW9uIEpkKGEsYil7bGV0IGM9YS5hYitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYS5oYik7YS5pc0FjdGl2ZSgpfHwoYyo9Mik7cmV0dXJuIGMqYn1mdW5jdGlvbiBKKGEsYil7YS5sLmluZm8oXCJFcnJvciBjb2RlIFwiK2IpO2lmKDI9PWIpe3ZhciBjPW51bGw7YS5oJiYoYz1udWxsKTt2YXIgZD1xKGEucGIsYSk7Y3x8KGM9bmV3IE0oXCIvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9jbGVhcmRvdC5naWZcIiksbC5sb2NhdGlvbiYmXCJodHRwXCI9PWwubG9jYXRpb24ucHJvdG9jb2x8fE5jKGMsXCJodHRwc1wiKSxoYyhjKSk7amQoYy50b1N0cmluZygpLGQpO31lbHNlIEYoMik7YS5IPTA7YS5oJiZhLmguemEoYik7SGQoYSk7RmQoYSk7fWsucGI9ZnVuY3Rpb24oYSl7YT8odGhpcy5sLmluZm8oXCJTdWNjZXNzZnVsbHkgcGluZ2VkIGdvb2dsZS5jb21cIiksRigyKSk6KHRoaXMubC5pbmZvKFwiRmFpbGVkIHRvIHBpbmcgZ29vZ2xlLmNvbVwiKSxGKDEpKTt9O1xuZnVuY3Rpb24gSGQoYSl7YS5IPTA7YS5tYT1bXTtpZihhLmgpe2NvbnN0IGI9ZmQoYS5pKTtpZigwIT1iLmxlbmd0aHx8MCE9YS5qLmxlbmd0aCluYShhLm1hLGIpLG5hKGEubWEsYS5qKSxhLmkuaS5sZW5ndGg9MCxtYShhLmopLGEuai5sZW5ndGg9MDthLmgueWEoKTt9fWZ1bmN0aW9uIERjKGEsYixjKXt2YXIgZD1jIGluc3RhbmNlb2YgTT9HKGMpOm5ldyBNKGMpO2lmKFwiXCIhPWQuZyliJiYoZC5nPWIrXCIuXCIrZC5nKSxPYyhkLGQubSk7ZWxzZSB7dmFyIGU9bC5sb2NhdGlvbjtkPWUucHJvdG9jb2w7Yj1iP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lO2U9K2UucG9ydDt2YXIgZj1uZXcgTShudWxsKTtkJiZOYyhmLGQpO2ImJihmLmc9Yik7ZSYmT2MoZixlKTtjJiYoZi5sPWMpO2Q9Zjt9Yz1hLkY7Yj1hLkRhO2MmJmImJksoZCxjLGIpO0soZCxcIlZFUlwiLGEucmEpO0dkKGEsZCk7cmV0dXJuIGR9XG5mdW5jdGlvbiBsYyhhLGIsYyl7aWYoYiYmIWEuSil0aHJvdyBFcnJvcihcIkNhbid0IGNyZWF0ZSBzZWNvbmRhcnkgZG9tYWluIGNhcGFibGUgWGhySW8gb2JqZWN0LlwiKTtiPWMmJmEuSGEmJiFhLnZhP25ldyBQKG5ldyBsZCh7b2I6ITB9KSk6bmV3IFAoYS52YSk7Yi5PYShhLkopO3JldHVybiBifWsuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmgmJnRoaXMuaC5pc0FjdGl2ZSh0aGlzKX07ZnVuY3Rpb24gTmQoKXt9az1OZC5wcm90b3R5cGU7ay5CYT1mdW5jdGlvbigpe307ay5BYT1mdW5jdGlvbigpe307ay56YT1mdW5jdGlvbigpe307ay55YT1mdW5jdGlvbigpe307ay5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiAhMH07ay5WYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gT2QoKXtpZih6JiYhKDEwPD1OdW1iZXIoRmEpKSl0aHJvdyBFcnJvcihcIkVudmlyb25tZW50YWwgZXJyb3I6IG5vIGF2YWlsYWJsZSB0cmFuc3BvcnQuXCIpO31PZC5wcm90b3R5cGUuZz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgUShhLGIpfTtcbmZ1bmN0aW9uIFEoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5nPW5ldyBFZChiKTt0aGlzLmw9YTt0aGlzLmg9YiYmYi5tZXNzYWdlVXJsUGFyYW1zfHxudWxsO2E9YiYmYi5tZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLmNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQmJihhP2FbXCJYLUNsaWVudC1Qcm90b2NvbFwiXT1cIndlYmNoYW5uZWxcIjphPXtcIlgtQ2xpZW50LVByb3RvY29sXCI6XCJ3ZWJjaGFubmVsXCJ9KTt0aGlzLmcucz1hO2E9YiYmYi5pbml0TWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5tZXNzYWdlQ29udGVudFR5cGUmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCJdPWIubWVzc2FnZUNvbnRlbnRUeXBlOmE9e1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOmIubWVzc2FnZUNvbnRlbnRUeXBlfSk7YiYmYi5DYSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiXT1iLkNhOmE9e1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCI6Yi5DYX0pO3RoaXMuZy5VPVxuYTsoYT1iJiZiLmNjKSYmIXgoYSkmJih0aGlzLmcubz1hKTt0aGlzLkE9YiYmYi5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLnY9YiYmYi5zZW5kUmF3SnNvbnx8ITE7KGI9YiYmYi5odHRwU2Vzc2lvbklkUGFyYW0pJiYheChiKSYmKHRoaXMuZy5GPWIsYT10aGlzLmgsbnVsbCE9PWEmJmIgaW4gYSYmKGE9dGhpcy5oLGIgaW4gYSYmZGVsZXRlIGFbYl0pKTt0aGlzLmo9bmV3IFIodGhpcyk7fXIoUSxCKTtRLnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dGhpcy5nLmg9dGhpcy5qO3RoaXMuQSYmKHRoaXMuZy5KPSEwKTt2YXIgYT10aGlzLmcsYj10aGlzLmwsYz10aGlzLmh8fHZvaWQgMDtGKDApO2EuWT1iO2EubmE9Y3x8e307YS5HPWEuYWE7YS5JPURjKGEsbnVsbCxhLlkpO0djKGEpO307US5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtIYyh0aGlzLmcpO307XG5RLnByb3RvdHlwZS51PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZztpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBjPXt9O2MuX19kYXRhX189YTthPWM7fWVsc2UgdGhpcy52JiYoYz17fSxjLl9fZGF0YV9fPWpiKGEpLGE9Yyk7Yi5qLnB1c2gobmV3IGJkKGIuZmIrKyxhKSk7Mz09Yi5IJiZHYyhiKTt9O1EucHJvdG90eXBlLk49ZnVuY3Rpb24oKXt0aGlzLmcuaD1udWxsO2RlbGV0ZSB0aGlzLmo7SGModGhpcy5nKTtkZWxldGUgdGhpcy5nO1EuJC5OLmNhbGwodGhpcyk7fTtcbmZ1bmN0aW9uIFBkKGEpe1liLmNhbGwodGhpcyk7YS5fX2hlYWRlcnNfXyYmKHRoaXMuaGVhZGVycz1hLl9faGVhZGVyc19fLHRoaXMuc3RhdHVzQ29kZT1hLl9fc3RhdHVzX18sZGVsZXRlIGEuX19oZWFkZXJzX18sZGVsZXRlIGEuX19zdGF0dXNfXyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9cihQZCxZYik7ZnVuY3Rpb24gUWQoKXtaYi5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXIoUWQsWmIpO2Z1bmN0aW9uIFIoYSl7dGhpcy5nPWE7fXIoUixOZCk7Ui5wcm90b3R5cGUuQmE9ZnVuY3Rpb24oKXtDKHRoaXMuZyxcImFcIik7fTtSLnByb3RvdHlwZS5BYT1mdW5jdGlvbihhKXtDKHRoaXMuZyxuZXcgUGQoYSkpO307XG5SLnByb3RvdHlwZS56YT1mdW5jdGlvbihhKXtDKHRoaXMuZyxuZXcgUWQoKSk7fTtSLnByb3RvdHlwZS55YT1mdW5jdGlvbigpe0ModGhpcy5nLFwiYlwiKTt9O2Z1bmN0aW9uIFJkKCl7dGhpcy5ibG9ja1NpemU9LTE7fWZ1bmN0aW9uIFMoKXt0aGlzLmJsb2NrU2l6ZT0tMTt0aGlzLmJsb2NrU2l6ZT02NDt0aGlzLmc9QXJyYXkoNCk7dGhpcy5tPUFycmF5KHRoaXMuYmxvY2tTaXplKTt0aGlzLmk9dGhpcy5oPTA7dGhpcy5yZXNldCgpO31yKFMsUmQpO1MucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5nWzBdPTE3MzI1ODQxOTM7dGhpcy5nWzFdPTQwMjMyMzM0MTc7dGhpcy5nWzJdPTI1NjIzODMxMDI7dGhpcy5nWzNdPTI3MTczMzg3ODt0aGlzLmk9dGhpcy5oPTA7fTtcbmZ1bmN0aW9uIFNkKGEsYixjKXtjfHwoYz0wKTt2YXIgZD1BcnJheSgxNik7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWZvcih2YXIgZT0wOzE2PmU7KytlKWRbZV09Yi5jaGFyQ29kZUF0KGMrKyl8Yi5jaGFyQ29kZUF0KGMrKyk8PDh8Yi5jaGFyQ29kZUF0KGMrKyk8PDE2fGIuY2hhckNvZGVBdChjKyspPDwyNDtlbHNlIGZvcihlPTA7MTY+ZTsrK2UpZFtlXT1iW2MrK118YltjKytdPDw4fGJbYysrXTw8MTZ8YltjKytdPDwyNDtiPWEuZ1swXTtjPWEuZ1sxXTtlPWEuZ1syXTt2YXIgZj1hLmdbM107dmFyIGg9YisoZl5jJihlXmYpKStkWzBdKzM2MTQwOTAzNjAmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzFdKzM5MDU0MDI3MTAmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsyXSs2MDYxMDU4MTkmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtcbmg9YysoYl5lJihmXmIpKStkWzNdKzMyNTA0NDE5NjYmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFs0XSs0MTE4NTQ4Mzk5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFs1XSsxMjAwMDgwNDI2JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fGg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbNl0rMjgyMTczNTk1NSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzddKzQyNDkyNjEzMTMmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFs4XSsxNzcwMDM1NDE2JjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFs5XSsyMzM2NTUyODc5JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fFxuaD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsxMF0rNDI5NDkyNTIzMyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzExXSsyMzA0NTYzMTM0JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhmXmMmKGVeZikpK2RbMTJdKzE4MDQ2MDM2ODImNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzEzXSs0MjU0NjI2MTk1JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fGg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbMTRdKzI3OTI5NjUwMDYmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtoPWMrKGJeZSYoZl5iKSkrZFsxNV0rMTIzNjUzNTMyOSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZV5mJihjXmUpKStkWzFdKzQxMjkxNzA3ODYmNDI5NDk2NzI5NTtiPWMrKGg8PFxuNSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbNl0rMzIyNTQ2NTY2NCY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbMTFdKzY0MzcxNzcxMyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzBdKzM5MjEwNjk5OTQmNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFs1XSszNTkzNDA4NjA1JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsxMF0rMzgwMTYwODMmNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzE1XSszNjM0NDg4OTYxJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbNF0rMzg4OTQyOTQ0OCY0Mjk0OTY3Mjk1O2M9XG5lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhlXmYmKGNeZSkpK2RbOV0rNTY4NDQ2NDM4JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsxNF0rMzI3NTE2MzYwNiY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbM10rNDEwNzYwMzMzNSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzhdKzExNjM1MzE1MDEmNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFsxM10rMjg1MDI4NTgyOSY0Mjk0OTY3Mjk1O2I9YysoaDw8NSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbMl0rNDI0MzU2MzUxMiY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbN10rMTczNTMyODQ3MyY0Mjk0OTY3Mjk1O1xuZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbMTJdKzIzNjgzNTk1NjImNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGNeZV5mKStkWzVdKzQyOTQ1ODg3MzgmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbOF0rMjI3MjM5MjgzMyY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbMTFdKzE4MzkwMzA1NjImNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzE0XSs0MjU5NjU3NzQwJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzFdKzI3NjM5NzUyMzYmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbNF0rMTI3Mjg5MzM1MyY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxcbmg+Pj4yMSk7aD1lKyhmXmJeYykrZFs3XSs0MTM5NDY5NjY0JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFsxMF0rMzIwMDIzNjY1NiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhjXmVeZikrZFsxM10rNjgxMjc5MTc0JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzBdKzM5MzY0MzAwNzQmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8aD4+PjIxKTtoPWUrKGZeYl5jKStkWzNdKzM1NzI0NDUzMTcmNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzZdKzc2MDI5MTg5JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzldKzM2NTQ2MDI4MDkmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbMTJdK1xuMzg3MzE1MTQ2MSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbMTVdKzUzMDc0MjUyMCY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbMl0rMzI5OTYyODY0NSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhlXihjfH5mKSkrZFswXSs0MDk2MzM2NDUyJjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzddKzExMjY4OTE0MTUmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzE0XSsyODc4NjEyMzkxJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFs1XSs0MjM3NTMzMjQxJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFsxMl0rMTcwMDQ4NTU3MSZcbjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzNdKzIzOTk5ODA2OTAmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzEwXSs0MjkzOTE1NzczJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFsxXSsyMjQwMDQ0NDk3JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFs4XSsxODczMzEzMzU5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzE1XSs0MjY0MzU1NTUyJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFs2XSsyNzM0NzY4OTE2JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFsxM10rMTMwOTE1MTY0OSZcbjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFs0XSs0MTQ5NDQ0MjI2JjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzExXSszMTc0NzU2OTE3JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFsyXSs3MTg3ODcyNTkmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzldKzM5NTE0ODE3NDUmNDI5NDk2NzI5NTthLmdbMF09YS5nWzBdK2ImNDI5NDk2NzI5NTthLmdbMV09YS5nWzFdKyhlKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSkpJjQyOTQ5NjcyOTU7YS5nWzJdPWEuZ1syXStlJjQyOTQ5NjcyOTU7YS5nWzNdPWEuZ1szXStmJjQyOTQ5NjcyOTU7fVxuUy5wcm90b3R5cGUuaj1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPWEubGVuZ3RoKTtmb3IodmFyIGM9Yi10aGlzLmJsb2NrU2l6ZSxkPXRoaXMubSxlPXRoaXMuaCxmPTA7ZjxiOyl7aWYoMD09ZSlmb3IoO2Y8PWM7KVNkKHRoaXMsYSxmKSxmKz10aGlzLmJsb2NrU2l6ZTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpZm9yKDtmPGI7KXtpZihkW2UrK109YS5jaGFyQ29kZUF0KGYrKyksZT09dGhpcy5ibG9ja1NpemUpe1NkKHRoaXMsZCk7ZT0wO2JyZWFrfX1lbHNlIGZvcig7ZjxiOylpZihkW2UrK109YVtmKytdLGU9PXRoaXMuYmxvY2tTaXplKXtTZCh0aGlzLGQpO2U9MDticmVha319dGhpcy5oPWU7dGhpcy5pKz1iO307XG5TLnByb3RvdHlwZS5sPWZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkoKDU2PnRoaXMuaD90aGlzLmJsb2NrU2l6ZToyKnRoaXMuYmxvY2tTaXplKS10aGlzLmgpO2FbMF09MTI4O2Zvcih2YXIgYj0xO2I8YS5sZW5ndGgtODsrK2IpYVtiXT0wO3ZhciBjPTgqdGhpcy5pO2ZvcihiPWEubGVuZ3RoLTg7YjxhLmxlbmd0aDsrK2IpYVtiXT1jJjI1NSxjLz0yNTY7dGhpcy5qKGEpO2E9QXJyYXkoMTYpO2ZvcihiPWM9MDs0PmI7KytiKWZvcih2YXIgZD0wOzMyPmQ7ZCs9OClhW2MrK109dGhpcy5nW2JdPj4+ZCYyNTU7cmV0dXJuIGF9O2Z1bmN0aW9uIFQoYSxiKXt0aGlzLmg9Yjtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLTE7MDw9ZTtlLS0pe3ZhciBmPWFbZV18MDtkJiZmPT1ifHwoY1tlXT1mLGQ9ITEpO310aGlzLmc9Yzt9dmFyIHNhPXt9O2Z1bmN0aW9uIFRkKGEpe3JldHVybiAtMTI4PD1hJiYxMjg+YT9yYShhLGZ1bmN0aW9uKGIpe3JldHVybiBuZXcgVChbYnwwXSwwPmI/LTE6MCl9KTpuZXcgVChbYXwwXSwwPmE/LTE6MCl9ZnVuY3Rpb24gVShhKXtpZihpc05hTihhKXx8IWlzRmluaXRlKGEpKXJldHVybiBWO2lmKDA+YSlyZXR1cm4gVyhVKC1hKSk7Zm9yKHZhciBiPVtdLGM9MSxkPTA7YT49YztkKyspYltkXT1hL2N8MCxjKj1VZDtyZXR1cm4gbmV3IFQoYiwwKX1cbmZ1bmN0aW9uIFZkKGEsYil7aWYoMD09YS5sZW5ndGgpdGhyb3cgRXJyb3IoXCJudW1iZXIgZm9ybWF0IGVycm9yOiBlbXB0eSBzdHJpbmdcIik7Yj1ifHwxMDtpZigyPmJ8fDM2PGIpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2IpO2lmKFwiLVwiPT1hLmNoYXJBdCgwKSlyZXR1cm4gVyhWZChhLnN1YnN0cmluZygxKSxiKSk7aWYoMDw9YS5pbmRleE9mKFwiLVwiKSl0aHJvdyBFcnJvcignbnVtYmVyIGZvcm1hdCBlcnJvcjogaW50ZXJpb3IgXCItXCIgY2hhcmFjdGVyJyk7Zm9yKHZhciBjPVUoTWF0aC5wb3coYiw4KSksZD1WLGU9MDtlPGEubGVuZ3RoO2UrPTgpe3ZhciBmPU1hdGgubWluKDgsYS5sZW5ndGgtZSksaD1wYXJzZUludChhLnN1YnN0cmluZyhlLGUrZiksYik7OD5mPyhmPVUoTWF0aC5wb3coYixmKSksZD1kLlIoZikuYWRkKFUoaCkpKTooZD1kLlIoYyksZD1kLmFkZChVKGgpKSk7fXJldHVybiBkfVxudmFyIFVkPTQyOTQ5NjcyOTYsVj1UZCgwKSxXZD1UZCgxKSxYZD1UZCgxNjc3NzIxNik7az1ULnByb3RvdHlwZTtrLmVhPWZ1bmN0aW9uKCl7aWYoWCh0aGlzKSlyZXR1cm4gLVcodGhpcykuZWEoKTtmb3IodmFyIGE9MCxiPTEsYz0wO2M8dGhpcy5nLmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuRChjKTthKz0oMDw9ZD9kOlVkK2QpKmI7Yio9VWQ7fXJldHVybiBhfTtcbmsudG9TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hfHwxMDtpZigyPmF8fDM2PGEpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2EpO2lmKFkodGhpcykpcmV0dXJuIFwiMFwiO2lmKFgodGhpcykpcmV0dXJuIFwiLVwiK1codGhpcykudG9TdHJpbmcoYSk7Zm9yKHZhciBiPVUoTWF0aC5wb3coYSw2KSksYz10aGlzLGQ9XCJcIjs7KXt2YXIgZT1ZZChjLGIpLmc7Yz1aZChjLGUuUihiKSk7dmFyIGY9KCgwPGMuZy5sZW5ndGg/Yy5nWzBdOmMuaCk+Pj4wKS50b1N0cmluZyhhKTtjPWU7aWYoWShjKSlyZXR1cm4gZitkO2Zvcig7Nj5mLmxlbmd0aDspZj1cIjBcIitmO2Q9ZitkO319O2suRD1mdW5jdGlvbihhKXtyZXR1cm4gMD5hPzA6YTx0aGlzLmcubGVuZ3RoP3RoaXMuZ1thXTp0aGlzLmh9O2Z1bmN0aW9uIFkoYSl7aWYoMCE9YS5oKXJldHVybiAhMTtmb3IodmFyIGI9MDtiPGEuZy5sZW5ndGg7YisrKWlmKDAhPWEuZ1tiXSlyZXR1cm4gITE7cmV0dXJuICEwfVxuZnVuY3Rpb24gWChhKXtyZXR1cm4gLTE9PWEuaH1rLlg9ZnVuY3Rpb24oYSl7YT1aZCh0aGlzLGEpO3JldHVybiBYKGEpPy0xOlkoYSk/MDoxfTtmdW5jdGlvbiBXKGEpe2Zvcih2YXIgYj1hLmcubGVuZ3RoLGM9W10sZD0wO2Q8YjtkKyspY1tkXT1+YS5nW2RdO3JldHVybiAobmV3IFQoYyx+YS5oKSkuYWRkKFdkKX1rLmFicz1mdW5jdGlvbigpe3JldHVybiBYKHRoaXMpP1codGhpcyk6dGhpc307ay5hZGQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTAsZT0wO2U8PWI7ZSsrKXt2YXIgZj1kKyh0aGlzLkQoZSkmNjU1MzUpKyhhLkQoZSkmNjU1MzUpLGg9KGY+Pj4xNikrKHRoaXMuRChlKT4+PjE2KSsoYS5EKGUpPj4+MTYpO2Q9aD4+PjE2O2YmPTY1NTM1O2gmPTY1NTM1O2NbZV09aDw8MTZ8Zjt9cmV0dXJuIG5ldyBUKGMsY1tjLmxlbmd0aC0xXSYtMjE0NzQ4MzY0OD8tMTowKX07XG5mdW5jdGlvbiBaZChhLGIpe3JldHVybiBhLmFkZChXKGIpKX1cbmsuUj1mdW5jdGlvbihhKXtpZihZKHRoaXMpfHxZKGEpKXJldHVybiBWO2lmKFgodGhpcykpcmV0dXJuIFgoYSk/Vyh0aGlzKS5SKFcoYSkpOlcoVyh0aGlzKS5SKGEpKTtpZihYKGEpKXJldHVybiBXKHRoaXMuUihXKGEpKSk7aWYoMD50aGlzLlgoWGQpJiYwPmEuWChYZCkpcmV0dXJuIFUodGhpcy5lYSgpKmEuZWEoKSk7Zm9yKHZhciBiPXRoaXMuZy5sZW5ndGgrYS5nLmxlbmd0aCxjPVtdLGQ9MDtkPDIqYjtkKyspY1tkXT0wO2ZvcihkPTA7ZDx0aGlzLmcubGVuZ3RoO2QrKylmb3IodmFyIGU9MDtlPGEuZy5sZW5ndGg7ZSsrKXt2YXIgZj10aGlzLkQoZCk+Pj4xNixoPXRoaXMuRChkKSY2NTUzNSxuPWEuRChlKT4+PjE2LHQ9YS5EKGUpJjY1NTM1O2NbMipkKzIqZV0rPWgqdDskZChjLDIqZCsyKmUpO2NbMipkKzIqZSsxXSs9Zip0OyRkKGMsMipkKzIqZSsxKTtjWzIqZCsyKmUrMV0rPWgqbjskZChjLDIqZCsyKmUrMSk7Y1syKmQrMiplKzJdKz1mKm47JGQoYywyKmQrMiplKzIpO31mb3IoZD1cbjA7ZDxiO2QrKyljW2RdPWNbMipkKzFdPDwxNnxjWzIqZF07Zm9yKGQ9YjtkPDIqYjtkKyspY1tkXT0wO3JldHVybiBuZXcgVChjLDApfTtmdW5jdGlvbiAkZChhLGIpe2Zvcig7KGFbYl0mNjU1MzUpIT1hW2JdOylhW2IrMV0rPWFbYl0+Pj4xNixhW2JdJj02NTUzNSxiKys7fWZ1bmN0aW9uIGFlKGEsYil7dGhpcy5nPWE7dGhpcy5oPWI7fVxuZnVuY3Rpb24gWWQoYSxiKXtpZihZKGIpKXRocm93IEVycm9yKFwiZGl2aXNpb24gYnkgemVyb1wiKTtpZihZKGEpKXJldHVybiBuZXcgYWUoVixWKTtpZihYKGEpKXJldHVybiBiPVlkKFcoYSksYiksbmV3IGFlKFcoYi5nKSxXKGIuaCkpO2lmKFgoYikpcmV0dXJuIGI9WWQoYSxXKGIpKSxuZXcgYWUoVyhiLmcpLGIuaCk7aWYoMzA8YS5nLmxlbmd0aCl7aWYoWChhKXx8WChiKSl0aHJvdyBFcnJvcihcInNsb3dEaXZpZGVfIG9ubHkgd29ya3Mgd2l0aCBwb3NpdGl2ZSBpbnRlZ2Vycy5cIik7Zm9yKHZhciBjPVdkLGQ9YjswPj1kLlgoYSk7KWM9YmUoYyksZD1iZShkKTt2YXIgZT1aKGMsMSksZj1aKGQsMSk7ZD1aKGQsMik7Zm9yKGM9WihjLDIpOyFZKGQpOyl7dmFyIGg9Zi5hZGQoZCk7MD49aC5YKGEpJiYoZT1lLmFkZChjKSxmPWgpO2Q9WihkLDEpO2M9WihjLDEpO31iPVpkKGEsZS5SKGIpKTtyZXR1cm4gbmV3IGFlKGUsYil9Zm9yKGU9VjswPD1hLlgoYik7KXtjPU1hdGgubWF4KDEsTWF0aC5mbG9vcihhLmVhKCkvXG5iLmVhKCkpKTtkPU1hdGguY2VpbChNYXRoLmxvZyhjKS9NYXRoLkxOMik7ZD00OD49ZD8xOk1hdGgucG93KDIsZC00OCk7Zj1VKGMpO2ZvcihoPWYuUihiKTtYKGgpfHwwPGguWChhKTspYy09ZCxmPVUoYyksaD1mLlIoYik7WShmKSYmKGY9V2QpO2U9ZS5hZGQoZik7YT1aZChhLGgpO31yZXR1cm4gbmV3IGFlKGUsYSl9ay5nYj1mdW5jdGlvbihhKXtyZXR1cm4gWWQodGhpcyxhKS5ofTtrLmFuZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpJmEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmgmYS5oKX07ay5vcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpfGEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmh8YS5oKX07XG5rLnhvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpXmEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmheYS5oKX07ZnVuY3Rpb24gYmUoYSl7Zm9yKHZhciBiPWEuZy5sZW5ndGgrMSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09YS5EKGQpPDwxfGEuRChkLTEpPj4+MzE7cmV0dXJuIG5ldyBUKGMsYS5oKX1mdW5jdGlvbiBaKGEsYil7dmFyIGM9Yj4+NTtiJT0zMjtmb3IodmFyIGQ9YS5nLmxlbmd0aC1jLGU9W10sZj0wO2Y8ZDtmKyspZVtmXT0wPGI/YS5EKGYrYyk+Pj5ifGEuRChmK2MrMSk8PDMyLWI6YS5EKGYrYyk7cmV0dXJuIG5ldyBUKGUsYS5oKX1PZC5wcm90b3R5cGUuY3JlYXRlV2ViQ2hhbm5lbD1PZC5wcm90b3R5cGUuZztRLnByb3RvdHlwZS5zZW5kPVEucHJvdG90eXBlLnU7US5wcm90b3R5cGUub3Blbj1RLnByb3RvdHlwZS5tO1EucHJvdG90eXBlLmNsb3NlPVEucHJvdG90eXBlLmNsb3NlO1NiLk5PX0VSUk9SPTA7U2IuVElNRU9VVD04O1NiLkhUVFBfRVJST1I9NjtUYi5DT01QTEVURT1cImNvbXBsZXRlXCI7V2IuRXZlbnRUeXBlPVhiO1hiLk9QRU49XCJhXCI7WGIuQ0xPU0U9XCJiXCI7WGIuRVJST1I9XCJjXCI7WGIuTUVTU0FHRT1cImRcIjtCLnByb3RvdHlwZS5saXN0ZW49Qi5wcm90b3R5cGUuTztQLnByb3RvdHlwZS5saXN0ZW5PbmNlPVAucHJvdG90eXBlLlA7UC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yPVAucHJvdG90eXBlLlNhO1AucHJvdG90eXBlLmdldExhc3RFcnJvckNvZGU9UC5wcm90b3R5cGUuSWE7UC5wcm90b3R5cGUuZ2V0U3RhdHVzPVAucHJvdG90eXBlLmRhO1AucHJvdG90eXBlLmdldFJlc3BvbnNlSnNvbj1QLnByb3RvdHlwZS5XYTtcblAucHJvdG90eXBlLmdldFJlc3BvbnNlVGV4dD1QLnByb3RvdHlwZS5qYTtQLnByb3RvdHlwZS5zZW5kPVAucHJvdG90eXBlLmhhO1AucHJvdG90eXBlLnNldFdpdGhDcmVkZW50aWFscz1QLnByb3RvdHlwZS5PYTtTLnByb3RvdHlwZS5kaWdlc3Q9Uy5wcm90b3R5cGUubDtTLnByb3RvdHlwZS5yZXNldD1TLnByb3RvdHlwZS5yZXNldDtTLnByb3RvdHlwZS51cGRhdGU9Uy5wcm90b3R5cGUuajtULnByb3RvdHlwZS5hZGQ9VC5wcm90b3R5cGUuYWRkO1QucHJvdG90eXBlLm11bHRpcGx5PVQucHJvdG90eXBlLlI7VC5wcm90b3R5cGUubW9kdWxvPVQucHJvdG90eXBlLmdiO1QucHJvdG90eXBlLmNvbXBhcmU9VC5wcm90b3R5cGUuWDtULnByb3RvdHlwZS50b051bWJlcj1ULnByb3RvdHlwZS5lYTtULnByb3RvdHlwZS50b1N0cmluZz1ULnByb3RvdHlwZS50b1N0cmluZztULnByb3RvdHlwZS5nZXRCaXRzPVQucHJvdG90eXBlLkQ7VC5mcm9tTnVtYmVyPVU7VC5mcm9tU3RyaW5nPVZkO1xudmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgT2R9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE1iKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVNiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVRiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1FO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3hiOjAsQWI6MSxCYjoyLFViOjMsWmI6NCxXYjo1LFhiOjYsVmI6NyxUYjo4LFliOjksUFJPWFk6MTAsTk9QUk9YWToxMSxSYjoxMixOYjoxMyxPYjoxNCxNYjoxNSxQYjoxNixRYjoxNyx0YjoxOCxzYjoxOSx1YjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1sZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPVdiO3ZhciBYaHJJbyA9IGVzbS5YaHJJbz1QO3ZhciBNZDUgPSBlc20uTWQ1PVM7dmFyIEludGVnZXIgPSBlc20uSW50ZWdlcj1UO1xuXG5leHBvcnQgeyBFcnJvckNvZGUsIEV2ZW50LCBFdmVudFR5cGUsIEZldGNoWG1sSHR0cEZhY3RvcnksIEludGVnZXIsIE1kNSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldFVBLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNTYWZhcmkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBJbnRlZ2VyLCBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQsIE1kNSB9IGZyb20gJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInO1xuXG5jb25zdCBiID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIFYge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy51aWQgPSB0O1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIFYuVU5BVVRIRU5USUNBVEVEID0gbmV3IFYobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuVi5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgVihcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIFYuRklSU1RfUEFSVFkgPSBuZXcgVihcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5WLk1PQ0tfVVNFUiA9IG5ldyBWKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IFMgPSBcIjkuMjIuMlwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgRCA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIEMoKSB7XG4gICAgcmV0dXJuIEQubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiB4KHQpIHtcbiAgICBELnNldExvZ0xldmVsKHQpO1xufVxuXG5mdW5jdGlvbiBOKHQsIC4uLmUpIHtcbiAgICBpZiAoRC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoJCk7XG4gICAgICAgIEQuZGVidWcoYEZpcmVzdG9yZSAoJHtTfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGsodCwgLi4uZSkge1xuICAgIGlmIChELmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcCgkKTtcbiAgICAgICAgRC5lcnJvcihgRmlyZXN0b3JlICgke1N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBNKHQsIC4uLmUpIHtcbiAgICBpZiAoRC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcCgkKTtcbiAgICAgICAgRC53YXJuKGBGaXJlc3RvcmUgKCR7U30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiAkKHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGUgPSB0LCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqIEZvcm1hdHMgYW4gb2JqZWN0IGFzIGEgSlNPTiBzdHJpbmcsIHN1aXRhYmxlIGZvciBsb2dnaW5nLiAqL1xuICAgIHZhciBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIE8odCA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgZSA9IGBGSVJFU1RPUkUgKCR7U30pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyB0O1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IGsoZSksIG5ldyBFcnJvcihlKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBGKHQsIGUpIHtcbiAgICB0IHx8IE8oKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gQih0LCBlKSB7XG4gICAgdCB8fCBPKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBMKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgcSA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgVSBleHRlbmRzIEZpcmViYXNlRXJyb3Ige1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tlbmQgZXJyb3IgY29kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlcnJvci5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIGN1c3RvbSBlcnJvciBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLmNvZGUgPSB0LCB0aGlzLm1lc3NhZ2UgPSBlLCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgSyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gdCwgdGhpcy5yZWplY3QgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBHIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJlYXJlciAke3R9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBRIHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShWLlVOQVVUSEVOVElDQVRFRCkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyByZXR1cm5zIGEgY29uc3RhbnQgdG9rZW4uIFVzZWQgZm9yXG4gKiBlbXVsYXRvciB0b2tlbiBtb2NraW5nLlxuICovIGNsYXNzIGoge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IGUsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyB6IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudCA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBWLlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmkgPSAwLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5pO1xuICAgICAgICAvLyBBIGNoYW5nZSBsaXN0ZW5lciB0aGF0IHByZXZlbnRzIGRvdWJsZS1maXJpbmcgZm9yIHRoZSBzYW1lIHRva2VuIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdCA9PiB0aGlzLmkgIT09IG4gPyAobiA9IHRoaXMuaSwgZSh0KSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgLy8gQSBwcm9taXNlIHRoYXQgY2FuIGJlIHdhaXRlZCBvbiB0byBibG9jayBvbiB0aGUgbmV4dCB0b2tlbiBjaGFuZ2UuXG4gICAgICAgIC8vIFRoaXMgcHJvbWlzZSBpcyByZS1jcmVhdGVkIGFmdGVyIGVhY2ggY2hhbmdlLlxuICAgICAgICAgICAgICAgIGxldCBpID0gbmV3IEs7XG4gICAgICAgIHRoaXMubyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaSsrLCB0aGlzLmN1cnJlbnRVc2VyID0gdGhpcy51KCksIGkucmVzb2x2ZSgpLCBpID0gbmV3IEssIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gcyh0aGlzLmN1cnJlbnRVc2VyKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGk7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBlLnByb21pc2UsIGF3YWl0IHModGhpcy5jdXJyZW50VXNlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIG8gPSB0ID0+IHtcbiAgICAgICAgICAgIE4oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gdCwgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIFxuICAgICAgICAgICAgcigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnQub25Jbml0KCh0ID0+IG8odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBdXRoIHJpZ2h0IGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yayBiZWZvcmUgd2VcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc3RhcnQgdXAgaW4gdW5hdXRoZW50aWNhdGVkIG1vZGUuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudC5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbyh0KSA6IChcbiAgICAgICAgICAgICAgICAvLyBJZiBhdXRoIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aCBgbnVsbGAgdXNlclxuICAgICAgICAgICAgICAgIE4oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBub3QgeWV0IGRldGVjdGVkXCIpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBLKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCByKCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICAvLyBUYWtlIG5vdGUgb2YgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRva2VuQ291bnRlciBzbyB0aGF0IHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGNhbiBmYWlsICh3aXRoIGFuIEFCT1JURUQgZXJyb3IpIGlmIHRoZXJlIGlzIGEgdG9rZW4gY2hhbmdlIHdoaWxlIHRoZVxuICAgICAgICAvLyByZXF1ZXN0IGlzIG91dHN0YW5kaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5pLCBlID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPyB0aGlzLmF1dGguZ2V0VG9rZW4oZSkudGhlbigoZSA9PiBcbiAgICAgICAgLy8gQ2FuY2VsIHRoZSByZXF1ZXN0IHNpbmNlIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIHRoZSByZXF1ZXN0IHdhc1xuICAgICAgICAvLyBvdXRzdGFuZGluZyBzbyB0aGUgcmVzcG9uc2UgaXMgcG90ZW50aWFsbHkgZm9yIGEgcHJldmlvdXMgdXNlciAod2hpY2hcbiAgICAgICAgLy8gdXNlciwgd2UgY2FuJ3QgYmUgc3VyZSkuXG4gICAgICAgIHRoaXMuaSAhPT0gdCA/IChOKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcImdldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS5cIiksIFxuICAgICAgICB0aGlzLmdldFRva2VuKCkpIDogZSA/IChGKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuYWNjZXNzVG9rZW4pLCBuZXcgRyhlLmFjY2Vzc1Rva2VuLCB0aGlzLmN1cnJlbnRVc2VyKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXV0aCAmJiB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cbiAgICB1KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcbiAgICAgICAgcmV0dXJuIEYobnVsbCA9PT0gdCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSwgbmV3IFYodCk7XG4gICAgfVxufVxuXG4vKlxuICogRmlyc3RQYXJ0eVRva2VuIHByb3ZpZGVzIGEgZnJlc2ggdG9rZW4gZWFjaCB0aW1lIGl0cyB2YWx1ZVxuICogaXMgcmVxdWVzdGVkLCBiZWNhdXNlIGlmIHRoZSB0b2tlbiBpcyB0b28gb2xkLCByZXF1ZXN0cyB3aWxsIGJlIHJlamVjdGVkLlxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XG4gKiByZWNvdmVyIGZyb20gdW5hdXRoZW50aWNhdGVkIGVycm9ycyAoc2VlIGIvMzMxNDc4MTggZm9yIGNvbnRleHQpLCBidXQgaXQnc1xuICogc2FmZXIgdG8ga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gYXMtaXMuXG4gKi8gY2xhc3MgVyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmggPSB0LCB0aGlzLmwgPSBlLCB0aGlzLm0gPSBuLCB0aGlzLnR5cGUgPSBcIkZpcnN0UGFydHlcIiwgdGhpcy51c2VyID0gVi5GSVJTVF9QQVJUWSwgXG4gICAgICAgIHRoaXMuZyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gYXV0aG9yaXphdGlvbiB0b2tlbiwgdXNpbmcgYSBwcm92aWRlZCBmYWN0b3J5IGZ1bmN0aW9uLCBvciByZXR1cm5cbiAgICAgKiBudWxsLlxuICAgICAqLyAgICBwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tID8gdGhpcy5tKCkgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgaGVhZGVycygpIHtcbiAgICAgICAgdGhpcy5nLnNldChcIlgtR29vZy1BdXRoVXNlclwiLCB0aGlzLmgpO1xuICAgICAgICAvLyBVc2UgYXJyYXkgbm90YXRpb24gdG8gcHJldmVudCBtaW5pZmljYXRpb25cbiAgICAgICAgY29uc3QgdCA9IHRoaXMucCgpO1xuICAgICAgICByZXR1cm4gdCAmJiB0aGlzLmcuc2V0KFwiQXV0aG9yaXphdGlvblwiLCB0KSwgdGhpcy5sICYmIHRoaXMuZy5zZXQoXCJYLUdvb2ctSWFtLUF1dGhvcml6YXRpb24tVG9rZW5cIiwgdGhpcy5sKSwgXG4gICAgICAgIHRoaXMuZztcbiAgICB9XG59XG5cbi8qXG4gKiBQcm92aWRlcyB1c2VyIGNyZWRlbnRpYWxzIHJlcXVpcmVkIGZvciB0aGUgRmlyZXN0b3JlIEphdmFTY3JpcHQgU0RLXG4gKiB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIsIHVzaW5nIHRlY2huaXF1ZSB0aGF0IGlzIG9ubHkgYXZhaWxhYmxlXG4gKiB0byBhcHBsaWNhdGlvbnMgaG9zdGVkIGJ5IEdvb2dsZS5cbiAqLyBjbGFzcyBIIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuaCA9IHQsIHRoaXMubCA9IGUsIHRoaXMubSA9IG47XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBXKHRoaXMuaCwgdGhpcy5sLCB0aGlzLm0pKTtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1aWQuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShWLkZJUlNUX1BBUlRZKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbn1cblxuY2xhc3MgSiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdCwgdGhpcy50eXBlID0gXCJBcHBDaGVja1wiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0ICYmIHQubGVuZ3RoID4gMCAmJiB0aGlzLmhlYWRlcnMuc2V0KFwieC1maXJlYmFzZS1hcHBjaGVja1wiLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbmNsYXNzIFkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5JID0gdCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA9IG51bGwsIHRoaXMuVCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPSB0LmVycm9yICYmIE4oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgRXJyb3IgZ2V0dGluZyBBcHAgQ2hlY2sgdG9rZW47IHVzaW5nIHBsYWNlaG9sZGVyIHRva2VuIGluc3RlYWQuIEVycm9yOiAke3QuZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRva2VuICE9PSB0aGlzLlQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5UID0gdC50b2tlbiwgTihcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBSZWNlaXZlZCAke24gPyBcIm5ld1wiIDogXCJleGlzdGluZ1wifSB0b2tlbi5gKSwgXG4gICAgICAgICAgICBuID8gZSh0LnRva2VuKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm8gPSBlID0+IHtcbiAgICAgICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gbihlKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzID0gdCA9PiB7XG4gICAgICAgICAgICBOKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBkZXRlY3RlZFwiKSwgdGhpcy5hcHBDaGVjayA9IHQsIHRoaXMuYXBwQ2hlY2suYWRkVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLkkub25Jbml0KCh0ID0+IHModCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBcHBDaGVjayBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkkuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IHModCkgOiBcbiAgICAgICAgICAgICAgICAvLyBJZiBBcHBDaGVjayBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGhvdXQgaXQuXG4gICAgICAgICAgICAgICAgTihcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgbm90IHlldCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA/IHRoaXMuYXBwQ2hlY2suZ2V0VG9rZW4odCkudGhlbigodCA9PiB0ID8gKEYoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50b2tlbiksIFxuICAgICAgICB0aGlzLlQgPSB0LnRva2VuLCBuZXcgSih0LnRva2VuKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2sgJiYgdGhpcy5hcHBDaGVjay5yZW1vdmVUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIEFwcENoZWNrIHRva2VuIHByb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIFgge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBKKFwiXCIpKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7fVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBCdWlsZHMgYSBDcmVkZW50aWFsc1Byb3ZpZGVyIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZlxuICogdGhlIGNyZWRlbnRpYWxzIHBhc3NlZCBpbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGBuQnl0ZXNgIG9mIHJhbmRvbSBieXRlcy5cbiAqXG4gKiBJZiBgbkJ5dGVzIDwgMGAgLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZnVuY3Rpb24gWih0KSB7XG4gICAgLy8gUG9seWZpbGxzIGZvciBJRSBhbmQgV2ViV29ya2VyIGJ5IHVzaW5nIGBzZWxmYCBhbmQgYG1zQ3J5cHRvYCB3aGVuIGBjcnlwdG9gIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgY29uc3QgZSA9IFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygc2VsZiAmJiAoc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0byksIG4gPSBuZXcgVWludDhBcnJheSh0KTtcbiAgICBpZiAoZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuZ2V0UmFuZG9tVmFsdWVzKSBlLmdldFJhbmRvbVZhbHVlcyhuKTsgZWxzZSBcbiAgICAvLyBGYWxscyBiYWNrIHRvIE1hdGgucmFuZG9tXG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0OyBlKyspIG5bZV0gPSBNYXRoLmZsb29yKDI1NiAqIE1hdGgucmFuZG9tKCkpO1xuICAgIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB0dCB7XG4gICAgc3RhdGljIEEoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IHQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIGUgPSBNYXRoLmZsb29yKDI1NiAvIHQubGVuZ3RoKSAqIHQubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gWig0MCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyArK2kpIFxuICAgICAgICAgICAgLy8gT25seSBhY2NlcHQgdmFsdWVzIHRoYXQgYXJlIFswLCBtYXhNdWx0aXBsZSksIHRoaXMgZW5zdXJlcyB0aGV5IGNhblxuICAgICAgICAgICAgLy8gYmUgZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyc2AgdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIG4ubGVuZ3RoIDwgMjAgJiYgc1tpXSA8IGUgJiYgKG4gKz0gdC5jaGFyQXQoc1tpXSAlIHQubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5mdW5jdGlvbiBldCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPCBlID8gLTEgOiB0ID4gZSA/IDEgOiAwO1xufVxuXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi8gZnVuY3Rpb24gbnQodCwgZSwgbikge1xuICAgIHJldHVybiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGggJiYgdC5ldmVyeSgoKHQsIHMpID0+IG4odCwgZVtzXSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gc3QodCkge1xuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXG4gICAgcmV0dXJuIHQgKyBcIlxcMFwiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGVhcmxpZXN0IGRhdGUgc3VwcG9ydGVkIGJ5IEZpcmVzdG9yZSB0aW1lc3RhbXBzICgwMDAxLTAxLTAxVDAwOjAwOjAwWikuXG4vKipcbiAqIEEgYFRpbWVzdGFtcGAgcmVwcmVzZW50cyBhIHBvaW50IGluIHRpbWUgaW5kZXBlbmRlbnQgb2YgYW55IHRpbWUgem9uZSBvclxuICogY2FsZW5kYXIsIHJlcHJlc2VudGVkIGFzIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0IG5hbm9zZWNvbmRcbiAqIHJlc29sdXRpb24gaW4gVVRDIEVwb2NoIHRpbWUuXG4gKlxuICogSXQgaXMgZW5jb2RlZCB1c2luZyB0aGUgUHJvbGVwdGljIEdyZWdvcmlhbiBDYWxlbmRhciB3aGljaCBleHRlbmRzIHRoZVxuICogR3JlZ29yaWFuIGNhbGVuZGFyIGJhY2t3YXJkcyB0byB5ZWFyIG9uZS4gSXQgaXMgZW5jb2RlZCBhc3N1bWluZyBhbGwgbWludXRlc1xuICogYXJlIDYwIHNlY29uZHMgbG9uZywgaS5lLiBsZWFwIHNlY29uZHMgYXJlIFwic21lYXJlZFwiIHNvIHRoYXQgbm8gbGVhcCBzZWNvbmRcbiAqIHRhYmxlIGlzIG5lZWRlZCBmb3IgaW50ZXJwcmV0YXRpb24uIFJhbmdlIGlzIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAqIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi5cbiAqXG4gKiBGb3IgZXhhbXBsZXMgYW5kIGZ1cnRoZXIgc3BlY2lmaWNhdGlvbnMsIHJlZmVyIHRvIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvcHJvdG9idWYvYmxvYi9tYXN0ZXIvc3JjL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG8gfCBUaW1lc3RhbXAgZGVmaW5pdGlvbn0uXG4gKi9cbmNsYXNzIGl0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICAgICAqICAgICA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG5hbm9zZWNvbmRzIC0gVGhlIG5vbi1uZWdhdGl2ZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZFxuICAgICAqICAgICByZXNvbHV0aW9uLiBOZWdhdGl2ZSBzZWNvbmQgdmFsdWVzIHdpdGggZnJhY3Rpb25zIG11c3Qgc3RpbGwgaGF2ZVxuICAgICAqICAgICBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogICAgIGZyb20gMCB0byA5OTksOTk5LDk5OSBpbmNsdXNpdmUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IHQsIHRoaXMubmFub3NlY29uZHMgPSBlLCBlIDwgMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmIChlID49IDFlOSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmICh0IDwgLTYyMTM1NTk2ODAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxuICAgICAgICAgICAgICAgIGlmICh0ID49IDI1MzQwMjMwMDgwMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgd2l0aCB0aGUgY3VycmVudCBkYXRlLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHRpbWVzdGFtcCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIGl0LmZyb21NaWxsaXMoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGluaXRpYWxpemUgdGhlIGBUaW1lc3RhbXBgIGZyb20uXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBmcm9tRGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBpdC5mcm9tTWlsbGlzKHQuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodCAvIDFlMyksIG4gPSBNYXRoLmZsb29yKDFlNiAqICh0IC0gMWUzICogZSkpO1xuICAgICAgICByZXR1cm4gbmV3IGl0KGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcbiAgICB9XG4gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgPT09IHQuc2Vjb25kcyA/IGV0KHRoaXMubmFub3NlY29uZHMsIHQubmFub3NlY29uZHMpIDogZXQodGhpcy5zZWNvbmRzLCB0LnNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0LnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiB0Lm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlRpbWVzdGFtcChzZWNvbmRzPVwiICsgdGhpcy5zZWNvbmRzICsgXCIsIG5hbm9zZWNvbmRzPVwiICsgdGhpcy5uYW5vc2Vjb25kcyArIFwiKVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIG5hbm9zZWNvbmRzOiB0aGlzLm5hbm9zZWNvbmRzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcgdGhhdCBtYXRjaGVzXG4gICAgICAgIC8vIHRoZSBleHBlY3RlZCBvcmRlcmluZy4gVGhlIDxzZWNvbmRzPiB0cmFuc2xhdGlvbiBpcyBkb25lIHRvIGF2b2lkIGhhdmluZ1xuICAgICAgICAvLyBhIGxlYWRpbmcgbmVnYXRpdmUgc2lnbiAoaS5lLiBhIGxlYWRpbmcgJy0nIGNoYXJhY3RlcikgaW4gaXRzIHN0cmluZ1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiwgd2hpY2ggd291bGQgYWZmZWN0IGl0cyBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc2Vjb25kcyAtIC02MjEzNTU5NjgwMDtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHQpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi8gY2xhc3MgcnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRpbWVzdGFtcCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQodCk7XG4gICAgfVxuICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQobmV3IGl0KDAsIDApKTtcbiAgICB9XG4gICAgc3RhdGljIG1heCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBydChuZXcgaXQoMjUzNDAyMzAwNzk5LCA5OTk5OTk5OTkpKTtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8odC50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwodC50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovICAgIHRvTWljcm9zZWNvbmRzKCkge1xuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cbiAgICAgICAgcmV0dXJuIDFlNiAqIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDFlMztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlNuYXBzaG90VmVyc2lvbihcIiArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgdG9UaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cbiAqL1xuY2xhc3Mgb3Qge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdm9pZCAwID09PSBlID8gZSA9IDAgOiBlID4gdC5sZW5ndGggJiYgTygpLCB2b2lkIDAgPT09IG4gPyBuID0gdC5sZW5ndGggLSBlIDogbiA+IHQubGVuZ3RoIC0gZSAmJiBPKCksIFxuICAgICAgICB0aGlzLnNlZ21lbnRzID0gdCwgdGhpcy5vZmZzZXQgPSBlLCB0aGlzLmxlbiA9IG47XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbjtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiAwID09PSBvdC5jb21wYXJhdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBjaGlsZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG90ID8gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0KTtcbiAgICAgICAgfSkpIDogZS5wdXNoKHQpLCB0aGlzLmNvbnN0cnVjdChlKTtcbiAgICB9XG4gICAgLyoqIFRoZSBpbmRleCBvZiBvbmUgcGFzdCB0aGUgbGFzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiAqLyAgICBsaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIHBvcEZpcnN0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB2b2lkIDAgPT09IHQgPyAxIDogdCwgdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyB0LCB0aGlzLmxlbmd0aCAtIHQpO1xuICAgIH1cbiAgICBwb3BMYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGZpcnN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXRdO1xuICAgIH1cbiAgICBsYXN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgdF07XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgaXNQcmVmaXhPZih0KSB7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA8IHRoaXMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlzSW1tZWRpYXRlUGFyZW50T2YodCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggKyAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IHRoaXMub2Zmc2V0LCBuID0gdGhpcy5saW1pdCgpOyBlIDwgbjsgZSsrKSB0KHRoaXMuc2VnbWVudHNbZV0pO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTWF0aC5taW4odC5sZW5ndGgsIGUubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBuOyBzKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldChzKSwgaSA9IGUuZ2V0KHMpO1xuICAgICAgICAgICAgaWYgKG4gPCBpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAobiA+IGkpIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCA8IGUubGVuZ3RoID8gLTEgOiB0Lmxlbmd0aCA+IGUubGVuZ3RoID8gMSA6IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxuICogd2l0aGluIEZpcmVzdG9yZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyB1dCBleHRlbmRzIG90IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IHV0KHQsIGUsIG4pO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVzb3VyY2UgcGF0aCBmcm9tIHRoZSBnaXZlbiBzbGFzaC1kZWxpbWl0ZWQgc3RyaW5nLiBJZiBtdWx0aXBsZVxuICAgICAqIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQsIGFsbCBjb21wb25lbnRzIGFyZSBjb21iaW5lZC4gTGVhZGluZyBhbmQgdHJhaWxpbmdcbiAgICAgKiBzbGFzaGVzIGZyb20gYWxsIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU3RyaW5nKC4uLnQpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkge1xuICAgICAgICAgICAgaWYgKG4uaW5kZXhPZihcIi8vXCIpID49IDApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgc2VnbWVudCAoJHtufSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5gKTtcbiAgICAgICAgICAgIC8vIFN0cmlwIGxlYWRpbmcgYW5kIHRyYWxpbmcgc2xhc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCguLi5uLnNwbGl0KFwiL1wiKS5maWx0ZXIoKHQgPT4gdC5sZW5ndGggPiAwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdXQoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdXQoW10pO1xuICAgIH1cbn1cblxuY29uc3QgY3QgPSAvXltfYS16QS1aXVtfYS16QS1aMC05XSokLztcblxuLyoqXG4gKiBBIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyBzdWItb2JqZWN0cyB3aXRoaW4gYSBkb2N1bWVudC5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIGF0IGV4dGVuZHMgb3Qge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgYXQodCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyaW5nIGNvdWxkIGJlIHVzZWQgYXMgYSBzZWdtZW50IGluIGEgZmllbGQgcGF0aFxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXG4gICAgICovICAgIHN0YXRpYyBpc1ZhbGlkSWRlbnRpZmllcih0KSB7XG4gICAgICAgIHJldHVybiBjdC50ZXN0KHQpO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoKHQgPT4gKHQgPSB0LnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9gL2csIFwiXFxcXGBcIiksIFxuICAgICAgICBhdC5pc1ZhbGlkSWRlbnRpZmllcih0KSB8fCAodCA9IFwiYFwiICsgdCArIFwiYFwiKSwgdCkpKS5qb2luKFwiLlwiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgaXNLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMubGVuZ3RoICYmIFwiX19uYW1lX19cIiA9PT0gdGhpcy5nZXQoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCBkZXNpZ25hdGluZyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIHN0YXRpYyBrZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChbIFwiX19uYW1lX19cIiBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgZmllbGQgc3RyaW5nIGZyb20gdGhlIGdpdmVuIHNlcnZlci1mb3JtYXR0ZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXG4gICAgICogLSBFbXB0eSBzZWdtZW50cyB3aXRoaW4gdGhlIHN0cmluZyAoZS5nLiBpZiB0aGVyZSBhcmUgdHdvIGNvbnNlY3V0aXZlXG4gICAgICogICBzZXBhcmF0b3JzKSBhcmUgbm90IGFsbG93ZWQuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzcyNDQxNTcpOiB3ZSBzaG91bGQgbWFrZSB0aGlzIG1vcmUgc3RyaWN0LiBSaWdodCBub3csIGl0IGFsbG93c1xuICAgICAqIG5vbi1pZGVudGlmaWVyIHBhdGggY29tcG9uZW50cywgZXZlbiBpZiB0aGV5IGFyZW4ndCBlc2NhcGVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlcnZlckZvcm1hdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBcIlwiLCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2ApO1xuICAgICAgICAgICAgZS5wdXNoKG4pLCBuID0gXCJcIjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgZm9yICg7cyA8IHQubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0W3NdO1xuICAgICAgICAgICAgaWYgKFwiXFxcXFwiID09PSBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMgKyAxID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRbcyArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChcIlxcXFxcIiAhPT0gZSAmJiBcIi5cIiAhPT0gZSAmJiBcImBcIiAhPT0gZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIGludmFsaWQgZXNjYXBlIHNlcXVlbmNlOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIG4gKz0gZSwgcyArPSAyO1xuICAgICAgICAgICAgfSBlbHNlIFwiYFwiID09PSBlID8gKHIgPSAhciwgcysrKSA6IFwiLlwiICE9PSBlIHx8IHIgPyAobiArPSBlLCBzKyspIDogKGkoKSwgcysrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSgpLCByKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVW50ZXJtaW5hdGVkIGAgaW4gcGF0aDogXCIgKyB0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChbXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBodCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhdGgodCkge1xuICAgICAgICByZXR1cm4gbmV3IGh0KHV0LmZyb21TdHJpbmcodCkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IGh0KHV0LmZyb21TdHJpbmcodCkucG9wRmlyc3QoNSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgaHQodXQuZW1wdHlQYXRoKCkpO1xuICAgIH1cbiAgICBnZXQgY29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKS5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi8gICAgaGFzQ29sbGVjdGlvbklkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgKGkuZS4gdGhlIG5hbWUgb2YgdGhlIHBhcmVudCBjb2xsZWN0aW9uKSBmb3IgdGhpcyBrZXkuICovICAgIGdldENvbGxlY3Rpb25Hcm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgZnVsbHkgcXVhbGlmaWVkIHBhdGggdG8gdGhlIHBhcmVudCBjb2xsZWN0aW9uLiAqLyAgICBnZXRDb2xsZWN0aW9uUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5wb3BMYXN0KCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiAwID09PSB1dC5jb21wYXJhdG9yKHRoaXMucGF0aCwgdC5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICByZXR1cm4gdXQuY29tcGFyYXRvcih0LnBhdGgsIGUucGF0aCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0RvY3VtZW50S2V5KHQpIHtcbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoICUgMiA9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB3aXRoIHRoZSBnaXZlbiBzZWdtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWdtZW50cyAtIFRoZSBzZWdtZW50cyBvZiB0aGUgcGF0aCB0byB0aGUgZG9jdW1lbnRcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlZ21lbnRzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBodChuZXcgdXQodC5zbGljZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgaW5pdGlhbCBtdXRhdGlvbiBiYXRjaCBpZCBmb3IgZWFjaCBpbmRleC4gR2V0cyB1cGRhdGVkIGR1cmluZyBpbmRleFxuICogYmFja2ZpbGwuXG4gKi9cbi8qKlxuICogQW4gaW5kZXggZGVmaW5pdGlvbiBmb3IgZmllbGQgaW5kZXhlcyBpbiBGaXJlc3RvcmUuXG4gKlxuICogRXZlcnkgaW5kZXggaXMgYXNzb2NpYXRlZCB3aXRoIGEgY29sbGVjdGlvbi4gVGhlIGRlZmluaXRpb24gY29udGFpbnMgYSBsaXN0XG4gKiBvZiBmaWVsZHMgYW5kIHRoZWlyIGluZGV4IGtpbmQgKHdoaWNoIGNhbiBiZSBgQVNDRU5ESU5HYCwgYERFU0NFTkRJTkdgIG9yXG4gKiBgQ09OVEFJTlNgIGZvciBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgcXVlcmllcykuXG4gKlxuICogVW5saWtlIHRoZSBiYWNrZW5kLCB0aGUgU0RLIGRvZXMgbm90IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb2xsZWN0aW9uIG9yXG4gKiBjb2xsZWN0aW9uIGdyb3VwLXNjb3BlZCBpbmRpY2VzLiBFdmVyeSBpbmRleCBjYW4gYmUgdXNlZCBmb3IgYm90aCBzaW5nbGVcbiAqIGNvbGxlY3Rpb24gYW5kIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcy5cbiAqL1xuY2xhc3MgbHQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBJRC4gUmV0dXJucyAtMSBpZiB0aGUgaW5kZXggSUQgaXMgbm90IGF2YWlsYWJsZSAoZS5nLiB0aGUgaW5kZXhcbiAgICAgKiBoYXMgbm90IHlldCBiZWVuIHBlcnNpc3RlZCkuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uIElEIHRoaXMgaW5kZXggYXBwbGllcyB0by4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGZpZWxkIHNlZ21lbnRzIGZvciB0aGlzIGluZGV4LiAqL1xuICAgIG4sIFxuICAgIC8qKiBTaG93cyBob3cgdXAtdG8tZGF0ZSB0aGUgaW5kZXggaXMgZm9yIHRoZSBjdXJyZW50IHVzZXIuICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmluZGV4SWQgPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZmllbGRzID0gbiwgdGhpcy5pbmRleFN0YXRlID0gcztcbiAgICB9XG59XG5cbi8qKiBBbiBJRCBmb3IgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGFkZGVkIHRvIHBlcnNpc3RlbmNlLiAgKi9cbi8qKiBSZXR1cm5zIHRoZSBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgc2VnbWVudCBmb3IgdGhpcyBpbmRleC4gKi9cbmZ1bmN0aW9uIGZ0KHQpIHtcbiAgICByZXR1cm4gdC5maWVsZHMuZmluZCgodCA9PiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyA9PT0gdC5raW5kKSk7XG59XG5cbi8qKiBSZXR1cm5zIGFsbCBkaXJlY3Rpb25hbCAoYXNjZW5kaW5nL2Rlc2NlbmRpbmcpIHNlZ21lbnRzIGZvciB0aGlzIGluZGV4LiAqLyBmdW5jdGlvbiBkdCh0KSB7XG4gICAgcmV0dXJuIHQuZmllbGRzLmZpbHRlcigodCA9PiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyAhPT0gdC5raW5kKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgb3JkZXIgb2YgdGhlIGRvY3VtZW50IGtleSBjb21wb25lbnQgZm9yIHRoZSBnaXZlbiBpbmRleC5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIENvbXBhcmVzIGluZGV4ZXMgYnkgY29sbGVjdGlvbiBncm91cCBhbmQgc2VnbWVudHMuIElnbm9yZXMgdXBkYXRlIHRpbWUgYW5kXG4gKiBpbmRleCBJRC5cbiAqL1xuZnVuY3Rpb24gd3QodCwgZSkge1xuICAgIGxldCBuID0gZXQodC5jb2xsZWN0aW9uR3JvdXAsIGUuY29sbGVjdGlvbkdyb3VwKTtcbiAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgZm9yIChsZXQgcyA9IDA7IHMgPCBNYXRoLm1pbih0LmZpZWxkcy5sZW5ndGgsIGUuZmllbGRzLmxlbmd0aCk7ICsrcykgaWYgKG4gPSBtdCh0LmZpZWxkc1tzXSwgZS5maWVsZHNbc10pLCBcbiAgICAwICE9PSBuKSByZXR1cm4gbjtcbiAgICByZXR1cm4gZXQodC5maWVsZHMubGVuZ3RoLCBlLmZpZWxkcy5sZW5ndGgpO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmaWVsZCBpbmRleCAqLyBsdC5VTktOT1dOX0lEID0gLTE7XG5cbi8qKiBBbiBpbmRleCBjb21wb25lbnQgY29uc2lzdGluZyBvZiBmaWVsZCBwYXRoIGFuZCBpbmRleCB0eXBlLiAgKi9cbmNsYXNzIF90IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIGZpZWxkIHBhdGggb2YgdGhlIGNvbXBvbmVudC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGZpZWxkcyBzb3J0aW5nIG9yZGVyLiAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5maWVsZFBhdGggPSB0LCB0aGlzLmtpbmQgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbXQodCwgZSkge1xuICAgIGNvbnN0IG4gPSBhdC5jb21wYXJhdG9yKHQuZmllbGRQYXRoLCBlLmZpZWxkUGF0aCk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogZXQodC5raW5kLCBlLmtpbmQpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgXCJoaWdoIHdhdGVyIG1hcmtcIiB0aGF0IGluZGljYXRlcyBob3cgdXBkYXRlZCB0aGUgSW5kZXggaXMgZm9yIHRoZVxuICogY3VycmVudCB1c2VyLlxuICovIGNsYXNzIGd0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hlbiB0aGUgaW5kZXggd2FzIGxhc3QgdXBkYXRlZCAocmVsYXRpdmUgdG8gb3RoZXIgaW5kZXhlcykuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSB0aGUgbGF0ZXN0IGluZGV4ZWQgcmVhZCB0aW1lLCBkb2N1bWVudCBhbmQgYmF0Y2ggaWQuICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gdCwgdGhpcy5vZmZzZXQgPSBlO1xuICAgIH1cbiAgICAvKiogVGhlIHN0YXRlIG9mIGFuIGluZGV4IHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBiYWNrZmlsbGVkLiAqLyAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgZ3QoMCwgSXQubWluKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lIGhpZ2hlciB0aGFuXG4gKiBgcmVhZFRpbWVgLlxuICovIGZ1bmN0aW9uIHl0KHQsIGUpIHtcbiAgICAvLyBXZSB3YW50IHRvIGNyZWF0ZSBhbiBvZmZzZXQgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgd2l0aCBhIHJlYWQgdGltZVxuICAgIC8vIGdyZWF0ZXIgdGhhbiB0aGUgcHJvdmlkZWQgcmVhZCB0aW1lLiBUbyBkbyBzbywgd2UgdGVjaG5pY2FsbHkgbmVlZCB0b1xuICAgIC8vIGNyZWF0ZSBhbiBvZmZzZXQgZm9yIGAocmVhZFRpbWUsIE1BWF9ET0NVTUVOVF9LRVkpYC4gV2hpbGUgd2UgY291bGQgdXNlXG4gICAgLy8gVW5pY29kZSBjb2RlcG9pbnRzIHRvIGdlbmVyYXRlIE1BWF9ET0NVTUVOVF9LRVksIGl0IGlzIG11Y2ggZWFzaWVyIHRvIHVzZVxuICAgIC8vIGAocmVhZFRpbWUgKyAxLCBEb2N1bWVudEtleS5lbXB0eSgpKWAgc2luY2UgYD4gRG9jdW1lbnRLZXkuZW1wdHkoKWAgbWF0Y2hlc1xuICAgIC8vIGFsbCB2YWxpZCBkb2N1bWVudCBJRHMuXG4gICAgY29uc3QgbiA9IHQudG9UaW1lc3RhbXAoKS5zZWNvbmRzLCBzID0gdC50b1RpbWVzdGFtcCgpLm5hbm9zZWNvbmRzICsgMSwgaSA9IHJ0LmZyb21UaW1lc3RhbXAoMWU5ID09PSBzID8gbmV3IGl0KG4gKyAxLCAwKSA6IG5ldyBpdChuLCBzKSk7XG4gICAgcmV0dXJuIG5ldyBJdChpLCBodC5lbXB0eSgpLCBlKTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgb2Zmc2V0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gKi8gZnVuY3Rpb24gcHQodCkge1xuICAgIHJldHVybiBuZXcgSXQodC5yZWFkVGltZSwgdC5rZXksIC0xKTtcbn1cblxuLyoqXG4gKiBTdG9yZXMgdGhlIGxhdGVzdCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBJRCB0aGF0IHdlcmUgcHJvY2Vzc2VkIGZvciBhblxuICogaW5kZXguXG4gKi8gY2xhc3MgSXQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRlc3QgcmVhZCB0aW1lIHZlcnNpb24gdGhhdCBoYXMgYmVlbiBpbmRleGVkIGJ5IEZpcmVzdG9yZSBmb3IgdGhpc1xuICAgICAqIGZpZWxkIGluZGV4LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBrZXkgb2YgdGhlIGxhc3QgZG9jdW1lbnQgdGhhdCB3YXMgaW5kZXhlZCBmb3IgdGhpcyBxdWVyeS4gVXNlXG4gICAgICogYERvY3VtZW50S2V5LmVtcHR5KClgIGlmIG5vIGRvY3VtZW50IGhhcyBiZWVuIGluZGV4ZWQuXG4gICAgICovXG4gICAgZSwgXG4gICAgLypcbiAgICAgKiBUaGUgbGFyZ2VzdCBtdXRhdGlvbiBiYXRjaCBpZCB0aGF0J3MgYmVlbiBwcm9jZXNzZWQgYnkgRmlyZXN0b3JlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IHQsIHRoaXMuZG9jdW1lbnRLZXkgPSBlLCB0aGlzLmxhcmdlc3RCYXRjaElkID0gbjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYW4gb2Zmc2V0IHRoYXQgc29ydHMgYmVmb3JlIGFsbCByZWd1bGFyIG9mZnNldHMuICovICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgSXQocnQubWluKCksIGh0LmVtcHR5KCksIC0xKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYW4gb2Zmc2V0IHRoYXQgc29ydHMgYWZ0ZXIgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1heCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJdChydC5tYXgoKSwgaHQuZW1wdHkoKSwgLTEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVHQodCwgZSkge1xuICAgIGxldCBuID0gdC5yZWFkVGltZS5jb21wYXJlVG8oZS5yZWFkVGltZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBodC5jb21wYXJhdG9yKHQuZG9jdW1lbnRLZXksIGUuZG9jdW1lbnRLZXkpLCAwICE9PSBuID8gbiA6IGV0KHQubGFyZ2VzdEJhdGNoSWQsIGUubGFyZ2VzdEJhdGNoSWQpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgRXQgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcbiAqIHRyYW5zYWN0aW9uJ3Mgc2VxdWVuY2UgbnVtYmVycyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBvbkNvbW1pdHRlZCBsaXN0ZW5lcnMuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxuICogcGFzcyBpdCB0byB5b3VyIGNhbGxiYWNrLiBZb3UgdGhlbiBwYXNzIGl0IHRvIGFueSBtZXRob2QgdGhhdCBvcGVyYXRlc1xuICogb24gcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgQXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIGFkZE9uQ29tbWl0dGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2godCk7XG4gICAgfVxuICAgIHJhaXNlT25Db21taXR0ZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKCh0ID0+IHQoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcbiAqIG9wZXJhdGlvbiBmYWlscyBiZWNhdXNlIHRoZSBwcmltYXJ5IGxlYXNlIGhhcyBiZWVuIHRha2VuIGJ5IGFub3RoZXIgY2xpZW50LFxuICogd2UgaWdub3JlIHRoZSBlcnJvciAodGhlIHBlcnNpc3RlbmNlIGxheWVyIHdpbGwgaW1tZWRpYXRlbHkgY2FsbFxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xuICogYXJlIHJlLXRocm93bi5cbiAqXG4gKiBAcGFyYW0gZXJyIC0gQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHdlIHJlY292ZXJlZCwgb3IgdGhlIG9yaWdpbmFsIGVycm9yLlxuICovIGFzeW5jIGZ1bmN0aW9uIHZ0KHQpIHtcbiAgICBpZiAodC5jb2RlICE9PSBxLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5tZXNzYWdlICE9PSBFdCkgdGhyb3cgdDtcbiAgICBOKFwiTG9jYWxTdG9yZVwiLCBcIlVuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2VcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBlcnNpc3RlbmNlUHJvbWlzZSBpcyBlc3NlbnRpYWxseSBhIHJlLWltcGxlbWVudGF0aW9uIG9mIFByb21pc2UgZXhjZXB0XG4gKiBpdCBoYXMgYSAubmV4dCgpIG1ldGhvZCBpbnN0ZWFkIG9mIC50aGVuKCkgYW5kIC5uZXh0KCkgYW5kIC5jYXRjaCgpIGNhbGxiYWNrc1xuICogYXJlIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSByZXNvbHZlcyByYXRoZXIgdGhhblxuICogYXN5bmNocm9ub3VzbHkgKFByb21pc2UgaW1wbGVtZW50YXRpb25zIHVzZSBzZXRJbW1lZGlhdGUoKSBvciBzaW1pbGFyKS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBpbnRlcm9wZXJhdGUgd2l0aCBJbmRleGVkREIgd2hpY2ggd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBjb21taXQgdHJhbnNhY3Rpb25zIGlmIGNvbnRyb2wgaXMgcmV0dXJuZWQgdG8gdGhlIGV2ZW50IGxvb3Agd2l0aG91dFxuICogc3luY2hyb25vdXNseSBpbml0aWF0aW5nIGFub3RoZXIgb3BlcmF0aW9uIG9uIHRoZSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBOT1RFOiAudGhlbigpIGFuZCAuY2F0Y2goKSBvbmx5IGFsbG93IGEgc2luZ2xlIGNvbnN1bWVyLCB1bmxpa2Ugbm9ybWFsXG4gKiBQcm9taXNlcy5cbiAqLyBjbGFzcyBSdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsLCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsLCBcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cbiAgICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDAsIHRoaXMuZXJyb3IgPSB2b2lkIDAsIHRoaXMuaXNEb25lID0gITEsIFxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxuICAgICAgICAvLyBjaGFpbmluZy5cbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITEsIHQoKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5yZXN1bHQgPSB0LCB0aGlzLm5leHRDYWxsYmFjayAmJiBcbiAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXG4gICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrKHQpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5lcnJvciA9IHQsIHRoaXMuY2F0Y2hDYWxsYmFjayAmJiB0aGlzLmNhdGNoQ2FsbGJhY2sodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIG5leHQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkICYmIE8oKSwgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITAsIHRoaXMuaXNEb25lID8gdGhpcy5lcnJvciA/IHRoaXMud3JhcEZhaWx1cmUoZSwgdGhpcy5lcnJvcikgOiB0aGlzLndyYXBTdWNjZXNzKHQsIHRoaXMucmVzdWx0KSA6IG5ldyBSdCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwU3VjY2Vzcyh0LCBlKS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfSwgdGhpcy5jYXRjaENhbGxiYWNrID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwRmFpbHVyZShlLCB0KS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dCh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3cmFwVXNlckZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0KCk7XG4gICAgICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIFJ0ID8gZSA6IFJ0LnJlc29sdmUoZSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBSdC5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JhcFN1Y2Nlc3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogUnQucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgd3JhcEZhaWx1cmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogUnQucmVqZWN0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnQoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBlKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWplY3QodCkge1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgd2FpdEZvcihcbiAgICAvLyBBY2NlcHQgYWxsIFByb21pc2UgdHlwZXMgaW4gd2FpdEZvcigpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAwLCBpID0gMCwgciA9ICExO1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICArK3MsIHQubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICArK2ksIHIgJiYgaSA9PT0gcyAmJiBlKCk7XG4gICAgICAgICAgICAgICAgfSksICh0ID0+IG4odCkpKTtcbiAgICAgICAgICAgIH0pKSwgciA9ICEwLCBpID09PSBzICYmIGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxuICAgICAqIGJvb2xlYW4sIGltcGxlbWVudHMgYSBzaG9ydC1jaXJjdWl0aW5nIGBvcmAgYmV0d2VlbiB0aGUgcmVzdWx0cy4gUHJlZGljYXRlc1xuICAgICAqIHdpbGwgYmUgZXZhbHVhdGVkIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYHRydWVgLCB0aGVuIHN0b3AuIFRoZSBmaW5hbFxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxuICAgICAqLyAgICBzdGF0aWMgb3IodCkge1xuICAgICAgICBsZXQgZSA9IFJ0LnJlc29sdmUoITEpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUubmV4dCgodCA9PiB0ID8gUnQucmVzb2x2ZSh0KSA6IG4oKSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljIGZvckVhY2godCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuLnB1c2goZS5jYWxsKHRoaXMsIHQsIHMpKTtcbiAgICAgICAgfSkpLCB0aGlzLndhaXRGb3Iobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbmN1cnJlbnRseSBtYXAgYWxsIGFycmF5IGVsZW1lbnRzIHRocm91Z2ggYXN5bmNocm9ub3VzIGZ1bmN0aW9uLlxuICAgICAqLyAgICBzdGF0aWMgbWFwQXJyYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHQubGVuZ3RoLCByID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgdSA9IDA7IHUgPCBpOyB1KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gdTtcbiAgICAgICAgICAgICAgICBlKHRbY10pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICByW2NdID0gdCwgKytvLCBvID09PSBpICYmIG4ocik7XG4gICAgICAgICAgICAgICAgfSksICh0ID0+IHModCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSB0byByZWN1cnNpdmUgUGVyc2lzdGVuY2VQcm9taXNlIGNhbGxzLCB0aGF0IGF2b2lkc1xuICAgICAqIHBvdGVudGlhbCBtZW1vcnkgcHJvYmxlbXMgZnJvbSB1bmJvdW5kZWQgY2hhaW5zIG9mIHByb21pc2VzLlxuICAgICAqXG4gICAgICogVGhlIGBhY3Rpb25gIHdpbGwgYmUgY2FsbGVkIHJlcGVhdGVkbHkgd2hpbGUgYGNvbmRpdGlvbmAgaXMgdHJ1ZS5cbiAgICAgKi8gICAgc3RhdGljIGRvV2hpbGUodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAhMCA9PT0gdCgpID8gZSgpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSgpO1xuICAgICAgICAgICAgICAgIH0pLCBzKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIFB0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gdCwgdGhpcy50cmFuc2FjdGlvbiA9IGUsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnYgPSBuZXcgSywgdGhpcy50cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy52LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgZS5lcnJvciA/IHRoaXMudi5yZWplY3QobmV3IFN0KHQsIGUuZXJyb3IpKSA6IHRoaXMudi5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IGt0KGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIHRoaXMudi5yZWplY3QobmV3IFN0KHQsIG4pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIG9wZW4odCwgZSwgbiwgcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQdChlLCB0LnRyYW5zYWN0aW9uKHMsIG4pKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN0KGUsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBSKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52LnByb21pc2U7XG4gICAgfVxuICAgIGFib3J0KHQpIHtcbiAgICAgICAgdCAmJiB0aGlzLnYucmVqZWN0KHQpLCB0aGlzLmFib3J0ZWQgfHwgKE4oXCJTaW1wbGVEYlwiLCBcIkFib3J0aW5nIHRyYW5zYWN0aW9uOlwiLCB0ID8gdC5tZXNzYWdlIDogXCJDbGllbnQtaW5pdGlhdGVkIGFib3J0XCIpLCBcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gITAsIHRoaXMudHJhbnNhY3Rpb24uYWJvcnQoKSk7XG4gICAgfVxuICAgIFAoKSB7XG4gICAgICAgIC8vIElmIHRoZSBicm93c2VyIHN1cHBvcnRzIFYzIEluZGV4ZWREQiwgd2UgaW52b2tlIGNvbW1pdCgpIGV4cGxpY2l0bHkgdG9cbiAgICAgICAgLy8gc3BlZWQgdXAgaW5kZXggREIgcHJvY2Vzc2luZyBpZiB0aGUgZXZlbnQgbG9vcCByZW1haW5zIGJsb2Nrcy5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudHJhbnNhY3Rpb247XG4gICAgICAgIHRoaXMuYWJvcnRlZCB8fCBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQuY29tbWl0IHx8IHQuY29tbWl0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBTaW1wbGVEYlN0b3JlPEtleVR5cGUsIFZhbHVlVHlwZT4gZm9yIHRoZSBzcGVjaWZpZWQgc3RvcmUuIEFsbFxuICAgICAqIG9wZXJhdGlvbnMgcGVyZm9ybWVkIG9uIHRoZSBTaW1wbGVEYlN0b3JlIGhhcHBlbiB3aXRoaW4gdGhlIGNvbnRleHQgb2YgdGhpc1xuICAgICAqIHRyYW5zYWN0aW9uIGFuZCBpdCBjYW5ub3QgYmUgdXNlZCBhbnltb3JlIG9uY2UgdGhlIHRyYW5zYWN0aW9uIGlzXG4gICAgICogY29tcGxldGVkLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHdlIGNhbid0IGFjdHVhbGx5IGVuZm9yY2UgdGhhdCB0aGUgS2V5VHlwZSBhbmQgVmFsdWVUeXBlIGFyZVxuICAgICAqIGNvcnJlY3QsIGJ1dCB0aGV5IGFsbG93IHR5cGUgc2FmZXR5IHRocm91Z2ggdGhlIHJlc3Qgb2YgdGhlIGNvbnN1bWluZyBjb2RlLlxuICAgICAqLyAgICBzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHQpO1xuICAgICAgICByZXR1cm4gbmV3IEN0KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIEluZGV4ZWREYiB3aXRoIGEgc2ltcGxpZmllZCBpbnRlcmZhY2UgdGhhdCB1c2VzXG4gKiBQcm9taXNlLWxpa2UgcmV0dXJuIHZhbHVlcyB0byBjaGFpbiBvcGVyYXRpb25zLiBSZWFsIHByb21pc2VzIGNhbm5vdCBiZSB1c2VkXG4gKiBzaW5jZSAudGhlbigpIGNvbnRpbnVhdGlvbnMgYXJlIGV4ZWN1dGVkIGFzeW5jaHJvbm91c2x5IChlLmcuIHZpYVxuICogLnNldEltbWVkaWF0ZSksIHdoaWNoIHdvdWxkIGNhdXNlIEluZGV4ZWREQiB0byBlbmQgdGhlIHRyYW5zYWN0aW9uLlxuICogU2VlIFBlcnNpc3RlbmNlUHJvbWlzZSBmb3IgbW9yZSBkZXRhaWxzLlxuICovIGNsYXNzIGJ0IHtcbiAgICAvKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2ltcGxlRGIgd3JhcHBlciBmb3IgSW5kZXhlZERiIGRhdGFiYXNlIGBuYW1lYC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBgdmVyc2lvbmAgbXVzdCBub3QgYmUgYSBkb3duZ3JhZGUuIEluZGV4ZWREQiBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICogZG93bmdyYWRpbmcgdGhlIHNjaGVtYSB2ZXJzaW9uLiBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgYW55IHdheSB0byBkb1xuICAgICAqIHZlcnNpb25pbmcgb3V0c2lkZSBvZiBJbmRleGVkREIncyB2ZXJzaW9uaW5nIG1lY2hhbmlzbSwgYXMgb25seVxuICAgICAqIHZlcnNpb24tdXBncmFkZSB0cmFuc2FjdGlvbnMgYXJlIGFsbG93ZWQgdG8gZG8gdGhpbmdzIGxpa2UgY3JlYXRlXG4gICAgICogb2JqZWN0c3RvcmVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdCwgdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5WID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBidC5TKGdldFVBKCkpICYmIGsoXCJGaXJlc3RvcmUgcGVyc2lzdGVuY2Ugc3VmZmVycyBmcm9tIGEgYnVnIGluIGlPUyAxMi4yIFNhZmFyaSB0aGF0IG1heSBjYXVzZSB5b3VyIGFwcCB0byBzdG9wIHdvcmtpbmcuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLlwiKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi8gICAgc3RhdGljIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiBOKFwiU2ltcGxlRGJcIiwgXCJSZW1vdmluZyBkYXRhYmFzZTpcIiwgdCksIHh0KHdpbmRvdy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UodCkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBEKCkge1xuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKGJ0LkMoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZ2V0VUEoKSwgZSA9IGJ0LlModCksIG4gPSAwIDwgZSAmJiBlIDwgMTAsIHMgPSBidC5OKHQpLCBpID0gMCA8IHMgJiYgcyA8IDQuNTtcbiAgICAgICAgLy8gSUUgMTBcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjI7IFRyaWRlbnQvNi4wKSc7XG4gICAgICAgIC8vIElFIDExXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xuICAgICAgICAvLyBFZGdlXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLFxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcbiAgICAgICAgLy8gaU9TIFNhZmFyaTogRGlzYWJsZSBmb3IgdXNlcnMgcnVubmluZyBpT1MgdmVyc2lvbiA8IDEwLlxuICAgICAgICAgICAgICAgIHJldHVybiAhKHQuaW5kZXhPZihcIk1TSUUgXCIpID4gMCB8fCB0LmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IDAgfHwgdC5pbmRleE9mKFwiRWRnZS9cIikgPiAwIHx8IG4gfHwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYmFja2luZyBJbmRleGVkREIgc3RvcmUgaXMgdGhlIE5vZGUgSW5kZXhlZERCU2hpbVxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cbiAgICAgKi8gICAgc3RhdGljIEMoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKHQgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5rKTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi8gICAgc3RhdGljIE0odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5zdG9yZShlKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBpT1MgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIFModCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBOKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCIuXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqLyAgICBhc3luYyAkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIgfHwgKE4oXCJTaW1wbGVEYlwiLCBcIk9wZW5pbmcgZGF0YWJhc2U6XCIsIHRoaXMubmFtZSksIHRoaXMuZGIgPSBhd2FpdCBuZXcgUHJvbWlzZSgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSW52ZXN0aWdhdGUgYnJvd3NlciBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0luZGV4ZWREQl9BUEkvVXNpbmdfSW5kZXhlZERCXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxuICAgICAgICAgICAgLy8gZGlmZmVyZW50bHkuIFRoZXkgZXhwZWN0IHNldFZlcnNpb24sIGFzIGRlc2NyaWJlZCBoZXJlOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQlZlcnNpb25DaGFuZ2VSZXF1ZXN0L3NldFZlcnNpb25cbiAgICAgICAgICAgIGNvbnN0IHMgPSBpbmRleGVkREIub3Blbih0aGlzLm5hbWUsIHRoaXMudmVyc2lvbik7XG4gICAgICAgICAgICBzLm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgZShuKTtcbiAgICAgICAgICAgIH0sIHMub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIG4obmV3IFN0KHQsIFwiQ2Fubm90IHVwZ3JhZGUgSW5kZXhlZERCIHNjaGVtYSB3aGlsZSBhbm90aGVyIHRhYiBpcyBvcGVuLiBDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC5cIikpO1xuICAgICAgICAgICAgfSwgcy5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0LmVycm9yO1xuICAgICAgICAgICAgICAgIFwiVmVyc2lvbkVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgRmlyZXN0b3JlIFNESyB3YXMgcHJldmlvdXNseSB1c2VkIGFuZCBzbyB0aGUgcGVyc2lzdGVkIGRhdGEgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmVyc2lvbiBvZiB0aGUgU0RLIHlvdSBhcmUgbm93IHVzaW5nLiBUaGUgU0RLIHdpbGwgb3BlcmF0ZSB3aXRoIHBlcnNpc3RlbmNlIGRpc2FibGVkLiBJZiB5b3UgbmVlZCBwZXJzaXN0ZW5jZSwgcGxlYXNlIHJlLXVwZ3JhZGUgdG8gYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBTREsgb3IgZWxzZSBjbGVhciB0aGUgcGVyc2lzdGVkIEluZGV4ZWREQiBkYXRhIGZvciB5b3VyIGFwcCB0byBzdGFydCBmcmVzaC5cIikpIDogXCJJbnZhbGlkU3RhdGVFcnJvclwiID09PSBzLm5hbWUgPyBuKG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJVbmFibGUgdG8gb3BlbiBhbiBJbmRleGVkREIgY29ubmVjdGlvbi4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gcnVubmluZyBpbiBhIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbiBvbiBhIGJyb3dzZXIgd2hvc2UgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9ucyBkbyBub3Qgc3VwcG9ydCBJbmRleGVkREI6IFwiICsgcykpIDogbihuZXcgU3QodCwgcykpO1xuICAgICAgICAgICAgfSwgcy5vbnVwZ3JhZGVuZWVkZWQgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBOKFwiU2ltcGxlRGJcIiwgJ0RhdGFiYXNlIFwiJyArIHRoaXMubmFtZSArICdcIiByZXF1aXJlcyB1cGdyYWRlIGZyb20gdmVyc2lvbjonLCB0Lm9sZFZlcnNpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5WLk8oZSwgcy50cmFuc2FjdGlvbiwgdC5vbGRWZXJzaW9uLCB0aGlzLnZlcnNpb24pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgTihcIlNpbXBsZURiXCIsIFwiRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uIFwiICsgdGhpcy52ZXJzaW9uICsgXCIgY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpKSwgdGhpcy5GICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IHQgPT4gdGhpcy5GKHQpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgQih0KSB7XG4gICAgICAgIHRoaXMuRiA9IHQsIHRoaXMuZGIgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gZSA9PiB0KGUpKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuVHJhbnNhY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gXCJyZWFkb25seVwiID09PSBlO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICsrcjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYiA9IGF3YWl0IHRoaXMuJCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gUHQub3Blbih0aGlzLmRiLCB0LCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHIgPSBzKGUpLm5leHQoKHQgPT4gKGUuUCgpLCBcbiAgICAgICAgICAgICAgICB0KSkpLmNhdGNoKCh0ID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIGUuYWJvcnQodCksIFJ0LnJlamVjdCh0KSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiByLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgZS5SLCByO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LCBuID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IGUubmFtZSAmJiByIDwgMztcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE4oXCJTaW1wbGVEYlwiLCBcIlRyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOlwiLCBlLm1lc3NhZ2UsIFwiUmV0cnlpbmc6XCIsIG4pLCBcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCksICFuKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGIgJiYgdGhpcy5kYi5jbG9zZSgpLCB0aGlzLmRiID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cbiAqLyBjbGFzcyBWdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkwgPSB0LCB0aGlzLnEgPSAhMSwgdGhpcy5VID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGlzRG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucTtcbiAgICB9XG4gICAgZ2V0IEsoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlU7XG4gICAgfVxuICAgIHNldCBjdXJzb3IodCkge1xuICAgICAgICB0aGlzLkwgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLnEgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHNraXAgdG8gdGhhdCBuZXh0IGtleSwgd2hpY2ggY291bGQgYmVcbiAgICAgKiBhbiBpbmRleCBvciBhIHByaW1hcnkga2V5LlxuICAgICAqLyAgICBHKHQpIHtcbiAgICAgICAgdGhpcy5VID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB4dCh0aGlzLkwuZGVsZXRlKCkpO1xuICAgIH1cbn1cblxuLyoqIEFuIGVycm9yIHRoYXQgd3JhcHMgZXhjZXB0aW9ucyB0aGF0IHRocm93biBkdXJpbmcgSW5kZXhlZERCIGV4ZWN1dGlvbi4gKi8gY2xhc3MgU3QgZXh0ZW5kcyBVIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHEuVU5BVkFJTEFCTEUsIGBJbmRleGVkREIgdHJhbnNhY3Rpb24gJyR7dH0nIGZhaWxlZDogJHtlfWApLCB0aGlzLm5hbWUgPSBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKiBWZXJpZmllcyB3aGV0aGVyIGBlYCBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiAqLyBmdW5jdGlvbiBEdCh0KSB7XG4gICAgLy8gVXNlIG5hbWUgZXF1YWxpdHksIGFzIGluc3RhbmNlb2YgY2hlY2tzIG9uIGVycm9ycyBkb24ndCB3b3JrIHdpdGggZXJyb3JzXG4gICAgLy8gdGhhdCB3cmFwIG90aGVyIGVycm9ycy5cbiAgICByZXR1cm4gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCIgPT09IHQubmFtZTtcbn1cblxuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIElEQk9iamVjdFN0b3JlIHByb3ZpZGluZyBhbiBBUEkgdGhhdDpcbiAqXG4gKiAxKSBIYXMgZ2VuZXJpYyBLZXlUeXBlIC8gVmFsdWVUeXBlIHBhcmFtZXRlcnMgdG8gcHJvdmlkZSBzdHJvbmdseS10eXBlZFxuICogbWV0aG9kcyBmb3IgYWN0aW5nIGFnYWluc3QgdGhlIG9iamVjdCBzdG9yZS5cbiAqIDIpIERlYWxzIHdpdGggSW5kZXhlZERCJ3Mgb25zdWNjZXNzIC8gb25lcnJvciBldmVudCBjYWxsYmFja3MsIG1ha2luZyBldmVyeVxuICogbWV0aG9kIHJldHVybiBhIFBlcnNpc3RlbmNlUHJvbWlzZSBpbnN0ZWFkLlxuICogMykgUHJvdmlkZXMgYSBoaWdoZXItbGV2ZWwgQVBJIHRvIGF2b2lkIG5lZWRpbmcgdG8gZG8gZXhjZXNzaXZlIHdyYXBwaW5nIG9mXG4gKiBpbnRlcm1lZGlhdGUgSW5kZXhlZERCIHR5cGVzIChJREJDdXJzb3JXaXRoVmFsdWUsIGV0Yy4pXG4gKi8gY2xhc3MgQ3Qge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IHQ7XG4gICAgfVxuICAgIHB1dCh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlID8gKE4oXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIGUpLCBuID0gdGhpcy5zdG9yZS5wdXQoZSwgdCkpIDogKE4oXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIFwiPGF1dG8ta2V5PlwiLCB0KSwgXG4gICAgICAgIG4gPSB0aGlzLnN0b3JlLnB1dCh0KSksIHh0KG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IHZhbHVlIGludG8gYW4gT2JqZWN0IFN0b3JlIGFuZCByZXR1cm5zIHRoZSBuZXcga2V5LiBTaW1pbGFyIHRvXG4gICAgICogSW5kZXhlZERiJ3MgYGFkZCgpYCwgdGhpcyBtZXRob2Qgd2lsbCBmYWlsIG9uIHByaW1hcnkga2V5IGNvbGxpc2lvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgb2JqZWN0IHRvIHdyaXRlLlxuICAgICAqIEByZXR1cm5zIFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgTihcIlNpbXBsZURiXCIsIFwiQUREXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgdCk7XG4gICAgICAgIHJldHVybiB4dCh0aGlzLnN0b3JlLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IGZyb20gdGhlIHNwZWNpZmllZCBzdG9yZSwgb3IgbnVsbFxuICAgICAqIGlmIG5vIG9iamVjdCBleGlzdHMgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS5cbiAgICAgKlxuICAgICAqIEBrZXkgVGhlIGtleSBvZiB0aGUgb2JqZWN0IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyBUaGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgb3IgbnVsbCBpZiBubyBvYmplY3QgZXhpc3RzLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICAvLyBXZSdyZSBkb2luZyBhbiB1bnNhZmUgY2FzdCB0byBWYWx1ZVR5cGUuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB4dCh0aGlzLnN0b3JlLmdldCh0KSkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBub25leGlzdGVuY2UgdG8gbnVsbC5cbiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gbnVsbCksIE4oXCJTaW1wbGVEYlwiLCBcIkdFVFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIGUpLCBlKSkpO1xuICAgIH1cbiAgICBkZWxldGUodCkge1xuICAgICAgICBOKFwiU2ltcGxlRGJcIiwgXCJERUxFVEVcIiwgdGhpcy5zdG9yZS5uYW1lLCB0KTtcbiAgICAgICAgcmV0dXJuIHh0KHRoaXMuc3RvcmUuZGVsZXRlKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgd2UgZXZlciBuZWVkIG1vcmUgb2YgdGhlIGNvdW50IHZhcmlhbnRzLCB3ZSBjYW4gYWRkIG92ZXJsb2Fkcy4gRm9yIG5vdyxcbiAgICAgKiBhbGwgd2UgbmVlZCBpcyB0byBjb3VudCBldmVyeXRoaW5nIGluIGEgc3RvcmUuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgc3RvcmUuXG4gICAgICovICAgIGNvdW50KCkge1xuICAgICAgICBOKFwiU2ltcGxlRGJcIiwgXCJDT1VOVFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICByZXR1cm4geHQodGhpcy5zdG9yZS5jb3VudCgpKTtcbiAgICB9XG4gICAgaih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnModCwgZSk7XG4gICAgICAgIC8vIFVzZSBgZ2V0QWxsKClgIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIEluZGV4ZWREQiB2MywgYXMgaXQgaXMgcm91Z2hseVxuICAgICAgICAvLyAyMCUgZmFzdGVyLiBVbmZvcnR1bmF0ZWx5LCBnZXRBbGwoKSBkb2VzIG5vdCBzdXBwb3J0IGN1c3RvbSBpbmRpY2VzLlxuICAgICAgICAgICAgICAgIGlmIChuLmluZGV4IHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdGhpcy5zdG9yZS5nZXRBbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmN1cnNvcihuKSwgZSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuVyh0LCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlLnB1c2gobik7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnN0b3JlLmdldEFsbChuLnJhbmdlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnQoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG4odC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0sIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUodC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBmaXJzdCBgY291bnRgIGVsZW1lbnRzIGZyb20gdGhlIHByb3ZpZGVkIGluZGV4IHJhbmdlLiBMb2FkcyBhbGxcbiAgICAgKiBlbGVtZW50cyBpZiBubyBsaW1pdCBpcyBwcm92aWRlZC5cbiAgICAgKi8gICAgSCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmdldEFsbCh0LCBudWxsID09PSBlID8gdm9pZCAwIDogZSk7XG4gICAgICAgIHJldHVybiBuZXcgUnQoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBuLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBlKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIH0sIG4ub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdChlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBKKHQsIGUpIHtcbiAgICAgICAgTihcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKHQsIGUpO1xuICAgICAgICBuLlkgPSAhMTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5XKHMsICgodCwgZSwgbikgPT4gbi5kZWxldGUoKSkpO1xuICAgIH1cbiAgICBYKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGUgPyBuID0gdCA6IChuID0ge30sIGUgPSB0KTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5XKHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICBaKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY3Vyc29yKHt9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBrdCh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICAgICAgcyhlKTtcbiAgICAgICAgICAgIH0sIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBzID8gdChzLnByaW1hcnlLZXksIHMudmFsdWUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ID8gcy5jb250aW51ZSgpIDogbigpO1xuICAgICAgICAgICAgICAgIH0pKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgVnQoaSksIG8gPSBlKGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcik7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBSdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5jYXRjaCgodCA9PiAoci5kb25lKCksIFJ0LnJlamVjdCh0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByLmlzRG9uZSA/IHMoKSA6IG51bGwgPT09IHIuSyA/IGkuY29udGludWUoKSA6IGkuY29udGludWUoci5LKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBSdC53YWl0Rm9yKG4pKSk7XG4gICAgfVxuICAgIG9wdGlvbnModCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdCAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IG4gPSB0IDogZSA9IHQpLCB7XG4gICAgICAgICAgICBpbmRleDogbixcbiAgICAgICAgICAgIHJhbmdlOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGN1cnNvcih0KSB7XG4gICAgICAgIGxldCBlID0gXCJuZXh0XCI7XG4gICAgICAgIGlmICh0LnJldmVyc2UgJiYgKGUgPSBcInByZXZcIiksIHQuaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmluZGV4KHQuaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIHQuWSA/IG4ub3BlbktleUN1cnNvcih0LnJhbmdlLCBlKSA6IG4ub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIHh0KHQpIHtcbiAgICByZXR1cm4gbmV3IFJ0KCgoZSwgbikgPT4ge1xuICAgICAgICB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGUobik7XG4gICAgICAgIH0sIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGt0KHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cbmxldCBOdCA9ICExO1xuXG5mdW5jdGlvbiBrdCh0KSB7XG4gICAgY29uc3QgZSA9IGJ0LlMoZ2V0VUEoKSk7XG4gICAgaWYgKGUgPj0gMTIuMiAmJiBlIDwgMTMpIHtcbiAgICAgICAgY29uc3QgZSA9IFwiQW4gaW50ZXJuYWwgZXJyb3Igd2FzIGVuY291bnRlcmVkIGluIHRoZSBJbmRleGVkIERhdGFiYXNlIHNlcnZlclwiO1xuICAgICAgICBpZiAodC5tZXNzYWdlLmluZGV4T2YoZSkgPj0gMCkge1xuICAgICAgICAgICAgLy8gV3JhcCBlcnJvciBpbiBhIG1vcmUgZGVzY3JpcHRpdmUgb25lLlxuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVKFwiaW50ZXJuYWxcIiwgYElPU19JTkRFWEVEREJfQlVHMTogSW5kZXhlZERiIGhhcyB0aHJvd24gJyR7ZX0nLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuYCk7XG4gICAgICAgICAgICByZXR1cm4gTnQgfHwgKE50ID0gITAsIFxuICAgICAgICAgICAgLy8gVGhyb3cgYSBnbG9iYWwgZXhjZXB0aW9uIG91dHNpZGUgb2YgdGhpcyBwcm9taXNlIGNoYWluLCBmb3IgdGhlIHVzZXIgdG9cbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGNhdGNoLlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgICAgICB9KSwgMCkpLCB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG4vKiogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgSW5kZXggQmFja2ZpbGxlci4gKi9cbmNsYXNzIE10IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMudHQgPSBlLCB0aGlzLnRhc2sgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5ldCgxNWUzKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy50YXNrICYmICh0aGlzLnRhc2suY2FuY2VsKCksIHRoaXMudGFzayA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMudGFzaztcbiAgICB9XG4gICAgZXQodCkge1xuICAgICAgICBOKFwiSW5kZXhCYWNraWxsZXJcIiwgYFNjaGVkdWxlZCBpbiAke3R9bXNgKSwgdGhpcy50YXNrID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwiaW5kZXhfYmFja2ZpbGxcIiAvKiBUaW1lcklkLkluZGV4QmFja2ZpbGwgKi8gLCB0LCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgTihcIkluZGV4QmFja2lsbGVyXCIsIGBEb2N1bWVudHMgd3JpdHRlbjogJHthd2FpdCB0aGlzLnR0Lm50KCl9YCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgRHQodCkgPyBOKFwiSW5kZXhCYWNraWxsZXJcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGluZGV4IGJhY2tmaWxsOiBcIiwgdCkgOiBhd2FpdCB2dCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXQoNmU0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqIEltcGxlbWVudHMgdGhlIHN0ZXBzIGZvciBiYWNrZmlsbGluZyBpbmRleGVzLiAqLyBjbGFzcyAkdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogTG9jYWxTdG9yZSBwcm92aWRlcyBhY2Nlc3MgdG8gSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50Vmlldy5cbiAgICAgKiBUaGVzZSBwcm9wZXJ0aWVzIHdpbGwgdXBkYXRlIHdoZW4gdGhlIHVzZXIgY2hhbmdlcy4gQ29uc2VxdWVudGx5LFxuICAgICAqIG1ha2luZyBhIGxvY2FsIGNvcHkgb2YgSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50VmlldyB3aWxsIHJlcXVpcmVcbiAgICAgKiB1cGRhdGVzIG92ZXIgdGltZS4gVGhlIHNpbXBsZXIgc29sdXRpb24gaXMgdG8gcmVseSBvbiBMb2NhbFN0b3JlIHRvIGhhdmVcbiAgICAgKiBhbiB1cC10by1kYXRlIHJlZmVyZW5jZXMgdG8gSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50U3RvcmUuXG4gICAgICovXG4gICAgdCwgZSkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSB0LCB0aGlzLnBlcnNpc3RlbmNlID0gZTtcbiAgICB9XG4gICAgYXN5bmMgbnQodCA9IDUwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQmFja2ZpbGwgSW5kZXhlc1wiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHRoaXMuc3QoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBpbmRleCBlbnRyaWVzIHVudGlsIHRoZSBjYXAgaXMgcmVhY2hlZC4gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBwcm9jZXNzZWQuICovICAgIHN0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTZXQ7XG4gICAgICAgIGxldCBzID0gZSwgaSA9ICEwO1xuICAgICAgICByZXR1cm4gUnQuZG9XaGlsZSgoKCkgPT4gITAgPT09IGkgJiYgcyA+IDApLCAoKCkgPT4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci5nZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiAhbi5oYXMoZSkpIHJldHVybiBOKFwiSW5kZXhCYWNraWxsZXJcIiwgYFByb2Nlc3NpbmcgY29sbGVjdGlvbjogJHtlfWApLCBcbiAgICAgICAgICAgIHRoaXMuaXQodCwgZSwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgcyAtPSB0LCBuLmFkZChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGkgPSAhMTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gZSAtIHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHByb2Nlc3NlZC5cbiAgICAgKi8gICAgaXQodCwgZSwgbikge1xuICAgICAgICAvLyBVc2UgdGhlIGVhcmxpZXN0IG9mZnNldCBvZiBhbGwgZmllbGQgaW5kZXhlcyB0byBxdWVyeSB0aGUgbG9jYWwgY2FjaGUuXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLmdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSkubmV4dCgocyA9PiB0aGlzLmxvY2FsU3RvcmUubG9jYWxEb2N1bWVudHMuZ2V0TmV4dERvY3VtZW50cyh0LCBlLCBzLCBuKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmNoYW5nZXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci51cGRhdGVJbmRleEVudHJpZXModCwgaSkubmV4dCgoKCkgPT4gdGhpcy5ydChzLCBuKSkpLm5leHQoKG4gPT4gKE4oXCJJbmRleEJhY2tpbGxlclwiLCBgVXBkYXRpbmcgb2Zmc2V0OiAke259YCksIFxuICAgICAgICAgICAgdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci51cGRhdGVDb2xsZWN0aW9uR3JvdXAodCwgZSwgbikpKSkubmV4dCgoKCkgPT4gaS5zaXplKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgbmV4dCBvZmZzZXQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gKi8gICAgcnQodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHQ7XG4gICAgICAgIHJldHVybiBlLmNoYW5nZXMuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBwdChlKTtcbiAgICAgICAgICAgIFR0KHMsIG4pID4gMCAmJiAobiA9IHMpO1xuICAgICAgICB9KSksIG5ldyBJdChuLnJlYWRUaW1lLCBuLmRvY3VtZW50S2V5LCBNYXRoLm1heChlLmJhdGNoSWQsIHQubGFyZ2VzdEJhdGNoSWQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovIGNsYXNzIE90IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHQsIGUgJiYgKGUuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gdCA9PiB0aGlzLm90KHQpLCB0aGlzLnV0ID0gdCA9PiBlLndyaXRlU2VxdWVuY2VOdW1iZXIodCkpO1xuICAgIH1cbiAgICBvdCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heCh0LCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXQgJiYgdGhpcy51dCh0KSwgdDtcbiAgICB9XG59XG5cbk90LmN0ID0gLTE7XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFyaWFibGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBudWxsLlxuICovXG5mdW5jdGlvbiBGdCh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT0gdDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciB0aGUgdmFsdWUgcmVwcmVzZW50cyAtMC4gKi8gZnVuY3Rpb24gQnQodCkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSB0ICYmIDEgLyB0ID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBMdCh0KSB7XG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgJiYgTnVtYmVyLmlzSW50ZWdlcih0KSAmJiAhQnQodCkgJiYgdCA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiB0ID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIHF0KHQpIHtcbiAgICBsZXQgZSA9IFwiXCI7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlLmxlbmd0aCA+IDAgJiYgKGUgPSBLdChlKSksIGUgPSBVdCh0LmdldChuKSwgZSk7XG4gICAgcmV0dXJuIEt0KGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gVXQodCwgZSkge1xuICAgIGxldCBuID0gZTtcbiAgICBjb25zdCBzID0gdC5sZW5ndGg7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzOyBlKyspIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY2hhckF0KGUpO1xuICAgICAgICBzd2l0Y2ggKHMpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gS3QodCkge1xuICAgIHJldHVybiB0ICsgXCJcdTAwMDFcdTAwMDFcIjtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHRoZSBnaXZlbiBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybSBvZiBhIHJlc291cmNlIHBhdGggaW50b1xuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXG4gKiBkZWNvZGluZyByZXNvdXJjZSBuYW1lcyBmcm9tIHRoZSBzZXJ2ZXI7IHRob3NlIGFyZSBPbmUgUGxhdGZvcm0gZm9ybWF0XG4gKiBzdHJpbmdzLlxuICovIGZ1bmN0aW9uIEd0KHQpIHtcbiAgICAvLyBFdmVudCB0aGUgZW1wdHkgcGF0aCBtdXN0IGVuY29kZSBhcyBhIHBhdGggb2YgYXQgbGVhc3QgbGVuZ3RoIDIuIEEgcGF0aFxuICAgIC8vIHdpdGggZXhhY3RseSAyIG11c3QgYmUgdGhlIGVtcHR5IHBhdGguXG4gICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgIGlmIChGKGUgPj0gMiksIDIgPT09IGUpIHJldHVybiBGKFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDApICYmIFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDEpKSwgdXQuZW1wdHlQYXRoKCk7XG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgY2Fubm90IGV4aXN0IHBhc3QgdGhlIHNlY29uZC10by1sYXN0IHBvc2l0aW9uIGluIHRoZVxuICAgIC8vIHNvdXJjZSB2YWx1ZS5cbiAgICAgICAgY29uc3QgX19QUklWQVRFX2xhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXggPSBlIC0gMiwgbiA9IFtdO1xuICAgIGxldCBzID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGU7ICkge1xuICAgICAgICAvLyBUaGUgbGFzdCB0d28gY2hhcmFjdGVycyBvZiBhIHZhbGlkIGVuY29kZWQgcGF0aCBtdXN0IGJlIGEgc2VwYXJhdG9yLCBzb1xuICAgICAgICAvLyB0aGVyZSBtdXN0IGJlIGFuIGVuZCB0byB0aGlzIHNlZ21lbnQuXG4gICAgICAgIGNvbnN0IGUgPSB0LmluZGV4T2YoXCJcdTAwMDFcIiwgaSk7XG4gICAgICAgIChlIDwgMCB8fCBlID4gX19QUklWQVRFX2xhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXgpICYmIE8oKTtcbiAgICAgICAgc3dpdGNoICh0LmNoYXJBdChlICsgMSkpIHtcbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBjb25zdCByID0gdC5zdWJzdHJpbmcoaSwgZSk7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIDAgPT09IHMubGVuZ3RoID8gXG4gICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXG4gICAgICAgICAgICAvLyBhbmQgXFwwMDFcbiAgICAgICAgICAgIG8gPSByIDogKHMgKz0gciwgbyA9IHMsIHMgPSBcIlwiKSwgbi5wdXNoKG8pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDEwXCI6XG4gICAgICAgICAgICBzICs9IHQuc3Vic3RyaW5nKGksIGUpLCBzICs9IFwiXFwwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTFcIjpcbiAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cbiAgICAgICAgICAgIHMgKz0gdC5zdWJzdHJpbmcoaSwgZSArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgTygpO1xuICAgICAgICB9XG4gICAgICAgIGkgPSBlICsgMjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyB1dChuKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgUXQgPSBbIFwidXNlcklkXCIsIFwiYmF0Y2hJZFwiIF07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBuYW1lICdvd25lcicgaXMgY2hvc2VuIHRvIGVuc3VyZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoXG4gKiBvbGRlciBjbGllbnRzIHRoYXQgb25seSBzdXBwb3J0ZWQgc2luZ2xlIGxvY2tlZCBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlXG4gKiBsYXllci5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXG4gKiBpbmRleCB0byBpdGVyYXRlIG92ZXIgYWxsIGF0IGRvY3VtZW50IG11dGF0aW9ucyBmb3IgYSBnaXZlbiBwYXRoIG9yIGxvd2VyLlxuICovXG5mdW5jdGlvbiBqdCh0LCBlKSB7XG4gICAgcmV0dXJuIFsgdCwgcXQoZSkgXTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAqIGFuZCBkZWxldGluZyBpbnRvIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4LlxuICovIGZ1bmN0aW9uIHp0KHQsIGUsIG4pIHtcbiAgICByZXR1cm4gWyB0LCBxdChlKSwgbiBdO1xufVxuXG4vKipcbiAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcbiAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcbiAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxuICogaW5mb3JtYXRpb24uXG4gKi8gY29uc3QgV3QgPSB7fSwgSHQgPSBbIFwicHJlZml4UGF0aFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcInJlYWRUaW1lXCIsIFwiZG9jdW1lbnRJZFwiIF0sIEp0ID0gWyBcInByZWZpeFBhdGhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJkb2N1bWVudElkXCIgXSwgWXQgPSBbIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJwcmVmaXhQYXRoXCIsIFwiZG9jdW1lbnRJZFwiIF0sIFh0ID0gWyBcImNhbm9uaWNhbElkXCIsIFwidGFyZ2V0SWRcIiBdLCBadCA9IFsgXCJ0YXJnZXRJZFwiLCBcInBhdGhcIiBdLCB0ZSA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdLCBlZSA9IFsgXCJjb2xsZWN0aW9uSWRcIiwgXCJwYXJlbnRcIiBdLCBuZSA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIgXSwgc2UgPSBbIFwidWlkXCIsIFwic2VxdWVuY2VOdW1iZXJcIiBdLCBpZSA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwiYXJyYXlWYWx1ZVwiLCBcImRpcmVjdGlvbmFsVmFsdWVcIiwgXCJvcmRlcmVkRG9jdW1lbnRLZXlcIiwgXCJkb2N1bWVudEtleVwiIF0sIHJlID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiwgXCJvcmRlcmVkRG9jdW1lbnRLZXlcIiBdLCBvZSA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCB1ZSA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgY2UgPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBhZSA9IFsgLi4uWyAuLi5bIC4uLlsgLi4uWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiBdLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiIF0sIFwiY29sbGVjdGlvblBhcmVudHNcIiBdLCBcImJ1bmRsZXNcIiwgXCJuYW1lZFF1ZXJpZXNcIiBdLCBoZSA9IFsgLi4uYWUsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIGxlID0gWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiwgXCJjbGllbnRNZXRhZGF0YVwiLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIFwiY29sbGVjdGlvblBhcmVudHNcIiwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIGZlID0gbGUsIGRlID0gWyAuLi5mZSwgXCJpbmRleENvbmZpZ3VyYXRpb25cIiwgXCJpbmRleFN0YXRlXCIsIFwiaW5kZXhFbnRyaWVzXCIgXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIHdlIGV4dGVuZHMgQXQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5odCA9IHQsIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9lKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gYnQuTShuLmh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gbWUodCkge1xuICAgIGxldCBlID0gMDtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUrKztcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2UodCwgZSkge1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZShuLCB0W25dKTtcbn1cblxuZnVuY3Rpb24geWUodCkge1xuICAgIGZvciAoY29uc3QgZSBpbiB0KSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGUpKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gQW4gaW1tdXRhYmxlIHNvcnRlZCBtYXAgaW1wbGVtZW50YXRpb24sIGJhc2VkIG9uIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFja1xuLy8gdHJlZS5cbmNsYXNzIHBlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMucm9vdCA9IGUgfHwgVGUuRU1QVFk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQgb3IgcmVwbGFjZWQuXG4gICAgaW5zZXJ0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwZSh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5pbnNlcnQodCwgZSwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIFRlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHBlKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290LnJlbW92ZSh0LCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgVGUuQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgd2l0aCB0aGUgZ2l2ZW4ga2V5LCBvciBudWxsLlxuICAgIGdldCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshZS5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuY29tcGFyYXRvcih0LCBlLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuIGUudmFsdWU7XG4gICAgICAgICAgICBuIDwgMCA/IGUgPSBlLmxlZnQgOiBuID4gMCAmJiAoZSA9IGUucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCBpbiB0aGlzIHNvcnRlZCBtYXAsIG9yIC0xIGlmIGl0IGRvZXNuJ3RcbiAgICAvLyBleGlzdC5cbiAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgLy8gTnVtYmVyIG9mIG5vZGVzIHRoYXQgd2VyZSBwcnVuZWQgd2hlbiBkZXNjZW5kaW5nIHJpZ2h0XG4gICAgICAgIGxldCBlID0gMCwgbiA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IW4uaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmNvbXBhcmF0b3IodCwgbi5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IHMpIHJldHVybiBlICsgbi5sZWZ0LnNpemU7XG4gICAgICAgICAgICBzIDwgMCA/IG4gPSBuLmxlZnQgOiAoXG4gICAgICAgICAgICAvLyBDb3VudCBhbGwgbm9kZXMgbGVmdCBvZiB0aGUgbm9kZSBwbHVzIHRoZSBub2RlIGl0c2VsZlxuICAgICAgICAgICAgZSArPSBuLmxlZnQuc2l6ZSArIDEsIG4gPSBuLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb2RlIG5vdCBmb3VuZFxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBub2RlcyBpbiB0aGUgbWFwLlxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1pbktleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUsIG4pLCAhMSkpKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0LnB1c2goYCR7ZX06JHtufWApLCAhMSkpKSwgYHske3Quam9pbihcIiwgXCIpfX1gO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzXG4gICAgLy8gYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhbiBpdGVyYXRvciBvdmVyIHRoZSBTb3J0ZWRNYXAuXG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSWUodGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJZSh0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSWUodGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSWUodGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwXG4vLyBBbiBpdGVyYXRvciBvdmVyIGFuIExMUkJOb2RlLlxuY2xhc3MgSWUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5pc1JldmVyc2UgPSBzLCB0aGlzLm5vZGVTdGFjayA9IFtdO1xuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgIGZvciAoOyF0LmlzRW1wdHkoKTsgKSBpZiAoaSA9IGUgPyBuKHQua2V5LCBlKSA6IDEsIFxuICAgICAgICAvLyBmbGlwIHRoZSBjb21wYXJpc29uIGlmIHdlJ3JlIGdvaW5nIGluIHJldmVyc2VcbiAgICAgICAgZSAmJiBzICYmIChpICo9IC0xKSwgaSA8IDApIFxuICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbGVzcyB0aGFuIG91ciBzdGFydCBrZXkuIGlnbm9yZSBpdFxuICAgICAgICB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LmxlZnQgOiB0LnJpZ2h0OyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgwID09PSBpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGV4YWN0bHkgZXF1YWwgdG8gb3VyIHN0YXJ0IGtleS4gUHVzaCBpdCBvbiB0aGUgc3RhY2ssXG4gICAgICAgICAgICAgICAgLy8gYnV0IHN0b3AgaXRlcmF0aW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmVcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5yaWdodCA6IHQubGVmdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMubm9kZVN0YWNrLnBvcCgpO1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkgZm9yICh0ID0gdC5sZWZ0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHQucmlnaHQ7IGVsc2UgZm9yICh0ID0gdC5yaWdodDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIFxuICAgICAgICB0ID0gdC5sZWZ0O1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm5vZGVTdGFjay5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5ub2RlU3RhY2tbdGhpcy5ub2RlU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwSXRlcmF0b3Jcbi8vIFJlcHJlc2VudHMgYSBub2RlIGluIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFjayB0cmVlLlxuY2xhc3MgVGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5jb2xvciA9IG51bGwgIT0gbiA/IG4gOiBUZS5SRUQsIHRoaXMubGVmdCA9IG51bGwgIT0gcyA/IHMgOiBUZS5FTVBUWSwgXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsICE9IGkgPyBpIDogVGUuRU1QVFksIHRoaXMuc2l6ZSA9IHRoaXMubGVmdC5zaXplICsgMSArIHRoaXMucmlnaHQuc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZSwgb3B0aW9uYWxseSByZXBsYWNpbmcgcGllY2VzIG9mIGl0LlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gbmV3IFRlKG51bGwgIT0gdCA/IHQgOiB0aGlzLmtleSwgbnVsbCAhPSBlID8gZSA6IHRoaXMudmFsdWUsIG51bGwgIT0gbiA/IG4gOiB0aGlzLmNvbG9yLCBudWxsICE9IHMgPyBzIDogdGhpcy5sZWZ0LCBudWxsICE9IGkgPyBpIDogdGhpcy5yaWdodCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaW5vcmRlclRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLnJpZ2h0Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cbiAgICBtaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaXNFbXB0eSgpID8gdGhpcyA6IHRoaXMubGVmdC5taW4oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oKS5rZXk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuaXNFbXB0eSgpID8gdGhpcy5rZXkgOiB0aGlzLnJpZ2h0Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpID0gbih0LCBzLmtleSk7XG4gICAgICAgIHJldHVybiBzID0gaSA8IDAgPyBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0Lmluc2VydCh0LCBlLCBuKSwgbnVsbCkgOiAwID09PSBpID8gcy5jb3B5KG51bGwsIGUsIG51bGwsIG51bGwsIG51bGwpIDogcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQuaW5zZXJ0KHQsIGUsIG4pKSwgXG4gICAgICAgIHMuZml4VXAoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWluKCkge1xuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkgcmV0dXJuIFRlLkVNUFRZO1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LmxlZnQuaXNSZWQoKSB8fCB0LmxlZnQubGVmdC5pc1JlZCgpIHx8ICh0ID0gdC5tb3ZlUmVkTGVmdCgpKSwgdCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCB0LmxlZnQucmVtb3ZlTWluKCksIG51bGwpLCBcbiAgICAgICAgdC5maXhVcCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzID0gdGhpcztcbiAgICAgICAgaWYgKGUodCwgcy5rZXkpIDwgMCkgcy5sZWZ0LmlzRW1wdHkoKSB8fCBzLmxlZnQuaXNSZWQoKSB8fCBzLmxlZnQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkTGVmdCgpKSwgXG4gICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0LnJlbW92ZSh0LCBlKSwgbnVsbCk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHMubGVmdC5pc1JlZCgpICYmIChzID0gcy5yb3RhdGVSaWdodCgpKSwgcy5yaWdodC5pc0VtcHR5KCkgfHwgcy5yaWdodC5pc1JlZCgpIHx8IHMucmlnaHQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkUmlnaHQoKSksIFxuICAgICAgICAgICAgMCA9PT0gZSh0LCBzLmtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocy5yaWdodC5pc0VtcHR5KCkpIHJldHVybiBUZS5FTVBUWTtcbiAgICAgICAgICAgICAgICBuID0gcy5yaWdodC5taW4oKSwgcyA9IHMuY29weShuLmtleSwgbi52YWx1ZSwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmVNaW4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlKHQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5maXhVcCgpO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cbiAgICBmaXhVcCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5pc1JlZCgpICYmICF0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlTGVmdCgpKSwgdC5sZWZ0LmlzUmVkKCkgJiYgdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0LmxlZnQuaXNSZWQoKSAmJiB0LnJpZ2h0LmlzUmVkKCkgJiYgKHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZExlZnQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQucmlnaHQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHQucmlnaHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0ID0gdC5yb3RhdGVMZWZ0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZFJpZ2h0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIHJvdGF0ZUxlZnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgVGUuUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIHQsIG51bGwpO1xuICAgIH1cbiAgICByb3RhdGVSaWdodCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBUZS5SRUQsIHRoaXMubGVmdC5yaWdodCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCB0KTtcbiAgICB9XG4gICAgY29sb3JGbGlwKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMubGVmdC5jb2xvciwgbnVsbCwgbnVsbCksIGUgPSB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMucmlnaHQuY29sb3IsIG51bGwsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KG51bGwsIG51bGwsICF0aGlzLmNvbG9yLCB0LCBlKTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY2hlY2soKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDIsIHQpIDw9IHRoaXMuc2l6ZSArIDE7XG4gICAgfVxuICAgIC8vIEluIGEgYmFsYW5jZWQgUkIgdHJlZSwgdGhlIGJsYWNrLWRlcHRoIChudW1iZXIgb2YgYmxhY2sgbm9kZXMpIGZyb20gcm9vdCB0b1xuICAgIC8vIGxlYXZlcyBpcyBlcXVhbCBvbiBib3RoIHNpZGVzLiAgVGhpcyBmdW5jdGlvbiB2ZXJpZmllcyB0aGF0IG9yIGFzc2VydHMuXG4gICAgY2hlY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVkKCkgJiYgdGhpcy5sZWZ0LmlzUmVkKCkpIHRocm93IE8oKTtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNSZWQoKSkgdGhyb3cgTygpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNoZWNrKCk7XG4gICAgICAgIGlmICh0ICE9PSB0aGlzLnJpZ2h0LmNoZWNrKCkpIHRocm93IE8oKTtcbiAgICAgICAgcmV0dXJuIHQgKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xuICAgIH1cbn1cblxuIC8vIGVuZCBMTFJCTm9kZVxuLy8gRW1wdHkgbm9kZSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgTExSQiB0cmVlcy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5UZS5FTVBUWSA9IG51bGwsIFRlLlJFRCA9ICEwLCBUZS5CTEFDSyA9ICExO1xuXG4vLyBlbmQgTExSQkVtcHR5Tm9kZVxuVGUuRU1QVFkgPSBuZXcgXG4vLyBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXG5jbGFzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgICAgdGhyb3cgTygpO1xuICAgIH1cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgdGhyb3cgTygpO1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKSB7XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGUodCwgZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBjaGVjaygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXG4gKlxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xuICogYmUgZXF1YWwhXG4gKi9cbmNsYXNzIEVlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMuZGF0YSA9IG5ldyBwZSh0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5kYXRhLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWF4S2V5KCk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XG4gICAgfVxuICAgIGluZGV4T2YodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4T2YodCk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBlbGVtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHJhbmdlWzBdICZsdDs9IGVsZW0gJmx0OyByYW5nZVsxXS4gKi8gICAgZm9yRWFjaEluUmFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0WzBdKTtcbiAgICAgICAgZm9yICg7bi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcihzLmtleSwgdFsxXSkgPj0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgZShzLmtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogc3RhcnQgJmx0Oz0gZWxlbSB1bnRpbCBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgZm9yRWFjaFdoaWxlKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiA9IHZvaWQgMCAhPT0gZSA/IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZSkgOiB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTsgbi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKCF0KG4uZ2V0TmV4dCgpLmtleSkpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRmluZHMgdGhlIGxlYXN0IGVsZW1lbnQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBlbGVtYC4gKi8gICAgZmlyc3RBZnRlck9yRXF1YWwodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KTtcbiAgICAgICAgcmV0dXJuIGUuaGFzTmV4dCgpID8gZS5nZXROZXh0KCkua2V5IDogbnVsbDtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWUodGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IEFlKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGVsZW1lbnQgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpLmluc2VydCh0LCAhMCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhbiBlbGVtZW50ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhcyh0KSA/IHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xuICAgIH1cbiAgICB1bmlvbldpdGgodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBgcmVzdWx0YCBhbHdheXMgcmVmZXJzIHRvIHRoZSBsYXJnZXIgb25lIG9mIHRoZSB0d28gc2V0cy5cbiAgICAgICAgICAgICAgICByZXR1cm4gZS5zaXplIDwgdC5zaXplICYmIChlID0gdCwgdCA9IHRoaXMpLCB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZSA9IGUuYWRkKHQpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgRWUpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCksIG4gPSB0LmRhdGEuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbXBhcmF0b3IodCwgcykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgXCJTb3J0ZWRTZXQoXCIgKyB0LnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgY29weSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRWUodGhpcy5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIGUuZGF0YSA9IHQsIGU7XG4gICAgfVxufVxuXG5jbGFzcyBBZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLml0ZXIgPSB0O1xuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmdldE5leHQoKS5rZXk7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuaGFzTmV4dCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0d28gc29ydGVkIHNldHMgZm9yIGVxdWFsaXR5IHVzaW5nIHRoZWlyIG5hdHVyYWwgb3JkZXJpbmcuIFRoZVxuICogbWV0aG9kIGNvbXB1dGVzIHRoZSBpbnRlcnNlY3Rpb24gYW5kIGludm9rZXMgYG9uQWRkYCBmb3IgZXZlcnkgZWxlbWVudCB0aGF0XG4gKiBpcyBpbiBgYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuIGBvblJlbW92ZWAgaXMgaW52b2tlZCBmb3IgZXZlcnkgZWxlbWVudCBpblxuICogYGJlZm9yZWAgYnV0IG1pc3NpbmcgZnJvbSBgYWZ0ZXJgLlxuICpcbiAqIFRoZSBtZXRob2QgY3JlYXRlcyBhIGNvcHkgb2YgYm90aCBgYmVmb3JlYCBhbmQgYGFmdGVyYCBhbmQgcnVucyBpbiBPKG4gbG9nXG4gKiBuKSwgd2hlcmUgbiBpcyB0aGUgc2l6ZSBvZiB0aGUgdHdvIGxpc3RzLlxuICpcbiAqIEBwYXJhbSBiZWZvcmUgLSBUaGUgZWxlbWVudHMgdGhhdCBleGlzdCBpbiB0aGUgb3JpZ2luYWwgc2V0LlxuICogQHBhcmFtIGFmdGVyIC0gVGhlIGVsZW1lbnRzIHRvIGRpZmYgYWdhaW5zdCB0aGUgb3JpZ2luYWwgc2V0LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBuZXh0IGVsZW1lbnQgZnJvbSB0aGUgaXRlcmF0b3Igb3IgYHVuZGVmaW5lZGAgaWYgbm9uZSBhdmFpbGFibGUuXG4gKi9cbmZ1bmN0aW9uIHZlKHQpIHtcbiAgICByZXR1cm4gdC5oYXNOZXh0KCkgPyB0LmdldE5leHQoKSA6IHZvaWQgMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxuICogRXhhbXBsZXM6XG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXG4gKi8gY2xhc3MgUmUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5maWVsZHMgPSB0LCBcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0aW9uIG9mIEZpZWxkTWFza1xuICAgICAgICAvLyBTb3J0IHRoZSBmaWVsZCBtYXNrIHRvIHN1cHBvcnQgYEZpZWxkTWFzay5pc0VxdWFsKClgIGFuZCBhc3NlcnQgYmVsb3cuXG4gICAgICAgIHQuc29ydChhdC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlKFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBGaWVsZE1hc2sgb2JqZWN0IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhZGRpbmcgYWxsIHRoZSBnaXZlblxuICAgICAqIGZpZWxkcyBwYXRocyB0byB0aGlzIGZpZWxkIG1hc2suXG4gICAgICovICAgIHVuaW9uV2l0aCh0KSB7XG4gICAgICAgIGxldCBlID0gbmV3IEVlKGF0LmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5maWVsZHMpIGUgPSBlLmFkZCh0KTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmFkZChuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZShlLnRvQXJyYXkoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgYGZpZWxkUGF0aGAgaXMgaW5jbHVkZWQgYnkgYXQgbGVhc3Qgb25lIGZpZWxkIGluIHRoaXMgZmllbGRcbiAgICAgKiBtYXNrLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBhbiBPKG4pIG9wZXJhdGlvbiwgd2hlcmUgYG5gIGlzIHRoZSBzaXplIG9mIHRoZSBmaWVsZCBtYXNrLlxuICAgICAqLyAgICBjb3ZlcnModCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIGlmIChlLmlzUHJlZml4T2YodCkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG50KHRoaXMuZmllbGRzLCB0LmZpZWxkcywgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGVycm9yIGVuY291bnRlcmVkIHdoaWxlIGRlY29kaW5nIGJhc2U2NCBzdHJpbmcuXG4gKi8gY2xhc3MgUGUgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmFzZTY0RGVjb2RlRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gYmUoKSB7XG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGF0b2I7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltbXV0YWJsZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBcInByb3RvXCIgYnl0ZSBzdHJpbmcuXG4gKlxuICogUHJvdG8gYnl0ZSBzdHJpbmdzIGNhbiBlaXRoZXIgYmUgQmFzZTY0LWVuY29kZWQgc3RyaW5ncyBvciBVaW50OEFycmF5cyB3aGVuXG4gKiBzZW50IG9uIHRoZSB3aXJlLiBUaGlzIGNsYXNzIGFic3RyYWN0cyBhd2F5IHRoaXMgZGlmZmVyZW50aWF0aW9uIGJ5IGhvbGRpbmdcbiAqIHRoZSBwcm90byBieXRlIHN0cmluZyBpbiBhIGNvbW1vbiBjbGFzcyB0aGF0IG11c3QgYmUgY29udmVydGVkIGludG8gYSBzdHJpbmdcbiAqIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgcHJvdG8uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBWZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0b2IodCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCBgRE9NRXhjZXB0aW9uYCBpcyBkZWZpbmVkIGJlZm9yZSB1c2luZyBpdCB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIFwiUmVmZXJlbmNlRXJyb3I6IFByb3BlcnR5ICdET01FeGNlcHRpb24nIGRvZXNuJ3QgZXhpc3RcIiBpbiByZWFjdC1uYXRpdmUuXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzcxMTUpXG4gICAgICAgICAgICAgICAgdGhyb3cgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRE9NRXhjZXB0aW9uICYmIHQgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gPyBuZXcgUGUoXCJJbnZhbGlkIGJhc2U2NCBzdHJpbmc6IFwiICsgdCkgOiB0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIGJpbmFyeSBzdHJpbmcgdG8gYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcuICovICh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBWZShlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk7IFJlbW92ZSB0aGUgY29weSBvZiB0aGUgYnl0ZSBzdHJpbmcgaGVyZSBhcyB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBpcyBmcmVxdWVudGx5IGNhbGxlZCBkdXJpbmcgaW5kZXhpbmcuXG4gICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBsZXQgZSA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKHQpO1xuICAgICAgICByZXR1cm4gbmV3IFZlKGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dDogKCkgPT4gdCA8IHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5iaW5hcnlTdHJpbmcuY2hhckNvZGVBdCh0KyspLFxuICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0ID0gdGhpcy5iaW5hcnlTdHJpbmcsIGJ0b2EodCk7XG4gICAgICAgIHZhciB0O1xuICAgIH1cbiAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlW25dID0gdC5jaGFyQ29kZUF0KG4pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLy8gQSBSZWdFeHAgbWF0Y2hpbmcgSVNPIDg2MDEgVVRDIHRpbWVzdGFtcHMgd2l0aCBvcHRpb25hbCBmcmFjdGlvbi5cbiAgICAgICAgKHRoaXMuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgYXBwcm94aW1hdGVCeXRlU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIDIgKiB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBldCh0aGlzLmJpbmFyeVN0cmluZywgdC5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5U3RyaW5nID09PSB0LmJpbmFyeVN0cmluZztcbiAgICB9XG59XG5cblZlLkVNUFRZX0JZVEVfU1RSSU5HID0gbmV3IFZlKFwiXCIpO1xuXG5jb25zdCBTZSA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdmFsdWVzIGZvciBhIHRpbWVzdGFtcCB2YWx1ZSBpbnRvIGEgXCJzZWNvbmRzIGFuZFxuICogbmFub3NcIiByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBEZSh0KSB7XG4gICAgLy8gVGhlIGpzb24gaW50ZXJmYWNlIChmb3IgdGhlIGJyb3dzZXIpIHdpbGwgcmV0dXJuIGFuIGlzbyB0aW1lc3RhbXAgc3RyaW5nLFxuICAgIC8vIHdoaWxlIHRoZSBwcm90byBqcyBsaWJyYXJ5IChmb3Igbm9kZSkgd2lsbCByZXR1cm4gYVxuICAgIC8vIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgaW5zdGFuY2UuXG4gICAgaWYgKEYoISF0KSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGNvbnN0IG4gPSBTZS5leGVjKHQpO1xuICAgICAgICBpZiAoRighIW4pLCBuWzFdKSB7XG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxuICAgICAgICAgICAgbGV0IHQgPSBuWzFdO1xuICAgICAgICAgICAgdCA9ICh0ICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDAsIDkpLCBlID0gTnVtYmVyKHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IERhdGUodCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBNYXRoLmZsb29yKHMuZ2V0VGltZSgpIC8gMWUzKSxcbiAgICAgICAgICAgIG5hbm9zOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IENlKHQuc2Vjb25kcyksXG4gICAgICAgIG5hbm9zOiBDZSh0Lm5hbm9zKVxuICAgIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBudW1iZXJzIGludG8gYSBKYXZhU2NyaXB0IG51bWJlci5cbiAqIFJldHVybnMgMCBpZiB0aGUgdmFsdWUgaXMgbm90IG51bWVyaWMuXG4gKi8gZnVuY3Rpb24gQ2UodCkge1xuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgPyB0IDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IE51bWJlcih0KSA6IDA7XG59XG5cbi8qKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIEJsb2JzIGludG8gYSBCeXRlU3RyaW5nLiAqLyBmdW5jdGlvbiB4ZSh0KSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBWZS5mcm9tQmFzZTY0U3RyaW5nKHQpIDogVmUuZnJvbVVpbnQ4QXJyYXkodCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbGx5LWFwcGxpZWQgU2VydmVyVGltZXN0YW1wLlxuICpcbiAqIFNlcnZlciBUaW1lc3RhbXBzIGFyZSBiYWNrZWQgYnkgTWFwVmFsdWVzIHRoYXQgY29udGFpbiBhbiBpbnRlcm5hbCBmaWVsZFxuICogYF9fdHlwZV9fYCB3aXRoIGEgdmFsdWUgb2YgYHNlcnZlcl90aW1lc3RhbXBgLiBUaGUgcHJldmlvdXMgdmFsdWUgYW5kIGxvY2FsXG4gKiB3cml0ZSB0aW1lIGFyZSBzdG9yZWQgaW4gaXRzIGBfX3ByZXZpb3VzX3ZhbHVlX19gIGFuZCBgX19sb2NhbF93cml0ZV90aW1lX19gXG4gKiBmaWVsZHMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIE5vdGVzOlxuICogLSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhXG4gKiAgIHRyYW5zZm9ybS4gVGhleSBjYW4gb25seSBleGlzdCBpbiB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBUaGVyZWZvcmVcbiAqICAgdGhleSBkbyBub3QgbmVlZCB0byBiZSBwYXJzZWQgb3Igc2VyaWFsaXplZC5cbiAqIC0gV2hlbiBldmFsdWF0ZWQgbG9jYWxseSAoZS5nLiBmb3Igc25hcHNob3QuZGF0YSgpKSwgdGhleSBieSBkZWZhdWx0XG4gKiAgIGV2YWx1YXRlIHRvIGBudWxsYC4gVGhpcyBiZWhhdmlvciBjYW4gYmUgY29uZmlndXJlZCBieSBwYXNzaW5nIGN1c3RvbVxuICogICBGaWVsZFZhbHVlT3B0aW9ucyB0byB2YWx1ZSgpLlxuICogLSBXaXRoIHJlc3BlY3QgdG8gb3RoZXIgU2VydmVyVGltZXN0YW1wVmFsdWVzLCB0aGV5IHNvcnQgYnkgdGhlaXJcbiAqICAgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gTmUodCkge1xuICAgIHZhciBlLCBuO1xuICAgIHJldHVybiBcInNlcnZlcl90aW1lc3RhbXBcIiA9PT0gKG51bGwgPT09IChuID0gKChudWxsID09PSAoZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQubWFwVmFsdWUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZmllbGRzKSB8fCB7fSkuX190eXBlX18pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uc3RyaW5nVmFsdWUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgU2VydmVyVGltZXN0YW1wIHByb3RvIHZhbHVlICh1c2luZyB0aGUgaW50ZXJuYWwgZm9ybWF0KS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgYmVmb3JlIHRoaXMgU2VydmVyVGltZXN0YW1wIHdhcyBzZXQuXG4gKlxuICogUHJlc2VydmluZyB0aGUgcHJldmlvdXMgdmFsdWVzIGFsbG93cyB0aGUgdXNlciB0byBkaXNwbGF5IHRoZSBsYXN0IHJlc29sZWRcbiAqIHZhbHVlIHVudGlsIHRoZSBiYWNrZW5kIHJlc3BvbmRzIHdpdGggdGhlIHRpbWVzdGFtcC5cbiAqL1xuZnVuY3Rpb24ga2UodCkge1xuICAgIGNvbnN0IGUgPSB0Lm1hcFZhbHVlLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX187XG4gICAgcmV0dXJuIE5lKGUpID8ga2UoZSkgOiBlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxvY2FsIHRpbWUgYXQgd2hpY2ggdGhpcyB0aW1lc3RhbXAgd2FzIGZpcnN0IHNldC5cbiAqLyBmdW5jdGlvbiBNZSh0KSB7XG4gICAgY29uc3QgZSA9IERlKHQubWFwVmFsdWUuZmllbGRzLl9fbG9jYWxfd3JpdGVfdGltZV9fLnRpbWVzdGFtcFZhbHVlKTtcbiAgICByZXR1cm4gbmV3IGl0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzICRlIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgdG8gdXNlLlxuICAgICAqIEBwYXJhbSBhcHBJZCAtIFRoZSBGaXJlYmFzZSBBcHAgSWQuXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXG4gICAgICogQHBhcmFtIGhvc3QgLSBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSBzc2wgLSBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gYXV0b0RldGVjdExvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGRldGVjdEJ1ZmZlcmluZ1Byb3h5XG4gICAgICogb3B0aW9uIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGxvbmdQb2xsaW5nT3B0aW9ucyBPcHRpb25zIHRoYXQgY29uZmlndXJlIGxvbmctcG9sbGluZy5cbiAgICAgKiBAcGFyYW0gdXNlRmV0Y2hTdHJlYW1zIFdoZXRoZXIgdG8gdXNlIHRoZSBGZXRjaCBBUEkgaW5zdGVhZCBvZlxuICAgICAqIFhNTEhUVFBSZXF1ZXN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgdSwgYykge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLmFwcElkID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuaG9zdCA9IHMsIHRoaXMuc3NsID0gaSwgXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHIsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gbywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSB1LCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBjO1xuICAgIH1cbn1cblxuLyoqIFRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgZm9yIGEgcHJvamVjdC4gKi9cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBPZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHQsIHRoaXMuZGF0YWJhc2UgPSBlIHx8IFwiKGRlZmF1bHQpXCI7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPZShcIlwiLCBcIlwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgT2UgJiYgdC5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIHQuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgRmUgPSB7XG4gICAgbWFwVmFsdWU6IHtcbiAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcIl9fbWF4X19cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSwgQmUgPSB7XG4gICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxufTtcblxuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqL1xuZnVuY3Rpb24gTGUodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOiBcImludGVnZXJWYWx1ZVwiIGluIHQgfHwgXCJkb3VibGVWYWx1ZVwiIGluIHQgPyAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDogXCJtYXBWYWx1ZVwiIGluIHQgPyBOZSh0KSA/IDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDogZW4odCkgPyA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6IDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6IE8oKTtcbn1cblxuLyoqIFRlc3RzIGBsZWZ0YCBhbmQgYHJpZ2h0YCBmb3IgZXF1YWxpdHkgYmFzZWQgb24gdGhlIGJhY2tlbmQgc2VtYW50aWNzLiAqLyBmdW5jdGlvbiBxZSh0LCBlKSB7XG4gICAgaWYgKHQgPT09IGUpIHJldHVybiAhMDtcbiAgICBjb25zdCBuID0gTGUodCk7XG4gICAgaWYgKG4gIT09IExlKGUpKSByZXR1cm4gITE7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZSA9PT0gZS5ib29sZWFuVmFsdWU7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gTWUodCkuaXNFcXVhbChNZShlKSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gZS50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIHQudGltZXN0YW1wVmFsdWUgPT09IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gRGUodC50aW1lc3RhbXBWYWx1ZSksIHMgPSBEZShlLnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHMuc2Vjb25kcyAmJiBuLm5hbm9zID09PSBzLm5hbm9zO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWUgPT09IGUuc3RyaW5nVmFsdWU7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiB4ZSh0LmJ5dGVzVmFsdWUpLmlzRXF1YWwoeGUoZS5ieXRlc1ZhbHVlKSk7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZSA9PT0gZS5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBDZSh0Lmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpID09PSBDZShlLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpICYmIENlKHQuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpID09PSBDZShlLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gZSkgcmV0dXJuIENlKHQuaW50ZWdlclZhbHVlKSA9PT0gQ2UoZS5pbnRlZ2VyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IENlKHQuZG91YmxlVmFsdWUpLCBzID0gQ2UoZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gPT09IHMgPyBCdChuKSA9PT0gQnQocykgOiBpc05hTihuKSAmJiBpc05hTihzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIG50KHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIHFlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQubWFwVmFsdWUuZmllbGRzIHx8IHt9LCBzID0gZS5tYXBWYWx1ZS5maWVsZHMgfHwge307XG4gICAgICAgICAgICBpZiAobWUobikgIT09IG1lKHMpKSByZXR1cm4gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgaW4gbikgaWYgKG4uaGFzT3duUHJvcGVydHkodCkgJiYgKHZvaWQgMCA9PT0gc1t0XSB8fCAhcWUoblt0XSwgc1t0XSkpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgQXJyYXlWYWx1ZSBjb250YWlucyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuICovICh0LCBlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE8oKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFVlKHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSAodC52YWx1ZXMgfHwgW10pLmZpbmQoKHQgPT4gcWUodCwgZSkpKTtcbn1cblxuZnVuY3Rpb24gS2UodCwgZSkge1xuICAgIGlmICh0ID09PSBlKSByZXR1cm4gMDtcbiAgICBjb25zdCBuID0gTGUodCksIHMgPSBMZShlKTtcbiAgICBpZiAobiAhPT0gcykgcmV0dXJuIGV0KG4sIHMpO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBldCh0LmJvb2xlYW5WYWx1ZSwgZS5ib29sZWFuVmFsdWUpO1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBDZSh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKSwgcyA9IENlKGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPCBzID8gLTEgOiBuID4gcyA/IDEgOiBuID09PSBzID8gMCA6IFxuICAgICAgICAgICAgLy8gb25lIG9yIGJvdGggYXJlIE5hTi5cbiAgICAgICAgICAgIGlzTmFOKG4pID8gaXNOYU4ocykgPyAwIDogLTEgOiAxO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEdlKHQudGltZXN0YW1wVmFsdWUsIGUudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEdlKE1lKHQpLCBNZShlKSk7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZXQodC5zdHJpbmdWYWx1ZSwgZS5zdHJpbmdWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB4ZSh0KSwgcyA9IHhlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uY29tcGFyZVRvKHMpO1xuICAgICAgICB9KHQuYnl0ZXNWYWx1ZSwgZS5ieXRlc1ZhbHVlKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zcGxpdChcIi9cIiksIHMgPSBlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZXQoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5yZWZlcmVuY2VWYWx1ZSwgZS5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZXQoQ2UodC5sYXRpdHVkZSksIENlKGUubGF0aXR1ZGUpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgIHJldHVybiBldChDZSh0LmxvbmdpdHVkZSksIENlKGUubG9uZ2l0dWRlKSk7XG4gICAgICAgIH0odC5nZW9Qb2ludFZhbHVlLCBlLmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudmFsdWVzIHx8IFtdLCBzID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IEtlKG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBldChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQuYXJyYXlWYWx1ZSwgZS5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQgPT09IEZlLm1hcFZhbHVlICYmIGUgPT09IEZlLm1hcFZhbHVlKSByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmICh0ID09PSBGZS5tYXBWYWx1ZSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoZSA9PT0gRmUubWFwVmFsdWUpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmZpZWxkcyB8fCB7fSwgcyA9IE9iamVjdC5rZXlzKG4pLCBpID0gZS5maWVsZHMgfHwge30sIHIgPSBPYmplY3Qua2V5cyhpKTtcbiAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIE1hcFZhbHVlcyBhcmUgbGlrZWx5IHNvcnRlZCBjb3JyZWN0bHkgYmFzZWQgb24gdGhlaXIgaW5zZXJ0aW9uXG4gICAgICAgICAgICAvLyBvcmRlciAoZS5nLiB3aGVuIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQpLCBsb2NhbCBtb2RpZmljYXRpb25zIGNhbiBicmluZ1xuICAgICAgICAgICAgLy8gZWxlbWVudHMgb3V0IG9mIG9yZGVyLiBXZSBuZWVkIHRvIHJlLXNvcnQgdGhlIGVsZW1lbnRzIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgICAgICAvLyBjYW5vbmljYWwgSURzIGFyZSBpbmRlcGVuZGVudCBvZiBpbnNlcnRpb24gb3JkZXIuXG4gICAgICAgICAgICBzLnNvcnQoKSwgci5zb3J0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHMubGVuZ3RoICYmIHQgPCByLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGV0KHNbdF0sIHJbdF0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICBjb25zdCBvID0gS2UobltzW3RdXSwgaVtyW3RdXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IG8pIHJldHVybiBvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV0KHMubGVuZ3RoLCByLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlIHByb3ZpZGVkIGZpZWxkIHZhbHVlIChhcyB1c2VkIGluIFRhcmdldFxuICogc2VyaWFsaXphdGlvbikuXG4gKi8gKHQubWFwVmFsdWUsIGUubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBHZSh0LCBlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGgpIHJldHVybiBldCh0LCBlKTtcbiAgICBjb25zdCBuID0gRGUodCksIHMgPSBEZShlKSwgaSA9IGV0KG4uc2Vjb25kcywgcy5zZWNvbmRzKTtcbiAgICByZXR1cm4gMCAhPT0gaSA/IGkgOiBldChuLm5hbm9zLCBzLm5hbm9zKTtcbn1cblxuZnVuY3Rpb24gUWUodCkge1xuICAgIHJldHVybiBqZSh0KTtcbn1cblxuZnVuY3Rpb24gamUodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyBcIm51bGxcIiA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmJvb2xlYW5WYWx1ZSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmludGVnZXJWYWx1ZSA6IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuZG91YmxlVmFsdWUgOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IERlKHQpO1xuICAgICAgICByZXR1cm4gYHRpbWUoJHtlLnNlY29uZHN9LCR7ZS5uYW5vc30pYDtcbiAgICB9KHQudGltZXN0YW1wVmFsdWUpIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB0LnN0cmluZ1ZhbHVlIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IHhlKHQuYnl0ZXNWYWx1ZSkudG9CYXNlNjQoKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gKG4gPSB0LnJlZmVyZW5jZVZhbHVlLCBcbiAgICBodC5mcm9tTmFtZShuKS50b1N0cmluZygpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyBgZ2VvKCR7KGUgPSB0Lmdlb1BvaW50VmFsdWUpLmxhdGl0dWRlfSwke2UubG9uZ2l0dWRlfSlgIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIltcIiwgbiA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdC52YWx1ZXMgfHwgW10pIG4gPyBuID0gITEgOiBlICs9IFwiLFwiLCBlICs9IGplKHMpO1xuICAgICAgICByZXR1cm4gZSArIFwiXVwiO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgKGFuZCB3aWxkbHkgaW5hY2N1cmF0ZSkgaW4tbWVtb3J5IHNpemUgZm9yIHRoZSBmaWVsZFxuICogdmFsdWUuXG4gKlxuICogVGhlIG1lbW9yeSBzaXplIHRha2VzIGludG8gYWNjb3VudCBvbmx5IHRoZSBhY3R1YWwgdXNlciBkYXRhIGFzIGl0IHJlc2lkZXNcbiAqIGluIG1lbW9yeSBhbmQgaWdub3JlcyBvYmplY3Qgb3ZlcmhlYWQuXG4gKi8gKHQuYXJyYXlWYWx1ZSkgOiBcIm1hcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXRlcmF0aW9uIG9yZGVyIGluIEphdmFTY3JpcHQgaXMgbm90IGd1YXJhbnRlZWQuIFRvIGVuc3VyZSB0aGF0IHdlIGdlbmVyYXRlXG4gICAgICAgIC8vIG1hdGNoaW5nIGNhbm9uaWNhbCBJRHMgZm9yIGlkZW50aWNhbCBtYXBzLCB3ZSBuZWVkIHRvIHNvcnQgdGhlIGtleXMuXG4gICAgICAgIGNvbnN0IGUgPSBPYmplY3Qua2V5cyh0LmZpZWxkcyB8fCB7fSkuc29ydCgpO1xuICAgICAgICBsZXQgbiA9IFwie1wiLCBzID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSBzID8gcyA9ICExIDogbiArPSBcIixcIiwgbiArPSBgJHtpfToke2plKHQuZmllbGRzW2ldKX1gO1xuICAgICAgICByZXR1cm4gbiArIFwifVwiO1xuICAgIH0odC5tYXBWYWx1ZSkgOiBPKCk7XG4gICAgdmFyIGUsIG47XG59XG5cbmZ1bmN0aW9uIHplKHQpIHtcbiAgICBzd2l0Y2ggKExlKHQpKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiA0O1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDg7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgLy8gR2VvUG9pbnRzIGFyZSBtYWRlIHVwIG9mIHR3byBkaXN0aW5jdCBudW1iZXJzIChsYXRpdHVkZSArIGxvbmdpdHVkZSlcbiAgICAgICAgcmV0dXJuIDE2O1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgY29uc3QgZSA9IGtlKHQpO1xuICAgICAgICByZXR1cm4gZSA/IDE2ICsgemUoZSkgOiAxNjtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0RhdGFfc3RydWN0dXJlczpcbiAgICAgICAgLy8gXCJKYXZhU2NyaXB0J3MgU3RyaW5nIHR5cGUgaXMgWy4uLl0gYSBzZXQgb2YgZWxlbWVudHMgb2YgMTYtYml0IHVuc2lnbmVkXG4gICAgICAgIC8vIGludGVnZXIgdmFsdWVzXCJcbiAgICAgICAgcmV0dXJuIDIgKiB0LnN0cmluZ1ZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4geGUodC5ieXRlc1ZhbHVlKS5hcHByb3hpbWF0ZUJ5dGVTaXplKCk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkucmVkdWNlKCgodCwgZSkgPT4gdCArIHplKGUpKSwgMCk7XG5cbiAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgICAgIHJldHVybiBnZSh0LmZpZWxkcywgKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZSArPSB0Lmxlbmd0aCArIHplKG4pO1xuICAgICAgICAgICAgfSkpLCBlO1xuICAgICAgICB9KHQubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxufVxuXG4vKiogUmV0dXJucyBhIHJlZmVyZW5jZSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIGRhdGFiYXNlIGFuZCBrZXkuICovXG5mdW5jdGlvbiBXZSh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGBwcm9qZWN0cy8ke3QucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0LmRhdGFiYXNlfS9kb2N1bWVudHMvJHtlLnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YFxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBJbnRlZ2VyVmFsdWUgLiAqLyBmdW5jdGlvbiBIZSh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIERvdWJsZVZhbHVlLiAqL1xuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEFycmF5VmFsdWUuICovXG5mdW5jdGlvbiBKZSh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImFycmF5VmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBOdWxsVmFsdWUuICovIGZ1bmN0aW9uIFllKHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibnVsbFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIE5hTi4gKi8gZnVuY3Rpb24gWGUodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgaXNOYU4oTnVtYmVyKHQuZG91YmxlVmFsdWUpKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTWFwVmFsdWUuICovIGZ1bmN0aW9uIFplKHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibWFwVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYC4gKi8gZnVuY3Rpb24gdG4odCkge1xuICAgIGlmICh0Lmdlb1BvaW50VmFsdWUpIHJldHVybiB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQuZ2VvUG9pbnRWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0LnRpbWVzdGFtcFZhbHVlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUpIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0LnRpbWVzdGFtcFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQubWFwVmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZ2UodC5tYXBWYWx1ZS5maWVsZHMsICgodCwgbikgPT4gZS5tYXBWYWx1ZS5maWVsZHNbdF0gPSB0bihuKSkpLCBlO1xuICAgIH1cbiAgICBpZiAodC5hcnJheVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8ICh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKS5sZW5ndGg7ICsrbikgZS5hcnJheVZhbHVlLnZhbHVlc1tuXSA9IHRuKHQuYXJyYXlWYWx1ZS52YWx1ZXNbbl0pO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHQpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBWYWx1ZSByZXByZXNlbnRzIHRoZSBjYW5vbmljYWwge0BsaW5rICNNQVhfVkFMVUV9IC4gKi8gZnVuY3Rpb24gZW4odCkge1xuICAgIHJldHVybiBcIl9fbWF4X19cIiA9PT0gKCgodC5tYXBWYWx1ZSB8fCB7fSkuZmllbGRzIHx8IHt9KS5fX3R5cGVfXyB8fCB7fSkuc3RyaW5nVmFsdWU7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBsb3dlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChpbmNsdXNpdmUpLiAqLyBmdW5jdGlvbiBubih0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IEJlIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBib29sZWFuVmFsdWU6ICExXG4gICAgfSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCB8fCBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgIHNlY29uZHM6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG4gICAgICAgIH1cbiAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIHN0cmluZ1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICB9IDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyBXZShPZS5lbXB0eSgpLCBodC5lbXB0eSgpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgfVxuICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgIH0gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgfSA6IE8oKTtcbn1cblxuLyoqIFJldHVybnMgdGhlIGxhcmdlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChleGNsdXNpdmUpLiAqLyBmdW5jdGlvbiBzbih0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgIH0gOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICB9IDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0IHx8IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgc2Vjb25kczogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcbiAgICAgICAgfVxuICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgc3RyaW5nVmFsdWU6IFwiXCJcbiAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICB9IDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IFdlKE9lLmVtcHR5KCksIGh0LmVtcHR5KCkpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgfVxuICAgIH0gOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBtYXBWYWx1ZToge31cbiAgICB9IDogXCJtYXBWYWx1ZVwiIGluIHQgPyBGZSA6IE8oKTtcbn1cblxuZnVuY3Rpb24gcm4odCwgZSkge1xuICAgIGNvbnN0IG4gPSBLZSh0LnZhbHVlLCBlLnZhbHVlKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiB0LmluY2x1c2l2ZSAmJiAhZS5pbmNsdXNpdmUgPyAtMSA6ICF0LmluY2x1c2l2ZSAmJiBlLmluY2x1c2l2ZSA/IDEgOiAwO1xufVxuXG5mdW5jdGlvbiBvbih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEtlKHQudmFsdWUsIGUudmFsdWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IHQuaW5jbHVzaXZlICYmICFlLmluY2x1c2l2ZSA/IDEgOiAhdC5pbmNsdXNpdmUgJiYgZS5pbmNsdXNpdmUgPyAtMSA6IDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIHVuIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdW4oe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZCh0KSB7XG4gICAgICAgIGlmICh0LmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggLSAxOyArK24pIGlmIChlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0LmdldChuKV0sIFxuICAgICAgICAgICAgIVplKGUpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0Lmxhc3RTZWdtZW50KCldLCBlIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAodC5wb3BMYXN0KCkpW3QubGFzdFNlZ21lbnQoKV0gPSB0bihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdmlkZWQgZmllbGRzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIEEgbWFwIG9mIGZpZWxkcyB0byB2YWx1ZXMgKG9yIG51bGwgZm9yIGRlbGV0ZXMpLlxuICAgICAqLyAgICBzZXRBbGwodCkge1xuICAgICAgICBsZXQgZSA9IGF0LmVtcHR5UGF0aCgpLCBuID0ge30sIHMgPSBbXTtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLmlzSW1tZWRpYXRlUGFyZW50T2YoaSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYXQgdGhpcyBwYXJlbnQgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNoYW5nZXModCwgbiwgcyksIG4gPSB7fSwgcyA9IFtdLCBlID0gaS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID8gbltpLmxhc3RTZWdtZW50KCldID0gdG4odCkgOiBzLnB1c2goaS5sYXN0U2VnbWVudCgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKGksIG4sIHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBmaWVsZCBhdCB0aGUgc3BlY2lmaWVkIHBhdGguIElmIHRoZXJlIGlzIG5vIGZpZWxkIGF0IHRoZVxuICAgICAqIHNwZWNpZmllZCBwYXRoLCBub3RoaW5nIGlzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHJlbW92ZS5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZmllbGQodC5wb3BMYXN0KCkpO1xuICAgICAgICBaZShlKSAmJiBlLm1hcFZhbHVlLmZpZWxkcyAmJiBkZWxldGUgZS5tYXBWYWx1ZS5maWVsZHNbdC5sYXN0U2VnbWVudCgpXTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBxZSh0aGlzLnZhbHVlLCB0LnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHRoYXQgY29udGFpbnMgdGhlIGxlYWYgZWxlbWVudCBvZiBgcGF0aGAuIElmIHRoZSBwYXJlbnRcbiAgICAgKiBlbnRyeSBkb2VzIG5vdCB5ZXQgZXhpc3QsIG9yIGlmIGl0IGlzIG5vdCBhIG1hcCwgYSBuZXcgbWFwIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKi8gICAgZ2V0RmllbGRzTWFwKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICBlLm1hcFZhbHVlLmZpZWxkcyB8fCAoZS5tYXBWYWx1ZSA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgbGV0IHMgPSBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV07XG4gICAgICAgICAgICBaZShzKSAmJiBzLm1hcFZhbHVlLmZpZWxkcyB8fCAocyA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZS5tYXBWYWx1ZS5maWVsZHNbdC5nZXQobildID0gcyksIGUgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLm1hcFZhbHVlLmZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYGZpZWxkc01hcGAgYnkgYWRkaW5nLCByZXBsYWNpbmcgb3IgZGVsZXRpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGdlKGUsICgoZSwgbikgPT4gdFtlXSA9IG4pKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGRlbGV0ZSB0W2VdO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1bih0bih0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gY24odCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gZ2UodC5maWVsZHMsICgodCwgbikgPT4ge1xuICAgICAgICBjb25zdCBzID0gbmV3IGF0KFsgdCBdKTtcbiAgICAgICAgaWYgKFplKG4pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gY24obi5tYXBWYWx1ZSkuZmllbGRzO1xuICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXG4gICAgICAgICAgICBlLnB1c2gocyk7IGVsc2UgXG4gICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZS5wdXNoKHMuY2hpbGQobikpO1xuICAgICAgICB9IGVsc2UgXG4gICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZSBsZWFmXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICBlLnB1c2gocyk7XG4gICAgfSkpLCBuZXcgUmUoZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyBhbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gZSwgdGhpcy52ZXJzaW9uID0gbiwgdGhpcy5yZWFkVGltZSA9IHMsIHRoaXMuY3JlYXRlVGltZSA9IGksIFxuICAgICAgICB0aGlzLmRhdGEgPSByLCB0aGlzLmRvY3VtZW50U3RhdGUgPSBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZG9jdW1lbnQgd2l0aCBubyBrbm93biB2ZXJzaW9uIG9yIGRhdGEsIGJ1dCB3aGljaCBjYW4gc2VydmUgYXNcbiAgICAgKiBiYXNlIGRvY3VtZW50IGZvciBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBuZXdJbnZhbGlkRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IGFuKHQsIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyBydC5taW4oKSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIHJ0Lm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBydC5taW4oKSwgdW4uZW1wdHkoKSwgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCB3aXRoIHRoZSBnaXZlbiBkYXRhIGF0IHRoZVxuICAgICAqIGdpdmVuIHZlcnNpb24uXG4gICAgICovICAgIHN0YXRpYyBuZXdGb3VuZERvY3VtZW50KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhbih0LCAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIGUsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBydC5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gbiwgcywgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gbm90IGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uLiAqLyAgICBzdGF0aWMgbmV3Tm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odCwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyBlLCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gcnQubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIHJ0Lm1pbigpLCB1bi5lbXB0eSgpLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHdob3NlIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgc3RhdGljIG5ld1Vua25vd25Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odCwgMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIGUsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBydC5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gcnQubWluKCksIHVuLmVtcHR5KCksIDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYW5kIHRoYXQgaXRzIHZlcnNpb25cbiAgICAgKiBhbmQgZGF0YSBhcmUga25vd24uXG4gICAgICovICAgIGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQodCwgZSkge1xuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IGlzIHN3aXRjaGluZyBzdGF0ZSBmcm9tIGJlaW5nIGFuIGludmFsaWQgb3IgZGVsZXRlZFxuICAgICAgICAvLyBkb2N1bWVudCB0byBhIHZhbGlkIChGT1VORF9ET0NVTUVOVCkgZG9jdW1lbnQsIGVpdGhlciBkdWUgdG8gcmVjZWl2aW5nIGFuXG4gICAgICAgIC8vIHVwZGF0ZSBmcm9tIFdhdGNoIG9yIGR1ZSB0byBhcHBseWluZyBhIGxvY2FsIHNldCBtdXRhdGlvbiBvbiB0b3BcbiAgICAgICAgLy8gb2YgYSBkZWxldGVkIGRvY3VtZW50LCBvdXIgYmVzdCBndWVzcyBhYm91dCBpdHMgY3JlYXRlVGltZSB3b3VsZCBiZSB0aGVcbiAgICAgICAgLy8gdmVyc2lvbiBhdCB3aGljaCB0aGUgZG9jdW1lbnQgdHJhbnNpdGlvbmVkIHRvIGEgRk9VTkRfRE9DVU1FTlQuXG4gICAgICAgIHJldHVybiAhdGhpcy5jcmVhdGVUaW1lLmlzRXF1YWwocnQubWluKCkpIHx8IDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovICE9PSB0aGlzLmRvY3VtZW50VHlwZSAmJiAwIC8qIERvY3VtZW50VHlwZS5JTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZSB8fCAodGhpcy5jcmVhdGVUaW1lID0gdCksIFxuICAgICAgICB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gZSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndCBleGlzdCBhdCB0aGUgZ2l2ZW5cbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqLyAgICBjb252ZXJ0VG9Ob0RvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgdGhpcy5kYXRhID0gdW4uZW1wdHkoKSwgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSB1bi5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIERvY3VtZW50U3RhdGUuSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXMudmVyc2lvbiA9IHJ0Lm1pbigpLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgc2V0UmVhZFRpbWUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkVGltZSA9IHQsIHRoaXM7XG4gICAgfVxuICAgIGdldCBoYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRG9jdW1lbnRTdGF0ZS5IQVNfTE9DQUxfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zIHx8IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgIH1cbiAgICBpc1ZhbGlkRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAwIC8qIERvY3VtZW50VHlwZS5JTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNGb3VuZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc05vRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzVW5rbm93bkRvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGFuICYmIHRoaXMua2V5LmlzRXF1YWwodC5rZXkpICYmIHRoaXMudmVyc2lvbi5pc0VxdWFsKHQudmVyc2lvbikgJiYgdGhpcy5kb2N1bWVudFR5cGUgPT09IHQuZG9jdW1lbnRUeXBlICYmIHRoaXMuZG9jdW1lbnRTdGF0ZSA9PT0gdC5kb2N1bWVudFN0YXRlICYmIHRoaXMuZGF0YS5pc0VxdWFsKHQuZGF0YSk7XG4gICAgfVxuICAgIG11dGFibGVDb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IGFuKHRoaXMua2V5LCB0aGlzLmRvY3VtZW50VHlwZSwgdGhpcy52ZXJzaW9uLCB0aGlzLnJlYWRUaW1lLCB0aGlzLmNyZWF0ZVRpbWUsIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7Y3JlYXRlVGltZTogJHt0aGlzLmNyZWF0ZVRpbWV9fSksIHtkb2N1bWVudFR5cGU6ICR7dGhpcy5kb2N1bWVudFR5cGV9fSksIHtkb2N1bWVudFN0YXRlOiAke3RoaXMuZG9jdW1lbnRTdGF0ZX19KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHRoZSB2YWx1ZSBmb3IgZmllbGQgYGZpZWxkYCBpbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiBUaHJvd3MgaWZcbiAqIHRoZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiBib3RoIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovXG5jbGFzcyBobiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdCwgdGhpcy5pbmNsdXNpdmUgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbG4odCwgZSwgbikge1xuICAgIGxldCBzID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IGVbaV0sIG8gPSB0LnBvc2l0aW9uW2ldO1xuICAgICAgICBpZiAoci5maWVsZC5pc0tleUZpZWxkKCkpIHMgPSBodC5jb21wYXJhdG9yKGh0LmZyb21OYW1lKG8ucmVmZXJlbmNlVmFsdWUpLCBuLmtleSk7IGVsc2Uge1xuICAgICAgICAgICAgcyA9IEtlKG8sIG4uZGF0YS5maWVsZChyLmZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSByLmRpciAmJiAocyAqPSAtMSksIDAgIT09IHMpIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBhZnRlciBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqLyBmdW5jdGlvbiBmbih0LCBlKSB7XG4gICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsID09PSBlO1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gITE7XG4gICAgaWYgKHQuaW5jbHVzaXZlICE9PSBlLmluY2x1c2l2ZSB8fCB0LnBvc2l0aW9uLmxlbmd0aCAhPT0gZS5wb3NpdGlvbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQucG9zaXRpb24ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgaWYgKCFxZSh0LnBvc2l0aW9uW25dLCBlLnBvc2l0aW9uW25dKSkgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIG9yZGVyaW5nIG9uIGEgZmllbGQsIGluIHNvbWUgRGlyZWN0aW9uLiBEaXJlY3Rpb24gZGVmYXVsdHMgdG8gQVNDRU5ESU5HLlxuICovIGNsYXNzIGRuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLmRpciA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3bih0LCBlKSB7XG4gICAgcmV0dXJuIHQuZGlyID09PSBlLmRpciAmJiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9uIHt9XG5cbmNsYXNzIG1uIGV4dGVuZHMgX24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWVsZCA9IHQsIHRoaXMub3AgPSBlLCB0aGlzLnZhbHVlID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQuaXNLZXlGaWVsZCgpID8gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBlIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSBlID8gdGhpcy5jcmVhdGVLZXlGaWVsZEluRmlsdGVyKHQsIGUsIG4pIDogbmV3IFBuKHQsIGUsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBlID8gbmV3IERuKHQsIG4pIDogXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBlID8gbmV3IENuKHQsIG4pIDogXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IGUgPyBuZXcgeG4odCwgbikgOiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZSA/IG5ldyBObih0LCBuKSA6IG5ldyBtbih0LCBlLCBuKTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBlID8gbmV3IGJuKHQsIG4pIDogbmV3IFZuKHQsIG4pO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgLy8gVHlwZXMgZG8gbm90IGhhdmUgdG8gbWF0Y2ggaW4gTk9UX0VRVUFMIGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IHRoaXMub3AgPyBudWxsICE9PSBlICYmIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oS2UoZSwgdGhpcy52YWx1ZSkpIDogbnVsbCAhPT0gZSAmJiBMZSh0aGlzLnZhbHVlKSA9PT0gTGUoZSkgJiYgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihLZShlLCB0aGlzLnZhbHVlKSk7XG4gICAgICAgIC8vIE9ubHkgY29tcGFyZSB0eXBlcyB3aXRoIG1hdGNoaW5nIGJhY2tlbmQgb3JkZXIgKHN1Y2ggYXMgZG91YmxlIGFuZCBpbnQpLlxuICAgICAgICB9XG4gICAgbWF0Y2hlc0NvbXBhcmlzb24odCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPD0gMDtcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwICE9PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPiAwO1xuXG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID49IDA7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0luZXF1YWxpdHkoKSB7XG4gICAgICAgIHJldHVybiBbIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyAsIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gLCBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gLCBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovICwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF0uaW5kZXhPZih0aGlzLm9wKSA+PSAwO1xuICAgIH1cbiAgICBnZXRGbGF0dGVuZWRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gWyB0aGlzIF07XG4gICAgfVxuICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBbIHRoaXMgXTtcbiAgICB9XG4gICAgZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzSW5lcXVhbGl0eSgpID8gdGhpcy5maWVsZCA6IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBnbiBleHRlbmRzIF9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlsdGVycyA9IHQsIHRoaXMub3AgPSBlLCB0aGlzLmx0ID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBnbih0LCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB5bih0aGlzKSA/IHZvaWQgMCA9PT0gdGhpcy5maWx0ZXJzLmZpbmQoKGUgPT4gIWUubWF0Y2hlcyh0KSkpIDogdm9pZCAwICE9PSB0aGlzLmZpbHRlcnMuZmluZCgoZSA9PiBlLm1hdGNoZXModCkpKTtcbiAgICB9XG4gICAgZ2V0RmxhdHRlbmVkRmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMubHQgfHwgKHRoaXMubHQgPSB0aGlzLmZpbHRlcnMucmVkdWNlKCgodCwgZSkgPT4gdC5jb25jYXQoZS5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpKSwgW10pKSwgXG4gICAgICAgIHRoaXMubHQ7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBtdXRhYmxlIGNvcHkgb2YgYHRoaXMuZmlsdGVyc2BcbiAgICBnZXRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihbXSwgdGhpcy5maWx0ZXJzKTtcbiAgICB9XG4gICAgZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmZ0KCh0ID0+IHQuaXNJbmVxdWFsaXR5KCkpKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgPyB0LmZpZWxkIDogbnVsbDtcbiAgICB9XG4gICAgLy8gUGVyZm9ybXMgYSBkZXB0aC1maXJzdCBzZWFyY2ggdG8gZmluZCBhbmQgcmV0dXJuIHRoZSBmaXJzdCBGaWVsZEZpbHRlciBpbiB0aGUgY29tcG9zaXRlIGZpbHRlclxuICAgIC8vIHRoYXQgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuIFJldHVybnMgYG51bGxgIGlmIG5vbmUgb2YgdGhlIEZpZWxkRmlsdGVycyBzYXRpc2Z5IHRoZVxuICAgIC8vIHByZWRpY2F0ZS5cbiAgICBmdCh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgaWYgKHQoZSkpIHJldHVybiBlO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHluKHQpIHtcbiAgICByZXR1cm4gXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gPT09IHQub3A7XG59XG5cbmZ1bmN0aW9uIHBuKHQpIHtcbiAgICByZXR1cm4gXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovID09PSB0Lm9wO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpbHRlciBpcyBhIGNvbmp1bmN0aW9uIG9mIGZpZWxkIGZpbHRlcnMgb25seS4gUmV0dXJucyBmYWxzZSBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gSW4odCkge1xuICAgIHJldHVybiBUbih0KSAmJiB5bih0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWx0ZXIgZG9lcyBub3QgY29udGFpbiBhbnkgY29tcG9zaXRlIGZpbHRlcnMuIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIFRuKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSBpZiAoZSBpbnN0YW5jZW9mIGduKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG5mdW5jdGlvbiBFbih0KSB7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBtbikgXG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGVjaG5pY2FsbHksIHRoaXMgd29uJ3QgYmUgdW5pcXVlIGlmIHR3byB2YWx1ZXMgaGF2ZVxuICAgIC8vIHRoZSBzYW1lIGRlc2NyaXB0aW9uLCBzdWNoIGFzIHRoZSBpbnQgMyBhbmQgdGhlIHN0cmluZyBcIjNcIi4gU28gd2Ugc2hvdWxkXG4gICAgLy8gYWRkIHRoZSB0eXBlcyBpbiBoZXJlIHNvbWVob3csIHRvby5cbiAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQub3AudG9TdHJpbmcoKSArIFFlKHQudmFsdWUpO1xuICAgIGlmIChJbih0KSkgXG4gICAgLy8gT2xkZXIgU0RLIHZlcnNpb25zIHVzZSBhbiBpbXBsaWNpdCBBTkQgb3BlcmF0aW9uIGJldHdlZW4gdGhlaXIgZmlsdGVycy5cbiAgICAvLyBJbiB0aGUgbmV3IFNESyB2ZXJzaW9ucywgdGhlIGRldmVsb3BlciBtYXkgdXNlIGFuIGV4cGxpY2l0IEFORCBmaWx0ZXIuXG4gICAgLy8gVG8gc3RheSBjb25zaXN0ZW50IHdpdGggdGhlIG9sZCB1c2FnZXMsIHdlIGFkZCBhIHNwZWNpYWwgY2FzZSB0byBlbnN1cmVcbiAgICAvLyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGVzZSB0d28gYXJlIHRoZSBzYW1lLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBgY29sLndoZXJlRXF1YWxzKFwiYVwiLCAxKS53aGVyZUVxdWFscyhcImJcIiwgMilgIHNob3VsZCBoYXZlIHRoZSBzYW1lXG4gICAgLy8gY2Fub25pY2FsIElEIGFzIGBjb2wud2hlcmUoYW5kKGVxdWFscyhcImFcIiwxKSwgZXF1YWxzKFwiYlwiLDIpKSlgLlxuICAgIHJldHVybiB0LmZpbHRlcnMubWFwKCh0ID0+IEVuKHQpKSkuam9pbihcIixcIik7XG4gICAge1xuICAgICAgICAvLyBmaWx0ZXIgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXJcbiAgICAgICAgY29uc3QgZSA9IHQuZmlsdGVycy5tYXAoKHQgPT4gRW4odCkpKS5qb2luKFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIGAke3Qub3B9KCR7ZX0pYDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEFuKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG1uID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIG1uICYmIHQub3AgPT09IGUub3AgJiYgdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpICYmIHFlKHQudmFsdWUsIGUudmFsdWUpO1xuICAgIH0odCwgZSkgOiB0IGluc3RhbmNlb2YgZ24gPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgZ24gJiYgdC5vcCA9PT0gZS5vcCAmJiB0LmZpbHRlcnMubGVuZ3RoID09PSBlLmZpbHRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5maWx0ZXJzLnJlZHVjZSgoKHQsIG4sIHMpID0+IHQgJiYgQW4obiwgZS5maWx0ZXJzW3NdKSksICEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wb3NpdGUgZmlsdGVyIHRoYXQgY29udGFpbnMgYWxsIGZpbHRlciBmcm9tXG4gKiBgY29tcG9zaXRlRmlsdGVyYCBwbHVzIGFsbCB0aGUgZ2l2ZW4gZmlsdGVycyBpbiBgb3RoZXJGaWx0ZXJzYC5cbiAqLyAodCwgZSkgOiB2b2lkIE8oKTtcbn1cblxuZnVuY3Rpb24gdm4odCwgZSkge1xuICAgIGNvbnN0IG4gPSB0LmZpbHRlcnMuY29uY2F0KGUpO1xuICAgIHJldHVybiBnbi5jcmVhdGUobiwgdC5vcCk7XG59XG5cbi8qKiBSZXR1cm5zIGEgZGVidWcgZGVzY3JpcHRpb24gZm9yIGBmaWx0ZXJgLiAqLyBmdW5jdGlvbiBSbih0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBtbiA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGAke3QuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICR7dC5vcH0gJHtRZSh0LnZhbHVlKX1gO1xuICAgIH1cbiAgICAvKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIChpLmUuICdfX25hbWVfXycpLiAqLyAodCkgOiB0IGluc3RhbmNlb2YgZ24gPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB0Lm9wLnRvU3RyaW5nKCkgKyBcIiB7XCIgKyB0LmdldEZpbHRlcnMoKS5tYXAoUm4pLmpvaW4oXCIgLFwiKSArIFwifVwiO1xuICAgIH0odCkgOiBcIkZpbHRlclwiO1xufVxuXG5jbGFzcyBQbiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCB0aGlzLmtleSA9IGh0LmZyb21OYW1lKG4ucmVmZXJlbmNlVmFsdWUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGh0LmNvbXBhcmF0b3IodC5rZXksIHRoaXMua2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oZSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3MgYm4gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBlKSwgdGhpcy5rZXlzID0gU24oXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQua2V5KSkpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyBub3QgcHJlc2VudCB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIFZuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBlKSwgdGhpcy5rZXlzID0gU24oXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5rZXlzLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQua2V5KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gU24odCwgZSkge1xuICAgIHZhciBuO1xuICAgIHJldHVybiAoKG51bGwgPT09IChuID0gZS5hcnJheVZhbHVlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnZhbHVlcykgfHwgW10pLm1hcCgodCA9PiBodC5mcm9tTmFtZSh0LnJlZmVyZW5jZVZhbHVlKSkpO1xufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucyBvcGVyYXRvci4gKi8gY2xhc3MgRG4gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBKZShlKSAmJiBVZShlLmFycmF5VmFsdWUsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgSU4gb3BlcmF0b3IuICovIGNsYXNzIENuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiBVZSh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgbm90LWluIG9wZXJhdG9yLiAqLyBjbGFzcyB4biBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBpZiAoVWUodGhpcy52YWx1ZS5hcnJheVZhbHVlLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmICFVZSh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMtYW55IG9wZXJhdG9yLiAqLyBjbGFzcyBObiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gISghSmUoZSkgfHwgIWUuYXJyYXlWYWx1ZS52YWx1ZXMpICYmIGUuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZSgodCA9PiBVZSh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHQpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3Mga24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMub3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIHRoaXMubGltaXQgPSBpLCBcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gciwgdGhpcy5lbmRBdCA9IG8sIHRoaXMuZHQgPSBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIFRhcmdldCB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gKlxuICogTk9URTogeW91IHNob3VsZCBhbHdheXMgY29uc3RydWN0IGBUYXJnZXRgIGZyb20gYFF1ZXJ5LnRvVGFyZ2V0YCBpbnN0ZWFkIG9mXG4gKiB1c2luZyB0aGlzIGZhY3RvcnkgbWV0aG9kLCBiZWNhdXNlIGBRdWVyeWAgcHJvdmlkZXMgYW4gaW1wbGljaXQgYG9yZGVyQnlgXG4gKiBwcm9wZXJ0eS5cbiAqLyBmdW5jdGlvbiBNbih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gbnVsbCwgbyA9IG51bGwpIHtcbiAgICByZXR1cm4gbmV3IGtuKHQsIGUsIG4sIHMsIGksIHIsIG8pO1xufVxuXG5mdW5jdGlvbiAkbih0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgaWYgKG51bGwgPT09IGUuZHQpIHtcbiAgICAgICAgbGV0IHQgPSBlLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwifGNnOlwiICsgZS5jb2xsZWN0aW9uR3JvdXApLCB0ICs9IFwifGY6XCIsIHQgKz0gZS5maWx0ZXJzLm1hcCgodCA9PiBFbih0KSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgdCArPSBcInxvYjpcIiwgdCArPSBlLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgICAgICAgICAgcmV0dXJuIHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0LmRpcjtcbiAgICAgICAgfSh0KSkpLmpvaW4oXCIsXCIpLCBGdChlLmxpbWl0KSB8fCAodCArPSBcInxsOlwiLCB0ICs9IGUubGltaXQpLCBlLnN0YXJ0QXQgJiYgKHQgKz0gXCJ8bGI6XCIsIFxuICAgICAgICB0ICs9IGUuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIHQgKz0gZS5zdGFydEF0LnBvc2l0aW9uLm1hcCgodCA9PiBRZSh0KSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGUuZW5kQXQgJiYgKHQgKz0gXCJ8dWI6XCIsIHQgKz0gZS5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIHQgKz0gZS5lbmRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gUWUodCkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICBlLmR0ID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIGUuZHQ7XG59XG5cbmZ1bmN0aW9uIE9uKHQsIGUpIHtcbiAgICBpZiAodC5saW1pdCAhPT0gZS5saW1pdCkgcmV0dXJuICExO1xuICAgIGlmICh0Lm9yZGVyQnkubGVuZ3RoICE9PSBlLm9yZGVyQnkubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lm9yZGVyQnkubGVuZ3RoOyBuKyspIGlmICghd24odC5vcmRlckJ5W25dLCBlLm9yZGVyQnlbbl0pKSByZXR1cm4gITE7XG4gICAgaWYgKHQuZmlsdGVycy5sZW5ndGggIT09IGUuZmlsdGVycy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQuZmlsdGVycy5sZW5ndGg7IG4rKykgaWYgKCFBbih0LmZpbHRlcnNbbl0sIGUuZmlsdGVyc1tuXSkpIHJldHVybiAhMTtcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmICghIXQucGF0aC5pc0VxdWFsKGUucGF0aCkgJiYgKCEhZm4odC5zdGFydEF0LCBlLnN0YXJ0QXQpICYmIGZuKHQuZW5kQXQsIGUuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIEZuKHQpIHtcbiAgICByZXR1cm4gaHQuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBmaWVsZCBmaWx0ZXJzIHRoYXQgdGFyZ2V0IHRoZSBnaXZlbiBmaWVsZCBwYXRoLiAqLyBmdW5jdGlvbiBCbih0LCBlKSB7XG4gICAgcmV0dXJuIHQuZmlsdGVycy5maWx0ZXIoKHQgPT4gdCBpbnN0YW5jZW9mIG1uICYmIHQuZmllbGQuaXNFcXVhbChlKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWVxuICogZmlsdGVycy4gUmV0dXJucyBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIGxvd2VyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgdXBwZXIgYm91bmQgZm9yIGFuIGRlc2NlbmRpbmcgc2VnbWVudCkuXG4gKi9cbmZ1bmN0aW9uIExuKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IEJlLCBpID0gITA7XG4gICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICBmb3IgKGNvbnN0IG4gb2YgQm4odCwgZSkpIHtcbiAgICAgICAgbGV0IHQgPSBCZSwgZSA9ICEwO1xuICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgY2FzZSBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHQgPSBubihuLnZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgdCA9IG4udmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHQgPSBuLnZhbHVlLCBlID0gITE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICB0ID0gQmU7XG4gLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgbG93ZXIgYm91bmRzLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcm4oe1xuICAgICAgICAgICAgdmFsdWU6IHMsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGVcbiAgICAgICAgfSkgPCAwICYmIChzID0gdCwgaSA9IGUpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCByID0gMDsgciA8IHQub3JkZXJCeS5sZW5ndGg7ICsrcikge1xuICAgICAgICBpZiAodC5vcmRlckJ5W3JdLmZpZWxkLmlzRXF1YWwoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLnBvc2l0aW9uW3JdO1xuICAgICAgICAgICAgcm4oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBzLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0LFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogbi5pbmNsdXNpdmVcbiAgICAgICAgICAgIH0pIDwgMCAmJiAocyA9IHQsIGkgPSBuLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIHVwcGVyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgbG93ZXIgYm91bmQgZm9yIGEgZGVzY2VuZGluZyBzZWdtZW50KS5cbiAqLyBmdW5jdGlvbiBxbih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBGZSwgaSA9ICEwO1xuICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgZm9yIChjb25zdCBuIG9mIEJuKHQsIGUpKSB7XG4gICAgICAgIGxldCB0ID0gRmUsIGUgPSAhMDtcbiAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICB0ID0gc24obi52YWx1ZSksIGUgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgdCA9IG4udmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIHQgPSBuLnZhbHVlLCBlID0gITE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICB0ID0gRmU7XG4gLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgdXBwZXIgYm91bmRzLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgb24oe1xuICAgICAgICAgICAgdmFsdWU6IHMsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGVcbiAgICAgICAgfSkgPiAwICYmIChzID0gdCwgaSA9IGUpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCByID0gMDsgciA8IHQub3JkZXJCeS5sZW5ndGg7ICsrcikge1xuICAgICAgICBpZiAodC5vcmRlckJ5W3JdLmZpZWxkLmlzRXF1YWwoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLnBvc2l0aW9uW3JdO1xuICAgICAgICAgICAgb24oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBzLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0LFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogbi5pbmNsdXNpdmVcbiAgICAgICAgICAgIH0pID4gMCAmJiAocyA9IHQsIGkgPSBuLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdGhlIG51bWJlciBvZiBzZWdtZW50cyBvZiBhIHBlcmZlY3QgaW5kZXggZm9yIHRoaXMgdGFyZ2V0LiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUXVlcnkgZW5jYXBzdWxhdGVzIGFsbCB0aGUgcXVlcnkgYXR0cmlidXRlcyB3ZSBzdXBwb3J0IGluIHRoZSBTREsuIEl0IGNhblxuICogYmUgcnVuIGFnYWluc3QgdGhlIExvY2FsU3RvcmUsIGFzIHdlbGwgYXMgYmUgY29udmVydGVkIHRvIGEgYFRhcmdldGAgdG9cbiAqIHF1ZXJ5IHRoZSBSZW1vdGVTdG9yZSByZXN1bHRzLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmNsYXNzIFVuIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIG8gPSBudWxsLCB1ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHIsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSB1LCB0aGlzLnd0ID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5fdCA9IG51bGwsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdDtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGluc3RhbmNlIHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQuICovIGZ1bmN0aW9uIEtuKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUpIHtcbiAgICByZXR1cm4gbmV3IFVuKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyBhdCBgcGF0aGAgKi8gZnVuY3Rpb24gR24odCkge1xuICAgIHJldHVybiBuZXcgVW4odCk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IGludG8gYSBjb2xsZWN0aW9uIHF1ZXJ5IGF0IGFcbiAqIHNwZWNpZmljIHBhdGguIFRoaXMgaXMgdXNlZCB3aGVuIGV4ZWN1dGluZyBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMsIHNpbmNlXG4gKiB3ZSBoYXZlIHRvIHNwbGl0IHRoZSBxdWVyeSBpbnRvIGEgc2V0IG9mIGNvbGxlY3Rpb24gcXVlcmllcyBhdCBtdWx0aXBsZVxuICogcGF0aHMuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgcXVlcnkgZG9lcyBub3Qgc3BlY2lmeSBhbnkgcXVlcnkgY29uc3RyYWludHMgdGhhdFxuICogY291bGQgcmVtb3ZlIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIFFuKHQpIHtcbiAgICByZXR1cm4gMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSB0LmxpbWl0ICYmIG51bGwgPT0gdC5zdGFydEF0ICYmIG51bGwgPT0gdC5lbmRBdCAmJiAoMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xufVxuXG5mdW5jdGlvbiBqbih0KSB7XG4gICAgcmV0dXJuIHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZCA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHpuKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCk7XG4gICAgICAgIGlmIChudWxsICE9PSB0KSByZXR1cm4gdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzXG4gKiB3aXRoaW4gdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgY29sbGVjdGlvbiBncm91cCByYXRoZXIgdGhhbiBhIHNwZWNpZmljXG4gKiBjb2xsZWN0aW9uLlxuICovXG5mdW5jdGlvbiBXbih0KSB7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltcGxpY2l0IG9yZGVyIGJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlciBieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLlxuICovIGZ1bmN0aW9uIEhuKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS53dCkge1xuICAgICAgICBlLnd0ID0gW107XG4gICAgICAgIGNvbnN0IHQgPSB6bihlKSwgbiA9IGpuKGUpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiBudWxsID09PSBuKSBcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gaW1wbGljaXRseSBhZGQga2V5IG9yZGVyaW5nLCB3ZSBtdXN0IGFsc28gYWRkIHRoZVxuICAgICAgICAvLyBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZCBmb3IgaXQgdG8gYmUgYSB2YWxpZCBxdWVyeS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGluZXF1YWxpdHkgZmllbGQgYW5kIGtleSBvcmRlcmluZyBpcyBhc2NlbmRpbmcuXG4gICAgICAgIHQuaXNLZXlGaWVsZCgpIHx8IGUud3QucHVzaChuZXcgZG4odCkpLCBlLnd0LnB1c2gobmV3IGRuKGF0LmtleUZpZWxkKCksIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5leHBsaWNpdE9yZGVyQnkpIGUud3QucHVzaChuKSwgbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgKHQgPSAhMCk7XG4gICAgICAgICAgICBpZiAoIXQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyIGJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyBlLmV4cGxpY2l0T3JkZXJCeVtlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi87XG4gICAgICAgICAgICAgICAgZS53dC5wdXNoKG5ldyBkbihhdC5rZXlGaWVsZCgpLCB0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUud3Q7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0J3MgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBKbih0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgaWYgKCFlLl90KSBpZiAoXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSBlLmxpbWl0VHlwZSkgZS5fdCA9IE1uKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIEhuKGUpLCBlLmZpbHRlcnMsIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCk7IGVsc2Uge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIEhuKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IG4uZGlyID8gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDogXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG4gICAgICAgICAgICB0LnB1c2gobmV3IGRuKG4uZmllbGQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmVuZEF0ID8gbmV3IGhuKGUuZW5kQXQucG9zaXRpb24sIGUuZW5kQXQuaW5jbHVzaXZlKSA6IG51bGwsIHMgPSBlLnN0YXJ0QXQgPyBuZXcgaG4oZS5zdGFydEF0LnBvc2l0aW9uLCBlLnN0YXJ0QXQuaW5jbHVzaXZlKSA6IG51bGw7XG4gICAgICAgIC8vIE5vdyByZXR1cm4gYXMgYSBMaW1pdFR5cGUuRmlyc3QgcXVlcnkuXG4gICAgICAgIGUuX3QgPSBNbihlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIG4sIHMpO1xuICAgIH1cbiAgICByZXR1cm4gZS5fdDtcbn1cblxuZnVuY3Rpb24gWW4odCwgZSkge1xuICAgIGUuZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKSwgem4odCk7XG4gICAgY29uc3QgbiA9IHQuZmlsdGVycy5jb25jYXQoWyBlIF0pO1xuICAgIHJldHVybiBuZXcgVW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgbiwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIFhuKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gbmV3IFVuKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCBlLCBuLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xufVxuXG5mdW5jdGlvbiBabih0LCBlKSB7XG4gICAgcmV0dXJuIE9uKEpuKHQpLCBKbihlKSkgJiYgdC5saW1pdFR5cGUgPT09IGUubGltaXRUeXBlO1xufVxuXG4vLyBUT0RPKGIvMjkxODMxNjUpOiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgdW5pcXVlIHN0cmluZyBmcm9tIGEgcXVlcnkgdG8sIGZvclxuLy8gZXhhbXBsZSwgdXNlIGFzIGEgZGljdGlvbmFyeSBrZXksIGJ1dCB0aGUgaW1wbGVtZW50YXRpb24gaXMgc3ViamVjdCB0b1xuLy8gY29sbGlzaW9ucy4gTWFrZSBpdCBjb2xsaXNpb24tZnJlZS5cbmZ1bmN0aW9uIHRzKHQpIHtcbiAgICByZXR1cm4gYCR7JG4oSm4odCkpfXxsdDoke3QubGltaXRUeXBlfWA7XG59XG5cbmZ1bmN0aW9uIGVzKHQpIHtcbiAgICByZXR1cm4gYFF1ZXJ5KHRhcmdldD0ke2Z1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoZSArPSBcIiBjb2xsZWN0aW9uR3JvdXA9XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIFxuICAgICAgICB0LmZpbHRlcnMubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBmaWx0ZXJzOiBbJHt0LmZpbHRlcnMubWFwKCh0ID0+IFJuKHQpKSkuam9pbihcIiwgXCIpfV1gKSwgXG4gICAgICAgIEZ0KHQubGltaXQpIHx8IChlICs9IFwiLCBsaW1pdDogXCIgKyB0LmxpbWl0KSwgdC5vcmRlckJ5Lmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgb3JkZXJCeTogWyR7dC5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gKCR7dC5kaXJ9KWA7XG4gICAgICAgIH0odCkpKS5qb2luKFwiLCBcIil9XWApLCB0LnN0YXJ0QXQgJiYgKGUgKz0gXCIsIHN0YXJ0QXQ6IFwiLCBlICs9IHQuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIFxuICAgICAgICBlICs9IHQuc3RhcnRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gUWUodCkpKS5qb2luKFwiLFwiKSksIHQuZW5kQXQgJiYgKGUgKz0gXCIsIGVuZEF0OiBcIiwgXG4gICAgICAgIGUgKz0gdC5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIGUgKz0gdC5lbmRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gUWUodCkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICBgVGFyZ2V0KCR7ZX0pYDtcbiAgICB9KEpuKHQpKX07IGxpbWl0VHlwZT0ke3QubGltaXRUeXBlfSlgO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIGBkb2NgIG1hdGNoZXMgdGhlIGNvbnN0cmFpbnRzIG9mIGBxdWVyeWAuICovIGZ1bmN0aW9uIG5zKHQsIGUpIHtcbiAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmtleS5wYXRoO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgPyBlLmtleS5oYXNDb2xsZWN0aW9uSWQodC5jb2xsZWN0aW9uR3JvdXApICYmIHQucGF0aC5pc1ByZWZpeE9mKG4pIDogaHQuaXNEb2N1bWVudEtleSh0LnBhdGgpID8gdC5wYXRoLmlzRXF1YWwobikgOiB0LnBhdGguaXNJbW1lZGlhdGVQYXJlbnRPZihuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIGRvY3VtZW50IG11c3QgaGF2ZSBhIHZhbHVlIGZvciBldmVyeSBvcmRlcmluZyBjbGF1c2UgaW4gb3JkZXIgdG8gc2hvdyB1cFxuICogaW4gdGhlIHJlc3VsdHMuXG4gKi8gKHQsIGUpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gV2UgbXVzdCB1c2UgYHF1ZXJ5T3JkZXJCeSgpYCB0byBnZXQgdGhlIGxpc3Qgb2YgYWxsIG9yZGVyQnlzIChib3RoIGltcGxpY2l0IGFuZCBleHBsaWNpdCkuXG4gICAgICAgIC8vIE5vdGUgdGhhdCBmb3IgT1IgcXVlcmllcywgb3JkZXJCeSBhcHBsaWVzIHRvIGFsbCBkaXNqdW5jdGlvbiB0ZXJtcyBhbmQgaW1wbGljaXQgb3JkZXJCeXMgbXVzdFxuICAgICAgICAvLyBiZSB0YWtlbiBpbnRvIGFjY291bnQuIEZvciBleGFtcGxlLCB0aGUgcXVlcnkgXCJhID4gMSB8fCBiPT0xXCIgaGFzIGFuIGltcGxpY2l0IFwib3JkZXJCeSBhXCIgZHVlXG4gICAgICAgIC8vIHRvIHRoZSBpbmVxdWFsaXR5LCBhbmQgaXMgZXZhbHVhdGVkIGFzIFwiYSA+IDEgb3JkZXJCeSBhIHx8IGI9PTEgb3JkZXJCeSBhXCIuXG4gICAgICAgIC8vIEEgZG9jdW1lbnQgd2l0aCBjb250ZW50IG9mIHtiOjF9IG1hdGNoZXMgdGhlIGZpbHRlcnMsIGJ1dCBkb2VzIG5vdCBtYXRjaCB0aGUgb3JkZXJCeSBiZWNhdXNlXG4gICAgICAgIC8vIGl0J3MgbWlzc2luZyB0aGUgZmllbGQgJ2EnLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgSG4odCkpIFxuICAgICAgICAvLyBvcmRlciBieSBrZXkgYWx3YXlzIG1hdGNoZXNcbiAgICAgICAgaWYgKCFuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiBudWxsID09PSBlLmRhdGEuZmllbGQobi5maWVsZCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH0odCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoIW4ubWF0Y2hlcyhlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBzdXJlIGEgZG9jdW1lbnQgaXMgd2l0aGluIHRoZSBib3VuZHMsIGlmIHByb3ZpZGVkLiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAodC5zdGFydEF0ICYmICFcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBiZWZvcmUgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IGxuKHQsIGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIHQuaW5jbHVzaXZlID8gcyA8PSAwIDogcyA8IDA7XG4gICAgICAgIH0odC5zdGFydEF0LCBIbih0KSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHQuZW5kQXQgJiYgIWZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBsbih0LCBlLCBuKTtcbiAgICAgICAgICAgIHJldHVybiB0LmluY2x1c2l2ZSA/IHMgPj0gMCA6IHMgPiAwO1xuICAgICAgICB9KHQuZW5kQXQsIEhuKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyB0aGUgY29sbGVjdGlvbiBncm91cCB0aGF0IHRoaXMgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgU0RLIHRvIGZhY2lsaXRhdGUgbXVsdGktdGFiXG4gKiBzeW5jaHJvbml6YXRpb24gZm9yIHF1ZXJ5IHJlc3VsdHMuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiBzcyh0KSB7XG4gICAgcmV0dXJuIHQuY29sbGVjdGlvbkdyb3VwIHx8ICh0LnBhdGgubGVuZ3RoICUgMiA9PSAxID8gdC5wYXRoLmxhc3RTZWdtZW50KCkgOiB0LnBhdGguZ2V0KHQucGF0aC5sZW5ndGggLSAyKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wYXJhdG9yIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcGFyZSB0d28gZG9jdW1lbnRzXG4gKiBiYXNlZCBvbiB0aGUgUXVlcnkncyBvcmRlcmluZyBjb25zdHJhaW50LlxuICovIGZ1bmN0aW9uIGlzKHQpIHtcbiAgICByZXR1cm4gKGUsIG4pID0+IHtcbiAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIEhuKHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcnMoaSwgZSwgbik7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBzID0gcyB8fCBpLmZpZWxkLmlzS2V5RmllbGQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBycyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuZmllbGQuaXNLZXlGaWVsZCgpID8gaHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5kYXRhLmZpZWxkKHQpLCBpID0gbi5kYXRhLmZpZWxkKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gcyAmJiBudWxsICE9PSBpID8gS2UocywgaSkgOiBPKCk7XG4gICAgfSh0LmZpZWxkLCBlLCBuKTtcbiAgICBzd2l0Y2ggKHQuZGlyKSB7XG4gICAgICBjYXNlIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiBzO1xuXG4gICAgICBjYXNlIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIC0xICogcztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE8oKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBoYXZlIGFuXG4gKiBhc3NvY2lhdGVkIGVxdWFscyBmdW5jdGlvbiBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmVcbiAqIHN0b3JlZCB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxuICovIGNsYXNzIG9zIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubWFwS2V5Rm4gPSB0LCB0aGlzLmVxdWFsc0ZuID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5uZXIgbWFwIGZvciBhIGtleS92YWx1ZSBwYWlyLiBEdWUgdG8gdGhlIHBvc3NpYmlsaXR5IG9mIGNvbGxpc2lvbnMgd2VcbiAgICAgICAgICoga2VlcCBhIGxpc3Qgb2YgZW50cmllcyB0aGF0IHdlIGRvIGEgbGluZWFyIHNlYXJjaCB0aHJvdWdoIHRvIGZpbmQgYW4gYWN0dWFsXG4gICAgICAgICAqIG1hdGNoLiBOb3RlIHRoYXQgY29sbGlzaW9ucyBzaG91bGQgYmUgcmFyZSwgc28gd2Ugc3RpbGwgZXhwZWN0IG5lYXJcbiAgICAgICAgICogY29uc3RhbnQgdGltZSBsb29rdXBzIGluIHByYWN0aWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbm5lciA9IHt9LCBcbiAgICAgICAgLyoqIFRoZSBudW1iZXIgb2YgZW50cmllcyBzdG9yZWQgaW4gdGhlIG1hcCAqL1xuICAgICAgICB0aGlzLmlubmVyU2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKiBHZXQgYSB2YWx1ZSBmb3IgdGhpcyBrZXksIG9yIHVuZGVmaW5lZCBpZiBpdCBkb2VzIG5vdCBleGlzdC4gKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubWFwS2V5Rm4odCksIG4gPSB0aGlzLmlubmVyW2VdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBuKSBmb3IgKGNvbnN0IFtlLCBzXSBvZiBuKSBpZiAodGhpcy5lcXVhbHNGbihlLCB0KSkgcmV0dXJuIHM7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZ2V0KHQpO1xuICAgIH1cbiAgICAvKiogUHV0IHRoaXMga2V5IGFuZCB2YWx1ZSBpbiB0aGUgbWFwLiAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5tYXBLZXlGbih0KSwgcyA9IHRoaXMuaW5uZXJbbl07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHJldHVybiB0aGlzLmlubmVyW25dID0gWyBbIHQsIGUgXSBdLCB2b2lkIHRoaXMuaW5uZXJTaXplKys7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgcy5sZW5ndGg7IG4rKykgaWYgKHRoaXMuZXF1YWxzRm4oc1tuXVswXSwgdCkpIFxuICAgICAgICAvLyBUaGlzIGlzIHVwZGF0aW5nIGFuIGV4aXN0aW5nIGVudHJ5IGFuZCBkb2VzIG5vdCBpbmNyZWFzZSBgaW5uZXJTaXplYC5cbiAgICAgICAgcmV0dXJuIHZvaWQgKHNbbl0gPSBbIHQsIGUgXSk7XG4gICAgICAgIHMucHVzaChbIHQsIGUgXSksIHRoaXMuaW5uZXJTaXplKys7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGlzIGtleSBmcm9tIHRoZSBtYXAuIFJldHVybnMgYSBib29sZWFuIGlmIGFueXRoaW5nIHdhcyBkZWxldGVkLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBuLmxlbmd0aDsgcysrKSBpZiAodGhpcy5lcXVhbHNGbihuW3NdWzBdLCB0KSkgcmV0dXJuIDEgPT09IG4ubGVuZ3RoID8gZGVsZXRlIHRoaXMuaW5uZXJbZV0gOiBuLnNwbGljZShzLCAxKSwgXG4gICAgICAgIHRoaXMuaW5uZXJTaXplLS0sICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICBnZSh0aGlzLmlubmVyLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIHQoZSwgcyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHllKHRoaXMuaW5uZXIpO1xuICAgIH1cbiAgICBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lclNpemU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB1cyA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gY3MoKSB7XG4gICAgcmV0dXJuIHVzO1xufVxuXG5jb25zdCBhcyA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gaHMoLi4udCkge1xuICAgIGxldCBlID0gYXM7XG4gICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmluc2VydChuLmtleSwgbik7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGxzKHQpIHtcbiAgICBsZXQgZSA9IGFzO1xuICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiBlID0gZS5pbnNlcnQodCwgbi5vdmVybGF5ZWREb2N1bWVudCkpKSwgZTtcbn1cblxuZnVuY3Rpb24gZnMoKSB7XG4gICAgcmV0dXJuIHdzKCk7XG59XG5cbmZ1bmN0aW9uIGRzKCkge1xuICAgIHJldHVybiB3cygpO1xufVxuXG5mdW5jdGlvbiB3cygpIHtcbiAgICByZXR1cm4gbmV3IG9zKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbmNvbnN0IF9zID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuXG5jb25zdCBtcyA9IG5ldyBFZShodC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gZ3MoLi4udCkge1xuICAgIGxldCBlID0gbXM7XG4gICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmFkZChuKTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3QgeXMgPSBuZXcgRWUoZXQpO1xuXG5mdW5jdGlvbiBwcygpIHtcbiAgICByZXR1cm4geXM7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYW4gRG91YmxlVmFsdWUgZm9yIGB2YWx1ZWAgdGhhdCBpcyBlbmNvZGVkIGJhc2VkIHRoZSBzZXJpYWxpemVyJ3NcbiAqIGB1c2VQcm90bzNKc29uYCBzZXR0aW5nLlxuICovIGZ1bmN0aW9uIElzKHQsIGUpIHtcbiAgICBpZiAodC51c2VQcm90bzNKc29uKSB7XG4gICAgICAgIGlmIChpc05hTihlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIk5hTlwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAxIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIkluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IC0xIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIi1JbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBCdChlKSA/IFwiLTBcIiA6IGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIFRzKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IFwiXCIgKyB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICogVGhlIHJldHVybiB2YWx1ZSBpcyBhbiBJbnRlZ2VyVmFsdWUgaWYgaXQgY2FuIHNhZmVseSByZXByZXNlbnQgdGhlIHZhbHVlLFxuICogb3RoZXJ3aXNlIGEgRG91YmxlVmFsdWUgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gRXModCwgZSkge1xuICAgIHJldHVybiBMdChlKSA/IFRzKGUpIDogSXModCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVXNlZCB0byByZXByZXNlbnQgYSBmaWVsZCB0cmFuc2Zvcm0gb24gYSBtdXRhdGlvbi4gKi8gY2xhc3MgQXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgc3RydWN0dXJhbCB0eXBlIG9mIGBUcmFuc2Zvcm1PcGVyYXRpb25gIGlzIHVuaXF1ZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNTQ1MVxuICAgICAgICB0aGlzLl8gPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBsb2NhbCB0cmFuc2Zvcm0gcmVzdWx0IGFnYWluc3QgdGhlIHByb3ZpZGVkIGBwcmV2aW91c1ZhbHVlYCxcbiAqIG9wdGlvbmFsbHkgdXNpbmcgdGhlIHByb3ZpZGVkIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIHZzKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGJzID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwic2VydmVyX3RpbWVzdGFtcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3dyaXRlX3RpbWVfXzoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogdC5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFub3M6IHQubmFub3NlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gV2Ugc2hvdWxkIGF2b2lkIHN0b3JpbmcgZGVlcGx5IG5lc3RlZCBzZXJ2ZXIgdGltZXN0YW1wIG1hcCB2YWx1ZXNcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBuZXZlciB1c2UgdGhlIGludGVybWVkaWF0ZSBcInByZXZpb3VzIHZhbHVlc1wiLlxuICAgICAgICAvLyBGb3IgZXhhbXBsZTpcbiAgICAgICAgLy8gcHJldmlvdXM6IDQyTCwgYWRkOiB0MSwgcmVzdWx0OiB0MSAtPiA0MkxcbiAgICAgICAgLy8gcHJldmlvdXM6IHQxLCAgYWRkOiB0MiwgcmVzdWx0OiB0MiAtPiA0MkwgKE5PVCB0MiAtPiB0MSAtPiA0MkwpXG4gICAgICAgIC8vIHByZXZpb3VzOiB0MiwgIGFkZDogdDMsIHJlc3VsdDogdDMgLT4gNDJMIChOT1QgdDMgLT4gdDIgLT4gdDEgLT4gNDJMKVxuICAgICAgICAvLyBgZ2V0UHJldmlvdXNWYWx1ZWAgcmVjdXJzaXZlbHkgdHJhdmVyc2VzIHNlcnZlciB0aW1lc3RhbXBzIHRvIGZpbmQgdGhlXG4gICAgICAgIC8vIGxlYXN0IHJlY2VudCBWYWx1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiBOZShlKSAmJiAoZSA9IGtlKGUpKSwgZSAmJiAobi5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fID0gZSksIFxuICAgICAgICB7XG4gICAgICAgICAgICBtYXBWYWx1ZTogblxuICAgICAgICB9O1xuICAgIH0obiwgZSkgOiB0IGluc3RhbmNlb2YgVnMgPyBTcyh0LCBlKSA6IHQgaW5zdGFuY2VvZiBEcyA/IENzKHQsIGUpIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxuICAgICAgICBjb25zdCBuID0gUHModCwgZSksIHMgPSBOcyhuKSArIE5zKHQuZ3QpO1xuICAgICAgICByZXR1cm4gSGUobikgJiYgSGUodC5ndCkgPyBUcyhzKSA6IElzKHQuc2VyaWFsaXplciwgcyk7XG4gICAgfSh0LCBlKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGZpbmFsIHRyYW5zZm9ybSByZXN1bHQgYWZ0ZXIgdGhlIHRyYW5zZm9ybSBoYXMgYmVlbiBhY2tub3dsZWRnZWRcbiAqIGJ5IHRoZSBzZXJ2ZXIsIHBvdGVudGlhbGx5IHVzaW5nIHRoZSBzZXJ2ZXItcHJvdmlkZWQgdHJhbnNmb3JtUmVzdWx0LlxuICovIGZ1bmN0aW9uIFJzKHQsIGUsIG4pIHtcbiAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcbiAgICAvLyBhcHBsaWNhdGlvbnMuXG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBWcyA/IFNzKHQsIGUpIDogdCBpbnN0YW5jZW9mIERzID8gQ3ModCwgZSkgOiBuO1xufVxuXG4vKipcbiAqIElmIHRoaXMgdHJhbnNmb3JtIG9wZXJhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0b1xuICogcGVyc2lzdCBmb3IgdGhpcyB0cmFuc2Zvcm0uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIHRyYW5zZm9ybVxuICogb3BlcmF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXNcbiAqIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIEJhc2UgdmFsdWVzIHByb3ZpZGUgY29uc2lzdGVudCBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmRcbiAqIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZSBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmRcbiAqIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlIHRyYW5zZm9ybSBvcGVyYXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMsIGFzIHRoZXkgY2FuIGJlIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhc1xuICogYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLlxuICovIGZ1bmN0aW9uIFBzKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHhzID8gSGUobiA9IGUpIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGVpdGhlciBhbiBJbnRlZ2VyVmFsdWUgb3IgYSBEb3VibGVWYWx1ZS4gKi8gKG4pID8gZSA6IHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiAwXG4gICAgfSA6IG51bGw7XG4gICAgdmFyIG47XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGEgdmFsdWUgaW50byBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wLiAqL1xuY2xhc3MgYnMgZXh0ZW5kcyBBcyB7fVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovIGNsYXNzIFZzIGV4dGVuZHMgQXMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBTcyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGtzKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuLnNvbWUoKHQgPT4gcWUodCwgZSkpKSB8fCBuLnB1c2goZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBEcyBleHRlbmRzIEFzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQ3ModCwgZSkge1xuICAgIGxldCBuID0ga3MoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4gPSBuLmZpbHRlcigodCA9PiAhcWUodCwgZSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgYmFja2VuZCBzZW1hbnRpY3MgZm9yIGxvY2FsbHkgY29tcHV0ZWQgTlVNRVJJQ19BREQgKGluY3JlbWVudClcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcbiAqIGJhY2tlbmQgZG9lcyBub3QgY2FwIGludGVnZXIgdmFsdWVzIGF0IDJeNjMuIEluc3RlYWQsIEphdmFTY3JpcHQgbnVtYmVyXG4gKiBhcml0aG1ldGljIGlzIHVzZWQgYW5kIHByZWNpc2lvbiBsb3NzIGNhbiBvY2N1ciBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiAyXjUzLlxuICovIGNsYXNzIHhzIGV4dGVuZHMgQXMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5zZXJpYWxpemVyID0gdCwgdGhpcy5ndCA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBOcyh0KSB7XG4gICAgcmV0dXJuIENlKHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBrcyh0KSB7XG4gICAgcmV0dXJuIEplKHQpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMgPyB0LmFycmF5VmFsdWUudmFsdWVzLnNsaWNlKCkgOiBbXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqLyBjbGFzcyBNcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy50cmFuc2Zvcm0gPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gJHModCwgZSkge1xuICAgIHJldHVybiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFZzICYmIGUgaW5zdGFuY2VvZiBWcyB8fCB0IGluc3RhbmNlb2YgRHMgJiYgZSBpbnN0YW5jZW9mIERzID8gbnQodC5lbGVtZW50cywgZS5lbGVtZW50cywgcWUpIDogdCBpbnN0YW5jZW9mIHhzICYmIGUgaW5zdGFuY2VvZiB4cyA/IHFlKHQuZ3QsIGUuZ3QpIDogdCBpbnN0YW5jZW9mIGJzICYmIGUgaW5zdGFuY2VvZiBicztcbiAgICB9KHQudHJhbnNmb3JtLCBlLnRyYW5zZm9ybSk7XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xuY2xhc3MgT3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBtdXRhdGlvbiB3YXMgY29tbWl0dGVkOlxuICAgICAqXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cbiAgICAgKiAtIEZvciBkZWxldGVzLCB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSAoYmVjYXVzZSBkZWxldGVzIGFyZVxuICAgICAqICAgbm90IHN0b3JlZCBhbmQgaGF2ZSBubyB1cGRhdGVUaW1lKS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSB2ZXJzaW9ucyBjYW4gYmUgZGlmZmVyZW50OiBOby1vcCB3cml0ZXMgd2lsbCBub3QgY2hhbmdlXG4gICAgICogdGhlIHVwZGF0ZVRpbWUgZXZlbiB0aG91Z2ggdGhlIGNvbW1pdFRpbWUgYWR2YW5jZXMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhIG11dGF0aW9uXG4gICAgICogY29udGFpbmluZyBmaWVsZCB0cmFuc2Zvcm1zIGhhcyBiZWVuIGNvbW1pdHRlZC4gQ29udGFpbnMgb25lIEZpZWxkVmFsdWVcbiAgICAgKiBmb3IgZWFjaCBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXG4gICAgICpcbiAgICAgKiBXaWxsIGJlIGVtcHR5IGlmIHRoZSBtdXRhdGlvbiBkaWQgbm90IGNvbnRhaW4gYW55IGZpZWxkIHRyYW5zZm9ybXMuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLnRyYW5zZm9ybVJlc3VsdHMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgcHJlY29uZGl0aW9uIGZvciBhIG11dGF0aW9uLiBUaGlzIGZvbGxvd3MgdGhlIG1vZGVsIHRoYXQgdGhlXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cbiAqIChtZWFuaW5nIG5vIHByZWNvbmRpdGlvbikuXG4gKi8gY2xhc3MgRnMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gdCwgdGhpcy5leGlzdHMgPSBlO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBlbXB0eSBQcmVjb25kaXRpb24uICovICAgIHN0YXRpYyBub25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZzO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi8gICAgc3RhdGljIGV4aXN0cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRnModm9pZCAwLCB0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIGJhc2VkIG9uIGEgdmVyc2lvbiBhIGRvY3VtZW50IGV4aXN0cyBhdC4gKi8gICAgc3RhdGljIHVwZGF0ZVRpbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IEZzKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqLyAgICBnZXQgaXNOb25lKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0aGlzLnVwZGF0ZVRpbWUgJiYgdm9pZCAwID09PSB0aGlzLmV4aXN0cztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cyA9PT0gdC5leGlzdHMgJiYgKHRoaXMudXBkYXRlVGltZSA/ICEhdC51cGRhdGVUaW1lICYmIHRoaXMudXBkYXRlVGltZS5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiAhdC51cGRhdGVUaW1lKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZWNvbmRpdGlvbnMgaXMgdmFsaWQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gZnVuY3Rpb24gQnModCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZS52ZXJzaW9uLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6IHZvaWQgMCA9PT0gdC5leGlzdHMgfHwgdC5leGlzdHMgPT09IGUuaXNGb3VuZERvY3VtZW50KCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiBkZXNjcmliZXMgYSBzZWxmLWNvbnRhaW5lZCBjaGFuZ2UgdG8gYSBkb2N1bWVudC4gTXV0YXRpb25zIGNhblxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXG4gKlxuICogTXV0YXRpb25zIG5vdCBvbmx5IGFjdCBvbiB0aGUgdmFsdWUgb2YgdGhlIGRvY3VtZW50IGJ1dCBhbHNvIGl0cyB2ZXJzaW9uLlxuICpcbiAqIEZvciBsb2NhbCBtdXRhdGlvbnMgKG11dGF0aW9ucyB0aGF0IGhhdmVuJ3QgYmVlbiBjb21taXR0ZWQgeWV0KSwgd2UgcHJlc2VydmVcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gRm9yIERlbGV0ZSBtdXRhdGlvbnMsIHdlXG4gKiByZXNldCB0aGUgdmVyc2lvbiB0byAwLlxuICpcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cbiAqXG4gKiBNVVRBVElPTiAgICAgICAgICAgQVBQTElFRCBUTyAgICAgICAgICAgIFJFU1VMVFMgSU5cbiAqXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogU2V0TXV0YXRpb24gICAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBEb2N1bWVudCh2MClcbiAqIFNldE11dGF0aW9uICAgICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgRG9jdW1lbnQodjApXG4gKiBQYXRjaE11dGF0aW9uICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBVbmtub3duRG9jdW1lbnQodjMpXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIE5vRG9jdW1lbnQodjApXG4gKlxuICogRm9yIGFja25vd2xlZGdlZCBtdXRhdGlvbnMsIHdlIHVzZSB0aGUgdXBkYXRlVGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBhc1xuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gQXMgZGVsZXRlcyBoYXZlIG5vXG4gKiBleHBsaWNpdCB1cGRhdGUgdGltZSwgd2UgdXNlIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGZvclxuICogRGVsZXRlIG11dGF0aW9ucy5cbiAqXG4gKiBJZiBhIG11dGF0aW9uIGlzIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZCBidXQgZmFpbHMgdGhlIHByZWNvbmRpdGlvbiBjaGVja1xuICogbG9jYWxseSwgd2UgdHJhbnNpdGlvbiB0byBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzXG4gKiB0aGUgdXBkYXRlZCB2ZXJzaW9uLlxuICpcbiAqIEZpZWxkIHRyYW5zZm9ybXMgYXJlIHVzZWQgb25seSB3aXRoIFBhdGNoIGFuZCBTZXQgTXV0YXRpb25zLiBXZSB1c2UgdGhlXG4gKiBgdXBkYXRlVHJhbnNmb3Jtc2AgbWVzc2FnZSB0byBzdG9yZSB0cmFuc2Zvcm1zLCByYXRoZXIgdGhhbiB0aGUgYHRyYW5zZm9ybXNgc1xuICogbWVzc2FnZXMuXG4gKlxuICogIyMgU3ViY2xhc3NpbmcgTm90ZXNcbiAqXG4gKiBFdmVyeSB0eXBlIG9mIG11dGF0aW9uIG5lZWRzIHRvIGltcGxlbWVudCBpdHMgb3duIGFwcGx5VG9SZW1vdGVEb2N1bWVudCgpIGFuZFxuICogYXBwbHlUb0xvY2FsVmlldygpIHRvIGltcGxlbWVudCB0aGUgYWN0dWFsIGJlaGF2aW9yIG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvblxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQgKHNlZSBgc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoKWAgZm9yIGFuXG4gKiBleGFtcGxlKS5cbiAqLyBjbGFzcyBMcyB7fVxuXG4vKipcbiAqIEEgdXRpbGl0eSBtZXRob2QgdG8gY2FsY3VsYXRlIGEgYE11dGF0aW9uYCByZXByZXNlbnRpbmcgdGhlIG92ZXJsYXkgZnJvbSB0aGVcbiAqIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgYW5kIGEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIHRoZSBmaWVsZHMgdGhhdFxuICogYXJlIG11dGF0ZWQgYnkgdGhlIGxvY2FsIG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBxcyh0LCBlKSB7XG4gICAgaWYgKCF0Lmhhc0xvY2FsTXV0YXRpb25zIHx8IGUgJiYgMCA9PT0gZS5maWVsZHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAvLyBtYXNrIGlzIG51bGwgd2hlbiBzZXRzIG9yIGRlbGV0ZXMgYXJlIGFwcGxpZWQgdG8gdGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gICAgICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gdC5pc05vRG9jdW1lbnQoKSA/IG5ldyBZcyh0LmtleSwgRnMubm9uZSgpKSA6IG5ldyBqcyh0LmtleSwgdC5kYXRhLCBGcy5ub25lKCkpO1xuICAgIHtcbiAgICAgICAgY29uc3QgbiA9IHQuZGF0YSwgcyA9IHVuLmVtcHR5KCk7XG4gICAgICAgIGxldCBpID0gbmV3IEVlKGF0LmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGxldCB0IG9mIGUuZmllbGRzKSBpZiAoIWkuaGFzKHQpKSB7XG4gICAgICAgICAgICBsZXQgZSA9IG4uZmllbGQodCk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZGVsZXRpbmcgYSBuZXN0ZWQgZmllbGQsIHdlIHRha2UgdGhlIGltbWVkaWF0ZSBwYXJlbnQgYXNcbiAgICAgICAgICAgIC8vIHRoZSBtYXNrIHVzZWQgdG8gY29uc3RydWN0IHRoZSByZXN1bHRpbmcgbXV0YXRpb24uXG4gICAgICAgICAgICAvLyBKdXN0aWZpY2F0aW9uOiBOZXN0ZWQgZmllbGRzIGNhbiBjcmVhdGUgcGFyZW50IGZpZWxkcyBpbXBsaWNpdGx5LiBJZlxuICAgICAgICAgICAgLy8gb25seSBhIGxlYWYgZW50cnkgaXMgZGVsZXRlZCBpbiBsYXRlciBtdXRhdGlvbnMsIHRoZSBwYXJlbnQgZmllbGRcbiAgICAgICAgICAgIC8vIHNob3VsZCBzdGlsbCByZW1haW4sIGJ1dCB3ZSBtYXkgaGF2ZSBsb3N0IHRoaXMgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICAvLyBDb25zaWRlciBtdXRhdGlvbiAoZm9vLmJhciAxKSwgdGhlbiBtdXRhdGlvbiAoZm9vLmJhciBkZWxldGUoKSkuXG4gICAgICAgICAgICAvLyBUaGlzIGxlYXZlcyB0aGUgZmluYWwgcmVzdWx0IChmb28sIHt9KS4gRGVzcGl0ZSB0aGUgZmFjdCB0aGF0IGBkb2NgXG4gICAgICAgICAgICAvLyBoYXMgdGhlIGNvcnJlY3QgcmVzdWx0LCBgZm9vYCBpcyBub3QgaW4gYG1hc2tgLCBhbmQgdGhlIHJlc3VsdGluZ1xuICAgICAgICAgICAgLy8gbXV0YXRpb24gd291bGQgbWlzcyBgZm9vYC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09IGUgJiYgdC5sZW5ndGggPiAxICYmICh0ID0gdC5wb3BMYXN0KCksIGUgPSBuLmZpZWxkKHQpKSwgbnVsbCA9PT0gZSA/IHMuZGVsZXRlKHQpIDogcy5zZXQodCwgZSksIFxuICAgICAgICAgICAgaSA9IGkuYWRkKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgenModC5rZXksIHMsIG5ldyBSZShpLnRvQXJyYXkoKSksIEZzLm5vbmUoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmcgYVxuICogbmV3IHJlbW90ZSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHN0YXRlXG4gKiAoZS5nLiBpdCBpcyBpbnZhbGlkIG9yIG91dGRhdGVkKSwgdGhlIGRvY3VtZW50IHR5cGUgbWF5IHRyYW5zaXRpb24gdG9cbiAqIHVua25vd24uXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbXV0YXRpb25SZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvbiBmcm9tIHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIFVzKHQsIGUsIG4pIHtcbiAgICB0IGluc3RhbmNlb2YganMgPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBzZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYVxuICAgICAgICAvLyByZW1vdGUgZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbXVzdCBoYXZlIGhlbGQuXG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlLmNsb25lKCksIGkgPSBIcyh0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKTtcbiAgICAgICAgcy5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIHMpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiB0IGluc3RhbmNlb2YgenMgPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghQnModC5wcmVjb25kaXRpb24sIGUpKSBcbiAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXG4gICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIGNvbnZlcnQgdG8gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggYVxuICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxuICAgICAgICByZXR1cm4gdm9pZCBlLmNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChuLnZlcnNpb24pO1xuICAgICAgICBjb25zdCBzID0gSHModC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyksIGkgPSBlLmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKFdzKHQpKSwgaS5zZXRBbGwocyksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIGkpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQobi52ZXJzaW9uKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KDAsIGUsIG4pO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmdcbiAqIHRoZSBuZXcgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGVcbiAqIGV4cGVjdGVkIHN0YXRlLCB0aGUgZG9jdW1lbnQgaXMgbm90IG1vZGlmaWVkLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIHByZXZpb3VzTWFzayAtIFRoZSBmaWVsZHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBiZWZvcmUgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbi5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIEEgdGltZXN0YW1wIGluZGljYXRpbmcgdGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlXG4gKiAgICAgYmF0Y2ggdGhpcyBtdXRhdGlvbiBpcyBhIHBhcnQgb2YuXG4gKiBAcmV0dXJucyBBIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyB0aGUgZmllbGRzIHRoYXQgYXJlIGNoYW5nZWQgYnkgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbi5cbiAqLyBmdW5jdGlvbiBLcyh0LCBlLCBuLCBzKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBqcyA/IGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgaWYgKCFCcyh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBUaGUgbXV0YXRpb24gZmFpbGVkIHRvIGFwcGx5IChlLmcuIGEgZG9jdW1lbnQgSUQgY3JlYXRlZCB3aXRoIGFkZCgpXG4gICAgICAgIC8vIGNhdXNlZCBhIG5hbWUgY29sbGlzaW9uKS5cbiAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSB0LnZhbHVlLmNsb25lKCksIHIgPSBKcyh0LmZpZWxkVHJhbnNmb3JtcywgcywgZSk7XG4gICAgICAgIHJldHVybiBpLnNldEFsbChyKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KGUudmVyc2lvbiwgaSkuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGw7XG4gLy8gU2V0TXV0YXRpb24gb3ZlcndyaXRlcyBhbGwgZmllbGRzLlxuICAgICAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XG4gKlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIGJvdGggdGhlIG1hc2sgYW5kIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyB1cGRhdGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIG5laXRoZXIgdGhlIG1hc2sgbm9yIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nXG4gKiAgICBmaWVsZCBpcyB1bm1vZGlmaWVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIGRlbGV0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgbm90IGluIHRoZSBtYXNrIGJ1dCBpcyBpbiB0aGUgdmFsdWVzLCB0aGUgdmFsdWVzIG1hcCBpc1xuICogICAgaWdub3JlZC5cbiAqLyAodCwgZSwgbiwgcykgOiB0IGluc3RhbmNlb2YgenMgPyBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGlmICghQnModC5wcmVjb25kaXRpb24sIGUpKSByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IEpzKHQuZmllbGRUcmFuc2Zvcm1zLCBzLCBlKSwgciA9IGUuZGF0YTtcbiAgICAgICAgaWYgKHIuc2V0QWxsKFdzKHQpKSwgci5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudChlLnZlcnNpb24sIHIpLnNldEhhc0xvY2FsTXV0YXRpb25zKCksIFxuICAgICAgICBudWxsID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG4udW5pb25XaXRoKHQuZmllbGRNYXNrLmZpZWxkcykudW5pb25XaXRoKHQuZmllbGRUcmFuc2Zvcm1zLm1hcCgodCA9PiB0LmZpZWxkKSkpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBGaWVsZFBhdGgvVmFsdWUgbWFwIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlIFBhdGNoTXV0YXRpb24uXG4gKi8gKHQsIGUsIG4sIHMpIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoQnModC5wcmVjb25kaXRpb24sIGUpKSByZXR1cm4gZS5jb252ZXJ0VG9Ob0RvY3VtZW50KGUudmVyc2lvbikuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGw7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCB2ZXJpZmllcyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGhcbiAqIHRoZSBwcm92aWRlZCBwcmVjb25kaXRpb24uXG4gKlxuICogVGhlIGB2ZXJpZnlgIG9wZXJhdGlvbiBpcyBvbmx5IHVzZWQgaW4gVHJhbnNhY3Rpb25zLCBhbmQgdGhpcyBjbGFzcyBzZXJ2ZXNcbiAqIHByaW1hcmlseSB0byBmYWNpbGl0YXRlIHNlcmlhbGl6YXRpb24gaW50byBwcm90b3MuXG4gKi8gKHQsIGUsIG4pO1xufVxuXG4vKipcbiAqIElmIHRoaXMgbXV0YXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG8gcGVyc2lzdCB3aXRoXG4gKiB0aGlzIG11dGF0aW9uLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBtdXRhdGlvbiBpcyBhbHdheXMgYXBwbGllZFxuICogdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyBhIHNwYXJzZSBvYmplY3QgdGhhdCBjb25zaXN0cyBvZiBvbmx5IHRoZSBkb2N1bWVudFxuICogZmllbGRzIGZvciB3aGljaCB0aGlzIG11dGF0aW9uIGNvbnRhaW5zIGEgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtYXRpb25cbiAqIChlLmcuIGEgbnVtZXJpYyBpbmNyZW1lbnQpLiBUaGUgcHJvdmlkZWQgdmFsdWUgZ3VhcmFudGVlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmQgYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVcbiAqIG11dGF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvciBpZGVtcG90ZW50IG11dGF0aW9ucywgYXMgdGhleSBjYW4gYmVcbiAqIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBHcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgcyBvZiB0LmZpZWxkVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHMuZmllbGQpLCBpID0gUHMocy50cmFuc2Zvcm0sIHQgfHwgbnVsbCk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobnVsbCA9PT0gbiAmJiAobiA9IHVuLmVtcHR5KCkpLCBuLnNldChzLmZpZWxkLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBuIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uIFFzKHQsIGUpIHtcbiAgICByZXR1cm4gdC50eXBlID09PSBlLnR5cGUgJiYgKCEhdC5rZXkuaXNFcXVhbChlLmtleSkgJiYgKCEhdC5wcmVjb25kaXRpb24uaXNFcXVhbChlLnByZWNvbmRpdGlvbikgJiYgKCEhZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmIHZvaWQgMCA9PT0gZSB8fCAhKCF0IHx8ICFlKSAmJiBudCh0LCBlLCAoKHQsIGUpID0+ICRzKHQsIGUpKSk7XG4gICAgfSh0LmZpZWxkVHJhbnNmb3JtcywgZS5maWVsZFRyYW5zZm9ybXMpICYmICgwIC8qIE11dGF0aW9uVHlwZS5TZXQgKi8gPT09IHQudHlwZSA/IHQudmFsdWUuaXNFcXVhbChlLnZhbHVlKSA6IDEgLyogTXV0YXRpb25UeXBlLlBhdGNoICovICE9PSB0LnR5cGUgfHwgdC5kYXRhLmlzRXF1YWwoZS5kYXRhKSAmJiB0LmZpZWxkTWFzay5pc0VxdWFsKGUuZmllbGRNYXNrKSkpKSk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIG9iamVjdCB2YWx1ZSBjb250ZW50cy5cbiAqLyBjbGFzcyBqcyBleHRlbmRzIExzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSBuLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IHMsIFxuICAgICAgICB0aGlzLnR5cGUgPSAwIC8qIE11dGF0aW9uVHlwZS5TZXQgKi87XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyB6cyBleHRlbmRzIExzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IG4sIHRoaXMucHJlY29uZGl0aW9uID0gcywgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSwgdGhpcy50eXBlID0gMSAvKiBNdXRhdGlvblR5cGUuUGF0Y2ggKi87XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRNYXNrO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gV3ModCkge1xuICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgIHJldHVybiB0LmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgIGlmICghbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmRhdGEuZmllbGQobik7XG4gICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgfVxuICAgIH0pKSwgZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhIG11dGF0aW9uXG4gKiBjb250YWluaW5nIHRyYW5zZm9ybXMgaGFzIGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHBhcmFtIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMgLSBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIEhzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBGKHQubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0W2ldLCBvID0gci50cmFuc2Zvcm0sIHUgPSBlLmRhdGEuZmllbGQoci5maWVsZCk7XG4gICAgICAgIHMuc2V0KHIuZmllbGQsIFJzKG8sIHUsIG5baV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXG4gKiB0cmFuc2Zvcm0gbG9jYWxseS5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBsb2NhbCB0aW1lIG9mIHRoZSBtdXRhdGlvbiAodXNlZCB0b1xuICogICAgIGdlbmVyYXRlIFNlcnZlclRpbWVzdGFtcFZhbHVlcykuXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IHRyYW5zZm9ybXMgb24uXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBKcyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgY29uc3QgdCA9IGkudHJhbnNmb3JtLCByID0gbi5kYXRhLmZpZWxkKGkuZmllbGQpO1xuICAgICAgICBzLnNldChpLmZpZWxkLCB2cyh0LCByLCBlKSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovIGNsYXNzIFlzIGV4dGVuZHMgTHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IGUsIHRoaXMudHlwZSA9IDIgLyogTXV0YXRpb25UeXBlLkRlbGV0ZSAqLyAsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgWHMgZXh0ZW5kcyBMcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMyAvKiBNdXRhdGlvblR5cGUuVmVyaWZ5ICovICwgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGJhdGNoIG9mIG11dGF0aW9ucyB0aGF0IHdpbGwgYmUgc2VudCBhcyBvbmUgdW5pdCB0byB0aGUgYmFja2VuZC5cbiAqLyBjbGFzcyBacyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgdW5pcXVlIElEIG9mIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIG9yaWdpbmFsIHdyaXRlIHRpbWUgb2YgdGhpcyBtdXRhdGlvbi5cbiAgICAgKiBAcGFyYW0gYmFzZU11dGF0aW9ucyAtIE11dGF0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIHBvcHVsYXRlIHRoZSBiYXNlXG4gICAgICogdmFsdWVzIHdoZW4gdGhpcyBtdXRhdGlvbiBpcyBhcHBsaWVkIGxvY2FsbHkuIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9jYWxseVxuICAgICAqIG92ZXJ3cml0ZSB2YWx1ZXMgdGhhdCBhcmUgcGVyc2lzdGVkIGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIEJhc2VcbiAgICAgKiBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXG4gICAgICogQHBhcmFtIG11dGF0aW9ucyAtIFRoZSB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucyBpbiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIFVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGFyZSBhcHBsaWVkIGJvdGggbG9jYWxseSBhbmQgcmVtb3RlbHkgb24gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IHQsIHRoaXMubG9jYWxXcml0ZVRpbWUgPSBlLCB0aGlzLmJhc2VNdXRhdGlvbnMgPSBuLCB0aGlzLm11dGF0aW9ucyA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpcyBNdXRhdGlvbkJhdGNoIHRvIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcbiAgICAgKiB0byBjb21wdXRlIHRoZSBzdGF0ZSBvZiB0aGUgcmVtb3RlIGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSBiYXRjaFJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIE11dGF0aW9uQmF0Y2ggdG8gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi8gICAgYXBwbHlUb1JlbW90ZURvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25SZXN1bHRzO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubXV0YXRpb25zLmxlbmd0aDsgZSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5tdXRhdGlvbnNbZV07XG4gICAgICAgICAgICBpZiAocy5rZXkuaXNFcXVhbCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICBVcyhzLCB0LCBuW2VdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50IGdpdmVuIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXNcbiAgICAgKiBiYXRjaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIG11dGF0ZWRGaWVsZHMgLSBGaWVsZHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBiZWZvcmUgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcmV0dXJucyBBIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyBhbGwgdGhlIGZpZWxkcyB0aGF0IGFyZSBtdXRhdGVkLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxWaWV3KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMuYmFzZU11dGF0aW9ucykgbi5rZXkuaXNFcXVhbCh0LmtleSkgJiYgKGUgPSBLcyhuLCB0LCBlLCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLm11dGF0aW9ucykgbi5rZXkuaXNFcXVhbCh0LmtleSkgJiYgKGUgPSBLcyhuLCB0LCBlLCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXG4gICAgICogdGhpcyBiYXRjaC4gUmV0dXJucyBhIGBEb2N1bWVudEtleWAgdG8gYE11dGF0aW9uYCBtYXAgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXBsYWNlIGFsbCB0aGUgbXV0YXRpb24gYXBwbGljYXRpb25zLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldCh0LCBlKSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIGNvbnN0IG4gPSBkcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdC5nZXQocy5rZXkpLCByID0gaS5vdmVybGF5ZWREb2N1bWVudDtcbiAgICAgICAgICAgIC8vIFRPRE8obXV0YWJsZWRvY3VtZW50cyk6IFRoaXMgbWV0aG9kIHNob3VsZCB0YWtlIGEgTXV0YWJsZURvY3VtZW50TWFwXG4gICAgICAgICAgICAvLyBhbmQgd2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGNhc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IHRoaXMuYXBwbHlUb0xvY2FsVmlldyhyLCBpLm11dGF0ZWRGaWVsZHMpO1xuICAgICAgICAgICAgLy8gU2V0IG11dGF0ZWRGaWVsZHMgdG8gbnVsbCBpZiB0aGUgZG9jdW1lbnQgaXMgb25seSBmcm9tIGxvY2FsIG11dGF0aW9ucy5cbiAgICAgICAgICAgIC8vIFRoaXMgY3JlYXRlcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24sIGluc3RlYWQgb2YgdHJ5aW5nIHRvIGNyZWF0ZSBhXG4gICAgICAgICAgICAvLyBwYXRjaCBtdXRhdGlvbiBhcyB0aGUgb3ZlcmxheS5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmhhcyhzLmtleSkgPyBudWxsIDogbztcbiAgICAgICAgICAgIGNvbnN0IHUgPSBxcyhyLCBvKTtcbiAgICAgICAgICAgIG51bGwgIT09IHUgJiYgbi5zZXQocy5rZXksIHUpLCByLmlzVmFsaWREb2N1bWVudCgpIHx8IHIuY29udmVydFRvTm9Eb2N1bWVudChydC5taW4oKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIGdzKCkpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hJZCA9PT0gdC5iYXRjaElkICYmIG50KHRoaXMubXV0YXRpb25zLCB0Lm11dGF0aW9ucywgKCh0LCBlKSA9PiBRcyh0LCBlKSkpICYmIG50KHRoaXMuYmFzZU11dGF0aW9ucywgdC5iYXNlTXV0YXRpb25zLCAoKHQsIGUpID0+IFFzKHQsIGUpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyB0aSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLyoqXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSB0LCB0aGlzLmNvbW1pdFZlcnNpb24gPSBlLCB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG4sIHRoaXMuZG9jVmVyc2lvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9Jmd0O3ZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbSh0LCBlLCBuKSB7XG4gICAgICAgIEYodC5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCBzID0gX3M7XG4gICAgICAgIGNvbnN0IGkgPSB0Lm11dGF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBpLmxlbmd0aDsgdCsrKSBzID0gcy5pbnNlcnQoaVt0XS5rZXksIG5bdF0udmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgdGkodCwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhbiBvdmVybGF5IGNvbXB1dGVkIGJ5IEZpcmVzdG9yZS5cbiAqXG4gKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBhIG11dGF0aW9uIGFuZCB0aGUgbGFyZ2VzdCBiYXRjaCBpZCBpbiBGaXJlc3RvcmUgd2hlblxuICogdGhlIG11dGF0aW9uIHdhcyBjcmVhdGVkLlxuICovIGNsYXNzIGVpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSB0LCB0aGlzLm11dGF0aW9uID0gZTtcbiAgICB9XG4gICAgZ2V0S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbi5rZXk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiB0aGlzLm11dGF0aW9uID09PSB0Lm11dGF0aW9uO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBPdmVybGF5e1xcbiAgICAgIGxhcmdlc3RCYXRjaElkOiAke3RoaXMubGFyZ2VzdEJhdGNoSWR9LFxcbiAgICAgIG11dGF0aW9uOiAke3RoaXMubXV0YXRpb24udG9TdHJpbmcoKX1cXG4gICAgfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb25jcmV0ZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQWdncmVnYXRlIHR5cGUuXG4gKi8gY2xhc3Mgbmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5hbGlhcyA9IHQsIHRoaXMueXQgPSBlLCB0aGlzLmZpZWxkUGF0aCA9IG47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBzaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvdW50ID0gdCwgdGhpcy51bmNoYW5nZWROYW1lcyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFcnJvciBDb2RlcyBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQgd2F5cyBHUlBDIGNhbiBmYWlsLiBUaGVzZSBhcmUgY29waWVkXG4gKiBkaXJlY3RseSBmcm9tIEdSUEMncyBzb3VyY2VzIGhlcmU6XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAqXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXG4gKiBhcmUgdXNlZCBmb3IgcmV2ZXJzZSBsb29rdXBzIGZyb20gdGhlIHdlYmNoYW5uZWwgc3RyZWFtLiBEbyBOT1QgY2hhbmdlIHRoZVxuICogbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgb3IgY2hhbmdlIHRoaXMgaW50byBhIGNvbnN0IGVudW0uXG4gKi8gdmFyIGlpLCByaTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBTZWUgaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBjbGFzc2lmeWluZyB3cml0ZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIG9pKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBPKCk7XG5cbiAgICAgIGNhc2UgcS5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIHEuVU5LTk9XTjpcbiAgICAgIGNhc2UgcS5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2UgcS5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIHEuSU5URVJOQUw6XG4gICAgICBjYXNlIHEuVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2UgcS5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBxLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIHEuTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBxLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBxLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBxLkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBxLkFCT1JURUQ6XG4gICAgICBjYXNlIHEuT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBxLlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIHEuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXG4gKlxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXG4gKlxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxuICovXG4vKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxuICogICAgIGlzIG5vIG1hdGNoLlxuICovXG5mdW5jdGlvbiB1aSh0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgXG4gICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcbiAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXG4gICAgcmV0dXJuIGsoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgcS5VTktOT1dOO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSBpaS5PSzpcbiAgICAgICAgcmV0dXJuIHEuT0s7XG5cbiAgICAgIGNhc2UgaWkuQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gcS5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2UgaWkuVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIHEuVU5LTk9XTjtcblxuICAgICAgY2FzZSBpaS5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIHEuREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2UgaWkuUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gcS5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2UgaWkuSU5URVJOQUw6XG4gICAgICAgIHJldHVybiBxLklOVEVSTkFMO1xuXG4gICAgICBjYXNlIGlpLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gcS5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSBpaS5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiBxLlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSBpaS5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gcS5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIGlpLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIHEuTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIGlpLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gcS5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSBpaS5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIHEuUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2UgaWkuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIHEuRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSBpaS5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gcS5BQk9SVEVEO1xuXG4gICAgICBjYXNlIGlpLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIHEuT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIGlpLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiBxLlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2UgaWkuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gcS5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBPKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKHJpID0gaWkgfHwgKGlpID0ge30pKVtyaS5PSyA9IDBdID0gXCJPS1wiLCByaVtyaS5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxucmlbcmkuVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIHJpW3JpLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbnJpW3JpLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIHJpW3JpLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG5yaVtyaS5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCByaVtyaS5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbnJpW3JpLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIHJpW3JpLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG5yaVtyaS5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgcmlbcmkuQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbnJpW3JpLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIHJpW3JpLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG5yaVtyaS5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgcmlbcmkuVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIHJpW3JpLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE1hbmFnZXMgXCJ0ZXN0aW5nIGhvb2tzXCIsIGhvb2tzIGludG8gdGhlIGludGVybmFscyBvZiB0aGUgU0RLIHRvIHZlcmlmeVxuICogaW50ZXJuYWwgc3RhdGUgYW5kIGV2ZW50cyBkdXJpbmcgaW50ZWdyYXRpb24gdGVzdHMuIERvIG5vdCB1c2UgdGhpcyBjbGFzc1xuICogZXhjZXB0IGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICpcbiAqIFRoZXJlIGFyZSB0d28gd2F5cyB0byByZXRyaWV2ZSB0aGUgZ2xvYmFsIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzOlxuICogMS4gVGhlIGBpbnN0YW5jZWAgcHJvcGVydHksIHdoaWNoIHJldHVybnMgbnVsbCBpZiB0aGUgZ2xvYmFsIHNpbmdsZXRvblxuICogICAgICBpbnN0YW5jZSBoYXMgbm90IGJlZW4gY3JlYXRlZC4gVXNlIHRoaXMgcHJvcGVydHkgaWYgdGhlIGNhbGxlciBzaG91bGRcbiAqICAgICAgXCJkbyBub3RoaW5nXCIgaWYgdGhlcmUgYXJlIG5vIHRlc3RpbmcgaG9va3MgcmVnaXN0ZXJlZCwgc3VjaCBhcyB3aGVuXG4gKiAgICAgIGRlbGl2ZXJpbmcgYW4gZXZlbnQgdG8gbm90aWZ5IHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICogMi4gVGhlIGBnZXRPckNyZWF0ZUluc3RhbmNlKClgIG1ldGhvZCwgd2hpY2ggY3JlYXRlcyB0aGUgZ2xvYmFsIHNpbmdsZXRvblxuICogICAgICBpbnN0YW5jZSBpZiBpdCBoYXMgbm90IGJlZW4gY3JlYXRlZC4gVXNlIHRoaXMgbWV0aG9kIGlmIHRoZSBpbnN0YW5jZSBpc1xuICogICAgICBuZWVkZWQgdG8sIGZvciBleGFtcGxlLCByZWdpc3RlciBhIGNhbGxiYWNrLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBjaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaENhbGxiYWNrcyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLCBvciBudWxsIGlmIGl0IGhhcyBub3QgYmVlblxuICAgICAqIGluaXRpYWxpemVkLlxuICAgICAqLyAgICBzdGF0aWMgZ2V0IGluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gYWk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLCBjcmVhdGluZyBpdCBpZiBpcyBoYXMgbmV2ZXJcbiAgICAgKiBiZWVuIGNyZWF0ZWQgYmVmb3JlLlxuICAgICAqLyAgICBzdGF0aWMgZ2V0T3JDcmVhdGVJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IGFpICYmIChhaSA9IG5ldyBjaSksIGFpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byBiZSBub3RpZmllZCB3aGVuIGFuIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hcbiAgICAgKiBvY2N1cnMgaW4gdGhlIFdhdGNoIGxpc3RlbiBzdHJlYW0uXG4gICAgICpcbiAgICAgKiBUaGUgcmVsYXRpdmUgb3JkZXIgaW4gd2hpY2ggY2FsbGJhY2tzIGFyZSBub3RpZmllZCBpcyB1bnNwZWNpZmllZDsgZG8gbm90XG4gICAgICogcmVseSBvbiBhbnkgcGFydGljdWxhciBvcmRlcmluZy4gSWYgYSBnaXZlbiBjYWxsYmFjayBpcyByZWdpc3RlcmVkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhlbiBpdCB3aWxsIGJlIG5vdGlmaWVkIG11bHRpcGxlIHRpbWVzLCBvbmNlIHBlciByZWdpc3RyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIHRvIGludm9rZSB1cG9uIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIHVucmVnaXN0ZXJzIHRoZSBnaXZlbiBjYWxsYmFjazsgb25seVxuICAgICAqIHRoZSBmaXJzdCBpbnZvY2F0aW9uIG9mIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBkb2VzIGFueXRoaW5nOyBhbGwgc3Vic2VxdWVudFxuICAgICAqIGludm9jYXRpb25zIGRvIG5vdGhpbmcuXG4gICAgICovICAgIG9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2godCkge1xuICAgICAgICBjb25zdCBlID0gU3ltYm9sKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3Muc2V0KGUsIHQpLCAoKSA9PiB0aGlzLm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3MuZGVsZXRlKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIGFsbCBjdXJyZW50bHktcmVnaXN0ZXJlZCBgb25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaGAgY2FsbGJhY2tzLlxuICAgICAqIEBwYXJhbSBpbmZvIEluZm9ybWF0aW9uIGFib3V0IHRoZSBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLlxuICAgICAqLyAgICBub3RpZnlPbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoKHQpIHtcbiAgICAgICAgdGhpcy5vbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzLmZvckVhY2goKGUgPT4gZSh0KSkpO1xuICAgIH1cbn1cblxuLyoqIFRoZSBnbG9iYWwgc2luZ2xldG9uIGluc3RhbmNlIG9mIGBUZXN0aW5nSG9va3NgLiAqLyBsZXQgYWkgPSBudWxsO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovIGZ1bmN0aW9uIGhpKCkge1xuICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXI7XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHREZWNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGxpID0gbmV3IEludGVnZXIoWyA0Mjk0OTY3Mjk1LCA0Mjk0OTY3Mjk1IF0sIDApO1xuXG4vLyBIYXNoIGEgc3RyaW5nIHVzaW5nIG1kNSBoYXNoaW5nIGFsZ29yaXRobS5cbmZ1bmN0aW9uIGZpKHQpIHtcbiAgICBjb25zdCBlID0gaGkoKS5lbmNvZGUodCksIG4gPSBuZXcgTWQ1O1xuICAgIHJldHVybiBuLnVwZGF0ZShlKSwgbmV3IFVpbnQ4QXJyYXkobi5kaWdlc3QoKSk7XG59XG5cbi8vIEludGVycHJldCB0aGUgMTYgYnl0ZXMgYXJyYXkgYXMgdHdvIDY0LWJpdCB1bnNpZ25lZCBpbnRlZ2VycywgZW5jb2RlZCB1c2luZ1xuLy8gMuKAmXMgY29tcGxlbWVudCB1c2luZyBsaXR0bGUgZW5kaWFuLlxuZnVuY3Rpb24gZGkodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgRGF0YVZpZXcodC5idWZmZXIpLCBuID0gZS5nZXRVaW50MzIoMCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHMgPSBlLmdldFVpbnQzMig0LCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgaSA9IGUuZ2V0VWludDMyKDgsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCByID0gZS5nZXRVaW50MzIoMTIsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApO1xuICAgIHJldHVybiBbIG5ldyBJbnRlZ2VyKFsgbiwgcyBdLCAwKSwgbmV3IEludGVnZXIoWyBpLCByIF0sIDApIF07XG59XG5cbmNsYXNzIHdpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIGlmICh0aGlzLmJpdG1hcCA9IHQsIHRoaXMucGFkZGluZyA9IGUsIHRoaXMuaGFzaENvdW50ID0gbiwgZSA8IDAgfHwgZSA+PSA4KSB0aHJvdyBuZXcgX2koYEludmFsaWQgcGFkZGluZzogJHtlfWApO1xuICAgICAgICBpZiAobiA8IDApIHRocm93IG5ldyBfaShgSW52YWxpZCBoYXNoIGNvdW50OiAke259YCk7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA+IDAgJiYgMCA9PT0gdGhpcy5oYXNoQ291bnQpIFxuICAgICAgICAvLyBPbmx5IGVtcHR5IGJsb29tIGZpbHRlciBjYW4gaGF2ZSAwIGhhc2ggY291bnQuXG4gICAgICAgIHRocm93IG5ldyBfaShgSW52YWxpZCBoYXNoIGNvdW50OiAke259YCk7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCAmJiAwICE9PSBlKSBcbiAgICAgICAgLy8gRW1wdHkgYmxvb20gZmlsdGVyIHNob3VsZCBoYXZlIDAgcGFkZGluZy5cbiAgICAgICAgdGhyb3cgbmV3IF9pKGBJbnZhbGlkIHBhZGRpbmcgd2hlbiBiaXRtYXAgbGVuZ3RoIGlzIDA6ICR7ZX1gKTtcbiAgICAgICAgdGhpcy5JdCA9IDggKiB0Lmxlbmd0aCAtIGUsIFxuICAgICAgICAvLyBTZXQgdGhlIGJpdCBjb3VudCBpbiBJbnRlZ2VyIHRvIGF2b2lkIHJlcGV0aXRpb24gaW4gbWlnaHRDb250YWluKCkuXG4gICAgICAgIHRoaXMuVHQgPSBJbnRlZ2VyLmZyb21OdW1iZXIodGhpcy5JdCk7XG4gICAgfVxuICAgIC8vIENhbGN1bGF0ZSB0aGUgaXRoIGhhc2ggdmFsdWUgYmFzZWQgb24gdGhlIGhhc2hlZCA2NGJpdCBpbnRlZ2VycyxcbiAgICAvLyBhbmQgY2FsY3VsYXRlIGl0cyBjb3JyZXNwb25kaW5nIGJpdCBpbmRleCBpbiB0aGUgYml0bWFwIHRvIGJlIGNoZWNrZWQuXG4gICAgRXQodCwgZSwgbikge1xuICAgICAgICAvLyBDYWxjdWxhdGUgaGFzaGVkIHZhbHVlIGgoaSkgPSBoMSArIChpICogaDIpLlxuICAgICAgICBsZXQgcyA9IHQuYWRkKGUubXVsdGlwbHkoSW50ZWdlci5mcm9tTnVtYmVyKG4pKSk7XG4gICAgICAgIC8vIFdyYXAgaWYgaGFzaCB2YWx1ZSBvdmVyZmxvdyA2NGJpdC5cbiAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gcy5jb21wYXJlKGxpKSAmJiAocyA9IG5ldyBJbnRlZ2VyKFsgcy5nZXRCaXRzKDApLCBzLmdldEJpdHMoMSkgXSwgMCkpLCBcbiAgICAgICAgcy5tb2R1bG8odGhpcy5UdCkudG9OdW1iZXIoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHdoZXRoZXIgdGhlIGJpdCBvbiB0aGUgZ2l2ZW4gaW5kZXggaW4gdGhlIGJpdG1hcCBpcyBzZXQgdG8gMS5cbiAgICBBdCh0KSB7XG4gICAgICAgIHJldHVybiAwICE9ICh0aGlzLmJpdG1hcFtNYXRoLmZsb29yKHQgLyA4KV0gJiAxIDw8IHQgJSA4KTtcbiAgICB9XG4gICAgdnQodCkge1xuICAgICAgICAvLyBFbXB0eSBiaXRtYXAgc2hvdWxkIGFsd2F5cyByZXR1cm4gZmFsc2Ugb24gbWVtYmVyc2hpcCBjaGVjay5cbiAgICAgICAgaWYgKDAgPT09IHRoaXMuSXQpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IGZpKHQpLCBbbiwgc10gPSBkaShlKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLmhhc2hDb3VudDsgdCsrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5FdChuLCBzLCB0KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5BdChlKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIENyZWF0ZSBibG9vbSBmaWx0ZXIgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS4gKi8gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0ICUgOCA9PSAwID8gMCA6IDggLSB0ICUgOCwgaSA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbCh0IC8gOCkpLCByID0gbmV3IHdpKGksIHMsIGUpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHIuaW5zZXJ0KHQpKSksIHI7XG4gICAgfVxuICAgIGluc2VydCh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkl0KSByZXR1cm47XG4gICAgICAgIGNvbnN0IGUgPSBmaSh0KSwgW24sIHNdID0gZGkoZSk7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5oYXNoQ291bnQ7IHQrKykge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuRXQobiwgcywgdCk7XG4gICAgICAgICAgICB0aGlzLlJ0KGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFJ0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodCAvIDgpLCBuID0gdCAlIDg7XG4gICAgICAgIHRoaXMuYml0bWFwW2VdIHw9IDEgPDwgbjtcbiAgICB9XG59XG5cbmNsYXNzIF9pIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLm5hbWUgPSBcIkJsb29tRmlsdGVyRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGV2ZW50IGZyb20gdGhlIFJlbW90ZVN0b3JlLiBJdCBpcyBzcGxpdCBpbnRvIHRhcmdldENoYW5nZXMgKGNoYW5nZXMgdG8gdGhlXG4gKiBzdGF0ZSBvciB0aGUgc2V0IG9mIGRvY3VtZW50cyBpbiBvdXIgd2F0Y2hlZCB0YXJnZXRzKSBhbmQgZG9jdW1lbnRVcGRhdGVzXG4gKiAoY2hhbmdlcyB0byB0aGUgYWN0dWFsIGRvY3VtZW50cykuXG4gKi8gY2xhc3MgbWkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoaXMgZXZlbnQgYnJpbmdzIHVzIHVwIHRvLCBvciBNSU4gaWYgbm90IHNldC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBmcm9tIHRhcmdldCB0byBjaGFuZ2VzIHRvIHRoZSB0YXJnZXQuIFNlZSBUYXJnZXRDaGFuZ2UuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgdGFyZ2V0cyB0aGF0IGlzIGtub3duIHRvIGJlIGluY29uc2lzdGVudCwgYW5kIHRoZSBwdXJwb3NlIGZvclxuICAgICAqIHJlLWxpc3RlbmluZy4gTGlzdGVucyBmb3IgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgcmUtZXN0YWJsaXNoZWQgd2l0aG91dFxuICAgICAqIHJlc3VtZSB0b2tlbnMuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnRzIGhhdmUgY2hhbmdlZCBvciBiZWVuIGRlbGV0ZWQsIGFsb25nIHdpdGggdGhlXG4gICAgICogZG9jJ3MgbmV3IHZhbHVlcyAoaWYgbm90IGRlbGV0ZWQpLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50IHVwZGF0ZXMgYXJlIGR1ZSBvbmx5IHRvIGxpbWJvIHJlc29sdXRpb24gdGFyZ2V0cy5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uID0gdCwgdGhpcy50YXJnZXRDaGFuZ2VzID0gZSwgdGhpcy50YXJnZXRNaXNtYXRjaGVzID0gbiwgdGhpcy5kb2N1bWVudFVwZGF0ZXMgPSBzLCBcbiAgICAgICAgdGhpcy5yZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSEFDSzogVmlld3MgcmVxdWlyZSBSZW1vdGVFdmVudHMgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZpZXcgaXNcbiAgICAgKiBDVVJSRU5ULCBidXQgc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgcmVjZWl2ZSByZW1vdGUgZXZlbnRzLiBTbyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBhcHBseSBhXG4gICAgICogQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldywgZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnQgdGFiLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIHMuc2V0KHQsIGdpLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlLCBuKSksIG5ldyBtaShydC5taW4oKSwgcywgbmV3IHBlKGV0KSwgY3MoKSwgZ3MoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXG4gKiBtYXJrZWQgQ1VSUkVOVC5cbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXG4gKi8gY2xhc3MgZ2kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHQsIHRoaXMuY3VycmVudCA9IGUsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gcywgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgZ2kobiwgZSwgZ3MoKSwgZ3MoKSwgZ3MoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hhbmdlZCBkb2N1bWVudCBhbmQgYSBsaXN0IG9mIHRhcmdldCBpZHMgdG8gd2hpY2ggdGhpcyBjaGFuZ2VcbiAqIGFwcGxpZXMuXG4gKlxuICogSWYgZG9jdW1lbnQgaGFzIGJlZW4gZGVsZXRlZCBOb0RvY3VtZW50IHdpbGwgYmUgcHJvdmlkZWQuXG4gKi8gY2xhc3MgeWkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGFwcGxpZXMgdG8gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgaXMgcmVtb3ZlZCBmcm9tIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUga2V5IG9mIHRoZSBkb2N1bWVudCBmb3IgdGhpcyBjaGFuZ2UuICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIG5ldyBkb2N1bWVudCBvciBOb0RvY3VtZW50IGlmIGl0IHdhcyBkZWxldGVkLiBJcyBudWxsIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IHdlbnQgb3V0IG9mIHZpZXcgd2l0aG91dCB0aGUgc2VydmVyIHNlbmRpbmcgYSBuZXcgZG9jdW1lbnQuXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLlB0ID0gdCwgdGhpcy5yZW1vdmVkVGFyZ2V0SWRzID0gZSwgdGhpcy5rZXkgPSBuLCB0aGlzLmJ0ID0gcztcbiAgICB9XG59XG5cbmNsYXNzIHBpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLlZ0ID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIElpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogV2hhdCBraW5kIG9mIGNoYW5nZSBvY2N1cnJlZCB0byB0aGUgd2F0Y2ggdGFyZ2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgdGFyZ2V0IElEcyB0aGF0IHdlcmUgYWRkZWQvcmVtb3ZlZC9zZXQuICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuID0gVmUuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIHRoaXMudGFyZ2V0SWRzID0gZSwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSBzO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIFRpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgKGFkZHMgb3IgcmVtb3ZlcykgdGhhdCB3ZSBhcmUgd2FpdGluZyBvbi5cbiAgICAgICAgICogV2Ugb25seSBjb25zaWRlciB0YXJnZXRzIGFjdGl2ZSB0aGF0IGhhdmUgbm8gcGVuZGluZyByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlN0ID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnQgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIGNoYW5nZXMgYXJlIGNvbnRpbnVvdXNseSB1cGRhdGVkIGFzIHdlIHJlY2VpdmUgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgICAgICogYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMgYWdhaW5zdCB0aGUgbGFzdCBpc3N1ZWQgc25hcHNob3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkR0ID0gdmkoKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMuQ3QgPSBWZS5FTVBUWV9CWVRFX1NUUklORywgdGhpcy54dCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTnQgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxuICAgICAqXG4gICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxuICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcbiAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXG4gICAgICogc3RyZWFtLlxuICAgICAqLyAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHQ7XG4gICAgfVxuICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovICAgIGdldCByZXN1bWVUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ3Q7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqLyAgICBnZXQga3QoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLlN0O1xuICAgIH1cbiAgICAvKiogV2hldGhlciB3ZSBoYXZlIG1vZGlmaWVkIGFueSBzdGF0ZSB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgc25hcHNob3QuICovICAgIGdldCBNdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIHJlc3VtZSB0b2tlbiB0byB0aGUgVGFyZ2V0Q2hhbmdlLCBidXQgb25seSB3aGVuIGl0IGhhcyBhIG5ld1xuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cbiAgICAgKi8gICAgJHQodCkge1xuICAgICAgICB0LmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHRoaXMuTnQgPSAhMCwgdGhpcy5DdCA9IHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGFyZ2V0IGNoYW5nZSBmcm9tIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXG4gICAgICogYGNsZWFyUGVuZGluZ0NoYW5nZXMoKWAuXG4gICAgICovICAgIE90KCkge1xuICAgICAgICBsZXQgdCA9IGdzKCksIGUgPSBncygpLCBuID0gZ3MoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRHQuZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgdCA9IHQuYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIG5ldyBnaSh0aGlzLkN0LCB0aGlzLnh0LCB0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXG4gICAgICovICAgIEZ0KCkge1xuICAgICAgICB0aGlzLk50ID0gITEsIHRoaXMuRHQgPSB2aSgpO1xuICAgIH1cbiAgICBCdCh0LCBlKSB7XG4gICAgICAgIHRoaXMuTnQgPSAhMCwgdGhpcy5EdCA9IHRoaXMuRHQuaW5zZXJ0KHQsIGUpO1xuICAgIH1cbiAgICBMdCh0KSB7XG4gICAgICAgIHRoaXMuTnQgPSAhMCwgdGhpcy5EdCA9IHRoaXMuRHQucmVtb3ZlKHQpO1xuICAgIH1cbiAgICBxdCgpIHtcbiAgICAgICAgdGhpcy5TdCArPSAxO1xuICAgIH1cbiAgICBVdCgpIHtcbiAgICAgICAgdGhpcy5TdCAtPSAxO1xuICAgIH1cbiAgICBLdCgpIHtcbiAgICAgICAgdGhpcy5OdCA9ICEwLCB0aGlzLnh0ID0gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIHRvIGFjY3VtdWxhdGUgd2F0Y2ggY2hhbmdlcyBpbnRvIGEgUmVtb3RlRXZlbnQuXG4gKi9cbmNsYXNzIEVpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuR3QgPSB0LCBcbiAgICAgICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhbGwgdHJhY2tlZCB0YXJnZXRzLiAqL1xuICAgICAgICB0aGlzLlF0ID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnRzIHRvIHVwZGF0ZSBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuICovXG4gICAgICAgIHRoaXMuanQgPSBjcygpLCBcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xuICAgICAgICB0aGlzLnp0ID0gQWkoKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcCBvZiB0YXJnZXRzIHdpdGggZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLiBUaGVzZSB0YXJnZXRzIGFyZVxuICAgICAgICAgKiBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQgYW5kIHRoZWlyIGxpc3RlbnMgbmVlZHMgdG8gYmUgcmUtZXN0YWJsaXNoZWQgYnlcbiAgICAgICAgICogUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLld0ID0gbmV3IHBlKGV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqLyAgICBIdCh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LlB0KSB0LmJ0ICYmIHQuYnQuaXNGb3VuZERvY3VtZW50KCkgPyB0aGlzLkp0KGUsIHQuYnQpIDogdGhpcy5ZdChlLCB0LmtleSwgdC5idCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuWXQoZSwgdC5rZXksIHQuYnQpO1xuICAgIH1cbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi8gICAgWHQodCkge1xuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQodCwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuWnQoZSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHQuc3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMudGUoZSkgJiYgbi4kdCh0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlV0KCksIG4ua3QgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICAgICAgbi5GdCgpLCBuLiR0KHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlV0KCksIG4ua3QgfHwgdGhpcy5yZW1vdmVUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAzIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy50ZShlKSAmJiAobi5LdCgpLCBuLiR0KHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy50ZShlKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzLiBUaGUgYmFja2VuZCB3aWxsIHJlLWFkZCBhbnkgZG9jdW1lbnRzIHRoYXQgc3RpbGxcbiAgICAgICAgICAgICAgICAvLyBtYXRjaCB0aGUgdGFyZ2V0IGJlZm9yZSBpdCBzZW5kcyB0aGUgbmV4dCBnbG9iYWwgc25hcHNob3QuXG4gICAgICAgICAgICAgICAgdGhpcy5lZShlKSwgbi4kdCh0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBPKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICB0LnRhcmdldElkcy5sZW5ndGggPiAwID8gdC50YXJnZXRJZHMuZm9yRWFjaChlKSA6IHRoaXMuUXQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMudGUobikgJiYgZShuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgbmUodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0SWQsIHMgPSB0LlZ0LmNvdW50LCBpID0gdGhpcy5zZShuKTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBpLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChGbihyKSkgaWYgKDAgPT09IHMpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZXhpc3RlbmNlIGZpbHRlciB0b2xkIHVzIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdC4gV2UgZGVkdWNlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IGFuZCBhcHBseSBhIGRlbGV0ZWQgZG9jdW1lbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBvdXIgdXBkYXRlcy4gV2l0aG91dCBhcHBseWluZyB0aGlzIGRlbGV0ZWQgZG9jdW1lbnQgdGhlcmUgbWlnaHQgYmVcbiAgICAgICAgICAgICAgICAvLyBhbm90aGVyIHF1ZXJ5IHRoYXQgd2lsbCByYWlzZSB0aGlzIGRvY3VtZW50IGFzIHBhcnQgb2YgYSBzbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIHVudGlsIGl0IGlzIHJlc29sdmVkLCBlc3NlbnRpYWxseSBleHBvc2luZyBpbmNvbnNpc3RlbmN5IGJldHdlZW5cbiAgICAgICAgICAgICAgICAvLyBxdWVyaWVzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgaHQoci5wYXRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLll0KG4sIHQsIGFuLm5ld05vRG9jdW1lbnQodCwgcnQubWluKCkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBGKDEgPT09IHMpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5pZShuKTtcbiAgICAgICAgICAgICAgICAvLyBFeGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLiBNYXJrIHRoZSBkb2N1bWVudHMgYXMgYmVpbmcgaW4gbGltYm8sIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJhaXNlIGEgc25hcHNob3Qgd2l0aCBgaXNGcm9tQ2FjaGU6dHJ1ZWAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IGJsb29tIGZpbHRlciB0byBpZGVudGlmeSBhbmQgbWFyayByZW1vdmVkIGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMucmUodCwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgwIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU3VjY2VzcyAqLyAhPT0gcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYmxvb20gZmlsdGVyIGFwcGxpY2F0aW9uIGZhaWxzLCB3ZSByZXNldCB0aGUgbWFwcGluZyBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXIgcmUtcnVuIG9mIHRoZSBxdWVyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWUobik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gMiAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLkZhbHNlUG9zaXRpdmUgKi8gPT09IHMgPyBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tICovIDogXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5XdCA9IHRoaXMuV3QuaW5zZXJ0KG4sIHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG51bGwgPT09IChlID0gY2kuaW5zdGFuY2UpIHx8IHZvaWQgMCA9PT0gZSB8fCBlLm5vdGlmeU9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2goZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMsIGksIHIsIG8sIHUsIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsQ2FjaGVDb3VudDogZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGVuY2VGaWx0ZXJDb3VudDogbi5jb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgaCA9IG4udW5jaGFuZ2VkTmFtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBoICYmIChhLmJsb29tRmlsdGVyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWQ6IDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovID09PSB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hDb3VudDogbnVsbCAhPT0gKHMgPSBudWxsID09IGggPyB2b2lkIDAgOiBoLmhhc2hDb3VudCkgJiYgdm9pZCAwICE9PSBzID8gcyA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0bWFwTGVuZ3RoOiBudWxsICE9PSAobyA9IG51bGwgPT09IChyID0gbnVsbCA9PT0gKGkgPSBudWxsID09IGggPyB2b2lkIDAgOiBoLmJpdHMpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuYml0bWFwKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLmxlbmd0aCkgJiYgdm9pZCAwICE9PSBvID8gbyA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogbnVsbCAhPT0gKGMgPSBudWxsID09PSAodSA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguYml0cykgfHwgdm9pZCAwID09PSB1ID8gdm9pZCAwIDogdS5wYWRkaW5nKSAmJiB2b2lkIDAgIT09IGMgPyBjIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAocywgaSwgdC5WdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBibG9vbSBmaWx0ZXIgdG8gcmVtb3ZlIHRoZSBkZWxldGVkIGRvY3VtZW50cywgYW5kIHJldHVybiB0aGVcbiAgICAgKiBhcHBsaWNhdGlvbiBzdGF0dXMuXG4gICAgICovICAgIHJlKHQsIGUpIHtcbiAgICAgICAgY29uc3Qge3VuY2hhbmdlZE5hbWVzOiBuLCBjb3VudDogc30gPSB0LlZ0O1xuICAgICAgICBpZiAoIW4gfHwgIW4uYml0cykgcmV0dXJuIDEgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovO1xuICAgICAgICBjb25zdCB7Yml0czoge2JpdG1hcDogaSA9IFwiXCIsIHBhZGRpbmc6IHIgPSAwfSwgaGFzaENvdW50OiBvID0gMH0gPSBuO1xuICAgICAgICBsZXQgdSwgYztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHUgPSB4ZShpKS50b1VpbnQ4QXJyYXkoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBQZSkgcmV0dXJuIE0oXCJEZWNvZGluZyB0aGUgYmFzZTY0IGJsb29tIGZpbHRlciBpbiBleGlzdGVuY2UgZmlsdGVyIGZhaWxlZCAoXCIgKyB0Lm1lc3NhZ2UgKyBcIik7IGlnbm9yaW5nIHRoZSBibG9vbSBmaWx0ZXIgYW5kIGZhbGxpbmcgYmFjayB0byBmdWxsIHJlLXF1ZXJ5LlwiKSwgXG4gICAgICAgICAgICAxIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLztcbiAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEJsb29tRmlsdGVyIHRocm93cyBlcnJvciBpZiB0aGUgaW5wdXRzIGFyZSBpbnZhbGlkLlxuICAgICAgICAgICAgYyA9IG5ldyB3aSh1LCByLCBvKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgcmV0dXJuIE0odCBpbnN0YW5jZW9mIF9pID8gXCJCbG9vbUZpbHRlciBlcnJvcjogXCIgOiBcIkFwcGx5aW5nIGJsb29tIGZpbHRlciBmYWlsZWQ6IFwiLCB0KSwgXG4gICAgICAgICAgICAxIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAoMCA9PT0gYy5JdCkgcmV0dXJuIDEgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovO1xuICAgICAgICByZXR1cm4gcyAhPT0gZSAtIHRoaXMub2UodC50YXJnZXRJZCwgYykgPyAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLyA6IDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgb3V0IHJlbW92ZWQgZG9jdW1lbnRzIGJhc2VkIG9uIGJsb29tIGZpbHRlciBtZW1iZXJzaGlwIHJlc3VsdCBhbmRcbiAgICAgKiByZXR1cm4gbnVtYmVyIG9mIGRvY3VtZW50cyByZW1vdmVkLlxuICAgICAqLyAgICBvZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkd0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCk7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5HdC51ZSgpLCByID0gYHByb2plY3RzLyR7aS5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke2kuZGF0YWJhc2V9L2RvY3VtZW50cy8ke24ucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gO1xuICAgICAgICAgICAgZS52dChyKSB8fCAodGhpcy5ZdCh0LCBuLCAvKnVwZGF0ZWREb2N1bWVudD0qLyBudWxsKSwgcysrKTtcbiAgICAgICAgfSkpLCBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudGx5IGFjY3VtdWxhdGVkIHN0YXRlIGludG8gYSByZW1vdGUgZXZlbnQgYXQgdGhlXG4gICAgICogcHJvdmlkZWQgc25hcHNob3QgdmVyc2lvbi4gUmVzZXRzIHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICovICAgIGNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMuUXQuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnNlKHMpO1xuICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICBpZiAobi5jdXJyZW50ICYmIEZuKGkudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb2N1bWVudCBxdWVyaWVzIGZvciBkb2N1bWVudCB0aGF0IGRvbid0IGV4aXN0IGNhbiBwcm9kdWNlIGFuIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBzZXQuIFRvIHVwZGF0ZSBvdXIgbG9jYWwgY2FjaGUsIHdlIHN5bnRoZXNpemUgYSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgaWYgd2UgaGF2ZSBub3QgcHJldmlvdXNseSByZWNlaXZlZCB0aGUgZG9jdW1lbnQuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZXMgdGhlIGxpbWJvIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgcmVtb3ZpbmcgaXQgZnJvbVxuICAgICAgICAgICAgICAgICAgICAvLyBsaW1ib0RvY3VtZW50UmVmcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZGVhbGx5IHdlIHdvdWxkIGhhdmUgYW4gZXhwbGljaXQgbG9va3VwIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoaXMgc3BlY2lhbCBsb2dpYy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBodChpLnRhcmdldC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gdGhpcy5qdC5nZXQoZSkgfHwgdGhpcy5hZShzLCBlKSB8fCB0aGlzLll0KHMsIGUsIGFuLm5ld05vRG9jdW1lbnQoZSwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuLk10ICYmIChlLnNldChzLCBuLk90KCkpLCBuLkZ0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBuID0gZ3MoKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy56dC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgICAgIGUuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5zZSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWUgfHwgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gPT09IGUucHVycG9zZSB8fCAocyA9ICExLCBcbiAgICAgICAgICAgICAgICAhMSk7XG4gICAgICAgICAgICB9KSksIHMgJiYgKG4gPSBuLmFkZCh0KSk7XG4gICAgICAgIH0pKSwgdGhpcy5qdC5mb3JFYWNoKCgoZSwgbikgPT4gbi5zZXRSZWFkVGltZSh0KSkpO1xuICAgICAgICBjb25zdCBzID0gbmV3IG1pKHQsIGUsIHRoaXMuV3QsIHRoaXMuanQsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5qdCA9IGNzKCksIHRoaXMuenQgPSBBaSgpLCB0aGlzLld0ID0gbmV3IHBlKGV0KSwgcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgdG8gdGhlIGludGVybmFsIGxpc3Qgb2YgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgKiBpdHMgZG9jdW1lbnQga2V5IHRvIHRoZSBnaXZlbiB0YXJnZXQncyBtYXBwaW5nLlxuICAgICAqL1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgSnQodCwgZSkge1xuICAgICAgICBpZiAoIXRoaXMudGUodCkpIHJldHVybjtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuYWUodCwgZS5rZXkpID8gMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovO1xuICAgICAgICB0aGlzLlp0KHQpLkJ0KGUua2V5LCBuKSwgdGhpcy5qdCA9IHRoaXMuanQuaW5zZXJ0KGUua2V5LCBlKSwgdGhpcy56dCA9IHRoaXMuenQuaW5zZXJ0KGUua2V5LCB0aGlzLmhlKGUua2V5KS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBZdCh0LCBlLCBuKSB7XG4gICAgICAgIGlmICghdGhpcy50ZSh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5adCh0KTtcbiAgICAgICAgdGhpcy5hZSh0LCBlKSA/IHMuQnQoZSwgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8pIDogXG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXG4gICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cbiAgICAgICAgcy5MdChlKSwgdGhpcy56dCA9IHRoaXMuenQuaW5zZXJ0KGUsIHRoaXMuaGUoZSkuZGVsZXRlKHQpKSwgbiAmJiAodGhpcy5qdCA9IHRoaXMuanQuaW5zZXJ0KGUsIG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5RdC5kZWxldGUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY291bnQgb2YgZG9jdW1lbnRzIGluIHRoZSB0YXJnZXQuIFRoaXMgaW5jbHVkZXMgYm90aFxuICAgICAqIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogdGFyZ2V0IGFzIHdlbGwgYXMgYW55IGFjY3VtdWxhdGVkIGNoYW5nZXMuXG4gICAgICovICAgIGllKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuWnQodCkuT3QoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuR3QuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5zaXplICsgZS5hZGRlZERvY3VtZW50cy5zaXplIC0gZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBxdCh0KSB7XG4gICAgICAgIHRoaXMuWnQodCkucXQoKTtcbiAgICB9XG4gICAgWnQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuUXQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBUaSwgdGhpcy5RdC5zZXQodCwgZSkpLCBlO1xuICAgIH1cbiAgICBoZSh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy56dC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IEVlKGV0KSwgdGhpcy56dCA9IHRoaXMuenQuaW5zZXJ0KHQsIGUpKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgdXNlciBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0IChieSBjYWxsaW5nXG4gICAgICogYGdldFRhcmdldERhdGFGb3JUYXJnZXQoKWApIGFuZCB0aGF0IHdlIGFyZSBub3Qgd2FpdGluZyBmb3IgcGVuZGluZyBBRERzXG4gICAgICogZnJvbSB3YXRjaC5cbiAgICAgKi8gICAgdGUodCkge1xuICAgICAgICBjb25zdCBlID0gbnVsbCAhPT0gdGhpcy5zZSh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgTihcIldhdGNoQ2hhbmdlQWdncmVnYXRvclwiLCBcIkRldGVjdGVkIGluYWN0aXZlIHRhcmdldFwiLCB0KSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBmb3IgYW4gYWN0aXZlIHRhcmdldCAoaS5lLiBhIHRhcmdldCB0aGF0IHRoZSB1c2VyXG4gICAgICogaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGF0IGhhcyBubyBvdXRzdGFuZGluZyB0YXJnZXQgY2hhbmdlIHJlcXVlc3RzKS5cbiAgICAgKi8gICAgc2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5RdC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlICYmIGUua3QgPyBudWxsIDogdGhpcy5HdC5sZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBlZSh0KSB7XG4gICAgICAgIHRoaXMuUXQuc2V0KHQsIG5ldyBUaSk7XG4gICAgICAgIHRoaXMuR3QuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuWXQodCwgZSwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICBhZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkd0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuaGFzKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQWkoKSB7XG4gICAgcmV0dXJuIG5ldyBwZShodC5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gdmkoKSB7XG4gICAgcmV0dXJuIG5ldyBwZShodC5jb21wYXJhdG9yKTtcbn1cblxuY29uc3QgUmkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgUGkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCksIGJpID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBhbmQ6IFwiQU5EXCIsXG4gICAgICAgIG9yOiBcIk9SXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdlbmVyYXRlcyBKc29uT2JqZWN0IHZhbHVlcyBmb3IgdGhlIERhdGFzdG9yZSBBUEkgc3VpdGFibGUgZm9yXG4gKiBzZW5kaW5nIHRvIGVpdGhlciBHUlBDIHN0dWIgbWV0aG9kcyBvciB2aWEgdGhlIEpTT04vSFRUUCBSRVNUIEFQSS5cbiAqXG4gKiBUaGUgc2VyaWFsaXplciBzdXBwb3J0cyBib3RoIFByb3RvYnVmLmpzIGFuZCBQcm90bzMgSlNPTiBmb3JtYXRzLiBCeVxuICogc2V0dGluZyBgdXNlUHJvdG8zSnNvbmAgdG8gdHJ1ZSwgdGhlIHNlcmlhbGl6ZXIgd2lsbCB1c2UgdGhlIFByb3RvMyBKU09OXG4gKiBmb3JtYXQuXG4gKlxuICogRm9yIGEgZGVzY3JpcHRpb24gb2YgdGhlIFByb3RvMyBKU09OIGZvcm1hdCBjaGVja1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9kb2NzL3Byb3RvMyNqc29uXG4gKlxuICogVE9ETyhrbGltdCk6IFdlIGNhbiByZW1vdmUgdGhlIGRhdGFiYXNlSWQgYXJndW1lbnQgaWYgd2Uga2VlcCB0aGUgZnVsbFxuICogcmVzb3VyY2UgbmFtZSBpbiBkb2N1bWVudHMuXG4gKi9cbmNsYXNzIFZpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMudXNlUHJvdG8zSnNvbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgKG9yIG51bGwpIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50b1xuICogYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cbiAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XG4gKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZS4gQnV0IEdSUEMgYWN0dWFsbHlcbiAqIGV4cGVjdHMgYSB7IHZhbHVlOiA8bnVtYmVyPiB9IHN0cnVjdC5cbiAqL1xuZnVuY3Rpb24gU2kodCwgZSkge1xuICAgIHJldHVybiB0LnVzZVByb3RvM0pzb24gfHwgRnQoZSkgPyBlIDoge1xuICAgICAgICB2YWx1ZTogZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIG51bWJlciAob3IgbnVsbCkgZnJvbSBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICovXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBEYXRlIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICovXG5mdW5jdGlvbiBEaSh0LCBlKSB7XG4gICAgaWYgKHQudXNlUHJvdG8zSnNvbikge1xuICAgICAgICByZXR1cm4gYCR7bmV3IERhdGUoMWUzICogZS5zZWNvbmRzKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1xcLlxcZCovLCBcIlwiKS5yZXBsYWNlKFwiWlwiLCBcIlwiKX0uJHsoXCIwMDAwMDAwMDBcIiArIGUubmFub3NlY29uZHMpLnNsaWNlKC05KX1aYDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogXCJcIiArIGUuc2Vjb25kcyxcbiAgICAgICAgbmFub3M6IGUubmFub3NlY29uZHNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYnl0ZXMgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbiBhIHByb3RvLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIENpKHQsIGUpIHtcbiAgICByZXR1cm4gdC51c2VQcm90bzNKc29uID8gZS50b0Jhc2U2NCgpIDogZS50b1VpbnQ4QXJyYXkoKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgQnl0ZVN0cmluZyBiYXNlZCBvbiB0aGUgcHJvdG8gc3RyaW5nIHZhbHVlLlxuICovIGZ1bmN0aW9uIHhpKHQsIGUpIHtcbiAgICByZXR1cm4gRGkodCwgZS50b1RpbWVzdGFtcCgpKTtcbn1cblxuZnVuY3Rpb24gTmkodCkge1xuICAgIHJldHVybiBGKCEhdCksIHJ0LmZyb21UaW1lc3RhbXAoZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gRGUodCk7XG4gICAgICAgIHJldHVybiBuZXcgaXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbiAgICB9KHQpKTtcbn1cblxuZnVuY3Rpb24ga2kodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgdXQoWyBcInByb2plY3RzXCIsIHQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlIF0pO1xuICAgIH0odCkuY2hpbGQoXCJkb2N1bWVudHNcIikuY2hpbGQoZSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIE1pKHQpIHtcbiAgICBjb25zdCBlID0gdXQuZnJvbVN0cmluZyh0KTtcbiAgICByZXR1cm4gRih1cihlKSksIGU7XG59XG5cbmZ1bmN0aW9uICRpKHQsIGUpIHtcbiAgICByZXR1cm4ga2kodC5kYXRhYmFzZUlkLCBlLnBhdGgpO1xufVxuXG5mdW5jdGlvbiBPaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IE1pKGUpO1xuICAgIGlmIChuLmdldCgxKSAhPT0gdC5kYXRhYmFzZUlkLnByb2plY3RJZCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBwcm9qZWN0OiBcIiArIG4uZ2V0KDEpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQucHJvamVjdElkKTtcbiAgICBpZiAobi5nZXQoMykgIT09IHQuZGF0YWJhc2VJZC5kYXRhYmFzZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBkYXRhYmFzZTogXCIgKyBuLmdldCgzKSArIFwiIHZzIFwiICsgdC5kYXRhYmFzZUlkLmRhdGFiYXNlKTtcbiAgICByZXR1cm4gbmV3IGh0KHFpKG4pKTtcbn1cblxuZnVuY3Rpb24gRmkodCwgZSkge1xuICAgIHJldHVybiBraSh0LmRhdGFiYXNlSWQsIGUpO1xufVxuXG5mdW5jdGlvbiBCaSh0KSB7XG4gICAgY29uc3QgZSA9IE1pKHQpO1xuICAgIC8vIEluIHYxYmV0YTEgcXVlcmllcyBmb3IgY29sbGVjdGlvbnMgYXQgdGhlIHJvb3QgZGlkIG5vdCBoYXZlIGEgdHJhaWxpbmdcbiAgICAvLyBcIi9kb2N1bWVudHNcIi4gSW4gdjEgYWxsIHJlc291cmNlIHBhdGhzIGNvbnRhaW4gXCIvZG9jdW1lbnRzXCIuIFByZXNlcnZlIHRoZVxuICAgIC8vIGFiaWxpdHkgdG8gcmVhZCB0aGUgdjFiZXRhMSBmb3JtIGZvciBjb21wYXRpYmlsaXR5IHdpdGggcXVlcmllcyBwZXJzaXN0ZWRcbiAgICAvLyBpbiB0aGUgbG9jYWwgdGFyZ2V0IGNhY2hlLlxuICAgICAgICByZXR1cm4gNCA9PT0gZS5sZW5ndGggPyB1dC5lbXB0eVBhdGgoKSA6IHFpKGUpO1xufVxuXG5mdW5jdGlvbiBMaSh0KSB7XG4gICAgcmV0dXJuIG5ldyB1dChbIFwicHJvamVjdHNcIiwgdC5kYXRhYmFzZUlkLnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgdC5kYXRhYmFzZUlkLmRhdGFiYXNlIF0pLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBxaSh0KSB7XG4gICAgcmV0dXJuIEYodC5sZW5ndGggPiA0ICYmIFwiZG9jdW1lbnRzXCIgPT09IHQuZ2V0KDQpKSwgdC5wb3BGaXJzdCg1KTtcbn1cblxuLyoqIENyZWF0ZXMgYSBEb2N1bWVudCBwcm90byBmcm9tIGtleSBhbmQgZmllbGRzIChidXQgbm8gY3JlYXRlL3VwZGF0ZSB0aW1lKSAqLyBmdW5jdGlvbiBVaSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJGkodCwgZSksXG4gICAgICAgIGZpZWxkczogbi52YWx1ZS5tYXBWYWx1ZS5maWVsZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBLaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IE9pKHQsIGUubmFtZSksIGkgPSBOaShlLnVwZGF0ZVRpbWUpLCByID0gZS5jcmVhdGVUaW1lID8gTmkoZS5jcmVhdGVUaW1lKSA6IHJ0Lm1pbigpLCBvID0gbmV3IHVuKHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogZS5maWVsZHNcbiAgICAgICAgfVxuICAgIH0pLCB1ID0gYW4ubmV3Rm91bmREb2N1bWVudChzLCBpLCByLCBvKTtcbiAgICByZXR1cm4gbiAmJiB1LnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpLCBuID8gdS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSA6IHU7XG59XG5cbmZ1bmN0aW9uIEdpKHQsIGUpIHtcbiAgICByZXR1cm4gXCJmb3VuZFwiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEYoISFlLmZvdW5kKSwgZS5mb3VuZC5uYW1lLCBlLmZvdW5kLnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IG4gPSBPaSh0LCBlLmZvdW5kLm5hbWUpLCBzID0gTmkoZS5mb3VuZC51cGRhdGVUaW1lKSwgaSA9IGUuZm91bmQuY3JlYXRlVGltZSA/IE5pKGUuZm91bmQuY3JlYXRlVGltZSkgOiBydC5taW4oKSwgciA9IG5ldyB1bih7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogZS5mb3VuZC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbi5uZXdGb3VuZERvY3VtZW50KG4sIHMsIGksIHIpO1xuICAgIH0odCwgZSkgOiBcIm1pc3NpbmdcIiBpbiBlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBGKCEhZS5taXNzaW5nKSwgRighIWUucmVhZFRpbWUpO1xuICAgICAgICBjb25zdCBuID0gT2kodCwgZS5taXNzaW5nKSwgcyA9IE5pKGUucmVhZFRpbWUpO1xuICAgICAgICByZXR1cm4gYW4ubmV3Tm9Eb2N1bWVudChuLCBzKTtcbiAgICB9KHQsIGUpIDogTygpO1xufVxuXG5mdW5jdGlvbiBRaSh0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgaWYgKFwidGFyZ2V0Q2hhbmdlXCIgaW4gZSkge1xuICAgICAgICBlLnRhcmdldENoYW5nZTtcbiAgICAgICAgLy8gcHJvdG8zIGRlZmF1bHQgdmFsdWUgaXMgdW5zZXQgaW4gSlNPTiAodW5kZWZpbmVkKSwgc28gdXNlICdOT19DSEFOR0UnXG4gICAgICAgIC8vIGlmIHVuc2V0XG4gICAgICAgIGNvbnN0IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gXCJOT19DSEFOR0VcIiA9PT0gdCA/IDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IHQgPyAxIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSB0ID8gMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOiBcIkNVUlJFTlRcIiA9PT0gdCA/IDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDogXCJSRVNFVFwiID09PSB0ID8gNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDogTygpO1xuICAgICAgICB9KGUudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSBlLnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC51c2VQcm90bzNKc29uID8gKEYodm9pZCAwID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCBWZS5mcm9tQmFzZTY0U3RyaW5nKGUgfHwgXCJcIikpIDogKEYodm9pZCAwID09PSBlIHx8IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSwgXG4gICAgICAgICAgICBWZS5mcm9tVWludDhBcnJheShlIHx8IG5ldyBVaW50OEFycmF5KSk7XG4gICAgICAgIH0odCwgZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pLCBvID0gZS50YXJnZXRDaGFuZ2UuY2F1c2UsIHUgPSBvICYmIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgPT09IHQuY29kZSA/IHEuVU5LTk9XTiA6IHVpKHQuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFUoZSwgdC5tZXNzYWdlIHx8IFwiXCIpO1xuICAgICAgICB9KG8pO1xuICAgICAgICBuID0gbmV3IElpKHMsIGksIHIsIHUgfHwgbnVsbCk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50Q2hhbmdlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgcy5kb2N1bWVudCwgcy5kb2N1bWVudC5uYW1lLCBzLmRvY3VtZW50LnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IGkgPSBPaSh0LCBzLmRvY3VtZW50Lm5hbWUpLCByID0gTmkocy5kb2N1bWVudC51cGRhdGVUaW1lKSwgbyA9IHMuZG9jdW1lbnQuY3JlYXRlVGltZSA/IE5pKHMuZG9jdW1lbnQuY3JlYXRlVGltZSkgOiBydC5taW4oKSwgdSA9IG5ldyB1bih7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogcy5kb2N1bWVudC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIGMgPSBhbi5uZXdGb3VuZERvY3VtZW50KGksIHIsIG8sIHUpLCBhID0gcy50YXJnZXRJZHMgfHwgW10sIGggPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgeWkoYSwgaCwgYy5rZXksIGMpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudERlbGV0ZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIHMuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBPaSh0LCBzLmRvY3VtZW50KSwgciA9IHMucmVhZFRpbWUgPyBOaShzLnJlYWRUaW1lKSA6IHJ0Lm1pbigpLCBvID0gYW4ubmV3Tm9Eb2N1bWVudChpLCByKSwgdSA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB5aShbXSwgdSwgby5rZXksIG8pO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudFJlbW92ZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIHMuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBPaSh0LCBzLmRvY3VtZW50KSwgciA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB5aShbXSwgciwgaSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEoXCJmaWx0ZXJcIiBpbiBlKSkgcmV0dXJuIE8oKTtcbiAgICAgICAge1xuICAgICAgICAgICAgZS5maWx0ZXI7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXI7XG4gICAgICAgICAgICB0LnRhcmdldElkO1xuICAgICAgICAgICAgY29uc3Qge2NvdW50OiBzID0gMCwgdW5jaGFuZ2VkTmFtZXM6IGl9ID0gdCwgciA9IG5ldyBzaShzLCBpKSwgbyA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBuID0gbmV3IHBpKG8sIHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBqaSh0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBqcykgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBVaSh0LCBlLmtleSwgZS52YWx1ZSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2YgWXMpIG4gPSB7XG4gICAgICAgIGRlbGV0ZTogJGkodCwgZS5rZXkpXG4gICAgfTsgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIHpzKSBuID0ge1xuICAgICAgICB1cGRhdGU6IFVpKHQsIGUua2V5LCBlLmRhdGEpLFxuICAgICAgICB1cGRhdGVNYXNrOiBvcihlLmZpZWxkTWFzaylcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFhzKSkgcmV0dXJuIE8oKTtcbiAgICAgICAgbiA9IHtcbiAgICAgICAgICAgIHZlcmlmeTogJGkodCwgZS5rZXkpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBlLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPiAwICYmIChuLnVwZGF0ZVRyYW5zZm9ybXMgPSBlLmZpZWxkVHJhbnNmb3Jtcy5tYXAoKHQgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS50cmFuc2Zvcm07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgYnMpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBzZXRUb1NlcnZlclZhbHVlOiBcIlJFUVVFU1RfVElNRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgVnMpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBhcHBlbmRNaXNzaW5nRWxlbWVudHM6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IG4uZWxlbWVudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBEcykgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHJlbW92ZUFsbEZyb21BcnJheToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIHhzKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgaW5jcmVtZW50OiBuLmd0XG4gICAgICAgIH07XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9KDAsIHQpKSkpLCBlLnByZWNvbmRpdGlvbi5pc05vbmUgfHwgKG4uY3VycmVudERvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiB4aSh0LCBlLnVwZGF0ZVRpbWUpXG4gICAgICAgIH0gOiB2b2lkIDAgIT09IGUuZXhpc3RzID8ge1xuICAgICAgICAgICAgZXhpc3RzOiBlLmV4aXN0c1xuICAgICAgICB9IDogTygpO1xuICAgIH0odCwgZS5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gemkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmN1cnJlbnREb2N1bWVudCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gRnMudXBkYXRlVGltZShOaSh0LnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyBGcy5leGlzdHModC5leGlzdHMpIDogRnMubm9uZSgpO1xuICAgIH0oZS5jdXJyZW50RG9jdW1lbnQpIDogRnMubm9uZSgpLCBzID0gZS51cGRhdGVUcmFuc2Zvcm1zID8gZS51cGRhdGVUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIGUpIEYoXCJSRVFVRVNUX1RJTUVcIiA9PT0gZS5zZXRUb1NlcnZlclZhbHVlKSwgbiA9IG5ldyBiczsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBWcyh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IERzKHQpO1xuICAgICAgICB9IGVsc2UgXCJpbmNyZW1lbnRcIiBpbiBlID8gbiA9IG5ldyB4cyh0LCBlLmluY3JlbWVudCkgOiBPKCk7XG4gICAgICAgIGNvbnN0IHMgPSBhdC5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNcyhzLCBuKTtcbiAgICB9KHQsIGUpKSkgOiBbXTtcbiAgICBpZiAoZS51cGRhdGUpIHtcbiAgICAgICAgZS51cGRhdGUubmFtZTtcbiAgICAgICAgY29uc3QgaSA9IE9pKHQsIGUudXBkYXRlLm5hbWUpLCByID0gbmV3IHVuKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLnVwZGF0ZS5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlLnVwZGF0ZU1hc2spIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZmllbGRQYXRocyB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlKGUubWFwKCh0ID0+IGF0LmZyb21TZXJ2ZXJGb3JtYXQodCkpKSk7XG4gICAgICAgICAgICB9KGUudXBkYXRlTWFzayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHpzKGksIHIsIHQsIG4sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcganMoaSwgciwgbiwgcyk7XG4gICAgfVxuICAgIGlmIChlLmRlbGV0ZSkge1xuICAgICAgICBjb25zdCBzID0gT2kodCwgZS5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IFlzKHMsIG4pO1xuICAgIH1cbiAgICBpZiAoZS52ZXJpZnkpIHtcbiAgICAgICAgY29uc3QgcyA9IE9pKHQsIGUudmVyaWZ5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBYcyhzLCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIE8oKTtcbn1cblxuZnVuY3Rpb24gV2kodCwgZSkge1xuICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID4gMCA/IChGKHZvaWQgMCAhPT0gZSksIHQubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXG4gICAgICAgIGxldCBuID0gdC51cGRhdGVUaW1lID8gTmkodC51cGRhdGVUaW1lKSA6IE5pKGUpO1xuICAgICAgICByZXR1cm4gbi5pc0VxdWFsKHJ0Lm1pbigpKSAmJiAoXG4gICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcbiAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXG4gICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXG4gICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxuICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxuICAgICAgICBuID0gTmkoZSkpLCBuZXcgT3MobiwgdC50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KHQsIGUpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIEhpKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb2N1bWVudHM6IFsgRmkodCwgZS5wYXRoKSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gSmkodCwgZSkge1xuICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB7fVxuICAgIH0sIHMgPSBlLnBhdGg7XG4gICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgPyAobi5wYXJlbnQgPSBGaSh0LCBzKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IGUuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gRmkodCwgcy5wb3BMYXN0KCkpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogcy5sYXN0U2VnbWVudCgpXG4gICAgfSBdKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHJyKGduLmNyZWF0ZSh0LCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpO1xuICAgIH0oZS5maWx0ZXJzKTtcbiAgICBpICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IGkpO1xuICAgIGNvbnN0IHIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdC5tYXAoKHQgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWVsZDogc3IodC5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiB0cih0LmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICB9KGUub3JkZXJCeSk7XG4gICAgciAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHIpO1xuICAgIGNvbnN0IG8gPSBTaSh0LCBlLmxpbWl0KTtcbiAgICB2YXIgdTtcbiAgICByZXR1cm4gbnVsbCAhPT0gbyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBvKSwgZS5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0ge1xuICAgICAgICBiZWZvcmU6ICh1ID0gZS5zdGFydEF0KS5pbmNsdXNpdmUsXG4gICAgICAgIHZhbHVlczogdS5wb3NpdGlvblxuICAgIH0pLCBlLmVuZEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogIXQuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiB0LnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfShlLmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIFlpKHQpIHtcbiAgICBsZXQgZSA9IEJpKHQucGFyZW50KTtcbiAgICBjb25zdCBuID0gdC5zdHJ1Y3R1cmVkUXVlcnksIHMgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHMgPiAwKSB7XG4gICAgICAgIEYoMSA9PT0gcyk7XG4gICAgICAgIGNvbnN0IHQgPSBuLmZyb21bMF07XG4gICAgICAgIHQuYWxsRGVzY2VuZGFudHMgPyBpID0gdC5jb2xsZWN0aW9uSWQgOiBlID0gZS5jaGlsZCh0LmNvbGxlY3Rpb25JZCk7XG4gICAgfVxuICAgIGxldCByID0gW107XG4gICAgbi53aGVyZSAmJiAociA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFppKHQpO1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIGduICYmIEluKGUpKSByZXR1cm4gZS5nZXRGaWx0ZXJzKCk7XG4gICAgICAgIHJldHVybiBbIGUgXTtcbiAgICB9KG4ud2hlcmUpKTtcbiAgICBsZXQgbyA9IFtdO1xuICAgIG4ub3JkZXJCeSAmJiAobyA9IG4ub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGRuKGlyKHQuZmllbGQpLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkRFU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAodC5kaXJlY3Rpb24pKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICh0KSkpKTtcbiAgICBsZXQgdSA9IG51bGw7XG4gICAgbi5saW1pdCAmJiAodSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIHJldHVybiBlID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiB0LCBGdChlKSA/IG51bGwgOiBlO1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBjID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhIXQuYmVmb3JlLCBuID0gdC52YWx1ZXMgfHwgW107XG4gICAgICAgIHJldHVybiBuZXcgaG4obiwgZSk7XG4gICAgfShuLnN0YXJ0QXQpKTtcbiAgICBsZXQgYSA9IG51bGw7XG4gICAgcmV0dXJuIG4uZW5kQXQgJiYgKGEgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBobihuLCBlKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIChuLmVuZEF0KSksIEtuKGUsIGksIG8sIHIsIHUsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIGMsIGEpO1xufVxuXG5mdW5jdGlvbiBYaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbVwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoLWJsb29tXCI7XG5cbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgfVxuICAgIH0oZS5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBaaSh0KSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51bmFyeUZpbHRlciA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0LnVuYXJ5RmlsdGVyLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIklTX05BTlwiOlxuICAgICAgICAgICAgY29uc3QgZSA9IGlyKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShlLCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTlVMTFwiOlxuICAgICAgICAgICAgY29uc3QgbiA9IGlyKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShuLCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05BTlwiOlxuICAgICAgICAgICAgY29uc3QgcyA9IGlyKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShzLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwge1xuICAgICAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2FzZSBcIklTX05PVF9OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBpID0gaXIodC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKGksIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgfVxuICAgIH0odCkgOiB2b2lkIDAgIT09IHQuZmllbGRGaWx0ZXIgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBtbi5jcmVhdGUoaXIodC5maWVsZEZpbHRlci5maWVsZCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICBjYXNlIFwiRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJOT1RfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIklOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTk9UX0lOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU19BTllcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuZmllbGRGaWx0ZXIub3ApLCB0LmZpZWxkRmlsdGVyLnZhbHVlKTtcbiAgICB9KHQpIDogdm9pZCAwICE9PSB0LmNvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGduLmNyZWF0ZSh0LmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgodCA9PiBaaSh0KSkpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFORFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiT1JcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0LmNvbXBvc2l0ZUZpbHRlci5vcCkpO1xuICAgIH0odCkgOiBPKCk7XG59XG5cbmZ1bmN0aW9uIHRyKHQpIHtcbiAgICByZXR1cm4gUmlbdF07XG59XG5cbmZ1bmN0aW9uIGVyKHQpIHtcbiAgICByZXR1cm4gUGlbdF07XG59XG5cbmZ1bmN0aW9uIG5yKHQpIHtcbiAgICByZXR1cm4gYmlbdF07XG59XG5cbmZ1bmN0aW9uIHNyKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IHQuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBpcih0KSB7XG4gICAgcmV0dXJuIGF0LmZyb21TZXJ2ZXJGb3JtYXQodC5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBycih0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBtbiA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA9PT0gdC5vcCkge1xuICAgICAgICAgICAgaWYgKFhlKHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFllKHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmIChcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICBpZiAoWGUodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFllKHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05VTExcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgIG9wOiBlcih0Lm9wKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0odCkgOiB0IGluc3RhbmNlb2YgZ24gPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmdldEZpbHRlcnMoKS5tYXAoKHQgPT4gcnIodCkpKTtcbiAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4gZVswXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpbHRlcjoge1xuICAgICAgICAgICAgICAgIG9wOiBucih0Lm9wKSxcbiAgICAgICAgICAgICAgICBmaWx0ZXJzOiBlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSh0KSA6IE8oKTtcbn1cblxuZnVuY3Rpb24gb3IodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gdC5maWVsZHMuZm9yRWFjaCgodCA9PiBlLnB1c2godC5jYW5vbmljYWxTdHJpbmcoKSkpKSwge1xuICAgICAgICBmaWVsZFBhdGhzOiBlXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdXIodCkge1xuICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcbiAgICByZXR1cm4gdC5sZW5ndGggPj0gNCAmJiBcInByb2plY3RzXCIgPT09IHQuZ2V0KDApICYmIFwiZGF0YWJhc2VzXCIgPT09IHQuZ2V0KDIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3MgY3Ige1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXG4gICAgICogd2FzIG1vZGlmaWVkLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXG4gICAgaSA9IHJ0Lm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCByID0gcnQubWluKClcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqLyAsIG8gPSBWZS5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgbGFzdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgcmVzdW1lIHRva2VuIG9yXG4gICAgICogcmVhZCB0aW1lLiBEb2N1bWVudHMgYXJlIGNvdW50ZWQgb25seSB3aGVuIG1ha2luZyBhIGxpc3RlbiByZXF1ZXN0IHdpdGhcbiAgICAgKiByZXN1bWUgdG9rZW4gb3IgcmVhZCB0aW1lLCBvdGhlcndpc2UsIGtlZXAgaXQgbnVsbC5cbiAgICAgKi8gLCB1ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gcywgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gciwgdGhpcy5yZXN1bWVUb2tlbiA9IG8sIHRoaXMuZXhwZWN0ZWRDb3VudCA9IHU7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgY3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdCwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgY3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgZSwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0LCBcbiAgICAgICAgLyogZXhwZWN0ZWRDb3VudD0gKi8gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGV4cGVjdGVkIGNvdW50LlxuICAgICAqLyAgICB3aXRoRXhwZWN0ZWRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgY3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgY3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHQsIHRoaXMucmVzdW1lVG9rZW4sIHRoaXMuZXhwZWN0ZWRDb3VudCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIGFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmUgPSB0O1xuICAgIH1cbn1cblxuLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi8gZnVuY3Rpb24gaHIodCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChlLmRvY3VtZW50KSBuID0gS2kodC5mZSwgZS5kb2N1bWVudCwgISFlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7IGVsc2UgaWYgKGUubm9Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gaHQuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSwgcyA9IHdyKGUubm9Eb2N1bWVudC5yZWFkVGltZSk7XG4gICAgICAgIG4gPSBhbi5uZXdOb0RvY3VtZW50KHQsIHMpLCBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiBuLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghZS51bmtub3duRG9jdW1lbnQpIHJldHVybiBPKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBodC5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCksIHMgPSB3cihlLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgICAgIG4gPSBhbi5uZXdVbmtub3duRG9jdW1lbnQodCwgcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUucmVhZFRpbWUgJiYgbi5zZXRSZWFkVGltZShmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgaXQodFswXSwgdFsxXSk7XG4gICAgICAgIHJldHVybiBydC5mcm9tVGltZXN0YW1wKGUpO1xuICAgIH0oZS5yZWFkVGltZSkpLCBuO1xufVxuXG4vKiogRW5jb2RlcyBhIGRvY3VtZW50IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIGxyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5rZXksIHMgPSB7XG4gICAgICAgIHByZWZpeFBhdGg6IG4uZ2V0Q29sbGVjdGlvblBhdGgoKS5wb3BMYXN0KCkudG9BcnJheSgpLFxuICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IG4uY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBkb2N1bWVudElkOiBuLnBhdGgubGFzdFNlZ21lbnQoKSxcbiAgICAgICAgcmVhZFRpbWU6IGZyKGUucmVhZFRpbWUpLFxuICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgfTtcbiAgICBpZiAoZS5pc0ZvdW5kRG9jdW1lbnQoKSkgcy5kb2N1bWVudCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6ICRpKHQsIGUua2V5KSxcbiAgICAgICAgICAgIGZpZWxkczogZS5kYXRhLnZhbHVlLm1hcFZhbHVlLmZpZWxkcyxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IERpKHQsIGUudmVyc2lvbi50b1RpbWVzdGFtcCgpKSxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IERpKHQsIGUuY3JlYXRlVGltZS50b1RpbWVzdGFtcCgpKVxuICAgICAgICB9O1xuICAgIH0odC5mZSwgZSk7IGVsc2UgaWYgKGUuaXNOb0RvY3VtZW50KCkpIHMubm9Eb2N1bWVudCA9IHtcbiAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgcmVhZFRpbWU6IGRyKGUudmVyc2lvbilcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCFlLmlzVW5rbm93bkRvY3VtZW50KCkpIHJldHVybiBPKCk7XG4gICAgICAgIHMudW5rbm93bkRvY3VtZW50ID0ge1xuICAgICAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHZlcnNpb246IGRyKGUudmVyc2lvbilcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbmZ1bmN0aW9uIGZyKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiBkcih0KSB7XG4gICAgY29uc3QgZSA9IHQudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBlLnNlY29uZHMsXG4gICAgICAgIG5hbm9zZWNvbmRzOiBlLm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gd3IodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgaXQodC5zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gcnQuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cbi8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXG5mdW5jdGlvbiBfcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IChlLmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcCgoZSA9PiB6aSh0LmZlLCBlKSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKyt0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uc1t0XTtcbiAgICAgICAgaWYgKHQgKyAxIDwgZS5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gZS5tdXRhdGlvbnNbdCArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUubXV0YXRpb25zW3QgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHMudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgZS5tdXRhdGlvbnMuc3BsaWNlKHQgKyAxLCAxKSwgXG4gICAgICAgICAgICArK3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcyA9IGUubXV0YXRpb25zLm1hcCgoZSA9PiB6aSh0LmZlLCBlKSkpLCBpID0gaXQuZnJvbU1pbGxpcyhlLmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgWnMoZS5iYXRjaElkLCBpLCBuLCBzKTtcbn1cblxuLyoqIERlY29kZXMgYSBEYlRhcmdldCBpbnRvIFRhcmdldERhdGEgKi8gZnVuY3Rpb24gbXIodCkge1xuICAgIGNvbnN0IGUgPSB3cih0LnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gdC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gd3IodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSA6IHJ0Lm1pbigpO1xuICAgIGxldCBzO1xuICAgIHZhciBpO1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQucXVlcnkuZG9jdW1lbnRzID8gKEYoMSA9PT0gKGkgPSB0LnF1ZXJ5KS5kb2N1bWVudHMubGVuZ3RoKSwgXG4gICAgcyA9IEpuKEduKEJpKGkuZG9jdW1lbnRzWzBdKSkpKSA6IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBKbihZaSh0KSk7XG4gICAgfSh0LnF1ZXJ5KSwgbmV3IGNyKHMsIHQudGFyZ2V0SWQsIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovICwgdC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGUsIG4sIFZlLmZyb21CYXNlNjRTdHJpbmcodC5yZXN1bWVUb2tlbikpO1xufVxuXG4vKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBncih0LCBlKSB7XG4gICAgY29uc3QgbiA9IGRyKGUuc25hcHNob3RWZXJzaW9uKSwgcyA9IGRyKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XG4gICAgbGV0IGk7XG4gICAgaSA9IEZuKGUudGFyZ2V0KSA/IEhpKHQuZmUsIGUudGFyZ2V0KSA6IEppKHQuZmUsIGUudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgciA9IGUucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFyZ2V0SWQ6IGUudGFyZ2V0SWQsXG4gICAgICAgIGNhbm9uaWNhbElkOiAkbihlLnRhcmdldCksXG4gICAgICAgIHJlYWRUaW1lOiBuLFxuICAgICAgICByZXN1bWVUb2tlbjogcixcbiAgICAgICAgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyOiBlLnNlcXVlbmNlTnVtYmVyLFxuICAgICAgICBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uOiBzLFxuICAgICAgICBxdWVyeTogaVxuICAgIH07XG59XG5cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIHlyKHQpIHtcbiAgICBjb25zdCBlID0gWWkoe1xuICAgICAgICBwYXJlbnQ6IHQucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHQuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSB0LmxpbWl0VHlwZSA/IFhuKGUsIGUubGltaXQsIFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovKSA6IGU7XG59XG5cbi8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBwcm90byBvYmplY3QgdG8gYSBOYW1lZFF1ZXJ5IG1vZGVsIG9iamVjdC4gKi9cbi8qKiBFbmNvZGVzIGEgRGJEb2N1bWVudE92ZXJsYXkgb2JqZWN0IHRvIGFuIE92ZXJsYXkgbW9kZWwgb2JqZWN0LiAqL1xuZnVuY3Rpb24gcHIodCwgZSkge1xuICAgIHJldHVybiBuZXcgZWkoZS5sYXJnZXN0QmF0Y2hJZCwgemkodC5mZSwgZS5vdmVybGF5TXV0YXRpb24pKTtcbn1cblxuLyoqIERlY29kZXMgYW4gT3ZlcmxheSBtb2RlbCBvYmplY3QgaW50byBhIERiRG9jdW1lbnRPdmVybGF5IG9iamVjdC4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgRGJEb2N1bWVudE92ZXJsYXlLZXkgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gdXNlciBhbmRcbiAqIGRvY3VtZW50IGtleS5cbiAqL1xuZnVuY3Rpb24gSXIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICByZXR1cm4gWyB0LCBxdChlLnBhdGgucG9wTGFzdCgpKSwgbiBdO1xufVxuXG5mdW5jdGlvbiBUcih0LCBlLCBuLCBzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5kZXhJZDogdCxcbiAgICAgICAgdWlkOiBlLnVpZCB8fCBcIlwiLFxuICAgICAgICBzZXF1ZW5jZU51bWJlcjogbixcbiAgICAgICAgcmVhZFRpbWU6IGRyKHMucmVhZFRpbWUpLFxuICAgICAgICBkb2N1bWVudEtleTogcXQocy5kb2N1bWVudEtleS5wYXRoKSxcbiAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IHMubGFyZ2VzdEJhdGNoSWRcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBFciB7XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gQXIodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IChlID0gdCkuYnVuZGxlSWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogd3IoZS5jcmVhdGVUaW1lKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIERiQnVuZGxlIHRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHRvIGEgRGJCdW5kbGUuICovICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBBcih0KS5wdXQoe1xuICAgICAgICAgICAgYnVuZGxlSWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiBkcihOaShuLmNyZWF0ZVRpbWUpKSxcbiAgICAgICAgICAgIHZlcnNpb246IG4udmVyc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG47XG4gICAgICAgIC8qKiBFbmNvZGVzIGEgRGJOYW1lZFF1ZXJ5IHRvIGEgTmFtZWRRdWVyeS4gKi8gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gdnIodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogKGUgPSB0KS5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB5cihlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IHdyKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgZnJvbSBhIGJ1bmRsZSBwcm90byB0byBhIERiTmFtZWRRdWVyeS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gdnIodCkucHV0KGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBkcihOaSh0LnJlYWRUaW1lKSksXG4gICAgICAgICAgICAgICAgYnVuZGxlZFF1ZXJ5OiB0LmJ1bmRsZWRRdWVyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgYnVuZGxlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gQXIodCkge1xuICAgIHJldHVybiBfZSh0LCBcImJ1bmRsZXNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBuYW1lZFF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIHZyKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJuYW1lZFF1ZXJpZXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIERvY3VtZW50T3ZlcmxheUNhY2hlIHVzaW5nIEluZGV4ZWREYi5cbiAqLyBjbGFzcyBSciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXJJZCBmb3Igd2hpY2ggd2UgYXJlIGFjY2Vzc2luZyBvdmVybGF5cy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHQsIHRoaXMudXNlcklkID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUudWlkIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgUnIodCwgbik7XG4gICAgfVxuICAgIGdldE92ZXJsYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gUHIodCkuZ2V0KElyKHRoaXMudXNlcklkLCBlKSkubmV4dCgodCA9PiB0ID8gcHIodGhpcy5zZXJpYWxpemVyLCB0KSA6IG51bGwpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZnMoKTtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2goZSwgKGUgPT4gdGhpcy5nZXRPdmVybGF5KHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPT0gdCAmJiBuLnNldChlLCB0KTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBzYXZlT3ZlcmxheXModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbmV3IGVpKGUsIGkpO1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMud2UodCwgcikpO1xuICAgICAgICB9KSksIFJ0LndhaXRGb3Iocyk7XG4gICAgfVxuICAgIHJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgU2V0O1xuICAgICAgICAvLyBHZXQgdGhlIHNldCBvZiB1bmlxdWUgY29sbGVjdGlvbiBwYXRocy5cbiAgICAgICAgICAgICAgICBlLmZvckVhY2goKHQgPT4gcy5hZGQocXQodC5nZXRDb2xsZWN0aW9uUGF0aCgpKSkpKTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBlLCBuIF0sIFsgdGhpcy51c2VySWQsIGUsIG4gKyAxIF0sIFxuICAgICAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICAgICAgaS5wdXNoKFByKHQpLkooXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCBzKSk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGZzKCksIGkgPSBxdChlKSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGksIG4gXSwgWyB0aGlzLnVzZXJJZCwgaSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBQcih0KS5qKFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgcikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBwcih0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICAgICAgICAgIHMuc2V0KHQuZ2V0S2V5KCksIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gZnMoKTtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIC8vIFdlIHdhbnQgYmF0Y2ggSURzIGxhcmdlciB0aGFuIGBzaW5jZUJhdGNoSWRgLCBhbmQgc28gdGhlIGxvd2VyIGJvdW5kXG4gICAgICAgIC8vIGlzIG5vdCBpbmNsdXNpdmUuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGUsIG4gXSwgWyB0aGlzLnVzZXJJZCwgZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBQcih0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImNvbGxlY3Rpb25Hcm91cE92ZXJsYXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IG9cbiAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBkbyBub3Qgd2FudCB0byByZXR1cm4gcGFydGlhbCBiYXRjaCBvdmVybGF5cywgZXZlbiBpZiB0aGUgc2l6ZVxuICAgICAgICAgICAgLy8gb2YgdGhlIHJlc3VsdCBzZXQgZXhjZWVkcyB0aGUgZ2l2ZW4gYGNvdW50YCBhcmd1bWVudC4gVGhlcmVmb3JlLCB3ZVxuICAgICAgICAgICAgLy8gY29udGludWUgdG8gYWdncmVnYXRlIHJlc3VsdHMgZXZlbiBhZnRlciB0aGUgcmVzdWx0IHNpemUgZXhjZWVkc1xuICAgICAgICAgICAgLy8gYGNvdW50YCBpZiB0aGVyZSBhcmUgbW9yZSBvdmVybGF5cyBmcm9tIHRoZSBgY3VycmVudEJhdGNoSWRgLlxuICAgICAgICAgICAgY29uc3QgbyA9IHByKHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgICAgICAgICBpLnNpemUoKSA8IHMgfHwgby5sYXJnZXN0QmF0Y2hJZCA9PT0gciA/IChpLnNldChvLmdldEtleSgpLCBvKSwgciA9IG8ubGFyZ2VzdEJhdGNoSWQpIDogbi5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIHdlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFByKHQpLnB1dChmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBjb25zdCBbcywgaSwgcl0gPSBJcihlLCBuLm11dGF0aW9uLmtleSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVzZXJJZDogZSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uUGF0aDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiByLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogbi5tdXRhdGlvbi5rZXkuZ2V0Q29sbGVjdGlvbkdyb3VwKCksXG4gICAgICAgICAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IG4ubGFyZ2VzdEJhdGNoSWQsXG4gICAgICAgICAgICAgICAgb3ZlcmxheU11dGF0aW9uOiBqaSh0LmZlLCBuLm11dGF0aW9uKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIHRoaXMudXNlcklkLCBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgb3ZlcmxheSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gUHIodCkge1xuICAgIHJldHVybiBfZSh0LCBcImRvY3VtZW50T3ZlcmxheXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBOb3RlOiBUaGlzIGNvZGUgaXMgY29waWVkIGZyb20gdGhlIGJhY2tlbmQuIENvZGUgdGhhdCBpcyBub3QgdXNlZCBieVxuLy8gRmlyZXN0b3JlIHdhcyByZW1vdmVkLlxuLyoqIEZpcmVzdG9yZSBpbmRleCB2YWx1ZSB3cml0ZXIuICAqL1xuY2xhc3MgYnIge1xuICAgIGNvbnN0cnVjdG9yKCkge31cbiAgICAvLyBUaGUgd3JpdGUgbWV0aG9kcyBiZWxvdyBzaG9ydC1jaXJjdWl0IHdyaXRpbmcgdGVybWluYXRvcnMgZm9yIHZhbHVlc1xuICAgIC8vIGNvbnRhaW5pbmcgYSAodGVybWluYXRpbmcpIHRydW5jYXRlZCB2YWx1ZS5cbiAgICAvLyBBcyBhbiBleGFtcGxlLCBjb25zaWRlciB0aGUgcmVzdWx0aW5nIGVuY29kaW5nIGZvcjpcbiAgICAvLyBbXCJiYXJcIiwgWzIsIFwiZm9vXCJdXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRFUk0sIFRFUk0sIFRFUk0pXG4gICAgLy8gW1wiYmFyXCIsIFsyLCB0cnVuY2F0ZWQoXCJmb29cIildXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRSVU5DKVxuICAgIC8vIFtcImJhclwiLCB0cnVuY2F0ZWQoW1wiZm9vXCJdKV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVkuIFNUUklORywgXCJmb29cIiwgVEVSTSwgVFJVTkMpXG4gICAgLyoqIFdyaXRlcyBhbiBpbmRleCB2YWx1ZS4gICovXG4gICAgX2UodCwgZSkge1xuICAgICAgICB0aGlzLm1lKHQsIGUpLCBcbiAgICAgICAgLy8gV3JpdGUgc2VwYXJhdG9yIHRvIHNwbGl0IGluZGV4IHZhbHVlc1xuICAgICAgICAvLyAoc2VlIGdvL2ZpcmVzdG9yZS1zdG9yYWdlLWZvcm1hdCNlbmNvZGluZ3MpLlxuICAgICAgICBlLmdlKCk7XG4gICAgfVxuICAgIG1lKHQsIGUpIHtcbiAgICAgICAgaWYgKFwibnVsbFZhbHVlXCIgaW4gdCkgdGhpcy55ZShlLCA1KTsgZWxzZSBpZiAoXCJib29sZWFuVmFsdWVcIiBpbiB0KSB0aGlzLnllKGUsIDEwKSwgXG4gICAgICAgIGUucGUodC5ib29sZWFuVmFsdWUgPyAxIDogMCk7IGVsc2UgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gdCkgdGhpcy55ZShlLCAxNSksIGUucGUoQ2UodC5pbnRlZ2VyVmFsdWUpKTsgZWxzZSBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBDZSh0LmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIGlzTmFOKG4pID8gdGhpcy55ZShlLCAxMykgOiAodGhpcy55ZShlLCAxNSksIEJ0KG4pID8gXG4gICAgICAgICAgICAvLyAtMC4wLCAwIGFuZCAwLjAgYXJlIGFsbCBjb25zaWRlcmVkIHRoZSBzYW1lXG4gICAgICAgICAgICBlLnBlKDApIDogZS5wZShuKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRpbWVzdGFtcFZhbHVlO1xuICAgICAgICAgICAgdGhpcy55ZShlLCAyMCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4gPyBlLkllKG4pIDogKGUuSWUoYCR7bi5zZWNvbmRzIHx8IFwiXCJ9YCksIGUucGUobi5uYW5vcyB8fCAwKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJzdHJpbmdWYWx1ZVwiIGluIHQpIHRoaXMuVGUodC5zdHJpbmdWYWx1ZSwgZSksIHRoaXMuRWUoZSk7IGVsc2UgaWYgKFwiYnl0ZXNWYWx1ZVwiIGluIHQpIHRoaXMueWUoZSwgMzApLCBcbiAgICAgICAgZS5BZSh4ZSh0LmJ5dGVzVmFsdWUpKSwgdGhpcy5FZShlKTsgZWxzZSBpZiAoXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQpIHRoaXMudmUodC5yZWZlcmVuY2VWYWx1ZSwgZSk7IGVsc2UgaWYgKFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0Lmdlb1BvaW50VmFsdWU7XG4gICAgICAgICAgICB0aGlzLnllKGUsIDQ1KSwgZS5wZShuLmxhdGl0dWRlIHx8IDApLCBlLnBlKG4ubG9uZ2l0dWRlIHx8IDApO1xuICAgICAgICB9IGVsc2UgXCJtYXBWYWx1ZVwiIGluIHQgPyBlbih0KSA/IHRoaXMueWUoZSwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIDogKHRoaXMuUmUodC5tYXBWYWx1ZSwgZSksIFxuICAgICAgICB0aGlzLkVlKGUpKSA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyAodGhpcy5QZSh0LmFycmF5VmFsdWUsIGUpLCB0aGlzLkVlKGUpKSA6IE8oKTtcbiAgICB9XG4gICAgVGUodCwgZSkge1xuICAgICAgICB0aGlzLnllKGUsIDI1KSwgdGhpcy5iZSh0LCBlKTtcbiAgICB9XG4gICAgYmUodCwgZSkge1xuICAgICAgICBlLkllKHQpO1xuICAgIH1cbiAgICBSZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LmZpZWxkcyB8fCB7fTtcbiAgICAgICAgdGhpcy55ZShlLCA1NSk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBPYmplY3Qua2V5cyhuKSkgdGhpcy5UZSh0LCBlKSwgdGhpcy5tZShuW3RdLCBlKTtcbiAgICB9XG4gICAgUGUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdC52YWx1ZXMgfHwgW107XG4gICAgICAgIHRoaXMueWUoZSwgNTApO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgdGhpcy5tZSh0LCBlKTtcbiAgICB9XG4gICAgdmUodCwgZSkge1xuICAgICAgICB0aGlzLnllKGUsIDM3KTtcbiAgICAgICAgaHQuZnJvbU5hbWUodCkucGF0aC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMueWUoZSwgNjApLCB0aGlzLmJlKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHllKHQsIGUpIHtcbiAgICAgICAgdC5wZShlKTtcbiAgICB9XG4gICAgRWUodCkge1xuICAgICAgICAvLyBXaGlsZSB0aGUgU0RLIGRvZXMgbm90IGltcGxlbWVudCB0cnVuY2F0aW9uLCB0aGUgdHJ1bmNhdGlvbiBtYXJrZXIgaXNcbiAgICAgICAgLy8gdXNlZCB0byB0ZXJtaW5hdGUgYWxsIHZhcmlhYmxlIGxlbmd0aCB2YWx1ZXMgKHdoaWNoIGFyZSBzdHJpbmdzLCBieXRlcyxcbiAgICAgICAgLy8gcmVmZXJlbmNlcywgYXJyYXlzIGFuZCBtYXBzKS5cbiAgICAgICAgdC5wZSgyKTtcbiAgICB9XG59XG5cbmJyLlZlID0gbmV3IGJyO1xuXG4vKipcbiAqIENvdW50cyB0aGUgbnVtYmVyIG9mIHplcm9zIGluIGEgYnl0ZS5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBWcih0KSB7XG4gICAgaWYgKDAgPT09IHQpIHJldHVybiA4O1xuICAgIGxldCBlID0gMDtcbiAgICByZXR1cm4gdCA+PiA0ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIGZpcnN0IGZvdXIgYml0cyBhcmUgemVyby5cbiAgICBlICs9IDQsIHQgPDw9IDQpLCB0ID4+IDYgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgdHdvIChvciBuZXh0IHR3bykgYml0cyBhcmUgemVyby5cbiAgICBlICs9IDIsIHQgPDw9IDIpLCB0ID4+IDcgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgcmVtYWluaW5nIGJpdCBpcyB6ZXJvLlxuICAgIGUgKz0gMSksIGU7XG59XG5cbi8qKiBDb3VudHMgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zIGluIHRoZSBnaXZlbiBieXRlIGFycmF5LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gc3RvcmUgXCJ2YWx1ZVwiLiBMZWFkaW5nIHplcm8gYnl0ZXNcbiAqIGFyZSBza2lwcGVkLlxuICovXG5mdW5jdGlvbiBTcih0KSB7XG4gICAgLy8gVGhpcyBpcyBqdXN0IHRoZSBudW1iZXIgb2YgYnl0ZXMgZm9yIHRoZSB1bnNpZ25lZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgbnVtYmVyLlxuICAgIGNvbnN0IGUgPSA2NCAtIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IDg7ICsrbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IFZyKDI1NSAmIHRbbl0pO1xuICAgICAgICAgICAgaWYgKGUgKz0gcywgOCAhPT0gcykgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSh0KTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKGUgLyA4KTtcbn1cblxuLyoqXG4gKiBPcmRlcmVkQ29kZVdyaXRlciBpcyBhIG1pbmltYWwtYWxsb2NhdGlvbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgd3JpdGluZ1xuICogYmVoYXZpb3IgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgY29kZSBpcyBwb3J0ZWQgZnJvbSBpdHMgSmF2YSBjb3VudGVycGFydC5cbiAqLyBjbGFzcyBEciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoMTAyNCksIHRoaXMucG9zaXRpb24gPSAwO1xuICAgIH1cbiAgICBTZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0W1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICAgICAgbGV0IG4gPSBlLm5leHQoKTtcbiAgICAgICAgZm9yICg7IW4uZG9uZTsgKSB0aGlzLkRlKG4udmFsdWUpLCBuID0gZS5uZXh0KCk7XG4gICAgICAgIHRoaXMuQ2UoKTtcbiAgICB9XG4gICAgeGUodCkge1xuICAgICAgICBjb25zdCBlID0gdFtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBuID0gZS5uZXh0KCk7XG4gICAgICAgIGZvciAoOyFuLmRvbmU7ICkgdGhpcy5OZShuLnZhbHVlKSwgbiA9IGUubmV4dCgpO1xuICAgICAgICB0aGlzLmtlKCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgdXRmOCBieXRlcyBpbnRvIHRoaXMgYnl0ZSBzZXF1ZW5jZSwgYXNjZW5kaW5nLiAqLyAgICBNZSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgaWYgKHQgPCAxMjgpIHRoaXMuRGUodCk7IGVsc2UgaWYgKHQgPCAyMDQ4KSB0aGlzLkRlKDk2MCB8IHQgPj4+IDYpLCB0aGlzLkRlKDEyOCB8IDYzICYgdCk7IGVsc2UgaWYgKGUgPCBcIlxcdWQ4MDBcIiB8fCBcIlxcdWRiZmZcIiA8IGUpIHRoaXMuRGUoNDgwIHwgdCA+Pj4gMTIpLCBcbiAgICAgICAgICAgIHRoaXMuRGUoMTI4IHwgNjMgJiB0ID4+PiA2KSwgdGhpcy5EZSgxMjggfCA2MyAmIHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlUG9pbnRBdCgwKTtcbiAgICAgICAgICAgICAgICB0aGlzLkRlKDI0MCB8IHQgPj4+IDE4KSwgdGhpcy5EZSgxMjggfCA2MyAmIHQgPj4+IDEyKSwgdGhpcy5EZSgxMjggfCA2MyAmIHQgPj4+IDYpLCBcbiAgICAgICAgICAgICAgICB0aGlzLkRlKDEyOCB8IDYzICYgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5DZSgpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIHV0ZjggYnl0ZXMgaW50byB0aGlzIGJ5dGUgc2VxdWVuY2UsIGRlc2NlbmRpbmcgKi8gICAgJGUodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGlmICh0IDwgMTI4KSB0aGlzLk5lKHQpOyBlbHNlIGlmICh0IDwgMjA0OCkgdGhpcy5OZSg5NjAgfCB0ID4+PiA2KSwgdGhpcy5OZSgxMjggfCA2MyAmIHQpOyBlbHNlIGlmIChlIDwgXCJcXHVkODAwXCIgfHwgXCJcXHVkYmZmXCIgPCBlKSB0aGlzLk5lKDQ4MCB8IHQgPj4+IDEyKSwgXG4gICAgICAgICAgICB0aGlzLk5lKDEyOCB8IDYzICYgdCA+Pj4gNiksIHRoaXMuTmUoMTI4IHwgNjMgJiB0KTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5OZSgyNDAgfCB0ID4+PiAxOCksIHRoaXMuTmUoMTI4IHwgNjMgJiB0ID4+PiAxMiksIHRoaXMuTmUoMTI4IHwgNjMgJiB0ID4+PiA2KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5OZSgxMjggfCA2MyAmIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMua2UoKTtcbiAgICB9XG4gICAgT2UodCkge1xuICAgICAgICAvLyBWYWx1ZXMgYXJlIGVuY29kZWQgd2l0aCBhIHNpbmdsZSBieXRlIGxlbmd0aCBwcmVmaXgsIGZvbGxvd2VkIGJ5IHRoZVxuICAgICAgICAvLyBhY3R1YWwgdmFsdWUgaW4gYmlnLWVuZGlhbiBmb3JtYXQgd2l0aCBsZWFkaW5nIDAgYnl0ZXMgZHJvcHBlZC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuRmUodCksIG4gPSBTcihlKTtcbiAgICAgICAgdGhpcy5CZSgxICsgbiksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiBuO1xuICAgICAgICAvLyBXcml0ZSB0aGUgbGVuZ3RoXG4gICAgICAgIGZvciAobGV0IHQgPSBlLmxlbmd0aCAtIG47IHQgPCBlLmxlbmd0aDsgKyt0KSB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gMjU1ICYgZVt0XTtcbiAgICB9XG4gICAgTGUodCkge1xuICAgICAgICAvLyBWYWx1ZXMgYXJlIGVuY29kZWQgd2l0aCBhIHNpbmdsZSBieXRlIGxlbmd0aCBwcmVmaXgsIGZvbGxvd2VkIGJ5IHRoZVxuICAgICAgICAvLyBpbnZlcnRlZCB2YWx1ZSBpbiBiaWctZW5kaWFuIGZvcm1hdCB3aXRoIGxlYWRpbmcgMCBieXRlcyBkcm9wcGVkLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5GZSh0KSwgbiA9IFNyKGUpO1xuICAgICAgICB0aGlzLkJlKDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgbik7XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgdCA9IGUubGVuZ3RoIC0gbjsgdCA8IGUubGVuZ3RoOyArK3QpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIGVbdF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYWZ0ZXIgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIHFlKCkge1xuICAgICAgICB0aGlzLlVlKDI1NSksIHRoaXMuVWUoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBcImluZmluaXR5XCIgYnl0ZSBzZXF1ZW5jZSB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIEtlKCkge1xuICAgICAgICB0aGlzLkdlKDI1NSksIHRoaXMuR2UoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBidWZmZXIgc3VjaCB0aGF0IGl0IGlzIHRoZSBzYW1lIGFzIHdoZW4gaXQgd2FzIG5ld2x5XG4gICAgICogY29uc3RydWN0ZWQuXG4gICAgICovICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgc2VlZCh0KSB7XG4gICAgICAgIHRoaXMuQmUodC5sZW5ndGgpLCB0aGlzLmJ1ZmZlci5zZXQodCwgdGhpcy5wb3NpdGlvbiksIHRoaXMucG9zaXRpb24gKz0gdC5sZW5ndGg7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGVuY29kZWQgYnl0ZXMgaW4gdGhpcyBidWZmZXIuICAqLyAgICBRZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMucG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGB2YWxgIGludG8gYW4gZW5jb2Rpbmcgc28gdGhhdCB0aGUgb3JkZXIgbWF0Y2hlcyB0aGUgSUVFRSA3NTRcbiAgICAgKiBmbG9hdGluZy1wb2ludCBjb21wYXJpc29uIHJlc3VsdHMgd2l0aCB0aGUgZm9sbG93aW5nIGV4Y2VwdGlvbnM6XG4gICAgICogICAtMC4wIDwgMC4wXG4gICAgICogICBhbGwgbm9uLU5hTiA8IE5hTlxuICAgICAqICAgTmFOID0gTmFOXG4gICAgICovICAgIEZlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAvKiogQ29udmVydHMgYSBKYXZhU2NyaXB0IG51bWJlciB0byBhIGJ5dGUgYXJyYXkgKHVzaW5nIGJpZyBlbmRpYW4gZW5jb2RpbmcpLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7XG4gICAgICAgICAgICByZXR1cm4gZS5zZXRGbG9hdDY0KDAsIHQsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITEpLCBuZXcgVWludDhBcnJheShlLmJ1ZmZlcik7XG4gICAgICAgIH0odCksIG4gPSAwICE9ICgxMjggJiBlWzBdKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGJpdCBpcyBzZXQuIFdlIHVzZSBhIGJpdCBtYXNrIHNpbmNlIHZhbHVlWzBdIGlzXG4gICAgICAgIC8vIGVuY29kZWQgYXMgYSBudW1iZXIgZnJvbSAwIHRvIDI1NS5cbiAgICAgICAgICAgICAgICAvLyBSZXZlcnQgdGhlIHR3byBjb21wbGVtZW50IHRvIGdldCBuYXR1cmFsIG9yZGVyaW5nXG4gICAgICAgIGVbMF0gXj0gbiA/IDI1NSA6IDEyODtcbiAgICAgICAgZm9yIChsZXQgdCA9IDE7IHQgPCBlLmxlbmd0aDsgKyt0KSBlW3RdIF49IG4gPyAyNTUgOiAwO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGFzY2VuZGluZyB0byB0aGUgYnVmZmVyLiAqLyAgICBEZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAyNTUgJiB0O1xuICAgICAgICAwID09PSBlID8gKHRoaXMuVWUoMCksIHRoaXMuVWUoMjU1KSkgOiAyNTUgPT09IGUgPyAodGhpcy5VZSgyNTUpLCB0aGlzLlVlKDApKSA6IHRoaXMuVWUoZSk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBkZXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICAqLyAgICBOZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAyNTUgJiB0O1xuICAgICAgICAwID09PSBlID8gKHRoaXMuR2UoMCksIHRoaXMuR2UoMjU1KSkgOiAyNTUgPT09IGUgPyAodGhpcy5HZSgyNTUpLCB0aGlzLkdlKDApKSA6IHRoaXMuR2UodCk7XG4gICAgfVxuICAgIENlKCkge1xuICAgICAgICB0aGlzLlVlKDApLCB0aGlzLlVlKDEpO1xuICAgIH1cbiAgICBrZSgpIHtcbiAgICAgICAgdGhpcy5HZSgwKSwgdGhpcy5HZSgxKTtcbiAgICB9XG4gICAgVWUodCkge1xuICAgICAgICB0aGlzLkJlKDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gdDtcbiAgICB9XG4gICAgR2UodCkge1xuICAgICAgICB0aGlzLkJlKDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfnQ7XG4gICAgfVxuICAgIEJlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQgKyB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBpZiAoZSA8PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgLy8gVHJ5IGRvdWJsaW5nLlxuICAgICAgICAgICAgICAgIGxldCBuID0gMiAqIHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgLy8gU3RpbGwgbm90IGJpZyBlbm91Z2g/IEp1c3QgYWxsb2NhdGUgdGhlIHJpZ2h0IHNpemUuXG4gICAgICAgICAgICAgICAgbiA8IGUgJiYgKG4gPSBlKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgYnVmZmVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgVWludDhBcnJheShuKTtcbiAgICAgICAgcy5zZXQodGhpcy5idWZmZXIpLCAvLyBjb3B5IG9sZCBkYXRhXG4gICAgICAgIHRoaXMuYnVmZmVyID0gcztcbiAgICB9XG59XG5cbmNsYXNzIENyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuamUgPSB0O1xuICAgIH1cbiAgICBBZSh0KSB7XG4gICAgICAgIHRoaXMuamUuU2UodCk7XG4gICAgfVxuICAgIEllKHQpIHtcbiAgICAgICAgdGhpcy5qZS5NZSh0KTtcbiAgICB9XG4gICAgcGUodCkge1xuICAgICAgICB0aGlzLmplLk9lKHQpO1xuICAgIH1cbiAgICBnZSgpIHtcbiAgICAgICAgdGhpcy5qZS5xZSgpO1xuICAgIH1cbn1cblxuY2xhc3MgeHIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5qZSA9IHQ7XG4gICAgfVxuICAgIEFlKHQpIHtcbiAgICAgICAgdGhpcy5qZS54ZSh0KTtcbiAgICB9XG4gICAgSWUodCkge1xuICAgICAgICB0aGlzLmplLiRlKHQpO1xuICAgIH1cbiAgICBwZSh0KSB7XG4gICAgICAgIHRoaXMuamUuTGUodCk7XG4gICAgfVxuICAgIGdlKCkge1xuICAgICAgICB0aGlzLmplLktlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgYERpcmVjdGlvbmFsSW5kZXhCeXRlRW5jb2RlcmAgdXNpbmcgYE9yZGVyZWRDb2RlV3JpdGVyYCBmb3IgdGhlXG4gKiBhY3R1YWwgZW5jb2RpbmcuXG4gKi8gY2xhc3MgTnIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmplID0gbmV3IERyLCB0aGlzLnplID0gbmV3IENyKHRoaXMuamUpLCB0aGlzLldlID0gbmV3IHhyKHRoaXMuamUpO1xuICAgIH1cbiAgICBzZWVkKHQpIHtcbiAgICAgICAgdGhpcy5qZS5zZWVkKHQpO1xuICAgIH1cbiAgICBIZSh0KSB7XG4gICAgICAgIHJldHVybiAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IHQgPyB0aGlzLnplIDogdGhpcy5XZTtcbiAgICB9XG4gICAgUWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmplLlFlKCk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmplLnJlc2V0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFJlcHJlc2VudHMgYW4gaW5kZXggZW50cnkgc2F2ZWQgYnkgdGhlIFNESyBpbiBwZXJzaXN0ZWQgc3RvcmFnZS4gKi8gY2xhc3Mga3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5pbmRleElkID0gdCwgdGhpcy5kb2N1bWVudEtleSA9IGUsIHRoaXMuYXJyYXlWYWx1ZSA9IG4sIHRoaXMuZGlyZWN0aW9uYWxWYWx1ZSA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gSW5kZXhFbnRyeSBlbnRyeSB0aGF0IHNvcnRzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBjdXJyZW50XG4gICAgICogZGlyZWN0aW9uYWwgdmFsdWUuXG4gICAgICovICAgIEplKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kaXJlY3Rpb25hbFZhbHVlLmxlbmd0aCwgZSA9IDAgPT09IHQgfHwgMjU1ID09PSB0aGlzLmRpcmVjdGlvbmFsVmFsdWVbdCAtIDFdID8gdCArIDEgOiB0LCBuID0gbmV3IFVpbnQ4QXJyYXkoZSk7XG4gICAgICAgIHJldHVybiBuLnNldCh0aGlzLmRpcmVjdGlvbmFsVmFsdWUsIDApLCBlICE9PSB0ID8gbi5zZXQoWyAwIF0sIHRoaXMuZGlyZWN0aW9uYWxWYWx1ZS5sZW5ndGgpIDogKytuW24ubGVuZ3RoIC0gMV0sIFxuICAgICAgICBuZXcga3IodGhpcy5pbmRleElkLCB0aGlzLmRvY3VtZW50S2V5LCB0aGlzLmFycmF5VmFsdWUsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTXIodCwgZSkge1xuICAgIGxldCBuID0gdC5pbmRleElkIC0gZS5pbmRleElkO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0gJHIodC5hcnJheVZhbHVlLCBlLmFycmF5VmFsdWUpLCAwICE9PSBuID8gbiA6IChuID0gJHIodC5kaXJlY3Rpb25hbFZhbHVlLCBlLmRpcmVjdGlvbmFsVmFsdWUpLCBcbiAgICAwICE9PSBuID8gbiA6IGh0LmNvbXBhcmF0b3IodC5kb2N1bWVudEtleSwgZS5kb2N1bWVudEtleSkpKTtcbn1cblxuZnVuY3Rpb24gJHIodCwgZSkge1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggJiYgbiA8IGUubGVuZ3RoOyArK24pIHtcbiAgICAgICAgY29uc3QgcyA9IHRbbl0gLSBlW25dO1xuICAgICAgICBpZiAoMCAhPT0gcykgcmV0dXJuIHM7XG4gICAgfVxuICAgIHJldHVybiB0Lmxlbmd0aCAtIGUubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGxpZ2h0IHF1ZXJ5IHBsYW5uZXIgZm9yIEZpcmVzdG9yZS5cbiAqXG4gKiBUaGlzIGNsYXNzIG1hdGNoZXMgYSBgRmllbGRJbmRleGAgYWdhaW5zdCBhIEZpcmVzdG9yZSBRdWVyeSBgVGFyZ2V0YC4gSXRcbiAqIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGluZGV4IGNhbiBiZSB1c2VkIHRvIHNlcnZlIHRoZSBzcGVjaWZpZWQgdGFyZ2V0LlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgdGFibGUgc2hvd2Nhc2VzIHNvbWUgcG9zc2libGUgaW5kZXggY29uZmlndXJhdGlvbnM6XG4gKlxuICogUXVlcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSW5kZXhcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBhIEFTQywgYiBERVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnPT0nLCAnYScpLndoZXJlKCdiJywgJz09JywgJ2InKSAgICAgICAgIHwgYiBERVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpICAgICAgICAgICAgICAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnLCAnZGVzYycpICAgICAgICAgIHwgYSBERVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpLm9yZGVyQnkoJ2InKSAgICAgfCBhIEFTQywgYiBBU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TLCBiIEFTQ0VORElOR1xuICogd2hlcmUoJ2EnLCAnYXJyYXktY29udGFpbnMnLCAnYScpLm9yZGVyQnkoJ2InKSAgICAgIHwgYSBDT05UQUlOU1xuICovIGNsYXNzIE9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbklkID0gbnVsbCAhPSB0LmNvbGxlY3Rpb25Hcm91cCA/IHQuY29sbGVjdGlvbkdyb3VwIDogdC5wYXRoLmxhc3RTZWdtZW50KCksIFxuICAgICAgICB0aGlzLlllID0gdC5vcmRlckJ5LCB0aGlzLlhlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlO1xuICAgICAgICAgICAgdC5pc0luZXF1YWxpdHkoKSA/IHRoaXMuWmUgPSB0IDogdGhpcy5YZS5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIFRhcmdldEluZGV4TWF0Y2hlcidzXG4gICAgICogdGFyZ2V0LlxuICAgICAqXG4gICAgICogQW4gaW5kZXggaXMgY29uc2lkZXJlZCBjYXBhYmxlIG9mIHNlcnZpbmcgdGhlIHRhcmdldCB3aGVuOlxuICAgICAqIC0gVGhlIHRhcmdldCB1c2VzIGFsbCBpbmRleCBzZWdtZW50cyBmb3IgaXRzIGZpbHRlcnMgYW5kIG9yZGVyQnkgY2xhdXNlcy5cbiAgICAgKiAgIFRoZSB0YXJnZXQgY2FuIGhhdmUgYWRkaXRpb25hbCBmaWx0ZXIgYW5kIG9yZGVyQnkgY2xhdXNlcywgYnV0IG5vdFxuICAgICAqICAgZmV3ZXIuXG4gICAgICogLSBJZiBhbiBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnlmaWx0ZXIgaXMgdXNlZCwgdGhlIGluZGV4IG11c3QgYWxzb1xuICAgICAqICAgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgYENPTlRBSU5TYCBzZWdtZW50LlxuICAgICAqIC0gQWxsIGRpcmVjdGlvbmFsIGluZGV4IHNlZ21lbnRzIGNhbiBiZSBtYXBwZWQgdG8gdGhlIHRhcmdldCBhcyBhIHNlcmllcyBvZlxuICAgICAqICAgZXF1YWxpdHkgZmlsdGVycywgYSBzaW5nbGUgaW5lcXVhbGl0eSBmaWx0ZXIgYW5kIGEgc2VyaWVzIG9mIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMuXG4gICAgICogLSBUaGUgc2VnbWVudHMgdGhhdCByZXByZXNlbnQgdGhlIGVxdWFsaXR5IGZpbHRlcnMgbWF5IGFwcGVhciBvdXQgb2Ygb3JkZXIuXG4gICAgICogLSBUaGUgb3B0aW9uYWwgc2VnbWVudCBmb3IgdGhlIGluZXF1YWxpdHkgZmlsdGVyIG11c3QgYXBwZWFyIGFmdGVyIGFsbFxuICAgICAqICAgZXF1YWxpdHkgc2VnbWVudHMuXG4gICAgICogLSBUaGUgc2VnbWVudHMgdGhhdCByZXByZXNlbnQgdGhhdCBvcmRlckJ5IGNsYXVzZSBvZiB0aGUgdGFyZ2V0IG11c3QgYXBwZWFyXG4gICAgICogICBpbiBvcmRlciBhZnRlciBhbGwgZXF1YWxpdHkgYW5kIGluZXF1YWxpdHkgc2VnbWVudHMuIFNpbmdsZSBvcmRlckJ5XG4gICAgICogICBjbGF1c2VzIGNhbm5vdCBiZSBza2lwcGVkLCBidXQgYSBjb250aW51b3VzIG9yZGVyQnkgc3VmZml4IG1heSBiZVxuICAgICAqICAgb21pdHRlZC5cbiAgICAgKi8gICAgdG4odCkge1xuICAgICAgICBGKHQuY29sbGVjdGlvbkdyb3VwID09PSB0aGlzLmNvbGxlY3Rpb25JZCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGFycmF5IGVsZW1lbnQsIGZpbmQgYSBtYXRjaGluZyBmaWx0ZXIuXG4gICAgICAgIGNvbnN0IGUgPSBmdCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSAmJiAhdGhpcy5lbihlKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gZHQodCk7XG4gICAgICAgIGxldCBzID0gbmV3IFNldCwgaSA9IDAsIHIgPSAwO1xuICAgICAgICAvLyBQcm9jZXNzIGFsbCBlcXVhbGl0aWVzIGZpcnN0LiBFcXVhbGl0aWVzIGNhbiBhcHBlYXIgb3V0IG9mIG9yZGVyLlxuICAgICAgICBmb3IgKDtpIDwgbi5sZW5ndGggJiYgdGhpcy5lbihuW2ldKTsgKytpKSBzID0gcy5hZGQobltpXS5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgcHJvY2Vzc2VkIGFsbCBzZWdtZW50cywgYWxsIHNlZ21lbnRzIGFyZSB1c2VkIHRvIHNlcnZlXG4gICAgICAgIC8vIHRoZSBlcXVhbGl0eSBmaWx0ZXJzIGFuZCB3ZSBkbyBub3QgbmVlZCB0byBtYXAgYW55IHNlZ21lbnRzIHRvIHRoZVxuICAgICAgICAvLyB0YXJnZXQncyBpbmVxdWFsaXR5IGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IG4ubGVuZ3RoKSByZXR1cm4gITA7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMuWmUpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGluZXF1YWxpdHkgZmlsdGVyIGFuZCB0aGUgZmllbGQgd2FzIG5vdCBpbiBvbmUgb2YgdGhlXG4gICAgICAgICAgICAvLyBlcXVhbGl0eSBmaWx0ZXJzIGFib3ZlLCB0aGUgbmV4dCBzZWdtZW50IG11c3QgbWF0Y2ggYm90aCB0aGUgZmlsdGVyXG4gICAgICAgICAgICAvLyBhbmQgdGhlIGZpcnN0IG9yZGVyQnkgY2xhdXNlLlxuICAgICAgICAgICAgaWYgKCFzLmhhcyh0aGlzLlplLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuW2ldO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5ubih0aGlzLlplLCB0KSB8fCAhdGhpcy5zbih0aGlzLlllW3IrK10sIHQpKSByZXR1cm4gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWxsIHJlbWFpbmluZyBzZWdtZW50cyBuZWVkIHRvIHJlcHJlc2VudCB0aGUgcHJlZml4IG9mIHRoZSB0YXJnZXQnc1xuICAgICAgICAvLyBvcmRlckJ5LlxuICAgICAgICAgICAgICAgIGZvciAoO2kgPCBuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbltpXTtcbiAgICAgICAgICAgIGlmIChyID49IHRoaXMuWWUubGVuZ3RoIHx8ICF0aGlzLnNuKHRoaXMuWWVbcisrXSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGVuKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuWGUpIGlmICh0aGlzLm5uKGUsIHQpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbm4odCwgZSkge1xuICAgICAgICBpZiAodm9pZCAwID09PSB0IHx8ICF0LmZpZWxkLmlzRXF1YWwoZS5maWVsZFBhdGgpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IHQub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHQub3A7XG4gICAgICAgIHJldHVybiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyA9PT0gZS5raW5kID09PSBuO1xuICAgIH1cbiAgICBzbih0LCBlKSB7XG4gICAgICAgIHJldHVybiAhIXQuZmllbGQuaXNFcXVhbChlLmZpZWxkUGF0aCkgJiYgKDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gZS5raW5kICYmIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA9PT0gdC5kaXIgfHwgMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLyA9PT0gZS5raW5kICYmIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSB0LmRpcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyB1dGlsaXR5IGZ1bmN0aW9ucyB0aGF0IGhlbHAgd2l0aCBib29sZWFuIGxvZ2ljIHRyYW5zZm9ybWF0aW9ucyBuZWVkZWQgZm9yIGhhbmRsaW5nXG4gKiBjb21wbGV4IGZpbHRlcnMgdXNlZCBpbiBxdWVyaWVzLlxuICovXG4vKipcbiAqIFRoZSBgaW5gIGZpbHRlciBpcyBvbmx5IGEgc3ludGFjdGljIHN1Z2FyIG92ZXIgYSBkaXNqdW5jdGlvbiBvZiBlcXVhbGl0aWVzLiBGb3IgaW5zdGFuY2U6IGBhIGluXG4gKiBbMSwyLDNdYCBpcyBpbiBmYWN0IGBhPT0xIHx8IGE9PTIgfHwgYT09M2AuIFRoaXMgbWV0aG9kIGV4cGFuZHMgYW55IGBpbmAgZmlsdGVyIGluIHRoZSBnaXZlblxuICogaW5wdXQgaW50byBhIGRpc2p1bmN0aW9uIG9mIGVxdWFsaXR5IGZpbHRlcnMgYW5kIHJldHVybnMgdGhlIGV4cGFuZGVkIGZpbHRlci5cbiAqLyBmdW5jdGlvbiBGcih0KSB7XG4gICAgdmFyIGUsIG47XG4gICAgaWYgKEYodCBpbnN0YW5jZW9mIG1uIHx8IHQgaW5zdGFuY2VvZiBnbiksIHQgaW5zdGFuY2VvZiBtbikge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIENuKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gKG51bGwgPT09IChuID0gbnVsbCA9PT0gKGUgPSB0LnZhbHVlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUudmFsdWVzKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLm1hcCgoZSA9PiBtbi5jcmVhdGUodC5maWVsZCwgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovICwgZSkpKSkgfHwgW107XG4gICAgICAgICAgICByZXR1cm4gZ24uY3JlYXRlKHMsIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgaGF2ZSByZWFjaGVkIG90aGVyIGtpbmRzIG9mIGZpZWxkIGZpbHRlcnMuXG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvLyBXZSBoYXZlIGEgY29tcG9zaXRlIGZpbHRlci5cbiAgICAgICAgY29uc3QgcyA9IHQuZmlsdGVycy5tYXAoKHQgPT4gRnIodCkpKTtcbiAgICByZXR1cm4gZ24uY3JlYXRlKHMsIHQub3ApO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgY29tcG9zaXRlIGZpbHRlciwgcmV0dXJucyB0aGUgbGlzdCBvZiB0ZXJtcyBpbiBpdHMgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0uXG4gKlxuICogPHA+RWFjaCBlbGVtZW50IGluIHRoZSByZXR1cm4gdmFsdWUgaXMgb25lIHRlcm0gb2YgdGhlIHJlc3VsdGluZyBETkYuIEZvciBpbnN0YW5jZTogRm9yIHRoZVxuICogaW5wdXQ6IChBIHx8IEIpICYmIEMsIHRoZSBETkYgZm9ybSBpczogKEEgJiYgQykgfHwgKEIgJiYgQyksIGFuZCB0aGUgcmV0dXJuIHZhbHVlIGlzIGEgbGlzdFxuICogd2l0aCB0d28gZWxlbWVudHM6IGEgY29tcG9zaXRlIGZpbHRlciB0aGF0IHBlcmZvcm1zIChBICYmIEMpLCBhbmQgYSBjb21wb3NpdGUgZmlsdGVyIHRoYXRcbiAqIHBlcmZvcm1zIChCICYmIEMpLlxuICpcbiAqIEBwYXJhbSBmaWx0ZXIgdGhlIGNvbXBvc2l0ZSBmaWx0ZXIgdG8gY2FsY3VsYXRlIERORiB0cmFuc2Zvcm0gZm9yLlxuICogQHJldHVybiB0aGUgdGVybXMgaW4gdGhlIERORiB0cmFuc2Zvcm0uXG4gKi8gZnVuY3Rpb24gQnIodCkge1xuICAgIGlmICgwID09PSB0LmdldEZpbHRlcnMoKS5sZW5ndGgpIHJldHVybiBbXTtcbiAgICBjb25zdCBlID0gS3IoRnIodCkpO1xuICAgIHJldHVybiBGKFVyKGUpKSwgTHIoZSkgfHwgcXIoZSkgPyBbIGUgXSA6IGUuZ2V0RmlsdGVycygpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgYSBzaW5nbGUgZmllbGQgZmlsdGVyLiBlLmcuIChhID09IDEwKS4gKi8gZnVuY3Rpb24gTHIodCkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgbW47XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgdGhlIGNvbmp1bmN0aW9uIG9mIG9uZSBvciBtb3JlIGZpZWxkIGZpbHRlcnMuIGUuZy4gKGEgPT0gMTBcbiAqICYmIGIgPT0gMjApXG4gKi8gZnVuY3Rpb24gcXIodCkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgZ24gJiYgSW4odCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gZmlsdGVyIGlzIGluIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpLlxuICpcbiAqIDxwPkluIGJvb2xlYW4gbG9naWMsIGEgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikgaXMgYSBjYW5vbmljYWwgbm9ybWFsIGZvcm0gb2YgYSBsb2dpY2FsXG4gKiBmb3JtdWxhIGNvbnNpc3Rpbmcgb2YgYSBkaXNqdW5jdGlvbiBvZiBjb25qdW5jdGlvbnM7IGl0IGNhbiBhbHNvIGJlIGRlc2NyaWJlZCBhcyBhbiBPUiBvZiBBTkRzLlxuICpcbiAqIDxwPkZvciBtb3JlIGluZm8sIHZpc2l0OiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EaXNqdW5jdGl2ZV9ub3JtYWxfZm9ybVxuICovIGZ1bmN0aW9uIFVyKHQpIHtcbiAgICByZXR1cm4gTHIodCkgfHwgcXIodCkgfHwgXG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyB0aGUgZGlzanVuY3Rpb24gb2Ygb25lIG9yIG1vcmUgXCJmbGF0IGNvbmp1bmN0aW9uc1wiIGFuZFxuICogZmllbGQgZmlsdGVycy4gZS5nLiAoYSA9PSAxMCkgfHwgKGI9PTIwICYmIGM9PTMwKVxuICovXG4gICAgZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGduICYmIHBuKHQpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5nZXRGaWx0ZXJzKCkpIGlmICghTHIoZSkgJiYgIXFyKGUpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH0odCk7XG59XG5cbmZ1bmN0aW9uIEtyKHQpIHtcbiAgICBpZiAoRih0IGluc3RhbmNlb2YgbW4gfHwgdCBpbnN0YW5jZW9mIGduKSwgdCBpbnN0YW5jZW9mIG1uKSByZXR1cm4gdDtcbiAgICBpZiAoMSA9PT0gdC5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuIEtyKHQuZmlsdGVyc1swXSk7XG4gICAgLy8gQ29tcHV0ZSBETkYgZm9yIGVhY2ggb2YgdGhlIHN1YmZpbHRlcnMgZmlyc3RcbiAgICAgICAgY29uc3QgZSA9IHQuZmlsdGVycy5tYXAoKHQgPT4gS3IodCkpKTtcbiAgICBsZXQgbiA9IGduLmNyZWF0ZShlLCB0Lm9wKTtcbiAgICByZXR1cm4gbiA9IGpyKG4pLCBVcihuKSA/IG4gOiAoRihuIGluc3RhbmNlb2YgZ24pLCBGKHluKG4pKSwgRihuLmZpbHRlcnMubGVuZ3RoID4gMSksIFxuICAgIG4uZmlsdGVycy5yZWR1Y2UoKCh0LCBlKSA9PiBHcih0LCBlKSkpKTtcbn1cblxuZnVuY3Rpb24gR3IodCwgZSkge1xuICAgIGxldCBuO1xuICAgIHJldHVybiBGKHQgaW5zdGFuY2VvZiBtbiB8fCB0IGluc3RhbmNlb2YgZ24pLCBGKGUgaW5zdGFuY2VvZiBtbiB8fCBlIGluc3RhbmNlb2YgZ24pLCBcbiAgICAvLyBGaWVsZEZpbHRlciBGaWVsZEZpbHRlclxuICAgIG4gPSB0IGluc3RhbmNlb2YgbW4gPyBlIGluc3RhbmNlb2YgbW4gPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIENvbmp1bmN0aW9uIGRpc3RyaWJ1dGlvbiBmb3IgdHdvIGZpZWxkIGZpbHRlcnMgaXMgdGhlIGNvbmp1bmN0aW9uIG9mIHRoZW0uXG4gICAgICAgIHJldHVybiBnbi5jcmVhdGUoWyB0LCBlIF0sIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKTtcbiAgICB9KHQsIGUpIDogUXIodCwgZSkgOiBlIGluc3RhbmNlb2YgbW4gPyBRcihlLCB0KSA6IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gVGhlcmUgYXJlIGZvdXIgY2FzZXM6XG4gICAgICAgIC8vIChBICYgQikgJiAoQyAmIEQpIC0tPiAoQSAmIEIgJiBDICYgRClcbiAgICAgICAgLy8gKEEgJiBCKSAmIChDIHwgRCkgLS0+IChBICYgQiAmIEMpIHwgKEEgJiBCICYgRClcbiAgICAgICAgLy8gKEEgfCBCKSAmIChDICYgRCkgLS0+IChDICYgRCAmIEEpIHwgKEMgJiBEICYgQilcbiAgICAgICAgLy8gKEEgfCBCKSAmIChDIHwgRCkgLS0+IChBICYgQykgfCAoQSAmIEQpIHwgKEIgJiBDKSB8IChCICYgRClcbiAgICAgICAgLy8gQ2FzZSAxIGlzIGEgbWVyZ2UuXG4gICAgICAgIGlmIChGKHQuZmlsdGVycy5sZW5ndGggPiAwICYmIGUuZmlsdGVycy5sZW5ndGggPiAwKSwgeW4odCkgJiYgeW4oZSkpIHJldHVybiB2bih0LCBlLmdldEZpbHRlcnMoKSk7XG4gICAgICAgIC8vIENhc2UgMiwzLDQgYWxsIGhhdmUgYXQgbGVhc3Qgb25lIHNpZGUgKGxocyBvciByaHMpIHRoYXQgaXMgYSBkaXNqdW5jdGlvbi4gSW4gYWxsIHRocmVlIGNhc2VzXG4gICAgICAgIC8vIHdlIHNob3VsZCB0YWtlIGVhY2ggZWxlbWVudCBvZiB0aGUgZGlzanVuY3Rpb24gYW5kIGRpc3RyaWJ1dGUgaXQgb3ZlciB0aGUgb3RoZXIgc2lkZSwgYW5kXG4gICAgICAgIC8vIHJldHVybiB0aGUgZGlzanVuY3Rpb24gb2YgdGhlIGRpc3RyaWJ1dGlvbiByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBwbih0KSA/IHQgOiBlLCBzID0gcG4odCkgPyBlIDogdCwgaSA9IG4uZmlsdGVycy5tYXAoKHQgPT4gR3IodCwgcykpKTtcbiAgICAgICAgcmV0dXJuIGduLmNyZWF0ZShpLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgIH0odCwgZSksIGpyKG4pO1xufVxuXG5mdW5jdGlvbiBRcih0LCBlKSB7XG4gICAgLy8gVGhlcmUgYXJlIHR3byBjYXNlczpcbiAgICAvLyBBICYgKEIgJiBDKSAtLT4gKEEgJiBCICYgQylcbiAgICAvLyBBICYgKEIgfCBDKSAtLT4gKEEgJiBCKSB8IChBICYgQylcbiAgICBpZiAoeW4oZSkpIFxuICAgIC8vIENhc2UgMVxuICAgIHJldHVybiB2bihlLCB0LmdldEZpbHRlcnMoKSk7XG4gICAge1xuICAgICAgICAvLyBDYXNlIDJcbiAgICAgICAgY29uc3QgbiA9IGUuZmlsdGVycy5tYXAoKGUgPT4gR3IodCwgZSkpKTtcbiAgICAgICAgcmV0dXJuIGduLmNyZWF0ZShuLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoZSBhc3NvY2lhdGl2aXR5IHByb3BlcnR5IHRvIHRoZSBnaXZlbiBmaWx0ZXIgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBmaWx0ZXIuXG4gKlxuICogPHVsPlxuICogICA8bGk+QSB8IChCIHwgQykgPT0gKEEgfCBCKSB8IEMgPT0gKEEgfCBCIHwgQylcbiAqICAgPGxpPkEgJiAoQiAmIEMpID09IChBICYgQikgJiBDID09IChBICYgQiAmIEMpXG4gKiA8L3VsPlxuICpcbiAqIDxwPkZvciBtb3JlIGluZm8sIHZpc2l0OiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Bc3NvY2lhdGl2ZV9wcm9wZXJ0eSNQcm9wb3NpdGlvbmFsX2xvZ2ljXG4gKi8gZnVuY3Rpb24ganIodCkge1xuICAgIGlmIChGKHQgaW5zdGFuY2VvZiBtbiB8fCB0IGluc3RhbmNlb2YgZ24pLCB0IGluc3RhbmNlb2YgbW4pIHJldHVybiB0O1xuICAgIGNvbnN0IGUgPSB0LmdldEZpbHRlcnMoKTtcbiAgICAvLyBJZiB0aGUgY29tcG9zaXRlIGZpbHRlciBvbmx5IGNvbnRhaW5zIDEgZmlsdGVyLCBhcHBseSBhc3NvY2lhdGl2aXR5IHRvIGl0LlxuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBqcihlWzBdKTtcbiAgICAvLyBBc3NvY2lhdGl2aXR5IGFwcGxpZWQgdG8gYSBmbGF0IGNvbXBvc2l0ZSBmaWx0ZXIgcmVzdWx0cyBpcyBpdHNlbGYuXG4gICAgICAgIGlmIChUbih0KSkgcmV0dXJuIHQ7XG4gICAgLy8gRmlyc3QgYXBwbHkgYXNzb2NpYXRpdml0eSB0byBhbGwgc3ViZmlsdGVycy4gVGhpcyB3aWxsIGluIHR1cm4gcmVjdXJzaXZlbHkgYXBwbHlcbiAgICAvLyBhc3NvY2lhdGl2aXR5IHRvIGFsbCBuZXN0ZWQgY29tcG9zaXRlIGZpbHRlcnMgYW5kIGZpZWxkIGZpbHRlcnMuXG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcCgodCA9PiBqcih0KSkpLCBzID0gW107XG4gICAgLy8gRm9yIGNvbXBvc2l0ZSBzdWJmaWx0ZXJzIHRoYXQgcGVyZm9ybSB0aGUgc2FtZSBraW5kIG9mIGxvZ2ljYWwgb3BlcmF0aW9uIGFzIGBjb21wb3NpdGVGaWx0ZXJgXG4gICAgLy8gdGFrZSBvdXQgdGhlaXIgZmlsdGVycyBhbmQgYWRkIHRoZW0gdG8gYGNvbXBvc2l0ZUZpbHRlcmAuIEZvciBleGFtcGxlOlxuICAgIC8vIGNvbXBvc2l0ZUZpbHRlciA9IChBIHwgKEIgfCBDIHwgRCkpXG4gICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyID0gKEIgfCBDIHwgRClcbiAgICAvLyBSZXN1bHQ6IChBIHwgQiB8IEMgfCBEKVxuICAgIC8vIE5vdGUgdGhhdCB0aGUgYGNvbXBvc2l0ZVN1YmZpbHRlcmAgaGFzIGJlZW4gZWxpbWluYXRlZCwgYW5kIGl0cyBmaWx0ZXJzIChCLCBDLCBEKSBoYXZlIGJlZW5cbiAgICAvLyBhZGRlZCB0byB0aGUgdG9wLWxldmVsIFwiY29tcG9zaXRlRmlsdGVyXCIuXG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4ge1xuICAgICAgICBlIGluc3RhbmNlb2YgbW4gPyBzLnB1c2goZSkgOiBlIGluc3RhbmNlb2YgZ24gJiYgKGUub3AgPT09IHQub3AgPyBcbiAgICAgICAgLy8gY29tcG9zaXRlRmlsdGVyOiAoQSB8IChCIHwgQykpXG4gICAgICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlcjogKEIgfCBDKVxuICAgICAgICAvLyBSZXN1bHQ6IChBIHwgQiB8IEMpXG4gICAgICAgIHMucHVzaCguLi5lLmZpbHRlcnMpIDogXG4gICAgICAgIC8vIGNvbXBvc2l0ZUZpbHRlcjogKEEgfCAoQiAmIEMpKVxuICAgICAgICAvLyBjb21wb3NpdGVTdWJmaWx0ZXI6IChCICYgQylcbiAgICAgICAgLy8gUmVzdWx0OiAoQSB8IChCICYgQykpXG4gICAgICAgIHMucHVzaChlKSk7XG4gICAgfSkpLCAxID09PSBzLmxlbmd0aCA/IHNbMF0gOiBnbi5jcmVhdGUocywgdC5vcCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgenIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJuID0gbmV3IFdyO1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJuLmFkZChlKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMucm4uZ2V0RW50cmllcyhlKSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoMCAvKiBJbmRleFR5cGUuTk9ORSAqLyk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKFtdKTtcbiAgICB9XG4gICAgZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKEl0Lm1pbigpKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKEl0Lm1pbigpKTtcbiAgICB9XG4gICAgdXBkYXRlQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGV4cG9zZWQgYnkgTWVtb3J5SW5kZXhNYW5hZ2VyLlxuICogQWxzbyB1c2VkIGZvciBpbi1tZW1vcnkgY2FjaGluZyBieSBJbmRleGVkRGJJbmRleE1hbmFnZXIgYW5kIGluaXRpYWwgaW5kZXggcG9wdWxhdGlvblxuICogaW4gaW5kZXhlZGRiX3NjaGVtYS50c1xuICovIGNsYXNzIFdyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBlbnRyeSBhbHJlYWR5IGV4aXN0ZWQuXG4gICAgYWRkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXSB8fCBuZXcgRWUodXQuY29tcGFyYXRvciksIGkgPSAhcy5oYXMobik7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4W2VdID0gcy5hZGQobiksIGk7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV07XG4gICAgICAgIHJldHVybiBzICYmIHMuaGFzKG4pO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmluZGV4W3RdIHx8IG5ldyBFZSh1dC5jb21wYXJhdG9yKSkudG9BcnJheSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSHIgPSBuZXcgVWludDhBcnJheSgwKTtcblxuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKlxuICogUE9SVElORyBOT1RFOiBVbmxpa2UgaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2ViIFNESyBkb2VzIG5vdCBtZW1vaXplIGluZGV4XG4gKiBkYXRhIGFzIGl0IHN1cHBvcnRzIG11bHRpLXRhYiBhY2Nlc3MuXG4gKi9cbmNsYXNzIEpyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmVcbiAgICAgICAgICogdXNlZCB0byBzYXRpc2Z5IHJlYWRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbiA9IG5ldyBXciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGZyb20gYSB0YXJnZXQgdG8gaXRzIGVxdWl2YWxlbnQgbGlzdCBvZiBzdWItdGFyZ2V0cy4gRWFjaCBzdWItdGFyZ2V0XG4gICAgICAgICAqIGNvbnRhaW5zIG9ubHkgb25lIHRlcm0gZnJvbSB0aGUgdGFyZ2V0J3MgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVuID0gbmV3IG9zKCh0ID0+ICRuKHQpKSwgKCh0LCBlKSA9PiBPbih0LCBlKSkpLCB0aGlzLnVpZCA9IHQudWlkIHx8IFwiXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZW50cnkgdG8gdGhlIGNvbGxlY3Rpb24gcGFyZW50IGluZGV4LlxuICAgICAqXG4gICAgICogUmVwZWF0ZWQgY2FsbHMgZm9yIHRoZSBzYW1lIGNvbGxlY3Rpb25QYXRoIHNob3VsZCBiZSBhdm9pZGVkIHdpdGhpbiBhXG4gICAgICogdHJhbnNhY3Rpb24gYXMgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIG9ubHkgY2FjaGVzIHdyaXRlcyBvbmNlIGEgdHJhbnNhY3Rpb25cbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICovICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9uLmhhcyhlKSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUubGFzdFNlZ21lbnQoKSwgcyA9IGUucG9wTGFzdCgpO1xuICAgICAgICAgICAgdC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xsZWN0aW9uIHRvIHRoZSBpbiBtZW1vcnkgY2FjaGUgb25seSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0aGlzLm9uLmFkZChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBuLFxuICAgICAgICAgICAgICAgIHBhcmVudDogcXQocylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gWXIodCkucHV0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLCBcIlwiIF0sIFsgc3QoZSksIFwiXCIgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gWXIodCkuaihzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XG4gICAgICAgICAgICAgICAgaWYgKHMuY29sbGVjdGlvbklkICE9PSBlKSBicmVhaztcbiAgICAgICAgICAgICAgICBuLnB1c2goR3Qocy5wYXJlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTogVmVyaWZ5IHRoYXQgdGhlIGF1dG8taW5jcmVtZW50aW5nIGluZGV4IElEIHdvcmtzIGluXG4gICAgICAgIC8vIFNhZmFyaSAmIEZpcmVmb3guXG4gICAgICAgIGNvbnN0IG4gPSBacih0KSwgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW5kZXhJZDogdC5pbmRleElkLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogdC5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgICAgICAgICAgZmllbGRzOiB0LmZpZWxkcy5tYXAoKHQgPT4gWyB0LmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgdC5raW5kIF0pKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKTtcbiAgICAgICAgZGVsZXRlIHMuaW5kZXhJZDtcbiAgICAgICAgLy8gYGluZGV4SWRgIGlzIGF1dG8tcG9wdWxhdGVkIGJ5IEluZGV4ZWREYlxuICAgICAgICBjb25zdCBpID0gbi5hZGQocyk7XG4gICAgICAgIGlmIChlLmluZGV4U3RhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0byh0KTtcbiAgICAgICAgICAgIHJldHVybiBpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIG4ucHV0KFRyKHQsIHRoaXMudXNlciwgZS5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyLCBlLmluZGV4U3RhdGUub2Zmc2V0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGkubmV4dCgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFpyKHQpLCBzID0gdG8odCksIGkgPSBYcih0KTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKGUuaW5kZXhJZCkubmV4dCgoKCkgPT4gcy5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoWyBlLmluZGV4SWQgXSwgWyBlLmluZGV4SWQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSkpKS5uZXh0KCgoKSA9PiBpLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChbIGUuaW5kZXhJZCBdLCBbIGUuaW5kZXhJZCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBYcih0KTtcbiAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKHRoaXMuY24oZSksIChlID0+IHRoaXMuYW4odCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBzICYmIChzID0gISF0KSwgaS5zZXQoZSwgdCk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBncygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChpLCAoKGksIHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICAgICAgICAgIE4oXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgYFVzaW5nIGluZGV4ICR7byA9IGksIGBpZD0ke28uaW5kZXhJZH18Y2c9JHtvLmNvbGxlY3Rpb25Hcm91cH18Zj0ke28uZmllbGRzLm1hcCgodCA9PiBgJHt0LmZpZWxkUGF0aH06JHt0LmtpbmR9YCkpLmpvaW4oXCIsXCIpfWB9IHRvIGV4ZWN1dGUgJHskbihlKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBmdChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIEJuKHQsIG4uZmllbGRQYXRoKSkgc3dpdGNoIChlLm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnZhbHVlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBlLnZhbHVlIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgYXJlIG5vdCBhcnJheSBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluICE9IG9yIE5PVF9JTiBmaWx0ZXJzLiBSZXR1cm5zXG4gKiBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqLyAociwgaSksIGMgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBkdChlKSkgZm9yIChjb25zdCBlIG9mIEJuKHQsIHMuZmllbGRQYXRoKSkgc3dpdGNoIChlLm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSBlcXVhbGl0eSBwcmVmaXgsIHdoaWNoIGlzIGVuY29kZWQgaW4gdGhlIGluZGV4IHZhbHVlIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpbmVxdWFsaXR5IChlLmcuIGBhID09ICdhJyAmJiBiICE9ICdiJ2AgaXMgZW5jb2RlZCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGB2YWx1ZSAhPSAnYWInYCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5zZXQocy5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIGUudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdEluL05vdEVxdWFsIGlzIGFsd2F5cyBhIHN1ZmZpeC4gVGhlcmUgY2Fubm90IGJlIGFueSByZW1haW5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWdtZW50cyBhbmQgaGVuY2Ugd2UgY2FuIHJldHVybiBlYXJseSBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNldChzLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgZS52YWx1ZSksIEFycmF5LmZyb20obi52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgbm90SW4gYm91bmRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgbG93ZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBzdGFydGluZyBwb2ludCB0b1xuICogc2NhbiB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1JTl9WQUxVRWAgaWYgbm8gbG93ZXIgYm91bmRcbiAqIGV4aXN0cy5cbiAqLyAociwgaSksIGEgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYSBsb3dlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnRBdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBkdChlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGkua2luZCA/IExuKHQsIGkuZmllbGRQYXRoLCB0LnN0YXJ0QXQpIDogcW4odCwgaS5maWVsZFBhdGgsIHQuc3RhcnRBdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKGUudmFsdWUpLCBzICYmIChzID0gZS5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBobihuLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYW4gdXBwZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gZW5kaW5nIHBvaW50XG4gKiB3aGVuIHNjYW5uaW5nIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgTUFYX1ZBTFVFYCBpZiBub1xuICogdXBwZXIgYm91bmQgZXhpc3RzLlxuICovIChyLCBpKSwgaCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhbiB1cHBlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kQXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZHQoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBpLmtpbmQgPyBxbih0LCBpLmZpZWxkUGF0aCwgdC5lbmRBdCkgOiBMbih0LCBpLmZpZWxkUGF0aCwgdC5lbmRBdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKGUudmFsdWUpLCBzICYmIChzID0gZS5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBobihuLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgfShyLCBpKSwgbCA9IHRoaXMuaG4oaSwgciwgYSksIGYgPSB0aGlzLmhuKGksIHIsIGgpLCBkID0gdGhpcy5sbihpLCByLCBjKSwgdyA9IHRoaXMuZm4oaS5pbmRleElkLCB1LCBsLCBhLmluY2x1c2l2ZSwgZiwgaC5pbmNsdXNpdmUsIGQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUnQuZm9yRWFjaCh3LCAoaSA9PiBuLkgoaSwgZS5saW1pdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBodC5mcm9tU2VnbWVudHMoZS5kb2N1bWVudEtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5oYXMobikgfHwgKHQgPSB0LmFkZChuKSwgcy5wdXNoKG4pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBSdC5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNuKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnVuLmdldCh0KTtcbiAgICAgICAgaWYgKGUpIHJldHVybiBlO1xuICAgICAgICBpZiAoMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCkgZSA9IFsgdCBdOyBlbHNlIHtcbiAgICAgICAgICAgIGUgPSBCcihnbi5jcmVhdGUodC5maWx0ZXJzLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpLm1hcCgoZSA9PiBNbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0Lm9yZGVyQnksIGUuZ2V0RmlsdGVycygpLCB0LmxpbWl0LCB0LnN0YXJ0QXQsIHQuZW5kQXQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudW4uc2V0KHQsIGUpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEga2V5IHJhbmdlIHF1ZXJ5IG9uIGBEYkluZGV4RW50cnlTdG9yZWAgdGhhdCB1bmlvbnMgYWxsXG4gICAgICogYm91bmRzLlxuICAgICAqLyAgICBmbih0LCBlLCBuLCBzLCBpLCByLCBvKSB7XG4gICAgICAgIC8vIFRoZSBudW1iZXIgb2YgdG90YWwgaW5kZXggc2NhbnMgd2UgdW5pb24gdG9nZXRoZXIuIFRoaXMgaXMgc2ltaWxhciB0byBhXG4gICAgICAgIC8vIGRpc3RyaWJ1dGVkIG5vcm1hbCBmb3JtLCBidXQgYWRhcHRlZCBmb3IgYXJyYXkgdmFsdWVzLiBXZSBjcmVhdGUgYSBzaW5nbGVcbiAgICAgICAgLy8gaW5kZXggcmFuZ2UgcGVyIHZhbHVlIGluIGFuIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWSBmaWx0ZXJcbiAgICAgICAgLy8gY29tYmluZWQgd2l0aCB0aGUgdmFsdWVzIGZyb20gdGhlIHF1ZXJ5IGJvdW5kcy5cbiAgICAgICAgY29uc3QgdSA9IChudWxsICE9IGUgPyBlLmxlbmd0aCA6IDEpICogTWF0aC5tYXgobi5sZW5ndGgsIGkubGVuZ3RoKSwgYyA9IHUgLyAobnVsbCAhPSBlID8gZS5sZW5ndGggOiAxKSwgYSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBoID0gMDsgaCA8IHU7ICsraCkge1xuICAgICAgICAgICAgY29uc3QgdSA9IGUgPyB0aGlzLmRuKGVbaCAvIGNdKSA6IEhyLCBsID0gdGhpcy53bih0LCB1LCBuW2ggJSBjXSwgcyksIGYgPSB0aGlzLl9uKHQsIHUsIGlbaCAlIGNdLCByKSwgZCA9IG8ubWFwKChlID0+IHRoaXMud24odCwgdSwgZSwgXG4gICAgICAgICAgICAvKiBpbmNsdXNpdmU9ICovICEwKSkpO1xuICAgICAgICAgICAgYS5wdXNoKC4uLnRoaXMuY3JlYXRlUmFuZ2UobCwgZiwgZCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICAvKiogR2VuZXJhdGVzIHRoZSBsb3dlciBib3VuZCBmb3IgYGFycmF5VmFsdWVgIGFuZCBgZGlyZWN0aW9uYWxWYWx1ZWAuICovICAgIHduKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBrcih0LCBodC5lbXB0eSgpLCBlLCBuKTtcbiAgICAgICAgcmV0dXJuIHMgPyBpIDogaS5KZSgpO1xuICAgIH1cbiAgICAvKiogR2VuZXJhdGVzIHRoZSB1cHBlciBib3VuZCBmb3IgYGFycmF5VmFsdWVgIGFuZCBgZGlyZWN0aW9uYWxWYWx1ZWAuICovICAgIF9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBrcih0LCBodC5lbXB0eSgpLCBlLCBuKTtcbiAgICAgICAgcmV0dXJuIHMgPyBpLkplKCkgOiBpO1xuICAgIH1cbiAgICBhbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgT3IoZSksIHMgPSBudWxsICE9IGUuY29sbGVjdGlvbkdyb3VwID8gZS5jb2xsZWN0aW9uR3JvdXAgOiBlLnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBpbmRleCB3aXRoIHRoZSBtb3N0IG51bWJlciBvZiBzZWdtZW50cy5cbiAgICAgICAgICAgIGxldCBlID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbi50bihzKSAmJiAoIWUgfHwgcy5maWVsZHMubGVuZ3RoID4gZS5maWVsZHMubGVuZ3RoKSAmJiAoZSA9IHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSAyIC8qIEluZGV4VHlwZS5GVUxMICovO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jbihlKTtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2gocywgKGUgPT4gdGhpcy5hbih0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQgPyAwIC8qIEluZGV4VHlwZS5OT05FICovICE9PSBuICYmIHQuZmllbGRzLmxlbmd0aCA8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFZShhdC5jb21wYXJhdG9yKSwgbiA9ICExO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0LmZpbHRlcnMpIGZvciAoY29uc3QgdCBvZiBzLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgXG4gICAgICAgICAgICAgICAgLy8gX19uYW1lX18gaXMgbm90IGFuIGV4cGxpY2l0IHNlZ21lbnQgb2YgYW55IGluZGV4LCBzbyB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gY291bnQgaXQuXG4gICAgICAgICAgICAgICAgdC5maWVsZC5pc0tleUZpZWxkKCkgfHwgKFxuICAgICAgICAgICAgICAgIC8vIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWSBmaWx0ZXJzIG11c3QgYmUgY291bnRlZCBzZXBhcmF0ZWx5LlxuICAgICAgICAgICAgICAgIC8vIEZvciBpbnN0YW5jZSwgaXQgaXMgcG9zc2libGUgdG8gaGF2ZSBhbiBpbmRleCBmb3IgXCJhIEFSUkFZIGEgQVNDXCIuIEV2ZW5cbiAgICAgICAgICAgICAgICAvLyB0aG91Z2ggdGhlc2UgYXJlIG9uIHRoZSBzYW1lIGZpZWxkLCB0aGV5IHNob3VsZCBiZSBjb3VudGVkIGFzIHR3b1xuICAgICAgICAgICAgICAgIC8vIHNlcGFyYXRlIHNlZ21lbnRzIGluIGFuIGluZGV4LlxuICAgICAgICAgICAgICAgIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gdC5vcCB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gdC5vcCA/IG4gPSAhMCA6IGUgPSBlLmFkZCh0LmZpZWxkKSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQub3JkZXJCeSkgXG4gICAgICAgICAgICAgICAgLy8gX19uYW1lX18gaXMgbm90IGFuIGV4cGxpY2l0IHNlZ21lbnQgb2YgYW55IGluZGV4LCBzbyB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gY291bnQgaXQuXG4gICAgICAgICAgICAgICAgbi5maWVsZC5pc0tleUZpZWxkKCkgfHwgKGUgPSBlLmFkZChuLmZpZWxkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuc2l6ZSArIChuID8gMSA6IDApO1xuICAgICAgICAgICAgfShlKSAmJiAobiA9IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8pIDogbiA9IDAgLyogSW5kZXhUeXBlLk5PTkUgKi87XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IFxuICAgICAgICAvLyBPUiBxdWVyaWVzIGhhdmUgbW9yZSB0aGFuIG9uZSBzdWItdGFyZ2V0IChvbmUgc3ViLXRhcmdldCBwZXIgRE5GIHRlcm0pLiBXZSBjdXJyZW50bHkgY29uc2lkZXJcbiAgICAgICAgLy8gT1IgcXVlcmllcyB0aGF0IGhhdmUgYSBgbGltaXRgIHRvIGhhdmUgYSBwYXJ0aWFsIGluZGV4LiBGb3Igc3VjaCBxdWVyaWVzIHdlIHBlcmZvcm0gc29ydGluZ1xuICAgICAgICAvLyBhbmQgYXBwbHkgdGhlIGxpbWl0IGluIG1lbW9yeSBhcyBhIHBvc3QtcHJvY2Vzc2luZyBzdGVwLlxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gdC5saW1pdDtcbiAgICAgICAgfShlKSAmJiBzLmxlbmd0aCA+IDEgJiYgMiAvKiBJbmRleFR5cGUuRlVMTCAqLyA9PT0gbiA/IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gOiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGJ5dGUgZW5jb2RlZCBmb3JtIG9mIHRoZSBkaXJlY3Rpb25hbCB2YWx1ZXMgaW4gdGhlIGZpZWxkIGluZGV4LlxuICAgICAqIFJldHVybnMgYG51bGxgIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBoYXZlIGFsbCBmaWVsZHMgc3BlY2lmaWVkIGluIHRoZVxuICAgICAqIGluZGV4LlxuICAgICAqLyAgICBtbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTnI7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiBkdCh0KSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZChzLmZpZWxkUGF0aCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLkhlKHMua2luZCk7XG4gICAgICAgICAgICBici5WZS5fZSh0LCBpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbi5RZSgpO1xuICAgIH1cbiAgICAvKiogRW5jb2RlcyBhIHNpbmdsZSB2YWx1ZSB0byB0aGUgYXNjZW5kaW5nIGluZGV4IGZvcm1hdC4gKi8gICAgZG4odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE5yO1xuICAgICAgICByZXR1cm4gYnIuVmUuX2UodCwgZS5IZSgwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8pKSwgZS5RZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVuY29kZWQgZm9ybSBvZiB0aGUgZG9jdW1lbnQga2V5IHRoYXQgc29ydHMgYmFzZWQgb24gdGhlIGtleVxuICAgICAqIG9yZGVyaW5nIG9mIHRoZSBmaWVsZCBpbmRleC5cbiAgICAgKi8gICAgZ24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IE5yO1xuICAgICAgICByZXR1cm4gYnIuVmUuX2UoV2UodGhpcy5kYXRhYmFzZUlkLCBlKSwgbi5IZShmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gZHQodCk7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gZS5sZW5ndGggPyAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gOiBlW2UubGVuZ3RoIC0gMV0ua2luZDtcbiAgICAgICAgfSh0KSkpLCBuLlFlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGZpZWxkIHZhbHVlcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuXG4gICAgICogRm9yIElOIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGxuKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBbXTtcbiAgICAgICAgbGV0IHMgPSBbXTtcbiAgICAgICAgcy5wdXNoKG5ldyBOcik7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIGR0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbltpKytdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHMpIGlmICh0aGlzLnluKGUsIHIuZmllbGRQYXRoKSAmJiBKZSh0KSkgcyA9IHRoaXMucG4ocywgciwgdCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLkhlKHIua2luZCk7XG4gICAgICAgICAgICAgICAgYnIuVmUuX2UodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuSW4ocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGJvdW5kcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuIEZvciBJTlxuICAgICAqIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGhuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG4odCwgZSwgbi5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBieXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGUgcHJvdmlkZWQgZW5jb2RlcnMuICovICAgIEluKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGVbbl0gPSB0W25dLlFlKCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2VwYXJhdGUgZW5jb2RlciBmb3IgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogVGhlIG1ldGhvZCBhcHBlbmRzIGVhY2ggdmFsdWUgdG8gYWxsIGV4aXN0aW5nIGVuY29kZXJzIChlLmcuIGZpbHRlcihcImFcIixcbiAgICAgKiBcIj09XCIsIFwiYTFcIikuZmlsdGVyKFwiYlwiLCBcImluXCIsIFtcImIxXCIsIFwiYjJcIl0pIGJlY29tZXMgW1wiYTEsYjFcIiwgXCJhMSxiMlwiXSkuIEFcbiAgICAgKiBsaXN0IG9mIG5ldyBlbmNvZGVycyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgcG4odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWyAuLi50IF0sIGkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4uYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIGZvciAoY29uc3QgbiBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IE5yO1xuICAgICAgICAgICAgcy5zZWVkKG4uUWUoKSksIGJyLlZlLl9lKHQsIHMuSGUoZS5raW5kKSksIGkucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgeW4odCwgZSkge1xuICAgICAgICByZXR1cm4gISF0LmZpbHRlcnMuZmluZCgodCA9PiB0IGluc3RhbmNlb2YgbW4gJiYgdC5maWVsZC5pc0VxdWFsKGUpICYmIChcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQub3AgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHQub3ApKSk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBacih0KSwgcyA9IHRvKHQpO1xuICAgICAgICByZXR1cm4gKGUgPyBuLmooXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBJREJLZXlSYW5nZS5ib3VuZChlLCBlKSkgOiBuLmooKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgICAgICByZXR1cm4gUnQuZm9yRWFjaCh0LCAodCA9PiBzLmdldChbIHQuaW5kZXhJZCwgdGhpcy51aWQgXSkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgZS5wdXNoKGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGUgPyBuZXcgZ3QoZS5zZXF1ZW5jZU51bWJlciwgbmV3IEl0KHdyKGUucmVhZFRpbWUpLCBuZXcgaHQoR3QoZS5kb2N1bWVudEtleSkpLCBlLmxhcmdlc3RCYXRjaElkKSkgOiBndC5lbXB0eSgpLCBzID0gdC5maWVsZHMubWFwKCgoW3QsIGVdKSA9PiBuZXcgX3QoYXQuZnJvbVNlcnZlckZvcm1hdCh0KSwgZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBsdCh0LmluZGV4SWQsIHQuY29sbGVjdGlvbkdyb3VwLCBzLCBuKTtcbiAgICAgICAgICAgICAgICB9KHQsIG4pKTtcbiAgICAgICAgICAgIH0pKSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXModCkubmV4dCgodCA9PiAwID09PSB0Lmxlbmd0aCA/IG51bGwgOiAodC5zb3J0KCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlciAtIGUuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlcjtcbiAgICAgICAgICAgIHJldHVybiAwICE9PSBuID8gbiA6IGV0KHQuY29sbGVjdGlvbkdyb3VwLCBlLmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgICAgIH0pKSwgdFswXS5jb2xsZWN0aW9uR3JvdXApKSk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBacih0KSwgaSA9IHRvKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5Ubih0KS5uZXh0KCh0ID0+IHMuaihcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIElEQktleVJhbmdlLmJvdW5kKGUsIGUpKS5uZXh0KChlID0+IFJ0LmZvckVhY2goZSwgKGUgPT4gaS5wdXQoVHIoZS5pbmRleElkLCB0aGlzLnVzZXIsIHQsIG4pKSkpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBgZ2V0RmllbGRJbmRleGVzKClgIG9uIFdlYiBkb2VzIG5vdCBjYWNoZSBpbmRleCBsb29rdXBzIGFzXG4gICAgICAgIC8vIGl0IGNvdWxkIGJlIHVzZWQgYWNyb3NzIGRpZmZlcmVudCBJbmRleGVkREIgdHJhbnNhY3Rpb25zLiBBcyBhbnkgY2FjaGVkXG4gICAgICAgIC8vIGRhdGEgbWlnaHQgYmUgaW52YWxpZGF0ZWQgYnkgb3RoZXIgbXVsdGktdGFiIGNsaWVudHMsIHdlIGNhbiBvbmx5IHRydXN0XG4gICAgICAgIC8vIGRhdGEgd2l0aGluIGEgc2luZ2xlIEluZGV4ZWREQiB0cmFuc2FjdGlvbi4gV2UgdGhlcmVmb3JlIGFkZCBhIGNhY2hlXG4gICAgICAgIC8vIGhlcmUuXG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChlLCAoKGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmdldChlLmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgICAgICAgICByZXR1cm4gKGkgPyBSdC5yZXNvbHZlKGkpIDogdGhpcy5nZXRGaWVsZEluZGV4ZXModCwgZS5jb2xsZWN0aW9uR3JvdXApKS5uZXh0KChpID0+IChuLnNldChlLmNvbGxlY3Rpb25Hcm91cCwgaSksIFxuICAgICAgICAgICAgUnQuZm9yRWFjaChpLCAobiA9PiB0aGlzLkVuKHQsIGUsIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLkFuKHMsIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmlzRXF1YWwoaSkgPyBSdC5yZXNvbHZlKCkgOiB0aGlzLnZuKHQsIHMsIG4sIGUsIGkpO1xuICAgICAgICAgICAgfSkpKSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgUm4odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gWHIodCkucHV0KHtcbiAgICAgICAgICAgIGluZGV4SWQ6IHMuaW5kZXhJZCxcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXG4gICAgICAgICAgICBhcnJheVZhbHVlOiBzLmFycmF5VmFsdWUsXG4gICAgICAgICAgICBkaXJlY3Rpb25hbFZhbHVlOiBzLmRpcmVjdGlvbmFsVmFsdWUsXG4gICAgICAgICAgICBvcmRlcmVkRG9jdW1lbnRLZXk6IHRoaXMuZ24obiwgZS5rZXkpLFxuICAgICAgICAgICAgZG9jdW1lbnRLZXk6IGUua2V5LnBhdGgudG9BcnJheSgpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBQbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBYcih0KS5kZWxldGUoWyBzLmluZGV4SWQsIHRoaXMudWlkLCBzLmFycmF5VmFsdWUsIHMuZGlyZWN0aW9uYWxWYWx1ZSwgdGhpcy5nbihuLCBlLmtleSksIGUua2V5LnBhdGgudG9BcnJheSgpIF0pO1xuICAgIH1cbiAgICBFbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBYcih0KTtcbiAgICAgICAgbGV0IGkgPSBuZXcgRWUoTXIpO1xuICAgICAgICByZXR1cm4gcy5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KFsgbi5pbmRleElkLCB0aGlzLnVpZCwgdGhpcy5nbihuLCBlKSBdKVxuICAgICAgICB9LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZChuZXcga3Iobi5pbmRleElkLCBlLCBzLmFycmF5VmFsdWUsIHMuZGlyZWN0aW9uYWxWYWx1ZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyB0aGUgaW5kZXggZW50cmllcyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyAgICBBbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbmV3IEVlKE1yKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMubW4oZSwgdCk7XG4gICAgICAgIGlmIChudWxsID09IHMpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gZnQoZSk7XG4gICAgICAgIGlmIChudWxsICE9IGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LmRhdGEuZmllbGQoaS5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKEplKHIpKSBmb3IgKGNvbnN0IGkgb2Ygci5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkgbiA9IG4uYWRkKG5ldyBrcihlLmluZGV4SWQsIHQua2V5LCB0aGlzLmRuKGkpLCBzKSk7XG4gICAgICAgIH0gZWxzZSBuID0gbi5hZGQobmV3IGtyKGUuaW5kZXhJZCwgdC5rZXksIEhyLCBzKSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBpbmRleCBlbnRyaWVzIGZvciB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgYnkgZGVsZXRpbmcgZW50cmllc1xuICAgICAqIHRoYXQgYXJlIG5vIGxvbmdlciByZWZlcmVuY2VkIGluIGBuZXdFbnRyaWVzYCBhbmQgYWRkaW5nIGFsbCBuZXdseSBhZGRlZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIHZuKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgTihcIkluZGV4ZWREYkluZGV4TWFuYWdlclwiLCBcIlVwZGF0aW5nIGluZGV4IGVudHJpZXMgZm9yIGRvY3VtZW50ICclcydcIiwgZS5rZXkpO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdC5nZXRJdGVyYXRvcigpLCBvID0gZS5nZXRJdGVyYXRvcigpO1xuICAgICAgICAgICAgbGV0IHUgPSB2ZShyKSwgYyA9IHZlKG8pO1xuICAgICAgICAgICAgLy8gV2FsayB0aHJvdWdoIHRoZSB0d28gc2V0cyBhdCB0aGUgc2FtZSB0aW1lLCB1c2luZyB0aGUgb3JkZXJpbmcgZGVmaW5lZCBieVxuICAgICAgICAgICAgLy8gYGNvbXBhcmF0b3JgLlxuICAgICAgICAgICAgZm9yICg7dSB8fCBjOyApIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9ICExLCBlID0gITE7XG4gICAgICAgICAgICAgICAgaWYgKHUgJiYgYykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbih1LCBjKTtcbiAgICAgICAgICAgICAgICAgICAgcyA8IDAgPyBcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZFxuICAgICAgICAgICAgICAgICAgICAvLyB3YWxrdGhyb3VnaCBpcyBvbmx5IGluIGBiZWZvcmVgLlxuICAgICAgICAgICAgICAgICAgICBlID0gITAgOiBzID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG9ubHkgaW4gYGFmdGVyYC5cbiAgICAgICAgICAgICAgICAgICAgdCA9ICEwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgbnVsbCAhPSB1ID8gZSA9ICEwIDogdCA9ICEwO1xuICAgICAgICAgICAgICAgIHQgPyAocyhjKSwgYyA9IHZlKG8pKSA6IGUgPyAoaSh1KSwgdSA9IHZlKHIpKSA6ICh1ID0gdmUociksIGMgPSB2ZShvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0ocywgaSwgTXIsIChcbiAgICAgICAgLyogb25BZGQ9ICovIHMgPT4ge1xuICAgICAgICAgICAgci5wdXNoKHRoaXMuUm4odCwgZSwgbiwgcykpO1xuICAgICAgICB9KSwgKFxuICAgICAgICAvKiBvblJlbW92ZT0gKi8gcyA9PiB7XG4gICAgICAgICAgICByLnB1c2godGhpcy5Qbih0LCBlLCBuLCBzKSk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihyKTtcbiAgICB9XG4gICAgVG4odCkge1xuICAgICAgICBsZXQgZSA9IDE7XG4gICAgICAgIHJldHVybiB0byh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcInNlcXVlbmNlTnVtYmVySW5kZXhcIixcbiAgICAgICAgICAgIHJldmVyc2U6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVpZCwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgXSlcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmRvbmUoKSwgZSA9IG4uc2VxdWVuY2VOdW1iZXIgKyAxO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHNldCBvZiBJREIgcmFuZ2VzIHRoYXQgc3BsaXRzIHRoZSBleGlzdGluZyByYW5nZSBhbmQgZXhjbHVkZXNcbiAgICAgKiBhbnkgdmFsdWVzIHRoYXQgbWF0Y2ggdGhlIGBub3RJblZhbHVlYCBmcm9tIHRoZXNlIHJhbmdlcy4gQXMgYW4gZXhhbXBsZSxcbiAgICAgKiAnW2ZvbyA+IDIgJiYgZm9vICE9IDNdYCBiZWNvbWVzICBgW2ZvbyA+IDIgJiYgPCAzLCBmb28gPiAzXWAuXG4gICAgICovICAgIGNyZWF0ZVJhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVGhlIG5vdEluIHZhbHVlcyBuZWVkIHRvIGJlIHNvcnRlZCBhbmQgdW5pcXVlIHNvIHRoYXQgd2UgY2FuIHJldHVybiBhXG4gICAgICAgIC8vIHNvcnRlZCBzZXQgb2Ygbm9uLW92ZXJsYXBwaW5nIHJhbmdlcy5cbiAgICAgICAgbiA9IG4uc29ydCgoKHQsIGUpID0+IE1yKHQsIGUpKSkuZmlsdGVyKCgodCwgZSwgbikgPT4gIWUgfHwgMCAhPT0gTXIodCwgbltlIC0gMV0pKSk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcy5wdXNoKHQpO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2Ygbikge1xuICAgICAgICAgICAgY29uc3QgbiA9IE1yKGksIHQpLCByID0gTXIoaSwgZSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgdGhlIGxvd2VyIGJvdW5kLiBXZSB0aGVyZWZvcmUgbmVlZCB0byByYWlzZSB0aGUgYm91bmRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgc1swXSA9IHQuSmUoKTsgZWxzZSBpZiAobiA+IDAgJiYgciA8IDApIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIGlzIGluIHRoZSBtaWRkbGUgb2YgdGhlIHJhbmdlXG4gICAgICAgICAgICBzLnB1c2goaSksIHMucHVzaChpLkplKCkpOyBlbHNlIGlmIChyID4gMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgKGFuZCBhbGwgZm9sbG93aW5nIHZhbHVlcykgYXJlIG91dCBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHMubGVuZ3RoOyB0ICs9IDIpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGVuY291bnRlciB0d28gYm91bmRzIHRoYXQgd2lsbCBjcmVhdGUgYW4gdW5tYXRjaGFibGUga2V5IHJhbmdlLFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSByZXR1cm4gYW4gZW1wdHkgc2V0IG9mIGtleSByYW5nZXMuXG4gICAgICAgICAgICBpZiAodGhpcy5ibihzW3RdLCBzW3QgKyAxXSkpIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBbIHNbdF0uaW5kZXhJZCwgdGhpcy51aWQsIHNbdF0uYXJyYXlWYWx1ZSwgc1t0XS5kaXJlY3Rpb25hbFZhbHVlLCBIciwgW10gXSwgbiA9IFsgc1t0ICsgMV0uaW5kZXhJZCwgdGhpcy51aWQsIHNbdCArIDFdLmFycmF5VmFsdWUsIHNbdCArIDFdLmRpcmVjdGlvbmFsVmFsdWUsIEhyLCBbXSBdO1xuICAgICAgICAgICAgaS5wdXNoKElEQktleVJhbmdlLmJvdW5kKGUsIG4pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgYm4odCwgZSkge1xuICAgICAgICAvLyBJZiBsb3dlciBib3VuZCBpcyBncmVhdGVyIHRoYW4gdGhlIHVwcGVyIGJvdW5kLCB0aGVuIHRoZSBrZXlcbiAgICAgICAgLy8gcmFuZ2UgY2FuIG5ldmVyIGJlIG1hdGNoZWQuXG4gICAgICAgIHJldHVybiBNcih0LCBlKSA+IDA7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXModCwgZSkubmV4dChlbyk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5tYXBBcnJheSh0aGlzLmNuKGUpLCAoZSA9PiB0aGlzLmFuKHQsIGUpLm5leHQoKHQgPT4gdCB8fCBPKCkpKSkpLm5leHQoZW8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNvbGxlY3Rpb25QYXJlbnRzXG4gKiBkb2N1bWVudCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBZcih0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiY29sbGVjdGlvblBhcmVudHNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBlbnRyeSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWHIodCkge1xuICAgIHJldHVybiBfZSh0LCBcImluZGV4RW50cmllc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IGNvbmZpZ3VyYXRpb24gb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFpyKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJpbmRleENvbmZpZ3VyYXRpb25cIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBzdGF0ZSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gdG8odCkge1xuICAgIHJldHVybiBfZSh0LCBcImluZGV4U3RhdGVcIik7XG59XG5cbmZ1bmN0aW9uIGVvKHQpIHtcbiAgICBGKDAgIT09IHQubGVuZ3RoKTtcbiAgICBsZXQgZSA9IHRbMF0uaW5kZXhTdGF0ZS5vZmZzZXQsIG4gPSBlLmxhcmdlc3RCYXRjaElkO1xuICAgIGZvciAobGV0IHMgPSAxOyBzIDwgdC5sZW5ndGg7IHMrKykge1xuICAgICAgICBjb25zdCBpID0gdFtzXS5pbmRleFN0YXRlLm9mZnNldDtcbiAgICAgICAgVHQoaSwgZSkgPCAwICYmIChlID0gaSksIG4gPCBpLmxhcmdlc3RCYXRjaElkICYmIChuID0gaS5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSXQoZS5yZWFkVGltZSwgZS5kb2N1bWVudEtleSwgbik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IG5vID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIHNvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICB0LCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICBlLCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gdCwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gZSwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHNvKHQsIHNvLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBzby5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIGlvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5zdG9yZShcIm11dGF0aW9uc1wiKSwgaSA9IHQuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKSwgciA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCB1ID0gMDtcbiAgICBjb25zdCBjID0gcy5YKHtcbiAgICAgICAgcmFuZ2U6IG9cbiAgICB9LCAoKHQsIGUsIG4pID0+ICh1KyssIG4uZGVsZXRlKCkpKSk7XG4gICAgci5wdXNoKGMubmV4dCgoKCkgPT4ge1xuICAgICAgICBGKDEgPT09IHUpO1xuICAgIH0pKSk7XG4gICAgY29uc3QgYSA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiBuLm11dGF0aW9ucykge1xuICAgICAgICBjb25zdCBzID0genQoZSwgdC5rZXkucGF0aCwgbi5iYXRjaElkKTtcbiAgICAgICAgci5wdXNoKGkuZGVsZXRlKHMpKSwgYS5wdXNoKHQua2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIFJ0LndhaXRGb3IocikubmV4dCgoKCkgPT4gYSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICovIGZ1bmN0aW9uIHJvKHQpIHtcbiAgICBpZiAoIXQpIHJldHVybiAwO1xuICAgIGxldCBlO1xuICAgIGlmICh0LmRvY3VtZW50KSBlID0gdC5kb2N1bWVudDsgZWxzZSBpZiAodC51bmtub3duRG9jdW1lbnQpIGUgPSB0LnVua25vd25Eb2N1bWVudDsgZWxzZSB7XG4gICAgICAgIGlmICghdC5ub0RvY3VtZW50KSB0aHJvdyBPKCk7XG4gICAgICAgIGUgPSB0Lm5vRG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqLyBzby5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSA9IDEwLCBcbnNvLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCA9IDFlMywgc28uREVGQVVMVCA9IG5ldyBzbyg0MTk0MzA0MCwgc28uREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIHNvLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCksIFxuc28uRElTQUJMRUQgPSBuZXcgc28oLTEsIDAsIDApO1xuXG5jbGFzcyBvbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlcklkIChlLmcuIG51bGwgVUlEID0+IFwiXCIgdXNlcklkKSB1c2VkIHRvIHN0b3JlIC9cbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHQsIHRoaXMuc2VyaWFsaXplciA9IGUsIHRoaXMuaW5kZXhNYW5hZ2VyID0gbiwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGVzIHRoZSBkb2N1bWVudCBrZXlzIGZvciBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMuIElmIHRoZSBtdXRhdGlvblxuICAgICAgICAgKiBoYXMgYmVlbiByZW1vdmVkIGZyb20gSW5kZXhlZERiLCB0aGUgY2FjaGVkIHZhbHVlIG1heSBjb250aW51ZSB0b1xuICAgICAgICAgKiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBiYXRjaCdzIGRvY3VtZW50IGtleXMuIFRvIHJlbW92ZSBhIGNhY2hlZCB2YWx1ZVxuICAgICAgICAgKiBsb2NhbGx5LCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIHNob3VsZCBiZSBpbnZva2VkIGVpdGhlciBkaXJlY3RseVxuICAgICAgICAgKiBvciB0aHJvdWdoIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdpdGggbXVsdGktdGFiLCB3aGVuIHRoZSBwcmltYXJ5IGNsaWVudCBhY2tub3dsZWRnZXMgb3IgcmVqZWN0cyBhIG11dGF0aW9uLFxuICAgICAgICAgKiB0aGlzIGNhY2hlIGlzIHVzZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgdG8gaW52YWxpZGF0ZSB0aGUgbG9jYWxcbiAgICAgICAgICogdmlldyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBwcmV2aW91c2x5IGFmZmVjdGVkIGJ5IHRoZSBtdXRhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHRoaXMuVm4gPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIuXG4gICAgICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlciBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgbXV0YXRpb24gcXVldWUuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2Ugd2hlbiBwZXJzaXN0aW5nIHRvIEluZGV4ZWREYi5cbiAgICAgKi8gICAgc3RhdGljIGRlKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gVE9ETyhtY2cpOiBGaWd1cmUgb3V0IHdoYXQgY29uc3RyYWludHMgdGhlcmUgYXJlIG9uIHVzZXJJRHNcbiAgICAgICAgLy8gSW4gcGFydGljdWxhciwgYXJlIHRoZXJlIGFueSByZXNlcnZlZCBjaGFyYWN0ZXJzPyBhcmUgZW1wdHkgaWRzIGFsbG93ZWQ/XG4gICAgICAgIC8vIEZvciB0aGUgbW9tZW50IHN0b3JlIHRoZXNlIHRvZ2V0aGVyIGluIHRoZSBzYW1lIG11dGF0aW9ucyB0YWJsZSBhc3N1bWluZ1xuICAgICAgICAvLyB0aGF0IGVtcHR5IHVzZXJJRHMgYXJlbid0IGFsbG93ZWQuXG4gICAgICAgIEYoXCJcIiAhPT0gdC51aWQpO1xuICAgICAgICBjb25zdCBpID0gdC5pc0F1dGhlbnRpY2F0ZWQoKSA/IHQudWlkIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBvbyhpLCBlLCBuLCBzKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eSh0KSB7XG4gICAgICAgIGxldCBlID0gITA7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gY28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICAgICAgZSA9ICExLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBhbyh0KSwgciA9IGNvKHQpO1xuICAgICAgICAvLyBUaGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGluIENocm9tZSAoYW5kIEZpcmVmb3gpIGRvZXMgbm90IGhhbmRsZVxuICAgICAgICAvLyBjb21wb3VuZCBpbmRpY2VzIHRoYXQgaW5jbHVkZSBhdXRvLWdlbmVyYXRlZCBrZXlzIGNvcnJlY3RseS4gVG8gZW5zdXJlXG4gICAgICAgIC8vIHRoYXQgdGhlIGluZGV4IGVudHJ5IGlzIGFkZGVkIGNvcnJlY3RseSBpbiBhbGwgYnJvd3NlcnMsIHdlIHBlcmZvcm0gdHdvXG4gICAgICAgIC8vIHdyaXRlczogVGhlIGZpcnN0IHdyaXRlIGlzIHVzZWQgdG8gcmV0cmlldmUgdGhlIG5leHQgYXV0by1nZW5lcmF0ZWQgQmF0Y2hcbiAgICAgICAgLy8gSUQsIGFuZCB0aGUgc2Vjb25kIHdyaXRlIHBvcHVsYXRlcyB0aGUgaW5kZXggYW5kIHN0b3JlcyB0aGUgYWN0dWFsXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoLlxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTcwMTk3MlxuICAgICAgICAvLyBXZSB3cml0ZSBhbiBlbXB0eSBvYmplY3QgdG8gb2J0YWluIGtleVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gci5hZGQoe30pLm5leHQoKG8gPT4ge1xuICAgICAgICAgICAgRihcIm51bWJlclwiID09IHR5cGVvZiBvKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBuZXcgWnMobywgZSwgbiwgcyksIGMgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4uYmFzZU11dGF0aW9ucy5tYXAoKGUgPT4gamkodC5mZSwgZSkpKSwgaSA9IG4ubXV0YXRpb25zLm1hcCgoZSA9PiBqaSh0LmZlLCBlKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZSxcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZDogbi5iYXRjaElkLFxuICAgICAgICAgICAgICAgICAgICBsb2NhbFdyaXRlVGltZU1zOiBuLmxvY2FsV3JpdGVUaW1lLnRvTWlsbGlzKCksXG4gICAgICAgICAgICAgICAgICAgIGJhc2VNdXRhdGlvbnM6IHMsXG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uczogaVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgdGhpcy51c2VySWQsIHUpLCBhID0gW107XG4gICAgICAgICAgICBsZXQgaCA9IG5ldyBFZSgoKHQsIGUpID0+IGV0KHQuY2Fub25pY2FsU3RyaW5nKCksIGUuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB6dCh0aGlzLnVzZXJJZCwgdC5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgaCA9IGguYWRkKHQua2V5LnBhdGgucG9wTGFzdCgpKSwgYS5wdXNoKHIucHV0KGMpKSwgYS5wdXNoKGkucHV0KGUsIFd0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBhLnB1c2godGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkpO1xuICAgICAgICAgICAgfSkpLCB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLlZuW29dID0gdS5rZXlzKCk7XG4gICAgICAgICAgICB9KSksIFJ0LndhaXRGb3IoYSkubmV4dCgoKCkgPT4gdSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gY28odCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IChGKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIF9yKHRoaXMuc2VyaWFsaXplciwgdCkpIDogbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBrZXlzIGZvciB0aGUgbXV0YXRpb24gYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZC5cbiAgICAgKiBGb3IgcHJpbWFyeSBjbGllbnRzLCB0aGlzIG1ldGhvZCByZXR1cm5zIGBudWxsYCBhZnRlclxuICAgICAqIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAgaGFzIGJlZW4gY2FsbGVkLiBTZWNvbmRhcnkgY2xpZW50cyByZXR1cm4gYVxuICAgICAqIGNhY2hlZCByZXN1bHQgdW50aWwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgU24odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5WbltlXSA/IFJ0LnJlc29sdmUodGhpcy5WbltlXSkgOiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmtleXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5WbltlXSA9IG4sIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCwgbiBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gY28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgZS51c2VySWQgPT09IHRoaXMudXNlcklkICYmIChGKGUuYmF0Y2hJZCA+PSBuKSwgaSA9IF9yKHRoaXMuc2VyaWFsaXplciwgZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IG4gPSAtMTtcbiAgICAgICAgcmV0dXJuIGNvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogZSxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgbiA9IGUuYmF0Y2hJZCwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCAtMSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBjbyh0KS5qKFwidXNlck11dGF0aW9uc0luZGV4XCIsIGUpLm5leHQoKHQgPT4gdC5tYXAoKHQgPT4gX3IodGhpcy5zZXJpYWxpemVyLCB0KSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IGp0KHRoaXMudXNlcklkLCBlLnBhdGgpLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChuKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gYW8odCkuWCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKG4sIHMsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtvLCB1LCBjXSA9IG4sIGEgPSBHdCh1KTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKGEpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBjbyh0KS5nZXQoYykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBPKCk7XG4gICAgICAgICAgICAgICAgRih0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBpLnB1c2goX3IodGhpcy5zZXJpYWxpemVyLCB0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgRWUoZXQpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGp0KHRoaXMudXNlcklkLCBlLnBhdGgpLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKSwgbyA9IGFvKHQpLlgoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgICAgICB9LCAoKHQsIHMsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbciwgbywgdV0gPSB0LCBjID0gR3Qobyk7XG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKGMpID8gbiA9IG4uYWRkKHUpIDogaS5kb25lKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBzLnB1c2gobyk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihzKS5uZXh0KCgoKSA9PiB0aGlzLkRuKHQsIG4pKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMSwgaSA9IGp0KHRoaXMudXNlcklkLCBuKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSk7XG4gICAgICAgIC8vIENvbGxlY3QgdXAgdW5pcXVlIGJhdGNoSURzIGVuY291bnRlcmVkIGR1cmluZyBhIHNjYW4gb2YgdGhlIGluZGV4LiBVc2UgYVxuICAgICAgICAvLyBTb3J0ZWRTZXQgdG8gYWNjdW11bGF0ZSBiYXRjaCBJRHMgc28gdGhleSBjYW4gYmUgdHJhdmVyc2VkIGluIG9yZGVyIGluIGFcbiAgICAgICAgLy8gc2NhbiBvZiB0aGUgbWFpbiB0YWJsZS5cbiAgICAgICAgbGV0IG8gPSBuZXcgRWUoZXQpO1xuICAgICAgICByZXR1cm4gYW8odCkuWCh7XG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKHQsIGUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCB1LCBjXSA9IHQsIGEgPSBHdCh1KTtcbiAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIG4uaXNQcmVmaXhPZihhKSA/IFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIGEubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQoYykpIDogaS5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLkRuKHQsIG8pKSk7XG4gICAgfVxuICAgIERuKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gW107XG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHMucHVzaChjbyh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IE8oKTtcbiAgICAgICAgICAgICAgICBGKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIG4ucHVzaChfcih0aGlzLnNlcmlhbGl6ZXIsIHQpKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihzKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gaW8odC5odCwgdGhpcy51c2VySWQsIGUpLm5leHQoKG4gPT4gKHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5DbihlLmJhdGNoSWQpO1xuICAgICAgICB9KSksIFJ0LmZvckVhY2gobiwgKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlZCBrZXlzIGZvciBhIG11dGF0aW9uIGJhdGNoLiBUaGlzIG1ldGhvZCBzaG91bGQgYmVcbiAgICAgKiBjYWxsZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgYWZ0ZXIgdGhleSBwcm9jZXNzIG11dGF0aW9uIHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3QgaGF2ZSB0byBiZSBjYWxsZWQgZnJvbSBwcmltYXJ5IGNsaWVudHMgYXNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBlbnRyaWVzIGFyZSBjbGVhcmVkIHdoZW4gYW4gYWNrbm93bGVkZ2VkIG9yXG4gICAgICogcmVqZWN0ZWQgYmF0Y2ggaXMgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgQ24odCkge1xuICAgICAgICBkZWxldGUgdGhpcy5Wblt0XTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkIF0pO1xuICAgICAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGFvKHQpLlgoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodFswXSA9PT0gdGhpcy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEd0KHRbMV0pO1xuICAgICAgICAgICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG4uZG9uZSgpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBGKDAgPT09IHMubGVuZ3RoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB1byh0LCB0aGlzLnVzZXJJZCwgZSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkgKHN0YXRlIGlzIGhlbGQgaW4gbWVtb3J5IGluIG90aGVyIGNsaWVudHMpLlxuICAgIC8qKiBSZXR1cm5zIHRoZSBtdXRhdGlvbiBxdWV1ZSdzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLiAqL1xuICAgIHhuKHQpIHtcbiAgICAgICAgcmV0dXJuIGhvKHQpLmdldCh0aGlzLnVzZXJJZCkubmV4dCgodCA9PiB0IHx8IHtcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgICAgICAgICBsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZDogLTEsXG4gICAgICAgICAgICBsYXN0U3RyZWFtVG9rZW46IFwiXCJcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIgY29udGFpbnMgYSBwZW5kaW5nXG4gKiAgICAgICAgIG11dGF0aW9uIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICovIGZ1bmN0aW9uIHVvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0ganQoZSwgbi5wYXRoKSwgaSA9IHNbMV0sIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHMpO1xuICAgIGxldCBvID0gITE7XG4gICAgcmV0dXJuIGFvKHQpLlgoe1xuICAgICAgICByYW5nZTogcixcbiAgICAgICAgWTogITBcbiAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgY29uc3QgW3IsIHUsIC8qYmF0Y2hJRCovIGNdID0gdDtcbiAgICAgICAgciA9PT0gZSAmJiB1ID09PSBpICYmIChvID0gITApLCBzLmRvbmUoKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gbykpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGFueSBtdXRhdGlvbiBxdWV1ZSBjb250YWlucyB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25zIG9iamVjdCBzdG9yZS5cbiAqL1xuZnVuY3Rpb24gY28odCkge1xuICAgIHJldHVybiBfZSh0LCBcIm11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBhbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gaG8odCkge1xuICAgIHJldHVybiBfZSh0LCBcIm11dGF0aW9uUXVldWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIE9mZnNldCB0byBlbnN1cmUgbm9uLW92ZXJsYXBwaW5nIHRhcmdldCBpZHMuICovXG4vKipcbiAqIEdlbmVyYXRlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdGFyZ2V0IElEcyBmb3Igc2VuZGluZyB0YXJnZXRzIHRvIHRoZVxuICogd2F0Y2ggc3RyZWFtLlxuICpcbiAqIFRoZSBjbGllbnQgY29uc3RydWN0cyB0d28gZ2VuZXJhdG9ycywgb25lIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBhbmQgb25lIGZvclxuICogZm9yIHRoZSBzeW5jIGVuZ2luZSAodG8gZ2VuZXJhdGUgbGltYm8gZG9jdW1lbnRzIHRhcmdldHMpLiBUaGVzZVxuICogZ2VuZXJhdG9ycyBwcm9kdWNlIG5vbi1vdmVybGFwcGluZyBJRHMgKGJ5IHVzaW5nIGV2ZW4gYW5kIG9kZCBJRHNcbiAqIHJlc3BlY3RpdmVseSkuXG4gKlxuICogQnkgc2VwYXJhdGluZyB0aGUgdGFyZ2V0IElEIHNwYWNlLCB0aGUgcXVlcnkgY2FjaGUgY2FuIGdlbmVyYXRlIHRhcmdldCBJRHNcbiAqIHRoYXQgcGVyc2lzdCBhY3Jvc3MgY2xpZW50IHJlc3RhcnRzLCB3aGlsZSBzeW5jIGVuZ2luZSBjYW4gaW5kZXBlbmRlbnRseVxuICogZ2VuZXJhdGUgaW4tbWVtb3J5IHRhcmdldCBJRHMgdGhhdCBhcmUgdHJhbnNpZW50IGFuZCBjYW4gYmUgcmV1c2VkIGFmdGVyIGFcbiAqIHJlc3RhcnQuXG4gKi9cbmNsYXNzIGxvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTm4gPSB0O1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ObiArPSAyLCB0aGlzLk5uO1xuICAgIH1cbiAgICBzdGF0aWMga24oKSB7XG4gICAgICAgIC8vIFRoZSB0YXJnZXQgY2FjaGUgZ2VuZXJhdG9yIG11c3QgcmV0dXJuICcyJyBpbiBpdHMgZmlyc3QgY2FsbCB0byBgbmV4dCgpYFxuICAgICAgICAvLyBhcyB0aGVyZSBpcyBubyBkaWZmZXJlbnRpYXRpb24gaW4gdGhlIHByb3RvY29sIGxheWVyIGJldHdlZW4gYW4gdW5zZXRcbiAgICAgICAgLy8gbnVtYmVyIGFuZCB0aGUgbnVtYmVyICcwJy4gSWYgd2Ugd2VyZSB0byBzZW50IGEgdGFyZ2V0IHdpdGggdGFyZ2V0IElEXG4gICAgICAgIC8vICcwJywgdGhlIGJhY2tlbmQgd291bGQgY29uc2lkZXIgaXQgdW5zZXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBpdHMgb3duIElELlxuICAgICAgICByZXR1cm4gbmV3IGxvKDApO1xuICAgIH1cbiAgICBzdGF0aWMgTW4oKSB7XG4gICAgICAgIC8vIFN5bmMgZW5naW5lIGFzc2lnbnMgdGFyZ2V0IElEcyBmb3IgbGltYm8gZG9jdW1lbnQgZGV0ZWN0aW9uLlxuICAgICAgICByZXR1cm4gbmV3IGxvKC0xKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGZvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBlO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IGNhY2hlIGdsb2JhbCBtZXRhZGF0YSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgc2luY2VcbiAgICAvLyBzb21lIG9mIGl0IChpbiBwYXJ0aWN1bGFyIGBoaWdoZXN0VGFyZ2V0SWRgKSBjYW4gYmUgbW9kaWZpZWQgYnkgc2Vjb25kYXJ5XG4gICAgLy8gdGFicy4gV2UgY291bGQgcGVyaGFwcyBiZSBtb3JlIGdyYW51bGFyIChhbmQgZS5nLiBzdGlsbCBjYWNoZVxuICAgIC8vIGBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uYCBpbiBtZW1vcnkpIGJ1dCBmb3Igc2ltcGxpY2l0eSB3ZSBjdXJyZW50bHkgZ29cbiAgICAvLyB0byBJbmRleGVkRGIgd2hlbmV2ZXIgd2UgbmVlZCB0byByZWFkIG1ldGFkYXRhLiBXZSBjYW4gcmV2aXNpdCBpZiBpdCB0dXJuc1xuICAgIC8vIG91dCB0byBoYXZlIGEgbWVhbmluZ2Z1bCBwZXJmb3JtYW5jZSBpbXBhY3QuXG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBsbyhlLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgICAgICAgICByZXR1cm4gZS5oaWdoZXN0VGFyZ2V0SWQgPSBuLm5leHQoKSwgdGhpcy5Pbih0LCBlKS5uZXh0KCgoKSA9PiBlLmhpZ2hlc3RUYXJnZXRJZCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbih0KS5uZXh0KCh0ID0+IHJ0LmZyb21UaW1lc3RhbXAobmV3IGl0KHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5zZWNvbmRzLCB0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24ubmFub3NlY29uZHMpKSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbih0KS5uZXh0KCh0ID0+IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQpLm5leHQoKHMgPT4gKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSwgbiAmJiAocy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbi50b1RpbWVzdGFtcCgpKSwgXG4gICAgICAgIGUgPiBzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlKSwgdGhpcy5Pbih0LCBzKSkpKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZuKHQsIGUpLm5leHQoKCgpID0+IHRoaXMuJG4odCkubmV4dCgobiA9PiAobi50YXJnZXRDb3VudCArPSAxLCB0aGlzLkJuKGUsIG4pLCBcbiAgICAgICAgdGhpcy5Pbih0LCBuKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRm4odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCgoKSA9PiB3byh0KS5kZWxldGUoZS50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiB0aGlzLiRuKHQpKSkubmV4dCgoZSA9PiAoRihlLnRhcmdldENvdW50ID4gMCksIFxuICAgICAgICBlLnRhcmdldENvdW50IC09IDEsIHRoaXMuT24odCwgZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFueSB0YXJnZXRzIHdpdGggc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQsIGV4Y2VwdGluZyB0aG9zZVxuICAgICAqIHByZXNlbnQgaW4gYGFjdGl2ZVRhcmdldElkc2AuIERvY3VtZW50IGFzc29jaWF0aW9ucyBmb3IgdGhlIHJlbW92ZWQgdGFyZ2V0cyBhcmUgYWxzbyByZW1vdmVkLlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHJlbW92ZWQuXG4gICAgICovICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHdvKHQpLlgoKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1ID0gbXIobyk7XG4gICAgICAgICAgICB1LnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQodS50YXJnZXRJZCkgJiYgKHMrKywgaS5wdXNoKHRoaXMucmVtb3ZlVGFyZ2V0RGF0YSh0LCB1KSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUnQud2FpdEZvcihpKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gd28odCkuWCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBtcihuKTtcbiAgICAgICAgICAgIGUocyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgJG4odCkge1xuICAgICAgICByZXR1cm4gX28odCkuZ2V0KFwidGFyZ2V0R2xvYmFsS2V5XCIpLm5leHQoKHQgPT4gKEYobnVsbCAhPT0gdCksIHQpKSk7XG4gICAgfVxuICAgIE9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIF9vKHQpLnB1dChcInRhcmdldEdsb2JhbEtleVwiLCBlKTtcbiAgICB9XG4gICAgRm4odCwgZSkge1xuICAgICAgICByZXR1cm4gd28odCkucHV0KGdyKHRoaXMuc2VyaWFsaXplciwgZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbi1wbGFjZSB1cGRhdGVzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB2YWx1ZXMgaW4gdGhlIGdpdmVuXG4gICAgICogVGFyZ2V0RGF0YS4gU2F2aW5nIGlzIGRvbmUgc2VwYXJhdGVseS4gUmV0dXJucyB0cnVlIGlmIHRoZXJlIHdlcmUgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgbWV0YWRhdGEuXG4gICAgICovICAgIEJuKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgcmV0dXJuIHQudGFyZ2V0SWQgPiBlLmhpZ2hlc3RUYXJnZXRJZCAmJiAoZS5oaWdoZXN0VGFyZ2V0SWQgPSB0LnRhcmdldElkLCBuID0gITApLCBcbiAgICAgICAgdC5zZXF1ZW5jZU51bWJlciA+IGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHQuc2VxdWVuY2VOdW1iZXIsIFxuICAgICAgICBuID0gITApLCBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQpLm5leHQoKHQgPT4gdC50YXJnZXRDb3VudCkpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgLy8gSXRlcmF0aW5nIGJ5IHRoZSBjYW5vbmljYWxJZCBtYXkgeWllbGQgbW9yZSB0aGFuIG9uZSByZXN1bHQgYmVjYXVzZVxuICAgICAgICAvLyBjYW5vbmljYWxJZCB2YWx1ZXMgYXJlIG5vdCByZXF1aXJlZCB0byBiZSB1bmlxdWUgcGVyIHRhcmdldC4gVGhpcyBxdWVyeVxuICAgICAgICAvLyBkZXBlbmRzIG9uIHRoZSBxdWVyeVRhcmdldHMgaW5kZXggdG8gYmUgZWZmaWNpZW50LlxuICAgICAgICBjb25zdCBuID0gJG4oZSksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4sIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIG4sIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gd28odCkuWCh7XG4gICAgICAgICAgICByYW5nZTogcyxcbiAgICAgICAgICAgIGluZGV4OiBcInF1ZXJ5VGFyZ2V0c0luZGV4XCJcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbXIobik7XG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgT24oZSwgci50YXJnZXQpICYmIChpID0gciwgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IFtdLCBpID0gbW8odCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHF0KGUucGF0aCk7XG4gICAgICAgICAgICBzLnB1c2goaS5wdXQoe1xuICAgICAgICAgICAgICAgIHRhcmdldElkOiBuLFxuICAgICAgICAgICAgICAgIHBhdGg6IHJcbiAgICAgICAgICAgIH0pKSwgcy5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIG4sIGUpKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IG1vKHQpO1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gcXQoZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBSdC53YWl0Rm9yKFsgcy5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBuLCBlKSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBtbyh0KSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHMpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHMgPSBtbyh0KTtcbiAgICAgICAgbGV0IGkgPSBncygpO1xuICAgICAgICByZXR1cm4gcy5YKHtcbiAgICAgICAgICAgIHJhbmdlOiBuLFxuICAgICAgICAgICAgWTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gR3QodFsxXSksIHIgPSBuZXcgaHQocyk7XG4gICAgICAgICAgICBpID0gaS5hZGQocik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHF0KGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4gXSwgWyBzdChuKSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIG1vKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIixcbiAgICAgICAgICAgIFk6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChbdCwgZV0sIG4sIHMpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gdCAmJiAoaSsrLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBsZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3byh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gbXIodCkgOiBudWxsKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gd28odCkge1xuICAgIHJldHVybiBfZSh0LCBcInRhcmdldHNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX28odCkge1xuICAgIHJldHVybiBfZSh0LCBcInRhcmdldEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IHRhcmdldCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gbW8odCkge1xuICAgIHJldHVybiBfZSh0LCBcInRhcmdldERvY3VtZW50c1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gZ28oW3QsIGVdLCBbbiwgc10pIHtcbiAgICBjb25zdCBpID0gZXQodCwgbik7XG4gICAgcmV0dXJuIDAgPT09IGkgPyBldChlLCBzKSA6IGk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxuICovIGNsYXNzIHlvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTG4gPSB0LCB0aGlzLmJ1ZmZlciA9IG5ldyBFZShnbyksIHRoaXMucW4gPSAwO1xuICAgIH1cbiAgICBVbigpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy5xbjtcbiAgICB9XG4gICAgS24odCkge1xuICAgICAgICBjb25zdCBlID0gWyB0LCB0aGlzLlVuKCkgXTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLkxuKSB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5idWZmZXIubGFzdCgpO1xuICAgICAgICAgICAgZ28oZSwgdCkgPCAwICYmICh0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZSh0KS5hZGQoZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXG4gICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcbiAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcbiAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXG4gKi8gY2xhc3MgcG8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5sb2NhbFN0b3JlID0gbiwgdGhpcy5HbiA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICAtMSAhPT0gdGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICYmIHRoaXMuUW4oNmU0KTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5HbiAmJiAodGhpcy5Hbi5jYW5jZWwoKSwgdGhpcy5HbiA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuR247XG4gICAgfVxuICAgIFFuKHQpIHtcbiAgICAgICAgTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gJHt0fW1zYCksIHRoaXMuR24gPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCIgLyogVGltZXJJZC5McnVHYXJiYWdlQ29sbGVjdGlvbiAqLyAsIHQsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkduID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2NhbFN0b3JlLmNvbGxlY3RHYXJiYWdlKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvcik7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgRHQodCkgPyBOKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uOiBcIiwgdCkgOiBhd2FpdCB2dCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuUW4oM2U1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqLyBjbGFzcyBJbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmpuID0gdCwgdGhpcy5wYXJhbXMgPSBlO1xuICAgIH1cbiAgICBjYWxjdWxhdGVUYXJnZXRDb3VudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpuLnpuKHQpLm5leHQoKHQgPT4gTWF0aC5mbG9vcihlIC8gMTAwICogdCkpKTtcbiAgICB9XG4gICAgbnRoU2VxdWVuY2VOdW1iZXIodCwgZSkge1xuICAgICAgICBpZiAoMCA9PT0gZSkgcmV0dXJuIFJ0LnJlc29sdmUoT3QuY3QpO1xuICAgICAgICBjb25zdCBuID0gbmV3IHlvKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5qbi5mb3JFYWNoVGFyZ2V0KHQsICh0ID0+IG4uS24odC5zZXF1ZW5jZU51bWJlcikpKS5uZXh0KCgoKSA9PiB0aGlzLmpuLlduKHQsICh0ID0+IG4uS24odCkpKSkpLm5leHQoKCgpID0+IG4ubWF4VmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpuLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4ucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSk7XG4gICAgfVxuICAgIGNvbGxlY3QodCwgZSkge1xuICAgICAgICByZXR1cm4gLTEgPT09IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgZGlzYWJsZWRcIiksIFxuICAgICAgICBSdC5yZXNvbHZlKG5vKSkgOiB0aGlzLmdldENhY2hlU2l6ZSh0KS5uZXh0KChuID0+IG4gPCB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKE4oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgQ2FjaGUgc2l6ZSAke259IGlzIGxvd2VyIHRoYW4gdGhyZXNob2xkICR7dGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZH1gKSwgXG4gICAgICAgIG5vKSA6IHRoaXMuSG4odCwgZSkpKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4uZ2V0Q2FjaGVTaXplKHQpO1xuICAgIH1cbiAgICBIbih0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzLCBpLCByLCBvLCBjLCBhO1xuICAgICAgICBjb25zdCBoID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgdGhpcy5wYXJhbXMucGVyY2VudGlsZVRvQ29sbGVjdCkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIENhcCBhdCB0aGUgY29uZmlndXJlZCBtYXhcbiAgICAgICAgZSA+IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPyAoTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYENhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gdG8gdGhlIG1heGltdW0gb2YgJHt0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0fSBmcm9tICR7ZX1gKSwgXG4gICAgICAgIHMgPSB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSA6IHMgPSBlLCByID0gRGF0ZS5ub3coKSwgdGhpcy5udGhTZXF1ZW5jZU51bWJlcih0LCBzKSkpKS5uZXh0KChzID0+IChuID0gcywgXG4gICAgICAgIG8gPSBEYXRlLm5vdygpLCB0aGlzLnJlbW92ZVRhcmdldHModCwgbiwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIGMgPSBEYXRlLm5vdygpLCBcbiAgICAgICAgdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBuKSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChhID0gRGF0ZS5ub3coKSwgQygpIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgICAgICAgICAgTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYExSVSBHYXJiYWdlIENvbGxlY3Rpb25cXG5cXHRDb3VudGVkIHRhcmdldHMgaW4gJHtyIC0gaH1tc1xcblxcdERldGVybWluZWQgbGVhc3QgcmVjZW50bHkgdXNlZCAke3N9IGluIGAgKyAobyAtIHIpICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHtpfSB0YXJnZXRzIGluIGAgKyAoYyAtIG8pICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHt0fSBkb2N1bWVudHMgaW4gYCArIChhIC0gYykgKyBcIm1zXFxuXCIgKyBgVG90YWwgRHVyYXRpb246ICR7YSAtIGh9bXNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkaWRSdW46ICEwLFxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogcyxcbiAgICAgICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudHNSZW1vdmVkOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVG8odCwgZSkge1xuICAgIHJldHVybiBuZXcgSW8odCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUHJvdmlkZXMgTFJVIGZ1bmN0aW9uYWxpdHkgZm9yIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS4gKi8gY2xhc3MgRW8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYiA9IHQsIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IFRvKHRoaXMsIGUpO1xuICAgIH1cbiAgICB6bih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkpuKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KHQpLm5leHQoKHQgPT4gZS5uZXh0KChlID0+IHQgKyBlKSkpKTtcbiAgICB9XG4gICAgSm4odCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLlduKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGUrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0LCBlKTtcbiAgICB9XG4gICAgV24odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Zbih0LCAoKHQsIG4pID0+IGUobikpKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIEFvKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gQW8odCwgbik7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEFvKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxuICAgICAqLyAgICBYbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICAgICAgcmV0dXJuIGhvKHQpLlooKHMgPT4gdW8odCwgcywgZSkubmV4dCgodCA9PiAodCAmJiAobiA9ICEwKSwgUnQucmVzb2x2ZSghdCkpKSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpLCBzID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuWW4odCwgKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBpZiAobyA8PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuWG4odCwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZSkgXG4gICAgICAgICAgICAgICAgICAgIC8vIE91ciBzaXplIGFjY291bnRpbmcgcmVxdWlyZXMgdXMgdG8gcmVhZCBhbGwgZG9jdW1lbnRzIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0aGVtLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSsrLCBuLmdldEVudHJ5KHQsIHIpLm5leHQoKCgpID0+IChuLnJlbW92ZUVudHJ5KHIsIHJ0Lm1pbigpKSwgbW8odCkuZGVsZXRlKFsgMCwgcXQoci5wYXRoKSBdKSkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUnQud2FpdEZvcihzKSkpLm5leHQoKCgpID0+IG4uYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0LCBuKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBBbyh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgY2FjaGUgdGhhdCBpcyAnb3JwaGFuZWQnLiBPcnBoYW5lZFxuICAgICAqIG1lYW5zIG5vdCBhIHBhcnQgb2YgYW55IHRhcmdldCwgc28gdGhlIG9ubHkgZW50cnkgaW4gdGhlIHRhcmdldC1kb2N1bWVudCBpbmRleCBmb3JcbiAgICAgKiB0aGF0IGRvY3VtZW50IHdpbGwgYmUgdGhlIHNlbnRpbmVsIHJvdyAodGFyZ2V0SWQgMCksIHdoaWNoIHdpbGwgYWxzbyBoYXZlIHRoZSBzZXF1ZW5jZVxuICAgICAqIG51bWJlciBmb3IgdGhlIGxhc3QgdGltZSB0aGUgZG9jdW1lbnQgd2FzIGFjY2Vzc2VkLlxuICAgICAqLyAgICBZbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBtbyh0KTtcbiAgICAgICAgbGV0IHMsIGkgPSBPdC5jdDtcbiAgICAgICAgcmV0dXJuIG4uWCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudFRhcmdldHNJbmRleFwiXG4gICAgICAgIH0sICgoW3QsIG5dLCB7cGF0aDogciwgc2VxdWVuY2VOdW1iZXI6IG99KSA9PiB7XG4gICAgICAgICAgICAwID09PSB0ID8gKFxuICAgICAgICAgICAgLy8gaWYgbmV4dFRvUmVwb3J0IGlzIHZhbGlkLCByZXBvcnQgaXQsIHRoaXMgaXMgYSBuZXcga2V5IHNvIHRoZVxuICAgICAgICAgICAgLy8gbGFzdCBvbmUgbXVzdCBub3QgYmUgYSBtZW1iZXIgb2YgYW55IHRhcmdldHMuXG4gICAgICAgICAgICBpICE9PSBPdC5jdCAmJiBlKG5ldyBodChHdChzKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgcyA9IHIpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBPdC5jdDtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxuICAgICAgICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiB0aGUgbGFzdCBrZXkgd2UgaXRlcmF0ZWQgb3ZlciB3YXMgYW4gb3JwaGFuZWRcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGFuZCByZXBvcnQgaXQuXG4gICAgICAgICAgICBpICE9PSBPdC5jdCAmJiBlKG5ldyBodChHdChzKSksIGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQW8odCwgZSkge1xuICAgIHJldHVybiBtbyh0KS5wdXQoXG4gICAgLyoqXG4gKiBAcmV0dXJucyBBIHZhbHVlIHN1aXRhYmxlIGZvciB3cml0aW5nIGEgc2VudGluZWwgcm93IGluIHRoZSB0YXJnZXQtZG9jdW1lbnRcbiAqIHN0b3JlLlxuICovXG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICBwYXRoOiBxdCh0LnBhdGgpLFxuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IGVcbiAgICAgICAgfTtcbiAgICB9KGUsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBidWZmZXIgb2YgZW50cmllcyB0byBiZSB3cml0dGVuIHRvIGEgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqIEl0IGNhbiBiZSB1c2VkIHRvIGJhdGNoIHVwIGEgc2V0IG9mIGNoYW5nZXMgdG8gYmUgd3JpdHRlbiB0byB0aGUgY2FjaGUsIGJ1dFxuICogYWRkaXRpb25hbGx5IHN1cHBvcnRzIHJlYWRpbmcgZW50cmllcyBiYWNrIHdpdGggdGhlIGBnZXRFbnRyeSgpYCBtZXRob2QsXG4gKiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSBpZiBubyBlbnRyeSBpc1xuICogYnVmZmVyZWQuXG4gKlxuICogRW50cmllcyBhZGRlZCB0byB0aGUgY2FjaGUgKm11c3QqIGJlIHJlYWQgZmlyc3QuIFRoaXMgaXMgdG8gZmFjaWxpdGF0ZVxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUgZGVsdGEgb2YgdGhlIHBlbmRpbmcgY2hhbmdlcy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgY2xhc3Mgd2FzIGltcGxlbWVudGVkIHRoZW4gcmVtb3ZlZCBmcm9tIG90aGVyIHBsYXRmb3Jtcy5cbiAqIElmIGJ5dGUtY291bnRpbmcgZW5kcyB1cCBiZWluZyBuZWVkZWQgb24gdGhlIG90aGVyIHBsYXRmb3JtcywgY29uc2lkZXJcbiAqIHBvcnRpbmcgdGhpcyBjbGFzcyBhcyBwYXJ0IG9mIHRoYXQgaW1wbGVtZW50YXRpb24gd29yay5cbiAqLyBjbGFzcyB2byB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXkgdG8gdGhlIG5ldyBjYWNoZSBlbnRyeSB0aGF0IHNob3VsZCBiZSB3cml0dGVuLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgb3MoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUuYWRkRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSBtb2RpZnkgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIGFkZEVudHJ5KHQpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQodC5rZXksIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQodCwgYW4ubmV3SW52YWxpZERvY3VtZW50KHQpLnNldFJlYWRUaW1lKGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IFJ0LnJlc29sdmUobikgOiB0aGlzLmdldEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXModCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBSbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSB0O1xuICAgIH1cbiAgICBzZXRJbmRleE1hbmFnZXIodCkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJpZXMgdG8gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFNvKHQpLnB1dChuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBTbyh0KS5kZWxldGUoXG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIHZpYSB0aGUgcHJpbWFyeSBrZXkgb2ZcbiAqIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHJldHVybiBbIFxuICAgICAgICAgICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAgICAgICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gbltuLmxlbmd0aCAtIDJdLCBmcihlKSwgXG4gICAgICAgICAgICAvKiBkb2N1bWVudCBpZCAqLyBuW24ubGVuZ3RoIC0gMV0gXTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRDb2xsZWN0aW9uR3JvdXBJbmRleGAgaW5kZXguXG4gKi8gKGUsIG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY3VycmVudCBjYWNoZSBzaXplLlxuICAgICAqXG4gICAgICogQ2FsbGVycyB0byBgYWRkRW50cnkoKWAgYW5kIGByZW1vdmVFbnRyeSgpYCAqbXVzdCogY2FsbCB0aGlzIGFmdGVyd2FyZHMgdG8gdXBkYXRlIHRoZVxuICAgICAqIGNhY2hlJ3MgbWV0YWRhdGEuXG4gICAgICovICAgIHVwZGF0ZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodCkubmV4dCgobiA9PiAobi5ieXRlU2l6ZSArPSBlLCB0aGlzLlpuKHQsIG4pKSkpO1xuICAgIH1cbiAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gYW4ubmV3SW52YWxpZERvY3VtZW50KGUpO1xuICAgICAgICByZXR1cm4gU28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShEbyhlKSlcbiAgICAgICAgfSwgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gdGhpcy50cyhlLCBzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IHtcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICBkb2N1bWVudDogYW4ubmV3SW52YWxpZERvY3VtZW50KGUpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KERvKGUpKVxuICAgICAgICB9LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4gPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMudHMoZSwgcyksXG4gICAgICAgICAgICAgICAgc2l6ZTogcm8ocylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IGNzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5zKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMudHModCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIHNzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBjcygpLCBzID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5ucyh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnRzKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGkpLCBzID0gcy5pbnNlcnQodCwgcm8oZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIHJzOiBzXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIG5zKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgICAgICBsZXQgcyA9IG5ldyBFZSh4byk7XG4gICAgICAgIGUuZm9yRWFjaCgodCA9PiBzID0gcy5hZGQodCkpKTtcbiAgICAgICAgY29uc3QgaSA9IElEQktleVJhbmdlLmJvdW5kKERvKHMuZmlyc3QoKSksIERvKHMubGFzdCgpKSksIHIgPSBzLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCBvID0gci5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBTbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBpXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGh0LmZyb21TZWdtZW50cyhbIC4uLmUucHJlZml4UGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZG9jdW1lbnRJZCBdKTtcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2gga2V5cyBub3QgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtvICYmIHhvKG8sIGkpIDwgMDsgKSBuKG8sIG51bGwpLCBvID0gci5nZXROZXh0KCk7XG4gICAgICAgICAgICBvICYmIG8uaXNFcXVhbChpKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKG8sIGUpLCBvID0gci5oYXNOZXh0KCkgPyByLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgbyA/IHMuRyhEbyhvKSkgOiBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO287ICkgbihvLCBudWxsKSwgbyA9IHIuaGFzTmV4dCgpID8gci5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gZS5wYXRoLCByID0gWyBpLnBvcExhc3QoKS50b0FycmF5KCksIGkubGFzdFNlZ21lbnQoKSwgZnIobi5yZWFkVGltZSksIG4uZG9jdW1lbnRLZXkucGF0aC5pc0VtcHR5KCkgPyBcIlwiIDogbi5kb2N1bWVudEtleS5wYXRoLmxhc3RTZWdtZW50KCkgXSwgbyA9IFsgaS5wb3BMYXN0KCkudG9BcnJheSgpLCBpLmxhc3RTZWdtZW50KCksIFsgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIF0sIFwiXCIgXTtcbiAgICAgICAgcmV0dXJuIFNvKHQpLmooSURCS2V5UmFuZ2UuYm91bmQociwgbywgITApKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGxldCBuID0gY3MoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudHMoaHQuZnJvbVNlZ21lbnRzKGkucHJlZml4UGF0aC5jb25jYXQoaS5jb2xsZWN0aW9uR3JvdXAsIGkuZG9jdW1lbnRJZCkpLCBpKTtcbiAgICAgICAgICAgICAgICB0LmlzRm91bmREb2N1bWVudCgpICYmIChucyhlLCB0KSB8fCBzLmhhcyh0LmtleSkpICYmIChcbiAgICAgICAgICAgICAgICAvLyBFaXRoZXIgdGhlIGRvY3VtZW50IG1hdGNoZXMgdGhlIGdpdmVuIHF1ZXJ5LCBvciBpdCBpcyBtdXRhdGVkLlxuICAgICAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LmtleSwgdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gY3MoKTtcbiAgICAgICAgY29uc3QgciA9IENvKGUsIG4pLCBvID0gQ28oZSwgSXQubWF4KCkpO1xuICAgICAgICByZXR1cm4gU28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLmJvdW5kKHIsIG8sICEwKVxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLnRzKGh0LmZyb21TZWdtZW50cyhlLnByZWZpeFBhdGguY29uY2F0KGUuY29sbGVjdGlvbkdyb3VwLCBlLmRvY3VtZW50SWQpKSwgZSk7XG4gICAgICAgICAgICBpID0gaS5pbnNlcnQoci5rZXksIHIpLCBpLnNpemUgPT09IHMgJiYgbi5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYm8odGhpcywgISF0ICYmIHQudHJhY2tSZW1vdmFscyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0KS5uZXh0KCh0ID0+IHQuYnl0ZVNpemUpKTtcbiAgICB9XG4gICAgZ2V0TWV0YWRhdGEodCkge1xuICAgICAgICByZXR1cm4gVm8odCkuZ2V0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIikubmV4dCgodCA9PiAoRighIXQpLCB0KSkpO1xuICAgIH1cbiAgICBabih0LCBlKSB7XG4gICAgICAgIHJldHVybiBWbyh0KS5wdXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBgZGJSZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBjb3JyZXNwb25kcyB0byB0aGUgZm9ybWF0IHVzZWQgZm9yIHNlbnRpbmVsIGRlbGV0ZXMpLlxuICAgICAqLyAgICB0cyh0LCBlKSB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaHIodGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHQuaXNOb0RvY3VtZW50KCkgJiYgdC52ZXJzaW9uLmlzRXF1YWwocnQubWluKCkpKSkgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuLm5ld0ludmFsaWREb2N1bWVudCh0KTtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuICovIGZ1bmN0aW9uIFBvKHQpIHtcbiAgICByZXR1cm4gbmV3IFJvKHQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqLyBjbGFzcyBibyBleHRlbmRzIHZvIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRDYWNoZSAtIFRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzIHRvLlxuICAgICAqIEBwYXJhbSB0cmFja1JlbW92YWxzIC0gV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XG4gICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMub3MgPSB0LCB0aGlzLnRyYWNrUmVtb3ZhbHMgPSBlLCBcbiAgICAgICAgLy8gQSBtYXAgb2YgZG9jdW1lbnQgc2l6ZXMgYW5kIHJlYWQgdGltZXMgcHJpb3IgdG8gYXBwbHlpbmcgdGhlIGNoYW5nZXMgaW5cbiAgICAgICAgLy8gdGhpcyBidWZmZXIuXG4gICAgICAgIHRoaXMudXMgPSBuZXcgb3MoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IDAsIHMgPSBuZXcgRWUoKCh0LCBlKSA9PiBldCh0LmNhbm9uaWNhbFN0cmluZygpLCBlLmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChpLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy51cy5nZXQoaSk7XG4gICAgICAgICAgICBpZiAoZS5wdXNoKHRoaXMub3MucmVtb3ZlRW50cnkodCwgaSwgby5yZWFkVGltZSkpLCByLmlzVmFsaWREb2N1bWVudCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IGxyKHRoaXMub3Muc2VyaWFsaXplciwgcik7XG4gICAgICAgICAgICAgICAgcyA9IHMuYWRkKGkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBybyh1KTtcbiAgICAgICAgICAgICAgICBuICs9IGMgLSBvLnNpemUsIGUucHVzaCh0aGlzLm9zLmFkZEVudHJ5KHQsIGksIHUpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLnNpemUsIHRoaXMudHJhY2tSZW1vdmFscykge1xuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBscih0aGlzLm9zLnNlcmlhbGl6ZXIsIHIuY29udmVydFRvTm9Eb2N1bWVudChydC5taW4oKSkpO1xuICAgICAgICAgICAgICAgIGUucHVzaCh0aGlzLm9zLmFkZEVudHJ5KHQsIGksIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHRoaXMub3MuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIG4pKTtcbiAgICAgICAgfSkpLCBlLnB1c2godGhpcy5vcy51cGRhdGVNZXRhZGF0YSh0LCBuKSksIFJ0LndhaXRGb3IoZSk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGUgYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMub3MuZXModCwgZSkubmV4dCgodCA9PiAodGhpcy51cy5zZXQoZSwge1xuICAgICAgICAgICAgc2l6ZTogdC5zaXplLFxuICAgICAgICAgICAgcmVhZFRpbWU6IHQuZG9jdW1lbnQucmVhZFRpbWVcbiAgICAgICAgfSksIHQuZG9jdW1lbnQpKSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGVcbiAgICAgICAgLy8gYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMub3Muc3ModCwgZSkubmV4dCgoKHtkb2N1bWVudHM6IHQsIHJzOiBlfSkgPT4gKFxuICAgICAgICAvLyBOb3RlOiBgZ2V0QWxsRnJvbUNhY2hlYCByZXR1cm5zIHR3byBtYXBzIGluc3RlYWQgb2YgYSBzaW5nbGUgbWFwIGZyb21cbiAgICAgICAgLy8ga2V5cyB0byBgRG9jdW1lbnRTaXplRW50cnlgcy4gVGhpcyBpcyB0byBhbGxvdyByZXR1cm5pbmcgdGhlXG4gICAgICAgIC8vIGBNdXRhYmxlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cbiAgICAgICAgZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy51cy5zZXQoZSwge1xuICAgICAgICAgICAgICAgIHNpemU6IG4sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IHQuZ2V0KGUpLnJlYWRUaW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCB0KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVm8odCkge1xuICAgIHJldHVybiBfZSh0LCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcmVtb3RlRG9jdW1lbnRzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBTbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRLZXlJbmRleGAgaW5kZXguXG4gKi8gZnVuY3Rpb24gRG8odCkge1xuICAgIGNvbnN0IGUgPSB0LnBhdGgudG9BcnJheSgpO1xuICAgIHJldHVybiBbIFxuICAgIC8qIHByZWZpeCBwYXRoICovIGUuc2xpY2UoMCwgZS5sZW5ndGggLSAyKSwgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyBlW2UubGVuZ3RoIC0gMl0sIFxuICAgIC8qIGRvY3VtZW50IGlkICovIGVbZS5sZW5ndGggLSAxXSBdO1xufVxuXG5mdW5jdGlvbiBDbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUuZG9jdW1lbnRLZXkucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyB0LCBmcihlLnJlYWRUaW1lKSwgXG4gICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyBuLmxlbmd0aCA+IDAgPyBuW24ubGVuZ3RoIC0gMV0gOiBcIlwiIF07XG59XG5cbi8qKlxuICogQ29tcGFyYXRvciB0aGF0IGNvbXBhcmVzIGRvY3VtZW50IGtleXMgYWNjb3JkaW5nIHRvIHRoZSBwcmltYXJ5IGtleSBzb3J0aW5nXG4gKiB1c2VkIGJ5IHRoZSBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50YCBzdG9yZSAoYnkgcHJlZml4IHBhdGgsIGNvbGxlY3Rpb24gaWRcbiAqIGFuZCB0aGVuIGRvY3VtZW50IElEKS5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovIGZ1bmN0aW9uIHhvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gdC5wYXRoLnRvQXJyYXkoKSwgcyA9IGUucGF0aC50b0FycmF5KCk7XG4gICAgLy8gVGhlIG9yZGVyaW5nIGlzIGJhc2VkIG9uIGh0dHBzOi8vY2hyb21pdW0uZ29vZ2xlc291cmNlLmNvbS9jaHJvbWl1bS9ibGluay8rL2ZlNWMyMWZlZjk0ZGFlNzFjMWMzMzQ0Nzc1YjhkOGE3ZjdlNmQ5ZWMvU291cmNlL21vZHVsZXMvaW5kZXhlZGRiL0lEQktleS5jcHAjNzRcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAtIDIgJiYgdCA8IHMubGVuZ3RoIC0gMjsgKyt0KSBpZiAoaSA9IGV0KG5bdF0sIHNbdF0pLCBcbiAgICBpKSByZXR1cm4gaTtcbiAgICByZXR1cm4gaSA9IGV0KG4ubGVuZ3RoLCBzLmxlbmd0aCksIGkgfHwgKGkgPSBldChuW24ubGVuZ3RoIC0gMl0sIHNbcy5sZW5ndGggLSAyXSksIFxuICAgIGkgfHwgZXQobltuLmxlbmd0aCAtIDFdLCBzW3MubGVuZ3RoIC0gMV0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxuICogMS4gIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlXG4gKiAgICAgRG9jdW1lbnQgQ2FjaGVcbiAqIDIuICBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXG4gKiAgICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAqIDMuICBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcbiAqICAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcbiAqICAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxuICogNC4gIE11bHRpLVRhYiBTdXBwb3J0LlxuICogNS4gIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxuICogNi4gIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXG4gKiA3LiAgRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cbiAqIDguICBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cbiAqIDkuICBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXG4gKiAgICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqIDEwLiBSZXdyaXRlIHRoZSBjYW5vbmljYWwgSURzIHRvIHRoZSBleHBsaWNpdCBQcm90b2J1Zi1iYXNlZCBmb3JtYXQuXG4gKiAxMS4gQWRkIGJ1bmRsZXMgYW5kIG5hbWVkX3F1ZXJpZXMgZm9yIGJ1bmRsZSBzdXBwb3J0LlxuICogMTIuIEFkZCBkb2N1bWVudCBvdmVybGF5cy5cbiAqIDEzLiBSZXdyaXRlIHRoZSBrZXlzIG9mIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgdG8gYWxsb3cgZm9yIGVmZmljaWVudFxuICogICAgIGRvY3VtZW50IGxvb2t1cCB2aWEgYGdldEFsbCgpYC5cbiAqIDE0LiBBZGQgb3ZlcmxheXMuXG4gKiAxNS4gQWRkIGluZGV4aW5nIHN1cHBvcnQuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbCB2aWV3IChvdmVybGF5KSBvZiBhIGRvY3VtZW50LCBhbmQgdGhlIGZpZWxkcyB0aGF0IGFyZVxuICogbG9jYWxseSBtdXRhdGVkLlxuICovXG5jbGFzcyBObyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkcyB0aGF0IGFyZSBsb2NhbGx5IG11dGF0ZWQgYnkgcGF0Y2ggbXV0YXRpb25zLlxuICAgICAqXG4gICAgICogSWYgdGhlIG92ZXJsYXllZFx0ZG9jdW1lbnQgaXMgZnJvbSBzZXQgb3IgZGVsZXRlIG11dGF0aW9ucywgdGhpcyBpcyBgbnVsbGAuXG4gICAgICogSWYgdGhlcmUgaXMgbm8gb3ZlcmxheSAobXV0YXRpb24pIGZvciB0aGUgZG9jdW1lbnQsIHRoaXMgaXMgYW4gZW1wdHkgYEZpZWxkTWFza2AuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLm92ZXJsYXllZERvY3VtZW50ID0gdCwgdGhpcy5tdXRhdGVkRmllbGRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVhZG9ubHkgdmlldyBvZiB0aGUgbG9jYWwgc3RhdGUgb2YgYWxsIGRvY3VtZW50cyB3ZSdyZSB0cmFja2luZyAoaS5lLiB3ZVxuICogaGF2ZSBhIGNhY2hlZCB2ZXJzaW9uIGluIHJlbW90ZURvY3VtZW50Q2FjaGUgb3IgbG9jYWwgbXV0YXRpb25zIGZvciB0aGVcbiAqIGRvY3VtZW50KS4gVGhlIHZpZXcgaXMgY29tcHV0ZWQgYnkgYXBwbHlpbmcgdGhlIG11dGF0aW9ucyBpbiB0aGVcbiAqIE11dGF0aW9uUXVldWUgdG8gdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi8gY2xhc3Mga28ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gdCwgdGhpcy5tdXRhdGlvblF1ZXVlID0gZSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSA9IG4sIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXG4gICAgICogc3RhdGUgZm9yIGl0LlxuICAgICAqLyAgICBnZXREb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheSh0LCBlKS5uZXh0KChzID0+IChuID0gcywgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KHQsIGUpKSkpLm5leHQoKHQgPT4gKG51bGwgIT09IG4gJiYgS3Mobi5tdXRhdGlvbiwgdCwgUmUuZW1wdHkoKSwgaXQubm93KCkpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGlkZW50aWZpZWQgYnkgYGtleXNgLlxuICAgICAqXG4gICAgICogSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc3RhdGUgZm9yIGEgZG9jdW1lbnQgaW4gYGtleXNgLCBhIE5vRG9jdW1lbnQgd2lsbFxuICAgICAqIGJlIHN0b3JlZCBmb3IgdGhhdCBrZXkgaW4gdGhlIHJlc3VsdGluZyBzZXQuXG4gICAgICovICAgIGdldERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyh0LCBlKS5uZXh0KChlID0+IHRoaXMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHModCwgZSwgZ3MoKSkubmV4dCgoKCkgPT4gZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8gYGdldERvY3VtZW50c2AsIGJ1dCBjcmVhdGVzIHRoZSBsb2NhbCB2aWV3IGZyb20gdGhlIGdpdmVuXG4gICAgICogYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzIGZyb20gdGhlIGxvY2FsIHN0b3JlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIHRoaXMgb3BlcmF0aW9uIGlzIHNjb3BlZCB0by5cbiAgICAgKiBAcGFyYW0gZG9jcyAtIFRoZSBkb2N1bWVudHMgdG8gYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIGdldCB0aGUgbG9jYWwgdmlld3MuXG4gICAgICogQHBhcmFtIGV4aXN0ZW5jZVN0YXRlQ2hhbmdlZCAtIFRoZSBzZXQgb2YgZG9jdW1lbnQga2V5cyB3aG9zZSBleGlzdGVuY2Ugc3RhdGVcbiAgICAgKiAgIGlzIGNoYW5nZWQuIFRoaXMgaXMgdXNlZnVsIHRvIGRldGVybWluZSBpZiBzb21lIGRvY3VtZW50cyBvdmVybGF5IG5lZWRzXG4gICAgICogICB0byBiZSByZWNhbGN1bGF0ZWQuXG4gICAgICovICAgIGdldExvY2FsVmlld09mRG9jdW1lbnRzKHQsIGUsIG4gPSBncygpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBmcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKHQsIHMsIGUpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKHQsIGUsIHMsIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbGV0IGUgPSBocygpO1xuICAgICAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlID0gZS5pbnNlcnQodCwgbi5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICB9KSksIGU7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvdmVybGF5ZWQgZG9jdW1lbnRzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQgbWFwLCB3aGljaCB3aWxsIGluY2x1ZGVcbiAgICAgKiB0aGUgbG9jYWwgdmlldyBvZiB0aG9zZSBkb2N1bWVudHMgYW5kIGEgYEZpZWxkTWFza2AgaW5kaWNhdGluZyB3aGljaCBmaWVsZHNcbiAgICAgKiBhcmUgbXV0YXRlZCBsb2NhbGx5LCBgbnVsbGAgaWYgb3ZlcmxheSBpcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24uXG4gICAgICovICAgIGdldE92ZXJsYXllZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKHQsIG4sIGUpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKHQsIGUsIG4sIGdzKCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIG92ZXJsYXlzIGZvciB7QGNvZGUgZG9jc30gYW5kIGFkZHMgdGhlbSB0byBwcm92aWRlZCBvdmVybGF5IG1hcFxuICAgICAqIGlmIHRoZSBtYXAgZG9lcyBub3QgYWxyZWFkeSBjb250YWluIGFuIGVudHJ5IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5LlxuICAgICAqLyAgICBwb3B1bGF0ZU92ZXJsYXlzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUuaGFzKHQpIHx8IHMucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGUuc2V0KHQsIG4pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3MgLSBUaGUgZG9jdW1lbnRzIHRvIGNvbXB1dGUgdmlld3MgZm9yLiBJdCBhbHNvIGhhcyB0aGUgYmFzZVxuICAgICAqICAgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvdmVybGF5cyAtIFRoZSBvdmVybGF5cyB0aGF0IG5lZWQgdG8gYmUgYXBwbGllZCB0byB0aGUgZ2l2ZW4gYmFzZVxuICAgICAqICAgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBleGlzdGVuY2VTdGF0ZUNoYW5nZWQgLSBBIHNldCBvZiBkb2N1bWVudHMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlc1xuICAgICAqICAgbWlnaHQgaGF2ZSBjaGFuZ2VkLiBUaGlzIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHdlIG5lZWQgdG8gcmUtY2FsY3VsYXRlXG4gICAgICogICBvdmVybGF5cyBmcm9tIG11dGF0aW9uIHF1ZXVlcy5cbiAgICAgKiBAcmV0dXJuIEEgbWFwIHJlcHJlc2VudHMgdGhlIGxvY2FsIGRvY3VtZW50cyB2aWV3LlxuICAgICAqLyAgICBjb21wdXRlVmlld3ModCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGNzKCk7XG4gICAgICAgIGNvbnN0IHIgPSB3cygpLCBvID0gd3MoKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBuLmdldChlLmtleSk7XG4gICAgICAgICAgICAvLyBSZWNhbGN1bGF0ZSBhbiBvdmVybGF5IGlmIHRoZSBkb2N1bWVudCdzIGV4aXN0ZW5jZSBzdGF0ZSBjaGFuZ2VkIGR1ZSB0b1xuICAgICAgICAgICAgLy8gYSByZW1vdGUgZXZlbnQgKmFuZCogdGhlIG92ZXJsYXkgaXMgYSBQYXRjaE11dGF0aW9uLiBUaGlzIGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGV4aXN0ZW5jZSBzdGF0ZSBjYW4gY2hhbmdlIGlmIHNvbWUgcGF0Y2ggbXV0YXRpb24nc1xuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9ucyBhcmUgbWV0LlxuICAgICAgICAgICAgLy8gTk9URTogd2UgcmVjYWxjdWxhdGUgd2hlbiBgb3ZlcmxheWAgaXMgdW5kZWZpbmVkIGFzIHdlbGwsIGJlY2F1c2UgdGhlcmVcbiAgICAgICAgICAgIC8vIG1pZ2h0IGJlIGEgcGF0Y2ggbXV0YXRpb24gd2hvc2UgcHJlY29uZGl0aW9uIGRvZXMgbm90IG1hdGNoIGJlZm9yZSB0aGVcbiAgICAgICAgICAgIC8vIGNoYW5nZSAoaGVuY2Ugb3ZlcmxheSBpcyB1bmRlZmluZWQpLCBidXQgd291bGQgbm93IG1hdGNoLlxuICAgICAgICAgICAgICAgICAgICAgICAgcy5oYXMoZS5rZXkpICYmICh2b2lkIDAgPT09IG8gfHwgby5tdXRhdGlvbiBpbnN0YW5jZW9mIHpzKSA/IGkgPSBpLmluc2VydChlLmtleSwgZSkgOiB2b2lkIDAgIT09IG8gPyAoci5zZXQoZS5rZXksIG8ubXV0YXRpb24uZ2V0RmllbGRNYXNrKCkpLCBcbiAgICAgICAgICAgIEtzKG8ubXV0YXRpb24sIGUsIG8ubXV0YXRpb24uZ2V0RmllbGRNYXNrKCksIGl0Lm5vdygpKSkgOiBcbiAgICAgICAgICAgIC8vIG5vIG92ZXJsYXkgZXhpc3RzXG4gICAgICAgICAgICAvLyBVc2luZyBFTVBUWSB0byBpbmRpY2F0ZSB0aGVyZSBpcyBubyBvdmVybGF5IGZvciB0aGUgZG9jdW1lbnQuXG4gICAgICAgICAgICByLnNldChlLmtleSwgUmUuZW1wdHkoKSk7XG4gICAgICAgIH0pKSwgdGhpcy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyh0LCBpKS5uZXh0KCh0ID0+ICh0LmZvckVhY2goKCh0LCBlKSA9PiByLnNldCh0LCBlKSkpLCBcbiAgICAgICAgZS5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICByZXR1cm4gby5zZXQodCwgbmV3IE5vKGUsIG51bGwgIT09IChuID0gci5nZXQodCkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsKSk7XG4gICAgICAgIH0pKSwgbykpKTtcbiAgICB9XG4gICAgcmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gd3MoKTtcbiAgICAgICAgLy8gQSByZXZlcnNlIGxvb2t1cCBtYXAgZnJvbSBiYXRjaCBpZCB0byB0aGUgZG9jdW1lbnRzIHdpdGhpbiB0aGF0IGJhdGNoLlxuICAgICAgICAgICAgICAgIGxldCBzID0gbmV3IHBlKCgodCwgZSkgPT4gdCAtIGUpKSwgaSA9IGdzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHQpIGkua2V5cygpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBlLmdldCh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gcikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGxldCBvID0gbi5nZXQodCkgfHwgUmUuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBvID0gaS5hcHBseVRvTG9jYWxWaWV3KHIsIG8pLCBuLnNldCh0LCBvKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1ID0gKHMuZ2V0KGkuYmF0Y2hJZCkgfHwgZ3MoKSkuYWRkKHQpO1xuICAgICAgICAgICAgICAgIHMgPSBzLmluc2VydChpLmJhdGNoSWQsIHUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IFtdLCBvID0gcy5nZXRSZXZlcnNlSXRlcmF0b3IoKTtcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgaW4gZGVzY2VuZGluZyBvcmRlciBvZiBiYXRjaCBJRHMsIGFuZCBza2lwIGRvY3VtZW50cyB0aGF0IGFyZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBzYXZlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO28uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gby5nZXROZXh0KCksIHUgPSBzLmtleSwgYyA9IHMudmFsdWUsIGEgPSBkcygpO1xuICAgICAgICAgICAgICAgIGMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaS5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBxcyhlLmdldCh0KSwgbi5nZXQodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiBhLnNldCh0LCBzKSwgaSA9IGkuYWRkKHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpLCByLnB1c2godGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5zYXZlT3ZlcmxheXModCwgdSwgYSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJ0LndhaXRGb3Iocik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY2FsY3VsYXRlcyBvdmVybGF5cyBieSByZWFkaW5nIHRoZSBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGVcbiAgICAgKiBmaXJzdCwgYW5kIHNhdmVzIHRoZW0gYWZ0ZXIgdGhleSBhcmUgY2FsY3VsYXRlZC5cbiAgICAgKi8gICAgcmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXModCwgZSkubmV4dCgoZSA9PiB0aGlzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgdmlldyBvZiBhbGwgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB0byBtYXRjaCBkb2N1bWVudHMgYWdhaW5zdC5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gUmVhZCB0aW1lIGFuZCBrZXkgdG8gc3RhcnQgc2Nhbm5pbmcgYnkgKGV4Y2x1c2l2ZSkuXG4gICAgICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICAvKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIHNpbmdsZSBkb2N1bWVudCBieSBwYXRoIChyYXRoZXIgdGhhbiBhXG4gKiBjb2xsZWN0aW9uKS5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGh0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSAmJiBudWxsID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSB0LmZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB9KGUpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkodCwgZS5wYXRoKSA6IFduKGUpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQsIGUsIG4pIDogdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSh0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBjb2xsZWN0aW9uIGdyb3VwLCByZXR1cm5zIHRoZSBuZXh0IGRvY3VtZW50cyB0aGF0IGZvbGxvdyB0aGUgcHJvdmlkZWQgb2Zmc2V0LCBhbG9uZ1xuICAgICAqIHdpdGggYW4gdXBkYXRlZCBiYXRjaCBJRC5cbiAgICAgKlxuICAgICAqIDxwPlRoZSBkb2N1bWVudHMgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgYXJlIG9yZGVyZWQgYnkgcmVtb3RlIHZlcnNpb24gZnJvbSB0aGUgcHJvdmlkZWRcbiAgICAgKiBvZmZzZXQuIElmIHRoZXJlIGFyZSBubyBtb3JlIHJlbW90ZSBkb2N1bWVudHMgYWZ0ZXIgdGhlIHByb3ZpZGVkIG9mZnNldCwgZG9jdW1lbnRzIHdpdGhcbiAgICAgKiBtdXRhdGlvbnMgaW4gb3JkZXIgb2YgYmF0Y2ggaWQgZnJvbSB0aGUgb2Zmc2V0IGFyZSByZXR1cm5lZC4gU2luY2UgYWxsIGRvY3VtZW50cyBpbiBhIGJhdGNoIGFyZVxuICAgICAqIHJldHVybmVkIHRvZ2V0aGVyLCB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZCBjYW4gZXhjZWVkIHtAY29kZSBjb3VudH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25cbiAgICAgKiBAcGFyYW0gY29sbGVjdGlvbkdyb3VwIFRoZSBjb2xsZWN0aW9uIGdyb3VwIGZvciB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIG9mZnNldCB0byBpbmRleCBpbnRvLlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXR1cm5cbiAgICAgKiBAcmV0dXJuIEEgTG9jYWxXcml0ZVJlc3VsdCB3aXRoIHRoZSBkb2N1bWVudHMgdGhhdCBmb2xsb3cgdGhlIHByb3ZpZGVkIG9mZnNldCBhbmQgdGhlIGxhc3QgcHJvY2Vzc2VkIGJhdGNoIGlkLlxuICAgICAqLyAgICBnZXROZXh0RG9jdW1lbnRzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4sIHMpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHMgLSBpLnNpemUgPiAwID8gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLmxhcmdlc3RCYXRjaElkLCBzIC0gaS5zaXplKSA6IFJ0LnJlc29sdmUoZnMoKSk7XG4gICAgICAgICAgICAvLyBUaGUgY2FsbHNpdGUgd2lsbCB1c2UgdGhlIGxhcmdlc3QgYmF0Y2ggSUQgdG9nZXRoZXIgd2l0aCB0aGUgbGF0ZXN0IHJlYWQgdGltZSB0byBjcmVhdGVcbiAgICAgICAgICAgIC8vIGEgbmV3IGluZGV4IG9mZnNldC4gU2luY2Ugd2Ugb25seSBwcm9jZXNzIGJhdGNoIElEcyBpZiBhbGwgcmVtb3RlIGRvY3VtZW50cyBoYXZlIGJlZW4gcmVhZCxcbiAgICAgICAgICAgIC8vIG5vIG92ZXJsYXkgd2lsbCBpbmNyZWFzZSB0aGUgb3ZlcmFsbCByZWFkIHRpbWUuIFRoaXMgaXMgd2h5IHdlIG9ubHkgbmVlZCB0byBzcGVjaWFsIGNhc2VcbiAgICAgICAgICAgIC8vIHRoZSBiYXRjaCBpZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvID0gLTEsIHUgPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHIubmV4dCgoZSA9PiBSdC5mb3JFYWNoKGUsICgoZSwgbikgPT4gKG8gPCBuLmxhcmdlc3RCYXRjaElkICYmIChvID0gbi5sYXJnZXN0QmF0Y2hJZCksIFxuICAgICAgICAgICAgaS5nZXQoZSkgPyBSdC5yZXNvbHZlKCkgOiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdSA9IHUuaW5zZXJ0KGUsIHQpO1xuICAgICAgICAgICAgfSkpKSkpLm5leHQoKCgpID0+IHRoaXMucG9wdWxhdGVPdmVybGF5cyh0LCBlLCBpKSkpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKHQsIHUsIGUsIGdzKCkpKSkubmV4dCgodCA9PiAoe1xuICAgICAgICAgICAgICAgIGJhdGNoSWQ6IG8sXG4gICAgICAgICAgICAgICAgY2hhbmdlczogbHModClcbiAgICAgICAgICAgIH0pKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkodCwgZSkge1xuICAgICAgICAvLyBKdXN0IGRvIGEgc2ltcGxlIGRvY3VtZW50IGxvb2t1cC5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnQodCwgbmV3IGh0KGUpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGxldCBlID0gaHMoKTtcbiAgICAgICAgICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpICYmIChlID0gZS5pbnNlcnQodC5rZXksIHQpKSwgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGUuY29sbGVjdGlvbkdyb3VwO1xuICAgICAgICBsZXQgaSA9IGhzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlci5nZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBzKS5uZXh0KChyID0+IFJ0LmZvckVhY2gociwgKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVuKGUsIFxuICAgICAgICAgICAgICAgIC8qY29sbGVjdGlvbkdyb3VwPSovIG51bGwsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgICAgIH0oZSwgci5jaGlsZChzKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSh0LCBvLCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBpLmluc2VydCh0LCBlKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSkpKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkodCwgZSwgbikge1xuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24odCwgZS5wYXRoLCBuLmxhcmdlc3RCYXRjaElkKS5uZXh0KChpID0+IChzID0gaSwgXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4sIHMpKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgLy8gQXMgZG9jdW1lbnRzIG1pZ2h0IG1hdGNoIHRoZSBxdWVyeSBiZWNhdXNlIG9mIHRoZWlyIG92ZXJsYXkgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gaW5jbHVkZSBkb2N1bWVudHMgZm9yIGFsbCBvdmVybGF5cyBpbiB0aGUgaW5pdGlhbCBkb2N1bWVudCBzZXQuXG4gICAgICAgICAgICBzLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4uZ2V0S2V5KCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdC5nZXQocykgJiYgKHQgPSB0Lmluc2VydChzLCBhbi5uZXdJbnZhbGlkRG9jdW1lbnQocykpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBvdmVybGF5cyBhbmQgbWF0Y2ggYWdhaW5zdCB0aGUgcXVlcnkuXG4gICAgICAgICAgICBsZXQgbiA9IGhzKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBzLmdldCh0KTtcbiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHIgJiYgS3Moci5tdXRhdGlvbiwgaSwgUmUuZW1wdHkoKSwgaXQubm93KCkpLCBcbiAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBpbnNlcnQgdGhlIGRvY3VtZW50cyB0aGF0IHN0aWxsIG1hdGNoIHRoZSBxdWVyeVxuICAgICAgICAgICAgICAgIG5zKGUsIGkpICYmIChuID0gbi5pbnNlcnQodCwgaSkpO1xuICAgICAgICAgICAgfSkpLCBuO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBNbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSB0LCB0aGlzLmNzID0gbmV3IE1hcCwgdGhpcy5ocyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldEJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5jcy5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICAvKiogRGVjb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHByb3RvIGludG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgIHZhciBuO1xuICAgICAgICByZXR1cm4gdGhpcy5jcy5zZXQoZS5pZCwge1xuICAgICAgICAgICAgaWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICB2ZXJzaW9uOiBuLnZlcnNpb24sXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiBOaShuLmNyZWF0ZVRpbWUpXG4gICAgICAgIH0pLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLmhzLmdldChlKSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHMuc2V0KGUubmFtZSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHlyKHQuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogTmkodC5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUuXG4gKi8gY2xhc3MgJG8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcCBzb3J0ZWQgYnkgRG9jdW1lbnRLZXksIHdob3NlIHZhbHVlIGlzIGEgcGFpciBvZiB0aGUgbGFyZ2VzdCBiYXRjaCBpZFxuICAgICAgICAvLyBmb3IgdGhlIG92ZXJsYXkgYW5kIHRoZSBvdmVybGF5IGl0c2VsZi5cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IG5ldyBwZShodC5jb21wYXJhdG9yKSwgdGhpcy5scyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldE92ZXJsYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLm92ZXJsYXlzLmdldChlKSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGZzKCk7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKGUsIChlID0+IHRoaXMuZ2V0T3ZlcmxheSh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIG51bGwgIT09IHQgJiYgbi5zZXQoZSwgdCk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2UodCwgZSwgcyk7XG4gICAgICAgIH0pKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5scy5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHMgJiYgKHMuZm9yRWFjaCgodCA9PiB0aGlzLm92ZXJsYXlzID0gdGhpcy5vdmVybGF5cy5yZW1vdmUodCkpKSwgXG4gICAgICAgIHRoaXMubHMuZGVsZXRlKG4pKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZnMoKSwgaSA9IGUubGVuZ3RoICsgMSwgciA9IG5ldyBodChlLmNoaWxkKFwiXCIpKSwgbyA9IHRoaXMub3ZlcmxheXMuZ2V0SXRlcmF0b3JGcm9tKHIpO1xuICAgICAgICBmb3IgKDtvLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gby5nZXROZXh0KCkudmFsdWUsIHIgPSB0LmdldEtleSgpO1xuICAgICAgICAgICAgaWYgKCFlLmlzUHJlZml4T2Yoci5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICAvLyBEb2N1bWVudHMgZnJvbSBzdWItY29sbGVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHIucGF0aC5sZW5ndGggPT09IGkgJiYgKHQubGFyZ2VzdEJhdGNoSWQgPiBuICYmIHMuc2V0KHQuZ2V0S2V5KCksIHQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShzKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IG5ldyBwZSgoKHQsIGUpID0+IHQgLSBlKSk7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm92ZXJsYXlzLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO3IuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSByLmdldE5leHQoKS52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0LmdldEtleSgpLmdldENvbGxlY3Rpb25Hcm91cCgpID09PSBlICYmIHQubGFyZ2VzdEJhdGNoSWQgPiBuKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBpLmdldCh0Lmxhcmdlc3RCYXRjaElkKTtcbiAgICAgICAgICAgICAgICBudWxsID09PSBlICYmIChlID0gZnMoKSwgaSA9IGkuaW5zZXJ0KHQubGFyZ2VzdEJhdGNoSWQsIGUpKSwgZS5zZXQodC5nZXRLZXkoKSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbyA9IGZzKCksIHUgPSBpLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO3UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGlmICh1LmdldE5leHQoKS52YWx1ZS5mb3JFYWNoKCgodCwgZSkgPT4gby5zZXQodCwgZSkpKSwgby5zaXplKCkgPj0gcykgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobyk7XG4gICAgfVxuICAgIHdlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGUgb3ZlcmxheSB0byBpdHMgYmF0Y2ggaWQuXG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLm92ZXJsYXlzLmdldChuLmtleSk7XG4gICAgICAgIGlmIChudWxsICE9PSBzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5scy5nZXQocy5sYXJnZXN0QmF0Y2hJZCkuZGVsZXRlKG4ua2V5KTtcbiAgICAgICAgICAgIHRoaXMubHMuc2V0KHMubGFyZ2VzdEJhdGNoSWQsIHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLmluc2VydChuLmtleSwgbmV3IGVpKGUsIG4pKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGlzIG92ZXJsYXkgdG8gdGhlIGdpdmVuIGxhcmdlc3RCYXRjaElkLlxuICAgICAgICBsZXQgaSA9IHRoaXMubHMuZ2V0KGUpO1xuICAgICAgICB2b2lkIDAgPT09IGkgJiYgKGkgPSBncygpLCB0aGlzLmxzLnNldChlLCBpKSksIHRoaXMubHMuc2V0KGUsIGkuYWRkKG4ua2V5KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbGxlY3Rpb24gb2YgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IGZyb20gc29tZSBraW5kIG9mIG51bWJlcmVkIGVudGl0eVxuICogKGVpdGhlciBhIHRhcmdldCBJRCBvciBiYXRjaCBJRCkuIEFzIHJlZmVyZW5jZXMgYXJlIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbVxuICogdGhlIHNldCBjb3JyZXNwb25kaW5nIGV2ZW50cyBhcmUgZW1pdHRlZCB0byBhIHJlZ2lzdGVyZWQgZ2FyYmFnZSBjb2xsZWN0b3IuXG4gKlxuICogRWFjaCByZWZlcmVuY2UgaXMgcmVwcmVzZW50ZWQgYnkgYSBEb2N1bWVudFJlZmVyZW5jZSBvYmplY3QuIEVhY2ggb2YgdGhlbVxuICogY29udGFpbnMgZW5vdWdoIGluZm9ybWF0aW9uIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoZSByZWZlcmVuY2UuIFRoZXkgYXJlIGFsbFxuICogc3RvcmVkIHByaW1hcmlseSBpbiBhIHNldCBzb3J0ZWQgYnkga2V5LiBBIGRvY3VtZW50IGlzIGNvbnNpZGVyZWQgZ2FyYmFnZSBpZlxuICogdGhlcmUncyBubyByZWZlcmVuY2VzIGluIHRoYXQgc2V0ICh0aGlzIGNhbiBiZSBlZmZpY2llbnRseSBjaGVja2VkIHRoYW5rcyB0b1xuICogc29ydGluZyBieSBrZXkpLlxuICpcbiAqIFJlZmVyZW5jZVNldCBhbHNvIGtlZXBzIGEgc2Vjb25kYXJ5IHNldCB0aGF0IGNvbnRhaW5zIHJlZmVyZW5jZXMgc29ydGVkIGJ5XG4gKiBJRHMuIFRoaXMgb25lIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgaW1wbGVtZW50IHJlbW92YWwgb2YgYWxsIHJlZmVyZW5jZXMgYnlcbiAqIHNvbWUgdGFyZ2V0IElELlxuICovIGNsYXNzIE9vIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSBrZXkuXG4gICAgICAgIHRoaXMuZnMgPSBuZXcgRWUoRm8uZHMpLCBcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXG4gICAgICAgIHRoaXMud3MgPSBuZXcgRWUoRm8uX3MpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBhZGRSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IEZvKHQsIGUpO1xuICAgICAgICB0aGlzLmZzID0gdGhpcy5mcy5hZGQobiksIHRoaXMud3MgPSB0aGlzLndzLmFkZChuKTtcbiAgICB9XG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIGdzKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMuYWRkUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXG4gICAgICogSUQuXG4gICAgICovICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlKSB7XG4gICAgICAgIHRoaXMueXMobmV3IEZvKHQsIGUpKTtcbiAgICB9XG4gICAgcHModCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy5yZW1vdmVSZWZlcmVuY2UodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCByZWZlcmVuY2VzIHdpdGggYSBnaXZlbiBJRC4gQ2FsbHMgcmVtb3ZlUmVmKCkgZm9yIGVhY2gga2V5XG4gICAgICogcmVtb3ZlZC5cbiAgICAgKi8gICAgSXModCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IGh0KG5ldyB1dChbXSkpLCBuID0gbmV3IEZvKGUsIHQpLCBzID0gbmV3IEZvKGUsIHQgKyAxKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy53cy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy55cyh0KSwgaS5wdXNoKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBUcygpIHtcbiAgICAgICAgdGhpcy5mcy5mb3JFYWNoKCh0ID0+IHRoaXMueXModCkpKTtcbiAgICB9XG4gICAgeXModCkge1xuICAgICAgICB0aGlzLmZzID0gdGhpcy5mcy5kZWxldGUodCksIHRoaXMud3MgPSB0aGlzLndzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgRXModCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IGh0KG5ldyB1dChbXSkpLCBuID0gbmV3IEZvKGUsIHQpLCBzID0gbmV3IEZvKGUsIHQgKyAxKTtcbiAgICAgICAgbGV0IGkgPSBncygpO1xuICAgICAgICByZXR1cm4gdGhpcy53cy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRm8odCwgMCksIG4gPSB0aGlzLmZzLmZpcnN0QWZ0ZXJPckVxdWFsKGUpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiB0LmlzRXF1YWwobi5rZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgRm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLkFzID0gZTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkga2V5IHRoZW4gYnkgSUQgKi8gICAgc3RhdGljIGRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSB8fCBldCh0LkFzLCBlLkFzKTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkgSUQgdGhlbiBieSBrZXkgKi8gICAgc3RhdGljIF9zKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGV0KHQuQXMsIGUuQXMpIHx8IGh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEJvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gW10sIFxuICAgICAgICAvKiogTmV4dCB2YWx1ZSB0byB1c2Ugd2hlbiBhc3NpZ25pbmcgc2VxdWVudGlhbCBJRHMgdG8gZWFjaCBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgdGhpcy52cyA9IDEsIFxuICAgICAgICAvKiogQW4gb3JkZXJlZCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgbXV0YXRpb25zIGJhdGNoIElEcy4gKi9cbiAgICAgICAgdGhpcy5ScyA9IG5ldyBFZShGby5kcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZzO1xuICAgICAgICB0aGlzLnZzKyssIHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMubXV0YXRpb25RdWV1ZVt0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgWnMoaSwgZSwgbiwgcyk7XG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5wdXNoKHIpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcykgdGhpcy5ScyA9IHRoaXMuUnMuYWRkKG5ldyBGbyhlLmtleSwgaSkpLCB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlLmtleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHIpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5QcyhlKSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gdGhpcy5icyhuKSwgaSA9IHMgPCAwID8gMCA6IHM7XG4gICAgICAgIC8vIFRoZSByZXF1ZXN0ZWQgYmF0Y2hJZCBtYXkgc3RpbGwgYmUgb3V0IG9mIHJhbmdlIHNvIG5vcm1hbGl6ZSBpdCB0byB0aGVcbiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiBpID8gdGhpcy5tdXRhdGlvblF1ZXVlW2ldIDogbnVsbCk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPyAtMSA6IHRoaXMudnMgLSAxKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLnNsaWNlKCkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRm8oZSwgMCksIHMgPSBuZXcgRm8oZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Scy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuUHModC5Bcyk7XG4gICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgIH0pKSwgUnQucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgRWUoZXQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRm8odCwgMCksIHMgPSBuZXcgRm8odCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMuUnMuZm9yRWFjaEluUmFuZ2UoWyBlLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQodC5Bcyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgUnQucmVzb2x2ZSh0aGlzLlZzKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBodC5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgRm8obmV3IGh0KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBFZShldCk7XG4gICAgICAgIHJldHVybiB0aGlzLlJzLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZihlKSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgZS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZCh0LkFzKSksICEwKTtcbiAgICAgICAgfSksIHIpLCBSdC5yZXNvbHZlKHRoaXMuVnMobykpO1xuICAgIH1cbiAgICBWcyh0KSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLlBzKHQpO1xuICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIEYoMCA9PT0gdGhpcy5TcyhlLmJhdGNoSWQsIFwicmVtb3ZlZFwiKSksIHRoaXMubXV0YXRpb25RdWV1ZS5zaGlmdCgpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuUnM7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKGUubXV0YXRpb25zLCAocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IEZvKHMua2V5LCBlLmJhdGNoSWQpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPSBuLmRlbGV0ZShpKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBzLmtleSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlJzID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBDbih0KSB7XG4gICAgICAgIC8vIE5vLW9wIHNpbmNlIHRoZSBtZW1vcnkgbXV0YXRpb24gcXVldWUgZG9lcyBub3QgbWFpbnRhaW4gYSBzZXBhcmF0ZSBjYWNoZS5cbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IEZvKGUsIDApLCBzID0gdGhpcy5Scy5maXJzdEFmdGVyT3JFcXVhbChuKTtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoZS5pc0VxdWFsKHMgJiYgcy5rZXkpKTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcbiAgICAgKiB0aGUgcmVzdWx0aW5nIGluZGV4IGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIGJhdGNoSWQgdG8gc2VhcmNoIGZvclxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGNhbGxlciBpcyBkb2luZywgcGhyYXNlZCBpbiBwYXNzaXZlXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cbiAgICAgKi8gICAgU3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5icyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZS4gVGhpcyBvcGVyYXRpb25cbiAgICAgKiBpcyBPKDEpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNvbXB1dGVkIGluZGV4IG9mIHRoZSBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLCBiYXNlZCBvblxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxuICAgICAqIGJhdGNoSWQgaGFzIGFscmVhZHkgYmVlbiByZW12b2VkIGZyb20gdGhlIHF1ZXVlIG9yIHBhc3QgdGhlIGVuZCBvZiB0aGVcbiAgICAgKiBxdWV1ZSBpZiB0aGUgYmF0Y2hJZCBpcyBsYXJnZXIgdGhhbiB0aGUgbGFzdCBhZGRlZCBiYXRjaC5cbiAgICAgKi8gICAgYnModCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgLSB0aGlzLm11dGF0aW9uUXVldWVbMF0uYmF0Y2hJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cbiAgICAgKi8gICAgUHModCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5icyh0KTtcbiAgICAgICAgaWYgKGUgPCAwIHx8IGUgPj0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVbZV07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIExvIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAgICAgKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAgICAgKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuRHMgPSB0LCBcbiAgICAgICAgLyoqIFVuZGVybHlpbmcgY2FjaGUgb2YgZG9jdW1lbnRzIGFuZCB0aGVpciByZWFkIHRpbWVzLiAqL1xuICAgICAgICB0aGlzLmRvY3MgPSBuZXcgcGUoaHQuY29tcGFyYXRvciksIFxuICAgICAgICAvKiogU2l6ZSBvZiBhbGwgY2FjaGVkIGRvY3VtZW50cy4gKi9cbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgc2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyeSB0byB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5rZXksIHMgPSB0aGlzLmRvY3MuZ2V0KG4pLCBpID0gcyA/IHMuc2l6ZSA6IDAsIHIgPSB0aGlzLkRzKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NzID0gdGhpcy5kb2NzLmluc2VydChuLCB7XG4gICAgICAgICAgICBkb2N1bWVudDogZS5tdXRhYmxlQ29weSgpLFxuICAgICAgICAgICAgc2l6ZTogclxuICAgICAgICB9KSwgdGhpcy5zaXplICs9IHIgLSBpLCB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBuLnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgZSAmJiAodGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZSh0KSwgdGhpcy5zaXplIC09IGUuc2l6ZSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKG4gPyBuLmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBhbi5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBjcygpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGUgPyBlLmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBhbi5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgICAgICB9KSksIFJ0LnJlc29sdmUobik7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGNzKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGUucGF0aCwgbyA9IG5ldyBodChyLmNoaWxkKFwiXCIpKSwgdSA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20obyk7XG4gICAgICAgIGZvciAoO3UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHtrZXk6IHQsIHZhbHVlOiB7ZG9jdW1lbnQ6IG99fSA9IHUuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFyLmlzUHJlZml4T2YodC5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICB0LnBhdGgubGVuZ3RoID4gci5sZW5ndGggKyAxIHx8IChUdChwdChvKSwgbikgPD0gMCB8fCAocy5oYXMoby5rZXkpIHx8IG5zKGUsIG8pKSAmJiAoaSA9IGkuaW5zZXJ0KG8ua2V5LCBvLm11dGFibGVDb3B5KCkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB0aGUgSW5kZXhCYWNrZmlsbGVyIGlmIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIGlzIGVuYWJsZWQuXG4gICAgICAgIE8oKTtcbiAgICB9XG4gICAgQ3ModCwgZSkge1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaCh0aGlzLmRvY3MsICh0ID0+IGUodCkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgLy8gYHRyYWNrUmVtb3ZhbHNgIGlzIGlnbm9yZXMgc2luY2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUga2VlcHNcbiAgICAgICAgLy8gYSBzZXBhcmF0ZSBjaGFuZ2Vsb2cgYW5kIGRvZXMgbm90IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgcmVtb3ZhbHMuXG4gICAgICAgIHJldHVybiBuZXcgcW8odGhpcyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLnNpemUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi9cbmNsYXNzIHFvIGV4dGVuZHMgdm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5vcyA9IHQ7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5pc1ZhbGlkRG9jdW1lbnQoKSA/IGUucHVzaCh0aGlzLm9zLmFkZEVudHJ5KHQsIHMpKSA6IHRoaXMub3MucmVtb3ZlRW50cnkobik7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3MuZ2V0RW50cnkodCwgZSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9zLmdldEVudHJpZXModCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBVbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0IHRvIHRoZSBkYXRhIGFib3V0IHRoYXQgdGFyZ2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnhzID0gbmV3IG9zKCh0ID0+ICRuKHQpKSwgT24pLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlY2VpdmVkIHNuYXBzaG90IHZlcnNpb24uICovXG4gICAgICAgIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IHJ0Lm1pbigpLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBJRCBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSAwLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IHNlcXVlbmNlIG51bWJlciBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5OcyA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvcmRlcmVkIGJpZGlyZWN0aW9uYWwgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIHJlbW90ZSB0YXJnZXRcbiAgICAgICAgICogSURzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rcyA9IG5ldyBPbywgdGhpcy50YXJnZXRDb3VudCA9IDAsIHRoaXMuTXMgPSBsby5rbigpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuZm9yRWFjaCgoKHQsIG4pID0+IGUobikpKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5Ocyk7XG4gICAgfVxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0aGlzLk1zLm5leHQoKSwgUnQucmVzb2x2ZSh0aGlzLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuICYmICh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuKSwgZSA+IHRoaXMuTnMgJiYgKHRoaXMuTnMgPSBlKSwgXG4gICAgICAgIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgRm4odCkge1xuICAgICAgICB0aGlzLnhzLnNldCh0LnRhcmdldCwgdCk7XG4gICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldElkO1xuICAgICAgICBlID4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgJiYgKHRoaXMuTXMgPSBuZXcgbG8oZSksIHRoaXMuaGlnaGVzdFRhcmdldElkID0gZSksIHQuc2VxdWVuY2VOdW1iZXIgPiB0aGlzLk5zICYmICh0aGlzLk5zID0gdC5zZXF1ZW5jZU51bWJlcik7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5GbihlKSwgdGhpcy50YXJnZXRDb3VudCArPSAxLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5GbihlKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuZGVsZXRlKGUudGFyZ2V0KSwgdGhpcy5rcy5JcyhlLnRhcmdldElkKSwgdGhpcy50YXJnZXRDb3VudCAtPSAxLCBcbiAgICAgICAgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLnhzLmZvckVhY2goKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBvLnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQoby50YXJnZXRJZCkgJiYgKHRoaXMueHMuZGVsZXRlKHIpLCBpLnB1c2godGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBvLnRhcmdldElkKSksIFxuICAgICAgICAgICAgcysrKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKGkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLnRhcmdldENvdW50KTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnhzLmdldChlKSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua3MuZ3MoZSwgbiksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5rcy5wcyhlLCBuKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGkucHVzaChzLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtzLklzKGUpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMua3MuRXMoZSk7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMua3MuY29udGFpbnNLZXkoZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtZW1vcnktYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBvbmx5IGluIFJBTSBhbmRcbiAqIG5vdCBwZXJzaXN0ZWQgYWNyb3NzIHNlc3Npb25zLlxuICovXG5jbGFzcyBLbyB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIGFjY2VwdHMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBhIHJlZmVyZW5jZSBkZWxlZ2F0ZS4gVGhpc1xuICAgICAqIGFsbG93cyBib3RoIHRoZSBkZWxlZ2F0ZSBhbmQgdGhpcyBpbnN0YW5jZSB0byBoYXZlIHN0cm9uZyByZWZlcmVuY2VzIHRvXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcbiAgICAgKiBjaGVja2VkIG9yIGFzc2VydGVkIG9uIGV2ZXJ5IGFjY2Vzcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuJHMgPSB7fSwgdGhpcy5vdmVybGF5cyA9IHt9LCB0aGlzLk9zID0gbmV3IE90KDApLCB0aGlzLkZzID0gITEsIHRoaXMuRnMgPSAhMCwgXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0KHRoaXMpLCB0aGlzLkJzID0gbmV3IFVvKHRoaXMpO1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IG5ldyB6ciwgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMbyh0KTtcbiAgICAgICAgfSgodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLkxzKHQpKSksIHRoaXMuc2VyaWFsaXplciA9IG5ldyBhcihlKSwgdGhpcy5xcyA9IG5ldyBNbyh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxuICAgICAgICByZXR1cm4gdGhpcy5GcyA9ICExLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZzO1xuICAgIH1cbiAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE5ldHdvcmtFbmFibGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgLy8gV2UgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IGluZGljZXMgZm9yIG1lbW9yeSBwZXJzaXN0ZW5jZSwgc28gd2UgY2FuXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2FtZSBzaGFyZWQgaW5zdGFuY2Ugb2YgdGhlIG1lbW9yeSBpbmRleCBtYW5hZ2VyLlxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLm92ZXJsYXlzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3ICRvLCB0aGlzLm92ZXJsYXlzW3QudG9LZXkoKV0gPSBlKSwgZTtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy4kc1t0LnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gbiB8fCAobiA9IG5ldyBCbyhlLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKSwgdGhpcy4kc1t0LnRvS2V5KCldID0gbiksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CcztcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFzO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIE4oXCJNZW1vcnlQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCB0KTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBHbyh0aGlzLk9zLm5leHQoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLlVzKCksIG4ocykubmV4dCgodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLktzKHMpLm5leHQoKCgpID0+IHQpKSkpLnRvUHJvbWlzZSgpLnRoZW4oKHQgPT4gKHMucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICBHcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5vcihPYmplY3QudmFsdWVzKHRoaXMuJHMpLm1hcCgobiA9PiAoKSA9PiBuLmNvbnRhaW5zS2V5KHQsIGUpKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZW1vcnkgcGVyc2lzdGVuY2UgaXMgbm90IGFjdHVhbGx5IHRyYW5zYWN0aW9uYWwsIGJ1dCBmdXR1cmUgaW1wbGVtZW50YXRpb25zXG4gKiBtYXkgaGF2ZSB0cmFuc2FjdGlvbi1zY29wZWQgc3RhdGUuXG4gKi8gY2xhc3MgR28gZXh0ZW5kcyBBdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBRbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgXG4gICAgICAgIC8qKiBUcmFja3MgYWxsIGRvY3VtZW50cyB0aGF0IGFyZSBhY3RpdmUgaW4gUXVlcnkgdmlld3MuICovXG4gICAgICAgIHRoaXMuUXMgPSBuZXcgT28sIFxuICAgICAgICAvKiogVGhlIGxpc3Qgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIHBvdGVudGlhbGx5IEdDZWQgYWZ0ZXIgZWFjaCB0cmFuc2FjdGlvbi4gKi9cbiAgICAgICAgdGhpcy5qcyA9IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyB6cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUW8odCk7XG4gICAgfVxuICAgIGdldCBXcygpIHtcbiAgICAgICAgaWYgKHRoaXMuanMpIHJldHVybiB0aGlzLmpzO1xuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFzLmFkZFJlZmVyZW5jZShuLCBlKSwgdGhpcy5Xcy5kZWxldGUobi50b1N0cmluZygpKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Rcy5yZW1vdmVSZWZlcmVuY2UobiwgZSksIHRoaXMuV3MuYWRkKG4udG9TdHJpbmcoKSksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Xcy5hZGQoZS50b1N0cmluZygpKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICB0aGlzLlFzLklzKGUudGFyZ2V0SWQpLmZvckVhY2goKHQgPT4gdGhpcy5Xcy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gbi5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLldzLmFkZCh0LnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLnJlbW92ZVRhcmdldERhdGEodCwgZSkpKTtcbiAgICB9XG4gICAgVXMoKSB7XG4gICAgICAgIHRoaXMuanMgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBLcyh0KSB7XG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2godGhpcy5XcywgKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IGh0LmZyb21QYXRoKG4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuSHModCwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCBlLnJlbW92ZUVudHJ5KHMsIHJ0Lm1pbigpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh0aGlzLmpzID0gbnVsbCwgZS5hcHBseSh0KSkpKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCA/IHRoaXMuV3MuZGVsZXRlKGUudG9TdHJpbmcoKSkgOiB0aGlzLldzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIExzKHQpIHtcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgSHModCwgZSkge1xuICAgICAgICByZXR1cm4gUnQub3IoWyAoKSA9PiBSdC5yZXNvbHZlKHRoaXMuUXMuY29udGFpbnNLZXkoZSkpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCwgZSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuR3ModCwgZSkgXSk7XG4gICAgfVxufVxuXG5jbGFzcyBqbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgdGhpcy5KcyA9IG5ldyBvcygodCA9PiBxdCh0LnBhdGgpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgXG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IFRvKHRoaXMsIGUpO1xuICAgIH1cbiAgICBzdGF0aWMgenModCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGpvKHQsIGUpO1xuICAgIH1cbiAgICAvLyBOby1vcHMsIHByZXNlbnQgc28gbWVtb3J5IHBlcnNpc3RlbmNlIGRvZXNuJ3QgaGF2ZSB0byBjYXJlIHdoaWNoIGRlbGVnYXRlXG4gICAgLy8gaXQgaGFzLlxuICAgIFVzKCkge31cbiAgICBLcyh0KSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHpuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuSm4odCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQodCkubmV4dCgodCA9PiBlLm5leHQoKGUgPT4gdCArIGUpKSkpO1xuICAgIH1cbiAgICBKbih0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuV24odCwgKHQgPT4ge1xuICAgICAgICAgICAgZSsrO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBXbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKHRoaXMuSnMsICgobiwgcykgPT4gdGhpcy5Ybih0LCBuLCBzKS5uZXh0KCh0ID0+IHQgPyBSdC5yZXNvbHZlKCkgOiBlKHMpKSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgaSA9IHMubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBzLkNzKHQsIChzID0+IHRoaXMuWG4odCwgcywgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0IHx8IChuKyssIGkucmVtb3ZlRW50cnkocywgcnQubWluKCkpKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gaS5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Kcy5zZXQoZSwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0LCBuKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnMuc2V0KG4sIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Kcy5zZXQobiwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Kcy5zZXQoZSwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIExzKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0LmtleS50b1N0cmluZygpLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgKGUgKz0gemUodC5kYXRhLnZhbHVlKSksIGU7XG4gICAgfVxuICAgIFhuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFJ0Lm9yKFsgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5Hcyh0LCBlKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHQsIGUpLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5Kcy5nZXQoZSk7XG4gICAgICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh2b2lkIDAgIT09IHQgJiYgdCA+IG4pO1xuICAgICAgICB9IF0pO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy4gKi8gY2xhc3Mgem8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxuICAgICAqLyAgICBPKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBQdChcImNyZWF0ZU9yVXBncmFkZVwiLCBlKTtcbiAgICAgICAgbiA8IDEgJiYgcyA+PSAxICYmIChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwib3duZXJcIik7XG4gICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJ1c2VySWRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgUXQsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovICh0KSwgV28odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIH0odCkpO1xuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXG4gICAgICAgIC8vIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHIgPSBSdC5yZXNvbHZlKCk7XG4gICAgICAgIHJldHVybiBuIDwgMyAmJiBzID49IDMgJiYgKFxuICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxuICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cbiAgICAgICAgMCAhPT0gbiAmJiAoIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiksIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRzXCIpLCB0LmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xuICAgICAgICB9KHQpLCBXbyh0KSksIHIgPSByLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJ0YXJnZXRHbG9iYWxcIiksIG4gPSB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdFRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogMCxcbiAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uOiBydC5taW4oKS50b1RpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgIHRhcmdldENvdW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGUucHV0KFwidGFyZ2V0R2xvYmFsS2V5XCIsIG4pO1xuICAgICAgICB9KGkpKSkpLCBuIDwgNCAmJiBzID49IDQgJiYgKDAgIT09IG4gJiYgKFxuICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2ggSURzICh0aGlzIHdhcyBwcmV2aW91c2x5IGVuc3VyZWQgaW50ZXJuYWxseSBieSB0aGVcbiAgICAgICAgLy8gY2xpZW50KS4gVG8gbWlncmF0ZSB0byB0aGUgbmV3IHNjaGVtYSwgd2UgaGF2ZSB0byByZWFkIGFsbCBtdXRhdGlvbnNcbiAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXG4gICAgICAgIC8vIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgb2JqZWN0IHN0b3Jlcy4gQW55IGZ1cnRoZXIgbXV0YXRpb24gYmF0Y2ggSURzIHdpbGxcbiAgICAgICAgLy8gYmUgYXV0by1nZW5lcmF0ZWQuXG4gICAgICAgIHIgPSByLm5leHQoKCgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnN0b3JlKFwibXV0YXRpb25zXCIpLmooKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIpO1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvbnNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBRdCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuc3RvcmUoXCJtdXRhdGlvbnNcIiksIGkgPSBuLm1hcCgodCA9PiBzLnB1dCh0KSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBSdC53YWl0Rm9yKGkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KHQsIGkpKSkpLCByID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJjbGllbnRNZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiY2xpZW50SWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgbiA8IDUgJiYgcyA+PSA1ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLllzKGkpKSkpLCBuIDwgNiAmJiBzID49IDYgJiYgKHIgPSByLm5leHQoKCgpID0+IChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIik7XG4gICAgICAgIH0odCksIHRoaXMuWHMoaSkpKSkpLCBuIDwgNyAmJiBzID49IDcgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuWnMoaSkpKSksIG4gPCA4ICYmIHMgPj0gOCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy50aSh0LCBpKSkpKSwgXG4gICAgICAgIG4gPCA5ICYmIHMgPj0gOSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxuICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0Lm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgICAgICAvLyBOb3RlOiBTY2hlbWEgdmVyc2lvbiA5IHVzZWQgdG8gY3JlYXRlIGEgcmVhZCB0aW1lIGluZGV4IGZvciB0aGVcbiAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgaXMgbm93IGRvbmUgd2l0aCBzY2hlbWEgdmVyc2lvbiAxMy5cbiAgICAgICAgICAgICAgICB9KSkpLCBuIDwgMTAgJiYgcyA+PSAxMCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5laShpKSkpKSwgbiA8IDExICYmIHMgPj0gMTEgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImJ1bmRsZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJ1bmRsZUlkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibmFtZWRRdWVyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJuYW1lXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCAxMiAmJiBzID49IDEyICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiZG9jdW1lbnRPdmVybGF5c1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IG9lXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHVlLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KSwgZS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cE92ZXJsYXlJbmRleFwiLCBjZSwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICB9KSkpLCBuIDwgMTMgJiYgcyA+PSAxMyAmJiAociA9IHIubmV4dCgoKCkgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IEh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUuY3JlYXRlSW5kZXgoXCJkb2N1bWVudEtleUluZGV4XCIsIEp0KSwgZS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIFl0KTtcbiAgICAgICAgfSh0KSkpLm5leHQoKCgpID0+IHRoaXMubmkodCwgaSkpKS5uZXh0KCgoKSA9PiB0LmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpKSkpLCBcbiAgICAgICAgbiA8IDE0ICYmIHMgPj0gMTQgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuc2kodCwgaSkpKSksIG4gPCAxNSAmJiBzID49IDE1ICYmIChyID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImluZGV4SWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhTdGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogbmVcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLCBzZSwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4RW50cmllc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogaWVcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRLZXlJbmRleFwiLCByZSwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KHQpKSkpLCByO1xuICAgIH1cbiAgICBYcyh0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuWCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUgKz0gcm8obik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgICAgIGJ5dGVTaXplOiBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKS5wdXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiLCBuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBZcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKFwibXV0YXRpb25RdWV1ZXNcIiksIG4gPSB0LnN0b3JlKFwibXV0YXRpb25zXCIpO1xuICAgICAgICByZXR1cm4gZS5qKCkubmV4dCgoZSA9PiBSdC5mb3JFYWNoKGUsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUudXNlcklkLCAtMSBdLCBbIGUudXNlcklkLCBlLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG4uaihcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBzKS5uZXh0KChuID0+IFJ0LmZvckVhY2gobiwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIEYobi51c2VySWQgPT09IGUudXNlcklkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gX3IodGhpcy5zZXJpYWxpemVyLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW8odCwgZS51c2VySWQsIHMpLm5leHQoKCgpID0+IHt9KSk7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cbiAgICAgKi8gICAgWnModCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShcInRhcmdldERvY3VtZW50c1wiKSwgbiA9IHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLlgoKChuLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyB1dChuKSwgbyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgMCwgcXQodCkgXTtcbiAgICAgICAgICAgICAgICB9KHIpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlLmdldChvKS5uZXh0KChuID0+IG4gPyBSdC5yZXNvbHZlKCkgOiAobiA9PiBlLnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBxdChuKSxcbiAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXG4gICAgICAgICAgICAgICAgfSkpKHIpKSkpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IFJ0LndhaXRGb3IocykpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0aSh0LCBlKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaW5kZXguXG4gICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJjb2xsZWN0aW9uUGFyZW50c1wiLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiBlZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbiA9IGUuc3RvcmUoXCJjb2xsZWN0aW9uUGFyZW50c1wiKSwgcyA9IG5ldyBXciwgaSA9IHQgPT4ge1xuICAgICAgICAgICAgaWYgKHMuYWRkKHQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgcyA9IHQucG9wTGFzdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBxdChzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBIZWxwZXIgdG8gYWRkIGFuIGluZGV4IGVudHJ5IGlmZiB3ZSBoYXZlbid0IGFscmVhZHkgd3JpdHRlbiBpdC5cbiAgICAgICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyByZW1vdGUgZG9jdW1lbnRzLlxuICAgICAgICByZXR1cm4gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKS5YKHtcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyB1dCh0KTtcbiAgICAgICAgICAgIHJldHVybiBpKG4ucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKS5YKHtcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgoW3QsIGUsIG5dLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gR3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gaShyLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICBlaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKFwidGFyZ2V0c1wiKTtcbiAgICAgICAgcmV0dXJuIGUuWCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBtcihuKSwgaSA9IGdyKHRoaXMuc2VyaWFsaXplciwgcyk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSwgcyA9IFtdO1xuICAgICAgICByZXR1cm4gbi5YKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNWMTRcIiksIHIgPSAobyA9IG4sIG8uZG9jdW1lbnQgPyBuZXcgaHQodXQuZnJvbVN0cmluZyhvLmRvY3VtZW50Lm5hbWUpLnBvcEZpcnN0KDUpKSA6IG8ubm9Eb2N1bWVudCA/IGh0LmZyb21TZWdtZW50cyhvLm5vRG9jdW1lbnQucGF0aCkgOiBvLnVua25vd25Eb2N1bWVudCA/IGh0LmZyb21TZWdtZW50cyhvLnVua25vd25Eb2N1bWVudC5wYXRoKSA6IE8oKSkucGF0aC50b0FycmF5KCk7XG4gICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICAgICAgICAgICAgY29uc3QgdSA9IHtcbiAgICAgICAgICAgICAgICBwcmVmaXhQYXRoOiByLnNsaWNlKDAsIHIubGVuZ3RoIC0gMiksXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiByW3IubGVuZ3RoIC0gMl0sXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRJZDogcltyLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBuLnJlYWRUaW1lIHx8IFsgMCwgMCBdLFxuICAgICAgICAgICAgICAgIHVua25vd25Eb2N1bWVudDogbi51bmtub3duRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgbm9Eb2N1bWVudDogbi5ub0RvY3VtZW50LFxuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBuLmRvY3VtZW50LFxuICAgICAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogISFuLmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHMucHVzaChpLnB1dCh1KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBSdC53YWl0Rm9yKHMpKSk7XG4gICAgfVxuICAgIHNpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUuc3RvcmUoXCJtdXRhdGlvbnNcIiksIHMgPSBQbyh0aGlzLnNlcmlhbGl6ZXIpLCBpID0gbmV3IEtvKFFvLnpzLCB0aGlzLnNlcmlhbGl6ZXIuZmUpO1xuICAgICAgICByZXR1cm4gbi5qKCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgICAgIGxldCBzID0gbnVsbCAhPT0gKGUgPSBuLmdldCh0LnVzZXJJZCkpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBncygpO1xuICAgICAgICAgICAgICAgIF9yKHRoaXMuc2VyaWFsaXplciwgdCkua2V5cygpLmZvckVhY2goKHQgPT4gcyA9IHMuYWRkKHQpKSksIG4uc2V0KHQudXNlcklkLCBzKTtcbiAgICAgICAgICAgIH0pKSwgUnQuZm9yRWFjaChuLCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFYobiksIG8gPSBSci5kZSh0aGlzLnNlcmlhbGl6ZXIsIHIpLCB1ID0gaS5nZXRJbmRleE1hbmFnZXIociksIGMgPSBvby5kZShyLCB0aGlzLnNlcmlhbGl6ZXIsIHUsIGkucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcga28ocywgYywgbywgdSkucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMobmV3IHdlKGUsIE90LmN0KSwgdCkubmV4dCgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBXbyh0KSB7XG4gICAgdC5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldERvY3VtZW50c1wiLCB7XG4gICAgICAgIGtleVBhdGg6IFp0XG4gICAgfSkuY3JlYXRlSW5kZXgoXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCB0ZSwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSk7XG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRzXCIsIHtcbiAgICAgICAga2V5UGF0aDogXCJ0YXJnZXRJZFwiXG4gICAgfSkuY3JlYXRlSW5kZXgoXCJxdWVyeVRhcmdldHNJbmRleFwiLCBYdCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRHbG9iYWxcIik7XG59XG5cbmNvbnN0IEhvID0gXCJGYWlsZWQgdG8gb2J0YWluIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlIGxheWVyLiBUbyBhbGxvdyBzaGFyZWQgYWNjZXNzLCBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uIGhhcyB0byBiZSBlbmFibGVkIGluIGFsbCB0YWJzLiBJZiB5b3UgYXJlIHVzaW5nIGBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjp0cnVlYCwgbWFrZSBzdXJlIHRoYXQgb25seSBvbmUgdGFiIGhhcyBwZXJzaXN0ZW5jZSBlbmFibGVkIGF0IGFueSBnaXZlbiB0aW1lLlwiO1xuXG4vKipcbiAqIE9sZGVzdCBhY2NlcHRhYmxlIGFnZSBpbiBtaWxsaXNlY29uZHMgZm9yIGNsaWVudCBtZXRhZGF0YSBiZWZvcmUgdGhlIGNsaWVudFxuICogaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgZGF0YSBpcyBnYXJiYWdlIGNvbGxlY3RlZC5cbiAqL1xuLyoqXG4gKiBBbiBJbmRleGVkREItYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBwZXJzaXN0ZW50bHlcbiAqIGFjcm9zcyBzZXNzaW9ucy5cbiAqXG4gKiBPbiBXZWIgb25seSwgdGhlIEZpcmVzdG9yZSBTREtzIHN1cHBvcnQgc2hhcmVkIGFjY2VzcyB0byBpdHMgcGVyc2lzdGVuY2VcbiAqIGxheWVyLiBUaGlzIGFsbG93cyBtdWx0aXBsZSBicm93c2VyIHRhYnMgdG8gcmVhZCBhbmQgd3JpdGUgdG8gSW5kZXhlZERiIGFuZFxuICogdG8gc3luY2hyb25pemUgc3RhdGUgZXZlbiB3aXRob3V0IG5ldHdvcmsgY29ubmVjdGl2aXR5LiBTaGFyZWQgYWNjZXNzIGlzXG4gKiBjdXJyZW50bHkgb3B0aW9uYWwgYW5kIG5vdCBlbmFibGVkIHVubGVzcyBhbGwgY2xpZW50cyBpbnZva2VcbiAqIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCB3aXRoIGB7c3luY2hyb25pemVUYWJzOnRydWV9YC5cbiAqXG4gKiBJbiBtdWx0aS10YWIgbW9kZSwgaWYgbXVsdGlwbGUgY2xpZW50cyBhcmUgYWN0aXZlIGF0IHRoZSBzYW1lIHRpbWUsIHRoZSBTREtcbiAqIHdpbGwgZGVzaWduYXRlIG9uZSBjbGllbnQgYXMgdGhlIOKAnHByaW1hcnkgY2xpZW504oCdLiBBbiBlZmZvcnQgaXMgbWFkZSB0byBwaWNrXG4gKiBhIHZpc2libGUsIG5ldHdvcmstY29ubmVjdGVkIGFuZCBhY3RpdmUgY2xpZW50LCBhbmQgdGhpcyBjbGllbnQgaXNcbiAqIHJlc3BvbnNpYmxlIGZvciBsZXR0aW5nIG90aGVyIGNsaWVudHMga25vdyBhYm91dCBpdHMgcHJlc2VuY2UuIFRoZSBwcmltYXJ5XG4gKiBjbGllbnQgd3JpdGVzIGEgdW5pcXVlIGNsaWVudC1nZW5lcmF0ZWQgaWRlbnRpZmllciAodGhlIGNsaWVudCBJRCkgdG9cbiAqIEluZGV4ZWREYuKAmXMg4oCcb3duZXLigJ0gc3RvcmUgZXZlcnkgNCBzZWNvbmRzLiBJZiB0aGUgcHJpbWFyeSBjbGllbnQgZmFpbHMgdG9cbiAqIHVwZGF0ZSB0aGlzIGVudHJ5LCBhbm90aGVyIGNsaWVudCBjYW4gYWNxdWlyZSB0aGUgbGVhc2UgYW5kIHRha2Ugb3ZlciBhc1xuICogcHJpbWFyeS5cbiAqXG4gKiBTb21lIHBlcnNpc3RlbmNlIG9wZXJhdGlvbnMgaW4gdGhlIFNESyBhcmUgZGVzaWduYXRlZCBhcyBwcmltYXJ5LWNsaWVudCBvbmx5XG4gKiBvcGVyYXRpb25zLiBUaGlzIGluY2x1ZGVzIHRoZSBhY2tub3dsZWRnbWVudCBvZiBtdXRhdGlvbnMgYW5kIGFsbCB1cGRhdGVzIG9mXG4gKiByZW1vdGUgZG9jdW1lbnRzLiBUaGUgZWZmZWN0cyBvZiB0aGVzZSBvcGVyYXRpb25zIGFyZSB3cml0dGVuIHRvIHBlcnNpc3RlbmNlXG4gKiBhbmQgdGhlbiBicm9hZGNhc3QgdG8gb3RoZXIgdGFicyB2aWEgTG9jYWxTdG9yYWdlIChzZWVcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgKSwgd2hpY2ggdGhlbiByZWZyZXNoIHRoZWlyIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIFNpbWlsYXJseSwgdGhlIHByaW1hcnkgY2xpZW50IGxpc3RlbnMgdG8gbm90aWZpY2F0aW9ucyBzZW50IGJ5IHNlY29uZGFyeVxuICogY2xpZW50cyB0byBkaXNjb3ZlciBwZXJzaXN0ZW5jZSBjaGFuZ2VzIHdyaXR0ZW4gYnkgc2Vjb25kYXJ5IGNsaWVudHMsIHN1Y2ggYXNcbiAqIHRoZSBhZGRpdGlvbiBvZiBuZXcgbXV0YXRpb25zIGFuZCBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIElmIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZCBhbmQgYW5vdGhlciB0YWIgYWxyZWFkeSBvYnRhaW5lZCB0aGUgcHJpbWFyeVxuICogbGVhc2UsIEluZGV4ZWREYlBlcnNpc3RlbmNlIGVudGVycyBhIGZhaWxlZCBzdGF0ZSBhbmQgYWxsIHN1YnNlcXVlbnRcbiAqIG9wZXJhdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGZhaWwuXG4gKlxuICogQWRkaXRpb25hbGx5LCB0aGVyZSBpcyBhbiBvcHRpbWl6YXRpb24gc28gdGhhdCB3aGVuIGEgdGFiIGlzIGNsb3NlZCwgdGhlXG4gKiBwcmltYXJ5IGxlYXNlIGlzIHJlbGVhc2VkIGltbWVkaWF0ZWx5ICh0aGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IHRvIG1ha2VcbiAqIHN1cmUgdGhhdCBhIHJlZnJlc2hlZCB0YWIgaXMgYWJsZSB0byBpbW1lZGlhdGVseSByZS1hY3F1aXJlIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSkuIFVuZm9ydHVuYXRlbHksIEluZGV4ZWREQiBjYW5ub3QgYmUgcmVsaWFibHkgdXNlZCBpbiB3aW5kb3cudW5sb2FkXG4gKiBzaW5jZSBpdCBpcyBhbiBhc3luY2hyb25vdXMgQVBJLiBTbyBpbiBhZGRpdGlvbiB0byBhdHRlbXB0aW5nIHRvIGdpdmUgdXAgdGhlXG4gKiBsZWFzZSwgdGhlIGxlYXNlaG9sZGVyIHdyaXRlcyBpdHMgY2xpZW50IElEIHRvIGEgXCJ6b21iaWVkQ2xpZW50XCIgZW50cnkgaW5cbiAqIExvY2FsU3RvcmFnZSB3aGljaCBhY3RzIGFzIGFuIGluZGljYXRvciB0aGF0IGFub3RoZXIgdGFiIHNob3VsZCBnbyBhaGVhZCBhbmRcbiAqIHRha2UgdGhlIHByaW1hcnkgbGVhc2UgaW1tZWRpYXRlbHkgcmVnYXJkbGVzcyBvZiB0aGUgY3VycmVudCBsZWFzZSB0aW1lc3RhbXAuXG4gKlxuICogVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSBgc3luY2hyb25pemVUYWJzYCBzZWN0aW9uIHdoZW4gbXVsdGktdGFiIGlzIG5vXG4gKiBsb25nZXIgb3B0aW9uYWwuXG4gKi9cbmNsYXNzIEpvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHN5bmNocm9uaXplIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgbXVsdGlwbGUgdGFicyBhbmQgc2hhcmVcbiAgICAgKiBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcywgaSwgciwgbywgdSwgYywgXG4gICAgLyoqXG4gICAgICogSWYgc2V0IHRvIHRydWUsIGZvcmNlZnVsbHkgb2J0YWlucyBkYXRhYmFzZSBhY2Nlc3MuIEV4aXN0aW5nIHRhYnMgd2lsbFxuICAgICAqIG5vIGxvbmdlciBiZSBhYmxlIHRvIGFjY2VzcyBJbmRleGVkREIuXG4gICAgICovXG4gICAgYSwgaCA9IDE1KSB7XG4gICAgICAgIGlmICh0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IGUsIHRoaXMuY2xpZW50SWQgPSBuLCBcbiAgICAgICAgdGhpcy5paSA9IGksIHRoaXMud2luZG93ID0gciwgdGhpcy5kb2N1bWVudCA9IG8sIHRoaXMucmkgPSBjLCB0aGlzLm9pID0gYSwgdGhpcy51aSA9IGgsIFxuICAgICAgICB0aGlzLk9zID0gbnVsbCwgdGhpcy5GcyA9ICExLCB0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLm5ldHdvcmtFbmFibGVkID0gITAsIFxuICAgICAgICAvKiogT3VyIHdpbmRvdy51bmxvYWQgaGFuZGxlciwgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5jaSA9IG51bGwsIHRoaXMuaW5Gb3JlZ3JvdW5kID0gITEsIFxuICAgICAgICAvKiogT3VyICd2aXNpYmlsaXR5Y2hhbmdlJyBsaXN0ZW5lciBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLmFpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgY2xpZW50IG1ldGFkYXRhIHJlZnJlc2ggdGFzay4gKi9cbiAgICAgICAgdGhpcy5oaSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGxhc3QgdGltZSB3ZSBnYXJiYWdlIGNvbGxlY3RlZCB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS4gKi9cbiAgICAgICAgdGhpcy5saSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgXG4gICAgICAgIC8qKiBBIGxpc3RlbmVyIHRvIG5vdGlmeSBvbiBwcmltYXJ5IHN0YXRlIGNoYW5nZXMuICovXG4gICAgICAgIHRoaXMuZmkgPSB0ID0+IFByb21pc2UucmVzb2x2ZSgpLCAhSm8uRCgpKSB0aHJvdyBuZXcgVShxLlVOSU1QTEVNRU5URUQsIFwiVGhpcyBwbGF0Zm9ybSBpcyBlaXRoZXIgbWlzc2luZyBJbmRleGVkREIgb3IgaXMga25vd24gdG8gaGF2ZSBhbiBpbmNvbXBsZXRlIGltcGxlbWVudGF0aW9uLiBPZmZsaW5lIHBlcnNpc3RlbmNlIGhhcyBiZWVuIGRpc2FibGVkLlwiKTtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IG5ldyBFbyh0aGlzLCBzKSwgdGhpcy5kaSA9IGUgKyBcIm1haW5cIiwgdGhpcy5zZXJpYWxpemVyID0gbmV3IGFyKHUpLCBcbiAgICAgICAgdGhpcy53aSA9IG5ldyBidCh0aGlzLmRpLCB0aGlzLnVpLCBuZXcgem8odGhpcy5zZXJpYWxpemVyKSksIHRoaXMuQnMgPSBuZXcgZm8odGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5zZXJpYWxpemVyKSwgXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IFBvKHRoaXMuc2VyaWFsaXplciksIHRoaXMucXMgPSBuZXcgRXIsIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuX2kgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5faSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gYSAmJiBrKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLm1pKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIEhvKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdpKCksIHRoaXMueWkoKSwgdGhpcy5waSgpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gdGhpcy5Ccy5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkpKTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5PcyA9IG5ldyBPdCh0LCB0aGlzLnJpKTtcbiAgICAgICAgfSkpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRnMgPSAhMDtcbiAgICAgICAgfSkpLmNhdGNoKCh0ID0+ICh0aGlzLndpICYmIHRoaXMud2kuY2xvc2UoKSwgUHJvbWlzZS5yZWplY3QodCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgcHJpbWFyeSBzdGF0ZSBvZiB0aGVcbiAgICAgKiBpbnN0YW5jZSBjaGFuZ2VzLiBVcG9uIHJlZ2lzdGVyaW5nLCB0aGlzIGxpc3RlbmVyIGlzIGludm9rZWQgaW1tZWRpYXRlbHlcbiAgICAgKiB3aXRoIHRoZSBjdXJyZW50IHByaW1hcnkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBJaSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpID0gYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSByZXR1cm4gdChlKTtcbiAgICAgICAgfSwgdCh0aGlzLmlzUHJpbWFyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgZGF0YWJhc2UgcmVjZWl2ZXMgYVxuICAgICAqIHZlcnNpb24gY2hhbmdlIGV2ZW50IGluZGljYXRpbmcgdGhhdCBpdCBoYXMgZGVsZXRlZC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy53aS5CKChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gZS5uZXdWZXJzaW9uICYmIGF3YWl0IHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKHQpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gdCAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IHQsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuaWkuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMubWkoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBtaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gWG8odCkucHV0KHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmV0d29ya0VuYWJsZWQ6IHRoaXMubmV0d29ya0VuYWJsZWQsXG4gICAgICAgICAgICBpbkZvcmVncm91bmQ6IHRoaXMuaW5Gb3JlZ3JvdW5kXG4gICAgICAgIH0pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMuVGkodCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5paS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLmZpKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuRWkodCkpKS5uZXh0KChlID0+IHRoaXMuaXNQcmltYXJ5ICYmICFlID8gdGhpcy5BaSh0KS5uZXh0KCgoKSA9PiAhMSkpIDogISFlICYmIHRoaXMudmkodCkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgaWYgKER0KHQpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiBOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgdCksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyB0O1xuICAgICAgICAgICAgcmV0dXJuIE4oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCB0KSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiB0aGlzLmlpLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuZmkodCkpKSwgdGhpcy5pc1ByaW1hcnkgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFRpKHQpIHtcbiAgICAgICAgcmV0dXJuIFlvKHQpLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4gUnQucmVzb2x2ZSh0aGlzLlJpKHQpKSkpO1xuICAgIH1cbiAgICBQaSh0KSB7XG4gICAgICAgIHJldHVybiBYbyh0KS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBiaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLlZpKHRoaXMubGksIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLmxpID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IF9lKHQsIFwiY2xpZW50TWV0YWRhdGFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuaigpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5TaSh0LCAxOGU1KSwgcyA9IHQuZmlsdGVyKCh0ID0+IC0xID09PSBuLmluZGV4T2YodCkpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2gocywgKHQgPT4gZS5kZWxldGUodC5jbGllbnRJZCkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCgoKSA9PiBbXSkpO1xuICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXG4gICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXG4gICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faSkgZm9yIChjb25zdCBlIG9mIHQpIHRoaXMuX2kucmVtb3ZlSXRlbSh0aGlzLkRpKGUuY2xpZW50SWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXG4gICAgICovICAgIHBpKCkge1xuICAgICAgICB0aGlzLmhpID0gdGhpcy5paS5lbnF1ZXVlQWZ0ZXJEZWxheShcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCIgLyogVGltZXJJZC5DbGllbnRNZXRhZGF0YVJlZnJlc2ggKi8gLCA0ZTMsICgoKSA9PiB0aGlzLm1pKCkudGhlbigoKCkgPT4gdGhpcy5iaSgpKSkudGhlbigoKCkgPT4gdGhpcy5waSgpKSkpKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB3aGV0aGVyIGBjbGllbnRgIGlzIHRoZSBsb2NhbCBjbGllbnQuICovICAgIFJpKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiB0Lm93bmVySWQgPT09IHRoaXMuY2xpZW50SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2YWx1YXRlIHRoZSBzdGF0ZSBvZiBhbGwgYWN0aXZlIGNsaWVudHMgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZSBsb2NhbFxuICAgICAqIGNsaWVudCBpcyBvciBjYW4gYWN0IGFzIHRoZSBob2xkZXIgb2YgdGhlIHByaW1hcnkgbGVhc2UuIFJldHVybnMgd2hldGhlclxuICAgICAqIHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBsZWFzZSwgYnV0IGRvZXMgbm90IGFjdHVhbGx5IGFjcXVpcmUgaXQuXG4gICAgICogTWF5IHJldHVybiAnZmFsc2UnIGV2ZW4gaWYgdGhlcmUgaXMgbm8gYWN0aXZlIGxlYXNlaG9sZGVyIGFuZCBhbm90aGVyXG4gICAgICogKGZvcmVncm91bmQpIGNsaWVudCBzaG91bGQgYmVjb21lIGxlYXNlaG9sZGVyIGluc3RlYWQuXG4gICAgICovICAgIEVpKHQpIHtcbiAgICAgICAgaWYgKHRoaXMub2kpIHJldHVybiBSdC5yZXNvbHZlKCEwKTtcbiAgICAgICAgcmV0dXJuIFlvKHQpLmdldChcIm93bmVyXCIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgLy8gQSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBwcmltYXJ5IGxlYXNlIGlmOlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW5cbiAgICAgICAgICAgIC8vICAgdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIHRoZSBgZm9yY2VPd25pbmdUYWJgIHNldHRpbmcgd2FzIHBhc3NlZCBpbi5cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlICYmIHRoaXMuVmkoZS5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLkNpKGUub3duZXJJZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5SaShlKSAmJiB0aGlzLm5ldHdvcmtFbmFibGVkKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLlJpKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAgICAgICAgIC8vIEZhaWwgdGhlIGBjYW5BY3RBc1ByaW1hcnlgIGNoZWNrIGlmIHRoZSBjdXJyZW50IGxlYXNlaG9sZGVyIGhhc1xuICAgICAgICAgICAgICAgICAgICAvLyBub3Qgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLiBJZiB0aGlzIGhhcHBlbnMgYXRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpZW50IHN0YXJ0dXAsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieVxuICAgICAgICAgICAgICAgICAgICAvLyBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgYW5kIHRoZSB1c2VyIGNhbiBjb250aW51ZSB0byB1c2UgRmlyZXN0b3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZhaWxzIGR1cmluZyBhIGxlYXNlIHJlZnJlc2gsIHdlIHdpbGwgaW5zdGVhZCBibG9jayB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBmcm9tIGV4ZWN1dGluZyBmdXJ0aGVyIG9wZXJhdGlvbnMuIE5vdGUgdGhhdCB0aGlzIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY2VwdGFibGUgc2luY2UgbWl4aW5nICYgbWF0Y2hpbmcgZGlmZmVyZW50IGBzeW5jaHJvbml6ZVRhYnNgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmdzIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhblxuICAgICAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgYmUgdHVybmVkIG9mZi5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBIbyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISghdGhpcy5uZXR3b3JrRW5hYmxlZCB8fCAhdGhpcy5pbkZvcmVncm91bmQpIHx8IFhvKHQpLmooKS5uZXh0KCh0ID0+IHZvaWQgMCA9PT0gdGhpcy5TaSh0LCA1ZTMpLmZpbmQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudElkICE9PSB0LmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAhdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiB0Lm5ldHdvcmtFbmFibGVkLCBuID0gIXRoaXMuaW5Gb3JlZ3JvdW5kICYmIHQuaW5Gb3JlZ3JvdW5kLCBzID0gdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gdC5uZXR3b3JrRW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgfHwgbiAmJiBzKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiAodGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgTihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJHt0ID8gXCJpc1wiIDogXCJpcyBub3RcIn0gZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5gKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKCkge1xuICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxuICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXG4gICAgICAgIHRoaXMuRnMgPSAhMSwgdGhpcy54aSgpLCB0aGlzLmhpICYmICh0aGlzLmhpLmNhbmNlbCgpLCB0aGlzLmhpID0gbnVsbCksIHRoaXMuTmkoKSwgXG4gICAgICAgIHRoaXMua2koKSwgXG4gICAgICAgIC8vIFVzZSBgU2ltcGxlRGIucnVuVHJhbnNhY3Rpb25gIGRpcmVjdGx5IHRvIGF2b2lkIGZhaWxpbmcgaWYgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gaGFzIG9idGFpbmVkIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICBhd2FpdCB0aGlzLndpLnJ1blRyYW5zYWN0aW9uKFwic2h1dGRvd25cIiwgXCJyZWFkd3JpdGVcIiwgWyBcIm93bmVyXCIsIFwiY2xpZW50TWV0YWRhdGFcIiBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IHdlKHQsIE90LmN0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkFpKGUpLm5leHQoKCgpID0+IHRoaXMuUGkoZSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLndpLmNsb3NlKCksIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IG1hcmtpbmcgdGhlIGNsaWVudCBhcyB6b21iaWVkIGZyb20gTG9jYWxTdG9yYWdlIHNpbmNlXG4gICAgICAgIC8vIHdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkIGl0cyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi5cbiAgICAgICAgdGhpcy5NaSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGNsaWVudHMgdGhhdCBhcmUgbm90IHpvbWJpZWQgYW5kIGhhdmUgYW4gdXBkYXRlVGltZSB3aXRoaW4gdGhlXG4gICAgICogcHJvdmlkZWQgdGhyZXNob2xkLlxuICAgICAqLyAgICBTaSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LmZpbHRlcigodCA9PiB0aGlzLlZpKHQudXBkYXRlVGltZU1zLCBlKSAmJiAhdGhpcy5DaSh0LmNsaWVudElkKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gSWYgbXVsdGktdGFiXG4gICAgICogaXMgbm90IHN1cHBvcnRlZCwgcmV0dXJucyBhbiBhcnJheSB0aGF0IG9ubHkgY29udGFpbnMgdGhlIGxvY2FsIGNsaWVudCdzXG4gICAgICogSUQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICAkaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRBY3RpdmVDbGllbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gWG8odCkuaigpLm5leHQoKHQgPT4gdGhpcy5TaSh0LCAxOGU1KS5tYXAoKHQgPT4gdC5jbGllbnRJZCkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZzO1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG9vLmRlKHQsIHRoaXMuc2VyaWFsaXplciwgZSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CcztcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKcih0LCB0aGlzLnNlcmlhbGl6ZXIuZmUuZGF0YWJhc2VJZCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKHQpIHtcbiAgICAgICAgcmV0dXJuIFJyLmRlKHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xcztcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICBOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBcInJlYWRvbmx5XCIgPT09IGUgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBpID0gMTUgPT09IChyID0gdGhpcy51aSkgPyBkZSA6IDE0ID09PSByID8gZmUgOiAxMyA9PT0gciA/IGxlIDogMTIgPT09IHIgPyBoZSA6IDExID09PSByID8gYWUgOiB2b2lkIE8oKTtcbiAgICAgICAgLyoqIFJldHVybnMgdGhlIG9iamVjdCBzdG9yZXMgZm9yIHRoZSBwcm92aWRlZCBzY2hlbWEuICovXG4gICAgICAgIHZhciByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2kucnVuVHJhbnNhY3Rpb24odCwgcywgaSwgKHMgPT4gKG8gPSBuZXcgd2UocywgdGhpcy5PcyA/IHRoaXMuT3MubmV4dCgpIDogT3QuY3QpLCBcbiAgICAgICAgXCJyZWFkd3JpdGUtcHJpbWFyeVwiID09PSBlID8gdGhpcy5UaShvKS5uZXh0KCh0ID0+ICEhdCB8fCB0aGlzLkVpKG8pKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHRocm93IGsoYEZhaWxlZCB0byBvYnRhaW4gcHJpbWFyeSBsZWFzZSBmb3IgYWN0aW9uICcke3R9Jy5gKSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgXG4gICAgICAgICAgICB0aGlzLmlpLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuZmkoITEpKSksIG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgRXQpO1xuICAgICAgICAgICAgcmV0dXJuIG4obyk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+IHRoaXMudmkobykubmV4dCgoKCkgPT4gdCkpKSkgOiB0aGlzLk9pKG8pLm5leHQoKCgpID0+IG4obykpKSkpKS50aGVuKCh0ID0+IChvLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgY3VycmVudCB0YWIgaXMgdGhlIHByaW1hcnkgbGVhc2Vob2xkZXIgb3IgYWx0ZXJuYXRpdmVseVxuICAgICAqIHRoYXQgdGhlIGxlYXNlaG9sZGVyIGhhcyBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuIG5vIGxvbmdlclxuICAgIC8vIGJlIHR1cm5lZCBvZmYuXG4gICAgT2kodCkge1xuICAgICAgICByZXR1cm4gWW8odCkuZ2V0KFwib3duZXJcIikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiB0aGlzLlZpKHQubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5DaSh0Lm93bmVySWQpICYmICF0aGlzLlJpKHQpICYmICEodGhpcy5vaSB8fCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uICYmIHQuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIEhvKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPYnRhaW5zIG9yIGV4dGVuZHMgdGhlIG5ldyBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBUaGlzXG4gICAgICogbWV0aG9kIGRvZXMgbm90IHZlcmlmeSB0aGF0IHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoaXMgbGVhc2UuXG4gICAgICovICAgIHZpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIG93bmVySWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhbGxvd1RhYlN5bmNocm9uaXphdGlvbjogdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbixcbiAgICAgICAgICAgIGxlYXNlVGltZXN0YW1wTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFlvKHQpLnB1dChcIm93bmVyXCIsIGUpO1xuICAgIH1cbiAgICBzdGF0aWMgRCgpIHtcbiAgICAgICAgcmV0dXJuIGJ0LkQoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgQWkodCkge1xuICAgICAgICBjb25zdCBlID0gWW8odCk7XG4gICAgICAgIHJldHVybiBlLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4gdGhpcy5SaSh0KSA/IChOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICBlLmRlbGV0ZShcIm93bmVyXCIpKSA6IFJ0LnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgVmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEodCA8IG4gLSBlKSAmJiAoISh0ID4gbikgfHwgKGsoYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHt0fSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIGdpKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLmFpID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5paS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy5taSgpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuYWkpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIE5pKCkge1xuICAgICAgICB0aGlzLmFpICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuYWkpLCB0aGlzLmFpID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICB5aSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09ICh0ID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMuY2kgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy54aSgpO1xuICAgICAgICAgICAgY29uc3QgdCA9IC8oPzpWZXJzaW9ufE1vYmlsZSlcXC8xWzQ1Nl0vO1xuICAgICAgICAgICAgaXNTYWZhcmkoKSAmJiAobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2godCkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCh0KSkgJiYgXG4gICAgICAgICAgICAvLyBPbiBTYWZhcmkgMTQsIDE1LCBhbmQgMTYsIHdlIGRvIG5vdCBydW4gYW55IGNsZWFudXAgYWN0aW9ucyBhcyBpdCBtaWdodFxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhIGJ1ZyB0aGF0IHByZXZlbnRzIFNhZmFyaSBmcm9tIHJlLW9wZW5pbmcgSW5kZXhlZERCIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlIG5leHQgcGFnZSBsb2FkLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjY1NDdcbiAgICAgICAgICAgIHRoaXMuaWkuZW50ZXJSZXN0cmljdGVkTW9kZSgvKiBwdXJnZUV4aXN0aW5nVGFza3M9ICovICEwKSwgdGhpcy5paS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnNodXRkb3duKCkpKTtcbiAgICAgICAgfSwgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMuY2kpKTtcbiAgICB9XG4gICAga2koKSB7XG4gICAgICAgIHRoaXMuY2kgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLmNpKSwgdGhpcy5jaSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cbiAgICAgKiBDbGllbnRzIGJlY29tZSB6b21iaWVkIHdoZW4gdGhlaXIgdGFiIGNsb3NlcyB3aXRob3V0IHJ1bm5pbmcgYWxsIG9mIHRoZVxuICAgICAqIGNsZWFudXAgbG9naWMgaW4gYHNodXRkb3duKClgLlxuICAgICAqLyAgICBDaSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbiA9IG51bGwgIT09IChudWxsID09PSAoZSA9IHRoaXMuX2kpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZ2V0SXRlbSh0aGlzLkRpKHQpKSk7XG4gICAgICAgICAgICByZXR1cm4gTihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJyR7dH0nICR7biA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlYCksIFxuICAgICAgICAgICAgbjtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICByZXR1cm4gayhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC5cIiwgdCksICExO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZCBjbGllbnQgYXMgem9tYmllZCAoYSBjbGllbnQgdGhhdCBoYWQgaXRzIHRhYiBjbG9zZWQpLiBab21iaWVkXG4gICAgICogY2xpZW50cyBhcmUgaWdub3JlZCBkdXJpbmcgcHJpbWFyeSB0YWIgc2VsZWN0aW9uLlxuICAgICAqLyAgICB4aSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2kpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9pLnNldEl0ZW0odGhpcy5EaSh0aGlzLmNsaWVudElkKSwgU3RyaW5nKERhdGUubm93KCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IGF2YWlsYWJsZSAvIHdvcmtpbmcuXG4gICAgICAgICAgICBrKFwiRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLlwiLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqLyAgICBNaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2kpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9pLnJlbW92ZUl0ZW0odGhpcy5EaSh0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9XG4gICAgfVxuICAgIERpKHQpIHtcbiAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfem9tYmllXyR7dGhpcy5wZXJzaXN0ZW5jZUtleX1fJHt0fWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFlvKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJvd25lclwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWG8odCkge1xuICAgIHJldHVybiBfZSh0LCBcImNsaWVudE1ldGFkYXRhXCIpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcbiAqIExvY2FsU3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBabyh0LCBlKSB7XG4gICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxuICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXG4gICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cbiAgICBsZXQgbiA9IHQucHJvamVjdElkO1xuICAgIHJldHVybiB0LmlzRGVmYXVsdERhdGFiYXNlIHx8IChuICs9IFwiLlwiICsgdC5kYXRhYmFzZSksIFwiZmlyZXN0b3JlL1wiICsgZSArIFwiL1wiICsgbiArIFwiL1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHNldCBvZiBjaGFuZ2VzIHRvIHdoYXQgZG9jdW1lbnRzIGFyZSBjdXJyZW50bHkgaW4gdmlldyBhbmQgb3V0IG9mIHZpZXcgZm9yXG4gKiBhIGdpdmVuIHF1ZXJ5LiBUaGVzZSBjaGFuZ2VzIGFyZSBzZW50IHRvIHRoZSBMb2NhbFN0b3JlIGJ5IHRoZSBWaWV3ICh2aWFcbiAqIHRoZSBTeW5jRW5naW5lKSBhbmQgYXJlIHVzZWQgdG8gcGluIC8gdW5waW4gZG9jdW1lbnRzIGFzIGFwcHJvcHJpYXRlLlxuICovXG5jbGFzcyB0dSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlLCB0aGlzLkZpID0gbiwgdGhpcy5CaSA9IHM7XG4gICAgfVxuICAgIHN0YXRpYyBMaSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gZ3MoKSwgcyA9IGdzKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmRvY0NoYW5nZXMpIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgbiA9IG4uYWRkKHQuZG9jLmtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgcyA9IHMuYWRkKHQuZG9jLmtleSk7XG4gLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB0dSh0LCBlLmZyb21DYWNoZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgRmlyZXN0b3JlIHF1ZXJ5IGVuZ2luZS5cbiAqXG4gKiBGaXJlc3RvcmUgcXVlcmllcyBjYW4gYmUgZXhlY3V0ZWQgaW4gdGhyZWUgbW9kZXMuIFRoZSBRdWVyeSBFbmdpbmUgZGV0ZXJtaW5lc1xuICogd2hhdCBtb2RlIHRvIHVzZSBiYXNlZCBvbiB3aGF0IGRhdGEgaXMgcGVyc2lzdGVkLiBUaGUgbW9kZSBvbmx5IGRldGVybWluZXNcbiAqIHRoZSBydW50aW1lIGNvbXBsZXhpdHkgb2YgdGhlIHF1ZXJ5IC0gdGhlIHJlc3VsdCBzZXQgaXMgZXF1aXZhbGVudCBhY3Jvc3MgYWxsXG4gKiBpbXBsZW1lbnRhdGlvbnMuXG4gKlxuICogVGhlIFF1ZXJ5IGVuZ2luZSB3aWxsIHVzZSBpbmRleGVkLWJhc2VkIGV4ZWN1dGlvbiBpZiBhIHVzZXIgaGFzIGNvbmZpZ3VyZWRcbiAqIGFueSBpbmRleCB0aGF0IGNhbiBiZSB1c2VkIHRvIGV4ZWN1dGUgcXVlcnkgKHZpYSBgc2V0SW5kZXhDb25maWd1cmF0aW9uKClgKS5cbiAqIE90aGVyd2lzZSwgdGhlIGVuZ2luZSB3aWxsIHRyeSB0byBvcHRpbWl6ZSB0aGUgcXVlcnkgYnkgcmUtdXNpbmcgYSBwcmV2aW91c2x5XG4gKiBwZXJzaXN0ZWQgcXVlcnkgcmVzdWx0LiBJZiB0aGF0IGlzIG5vdCBwb3NzaWJsZSwgdGhlIHF1ZXJ5IHdpbGwgYmUgZXhlY3V0ZWRcbiAqIHZpYSBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICpcbiAqIEluZGV4LWJhc2VkIGV4ZWN1dGlvbiBpcyB0aGUgZGVmYXVsdCB3aGVuIGF2YWlsYWJsZS4gVGhlIHF1ZXJ5IGVuZ2luZVxuICogc3VwcG9ydHMgcGFydGlhbCBpbmRleGVkIGV4ZWN1dGlvbiBhbmQgbWVyZ2VzIHRoZSByZXN1bHQgZnJvbSB0aGUgaW5kZXhcbiAqIGxvb2t1cCB3aXRoIGRvY3VtZW50cyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuIFRoZSBpbmRleCBldmFsdWF0aW9uXG4gKiBtYXRjaGVzIHRoZSBiYWNrZW5kJ3MgZm9ybWF0IGFuZCBhcyBzdWNoLCB0aGUgU0RLIGNhbiB1c2UgaW5kZXhpbmcgZm9yIGFsbFxuICogcXVlcmllcyB0aGF0IHRoZSBiYWNrZW5kIHN1cHBvcnRzLlxuICpcbiAqIElmIG5vIGluZGV4IGV4aXN0cywgdGhlIHF1ZXJ5IGVuZ2luZSB0cmllcyB0byB0YWtlIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0XG4gKiBkb2N1bWVudCBtYXBwaW5nIGluIHRoZSBUYXJnZXRDYWNoZS4gVGhlc2UgbWFwcGluZ3MgZXhpc3RzIGZvciBhbGwgcXVlcmllc1xuICogdGhhdCBoYXZlIGJlZW4gc3luY2VkIHdpdGggdGhlIGJhY2tlbmQgYXQgbGVhc3Qgb25jZSBhbmQgYWxsb3cgdGhlIHF1ZXJ5XG4gKiBlbmdpbmUgdG8gb25seSByZWFkIGRvY3VtZW50cyB0aGF0IHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55XG4gKiBkb2N1bWVudHMgdGhhdCB3ZXJlIGVkaXRlZCBhZnRlciB0aGUgcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXG4gKlxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlbiB0aGlzIG9wdGltaXphdGlvbiBpcyBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHF1ZXJ5XG4gKiBwcm9jZXNzaW5nIGZhbGxzIGJhY2sgdG8gZnVsbCBzY2Fucy4gVGhlc2UgY2FzZXMgYXJlOlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIGxpbWJvIGRvY3VtZW50cy5cbiAqLyBjbGFzcyBldSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucWkgPSAhMTtcbiAgICB9XG4gICAgLyoqIFNldHMgdGhlIGRvY3VtZW50IHZpZXcgdG8gcXVlcnkgYWdhaW5zdC4gKi8gICAgaW5pdGlhbGl6ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuVWkgPSB0LCB0aGlzLmluZGV4TWFuYWdlciA9IGUsIHRoaXMucWkgPSAhMDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYWxsIGxvY2FsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHF1ZXJ5LiAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS2kodCwgZSkubmV4dCgoaSA9PiBpIHx8IHRoaXMuR2kodCwgZSwgcywgbikpKS5uZXh0KChuID0+IG4gfHwgdGhpcy5RaSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhbiBpbmRleGVkIHF1ZXJ5IHRoYXQgZXZhbHVhdGVzIHRoZSBxdWVyeSBiYXNlZCBvbiBhIGNvbGxlY3Rpb24nc1xuICAgICAqIHBlcnNpc3RlZCBpbmRleCB2YWx1ZXMuIFJldHVybnMgYG51bGxgIGlmIGFuIGluZGV4IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICovICAgIEtpKHQsIGUpIHtcbiAgICAgICAgaWYgKFFuKGUpKSBcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXG4gICAgICAgIC8vIGtleS1iYXNlZCBsb29rdXBzLiBJdCBpcyBtb3JlIGVmZmljaWVudCB0byBzY2FuIGFsbCBkb2N1bWVudHMgaW4gYVxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobnVsbCk7XG4gICAgICAgIGxldCBuID0gSm4oZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlci5nZXRJbmRleFR5cGUodCwgbikubmV4dCgocyA9PiAwIC8qIEluZGV4VHlwZS5OT05FICovID09PSBzID8gbnVsbCA6IChudWxsICE9PSBlLmxpbWl0ICYmIDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gPT09IHMgJiYgKFxuICAgICAgICAvLyBXZSBjYW5ub3QgYXBwbHkgYSBsaW1pdCBmb3IgdGFyZ2V0cyB0aGF0IGFyZSBzZXJ2ZWQgdXNpbmcgYSBwYXJ0aWFsXG4gICAgICAgIC8vIGluZGV4LiBJZiBhIHBhcnRpYWwgaW5kZXggd2lsbCBiZSB1c2VkIHRvIHNlcnZlIHRoZSB0YXJnZXQsIHRoZVxuICAgICAgICAvLyBxdWVyeSBtYXkgcmV0dXJuIGEgc3VwZXJzZXQgb2YgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHRhcmdldFxuICAgICAgICAvLyAoZS5nLiBpZiB0aGUgaW5kZXggZG9lc24ndCBpbmNsdWRlIGFsbCB0aGUgdGFyZ2V0J3MgZmlsdGVycyksIG9yXG4gICAgICAgIC8vIG1heSByZXR1cm4gdGhlIGNvcnJlY3Qgc2V0IG9mIGRvY3VtZW50cyBpbiB0aGUgd3Jvbmcgb3JkZXIgKGUuZy4gaWZcbiAgICAgICAgLy8gdGhlIGluZGV4IGRvZXNuJ3QgaW5jbHVkZSBhIHNlZ21lbnQgZm9yIG9uZSBvZiB0aGUgb3JkZXJCeXMpLlxuICAgICAgICAvLyBUaGVyZWZvcmUsIGEgbGltaXQgc2hvdWxkIG5vdCBiZSBhcHBsaWVkIGluIHN1Y2ggY2FzZXMuXG4gICAgICAgIGUgPSBYbihlLCBudWxsLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pLCBuID0gSm4oZSkpLCB0aGlzLmluZGV4TWFuYWdlci5nZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCh0LCBuKS5uZXh0KChzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBncyguLi5zKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlVpLmdldERvY3VtZW50cyh0LCBpKS5uZXh0KChzID0+IHRoaXMuaW5kZXhNYW5hZ2VyLmdldE1pbk9mZnNldCh0LCBuKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5qaShlLCBzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy56aShlLCByLCBpLCBuLnJlYWRUaW1lKSA/IHRoaXMuS2kodCwgWG4oZSwgbnVsbCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKSkgOiB0aGlzLldpKHQsIHIsIGUsIG4pO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBiYXNlZCBvbiB0aGUgdGFyZ2V0J3MgcGVyc2lzdGVkIHF1ZXJ5IG1hcHBpbmcuIFJldHVybnNcbiAgICAgKiBgbnVsbGAgaWYgdGhlIG1hcHBpbmcgaXMgbm90IGF2YWlsYWJsZSBvciBjYW5ub3QgYmUgdXNlZC5cbiAgICAgKi8gICAgR2kodCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gUW4oZSkgfHwgcy5pc0VxdWFsKHJ0Lm1pbigpKSA/IHRoaXMuUWkodCwgZSkgOiB0aGlzLlVpLmdldERvY3VtZW50cyh0LCBuKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmppKGUsIGkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuemkoZSwgciwgbiwgcykgPyB0aGlzLlFpKHQsIGUpIDogKEMoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBOKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCBzLnRvU3RyaW5nKCksIGVzKGUpKSwgXG4gICAgICAgICAgICB0aGlzLldpKHQsIHIsIGUsIHl0KHMsIC0xKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgamkodCwgZSkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgRWUoaXModCkpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcykgPT4ge1xuICAgICAgICAgICAgbnModCwgcykgJiYgKG4gPSBuLmFkZChzKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgd2hlbiBpdFxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZCwgc29ydGVkIGJ5IHRoZSBxdWVyeSdzIGNvbXBhcmF0b3IuXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgLSBUaGUgZG9jdW1lbnQga2V5cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSBsYXN0XG4gICAgICogc25hcHNob3QuXG4gICAgICogQHBhcmFtIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZVxuICAgICAqIHF1ZXJ5IHdhcyBsYXN0IHN5bmNocm9uaXplZC5cbiAgICAgKi8gICAgemkodCwgZSwgbiwgcykge1xuICAgICAgICBpZiAobnVsbCA9PT0gdC5saW1pdCkgXG4gICAgICAgIC8vIFF1ZXJpZXMgd2l0aG91dCBsaW1pdHMgZG8gbm90IG5lZWQgdG8gYmUgcmVmaWxsZWQuXG4gICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgaWYgKG4uc2l6ZSAhPT0gZS5zaXplKSBcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGlmIGEgcHJldmlvdXNseSBtYXRjaGluZyBkb2N1bWVudCBub1xuICAgICAgICAvLyBsb25nZXIgbWF0Y2hlcy5cbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHQubGltaXRUeXBlID8gZS5sYXN0KCkgOiBlLmZpcnN0KCk7XG4gICAgICAgIHJldHVybiAhIWkgJiYgKGkuaGFzUGVuZGluZ1dyaXRlcyB8fCBpLnZlcnNpb24uY29tcGFyZVRvKHMpID4gMCk7XG4gICAgfVxuICAgIFFpKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEMoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBOKFwiUXVlcnlFbmdpbmVcIiwgXCJVc2luZyBmdWxsIGNvbGxlY3Rpb24gc2NhbiB0byBleGVjdXRlIHF1ZXJ5OlwiLCBlcyhlKSksIFxuICAgICAgICB0aGlzLlVpLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgSXQubWluKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0aGUgcmVzdWx0cyBmcm9tIGFuIGluZGV4ZWQgZXhlY3V0aW9uIHdpdGggdGhlIHJlbWFpbmluZyBkb2N1bWVudHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuXG4gICAgICovICAgIFdpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgYWxsIHJlc3VsdHMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgdXBkYXRlZCBzaW5jZSB0aGUgb2Zmc2V0LlxuICAgICAgICByZXR1cm4gdGhpcy5VaS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIG4sIHMpLm5leHQoKHQgPT4gKFxuICAgICAgICAvLyBNZXJnZSB3aXRoIGV4aXN0aW5nIHJlc3VsdHNcbiAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLmtleSwgZSk7XG4gICAgICAgIH0pKSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgbnUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLkhpID0gZSwgdGhpcy5zZXJpYWxpemVyID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5KaSA9IG5ldyBwZShldCksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLllpID0gbmV3IG9zKCh0ID0+ICRuKHQpKSwgT24pLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcGVyIGNvbGxlY3Rpb24gZ3JvdXAgaW5kZXggb2YgdGhlIGxhc3QgcmVhZCB0aW1lIHByb2Nlc3NlZCBieVxuICAgICAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5YaSA9IG5ldyBNYXAsIHRoaXMuWmkgPSB0LmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgdGhpcy5CcyA9IHQuZ2V0VGFyZ2V0Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMucXMgPSB0LmdldEJ1bmRsZUNhY2hlKCksIHRoaXMudHIobik7XG4gICAgfVxuICAgIHRyKHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IEFkZCBzcGVjIHRlc3RzIHRoYXQgdGVzdCB0aGVzZSBjb21wb25lbnRzIGNoYW5nZSBhZnRlciBhXG4gICAgICAgIC8vIHVzZXIgY2hhbmdlXG4gICAgICAgIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldERvY3VtZW50T3ZlcmxheUNhY2hlKHQpLCB0aGlzLmluZGV4TWFuYWdlciA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKHQpLCBcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKHQsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgdGhpcy5sb2NhbERvY3VtZW50cyA9IG5ldyBrbyh0aGlzLlppLCB0aGlzLm11dGF0aW9uUXVldWUsIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgXG4gICAgICAgIHRoaXMuWmkuc2V0SW5kZXhNYW5hZ2VyKHRoaXMuaW5kZXhNYW5hZ2VyKSwgdGhpcy5IaS5pbml0aWFsaXplKHRoaXMubG9jYWxEb2N1bWVudHMsIHRoaXMuaW5kZXhNYW5hZ2VyKTtcbiAgICB9XG4gICAgY29sbGVjdEdhcmJhZ2UodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkNvbGxlY3QgZ2FyYmFnZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHQuY29sbGVjdChlLCB0aGlzLkppKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3UoXG4vKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG50LCBlLCBuLCBzKSB7XG4gICAgcmV0dXJuIG5ldyBudSh0LCBlLCBuLCBzKTtcbn1cblxuLyoqXG4gKiBUZWxscyB0aGUgTG9jYWxTdG9yZSB0aGF0IHRoZSBjdXJyZW50bHkgYXV0aGVudGljYXRlZCB1c2VyIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEluIHJlc3BvbnNlIHRoZSBsb2NhbCBzdG9yZSBzd2l0Y2hlcyB0aGUgbXV0YXRpb24gcXVldWUgdG8gdGhlIG5ldyB1c2VyIGFuZFxuICogcmV0dXJucyBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogQW5kcm9pZCBhbmQgaU9TIG9ubHkgcmV0dXJuIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgdGhlXG4vLyBjaGFuZ2UuXG5hc3luYyBmdW5jdGlvbiBpdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgcmV0dXJuIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJIYW5kbGUgdXNlciBjaGFuZ2VcIiwgXCJyZWFkb25seVwiLCAodCA9PiB7XG4gICAgICAgIC8vIFN3YXAgb3V0IHRoZSBtdXRhdGlvbiBxdWV1ZSwgZ3JhYmJpbmcgdGhlIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlc1xuICAgICAgICAvLyBiZWZvcmUgYW5kIGFmdGVyLlxuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkubmV4dCgoaSA9PiAocyA9IGksIG4udHIoZSksIG4ubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gW10sIHIgPSBbXTtcbiAgICAgICAgICAgIC8vIFVuaW9uIHRoZSBvbGQvbmV3IGNoYW5nZWQga2V5cy5cbiAgICAgICAgICAgIGxldCBvID0gZ3MoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBvID0gby5hZGQoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICByLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcbiAgICAgICAgICAgIC8vIG9mIG11dGF0aW9uIGJhdGNoIElEcyB0aGF0IHdlcmUgYWZmZWN0ZWQgYnkgY2hhbmdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHQsIG8pLm5leHQoKHQgPT4gKHtcbiAgICAgICAgICAgICAgICBlcjogdCxcbiAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHM6IGksXG4gICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkczogclxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH0pKTtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIHJ1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5iYXRjaC5rZXlzKCksIGkgPSBuLlppLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCByID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IFJ0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHMuZ2V0RW50cnkoZSwgdCkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZG9jVmVyc2lvbnMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgICAgICBGKG51bGwgIT09IHIpLCBlLnZlcnNpb24uY29tcGFyZVRvKHIpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgbiksIGUuaXNWYWxpZERvY3VtZW50KCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGNvbW1pdFZlcnNpb24gYXMgdGhlIHJlYWRUaW1lIHJhdGhlciB0aGFuIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCdzIHVwZGF0ZVRpbWUgc2luY2UgdGhlIHVwZGF0ZVRpbWUgaXMgbm90IGFkdmFuY2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB1cGRhdGVzIHRoYXQgZG8gbm90IG1vZGlmeSB0aGUgdW5kZXJseWluZyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgZS5zZXRSZWFkVGltZShuLmNvbW1pdFZlcnNpb24pLCBzLmFkZEVudHJ5KGUpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCBvLm5leHQoKCgpID0+IHQubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKGUsIGkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiwgdCwgZSwgaSkubmV4dCgoKCkgPT4gaS5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4ubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUucmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIHMsIGUuYmF0Y2guYmF0Y2hJZCkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKHQsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGxldCBlID0gZ3MoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5tdXRhdGlvblJlc3VsdHMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgICAgICB0Lm11dGF0aW9uUmVzdWx0c1tuXS50cmFuc2Zvcm1SZXN1bHRzLmxlbmd0aCA+IDAgJiYgKGUgPSBlLmFkZCh0LmJhdGNoLm11dGF0aW9uc1tuXS5rZXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcbiAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxuICovIChlKSkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0LCBzKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3QgcHJvY2Vzc2VkICh1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0b1xuICogZGV0ZXJtaW5lIHdoZXRoZXIgdG8gYnVmZmVyIGluY29taW5nIHNuYXBzaG90cyBmcm9tIHRoZSBiYWNrZW5kKS5cbiAqL1xuZnVuY3Rpb24gb3UodCkge1xuICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb25cIiwgXCJyZWFkb25seVwiLCAodCA9PiBlLkJzLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkpKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpIGRvY3VtZW50cy4gV2UgYXNzdW1lIHRoYXQgdGhlIHJlbW90ZVxuICogZXZlbnQgcmVmbGVjdHMgYW55IHdyaXRlIGJhdGNoZXMgdGhhdCBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkXG4gKiAoaS5lLiB3ZSBkbyBub3QgcmUtYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIHVwZGF0ZXMgZnJvbSB0aGlzIGV2ZW50KS5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovIGZ1bmN0aW9uIHV1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IGUuc25hcHNob3RWZXJzaW9uO1xuICAgIGxldCBpID0gbi5KaTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgciA9IG4uWmkubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxuICAgICAgICAgICAgICAgIGkgPSBuLkppO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgociwgdSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYyA9IGkuZ2V0KHUpO1xuICAgICAgICAgICAgaWYgKCFjKSByZXR1cm47XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG4uQnMucmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIHIucmVtb3ZlZERvY3VtZW50cywgdSkubmV4dCgoKCkgPT4gbi5Ccy5hZGRNYXRjaGluZ0tleXModCwgci5hZGRlZERvY3VtZW50cywgdSkpKSk7XG4gICAgICAgICAgICBsZXQgYSA9IGMud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgIG51bGwgIT09IGUudGFyZ2V0TWlzbWF0Y2hlcy5nZXQodSkgPyBhID0gYS53aXRoUmVzdW1lVG9rZW4oVmUuRU1QVFlfQllURV9TVFJJTkcsIHJ0Lm1pbigpKS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihydC5taW4oKSkgOiByLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKGEgPSBhLndpdGhSZXN1bWVUb2tlbihyLnJlc3VtZVRva2VuLCBzKSksIFxuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHUsIGEpLCBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFyZ2V0IGRhdGEgaWYgdGhlcmUgYXJlIHRhcmdldCBjaGFuZ2VzIChvciBpZlxuICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlKS5cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgLy8gQWx3YXlzIHBlcnNpc3QgdGFyZ2V0IGRhdGEgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcmVzdW1lIHRva2VuLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcbiAgICAgICAgICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAvLyBjbG9zaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGlmIHRoZSBvbmx5IHRoaW5nIHRoYXQgaGFzIGNoYW5nZWQgYWJvdXQgYSB0YXJnZXQgaXMgaXRzIHJlc3VtZVxuICAgICAgICAgICAgICAgIC8vIHRva2VuIGl0J3Mgbm90IHdvcnRoIHBlcnNpc3RpbmcuIE5vdGUgdGhhdCB0aGUgUmVtb3RlU3RvcmUga2VlcHMgYW5cbiAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gcmVzdW1lIHRva2VuLCBzbyBzdHJlYW0gZmFpbHVyZSBvciB1c2VyIGNoYW5nZXMgd2lsbCBzdGlsbCB1c2UgYW5cbiAgICAgICAgICAgICAgICAvLyB1cC10by1kYXRlIHJlc3VtZSB0b2tlbiByZWdhcmRsZXNzIG9mIHdoYXQgd2UgZG8gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWRkZWREb2N1bWVudHMuc2l6ZSArIG4ubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIG4ucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChjLCBhLCByKSAmJiBvLnB1c2gobi5Ccy51cGRhdGVUYXJnZXREYXRhKHQsIGEpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgdSA9IGNzKCksIGMgPSBncygpO1xuICAgICAgICAvLyBIQUNLOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgYSBudWxsIHNuYXBzaG90IHZlcnNpb24gaXMgc28gdGhhdCB3ZVxuICAgICAgICAvLyBjYW4gc3ludGhlc2l6ZSByZW1vdGUgZXZlbnRzIHdoZW4gd2UgZ2V0IHBlcm1pc3Npb24gZGVuaWVkIGVycm9ycyB3aGlsZVxuICAgICAgICAvLyB0cnlpbmcgdG8gcmVzb2x2ZSB0aGUgc3RhdGUgb2YgYSBsb2NhbGx5IGNhY2hlZCBkb2N1bWVudCB0aGF0IGlzIGluXG4gICAgICAgIC8vIGxpbWJvLlxuICAgICAgICBpZiAoZS5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaCgocyA9PiB7XG4gICAgICAgICAgICBlLnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKHMpICYmIG8ucHVzaChuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgcykpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBFYWNoIGxvb3AgaXRlcmF0aW9uIG9ubHkgYWZmZWN0cyBpdHMgXCJvd25cIiBkb2MsIHNvIGl0J3Mgc2FmZSB0byBnZXQgYWxsXG4gICAgICAgIC8vIHRoZSByZW1vdGUgZG9jdW1lbnRzIGluIGFkdmFuY2UgaW4gYSBzaW5nbGUgY2FsbC5cbiAgICAgICAgby5wdXNoKGN1KHQsIHIsIGUuZG9jdW1lbnRVcGRhdGVzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHUgPSB0Lm5yLCBjID0gdC5zcjtcbiAgICAgICAgfSkpKSwgIXMuaXNFcXVhbChydC5taW4oKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLkJzLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkubmV4dCgoZSA9PiBuLkJzLnNldFRhcmdldHNNZXRhZGF0YSh0LCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciwgcykpKTtcbiAgICAgICAgICAgIG8ucHVzaChlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUnQud2FpdEZvcihvKS5uZXh0KCgoKSA9PiByLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyh0LCB1LCBjKSkpLm5leHQoKCgpID0+IHUpKTtcbiAgICB9KSkudGhlbigodCA9PiAobi5KaSA9IGksIHQpKSk7XG59XG5cbi8qKlxuICogUG9wdWxhdGVzIGRvY3VtZW50IGNoYW5nZSBidWZmZXIgd2l0aCBkb2N1bWVudHMgZnJvbSBiYWNrZW5kIG9yIGEgYnVuZGxlLlxuICogUmV0dXJucyB0aGUgZG9jdW1lbnQgY2hhbmdlcyByZXN1bHRpbmcgZnJvbSBhcHBseWluZyB0aG9zZSBkb2N1bWVudHMsIGFuZFxuICogYWxzbyBhIHNldCBvZiBkb2N1bWVudHMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlIGFyZSBjaGFuZ2VkIGFzIGEgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUcmFuc2FjdGlvbiB0byB1c2UgdG8gcmVhZCBleGlzdGluZyBkb2N1bWVudHMgZnJvbSBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50QnVmZmVyIC0gRG9jdW1lbnQgYnVmZmVyIHRvIGNvbGxlY3QgdGhlIHJlc3VsdGVkIGNoYW5nZXMgdG8gYmVcbiAqICAgICAgICBhcHBsaWVkIHRvIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIGJlIGFwcGxpZWQuXG4gKi8gZnVuY3Rpb24gY3UodCwgZSwgbikge1xuICAgIGxldCBzID0gZ3MoKSwgaSA9IGdzKCk7XG4gICAgcmV0dXJuIG4uZm9yRWFjaCgodCA9PiBzID0gcy5hZGQodCkpKSwgZS5nZXRFbnRyaWVzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICBsZXQgcyA9IGNzKCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdC5nZXQobik7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzZWUgaWYgdGhlcmUgaXMgYSBleGlzdGVuY2Ugc3RhdGUgY2hhbmdlIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgci5pc0ZvdW5kRG9jdW1lbnQoKSAhPT0gby5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoaSA9IGkuYWRkKG4pKSwgXG4gICAgICAgICAgICAvLyBOb3RlOiBUaGUgb3JkZXIgb2YgdGhlIHN0ZXBzIGJlbG93IGlzIGltcG9ydGFudCwgc2luY2Ugd2Ugd2FudFxuICAgICAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgcmVqZWN0ZWQgbGltYm8gcmVzb2x1dGlvbnMgKHdoaWNoIGZhYnJpY2F0ZVxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkpIG5ldmVyIGFkZCBkb2N1bWVudHMgdG9cbiAgICAgICAgICAgIC8vIGNhY2hlLlxuICAgICAgICAgICAgci5pc05vRG9jdW1lbnQoKSAmJiByLnZlcnNpb24uaXNFcXVhbChydC5taW4oKSkgPyAoXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSBhcmUgdXNlZCBpbiBtYW51ZmFjdHVyZWRcbiAgICAgICAgICAgIC8vIGV2ZW50cy4gV2UgcmVtb3ZlIHRoZXNlIGRvY3VtZW50cyBmcm9tIGNhY2hlIHNpbmNlIHdlIGxvc3RcbiAgICAgICAgICAgIC8vIGFjY2Vzcy5cbiAgICAgICAgICAgIGUucmVtb3ZlRW50cnkobiwgci5yZWFkVGltZSksIHMgPSBzLmluc2VydChuLCByKSkgOiAhby5pc1ZhbGlkRG9jdW1lbnQoKSB8fCByLnZlcnNpb24uY29tcGFyZVRvKG8udmVyc2lvbikgPiAwIHx8IDAgPT09IHIudmVyc2lvbi5jb21wYXJlVG8oby52ZXJzaW9uKSAmJiBvLmhhc1BlbmRpbmdXcml0ZXMgPyAoZS5hZGRFbnRyeShyKSwgXG4gICAgICAgICAgICBzID0gcy5pbnNlcnQobiwgcikpIDogTihcIkxvY2FsU3RvcmVcIiwgXCJJZ25vcmluZyBvdXRkYXRlZCB3YXRjaCB1cGRhdGUgZm9yIFwiLCBuLCBcIi4gQ3VycmVudCB2ZXJzaW9uOlwiLCBvLnZlcnNpb24sIFwiIFdhdGNoIHZlcnNpb246XCIsIHIudmVyc2lvbik7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgbnI6IHMsXG4gICAgICAgICAgICBzcjogaVxuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiBhdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsICh0ID0+ICh2b2lkIDAgPT09IGUgJiYgKGUgPSAtMSksIFxuICAgIG4ubXV0YXRpb25RdWV1ZS5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSkpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIERvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgb3IgbnVsbCBpZiBub3RcbiAqIGZvdW5kIC0gdXNlZCBmb3IgdGVzdGluZy5cbiAqL1xuLyoqXG4gKiBBc3NpZ25zIHRoZSBnaXZlbiB0YXJnZXQgYW4gaW50ZXJuYWwgSUQgc28gdGhhdCBpdHMgcmVzdWx0cyBjYW4gYmUgcGlubmVkIHNvXG4gKiB0aGV5IGRvbid0IGdldCBHQydkLiBBIHRhcmdldCBtdXN0IGJlIGFsbG9jYXRlZCBpbiB0aGUgbG9jYWwgc3RvcmUgYmVmb3JlXG4gKiB0aGUgc3RvcmUgY2FuIGJlIHVzZWQgdG8gbWFuYWdlIGl0cyB2aWV3LlxuICpcbiAqIEFsbG9jYXRpbmcgYW4gYWxyZWFkeSBhbGxvY2F0ZWQgYFRhcmdldGAgd2lsbCByZXR1cm4gdGhlIGV4aXN0aW5nIGBUYXJnZXREYXRhYFxuICogZm9yIHRoYXQgYFRhcmdldGAuXG4gKi9cbmZ1bmN0aW9uIGh1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFsbG9jYXRlIHRhcmdldFwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gbi5Ccy5nZXRUYXJnZXREYXRhKHQsIGUpLm5leHQoKGkgPT4gaSA/IChcbiAgICAgICAgLy8gVGhpcyB0YXJnZXQgaGFzIGJlZW4gbGlzdGVuZWQgdG8gcHJldmlvdXNseSwgc28gcmV1c2UgdGhlXG4gICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxuICAgICAgICAvLyBUT0RPKG1jZyk6IGZyZXNoZW4gbGFzdCBhY2Nlc3NlZCBkYXRlP1xuICAgICAgICBzID0gaSwgUnQucmVzb2x2ZShzKSkgOiBuLkJzLmFsbG9jYXRlVGFyZ2V0SWQodCkubmV4dCgoaSA9PiAocyA9IG5ldyBjcihlLCBpLCBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyAsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgXG4gICAgICAgIG4uQnMuYWRkVGFyZ2V0RGF0YSh0LCBzKS5uZXh0KCgoKSA9PiBzKSkpKSkpKTtcbiAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgIC8vIElmIE11bHRpLVRhYiBpcyBlbmFibGVkLCB0aGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgbWF5IGJlIG5ld2VyIHRoYW5cbiAgICAgICAgLy8gdGhlIGluLW1lbW9yeSBkYXRhXG4gICAgICAgIGNvbnN0IHMgPSBuLkppLmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcmV0dXJuIChudWxsID09PSBzIHx8IHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhzLnNuYXBzaG90VmVyc2lvbikgPiAwKSAmJiAobi5KaSA9IG4uSmkuaW5zZXJ0KHQudGFyZ2V0SWQsIHQpLCBcbiAgICAgICAgbi5ZaS5zZXQoZSwgdC50YXJnZXRJZCkpLCB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGFzIHNlZW4gYnkgdGhlIExvY2FsU3RvcmUsIGluY2x1ZGluZyB1cGRhdGVzIHRoYXQgbWF5XG4gKiBoYXZlIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQgdG8gdGhlIFRhcmdldENhY2hlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuLyoqXG4gKiBVbnBpbnMgYWxsIHRoZSBkb2N1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YXJnZXQuIElmXG4gKiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIHNldCB0byBmYWxzZSBhbmQgRWFnZXIgR0MgZW5hYmxlZCwgdGhlIG1ldGhvZFxuICogZGlyZWN0bHkgcmVtb3ZlcyB0aGUgYXNzb2NpYXRlZCB0YXJnZXQgZGF0YSBmcm9tIHRoZSB0YXJnZXQgY2FjaGUuXG4gKlxuICogUmVsZWFzaW5nIGEgbm9uLWV4aXN0aW5nIGBUYXJnZXRgIGlzIGEgbm8tb3AuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBtdWx0aS10YWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGx1KHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KSwgaSA9IHMuSmkuZ2V0KGUpLCByID0gbiA/IFwicmVhZHdyaXRlXCIgOiBcInJlYWR3cml0ZS1wcmltYXJ5XCI7XG4gICAgdHJ5IHtcbiAgICAgICAgbiB8fCBhd2FpdCBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVsZWFzZSB0YXJnZXRcIiwgciwgKHQgPT4gcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVUYXJnZXQodCwgaSkpKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGlmICghRHQodCkpIHRocm93IHQ7XG4gICAgICAgIC8vIEFsbCBgcmVsZWFzZVRhcmdldGAgZG9lcyBpcyByZWNvcmQgdGhlIGZpbmFsIG1ldGFkYXRhIHN0YXRlIGZvciB0aGVcbiAgICAgICAgLy8gdGFyZ2V0LCBidXQgd2UndmUgYmVlbiByZWNvcmRpbmcgdGhpcyBwZXJpb2RpY2FsbHkgZHVyaW5nIHRhcmdldFxuICAgICAgICAvLyBhY3Rpdml0eS4gSWYgd2UgbG9zZSB0aGlzIHdyaXRlIHRoaXMgY291bGQgY2F1c2UgYSB2ZXJ5IHNsaWdodFxuICAgICAgICAvLyBkaWZmZXJlbmNlIGluIHRoZSBvcmRlciBvZiB0YXJnZXQgZGVsZXRpb24gZHVyaW5nIEdDLCBidXQgd2VcbiAgICAgICAgLy8gZG9uJ3QgZGVmaW5lIGV4YWN0IExSVSBzZW1hbnRpY3Mgc28gdGhpcyBpcyBhY2NlcHRhYmxlLlxuICAgICAgICBOKFwiTG9jYWxTdG9yZVwiLCBgRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzIGZvciB0YXJnZXQgJHtlfTogJHt0fWApO1xuICAgIH1cbiAgICBzLkppID0gcy5KaS5yZW1vdmUoZSksIHMuWWkuZGVsZXRlKGkudGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXG4gKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXG4gKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cbiAqXG4gKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIC0gV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cbiAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXG4gKi8gZnVuY3Rpb24gZnUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpO1xuICAgIGxldCBpID0gcnQubWluKCksIHIgPSBncygpO1xuICAgIHJldHVybiBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRXhlY3V0ZSBxdWVyeVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEwodCksIGkgPSBzLllpLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gaSA/IFJ0LnJlc29sdmUocy5KaS5nZXQoaSkpIDogcy5Ccy5nZXRUYXJnZXREYXRhKGUsIG4pO1xuICAgIH0ocywgdCwgSm4oZSkpLm5leHQoKGUgPT4ge1xuICAgICAgICBpZiAoZSkgcmV0dXJuIGkgPSBlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHMuQnMuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICByID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBzLkhpLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiA/IGkgOiBydC5taW4oKSwgbiA/IHIgOiBncygpKSkpLm5leHQoKHQgPT4gKF91KHMsIHNzKGUpLCB0KSwgXG4gICAge1xuICAgICAgICBkb2N1bWVudHM6IHQsXG4gICAgICAgIGlyOiByXG4gICAgfSkpKSkpO1xufVxuXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gZHUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gTChuLkJzKSwgaSA9IG4uSmkuZ2V0KGUpO1xuICAgIHJldHVybiBpID8gUHJvbWlzZS5yZXNvbHZlKGkudGFyZ2V0KSA6IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgdGFyZ2V0IGRhdGFcIiwgXCJyZWFkb25seVwiLCAodCA9PiBzLmxlKHQsIGUpLm5leHQoKHQgPT4gdCA/IHQudGFyZ2V0IDogbnVsbCkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIHNpbmNlIHRoZSBsYXN0IGNhbGwuXG4gKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCByZXR1cm5zIHRoZSBzZXQgb2YgY2hhbmdlcyBzaW5jZSBjbGllbnRcbiAqIGluaXRpYWxpemF0aW9uLiBGdXJ0aGVyIGludm9jYXRpb25zIHdpbGwgcmV0dXJuIGRvY3VtZW50IHRoYXQgaGF2ZSBjaGFuZ2VkXG4gKiBzaW5jZSB0aGUgcHJpb3IgY2FsbC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIHd1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IG4uWGkuZ2V0KGUpIHx8IHJ0Lm1pbigpO1xuICAgIC8vIEdldCB0aGUgY3VycmVudCBtYXhpbXVtIHJlYWQgdGltZSBmb3IgdGhlIGNvbGxlY3Rpb24uIFRoaXMgc2hvdWxkIGFsd2F5c1xuICAgIC8vIGV4aXN0LCBidXQgdG8gcmVkdWNlIHRoZSBjaGFuY2UgZm9yIHJlZ3Jlc3Npb25zIHdlIGRlZmF1bHQgdG9cbiAgICAvLyBTbmFwc2hvdFZlcnNpb24uTWluKClcbiAgICAvLyBUT0RPKGluZGV4aW5nKTogQ29uc2lkZXIgcmVtb3ZpbmcgdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5aaS5nZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUsIHl0KHMsIC0xKSwgXG4gICAgLyogbGltaXQ9ICovIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkpLnRoZW4oKHQgPT4gKF91KG4sIGUsIHQpLCB0KSkpO1xufVxuXG4vKiogU2V0cyB0aGUgY29sbGVjdGlvbiBncm91cCdzIG1heGltdW0gcmVhZCB0aW1lIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50cy4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfdSh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSB0LlhpLmdldChlKSB8fCBydC5taW4oKTtcbiAgICBuLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgIGUucmVhZFRpbWUuY29tcGFyZVRvKHMpID4gMCAmJiAocyA9IGUucmVhZFRpbWUpO1xuICAgIH0pKSwgdC5YaS5zZXQoZSwgcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgdXNpbmcgdGhlIGdpdmVuIGJ1bmRsZSBuYW1lLCB3aGljaCB3aWxsIGJlIHVzZWQgdG9cbiAqIGhvbGQgdGhlIGtleXMgb2YgYWxsIGRvY3VtZW50cyBmcm9tIHRoZSBidW5kbGUgaW4gcXVlcnktZG9jdW1lbnQgbWFwcGluZ3MuXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUgbG9hZGVkIGRvY3VtZW50cyBkbyBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkXG4gKiByaWdodCBhd2F5LlxuICovXG4vKipcbiAqIEFwcGxpZXMgdGhlIGRvY3VtZW50cyBmcm9tIGEgYnVuZGxlIHRvIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gbXUodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBMKHQpO1xuICAgIGxldCByID0gZ3MoKSwgbyA9IGNzKCk7XG4gICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUucnIodC5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgdC5kb2N1bWVudCAmJiAociA9IHIuYWRkKG4pKTtcbiAgICAgICAgY29uc3QgcyA9IGUudXIodCk7XG4gICAgICAgIHMuc2V0UmVhZFRpbWUoZS5jcih0Lm1ldGFkYXRhLnJlYWRUaW1lKSksIG8gPSBvLmluc2VydChuLCBzKTtcbiAgICB9XG4gICAgY29uc3QgdSA9IGkuWmkubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICB9KSwgYyA9IGF3YWl0IGh1KGksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXQgaXMgT0sgdGhhdCB0aGUgcGF0aCB1c2VkIGZvciB0aGUgcXVlcnkgaXMgbm90IHZhbGlkLCBiZWNhdXNlIHRoaXMgd2lsbFxuICAgICAgICAvLyBub3QgYmUgcmVhZCBhbmQgcXVlcmllZC5cbiAgICAgICAgcmV0dXJuIEpuKEduKHV0LmZyb21TdHJpbmcoYF9fYnVuZGxlX18vZG9jcy8ke3R9YCkpKTtcbiAgICB9KHMpKTtcbiAgICAvLyBBbGxvY2F0ZXMgYSB0YXJnZXQgdG8gaG9sZCBhbGwgZG9jdW1lbnQga2V5cyBmcm9tIHRoZSBidW5kbGUsIHN1Y2ggdGhhdFxuICAgIC8vIHRoZXkgd2lsbCBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkIHJpZ2h0IGF3YXkuXG4gICAgICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgYnVuZGxlIGRvY3VtZW50c1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBjdSh0LCB1LCBvKS5uZXh0KChlID0+ICh1LmFwcGx5KHQpLCBcbiAgICBlKSkpLm5leHQoKGUgPT4gaS5Ccy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBjLnRhcmdldElkKS5uZXh0KCgoKSA9PiBpLkJzLmFkZE1hdGNoaW5nS2V5cyh0LCByLCBjLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHModCwgZS5uciwgZS5zcikpKS5uZXh0KCgoKSA9PiBlLm5yKSkpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYm9vbGVhbiB0byBpbmRpY2F0ZSBpZiB0aGUgZ2l2ZW4gYnVuZGxlIGhhcyBhbHJlYWR5XG4gKiBiZWVuIGxvYWRlZCBhbmQgdGhlIGNyZWF0ZSB0aW1lIGlzIG5ld2VyIHRoYW4gdGhlIGN1cnJlbnQgbG9hZGluZyBidW5kbGUuXG4gKi9cbi8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBOYW1lZFF1ZXJ5YCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ3UodCwgZSwgbiA9IGdzKCkpIHtcbiAgICAvLyBBbGxvY2F0ZSBhIHRhcmdldCBmb3IgdGhlIG5hbWVkIHF1ZXJ5IHN1Y2ggdGhhdCBpdCBjYW4gYmUgcmVzdW1lZFxuICAgIC8vIGZyb20gYXNzb2NpYXRlZCByZWFkIHRpbWUgaWYgdXNlcnMgdXNlIGl0IHRvIGxpc3Rlbi5cbiAgICAvLyBOT1RFOiB0aGlzIGFsc28gbWVhbnMgaWYgbm8gY29ycmVzcG9uZGluZyB0YXJnZXQgZXhpc3RzLCB0aGUgbmV3IHRhcmdldFxuICAgIC8vIHdpbGwgcmVtYWluIGFjdGl2ZSBhbmQgd2lsbCBub3QgZ2V0IGNvbGxlY3RlZCwgdW5sZXNzIHVzZXJzIGhhcHBlbiB0b1xuICAgIC8vIHVubGlzdGVuIHRoZSBxdWVyeSBzb21laG93LlxuICAgIGNvbnN0IHMgPSBhd2FpdCBodSh0LCBKbih5cihlLmJ1bmRsZWRRdWVyeSkpKSwgaSA9IEwodCk7XG4gICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIG5hbWVkIHF1ZXJ5XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgciA9IE5pKGUucmVhZFRpbWUpO1xuICAgICAgICAvLyBTaW1wbHkgc2F2ZSB0aGUgcXVlcnkgaXRzZWxmIGlmIGl0IGlzIG9sZGVyIHRoYW4gd2hhdCB0aGUgU0RLIGFscmVhZHlcbiAgICAgICAgLy8gaGFzLlxuICAgICAgICAgICAgICAgIGlmIChzLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocikgPj0gMCkgcmV0dXJuIGkucXMuc2F2ZU5hbWVkUXVlcnkodCwgZSk7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyB0YXJnZXQgZGF0YSBiZWNhdXNlIHRoZSBxdWVyeSBmcm9tIHRoZSBidW5kbGUgaXMgbmV3ZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHMud2l0aFJlc3VtZVRva2VuKFZlLkVNUFRZX0JZVEVfU1RSSU5HLCByKTtcbiAgICAgICAgcmV0dXJuIGkuSmkgPSBpLkppLmluc2VydChvLnRhcmdldElkLCBvKSwgaS5Ccy51cGRhdGVUYXJnZXREYXRhKHQsIG8pLm5leHQoKCgpID0+IGkuQnMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgcy50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLkJzLmFkZE1hdGNoaW5nS2V5cyh0LCBuLCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkucXMuc2F2ZU5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KSk7XG59XG5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24geXUodCwgZSkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX2NsaWVudHNfJHt0fV8ke2V9YDtcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIG11dGF0aW9uIHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPlxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxuLy8gb3I6IGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPl88dXNlcl91aWQ+XG5cbi8vICd1c2VyX3VpZCcgaXMgbGFzdCB0byBhdm9pZCBuZWVkaW5nIHRvIGVzY2FwZSAnXycgY2hhcmFjdGVycyB0aGF0IGl0IG1pZ2h0XG4vLyBjb250YWluLlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIG11dGF0aW9uIGJhdGNoIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIHB1KHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IGBmaXJlc3RvcmVfbXV0YXRpb25zXyR7dH1fJHtufWA7XG4gICAgcmV0dXJuIGUuaXNBdXRoZW50aWNhdGVkKCkgJiYgKHMgKz0gYF8ke2UudWlkfWApLCBzO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxuLy8gICAgIGZpcmVzdG9yZV90YXJnZXRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Xzx0YXJnZXRfaWQ+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gSXUodCwgZSkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX3RhcmdldHNfJHt0fV8ke2V9YDtcbn1cblxuLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgc3RvcmVzIHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZS4gVGhlXG4vLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxuICogd2hldGhlciB0aGUgYmF0Y2ggaXMgJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBUdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXIgPSB0LCB0aGlzLmJhdGNoSWQgPSBlLCB0aGlzLnN0YXRlID0gbiwgdGhpcy5lcnJvciA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIE11dGF0aW9uTWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBhcih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKU09OLnBhcnNlKG4pO1xuICAgICAgICBsZXQgaSwgciA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHMgJiYgLTEgIT09IFsgXCJwZW5kaW5nXCIsIFwiYWNrbm93bGVkZ2VkXCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yocy5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gcy5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBzLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIHIgJiYgcy5lcnJvciAmJiAociA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHMuZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLmNvZGUsIFxuICAgICAgICByICYmIChpID0gbmV3IFUocy5lcnJvci5jb2RlLCBzLmVycm9yLm1lc3NhZ2UpKSksIHIgPyBuZXcgVHUodCwgZSwgcy5zdGF0ZSwgaSkgOiAoayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICcke2V9JzogJHtufWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIGhyKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKHQuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBFdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5zdGF0ZSA9IGUsIHRoaXMuZXJyb3IgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgYXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgbGV0IHMsIGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIC0xICE9PSBbIFwibm90LWN1cnJlbnRcIiwgXCJjdXJyZW50XCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yobi5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gbi5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBuLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIGkgJiYgbi5lcnJvciAmJiAoaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLmNvZGUsIFxuICAgICAgICBpICYmIChzID0gbmV3IFUobi5lcnJvci5jb2RlLCBuLmVycm9yLm1lc3NhZ2UpKSksIGkgPyBuZXcgRXUodCwgbi5zdGF0ZSwgcykgOiAoayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgdGFyZ2V0IHN0YXRlIGZvciBJRCAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBocigpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBpbW11dGFibGUgQ2xpZW50U3RhdGUgZm9yIGEgY2xpZW50IHJlYWQgZnJvbVxuICogV2ViU3RvcmFnZSwgY29udGFpbmluZyB0aGUgbGlzdCBvZiBhY3RpdmUgcXVlcnkgdGFyZ2V0cy5cbiAqLyBjbGFzcyBBdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBSZW1vdGVDbGllbnRTdGF0ZSBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIGFyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiBuLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5LCBpID0gcHMoKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHMgJiYgdCA8IG4uYWN0aXZlVGFyZ2V0SWRzLmxlbmd0aDsgKyt0KSBzID0gTHQobi5hY3RpdmVUYXJnZXRJZHNbdF0pLCBcbiAgICAgICAgaSA9IGkuYWRkKG4uYWN0aXZlVGFyZ2V0SWRzW3RdKTtcbiAgICAgICAgcmV0dXJuIHMgPyBuZXcgQXUodCwgaSkgOiAoayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgY2xpZW50IGRhdGEgZm9yIGluc3RhbmNlICcke3R9JzogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgb25saW5lIHN0YXRlIGZvciBhbGwgY2xpZW50cyBwYXJ0aWNpcGF0aW5nIGluXG4gKiBtdWx0aS10YWIuIFRoZSBvbmxpbmUgc3RhdGUgaXMgb25seSB3cml0dGVuIHRvIGJ5IHRoZSBwcmltYXJ5IGNsaWVudCwgYW5kXG4gKiB1c2VkIGluIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3cy5cbiAqLyBjbGFzcyB2dSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFNoYXJlZE9ubGluZVN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgYXIodCkge1xuICAgICAgICBjb25zdCBlID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgLTEgIT09IFsgXCJVbmtub3duXCIsIFwiT25saW5lXCIsIFwiT2ZmbGluZVwiIF0uaW5kZXhPZihlLm9ubGluZVN0YXRlKSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLmNsaWVudElkID8gbmV3IHZ1KGUuY2xpZW50SWQsIGUub25saW5lU3RhdGUpIDogKGsoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG9ubGluZSBzdGF0ZTogJHt0fWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1ldGFkYXRhIHN0YXRlIG9mIHRoZSBsb2NhbCBjbGllbnQuIFVubGlrZSBgUmVtb3RlQ2xpZW50U3RhdGVgLCB0aGlzIGNsYXNzIGlzXG4gKiBtdXRhYmxlIGFuZCBrZWVwcyB0cmFjayBvZiBhbGwgcGVuZGluZyBtdXRhdGlvbnMsIHdoaWNoIGFsbG93cyB1cyB0b1xuICogdXBkYXRlIHRoZSByYW5nZSBvZiBwZW5kaW5nIG11dGF0aW9uIGJhdGNoIElEcyBhcyBuZXcgbXV0YXRpb25zIGFyZSBhZGRlZCBvclxuICogcmVtb3ZlZC5cbiAqXG4gKiBUaGUgZGF0YSBpbiBgTG9jYWxDbGllbnRTdGF0ZWAgaXMgbm90IHJlYWQgZnJvbSBXZWJTdG9yYWdlIGFuZCBpbnN0ZWFkXG4gKiB1cGRhdGVkIHZpYSBpdHMgaW5zdGFuY2UgbWV0aG9kcy4gVGhlIHVwZGF0ZWQgc3RhdGUgY2FuIGJlIHNlcmlhbGl6ZWQgdmlhXG4gKiBgdG9XZWJTdG9yYWdlSlNPTigpYC5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbmNsYXNzIFJ1IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBwcygpO1xuICAgIH1cbiAgICBscih0KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKHQpO1xuICAgIH1cbiAgICBkcih0KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXG4gICAgICovICAgIGhyKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxuICovIGNsYXNzIFB1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gdCwgdGhpcy5paSA9IGUsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLndyID0gcywgdGhpcy5zeW5jRW5naW5lID0gbnVsbCwgXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsLCB0aGlzLl9yID0gdGhpcy5tci5iaW5kKHRoaXMpLCBcbiAgICAgICAgdGhpcy5nciA9IG5ldyBwZShldCksIHRoaXMuc3RhcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55ciA9IFtdO1xuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXG4gICAgICAgIGNvbnN0IHIgPSBuLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLCB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5wciA9IHl1KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMud3IpLCBcbiAgICAgICAgdGhpcy5JciA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBjdXJyZW50IHNlcXVlbmNlIG51bWJlci4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5nciA9IHRoaXMuZ3IuaW5zZXJ0KHRoaXMud3IsIG5ldyBSdSksIHRoaXMuVHIgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX2NsaWVudHNfJHtyfV8oW15fXSopJGApLCBcbiAgICAgICAgdGhpcy5FciA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfbXV0YXRpb25zXyR7cn1fKFxcXFxkKykoPzpfKC4qKSk/JGApLCB0aGlzLkFyID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV90YXJnZXRzXyR7cn1fKFxcXFxkKykkYCksIFxuICAgICAgICB0aGlzLnZyID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIG9ubGluZSBzdGF0ZSBvZiB0aGUgcHJpbWFyeSB0YWIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBwbGF5cyBhcyBhIGV2ZW50IHRvIGluZGljYXRlIHRoZSByZW1vdGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCBkdWUgdG8gc29tZSBzZWNvbmRhcnkgdGFicyBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAgICAvLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbiAgICAgICAgLy8gICAgIGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXzxwZXJzaXN0ZW5jZUtleT5cbiAgICAgICAgLy8gVGhlIHZlcnNpb24gZW5kaW5nIHdpdGggXCJ2MlwiIHN0b3JlcyB0aGUgbGlzdCBvZiBtb2RpZmllZCBjb2xsZWN0aW9uIGdyb3Vwcy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLlJyID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF92Ml8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBrZXkgcHJlZml4IGZvciB0aGUga2V5IHRoYXQgc3RvcmVzIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhbGxvY2F0ZWQuIFRoZSBrZXlcbiAgICAgICAgLy8gbG9va3MgbGlrZSAnZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl88cGVyc2lzdGVuY2VfcHJlZml4PicuXG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIGFkZGluZyB0aGUgc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgc3RhcnQoKSwgd2UgYWRkIHRoZVxuICAgICAgICAvLyBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBpbml0aWFsaXphdGlvbi4gVGhpcyBlbnN1cmVzIHRoYXQgd2UgY29sbGVjdFxuICAgICAgICAvLyBldmVudHMgYmVmb3JlIG90aGVyIGNvbXBvbmVudHMgcG9wdWxhdGUgdGhlaXIgaW5pdGlhbCBzdGF0ZSAoZHVyaW5nIHRoZWlyXG4gICAgICAgIC8vIHJlc3BlY3RpdmUgc3RhcnQoKSBjYWxscykuIE90aGVyd2lzZSwgd2UgbWlnaHQgZm9yIGV4YW1wbGUgbWlzcyBhXG4gICAgICAgIC8vIG11dGF0aW9uIHRoYXQgaXMgYWRkZWQgYWZ0ZXIgTG9jYWxTdG9yZSdzIHN0YXJ0KCkgcHJvY2Vzc2VkIHRoZSBleGlzdGluZ1xuICAgICAgICAvLyBtdXRhdGlvbnMgYnV0IGJlZm9yZSB3ZSBvYnNlcnZlIFdlYlN0b3JhZ2UgZXZlbnRzLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLl9yKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmIFdlYlN0b3JhZ2UgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgRCh0KSB7XG4gICAgICAgIHJldHVybiAhKCF0IHx8ICF0LmxvY2FsU3RvcmFnZSk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjbGllbnRzIHRvIGJhY2tmaWxsIHRoZSBkYXRhIGluXG4gICAgICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5zeW5jRW5naW5lLiRpKCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdGhpcy53cikgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRJdGVtKHl1KHRoaXMucGVyc2lzdGVuY2VLZXksIGUpKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEF1LmFyKGUsIHQpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMuZ3IgPSB0aGlzLmdyLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5QcigpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMudnIpO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnIoZSk7XG4gICAgICAgICAgICB0ICYmIHRoaXMuVnIodCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMueXIpIHRoaXMubXIodCk7XG4gICAgICAgIHRoaXMueXIgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5JciwgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlNyKHRoaXMuZ3IpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3IuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KSAmJiAoZSA9ICEwKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24odCkge1xuICAgICAgICB0aGlzLkRyKHQsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuRHIodCwgZSwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLkNyKHQpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5vdC1jdXJyZW50XCI7XG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oSXUodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gRXUuYXIodCwgbik7XG4gICAgICAgICAgICAgICAgcyAmJiAoZSA9IHMuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLk5yLmxyKHQpLCB0aGlzLlByKCksIGU7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICB0aGlzLk5yLmRyKHQpLCB0aGlzLlByKCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5yLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShJdSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLmtyKHQsIGUsIG4pO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuQ3IodCk7XG4gICAgICAgIH0pKSwgdGhpcy5jdXJyZW50VXNlciA9IHQsIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNdXRhdGlvbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMuTXIodCk7XG4gICAgfVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCh0KSB7XG4gICAgICAgIHRoaXMuJHIodCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuX3IpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5wciksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7XG4gICAgICAgIHJldHVybiBOKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIHQsIGUpLCBlO1xuICAgIH1cbiAgICBzZXRJdGVtKHQsIGUpIHtcbiAgICAgICAgTihcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIHQsIGUpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbSh0KSB7XG4gICAgICAgIE4oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCB0KSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIG1yKHQpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKGUuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKE4oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIGUua2V5LCBlLm5ld1ZhbHVlKSwgZS5rZXkgPT09IHRoaXMucHIpIHJldHVybiB2b2lkIGsoXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuaWkuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUua2V5KSBpZiAodGhpcy5Uci50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLk9yKGUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Gcih0LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5CcihlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLkZyKHQuY2xpZW50SWQsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuRXIudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuTHIoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5xcih0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLkFyLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlVyKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuS3IodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMudnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnIoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLlZyKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLklyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gT3QuY3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEYoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiksIGUgPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRmFpbGVkIHRvIHJlYWQgc2VxdWVuY2UgbnVtYmVyIGZyb20gV2ViU3RvcmFnZVwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAqIGBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZWAgaXMgYSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgU2hhcmVkQ2xpZW50U3RhdGUgZm9yXG4gKiBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZS4gVGhlIHN0YXRlIGluIHRoaXMgY2xhc3MgcmVtYWlucyBmdWxseVxuICogaXNvbGF0ZWQgYW5kIG5vIHN5bmNocm9uaXphdGlvbiBpcyBwZXJmb3JtZWQuXG4gKi8gKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdCAhPT0gT3QuY3QgJiYgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIodCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuUnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkdyKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKHQgPT4gdGhpcy5zeW5jRW5naW5lLlFyKHQpKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMueXIucHVzaChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgTnIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyLmdldCh0aGlzLndyKTtcbiAgICB9XG4gICAgUHIoKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLnByLCB0aGlzLk5yLmhyKCkpO1xuICAgIH1cbiAgICBEcih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgVHUodGhpcy5jdXJyZW50VXNlciwgdCwgZSwgbiksIGkgPSBwdSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGksIHMuaHIoKSk7XG4gICAgfVxuICAgIENyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHB1KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIHQpO1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oZSk7XG4gICAgfVxuICAgIE1yKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLndyLFxuICAgICAgICAgICAgb25saW5lU3RhdGU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy52ciwgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgIH1cbiAgICBrcih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBJdSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSwgaSA9IG5ldyBFdSh0LCBlLCBuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHMsIGkuaHIoKSk7XG4gICAgfVxuICAgICRyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20odCkpO1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5SciwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgT3IodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Uci5leGVjKHQpO1xuICAgICAgICByZXR1cm4gZSA/IGVbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgQnIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Pcih0KTtcbiAgICAgICAgcmV0dXJuIEF1LmFyKG4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBMcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkVyLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSksIGkgPSB2b2lkIDAgIT09IG5bMl0gPyBuWzJdIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIFR1LmFyKG5ldyBWKGkpLCBzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgVXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Bci5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pO1xuICAgICAgICByZXR1cm4gRXUuYXIocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBicih0KSB7XG4gICAgICAgIHJldHVybiB2dS5hcih0KTtcbiAgICB9XG4gICAgR3IodCkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0KTtcbiAgICB9XG4gICAgYXN5bmMgcXIodCkge1xuICAgICAgICBpZiAodC51c2VyLnVpZCA9PT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuanIodC5iYXRjaElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICAgICAgTihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7dC51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgS3IodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLnpyKHQudGFyZ2V0SWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgIH1cbiAgICBGcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gdGhpcy5nci5pbnNlcnQodCwgZSkgOiB0aGlzLmdyLnJlbW92ZSh0KSwgcyA9IHRoaXMuU3IodGhpcy5nciksIGkgPSB0aGlzLlNyKG4pLCByID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBzLmhhcyh0KSB8fCByLnB1c2godCk7XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkuaGFzKHQpIHx8IG8ucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUuV3IociwgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nciA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVnIodCkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLmdyLmdldCh0LmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0Lm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgU3IodCkge1xuICAgICAgICBsZXQgZSA9IHBzKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgobi5hY3RpdmVUYXJnZXRJZHMpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBidSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuSHIgPSBuZXcgUnUsIHRoaXMuSnIgPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ici5scih0KSwgdGhpcy5Kclt0XSB8fCBcIm5vdC1jdXJyZW50XCI7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLkpyW3RdID0gZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuSHIuZHIodCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhyLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLkpyW3RdO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhyLmFjdGl2ZVRhcmdldElkcztcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhyLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IciA9IG5ldyBSdSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge31cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFZ1IHtcbiAgICBZcih0KSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogQnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBDb25uZWN0aXZpdHlNb25pdG9yLlxuICovXG5jbGFzcyBTdSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuWHIgPSAoKSA9PiB0aGlzLlpyKCksIHRoaXMuZW8gPSAoKSA9PiB0aGlzLm5vKCksIHRoaXMuc28gPSBbXSwgdGhpcy5pbygpO1xuICAgIH1cbiAgICBZcih0KSB7XG4gICAgICAgIHRoaXMuc28ucHVzaCh0KTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuWHIpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5lbyk7XG4gICAgfVxuICAgIGlvKCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLlhyKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuZW8pO1xuICAgIH1cbiAgICBacigpIHtcbiAgICAgICAgTihcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBBVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnNvKSB0KDAgLyogTmV0d29ya1N0YXR1cy5BVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBubygpIHtcbiAgICAgICAgTihcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuc28pIHQoMSAvKiBOZXR3b3JrU3RhdHVzLlVOQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgLy8gVE9ETyhjaGVuYnJpYW4pOiBDb25zaWRlciBwYXNzaW5nIGluIHdpbmRvdyBlaXRoZXIgaW50byB0aGlzIGNvbXBvbmVudCBvclxuICAgIC8vIGhlcmUgZm9yIHRlc3RpbmcgdmlhIEZha2VXaW5kb3cuXG4gICAgLyoqIENoZWNrcyB0aGF0IGFsbCB1c2VkIGF0dHJpYnV0ZXMgb2Ygd2luZG93IGFyZSBhdmFpbGFibGUuICovXG4gICAgc3RhdGljIEQoKSB7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgJiYgdm9pZCAwICE9PSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAmJiB2b2lkIDAgIT09IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIG1vc3QgcmVjZW50IGludm9jYXRpb24gb2ZcbiAqIGBnZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKWAsIG9yIG51bGwgaWYgaXQgaGFzIG5ldmVyIGJlZW4gaW52b2tlZC5cbiAqLyBsZXQgRHUgPSBudWxsO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhbiBpbml0aWFsIHZhbHVlIGZvciBgbGFzdFVuaXF1ZURlYnVnSWRgLlxuICpcbiAqIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyByYW5kb21seSBzZWxlY3RlZCBmcm9tIGEgcmFuZ2Ugb2YgaW50ZWdlcnMgdGhhdCBhcmVcbiAqIHJlcHJlc2VudGVkIGFzIDggaGV4YWRlY2ltYWwgZGlnaXRzLiBUaGlzIG1lYW5zIHRoYXQgKHdpdGhpbiByZWFzb24pIGFueVxuICogbnVtYmVycyBnZW5lcmF0ZWQgYnkgaW5jcmVtZW50aW5nIHRoZSByZXR1cm5lZCBudW1iZXIgYnkgMSB3aWxsIGFsc28gYmVcbiAqIHJlcHJlc2VudGVkIGJ5IDggaGV4YWRlY2ltYWwgZGlnaXRzLiBUaGlzIGxlYWRzIHRvIGFsbCBcIklEc1wiIGhhdmluZyB0aGUgc2FtZVxuICogbGVuZ3RoIHdoZW4gY29udmVydGVkIHRvIGEgaGV4YWRlY2ltYWwgc3RyaW5nLCBtYWtpbmcgcmVhZGluZyBsb2dzIGNvbnRhaW5pbmdcbiAqIHRoZXNlIElEcyBlYXNpZXIgdG8gZm9sbG93LiBBbmQgc2luY2UgdGhlIHJldHVybiB2YWx1ZSBpcyByYW5kb21seSBzZWxlY3RlZFxuICogaXQgd2lsbCBoZWxwIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBsb2dzIGZyb20gZGlmZmVyZW50IGV4ZWN1dGlvbnMuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGFuZCByZXR1cm5zIGEgdW5pcXVlIElEIGFzIGEgaGV4YWRlY2ltYWwgc3RyaW5nLlxuICpcbiAqIFRoZSByZXR1cm5lZCBJRCBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGluIGRlYnVnIGxvZ2dpbmcgbWVzc2FnZXMgdG8gaGVscFxuICogY29ycmVsYXRlIGxvZyBtZXNzYWdlcyB0aGF0IG1heSBiZSBzcGF0aWFsbHkgc2VwYXJhdGVkIGluIHRoZSBsb2dzLCBidXRcbiAqIGxvZ2ljYWxseSByZWxhdGVkLiBGb3IgZXhhbXBsZSwgYSBuZXR3b3JrIGNvbm5lY3Rpb24gY291bGQgaW5jbHVkZSB0aGUgc2FtZVxuICogXCJkZWJ1ZyBJRFwiIHN0cmluZyBpbiBhbGwgb2YgaXRzIGxvZyBtZXNzYWdlcyB0byBoZWxwIHRyYWNlIGEgc3BlY2lmaWNcbiAqIGNvbm5lY3Rpb24gb3ZlciB0aW1lLlxuICpcbiAqIEByZXR1cm4gdGhlIDEwLWNoYXJhY3RlciBnZW5lcmF0ZWQgSUQgKGUuZy4gXCIweGExYjJjM2Q0XCIpLlxuICovXG5mdW5jdGlvbiBDdSgpIHtcbiAgICByZXR1cm4gbnVsbCA9PT0gRHUgPyBEdSA9IDI2ODQzNTQ1NiArIE1hdGgucm91bmQoMjE0NzQ4MzY0OCAqIE1hdGgucmFuZG9tKCkpIDogRHUrKywgXG4gICAgXCIweFwiICsgRHUudG9TdHJpbmcoMTYpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB4dSA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiLFxuICAgIFJ1bkFnZ3JlZ2F0aW9uUXVlcnk6IFwicnVuQWdncmVnYXRpb25RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIE51IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucm8gPSB0LnJvLCB0aGlzLm9vID0gdC5vbztcbiAgICB9XG4gICAgdW8odCkge1xuICAgICAgICB0aGlzLmNvID0gdDtcbiAgICB9XG4gICAgYW8odCkge1xuICAgICAgICB0aGlzLmhvID0gdDtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgdGhpcy5sbyA9IHQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLm9vKCk7XG4gICAgfVxuICAgIHNlbmQodCkge1xuICAgICAgICB0aGlzLnJvKHQpO1xuICAgIH1cbiAgICBmbygpIHtcbiAgICAgICAgdGhpcy5jbygpO1xuICAgIH1cbiAgICB3byh0KSB7XG4gICAgICAgIHRoaXMuaG8odCk7XG4gICAgfVxuICAgIF9vKHQpIHtcbiAgICAgICAgdGhpcy5sbyh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGt1ID0gXCJXZWJDaGFubmVsQ29ubmVjdGlvblwiO1xuXG5jbGFzcyBNdSBleHRlbmRzIFxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgUmVzdC1iYXNlZCBjb25uZWN0aW9ucyB0byB0aGUgYmFja2VuZCAoV2ViQ2hhbm5lbCBhbmRcbiAqIEhUVFApLlxuICovXG5jbGFzcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSW5mbyA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IHQuZGF0YWJhc2VJZDtcbiAgICAgICAgY29uc3QgZSA9IHQuc3NsID8gXCJodHRwc1wiIDogXCJodHRwXCI7XG4gICAgICAgIHRoaXMubW8gPSBlICsgXCI6Ly9cIiArIHQuaG9zdCwgdGhpcy55byA9IFwicHJvamVjdHMvXCIgKyB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkICsgXCIvZGF0YWJhc2VzL1wiICsgdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlICsgXCIvZG9jdW1lbnRzXCI7XG4gICAgfVxuICAgIGdldCBwbygpIHtcbiAgICAgICAgLy8gQm90aCBgaW52b2tlUlBDKClgIGFuZCBgaW52b2tlU3RyZWFtaW5nUlBDKClgIHVzZSB0aGVpciBgcGF0aGAgYXJndW1lbnRzIHRvIGRldGVybWluZVxuICAgICAgICAvLyB3aGVyZSB0byBydW4gdGhlIHF1ZXJ5LCBhbmQgZXhwZWN0IHRoZSBgcmVxdWVzdGAgdG8gTk9UIHNwZWNpZnkgdGhlIFwicGF0aFwiLlxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIElvKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IEN1KCksIG8gPSB0aGlzLlRvKHQsIGUpO1xuICAgICAgICBOKFwiUmVzdENvbm5lY3Rpb25cIiwgYFNlbmRpbmcgUlBDICcke3R9JyAke3J9OmAsIG8sIG4pO1xuICAgICAgICBjb25zdCB1ID0ge307XG4gICAgICAgIHJldHVybiB0aGlzLkVvKHUsIHMsIGkpLCB0aGlzLkFvKHQsIG8sIHUsIG4pLnRoZW4oKGUgPT4gKE4oXCJSZXN0Q29ubmVjdGlvblwiLCBgUmVjZWl2ZWQgUlBDICcke3R9JyAke3J9OiBgLCBlKSwgXG4gICAgICAgIGUpKSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgTShcIlJlc3RDb25uZWN0aW9uXCIsIGBSUEMgJyR7dH0nICR7cn0gZmFpbGVkIHdpdGggZXJyb3I6IGAsIGUsIFwidXJsOiBcIiwgbywgXCJyZXF1ZXN0OlwiLCBuKSwgXG4gICAgICAgICAgICBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZvKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgLy8gVGhlIFJFU1QgQVBJIGF1dG9tYXRpY2FsbHkgYWdncmVnYXRlcyBhbGwgb2YgdGhlIHN0cmVhbWVkIHJlc3VsdHMsIHNvIHdlXG4gICAgICAgIC8vIGNhbiBqdXN0IHVzZSB0aGUgbm9ybWFsIGludm9rZSgpIG1ldGhvZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuSW8odCwgZSwgbiwgcywgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3QsIGFkZGluZyBhbnkgYXV0aG9yaXphdGlvbiB0b2tlbiBpZlxuICAgICAqIHByZXNlbnQgYW5kIGFueSBhZGRpdGlvbmFsIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0LlxuICAgICAqLyAgICBFbyh0LCBlLCBuKSB7XG4gICAgICAgIHRbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFwiZ2wtanMvIGZpcmUvXCIgKyBTLCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIHRbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKHRbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgZSAmJiBlLmhlYWRlcnMuZm9yRWFjaCgoKGUsIG4pID0+IHRbbl0gPSBlKSksIG4gJiYgbi5oZWFkZXJzLmZvckVhY2goKChlLCBuKSA9PiB0W25dID0gZSkpO1xuICAgIH1cbiAgICBUbyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB4dVt0XTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubW99L3YxLyR7ZX06JHtufWA7XG4gICAgfVxufSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gdC5mb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IHQuYXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSB0LnVzZUZldGNoU3RyZWFtcywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSB0LmxvbmdQb2xsaW5nT3B0aW9ucztcbiAgICB9XG4gICAgQW8odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gQ3UoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgociwgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IG5ldyBYaHJJbztcbiAgICAgICAgICAgIHUuc2V0V2l0aENyZWRlbnRpYWxzKCEwKSwgdS5saXN0ZW5PbmNlKEV2ZW50VHlwZS5DT01QTEVURSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHUuZ2V0TGFzdEVycm9yQ29kZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuTk9fRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdS5nZXRSZXNwb25zZUpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE4oa3UsIGBYSFIgZm9yIFJQQyAnJHt0fScgJHtpfSByZWNlaXZlZDpgLCBKU09OLnN0cmluZ2lmeShlKSksIHIoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLlRJTUVPVVQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBOKGt1LCBgUlBDICcke3R9JyAke2l9IHRpbWVkIG91dGApLCBvKG5ldyBVKHEuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdS5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOKGt1LCBgUlBDICcke3R9JyAke2l9IGZhaWxlZCB3aXRoIHN0YXR1czpgLCBuLCBcInJlc3BvbnNlIHRleHQ6XCIsIHUuZ2V0UmVzcG9uc2VUZXh0KCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSB1LmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkgJiYgKHQgPSB0WzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiBlLnN0YXR1cyAmJiBlLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhxKS5pbmRleE9mKGUpID49IDAgPyBlIDogcS5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhuZXcgVSh0LCBlLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbyhuZXcgVShxLlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIHUuZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICBvKG5ldyBVKHEuVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIE8oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIE4oa3UsIGBSUEMgJyR7dH0nICR7aX0gY29tcGxldGVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBKU09OLnN0cmluZ2lmeShzKTtcbiAgICAgICAgICAgIE4oa3UsIGBSUEMgJyR7dH0nICR7aX0gc2VuZGluZyByZXF1ZXN0OmAsIHMpLCB1LnNlbmQoZSwgXCJQT1NUXCIsIGMsIG4sIDE1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBSbyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBDdSgpLCBpID0gWyB0aGlzLm1vLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgdCwgXCIvY2hhbm5lbFwiIF0sIHIgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIG8gPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgdSA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfSwgYyA9IHRoaXMubG9uZ1BvbGxpbmdPcHRpb25zLnRpbWVvdXRTZWNvbmRzO1xuICAgICAgICB2b2lkIDAgIT09IGMgJiYgKHUubG9uZ1BvbGxpbmdUaW1lb3V0ID0gTWF0aC5yb3VuZCgxZTMgKiBjKSksIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmICh1LnhtbEh0dHBGYWN0b3J5ID0gbmV3IEZldGNoWG1sSHR0cEZhY3Rvcnkoe30pKSwgXG4gICAgICAgIHRoaXMuRW8odS5pbml0TWVzc2FnZUhlYWRlcnMsIGUsIG4pLCBcbiAgICAgICAgLy8gU2VuZGluZyB0aGUgY3VzdG9tIGhlYWRlcnMgd2UganVzdCBhZGRlZCB0byByZXF1ZXN0LmluaXRNZXNzYWdlSGVhZGVyc1xuICAgICAgICAvLyAoQXV0aG9yaXphdGlvbiwgZXRjLikgd2lsbCB0cmlnZ2VyIHRoZSBicm93c2VyIHRvIG1ha2UgYSBDT1JTIHByZWZsaWdodFxuICAgICAgICAvLyByZXF1ZXN0IGJlY2F1c2UgdGhlIFhIUiB3aWxsIG5vIGxvbmdlciBtZWV0IHRoZSBjcml0ZXJpYSBmb3IgYSBcInNpbXBsZVwiXG4gICAgICAgIC8vIENPUlMgcmVxdWVzdDpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9DT1JTI1NpbXBsZV9yZXF1ZXN0c1xuICAgICAgICAvLyBUaGVyZWZvcmUgdG8gYXZvaWQgdGhlIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3QgKGFuIGV4dHJhIG5ldHdvcmtcbiAgICAgICAgLy8gcm91bmR0cmlwKSwgd2UgdXNlIHRoZSBlbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGluIHRoZSByZXF1ZXN0J3MgUE9TVCBwYXlsb2FkLFxuICAgICAgICAvLyB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuXG4gICAgICAgIHUuZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzID0gITA7XG4gICAgICAgIGNvbnN0IGEgPSBpLmpvaW4oXCJcIik7XG4gICAgICAgIE4oa3UsIGBDcmVhdGluZyBSUEMgJyR7dH0nIHN0cmVhbSAke3N9OiAke2F9YCwgdSk7XG4gICAgICAgIGNvbnN0IGggPSByLmNyZWF0ZVdlYkNoYW5uZWwoYSwgdSk7XG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICBsZXQgbCA9ICExLCBmID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBOdSh7XG4gICAgICAgICAgICBybzogZSA9PiB7XG4gICAgICAgICAgICAgICAgZiA/IE4oa3UsIGBOb3Qgc2VuZGluZyBiZWNhdXNlIFJQQyAnJHt0fScgc3RyZWFtICR7c30gaXMgY2xvc2VkOmAsIGUpIDogKGwgfHwgKE4oa3UsIGBPcGVuaW5nIFJQQyAnJHt0fScgc3RyZWFtICR7c30gdHJhbnNwb3J0LmApLCBcbiAgICAgICAgICAgICAgICBoLm9wZW4oKSwgbCA9ICEwKSwgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gc2VuZGluZzpgLCBlKSwgaC5zZW5kKGUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbzogKCkgPT4gaC5jbG9zZSgpXG4gICAgICAgIH0pLCB3ID0gKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcbiAgICAgICAgICAgIHQubGlzdGVuKGUsICh0ID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuKHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB3KGgsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICBmIHx8IE4oa3UsIGBSUEMgJyR7dH0nIHN0cmVhbSAke3N9IHRyYW5zcG9ydCBvcGVuZWQuYCk7XG4gICAgICAgIH0pKSwgdyhoLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5DTE9TRSwgKCgpID0+IHtcbiAgICAgICAgICAgIGYgfHwgKGYgPSAhMCwgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gdHJhbnNwb3J0IGNsb3NlZGApLCBkLndvKCkpO1xuICAgICAgICB9KSksIHcoaCwgV2ViQ2hhbm5lbC5FdmVudFR5cGUuRVJST1IsIChlID0+IHtcbiAgICAgICAgICAgIGYgfHwgKGYgPSAhMCwgTShrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gdHJhbnNwb3J0IGVycm9yZWQ6YCwgZSksIGQud28obmV3IFUocS5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCB3KGgsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsIChlID0+IHtcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgaWYgKCFmKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGUuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBGKCEhaSk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGksIG8gPSByLmVycm9yIHx8IChudWxsID09PSAobiA9IHJbMF0pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChvKSB7XG4gICAgICAgICAgICAgICAgICAgIE4oa3UsIGBSUEMgJyR7dH0nIHN0cmVhbSAke3N9IHJlY2VpdmVkIGVycm9yOmAsIG8pO1xuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5zdGF0dXMgd2lsbCBiZSBhIHN0cmluZyBsaWtlICdPSycgb3IgJ05PVF9GT1VORCcuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBhIEdSUEMgc3RhdHVzIGlkZW50aWZpZXIgbGlrZSAnTk9UX0ZPVU5EJy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxuICogICAgIHRoZXJlIGlzIG5vIG1hdGNoLlxuICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gaWlbdF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlKSByZXR1cm4gdWkoZSk7XG4gICAgICAgICAgICAgICAgICAgIH0oZSksIGkgPSBvLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9IHEuSU5URVJOQUwsIGkgPSBcIlVua25vd24gZXJyb3Igc3RhdHVzOiBcIiArIGUgKyBcIiB3aXRoIG1lc3NhZ2UgXCIgKyBvLm1lc3NhZ2UpLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcbiAgICAgICAgICAgICAgICAgICAgZiA9ICEwLCBkLndvKG5ldyBVKG4sIGkpKSwgaC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBOKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSByZWNlaXZlZDpgLCBpKSwgZC5fbyhpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCB3KG8sIEV2ZW50LlNUQVRfRVZFTlQsIChlID0+IHtcbiAgICAgICAgICAgIGUuc3RhdCA9PT0gU3RhdC5QUk9YWSA/IE4oa3UsIGBSUEMgJyR7dH0nIHN0cmVhbSAke3N9IGRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eWApIDogZS5zdGF0ID09PSBTdGF0Lk5PUFJPWFkgJiYgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gZGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5YCk7XG4gICAgICAgIH0pKSwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgd2UgY291bGQvc2hvdWxkIHdhaXQgZm9yIHRoZSBXZWJDaGFubmVsIG9wZW5lZCBldmVudCxcbiAgICAgICAgICAgIC8vIGJ1dCBiZWNhdXNlIHdlIHdhbnQgdG8gc2VuZCB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBXZWJDaGFubmVsXG4gICAgICAgICAgICAvLyBoYW5kc2hha2Ugd2UgcHJldGVuZCB0aGUgY2hhbm5lbCBvcGVuZWQgaGVyZSAoYXN5bmNocm9ub3VzbHkpLCBhbmRcbiAgICAgICAgICAgIC8vIHRoZW4gZGVsYXkgdGhlIGFjdHVhbCBvcGVuIHVudGlsIHRoZSBmaXJzdCBtZXNzYWdlIGlzIHNlbnQuXG4gICAgICAgICAgICBkLmZvKCk7XG4gICAgICAgIH0pLCAwKSwgZDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFdlYkNoYW5uZWxDb25uZWN0aW9uIGZvciB0aGUgYnJvd3Nlci4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ3dpbmRvdycgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gJHUoKSB7XG4gICAgLy8gYHdpbmRvd2AgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGUuZy4gaW4gUmVhY3ROYXRpdmUgYW5kIFdlYldvcmtlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiBudWxsO1xufVxuXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ2RvY3VtZW50JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovIGZ1bmN0aW9uIE91KCkge1xuICAgIC8vIGBkb2N1bWVudGAgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGUuZy4gaW4gUmVhY3ROYXRpdmUgYW5kIFdlYldvcmtlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBkb2N1bWVudCA/IGRvY3VtZW50IDogbnVsbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gRnUodCkge1xuICAgIHJldHVybiBuZXcgVmkodCwgLyogdXNlUHJvdG8zSnNvbj0gKi8gITApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgQnUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXG4gICAgICovXG4gICAgbiA9IDFlM1xuICAgIC8qKlxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxuICAgICAqIGF0dGVtcHQuXG4gICAgICovICwgcyA9IDEuNVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXG4gICAgICovICwgaSA9IDZlNCkge1xuICAgICAgICB0aGlzLmlpID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy5QbyA9IG4sIHRoaXMuYm8gPSBzLCB0aGlzLlZvID0gaSwgdGhpcy5TbyA9IDAsIFxuICAgICAgICB0aGlzLkRvID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cbiAgICAgICAgdGhpcy5DbyA9IERhdGUubm93KCksIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuU28gPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKi8gICAgeG8oKSB7XG4gICAgICAgIHRoaXMuU28gPSB0aGlzLlZvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXG4gICAgICovICAgIE5vKHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHRoaXMuU28gKyB0aGlzLmtvKCkpLCBuID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMuQ28pLCBzID0gTWF0aC5tYXgoMCwgZSAtIG4pO1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBzID4gMCAmJiBOKFwiRXhwb25lbnRpYWxCYWNrb2ZmXCIsIGBCYWNraW5nIG9mZiBmb3IgJHtzfSBtcyAoYmFzZSBkZWxheTogJHt0aGlzLlNvfSBtcywgZGVsYXkgd2l0aCBqaXR0ZXI6ICR7ZX0gbXMsIGxhc3QgYXR0ZW1wdDogJHtufSBtcyBhZ28pYCksIFxuICAgICAgICB0aGlzLkRvID0gdGhpcy5paS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnRpbWVySWQsIHMsICgoKSA9PiAodGhpcy5DbyA9IERhdGUubm93KCksIFxuICAgICAgICB0KCkpKSksIFxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxuICAgICAgICAvLyBib3VuZHMuXG4gICAgICAgIHRoaXMuU28gKj0gdGhpcy5ibywgdGhpcy5TbyA8IHRoaXMuUG8gJiYgKHRoaXMuU28gPSB0aGlzLlBvKSwgdGhpcy5TbyA+IHRoaXMuVm8gJiYgKHRoaXMuU28gPSB0aGlzLlZvKTtcbiAgICB9XG4gICAgTW8oKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuRG8gJiYgKHRoaXMuRG8uc2tpcERlbGF5KCksIHRoaXMuRG8gPSBudWxsKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkRvICYmICh0aGlzLkRvLmNhbmNlbCgpLCB0aGlzLkRvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHZhbHVlIGluIHRoZSByYW5nZSBbLWN1cnJlbnRCYXNlTXMvMiwgY3VycmVudEJhc2VNcy8yXSAqLyAgICBrbygpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gLjUpICogdGhpcy5TbztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN0cmVhbWluZyBSUENcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XG4gKiBmb3Igc3RyZWFtaW5nIFJQQ3MsIGFuZCBhZGRzIHNldmVyYWwgY3JpdGljYWwgZmVhdHVyZXMgZm9yIG91ciBjbGllbnRzOlxuICpcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcbiAqICAgLSBBdXRoZW50aWNhdGlvbiB2aWEgQ3JlZGVudGlhbHNQcm92aWRlclxuICogICAtIERpc3BhdGNoaW5nIGFsbCBjYWxsYmFja3MgaW50byB0aGUgc2hhcmVkIHdvcmtlciBxdWV1ZVxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICpcbiAqIFN1YmNsYXNzZXMgb2YgUGVyc2lzdGVudFN0cmVhbSBpbXBsZW1lbnQgc2VyaWFsaXphdGlvbiBvZiBtb2RlbHMgdG8gYW5kXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXG4gKiBzdHJlYW1pbmcgUlBDLlxuICpcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xuICpcbiAqIFN0cmVhbWluZyBSUENzIGFyZSBzdGF0ZWZ1bCBhbmQgbmVlZCB0byBiZSBzdGFydCgpZWQgYmVmb3JlIG1lc3NhZ2VzIGNhblxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cbiAqIG9mIHRoZSBsaXN0ZW5lciBvbmNlIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IHJlcXVlc3RzLlxuICpcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXG4gKiBsaXN0ZW5lciB3aXRoIGEgRmlyZXN0b3JlRXJyb3IgaW5kaWNhdGluZyB3aGF0IHdlbnQgd3JvbmcuXG4gKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXG4gKlxuICogR2VuZXJpYyB0eXBlczpcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgUmVjZWl2ZVR5cGU6IFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIExpc3RlbmVyVHlwZTogVGhlIHR5cGUgb2YgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjYWxsYmFja3NcbiAqL1xuY2xhc3MgTHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUpIHtcbiAgICAgICAgdGhpcy5paSA9IHQsIHRoaXMuJG8gPSBuLCB0aGlzLk9vID0gcywgdGhpcy5jb25uZWN0aW9uID0gaSwgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlciA9IHIsIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciA9IG8sIHRoaXMubGlzdGVuZXIgPSB1LCB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjbG9zZSBjb3VudCB0aGF0J3MgaW5jcmVtZW50ZWQgZXZlcnkgdGltZSB0aGUgc3RyZWFtIGlzIGNsb3NlZDsgdXNlZCBieVxuICAgICAgICAgKiBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKCkgdG8gaW52YWxpZGF0ZSBjYWxsYmFja3MgdGhhdCBoYXBwZW4gYWZ0ZXJcbiAgICAgICAgICogY2xvc2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkZvID0gMCwgdGhpcy5CbyA9IG51bGwsIHRoaXMuTG8gPSBudWxsLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMucW8gPSBuZXcgQnUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIFVvKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgKi8gPT09IHRoaXMuc3RhdGUgfHwgNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLktvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIEtvKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovID09PSB0aGlzLnN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIFJQQy4gT25seSBhbGxvd2VkIGlmIGlzU3RhcnRlZCgpIHJldHVybnMgZmFsc2UuIFRoZSBzdHJlYW0gaXNcbiAgICAgKiBub3QgaW1tZWRpYXRlbHkgcmVhZHkgZm9yIHVzZTogb25PcGVuKCkgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIFJQQyBpc1xuICAgICAqIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cywgYXQgd2hpY2ggcG9pbnQgaXNPcGVuKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RhcnQgcmV0dXJucywgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLkdvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5VbygpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cbiAgICAgKlxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cbiAgICAgKi8gICAgUW8oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgdGhpcy5xby5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGlzIHN0cmVhbSBhcyBpZGxlLiBJZiBubyBmdXJ0aGVyIGFjdGlvbnMgYXJlIHBlcmZvcm1lZCBvbiB0aGVcbiAgICAgKiBzdHJlYW0gZm9yIG9uZSBtaW51dGUsIHRoZSBzdHJlYW0gd2lsbCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0c2VsZiBhbmRcbiAgICAgKiBub3RpZnkgdGhlIHN0cmVhbSdzIG9uQ2xvc2UoKSBoYW5kbGVyIHdpdGggU3RhdHVzLk9LLiBUaGUgc3RyZWFtIHdpbGwgdGhlblxuICAgICAqIGJlIGluIGEgIWlzU3RhcnRlZCgpIHN0YXRlLCByZXF1aXJpbmcgdGhlIGNhbGxlciB0byBzdGFydCB0aGUgc3RyZWFtIGFnYWluXG4gICAgICogYmVmb3JlIGZ1cnRoZXIgdXNlLlxuICAgICAqXG4gICAgICogT25seSBzdHJlYW1zIHRoYXQgYXJlIGluIHN0YXRlICdPcGVuJyBjYW4gYmUgbWFya2VkIGlkbGUsIGFzIGFsbCBvdGhlclxuICAgICAqIHN0YXRlcyBpbXBseSBwZW5kaW5nIG5ldHdvcmsgb3BlcmF0aW9ucy5cbiAgICAgKi8gICAgam8oKSB7XG4gICAgICAgIC8vIFN0YXJ0cyB0aGUgaWRsZSB0aW1lIGlmIHdlIGFyZSBpbiBzdGF0ZSAnT3BlbicgYW5kIGFyZSBub3QgeWV0IGFscmVhZHlcbiAgICAgICAgLy8gcnVubmluZyBhIHRpbWVyIChpbiB3aGljaCBjYXNlIHRoZSBwcmV2aW91cyBpZGxlIHRpbWVvdXQgc3RpbGwgYXBwbGllcykuXG4gICAgICAgIHRoaXMuS28oKSAmJiBudWxsID09PSB0aGlzLkJvICYmICh0aGlzLkJvID0gdGhpcy5paS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLiRvLCA2ZTQsICgoKSA9PiB0aGlzLnpvKCkpKSk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLiAqLyAgICBXbyh0KSB7XG4gICAgICAgIHRoaXMuSG8oKSwgdGhpcy5zdHJlYW0uc2VuZCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBieSB0aGUgaWRsZSB0aW1lciB3aGVuIHRoZSBzdHJlYW0gc2hvdWxkIGNsb3NlIGR1ZSB0byBpbmFjdGl2aXR5LiAqLyAgICBhc3luYyB6bygpIHtcbiAgICAgICAgaWYgKHRoaXMuS28oKSkgXG4gICAgICAgIC8vIFdoZW4gdGltaW5nIG91dCBhbiBpZGxlIHN0cmVhbSB0aGVyZSdzIG5vIHJlYXNvbiB0byBmb3JjZSB0aGUgc3RyZWFtIGludG8gYmFja29mZiB3aGVuXG4gICAgICAgIC8vIGl0IHJlc3RhcnRzIHNvIHNldCB0aGUgc3RyZWFtIHN0YXRlIHRvIEluaXRpYWwgaW5zdGVhZCBvZiBFcnJvci5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgSG8oKSB7XG4gICAgICAgIHRoaXMuQm8gJiYgKHRoaXMuQm8uY2FuY2VsKCksIHRoaXMuQm8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgSm8oKSB7XG4gICAgICAgIHRoaXMuTG8gJiYgKHRoaXMuTG8uY2FuY2VsKCksIHRoaXMuTG8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UodCwgZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy5IbygpLCB0aGlzLkpvKCksIHRoaXMucW8uY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLkZvKyssIDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICE9PSB0ID8gXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gaW50ZW50aW9uYWwgY2xvc2UgZW5zdXJlIHdlIGRvbid0IGRlbGF5IG91ciBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdC5cbiAgICAgICAgdGhpcy5xby5yZXNldCgpIDogZSAmJiBlLmNvZGUgPT09IHEuUkVTT1VSQ0VfRVhIQVVTVEVEID8gKFxuICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxuICAgICAgICBrKGUudG9TdHJpbmcoKSksIGsoXCJVc2luZyBtYXhpbXVtIGJhY2tvZmYgZGVsYXkgdG8gcHJldmVudCBvdmVybG9hZGluZyB0aGUgYmFja2VuZC5cIiksIFxuICAgICAgICB0aGlzLnFvLnhvKCkpIDogZSAmJiBlLmNvZGUgPT09IHEuVU5BVVRIRU5USUNBVEVEICYmIDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8gIT09IHRoaXMuc3RhdGUgJiYgKFxuICAgICAgICAvLyBcInVuYXV0aGVudGljYXRlZFwiIGVycm9yIG1lYW5zIHRoZSB0b2tlbiB3YXMgcmVqZWN0ZWQuIFRoaXMgc2hvdWxkIHJhcmVseVxuICAgICAgICAvLyBoYXBwZW4gc2luY2UgYm90aCBBdXRoIGFuZCBBcHBDaGVjayBlbnN1cmUgYSBzdWZmaWNpZW50IFRUTCB3aGVuIHdlXG4gICAgICAgIC8vIHJlcXVlc3QgYSB0b2tlbi4gSWYgYSB1c2VyIG1hbnVhbGx5IHJlc2V0cyB0aGVpciBzeXN0ZW0gY2xvY2sgdGhpcyBjYW5cbiAgICAgICAgLy8gZmFpbCwgaG93ZXZlci4gSW4gdGhpcyBjYXNlLCB3ZSBzaG91bGQgZ2V0IGEgQ29kZS5VTkFVVEhFTlRJQ0FURUQgZXJyb3JcbiAgICAgICAgLy8gYmVmb3JlIHdlIHJlY2VpdmVkIHRoZSBmaXJzdCBtZXNzYWdlIGFuZCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgdGhlIHRva2VuXG4gICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHdlIGZldGNoIGEgbmV3IHRva2VuLlxuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSksIFxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgdW5kZXJseWluZyBzdHJlYW0gYmVjYXVzZSB3ZSBhcmUgbm8gbG9uZ2VyIGludGVyZXN0ZWQgaW4gZXZlbnRzLlxuICAgICAgICBudWxsICE9PSB0aGlzLnN0cmVhbSAmJiAodGhpcy5ZbygpLCB0aGlzLnN0cmVhbS5jbG9zZSgpLCB0aGlzLnN0cmVhbSA9IG51bGwpLCBcbiAgICAgICAgLy8gVGhpcyBzdGF0ZSBtdXN0IGJlIGFzc2lnbmVkIGJlZm9yZSBjYWxsaW5nIG9uQ2xvc2UoKSB0byBhbGxvdyB0aGUgY2FsbGJhY2sgdG9cbiAgICAgICAgLy8gaW5oaWJpdCBiYWNrb2ZmIG9yIG90aGVyd2lzZSBtYW5pcHVsYXRlIHRoZSBzdGF0ZSBpbiBpdHMgbm9uLXN0YXJ0ZWQgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCBcbiAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lciB0aGF0IHRoZSBzdHJlYW0gY2xvc2VkLlxuICAgICAgICBhd2FpdCB0aGlzLmxpc3RlbmVyLmFvKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgb3ZlcnJpZGRlbiB0byBwZXJmb3JtIGFkZGl0aW9uYWwgY2xlYW51cCBiZWZvcmUgdGhlIHN0cmVhbSBpcyBjbG9zZWQuXG4gICAgICogQ2FsbGluZyBzdXBlci50ZWFyRG93bigpIGlzIG5vdCByZXF1aXJlZC5cbiAgICAgKi8gICAgWW8oKSB7fVxuICAgIGF1dGgoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZyAqLztcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuWG8odGhpcy5GbyksIGUgPSB0aGlzLkZvO1xuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWQsIGJ1dCBzZWUgVE9ETyBiZWxvdy5cbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3QsIG5dKSA9PiB7XG4gICAgICAgICAgICAvLyBTdHJlYW0gY2FuIGJlIHN0b3BwZWQgd2hpbGUgd2FpdGluZyBmb3IgYXV0aGVudGljYXRpb24uXG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IFdlIHJlYWxseSBzaG91bGQganVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZFxuICAgICAgICAgICAgLy8gYW5kIGxldCB0aGlzIGRpc3BhdGNoIG9udG8gdGhlIHF1ZXVlLCBidXQgdGhhdCBvcGVuZWQgYSBzcGVjIHRlc3QgY2FuXG4gICAgICAgICAgICAvLyBvZiB3b3JtcyB0aGF0IEkgZG9uJ3Qgd2FudCB0byBkZWFsIHdpdGggaW4gdGhpcyBQUi5cbiAgICAgICAgICAgIHRoaXMuRm8gPT09IGUgJiYgXG4gICAgICAgICAgICAvLyBOb3JtYWxseSB3ZSdkIGhhdmUgdG8gc2NoZWR1bGUgdGhlIGNhbGxiYWNrIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIGZvbGxvd2luZyBjYWxscyBhcmUgc2FmZSB0byBiZSBjYWxsZWQgb3V0c2lkZSB0aGVcbiAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgc2luY2UgdGhleSBkb24ndCBjaGFpbiBhc3luY2hyb25vdXMgY2FsbHNcbiAgICAgICAgICAgIHRoaXMuWm8odCwgbik7XG4gICAgICAgIH0pLCAoZSA9PiB7XG4gICAgICAgICAgICB0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVKHEuVU5LTk9XTiwgXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIgKyBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnR1KHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFpvKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuWG8odGhpcy5Gbyk7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5ldSh0LCBlKSwgdGhpcy5zdHJlYW0udW8oKCgpID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+ICh0aGlzLnN0YXRlID0gMiAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiAqLyAsIHRoaXMuTG8gPSB0aGlzLmlpLmVucXVldWVBZnRlckRlbGF5KHRoaXMuT28sIDFlNCwgKCgpID0+ICh0aGlzLktvKCkgJiYgKHRoaXMuc3RhdGUgPSAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSwgdGhpcy5saXN0ZW5lci51bygpKSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLmFvKCh0ID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMudHUodCkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5vbk1lc3NhZ2UoKHQgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5vbk1lc3NhZ2UodCkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBHbygpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDUgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmYgKi8gLCB0aGlzLnFvLk5vKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIHR1KHQpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiBOKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHt0fWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFwiZGlzcGF0Y2hlclwiIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyBvcGVyYXRpb25zIG9udG8gdGhlXG4gICAgICogQXN5bmNRdWV1ZSBidXQgb25seSBydW5zIHRoZW0gaWYgY2xvc2VDb3VudCByZW1haW5zIHVuY2hhbmdlZC4gVGhpcyBhbGxvd3NcbiAgICAgKiB1cyB0byB0dXJuIGF1dGggLyBzdHJlYW0gY2FsbGJhY2tzIGludG8gbm8tb3BzIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkIC9cbiAgICAgKiByZS1vcGVuZWQsIGV0Yy5cbiAgICAgKi8gICAgWG8odCkge1xuICAgICAgICByZXR1cm4gZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlpLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuRm8gPT09IHQgPyBlKCkgOiAoTihcIlBlcnNpc3RlbnRTdHJlYW1cIiwgXCJzdHJlYW0gY2FsbGJhY2sgc2tpcHBlZCBieSBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyLlwiKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgTGlzdGVuIFJQQy5cbiAqXG4gKiBPbmNlIHRoZSBMaXN0ZW4gc3RyZWFtIGhhcyBjYWxsZWQgdGhlIG9uT3BlbigpIGxpc3RlbmVyLCBhbnkgbnVtYmVyIG9mXG4gKiBsaXN0ZW4oKSBhbmQgdW5saXN0ZW4oKSBjYWxscyBjYW4gYmUgbWFkZSB0byBjb250cm9sIHdoYXQgY2hhbmdlcyB3aWxsIGJlXG4gKiBzZW50IGZyb20gdGhlIHNlcnZlciBmb3IgTGlzdGVuUmVzcG9uc2VzLlxuICovIGNsYXNzIHF1IGV4dGVuZHMgTHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgXCJsaXN0ZW5fc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFRpbWVySWQuTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuTGlzdGVuU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBUaW1lcklkLkhlYWx0aENoZWNrVGltZW91dCAqLyAsIGUsIG4sIHMsIHIpLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gaTtcbiAgICB9XG4gICAgZXUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLlJvKFwiTGlzdGVuXCIsIHQsIGUpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMucW8ucmVzZXQoKTtcbiAgICAgICAgY29uc3QgZSA9IFFpKHRoaXMuc2VyaWFsaXplciwgdCksIG4gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIHQpKSByZXR1cm4gcnQubWluKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gZS50YXJnZXRJZHMgJiYgZS50YXJnZXRJZHMubGVuZ3RoID8gcnQubWluKCkgOiBlLnJlYWRUaW1lID8gTmkoZS5yZWFkVGltZSkgOiBydC5taW4oKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIubnUoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIHN1KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gTGkodGhpcy5zZXJpYWxpemVyKSwgZS5hZGRUYXJnZXQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChuID0gRm4ocykgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBIaSh0LCBzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogSmkodCwgcylcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSBlLnRhcmdldElkLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBuLnJlc3VtZVRva2VuID0gQ2kodCwgZS5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IFNpKHQsIGUuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiAobi5leHBlY3RlZENvdW50ID0gcyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhydC5taW4oKSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBDb25zaWRlciByZW1vdmluZyBhYm92ZSBjaGVjayBiZWNhdXNlIGl0IGlzIG1vc3QgbGlrZWx5IHRydWUuXG4gICAgICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICAgICAgbi5yZWFkVGltZSA9IERpKHQsIGUuc25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBTaSh0LCBlLmV4cGVjdGVkQ291bnQpO1xuICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYgKG4uZXhwZWN0ZWRDb3VudCA9IHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgY29uc3QgbiA9IFhpKHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgICAgIG4gJiYgKGUubGFiZWxzID0gbiksIHRoaXMuV28oZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgICAqIGdpdmVuIHRhcmdldElkLlxuICAgICAqLyAgICBpdSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IExpKHRoaXMuc2VyaWFsaXplciksIGUucmVtb3ZlVGFyZ2V0ID0gdCwgdGhpcy5XbyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyBVdSBleHRlbmRzIEx1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwid3JpdGVfc3RyZWFtX2lkbGVcIiAvKiBUaW1lcklkLldyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBUaW1lcklkLkhlYWx0aENoZWNrVGltZW91dCAqLyAsIGUsIG4sIHMsIHIpLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gaSwgdGhpcy5ydSA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcbiAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXG4gICAgICovICAgIGdldCBvdSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnU7XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIG9mIFBlcnNpc3RlbnRTdHJlYW0uc3RhcnRcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5ydSA9ICExLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHZvaWQgMCwgc3VwZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgWW8oKSB7XG4gICAgICAgIHRoaXMucnUgJiYgdGhpcy51dShbXSk7XG4gICAgfVxuICAgIGV1KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5SbyhcIldyaXRlXCIsIHQsIGUpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIEFsd2F5cyBjYXB0dXJlIHRoZSBsYXN0IHN0cmVhbSB0b2tlbi5cbiAgICAgICAgRighIXQuc3RyZWFtVG9rZW4pLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHQuc3RyZWFtVG9rZW4sIHRoaXMucnUpIHtcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCBmaXJzdCB3cml0ZSByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHksXG4gICAgICAgICAgICAvLyBOb3RlLCB0aGF0IHdlIGNvdWxkIGNvbnNpZGVyIGEgc3VjY2Vzc2Z1bCBoYW5kc2hha2UgaGVhbHRoeSwgaG93ZXZlcixcbiAgICAgICAgICAgIC8vIHRoZSB3cml0ZSBpdHNlbGYgbWlnaHQgYmUgY2F1c2luZyBhbiBlcnJvciB3ZSB3YW50IHRvIGJhY2sgb2ZmIGZyb20uXG4gICAgICAgICAgICB0aGlzLnFvLnJlc2V0KCk7XG4gICAgICAgICAgICBjb25zdCBlID0gV2kodC53cml0ZVJlc3VsdHMsIHQuY29tbWl0VGltZSksIG4gPSBOaSh0LmNvbW1pdFRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY3UobiwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGZpcnN0IHJlc3BvbnNlIGlzIGFsd2F5cyB0aGUgaGFuZHNoYWtlIHJlc3BvbnNlXG4gICAgICAgIHJldHVybiBGKCF0LndyaXRlUmVzdWx0cyB8fCAwID09PSB0LndyaXRlUmVzdWx0cy5sZW5ndGgpLCB0aGlzLnJ1ID0gITAsIHRoaXMubGlzdGVuZXIuYXUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYW4gaW5pdGlhbCBzdHJlYW1Ub2tlbiB0byB0aGUgc2VydmVyLCBwZXJmb3JtaW5nIHRoZSBoYW5kc2hha2VcbiAgICAgKiByZXF1aXJlZCB0byBtYWtlIHRoZSBTdHJlYW1pbmdXcml0ZSBSUEMgd29yay4gU3Vic2VxdWVudFxuICAgICAqIGNhbGxzIHNob3VsZCB3YWl0IHVudGlsIG9uSGFuZHNoYWtlQ29tcGxldGUgd2FzIGNhbGxlZC5cbiAgICAgKi8gICAgaHUoKSB7XG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogU3VwcG9ydCBzdHJlYW0gcmVzdW1wdGlvbi4gV2UgaW50ZW50aW9uYWxseSBkbyBub3Qgc2V0IHRoZVxuICAgICAgICAvLyBzdHJlYW0gdG9rZW4gb24gdGhlIGhhbmRzaGFrZSwgaWdub3JpbmcgYW55IHN0cmVhbSB0b2tlbiB3ZSBtaWdodCBoYXZlLlxuICAgICAgICBjb25zdCB0ID0ge307XG4gICAgICAgIHQuZGF0YWJhc2UgPSBMaSh0aGlzLnNlcmlhbGl6ZXIpLCB0aGlzLldvKHQpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBncm91cCBvZiBtdXRhdGlvbnMgdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kIHRvIGFwcGx5LiAqLyAgICB1dSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBzdHJlYW1Ub2tlbjogdGhpcy5sYXN0U3RyZWFtVG9rZW4sXG4gICAgICAgICAgICB3cml0ZXM6IHQubWFwKCh0ID0+IGppKHRoaXMuc2VyaWFsaXplciwgdCkpKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLldvKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGF0YXN0b3JlIGFuZCBpdHMgcmVsYXRlZCBtZXRob2RzIGFyZSBhIHdyYXBwZXIgYXJvdW5kIHRoZSBleHRlcm5hbCBHb29nbGVcbiAqIENsb3VkIERhdGFzdG9yZSBncnBjIEFQSSwgd2hpY2ggcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRoYXQgaXMgbW9yZSBjb252ZW5pZW50XG4gKiBmb3IgdGhlIHJlc3Qgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlIHRvIGNvbnN1bWUuXG4gKi9cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgRGF0YXN0b3JlIHRoYXQgZXhwb3NlcyBhZGRpdGlvbmFsIHN0YXRlIGZvciBpbnRlcm5hbFxuICogY29uc3VtcHRpb24uXG4gKi9cbmNsYXNzIEt1IGV4dGVuZHMgY2xhc3Mge30ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbHMgPSB0LCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMgPSBlLCB0aGlzLmNvbm5lY3Rpb24gPSBuLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gcywgdGhpcy5sdSA9ICExO1xuICAgIH1cbiAgICBmdSgpIHtcbiAgICAgICAgaWYgKHRoaXMubHUpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIElvKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnUoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3MsIGldKSA9PiB0aGlzLmNvbm5lY3Rpb24uSW8odCwgZSwgbiwgcywgaSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gcS5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IFUocS5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICB2byh0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZ1KCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtpLCByXSkgPT4gdGhpcy5jb25uZWN0aW9uLnZvKHQsIGUsIG4sIGksIHIsIHMpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSA/ICh0LmNvZGUgPT09IHEuVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCB0KSA6IG5ldyBVKHEuVU5LTk9XTiwgdC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMubHUgPSAhMDtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JleHApOiBNYWtlIHN1cmUgdGhlcmUgaXMgb25seSBvbmUgRGF0YXN0b3JlIGluc3RhbmNlIHBlclxuLy8gZmlyZXN0b3JlLWV4cCBjbGllbnQuXG5hc3luYyBmdW5jdGlvbiBHdSh0LCBlLCBuKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgaSA9IEwodCksIHtyZXF1ZXN0OiByLCBkdTogb30gPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKaSh0LCBlKSwgaSA9IHt9LCByID0gW107XG4gICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAvLyBNYXAgYWxsIGNsaWVudC1zaWRlIGFsaWFzZXMgdG8gYSB1bmlxdWUgc2hvcnQtZm9ybVxuICAgICAgICAgICAgLy8gYWxpYXMuIFRoaXMgYXZvaWRzIGlzc3VlcyB3aXRoIGNsaWVudC1zaWRlIGFsaWFzZXMgdGhhdFxuICAgICAgICAgICAgLy8gZXhjZWVkIHRoZSAxNTAwLWJ5dGUgc3RyaW5nIHNpemUgbGltaXQuXG4gICAgICAgICAgICBjb25zdCBlID0gXCJhZ2dyZWdhdGVfXCIgKyBvKys7XG4gICAgICAgICAgICBpW2VdID0gdC5hbGlhcywgXCJjb3VudFwiID09PSB0Lnl0ID8gci5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogZSxcbiAgICAgICAgICAgICAgICBjb3VudDoge31cbiAgICAgICAgICAgIH0pIDogXCJhdmdcIiA9PT0gdC55dCA/IHIucHVzaCh7XG4gICAgICAgICAgICAgICAgYWxpYXM6IGUsXG4gICAgICAgICAgICAgICAgYXZnOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkUGF0aClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSA6IFwic3VtXCIgPT09IHQueXQgJiYgci5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogZSxcbiAgICAgICAgICAgICAgICBzdW06IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGRQYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIHJlcXVlc3Q6IHtcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeToge1xuICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGlvbnM6IHIsXG4gICAgICAgICAgICAgICAgICAgIHN0cnVjdHVyZWRRdWVyeTogcy5zdHJ1Y3R1cmVkUXVlcnlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhcmVudDogcy5wYXJlbnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkdTogaVxuICAgICAgICB9O1xuICAgIH0oaS5zZXJpYWxpemVyLCBKbihlKSwgbiksIHUgPSByLnBhcmVudDtcbiAgICBpLmNvbm5lY3Rpb24ucG8gfHwgZGVsZXRlIHIucGFyZW50O1xuICAgIGNvbnN0IGMgPSAoYXdhaXQgaS52byhcIlJ1bkFnZ3JlZ2F0aW9uUXVlcnlcIiwgdSwgciwgLypleHBlY3RlZFJlc3BvbnNlQ291bnQ9Ki8gMSkpLmZpbHRlcigodCA9PiAhIXQucmVzdWx0KSk7XG4gICAgLy8gT21pdCBSdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2UgdGhhdCBvbmx5IGNvbnRhaW4gcmVhZFRpbWVzLlxuICAgICAgICBGKDEgPT09IGMubGVuZ3RoKTtcbiAgICAvLyBSZW1hcCB0aGUgc2hvcnQtZm9ybSBhbGlhc2VzIHRoYXQgd2VyZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAgICAvLyB0byB0aGUgY2xpZW50LXNpZGUgYWxpYXNlcy4gVXNlcnMgd2lsbCBhY2Nlc3MgdGhlIHJlc3VsdHNcbiAgICAvLyB1c2luZyB0aGUgY2xpZW50LXNpZGUgYWxpYXMuXG4gICAgY29uc3QgYSA9IG51bGwgPT09IChzID0gY1swXS5yZXN1bHQpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuYWdncmVnYXRlRmllbGRzO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhhKS5yZWR1Y2UoKCh0LCBlKSA9PiAodFtvW2VdXSA9IGFbZV0sIHQpKSwge30pO1xufVxuXG4vKipcbiAqIEEgY29tcG9uZW50IHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvIHRyYWNrIHRoZSBPbmxpbmVTdGF0ZSAodGhhdCBpcyxcbiAqIHdoZXRoZXIgb3Igbm90IHRoZSBjbGllbnQgYXMgYSB3aG9sZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0byBiZSBvbmxpbmUgb3JcbiAqIG9mZmxpbmUpLCBpbXBsZW1lbnRpbmcgdGhlIGFwcHJvcHJpYXRlIGhldXJpc3RpY3MuXG4gKlxuICogSW4gcGFydGljdWxhciwgd2hlbiB0aGUgY2xpZW50IGlzIHRyeWluZyB0byBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLCB3ZVxuICogYWxsb3cgdXAgdG8gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB3aXRoaW4gT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgZm9yXG4gKiBhIGNvbm5lY3Rpb24gdG8gc3VjY2VlZC4gSWYgd2UgaGF2ZSB0b28gbWFueSBmYWlsdXJlcyBvciB0aGUgdGltZW91dCBlbGFwc2VzLFxuICogdGhlbiB3ZSBzZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUsIGFuZCB0aGUgY2xpZW50IHdpbGwgYmVoYXZlIGFzIGlmXG4gKiBpdCBpcyBvZmZsaW5lIChnZXQoKXMgd2lsbCByZXR1cm4gY2FjaGVkIGRhdGEsIGV0Yy4pLlxuICovXG5jbGFzcyBRdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IGUsIFxuICAgICAgICAvKiogVGhlIGN1cnJlbnQgT25saW5lU3RhdGUuICovXG4gICAgICAgIHRoaXMuc3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvdW50IG9mIGNvbnNlY3V0aXZlIGZhaWx1cmVzIHRvIG9wZW4gdGhlIHN0cmVhbS4gSWYgaXQgcmVhY2hlcyB0aGVcbiAgICAgICAgICogbWF4aW11bSBkZWZpbmVkIGJ5IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMsIHdlJ2xsIHNldCB0aGUgT25saW5lU3RhdGUgdG9cbiAgICAgICAgICogT2ZmbGluZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3UgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGltZXIgdGhhdCBlbGFwc2VzIGFmdGVyIE9OTElORV9TVEFURV9USU1FT1VUX01TLCBhdCB3aGljaCBwb2ludCB3ZVxuICAgICAgICAgKiB0cmFuc2l0aW9uIGZyb20gT25saW5lU3RhdGUuVW5rbm93biB0byBPbmxpbmVTdGF0ZS5PZmZsaW5lIHdpdGhvdXQgd2FpdGluZ1xuICAgICAgICAgKiBmb3IgdGhlIHN0cmVhbSB0byBhY3R1YWxseSBmYWlsIChNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHRpbWVzKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3UgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgbG9nIGEgd2FybmluZyBtZXNzYWdlIGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQgKGluaXRpYWxseSB0cnVlLCBjbGVhcmVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBzdHJlYW0sIG9yIGlmIHdlJ3ZlXG4gICAgICAgICAqIGxvZ2dlZCB0aGUgbWVzc2FnZSBhbHJlYWR5KS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXUgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IFJlbW90ZVN0b3JlIHdoZW4gYSB3YXRjaCBzdHJlYW0gaXMgc3RhcnRlZCAoaW5jbHVkaW5nIG9uIGVhY2hcbiAgICAgKiBiYWNrb2ZmIGF0dGVtcHQpLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgYXR0ZW1wdCwgaXQgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biBhbmQgc3RhcnRzXG4gICAgICogdGhlIG9ubGluZVN0YXRlVGltZXIuXG4gICAgICovICAgIGd1KCkge1xuICAgICAgICAwID09PSB0aGlzLnd1ICYmICh0aGlzLnl1KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCB0aGlzLl91ID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwib25saW5lX3N0YXRlX3RpbWVvdXRcIiAvKiBUaW1lcklkLk9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLl91ID0gbnVsbCwgXG4gICAgICAgIHRoaXMucHUoXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy55dShcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIEl1KHQpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLnl1KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pIDogKHRoaXMud3UrKywgXG4gICAgICAgIHRoaXMud3UgPj0gMSAmJiAodGhpcy5UdSgpLCB0aGlzLnB1KGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHt0LnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLnl1KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldCh0KSB7XG4gICAgICAgIHRoaXMuVHUoKSwgdGhpcy53dSA9IDAsIFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovID09PSB0ICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMubXUgPSAhMSksIHRoaXMueXUodCk7XG4gICAgfVxuICAgIHl1KHQpIHtcbiAgICAgICAgdCAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQpKTtcbiAgICB9XG4gICAgcHUodCkge1xuICAgICAgICBjb25zdCBlID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHt0fVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy5tdSA/IChrKGUpLCB0aGlzLm11ID0gITEpIDogTihcIk9ubGluZVN0YXRlVHJhY2tlclwiLCBlKTtcbiAgICB9XG4gICAgVHUoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuX3UgJiYgKHRoaXMuX3UuY2FuY2VsKCksIHRoaXMuX3UgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGp1IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRXUgPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkF1ID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudnUgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlJ1ID0gW10sIHRoaXMuUHUgPSBpLCB0aGlzLlB1LllyKCh0ID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICBlYyh0aGlzKSAmJiAoTihcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgICAgICAgICBlLnZ1LmFkZCg0IC8qIE9mZmxpbmVDYXVzZS5Db25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCBXdShlKSwgZS5idS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIFxuICAgICAgICAgICAgICAgICAgICBlLnZ1LmRlbGV0ZSg0IC8qIE9mZmxpbmVDYXVzZS5Db25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCB6dShlKTtcbiAgICAgICAgICAgICAgICB9KHRoaXMpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB0aGlzLmJ1ID0gbmV3IFF1KG4sIHMpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24genUodCkge1xuICAgIGlmIChlYyh0KSkgZm9yIChjb25zdCBlIG9mIHQuUnUpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITApO1xufVxuXG4vKipcbiAqIFRlbXBvcmFyaWx5IGRpc2FibGVzIHRoZSBuZXR3b3JrLiBUaGUgbmV0d29yayBjYW4gYmUgcmUtZW5hYmxlZCB1c2luZ1xuICogZW5hYmxlTmV0d29yaygpLlxuICovIGFzeW5jIGZ1bmN0aW9uIFd1KHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5SdSkgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMSk7XG59XG5cbi8qKlxuICogU3RhcnRzIG5ldyBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXQuIFVzZXMgcmVzdW1lIHRva2VuIGlmIHByb3ZpZGVkLiBJdFxuICogaXMgYSBuby1vcCBpZiB0aGUgdGFyZ2V0IG9mIGdpdmVuIGBUYXJnZXREYXRhYCBpcyBhbHJlYWR5IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovXG5mdW5jdGlvbiBIdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgbi5BdS5oYXMoZS50YXJnZXRJZCkgfHwgKFxuICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cbiAgICBuLkF1LnNldChlLnRhcmdldElkLCBlKSwgdGMobikgPyBcbiAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxuICAgIFp1KG4pIDogcGMobikuS28oKSAmJiBZdShuLCBlKSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdGVuIGZyb20gc2VydmVyLiBJdCBpcyBhIG5vLW9wIGlmIHRoZSBnaXZlbiB0YXJnZXQgaWQgaXNcbiAqIG5vdCBiZWluZyBsaXN0ZW5lZCB0by5cbiAqLyBmdW5jdGlvbiBKdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBwYyhuKTtcbiAgICBuLkF1LmRlbGV0ZShlKSwgcy5LbygpICYmIFh1KG4sIGUpLCAwID09PSBuLkF1LnNpemUgJiYgKHMuS28oKSA/IHMuam8oKSA6IGVjKG4pICYmIFxuICAgIC8vIFJldmVydCB0byBPbmxpbmVTdGF0ZS5Vbmtub3duIGlmIHRoZSB3YXRjaCBzdHJlYW0gaXMgbm90IG9wZW4gYW5kIHdlXG4gICAgLy8gaGF2ZSBubyBsaXN0ZW5lcnMsIHNpbmNlIHdpdGhvdXQgYW55IGxpc3RlbnMgdG8gc2VuZCB3ZSBjYW5ub3RcbiAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXG4gICAgbi5idS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gWXUodCwgZSkge1xuICAgIGlmICh0LlZ1LnF0KGUudGFyZ2V0SWQpLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgfHwgZS5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHJ0Lm1pbigpKSA+IDApIHtcbiAgICAgICAgY29uc3QgbiA9IHQucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZS50YXJnZXRJZCkuc2l6ZTtcbiAgICAgICAgZSA9IGUud2l0aEV4cGVjdGVkQ291bnQobik7XG4gICAgfVxuICAgIHBjKHQpLnN1KGUpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIFh1KHQsIGUpIHtcbiAgICB0LlZ1LnF0KGUpLCBwYyh0KS5pdShlKTtcbn1cblxuZnVuY3Rpb24gWnUodCkge1xuICAgIHQuVnUgPSBuZXcgRWkoe1xuICAgICAgICBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0OiBlID0+IHQucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSksXG4gICAgICAgIGxlOiBlID0+IHQuQXUuZ2V0KGUpIHx8IG51bGwsXG4gICAgICAgIHVlOiAoKSA9PiB0LmRhdGFzdG9yZS5zZXJpYWxpemVyLmRhdGFiYXNlSWRcbiAgICB9KSwgcGModCkuc3RhcnQoKSwgdC5idS5ndSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgd2F0Y2ggc3RyZWFtIHNob3VsZCBiZSBzdGFydGVkIGJlY2F1c2UgaXQncyBuZWNlc3NhcnlcbiAqIGFuZCBoYXMgbm90IHlldCBiZWVuIHN0YXJ0ZWQuXG4gKi8gZnVuY3Rpb24gdGModCkge1xuICAgIHJldHVybiBlYyh0KSAmJiAhcGModCkuVW8oKSAmJiB0LkF1LnNpemUgPiAwO1xufVxuXG5mdW5jdGlvbiBlYyh0KSB7XG4gICAgcmV0dXJuIDAgPT09IEwodCkudnUuc2l6ZTtcbn1cblxuZnVuY3Rpb24gbmModCkge1xuICAgIHQuVnUgPSB2b2lkIDA7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNjKHQpIHtcbiAgICB0LkF1LmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgIFl1KHQsIGUpO1xuICAgIH0pKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaWModCwgZSkge1xuICAgIG5jKHQpLCBcbiAgICAvLyBJZiB3ZSBzdGlsbCBuZWVkIHRoZSB3YXRjaCBzdHJlYW0sIHJldHJ5IHRoZSBjb25uZWN0aW9uLlxuICAgIHRjKHQpID8gKHQuYnUuSXUoZSksIFp1KHQpKSA6IFxuICAgIC8vIE5vIG5lZWQgdG8gcmVzdGFydCB3YXRjaCBzdHJlYW0gYmVjYXVzZSB0aGVyZSBhcmUgbm8gYWN0aXZlIHRhcmdldHMuXG4gICAgLy8gVGhlIG9ubGluZSBzdGF0ZSBpcyBzZXQgdG8gdW5rbm93biBiZWNhdXNlIHRoZXJlIGlzIG5vIGFjdGl2ZSBhdHRlbXB0XG4gICAgLy8gYXQgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvblxuICAgIHQuYnUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xufVxuXG5hc3luYyBmdW5jdGlvbiByYyh0LCBlLCBuKSB7XG4gICAgaWYgKFxuICAgIC8vIE1hcmsgdGhlIGNsaWVudCBhcyBvbmxpbmUgc2luY2Ugd2UgZ290IGEgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICB0LmJ1LnNldChcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyksIGUgaW5zdGFuY2VvZiBJaSAmJiAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA9PT0gZS5zdGF0ZSAmJiBlLmNhdXNlKSBcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxuICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBlLnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICB0LkF1LmhhcyhzKSAmJiAoYXdhaXQgdC5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHMsIG4pLCB0LkF1LmRlbGV0ZShzKSwgdC5WdS5yZW1vdmVUYXJnZXQocykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKHQsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgTihcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgZS50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgb2ModCwgbik7XG4gICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgeWkgPyB0LlZ1Lkh0KGUpIDogZSBpbnN0YW5jZW9mIHBpID8gdC5WdS5uZShlKSA6IHQuVnUuWHQoZSksIFxuICAgICFuLmlzRXF1YWwocnQubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgb3UodC5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8oZSkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqXG4gKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxuICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcbiAqIFN5bmNFbmdpbmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuVnUuY2UoZSk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuQXUuZ2V0KHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiB0LkF1LnNldChzLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQuQXUuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmICghcykgXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXG4gICAgICAgICAgICAgICAgLy8gc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuQXUuc2V0KGUsIHMud2l0aFJlc3VtZVRva2VuKFZlLkVNUFRZX0JZVEVfU1RSSU5HLCBzLnNuYXBzaG90VmVyc2lvbikpLCBcbiAgICAgICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cbiAgICAgICAgICAgICAgICBYdSh0LCBlKTtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSB0YXJnZXQgd2Ugc2VuZCBhcyBiZWluZyBvbiBiZWhhbGYgb2YgYW4gZXhpc3RlbmNlIGZpbHRlclxuICAgICAgICAgICAgICAgIC8vIG1pc21hdGNoLCBidXQgZG9uJ3QgYWN0dWFsbHkgcmV0YWluIHRoYXQgaW4gbGlzdGVuVGFyZ2V0cy4gVGhpcyBlbnN1cmVzXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBmbGFnIHRoZSBmaXJzdCByZS1saXN0ZW4gdGhpcyB3YXkgd2l0aG91dCBpbXBhY3RpbmcgZnV0dXJlXG4gICAgICAgICAgICAgICAgLy8gbGlzdGVucyBvZiB0aGlzIHRhcmdldCAodGhhdCBtaWdodCBoYXBwZW4gZS5nLiBvbiByZWNvbm5lY3QpLlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgY3Iocy50YXJnZXQsIGUsIG4sIHMuc2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIFl1KHQsIGkpO1xuICAgICAgICAgICAgfSkpLCB0LnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50KG4pO1xuICAgICAgICB9KHQsIG4pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgTihcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJhaXNlIHNuYXBzaG90OlwiLCBlKSwgYXdhaXQgb2ModCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY292ZXJ5IGxvZ2ljIGZvciBJbmRleGVkREIgZXJyb3JzIHRoYXQgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbFxuICogYG9wYCBzdWNjZWVkcy4gUmV0cmllcyBhcmUgc2NoZWR1bGVkIHdpdGggYmFja29mZiB1c2luZ1xuICogYGVucXVldWVSZXRyeWFibGUoKWAuIElmIGBvcCgpYCBpcyBub3QgcHJvdmlkZWQsIEluZGV4ZWREQiBhY2Nlc3MgaXNcbiAqIHZhbGlkYXRlZCB2aWEgYSBnZW5lcmljIG9wZXJhdGlvbi5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBiZWZvcmVcbiAqIGFueSByZXRyeSBhdHRlbXB0LlxuICovIGFzeW5jIGZ1bmN0aW9uIG9jKHQsIGUsIG4pIHtcbiAgICBpZiAoIUR0KGUpKSB0aHJvdyBlO1xuICAgIHQudnUuYWRkKDEgLyogT2ZmbGluZUNhdXNlLkluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgIC8vIERpc2FibGUgbmV0d29yayBhbmQgcmFpc2Ugb2ZmbGluZSBzbmFwc2hvdHNcbiAgICBhd2FpdCBXdSh0KSwgdC5idS5zZXQoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyksIG4gfHwgKFxuICAgIC8vIFVzZSBhIHNpbXBsZSByZWFkIG9wZXJhdGlvbiB0byBkZXRlcm1pbmUgaWYgSW5kZXhlZERCIHJlY292ZXJlZC5cbiAgICAvLyBJZGVhbGx5LCB3ZSB3b3VsZCBleHBvc2UgYSBoZWFsdGggY2hlY2sgZGlyZWN0bHkgb24gU2ltcGxlRGIsIGJ1dFxuICAgIC8vIFJlbW90ZVN0b3JlIG9ubHkgaGFzIGFjY2VzcyB0byBwZXJzaXN0ZW5jZSB0aHJvdWdoIExvY2FsU3RvcmUuXG4gICAgbiA9ICgpID0+IG91KHQubG9jYWxTdG9yZSkpLCBcbiAgICAvLyBQcm9iZSBJbmRleGVkREIgcGVyaW9kaWNhbGx5IGFuZCByZS1lbmFibGUgbmV0d29ya1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIE4oXCJSZW1vdGVTdG9yZVwiLCBcIlJldHJ5aW5nIEluZGV4ZWREQiBhY2Nlc3NcIiksIGF3YWl0IG4oKSwgdC52dS5kZWxldGUoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IHp1KHQpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIHVjKHQsIGUpIHtcbiAgICByZXR1cm4gZSgpLmNhdGNoKChuID0+IG9jKHQsIG4sIGUpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNjKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KSwgbiA9IEljKGUpO1xuICAgIGxldCBzID0gZS5FdS5sZW5ndGggPiAwID8gZS5FdVtlLkV1Lmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDthYyhlKTsgKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgYXUoZS5sb2NhbFN0b3JlLCBzKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIDAgPT09IGUuRXUubGVuZ3RoICYmIG4uam8oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0LmJhdGNoSWQsIGhjKGUsIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgb2MoZSwgdCk7XG4gICAgfVxuICAgIGxjKGUpICYmIGZjKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xuICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cbiAqLyBmdW5jdGlvbiBhYyh0KSB7XG4gICAgcmV0dXJuIGVjKHQpICYmIHQuRXUubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIGhjKHQsIGUpIHtcbiAgICB0LkV1LnB1c2goZSk7XG4gICAgY29uc3QgbiA9IEljKHQpO1xuICAgIG4uS28oKSAmJiBuLm91ICYmIG4udXUoZS5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBsYyh0KSB7XG4gICAgcmV0dXJuIGVjKHQpICYmICFJYyh0KS5VbygpICYmIHQuRXUubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gZmModCkge1xuICAgIEljKHQpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRjKHQpIHtcbiAgICBJYyh0KS5odSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB3Yyh0KSB7XG4gICAgY29uc3QgZSA9IEljKHQpO1xuICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LkV1KSBlLnV1KG4ubXV0YXRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX2ModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LkV1LnNoaWZ0KCksIGkgPSB0aS5mcm9tKHMsIGUsIG4pO1xuICAgIGF3YWl0IHVjKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBjYyh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbWModCwgZSkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgZSAmJiBJYyh0KS5vdSAmJiBcbiAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cbiAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxuICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxuICAgICAgICBpZiAobiA9IGUuY29kZSwgb2kobikgJiYgbiAhPT0gcS5BQk9SVEVEKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5FdS5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgIEljKHQpLlFvKCksIGF3YWl0IHVjKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZShuLmJhdGNoSWQsIGUpKSksIFxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxuICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICAgICAgICAgIGF3YWl0IGNjKHQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuO1xuICAgIH0odCwgZSksIFxuICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxuICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXG4gICAgbGModCkgJiYgZmModCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBOKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgY29uc3QgcyA9IGVjKG4pO1xuICAgIC8vIFRlYXIgZG93biBhbmQgcmUtY3JlYXRlIG91ciBuZXR3b3JrIHN0cmVhbXMuIFRoaXMgd2lsbCBlbnN1cmUgd2UgZ2V0IGFcbiAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAvLyBuZXcgbXV0YXRpb25zIGZyb20gdGhlIExvY2FsU3RvcmUgKHNpbmNlIG11dGF0aW9ucyBhcmUgcGVyLXVzZXIpLlxuICAgICAgICBuLnZ1LmFkZCgzIC8qIE9mZmxpbmVDYXVzZS5DcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgV3UobiksIHMgJiYgXG4gICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgIG4uYnUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCBhd2FpdCBuLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGUpLCBcbiAgICBuLnZ1LmRlbGV0ZSgzIC8qIE9mZmxpbmVDYXVzZS5DcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgenUobik7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXG4gKi8gYXN5bmMgZnVuY3Rpb24geWModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIGUgPyAobi52dS5kZWxldGUoMiAvKiBPZmZsaW5lQ2F1c2UuSXNTZWNvbmRhcnkgKi8pLCBhd2FpdCB6dShuKSkgOiBlIHx8IChuLnZ1LmFkZCgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIFxuICAgIGF3YWl0IFd1KG4pLCBuLmJ1LnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSk7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXYXRjaFN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2F0Y2hTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBwYyh0KSB7XG4gICAgcmV0dXJuIHQuU3UgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0LlN1ID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gTCh0KTtcbiAgICAgICAgcmV0dXJuIHMuZnUoKSwgbmV3IHF1KGUsIHMuY29ubmVjdGlvbiwgcy5hdXRoQ3JlZGVudGlhbHMsIHMuYXBwQ2hlY2tDcmVkZW50aWFscywgcy5zZXJpYWxpemVyLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgdW86IHNjLmJpbmQobnVsbCwgdCksXG4gICAgICAgIGFvOiBpYy5iaW5kKG51bGwsIHQpLFxuICAgICAgICBudTogcmMuYmluZChudWxsLCB0KVxuICAgIH0pLCB0LlJ1LnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuU3UuUW8oKSwgdGModCkgPyBadSh0KSA6IHQuYnUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKSA6IChhd2FpdCB0LlN1LnN0b3AoKSwgXG4gICAgICAgIG5jKHQpKTtcbiAgICB9KSkpLCB0LlN1O1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gSWModCkge1xuICAgIHJldHVybiB0LkR1IHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5EdSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEwodCk7XG4gICAgICAgIHJldHVybiBzLmZ1KCksIG5ldyBVdShlLCBzLmNvbm5lY3Rpb24sIHMuYXV0aENyZWRlbnRpYWxzLCBzLmFwcENoZWNrQ3JlZGVudGlhbHMsIHMuc2VyaWFsaXplciwgbik7XG4gICAgfSh0LmRhdGFzdG9yZSwgdC5hc3luY1F1ZXVlLCB7XG4gICAgICAgIHVvOiBkYy5iaW5kKG51bGwsIHQpLFxuICAgICAgICBhbzogbWMuYmluZChudWxsLCB0KSxcbiAgICAgICAgYXU6IHdjLmJpbmQobnVsbCwgdCksXG4gICAgICAgIGN1OiBfYy5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuUnUucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5EdS5RbygpLCBcbiAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICAgICAgICBhd2FpdCBjYyh0KSkgOiAoYXdhaXQgdC5EdS5zdG9wKCksIHQuRXUubGVuZ3RoID4gMCAmJiAoTihcIlJlbW90ZVN0b3JlXCIsIGBTdG9wcGluZyB3cml0ZSBzdHJlYW0gd2l0aCAke3QuRXUubGVuZ3RofSBwZW5kaW5nIHdyaXRlc2ApLCBcbiAgICAgICAgdC5FdSA9IFtdKSk7XG4gICAgfSkpKSwgdC5EdTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgZnV0dXJlIG9uIGFuIEFzeW5jUXVldWUuXG4gKlxuICogSXQgaXMgY3JlYXRlZCB2aWEgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSgpLlxuICpcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxuICpcbiAqIE5vdGU6IFdlIGltcGxlbWVudCBgUHJvbWlzZUxpa2VgIGluc3RlYWQgb2YgYFByb21pc2VgLCBhcyB0aGUgYFByb21pc2VgIHR5cGVcbiAqIGluIG5ld2VyIHZlcnNpb25zIG9mIFR5cGVTY3JpcHQgZGVmaW5lcyBgZmluYWxseWAsIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW5cbiAqIElFLlxuICovXG5jbGFzcyBUYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLnRhcmdldFRpbWVNcyA9IG4sIHRoaXMub3AgPSBzLCB0aGlzLnJlbW92YWxDYWxsYmFjayA9IGksIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gbmV3IEssIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKSwgXG4gICAgICAgIC8vIEl0J3Mgbm9ybWFsIGZvciB0aGUgZGVmZXJyZWQgcHJvbWlzZSB0byBiZSBjYW5jZWxlZCAoZHVlIHRvIGNhbmNlbGxhdGlvbilcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgIC8vICdVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZycgbG9nIHNwYW0uXG4gICAgICAgIHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaCgodCA9PiB7fSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgLSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cbiAgICAgKiBAcGFyYW0gaWQgLSBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxuICAgICAqIEBwYXJhbSBkZWxheU1zIC0gVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cbiAgICAgKiBAcGFyYW0gb3AgLSBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVBbmRTY2hlZHVsZSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBEYXRlLm5vdygpICsgbiwgbyA9IG5ldyBUYyh0LCBlLCByLCBzLCBpKTtcbiAgICAgICAgcmV0dXJuIG8uc3RhcnQobiksIG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgdGltZXIuIFRoaXMgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNvbnN0cnVjdGlvbiBieVxuICAgICAqIGNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gICAgICovICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IHNldFRpbWVvdXQoKCgpID0+IHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCkpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWVzIHRoZSBvcGVyYXRpb24gdG8gcnVuIGltbWVkaWF0ZWx5IChpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJ1biBvclxuICAgICAqIGNhbmNlbGVkKS5cbiAgICAgKi8gICAgc2tpcERlbGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VscyB0aGUgb3BlcmF0aW9uIGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQgb3IgY2FuY2VsZWQuIFRoZVxuICAgICAqIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIEFzIGxvbmcgYXMgdGhlIG9wZXJhdGlvbiBoYXMgbm90IHlldCBiZWVuIHJ1biwgY2FsbGluZyBjYW5jZWwoKSBwcm92aWRlcyBhXG4gICAgICogZ3VhcmFudGVlIHRoYXQgdGhlIG9wZXJhdGlvbiB3aWxsIG5vdCBiZSBydW4uXG4gICAgICovICAgIGNhbmNlbCh0KSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMuY2xlYXJUaW1lb3V0KCksIHRoaXMuZGVmZXJyZWQucmVqZWN0KG5ldyBVKHEuQ0FOQ0VMTEVELCBcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIiArICh0ID8gXCI6IFwiICsgdCA6IFwiXCIpKSkpO1xuICAgIH1cbiAgICBoYW5kbGVEZWxheUVsYXBzZWQoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlID8gKHRoaXMuY2xlYXJUaW1lb3V0KCksIFxuICAgICAgICB0aGlzLm9wKCkudGhlbigodCA9PiB0aGlzLmRlZmVycmVkLnJlc29sdmUodCkpKSkgOiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLCBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSksIFxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaXJlc3RvcmVFcnJvciB0aGF0IGNhbiBiZSBzdXJmYWNlZCB0byB0aGUgdXNlciBpZiB0aGUgcHJvdmlkZWRcbiAqIGVycm9yIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuIFJlLXRocm93cyB0aGUgZXJyb3Igb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIEVjKHQsIGUpIHtcbiAgICBpZiAoayhcIkFzeW5jUXVldWVcIiwgYCR7ZX06ICR7dH1gKSwgRHQodCkpIHJldHVybiBuZXcgVShxLlVOQVZBSUxBQkxFLCBgJHtlfTogJHt0fWApO1xuICAgIHRocm93IHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50U2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGRvY3VtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLiBXZSBhbHdheXMgYWRkIGEgZG9jdW1lbnQga2V5XG4gKiBjb21wYXJhdG9yIG9uIHRvcCBvZiB3aGF0IGlzIHByb3ZpZGVkIHRvIGd1YXJhbnRlZSBkb2N1bWVudCBlcXVhbGl0eSBiYXNlZCBvblxuICogdGhlIGtleS5cbiAqLyBjbGFzcyBBYyB7XG4gICAgLyoqIFRoZSBkZWZhdWx0IG9yZGVyaW5nIGlzIGJ5IGtleSBpZiB0aGUgY29tcGFyYXRvciBpcyBvbWl0dGVkICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBXZSBhcmUgYWRkaW5nIGRvY3VtZW50IGtleSBjb21wYXJhdG9yIHRvIHRoZSBlbmQgYXMgaXQncyB0aGUgb25seVxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0ID8gKGUsIG4pID0+IHQoZSwgbikgfHwgaHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogKHQsIGUpID0+IGh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSwgXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBocygpLCB0aGlzLnNvcnRlZFNldCA9IG5ldyBwZSh0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNvbXBhcmF0b3IuXG4gICAgICovICAgIHN0YXRpYyBlbXB0eVNldCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQWModC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xuICAgICAqLyAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YoZSkgOiAtMTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqLyAgICBhZGQodCkge1xuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGVsZXRlKHQua2V5KTtcbiAgICAgICAgcmV0dXJuIGUuY29weShlLmtleWVkTWFwLmluc2VydCh0LmtleSwgdCksIGUuc29ydGVkU2V0Lmluc2VydCh0LCBudWxsKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKHQpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUoZSkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBBYykpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLCBuID0gdC5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICghdC5pc0VxdWFsKHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIDAgPT09IHQubGVuZ3RoID8gXCJEb2N1bWVudFNldCAoKVwiIDogXCJEb2N1bWVudFNldCAoXFxuICBcIiArIHQuam9pbihcIiAgXFxuXCIpICsgXCJcXG4pXCI7XG4gICAgfVxuICAgIGNvcHkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IEFjO1xuICAgICAgICByZXR1cm4gbi5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yLCBuLmtleWVkTWFwID0gdCwgbi5zb3J0ZWRTZXQgPSBlLCBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cbiAqLyBjbGFzcyB2YyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuQ3UgPSBuZXcgcGUoaHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHRyYWNrKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZG9jLmtleSwgbiA9IHRoaXMuQ3UuZ2V0KGUpO1xuICAgICAgICBuID8gXG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgY2hhbmdlIHdpdGggdGhlIGV4aXN0aW5nIGNoYW5nZS5cbiAgICAgICAgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICE9PSB0LnR5cGUgJiYgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovID09PSBuLnR5cGUgPyB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwgdCkgOiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gPT09IHQudHlwZSAmJiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAhPT0gbi50eXBlID8gdGhpcy5DdSA9IHRoaXMuQ3UuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IG4udHlwZSxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuQ3UgPSB0aGlzLkN1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5DdSA9IHRoaXMuQ3UuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuQ3UgPSB0aGlzLkN1LnJlbW92ZShlKSA6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovID09PSB0LnR5cGUgJiYgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBuLmRvY1xuICAgICAgICB9KSA6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gdC50eXBlICYmIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovID09PSBuLnR5cGUgPyB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiBcbiAgICAgICAgLy8gVGhpcyBpbmNsdWRlcyB0aGVzZSBjYXNlcywgd2hpY2ggZG9uJ3QgbWFrZSBzZW5zZTpcbiAgICAgICAgLy8gQWRkZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPlJlbW92ZWRcbiAgICAgICAgLy8gTW9kaWZpZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1vZGlmaWVkXG4gICAgICAgIC8vIE1ldGFkYXRhLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5NZXRhZGF0YVxuICAgICAgICBPKCkgOiB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwgdCk7XG4gICAgfVxuICAgIHh1KCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLkN1Lmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICB0LnB1c2gobik7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIFJjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCB1LCBjKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLmRvY3MgPSBlLCB0aGlzLm9sZERvY3MgPSBuLCB0aGlzLmRvY0NoYW5nZXMgPSBzLCB0aGlzLm11dGF0ZWRLZXlzID0gaSwgXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gciwgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID0gbywgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IHUsIFxuICAgICAgICB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPSBjO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHIucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIG5ldyBSYyh0LCBlLCBBYy5lbXB0eVNldChlKSwgciwgbiwgcywgXG4gICAgICAgIC8qIHN5bmNTdGF0ZUNoYW5nZWQ9ICovICEwLCBcbiAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExLCBpKTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGUgJiYgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID09PSB0Lmhhc0NhY2hlZFJlc3VsdHMgJiYgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID09PSB0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgdGhpcy5tdXRhdGVkS2V5cy5pc0VxdWFsKHQubXV0YXRlZEtleXMpICYmIFpuKHRoaXMucXVlcnksIHQucXVlcnkpICYmIHRoaXMuZG9jcy5pc0VxdWFsKHQuZG9jcykgJiYgdGhpcy5vbGREb2NzLmlzRXF1YWwodC5vbGREb2NzKSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jQ2hhbmdlcywgbiA9IHQuZG9jQ2hhbmdlcztcbiAgICAgICAgaWYgKGUubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIGlmIChlW3RdLnR5cGUgIT09IG5bdF0udHlwZSB8fCAhZVt0XS5kb2MuaXNFcXVhbChuW3RdLmRvYykpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXG4gKiB0cmFja2VkIGJ5IEV2ZW50TWFuYWdlci5cbiAqLyBjbGFzcyBQYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuTnUgPSB2b2lkIDAsIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBiYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IG5ldyBvcygodCA9PiB0cyh0KSksIFpuKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5rdSA9IG5ldyBTZXQ7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBWYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITEsIHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyIHx8IChpID0gITAsIHIgPSBuZXcgUGMpLCBpKSB0cnkge1xuICAgICAgICByLk51ID0gYXdhaXQgbi5vbkxpc3RlbihzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBFYyh0LCBgSW5pdGlhbGl6YXRpb24gb2YgcXVlcnkgJyR7ZXMoZS5xdWVyeSl9JyBmYWlsZWRgKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgZS5vbkVycm9yKG4pO1xuICAgIH1cbiAgICBpZiAobi5xdWVyaWVzLnNldChzLCByKSwgci5saXN0ZW5lcnMucHVzaChlKSwgXG4gICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgZS5NdShuLm9ubGluZVN0YXRlKSwgci5OdSkge1xuICAgICAgICBlLiR1KHIuTnUpICYmIHhjKG4pO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gU2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExO1xuICAgIGNvbnN0IHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyKSB7XG4gICAgICAgIGNvbnN0IHQgPSByLmxpc3RlbmVycy5pbmRleE9mKGUpO1xuICAgICAgICB0ID49IDAgJiYgKHIubGlzdGVuZXJzLnNwbGljZSh0LCAxKSwgaSA9IDAgPT09IHIubGlzdGVuZXJzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChpKSByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShzKSwgbi5vblVubGlzdGVuKHMpO1xufVxuXG5mdW5jdGlvbiBEYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgbGV0IHMgPSAhMTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBjb25zdCBlID0gdC5xdWVyeSwgaSA9IG4ucXVlcmllcy5nZXQoZSk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgaS5saXN0ZW5lcnMpIGUuJHUodCkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICBpLk51ID0gdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzICYmIHhjKG4pO1xufVxuXG5mdW5jdGlvbiBDYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCksIGkgPSBzLnF1ZXJpZXMuZ2V0KGUpO1xuICAgIGlmIChpKSBmb3IgKGNvbnN0IHQgb2YgaS5saXN0ZW5lcnMpIHQub25FcnJvcihuKTtcbiAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycy4gTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHN5bmNFbmdpbmUudW5saXN0ZW4oKVxuICAgIC8vIGFmdGVyIGFuIGVycm9yLlxuICAgICAgICBzLnF1ZXJpZXMuZGVsZXRlKGUpO1xufVxuXG4vLyBDYWxsIGFsbCBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIHNldC5cbmZ1bmN0aW9uIHhjKHQpIHtcbiAgICB0Lmt1LmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0Lm5leHQoKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUXVlcnlMaXN0ZW5lciB0YWtlcyBhIHNlcmllcyBvZiBpbnRlcm5hbCB2aWV3IHNuYXBzaG90cyBhbmQgZGV0ZXJtaW5lc1xuICogd2hlbiB0byByYWlzZSB0aGUgZXZlbnQuXG4gKlxuICogSXQgdXNlcyBhbiBPYnNlcnZlciB0byBkaXNwYXRjaCBldmVudHMuXG4gKi8gY2xhc3MgTmMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuT3UgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxuICAgICAgICAgKiBvYnNlcnZlci4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlIG9uY2Ugd2UndmUgYWN0dWFsbHkgcmFpc2VkIGFuIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GdSA9ICExLCB0aGlzLkJ1ID0gbnVsbCwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgJHUodCkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmRvY0NoYW5nZXMpIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAhPT0gbi50eXBlICYmIGUucHVzaChuKTtcbiAgICAgICAgICAgIHQgPSBuZXcgUmModC5xdWVyeSwgdC5kb2NzLCB0Lm9sZERvY3MsIGUsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlLCB0LnN5bmNTdGF0ZUNoYW5nZWQsIFxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICEwLCB0Lmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLkZ1ID8gdGhpcy5MdSh0KSAmJiAodGhpcy5PdS5uZXh0KHQpLCBlID0gITApIDogdGhpcy5xdSh0LCB0aGlzLm9ubGluZVN0YXRlKSAmJiAodGhpcy5VdSh0KSwgXG4gICAgICAgIGUgPSAhMCksIHRoaXMuQnUgPSB0LCBlO1xuICAgIH1cbiAgICBvbkVycm9yKHQpIHtcbiAgICAgICAgdGhpcy5PdS5lcnJvcih0KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciBhIHNuYXBzaG90IHdhcyByYWlzZWQuICovICAgIE11KHQpIHtcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLkJ1ICYmICF0aGlzLkZ1ICYmIHRoaXMucXUodGhpcy5CdSwgdCkgJiYgKHRoaXMuVXUodGhpcy5CdSksIGUgPSAhMCksIFxuICAgICAgICBlO1xuICAgIH1cbiAgICBxdSh0LCBlKSB7XG4gICAgICAgIC8vIEFsd2F5cyByYWlzZSB0aGUgZmlyc3QgZXZlbnQgd2hlbiB3ZSdyZSBzeW5jZWRcbiAgICAgICAgaWYgKCF0LmZyb21DYWNoZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBOT1RFOiBXZSBjb25zaWRlciBPbmxpbmVTdGF0ZS5Vbmtub3duIGFzIG9ubGluZSAoaXQgc2hvdWxkIGJlY29tZSBPZmZsaW5lXG4gICAgICAgIC8vIG9yIE9ubGluZSBpZiB3ZSB3YWl0IGxvbmcgZW5vdWdoKS5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gZTtcbiAgICAgICAgLy8gRG9uJ3QgcmFpc2UgdGhlIGV2ZW50IGlmIHdlJ3JlIG9ubGluZSwgYXJlbid0IHN5bmNlZCB5ZXQgKGNoZWNrZWRcbiAgICAgICAgLy8gYWJvdmUpIGFuZCBhcmUgd2FpdGluZyBmb3IgYSBzeW5jLlxuICAgICAgICAgICAgICAgIHJldHVybiAoIXRoaXMub3B0aW9ucy5LdSB8fCAhbikgJiYgKCF0LmRvY3MuaXNFbXB0eSgpIHx8IHQuaGFzQ2FjaGVkUmVzdWx0cyB8fCBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovID09PSBlKTtcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cywgaGF2ZSBjYWNoZWQgcmVzdWx0cyBiZWZvcmUsXG4gICAgICAgIC8vIG9yIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICB9XG4gICAgTHUodCkge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBNZXRhZGF0YSBvbmx5IGNoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc3RyaXBwZWQgb3V0IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgb25seSBjaGFuZ2VzIHdlIHdpbGwgc2VlIGFyZSB0aGUgb25lcyB3ZSBzaG91bGRcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxuICAgICAgICBpZiAodC5kb2NDaGFuZ2VzLmxlbmd0aCA+IDApIHJldHVybiAhMDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuQnUgJiYgdGhpcy5CdS5oYXNQZW5kaW5nV3JpdGVzICE9PSB0Lmhhc1BlbmRpbmdXcml0ZXM7XG4gICAgICAgIHJldHVybiAhKCF0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgIWUpICYmICEwID09PSB0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgLy8gR2VuZXJhbGx5IHdlIHNob3VsZCBoYXZlIGhpdCBvbmUgb2YgdGhlIGNhc2VzIGFib3ZlLCBidXQgaXQncyBwb3NzaWJsZVxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcbiAgICAgICAgLy8gc3RyaXBwZWQgb3V0LlxuICAgICAgICB9XG4gICAgVXUodCkge1xuICAgICAgICB0ID0gUmMuZnJvbUluaXRpYWxEb2N1bWVudHModC5xdWVyeSwgdC5kb2NzLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSwgdC5oYXNDYWNoZWRSZXN1bHRzKSwgXG4gICAgICAgIHRoaXMuRnUgPSAhMCwgdGhpcy5PdS5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb21wbGV0ZSBlbGVtZW50IGluIHRoZSBidW5kbGUgc3RyZWFtLCB0b2dldGhlciB3aXRoIHRoZSBieXRlIGxlbmd0aCBpdFxuICogb2NjdXBpZXMgaW4gdGhlIHN0cmVhbS5cbiAqLyBjbGFzcyBrYyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLy8gSG93IG1hbnkgYnl0ZXMgdGhpcyBlbGVtZW50IHRha2VzIHRvIHN0b3JlIGluIHRoZSBidW5kbGUuXG4gICAgZSkge1xuICAgICAgICB0aGlzLkd1ID0gdCwgdGhpcy5ieXRlTGVuZ3RoID0gZTtcbiAgICB9XG4gICAgUXUoKSB7XG4gICAgICAgIHJldHVybiBcIm1ldGFkYXRhXCIgaW4gdGhpcy5HdTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBNYyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSB0O1xuICAgIH1cbiAgICBycih0KSB7XG4gICAgICAgIHJldHVybiBPaSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICB1cih0KSB7XG4gICAgICAgIHJldHVybiB0Lm1ldGFkYXRhLmV4aXN0cyA/IEtpKHRoaXMuc2VyaWFsaXplciwgdC5kb2N1bWVudCwgITEpIDogYW4ubmV3Tm9Eb2N1bWVudCh0aGlzLnJyKHQubWV0YWRhdGEubmFtZSksIHRoaXMuY3IodC5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBjcih0KSB7XG4gICAgICAgIHJldHVybiBOaSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyAkYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmp1ID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5zZXJpYWxpemVyID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCBcbiAgICAgICAgLyoqIFRoZSBjb2xsZWN0aW9uIGdyb3VwcyBhZmZlY3RlZCBieSB0aGlzIGJ1bmRsZS4gKi9cbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzID0gbmV3IFNldCwgdGhpcy5wcm9ncmVzcyA9IE9jKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgZnJvbSB0aGUgYnVuZGxlIHRvIHRoZSBsb2FkZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHByb2dyZXNzIGlmIGFkZGluZyB0aGUgZWxlbWVudCBsZWFkcyB0byBhIG5ldyBwcm9ncmVzcyxcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICAgICAqLyAgICB6dSh0KSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuYnl0ZXNMb2FkZWQgKz0gdC5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgZSA9IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkO1xuICAgICAgICBpZiAodC5HdS5uYW1lZFF1ZXJ5KSB0aGlzLnF1ZXJpZXMucHVzaCh0Lkd1Lm5hbWVkUXVlcnkpOyBlbHNlIGlmICh0Lkd1LmRvY3VtZW50TWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB0Lkd1LmRvY3VtZW50TWV0YWRhdGFcbiAgICAgICAgICAgIH0pLCB0Lkd1LmRvY3VtZW50TWV0YWRhdGEuZXhpc3RzIHx8ICsrZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB1dC5mcm9tU3RyaW5nKHQuR3UuZG9jdW1lbnRNZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3Vwcy5hZGQobi5nZXQobi5sZW5ndGggLSAyKSk7XG4gICAgICAgIH0gZWxzZSB0Lkd1LmRvY3VtZW50ICYmICh0aGlzLmRvY3VtZW50c1t0aGlzLmRvY3VtZW50cy5sZW5ndGggLSAxXS5kb2N1bWVudCA9IHQuR3UuZG9jdW1lbnQsIFxuICAgICAgICArK2UpO1xuICAgICAgICByZXR1cm4gZSAhPT0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPyAodGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPSBlLCBcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcykpIDogbnVsbDtcbiAgICB9XG4gICAgV3UodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcCwgbiA9IG5ldyBNYyh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkgaWYgKHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4ucnIocy5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBzLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gKGUuZ2V0KG4pIHx8IGdzKCkpLmFkZCh0KTtcbiAgICAgICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwcm9ncmVzcyB0byAnU3VjY2VzcycgYW5kIHJldHVybiB0aGUgdXBkYXRlZCBwcm9ncmVzcy5cbiAgICAgKi8gICAgYXN5bmMgY29tcGxldGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBtdSh0aGlzLmxvY2FsU3RvcmUsIG5ldyBNYyh0aGlzLnNlcmlhbGl6ZXIpLCB0aGlzLmRvY3VtZW50cywgdGhpcy5qdS5pZCksIGUgPSB0aGlzLld1KHRoaXMuZG9jdW1lbnRzKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMucXVlcmllcykgYXdhaXQgZ3UodGhpcy5sb2NhbFN0b3JlLCB0LCBlLmdldCh0Lm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MudGFza1N0YXRlID0gXCJTdWNjZXNzXCIsIHtcbiAgICAgICAgICAgIHByb2dyZXNzOiB0aGlzLnByb2dyZXNzLFxuICAgICAgICAgICAgSHU6IHRoaXMuY29sbGVjdGlvbkdyb3VwcyxcbiAgICAgICAgICAgIEp1OiB0XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBpbml0aWFsIHByb2dyZXNzIG9mXG4gKiBsb2FkaW5nIGEgYnVuZGxlLlxuICovIGZ1bmN0aW9uIE9jKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDAsXG4gICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICB0b3RhbERvY3VtZW50czogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgdG90YWxCeXRlczogdC50b3RhbEJ5dGVzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdGhhdCB0aGUgbG9hZGluZ1xuICogaGFzIHN1Y2NlZWRlZC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIEZjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIEJjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogVmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdCBkb2NzIGFyZSBpblxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcbiAqIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3QgcG9zc2libGUgcmVzdWx0cy5cbiAqLyBjbGFzcyBMYyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuWXUgPSBlLCB0aGlzLlh1ID0gbnVsbCwgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxuICAgICAgICAgKiBjdXJyZW50IGFmdGVyIGl0IGhhcyBzZWVuIHRoZSBjdXJyZW50IGZsYWcgZnJvbSB0aGUgYmFja2VuZCBhbmQgZGlkIG5vdFxuICAgICAgICAgKiBsb3NlIGNvbnNpc3RlbmN5IHdpdGhpbiB0aGUgd2F0Y2ggc3RyZWFtIChlLmcuIGJlY2F1c2Ugb2YgYW4gZXhpc3RlbmNlXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgXG4gICAgICAgIC8qKiBEb2N1bWVudHMgaW4gdGhlIHZpZXcgYnV0IG5vdCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgICAgICB0aGlzLlp1ID0gZ3MoKSwgXG4gICAgICAgIC8qKiBEb2N1bWVudCBLZXlzIHRoYXQgaGF2ZSBsb2NhbCBjaGFuZ2VzICovXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBncygpLCB0aGlzLnRjID0gaXModCksIHRoaXMuZWMgPSBuZXcgQWModGhpcy50Yyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcmVtb3RlIGRvY3VtZW50cyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIHRvbGQgdXMgYmVsb25ncyB0byB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aFxuICAgICAqIHRoaXMgdmlldy5cbiAgICAgKi8gICAgZ2V0IG5jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZdTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHNldCBvZiBkb2MgY2hhbmdlcywgYXBwbGllcyB0aGUgcXVlcnkgbGltaXQsIGFuZCBjb21wdXRlc1xuICAgICAqIHdoYXQgdGhlIG5ldyByZXN1bHRzIHNob3VsZCBiZSwgd2hhdCB0aGUgY2hhbmdlcyB3ZXJlLCBhbmQgd2hldGhlciB3ZSBtYXlcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBkb2MgY2hhbmdlcyB0byBhcHBseSB0byB0aGlzIHZpZXcuXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ2hhbmdlcyAtIElmIHRoaXMgaXMgYmVpbmcgY2FsbGVkIHdpdGggYSByZWZpbGwsIHRoZW4gc3RhcnRcbiAgICAgKiAgICAgICAgd2l0aCB0aGlzIHNldCBvZiBkb2NzIGFuZCBjaGFuZ2VzIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAgICAgKiBAcmV0dXJucyBhIG5ldyBzZXQgb2YgZG9jcywgY2hhbmdlcywgYW5kIHJlZmlsbCBmbGFnLlxuICAgICAqLyAgICBzYyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gZS5pYyA6IG5ldyB2YywgcyA9IGUgPyBlLmVjIDogdGhpcy5lYztcbiAgICAgICAgbGV0IGkgPSBlID8gZS5tdXRhdGVkS2V5cyA6IHRoaXMubXV0YXRlZEtleXMsIHIgPSBzLCBvID0gITE7XG4gICAgICAgIC8vIFRyYWNrIHRoZSBsYXN0IGRvYyBpbiBhIChmdWxsKSBsaW1pdC4gVGhpcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugc29tZVxuICAgICAgICAvLyB1cGRhdGUgKGEgZGVsZXRlLCBvciBhbiB1cGRhdGUgbW92aW5nIGEgZG9jIHBhc3QgdGhlIG9sZCBsaW1pdCkgbWlnaHRcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcbiAgICAgICAgLy8gY29tZSAoMSkgYmV0d2VlbiB0aGUgb2xkIGxhc3QgbGltaXQgZG9jIGFuZCB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZVxuICAgICAgICAvLyBjYXNlIG9mIHVwZGF0ZXMsIG9yICgyKSBhZnRlciB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZSBjYXNlIG9mXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbmV2ZXIgZ2V0IHVzZWQgaW4gYSByZWZpbGwgKHdoZW4gcHJldmlvdXNDaGFuZ2VzIGlzXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxuICAgICAgICBjb25zdCB1ID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmxhc3QoKSA6IG51bGwsIGMgPSBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyA9PT0gdGhpcy5xdWVyeS5saW1pdFR5cGUgJiYgcy5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gcy5maXJzdCgpIDogbnVsbDtcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXG4gICAgICAgIGlmICh0Lmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhID0gcy5nZXQodCksIGggPSBucyh0aGlzLnF1ZXJ5LCBlKSA/IGUgOiBudWxsLCBsID0gISFhICYmIHRoaXMubXV0YXRlZEtleXMuaGFzKGEua2V5KSwgZiA9ICEhaCAmJiAoaC5oYXNMb2NhbE11dGF0aW9ucyB8fCBcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxuICAgICAgICAgICAgLy8gbXV0YXRlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgdGhpcy5tdXRhdGVkS2V5cy5oYXMoaC5rZXkpICYmIGguaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcbiAgICAgICAgICAgIGxldCBkID0gITE7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiBoKSB7XG4gICAgICAgICAgICAgICAgYS5kYXRhLmlzRXF1YWwoaC5kYXRhKSA/IGwgIT09IGYgJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwKSA6IHRoaXMucmMoYSwgaCkgfHwgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwLCAodSAmJiB0aGlzLnRjKGgsIHUpID4gMCB8fCBjICYmIHRoaXMudGMoaCwgYykgPCAwKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxuICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICB9IGVsc2UgIWEgJiYgaCA/IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgfSksIGQgPSAhMCkgOiBhICYmICFoICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBhXG4gICAgICAgICAgICB9KSwgZCA9ICEwLCAodSB8fCBjKSAmJiAoXG4gICAgICAgICAgICAvLyBBIGRvYyB3YXMgcmVtb3ZlZCBmcm9tIGEgZnVsbCBsaW1pdCBxdWVyeS4gV2UnbGwgbmVlZCB0b1xuICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXG4gICAgICAgICAgICAvLyBkb2MgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHJlc3VsdHMuXG4gICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIGQgJiYgKGggPyAociA9IHIuYWRkKGgpLCBpID0gZiA/IGkuYWRkKHQpIDogaS5kZWxldGUodCkpIDogKHIgPSByLmRlbGV0ZSh0KSwgaSA9IGkuZGVsZXRlKHQpKSk7XG4gICAgICAgIH0pKSwgbnVsbCAhPT0gdGhpcy5xdWVyeS5saW1pdCkgZm9yICg7ci5zaXplID4gdGhpcy5xdWVyeS5saW1pdDsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSA/IHIubGFzdCgpIDogci5maXJzdCgpO1xuICAgICAgICAgICAgciA9IHIuZGVsZXRlKHQua2V5KSwgaSA9IGkuZGVsZXRlKHQua2V5KSwgbi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVjOiByLFxuICAgICAgICAgICAgaWM6IG4sXG4gICAgICAgICAgICB6aTogbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiBpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJjKHQsIGUpIHtcbiAgICAgICAgLy8gV2Ugc3VwcHJlc3MgdGhlIGluaXRpYWwgY2hhbmdlIGV2ZW50IGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIG1vZGlmaWVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cbiAgICAgICAgLy8gaXMgYXBwbGllZCkgYXMgV2F0Y2ggd2lsbCBzZW5kIHVzIHRoZSBzYW1lIGRvY3VtZW50IGFnYWluLlxuICAgICAgICAvLyBCeSBzdXBwcmVzc2luZyB0aGUgZXZlbnQsIHdlIG9ubHkgcmFpc2UgdHdvIHVzZXIgdmlzaWJsZSBldmVudHMgKG9uZSB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxuICAgICAgICAvLyAob25lIHdpdGggYGhhc1BlbmRpbmdXcml0ZXNgLCB0aGUgbW9kaWZpZWQgZG9jdW1lbnQgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpLlxuICAgICAgICByZXR1cm4gdC5oYXNMb2NhbE11dGF0aW9ucyAmJiBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiAhZS5oYXNMb2NhbE11dGF0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcbiAgICAgKiBsaW1ibyBkb2NzIGFuZCBzeW5jIHN0YXRlIGZyb20gdGhlIHByb3ZpZGVkIHRhcmdldCBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgc2V0IG9mIGNoYW5nZXMgdG8gbWFrZSB0byB0aGUgdmlldydzIGRvY3MuXG4gICAgICogQHBhcmFtIHVwZGF0ZUxpbWJvRG9jdW1lbnRzIC0gV2hldGhlciB0byB1cGRhdGUgbGltYm8gZG9jdW1lbnRzIGJhc2VkIG9uXG4gICAgICogICAgICAgIHRoaXMgY2hhbmdlLlxuICAgICAqIEBwYXJhbSB0YXJnZXRDaGFuZ2UgLSBBIHRhcmdldCBjaGFuZ2UgdG8gYXBwbHkgZm9yIGNvbXB1dGluZyBsaW1ibyBkb2NzIGFuZFxuICAgICAqICAgICAgICBzeW5jIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxuICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmVjO1xuICAgICAgICB0aGlzLmVjID0gdC5lYywgdGhpcy5tdXRhdGVkS2V5cyA9IHQubXV0YXRlZEtleXM7XG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXG4gICAgICAgIGNvbnN0IGkgPSB0LmljLnh1KCk7XG4gICAgICAgIGkuc29ydCgoKHQsIGUpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG4odCkgLSBuKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0LnR5cGUsIGUudHlwZSkgfHwgdGhpcy50Yyh0LmRvYywgZS5kb2MpKSksIHRoaXMub2Mobik7XG4gICAgICAgIGNvbnN0IHIgPSBlID8gdGhpcy51YygpIDogW10sIG8gPSAwID09PSB0aGlzLlp1LnNpemUgJiYgdGhpcy5jdXJyZW50ID8gMSAvKiBTeW5jU3RhdGUuU3luY2VkICovIDogMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gLCB1ID0gbyAhPT0gdGhpcy5YdTtcbiAgICAgICAgaWYgKHRoaXMuWHUgPSBvLCAwICE9PSBpLmxlbmd0aCB8fCB1KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNuYXBzaG90OiBuZXcgUmModGhpcy5xdWVyeSwgdC5lYywgcywgaSwgdC5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IG8sIHUsIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSwgISFuICYmIG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksXG4gICAgICAgICAgICAgICAgY2M6IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2M6IHJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgTXUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IHQgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBlYzogdGhpcy5lYyxcbiAgICAgICAgICAgIGljOiBuZXcgdmMsXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcbiAgICAgICAgICAgIHppOiAhMVxuICAgICAgICB9LCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKSkgOiB7XG4gICAgICAgICAgICBjYzogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBhYyh0KSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMuWXUuaGFzKHQpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuZWMuaGFzKHQpICYmICF0aGlzLmVjLmdldCh0KS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgb2ModCkge1xuICAgICAgICB0ICYmICh0LmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5ZdSA9IHRoaXMuWXUuYWRkKHQpKSksIHQubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB7fSkpLCBcbiAgICAgICAgdC5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5ZdSA9IHRoaXMuWXUuZGVsZXRlKHQpKSksIHRoaXMuY3VycmVudCA9IHQuY3VycmVudCk7XG4gICAgfVxuICAgIHVjKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5adTtcbiAgICAgICAgdGhpcy5adSA9IGdzKCksIHRoaXMuZWMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjKHQua2V5KSAmJiAodGhpcy5adSA9IHRoaXMuWnUuYWRkKHQua2V5KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gRGlmZiB0aGUgbmV3IGxpbWJvIGRvY3Mgd2l0aCB0aGUgb2xkIGxpbWJvIGRvY3MuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLlp1Lmhhcyh0KSB8fCBlLnB1c2gobmV3IEJjKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLlp1LmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5oYXMobikgfHwgZS5wdXNoKG5ldyBGYyhuKSk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldyB3aXRoIHRoZSBzdGF0ZSByZWFkIGZyb21cbiAgICAgKiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIFdlIHVwZGF0ZSB0aGUgcXVlcnkgdmlldyB3aGVuZXZlciBhIGNsaWVudCdzIHByaW1hcnkgc3RhdHVzIGNoYW5nZXM6XG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXG4gICAgICogICBMb2NhbFN0b3JhZ2UgdXBkYXRlcyBhbmQgaXRzIHF1ZXJ5IHZpZXdzIG1heSB0ZW1wb3JhcmlseSBub3QgYmVcbiAgICAgKiAgIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxuICAgICAqICAgb2YgYHN5bmNlZERvY3VtZW50c2Agc2luY2Ugc2Vjb25kYXJ5IGNsaWVudHMgdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzXG4gICAgICogICBiYXNlZCBwdXJlbHkgb24gc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIExvY2FsU3RvcmUuXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXG4gICAgICogcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBiYWNrZW5kLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFZpZXdDaGFuZ2UgdGhhdCByZXN1bHRlZCBmcm9tIHRoaXMgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgaGModCkge1xuICAgICAgICB0aGlzLll1ID0gdC5pciwgdGhpcy5adSA9IGdzKCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNjKHQuZG9jdW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGUsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIGxjKCkge1xuICAgICAgICByZXR1cm4gUmMuZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5lYywgdGhpcy5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IHRoaXMuWHUsIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXG4gKi9cbmNsYXNzIHFjIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIFVjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxuICAgICAgICAgKiBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KCkgYW5kIHVsdGltYXRlbHkgdXNlZCBieSBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgdG9cbiAgICAgICAgICogZGVjaWRlIHdoZXRoZXIgaXQgbmVlZHMgdG8gbWFudWZhY3R1cmUgYSBkZWxldGUgZXZlbnQgZm9yIHRoZSB0YXJnZXQgb25jZVxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZjID0gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBTeW5jRW5naW5lYCBjb29yZGluYXRpbmcgd2l0aCBvdGhlciBwYXJ0cyBvZiBTREsuXG4gKlxuICogVGhlIHBhcnRzIG9mIFN5bmNFbmdpbmUgdGhhdCBhY3QgYXMgYSBjYWxsYmFjayB0byBSZW1vdGVTdG9yZSBuZWVkIHRvIGJlXG4gKiByZWdpc3RlcmVkIGluZGl2aWR1YWxseS4gVGhpcyBpcyBkb25lIGluIGBzeW5jRW5naW5lV3JpdGUoKWAgYW5kXG4gKiBgc3luY0VuZ2luZUxpc3RlbigpYCAoYXMgd2VsbCBhcyBgYXBwbHlQcmltYXJ5U3RhdGUoKWApIGFzIHRoZXNlIG1ldGhvZHNcbiAqIHNlcnZlIGFzIGVudHJ5IHBvaW50cyB0byBSZW1vdGVTdG9yZSdzIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi8gY2xhc3MgS2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMucmVtb3RlU3RvcmUgPSBlLCB0aGlzLmV2ZW50TWFuYWdlciA9IG4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzLCBcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMgPSByLCB0aGlzLmRjID0ge30sIHRoaXMud2MgPSBuZXcgb3MoKHQgPT4gdHModCkpLCBabiksIFxuICAgICAgICB0aGlzLl9jID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUga2V5cyBvZiBkb2N1bWVudHMgdGhhdCBhcmUgaW4gbGltYm8gZm9yIHdoaWNoIHdlIGhhdmVuJ3QgeWV0IHN0YXJ0ZWQgYVxuICAgICAgICAgKiBsaW1ibyByZXNvbHV0aW9uIHF1ZXJ5LiBUaGUgc3RyaW5ncyBpbiB0aGlzIHNldCBhcmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgICAqIGBrZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKWAgd2hlcmUgYGtleWAgaXMgYSBgRG9jdW1lbnRLZXlgIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGBTZXRgIHR5cGUgd2FzIGNob3NlbiBiZWNhdXNlIGl0IHByb3ZpZGVzIGVmZmljaWVudCBsb29rdXAgYW5kIHJlbW92YWxcbiAgICAgICAgICogb2YgYXJiaXRyYXJ5IGVsZW1lbnRzIGFuZCBpdCBhbHNvIG1haW50YWlucyBpbnNlcnRpb24gb3JkZXIsIHByb3ZpZGluZyB0aGVcbiAgICAgICAgICogZGVzaXJlZCBxdWV1ZS1saWtlIEZJRk8gc2VtYW50aWNzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYyA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIHRhcmdldCBJRCBmb3IgZWFjaCBkb2N1bWVudCB0aGF0IGlzIGluIGxpbWJvIHdpdGggYW5cbiAgICAgICAgICogYWN0aXZlIHRhcmdldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2MgPSBuZXcgcGUoaHQuY29tcGFyYXRvciksIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGluZm9ybWF0aW9uIGFib3V0IGFuIGFjdGl2ZSBsaW1ibyByZXNvbHV0aW9uIGZvciBlYWNoXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQgSUQgdGhhdCB3YXMgc3RhcnRlZCBmb3IgdGhlIHB1cnBvc2Ugb2YgbGltYm8gcmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueWMgPSBuZXcgTWFwLCB0aGlzLkljID0gbmV3IE9vLCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cbiAgICAgICAgdGhpcy5UYyA9IHt9LCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBhbGwgcGVuZGluZyB3cml0ZXMgdG8gYmUgYWNrbm93bGVkZ2VkLiAqL1xuICAgICAgICB0aGlzLkVjID0gbmV3IE1hcCwgdGhpcy5BYyA9IGxvLk1uKCksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcbiAgICAgICAgLy8gc3RhcnR1cC4gSW4gdGhlIGludGVyaW0sIGEgY2xpZW50IHNob3VsZCBvbmx5IGJlIGNvbnNpZGVyZWQgcHJpbWFyeSBpZlxuICAgICAgICAvLyBgaXNQcmltYXJ5YCBpcyB0cnVlLlxuICAgICAgICB0aGlzLnZjID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgaXNQcmltYXJ5Q2xpZW50KCkge1xuICAgICAgICByZXR1cm4gITAgPT09IHRoaXMudmM7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgbmV3IGxpc3RlbiwgcmVzb2x2ZXMgcHJvbWlzZSB3aGVuIGxpc3RlbiBlbnF1ZXVlZCB0byB0aGVcbiAqIHNlcnZlci4gQWxsIHRoZSBzdWJzZXF1ZW50IHZpZXcgc25hcHNob3RzIG9yIGVycm9ycyBhcmUgc2VudCB0byB0aGVcbiAqIHN1YnNjcmliZWQgaGFuZGxlcnMuIFJldHVybnMgdGhlIGluaXRpYWwgc25hcHNob3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIEdjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcGEodCk7XG4gICAgbGV0IHMsIGk7XG4gICAgY29uc3QgciA9IG4ud2MuZ2V0KGUpO1xuICAgIGlmIChyKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICBzID0gci50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMpLCBpID0gci52aWV3LmxjKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgaHUobi5sb2NhbFN0b3JlLCBKbihlKSksIHIgPSBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHMgPSB0LnRhcmdldElkLCBpID0gYXdhaXQgUWMobiwgZSwgcywgXCJjdXJyZW50XCIgPT09IHIsIHQucmVzdW1lVG9rZW4pLCBuLmlzUHJpbWFyeUNsaWVudCAmJiBIdShuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdmlldyBmb3IgYSBwcmV2aW91c2x5IHVua25vd24gcXVlcnkgYW5kIGNvbXB1dGVzIGl0cyBpbml0aWFsXG4gKiBzbmFwc2hvdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBRYyh0LCBlLCBuLCBzLCBpKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICB0LlJjID0gKGUsIG4sIHMpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBlLnZpZXcuc2Mobik7XG4gICAgICAgIGkuemkgJiYgKFxuICAgICAgICAvLyBUaGUgcXVlcnkgaGFzIGEgbGltaXQgYW5kIHNvbWUgZG9jcyB3ZXJlIHJlbW92ZWQsIHNvIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmUtcnVuIHRoZSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSB0byBtYWtlIHN1cmUgd2VcbiAgICAgICAgLy8gZGlkbid0IGxvc2UgYW55IGdvb2QgZG9jcyB0aGF0IGhhZCBiZWVuIHBhc3QgdGhlIGxpbWl0LlxuICAgICAgICBpID0gYXdhaXQgZnUodC5sb2NhbFN0b3JlLCBlLnF1ZXJ5LCBcbiAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMSkudGhlbigoKHtkb2N1bWVudHM6IHR9KSA9PiBlLnZpZXcuc2ModCwgaSkpKSk7XG4gICAgICAgIGNvbnN0IHIgPSBzICYmIHMudGFyZ2V0Q2hhbmdlcy5nZXQoZS50YXJnZXRJZCksIG8gPSBlLnZpZXcuYXBwbHlDaGFuZ2VzKGksIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIHIpO1xuICAgICAgICByZXR1cm4gaWEodCwgZS50YXJnZXRJZCwgby5jYyksIG8uc25hcHNob3Q7XG4gICAgfSh0LCBlLCBuLCBzKTtcbiAgICBjb25zdCByID0gYXdhaXQgZnUodC5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgbyA9IG5ldyBMYyhlLCByLmlyKSwgdSA9IG8uc2Moci5kb2N1bWVudHMpLCBjID0gZ2kuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHMgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gdC5vbmxpbmVTdGF0ZSwgaSksIGEgPSBvLmFwcGx5Q2hhbmdlcyh1LCBcbiAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIGMpO1xuICAgIGlhKHQsIG4sIGEuY2MpO1xuICAgIGNvbnN0IGggPSBuZXcgcWMoZSwgbiwgbyk7XG4gICAgcmV0dXJuIHQud2Muc2V0KGUsIGgpLCB0Ll9jLmhhcyhuKSA/IHQuX2MuZ2V0KG4pLnB1c2goZSkgOiB0Ll9jLnNldChuLCBbIGUgXSksIGEuc25hcHNob3Q7XG59XG5cbi8qKiBTdG9wcyBsaXN0ZW5pbmcgdG8gdGhlIHF1ZXJ5LiAqLyBhc3luYyBmdW5jdGlvbiBqYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBuLndjLmdldChlKSwgaSA9IG4uX2MuZ2V0KHMudGFyZ2V0SWQpO1xuICAgIGlmIChpLmxlbmd0aCA+IDEpIHJldHVybiBuLl9jLnNldChzLnRhcmdldElkLCBpLmZpbHRlcigodCA9PiAhWm4odCwgZSkpKSksIHZvaWQgbi53Yy5kZWxldGUoZSk7XG4gICAgLy8gTm8gb3RoZXIgcXVlcmllcyBhcmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQsIGNsZWFuIHVwIHRoZSBxdWVyeSBhbmQgdGhlIHRhcmdldC5cbiAgICAgICAgaWYgKG4uaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBsb2NhbCBxdWVyeSB0YXJnZXQgZmlyc3QgdG8gYWxsb3cgdXMgdG8gdmVyaWZ5XG4gICAgICAgIC8vIHdoZXRoZXIgYW55IG90aGVyIGNsaWVudCBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0LlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQocy50YXJnZXRJZCk7XG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNBY3RpdmVRdWVyeVRhcmdldChzLnRhcmdldElkKSB8fCBhd2FpdCBsdShuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShzLnRhcmdldElkKSwgSnUobi5yZW1vdGVTdG9yZSwgcy50YXJnZXRJZCksIFxuICAgICAgICAgICAgbmEobiwgcy50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaCh2dCk7XG4gICAgfSBlbHNlIG5hKG4sIHMudGFyZ2V0SWQpLCBhd2FpdCBsdShuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiB6Yyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IElhKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gTCh0KSwgcyA9IGl0Lm5vdygpLCBpID0gZS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBncygpKTtcbiAgICAgICAgICAgIGxldCByLCBvO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmlndXJlIG91dCB3aGljaCBrZXlzIGRvIG5vdCBoYXZlIGEgcmVtb3RlIHZlcnNpb24gaW4gdGhlIGNhY2hlLCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gaXMgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgcmlnaHQgb3ZlcmxheSBtdXRhdGlvbjogaWYgbm8gcmVtb3RlIHZlcnNpb25cbiAgICAgICAgICAgICAgICAvLyBwcmVzZW50cywgd2UgZG8gbm90IG5lZWQgdG8gY3JlYXRlIG92ZXJsYXlzIGFzIHBhdGNoIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPKE92ZXJsYXkpOiBJcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZGV0ZXJtaW5lIHRoaXM/IFVzaW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vICBkb2N1bWVudCB2ZXJzaW9uIGRvZXMgbm90IHdvcmsgYmVjYXVzZSBsb2NhbCBtdXRhdGlvbnMgc2V0IHRoZW0gYmFja1xuICAgICAgICAgICAgICAgIC8vICB0byAwLlxuICAgICAgICAgICAgICAgIGxldCB1ID0gY3MoKSwgYyA9IGdzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uWmkuZ2V0RW50cmllcyh0LCBpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdSA9IHQsIHUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuaXNWYWxpZERvY3VtZW50KCkgfHwgKGMgPSBjLmFkZCh0KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRPdmVybGF5ZWREb2N1bWVudHModCwgdSkpKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgciA9IGk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBHcyh0LCByLmdldCh0LmtleSkub3ZlcmxheWVkRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBlICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhlIGJhc2Ugc3RhdGUgc2hvdWxkIG9ubHkgYmUgYXBwbGllZCBpZiB0aGVyZSdzIHNvbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGRvY3VtZW50IHRvIG92ZXJyaWRlLCBzbyB1c2UgYSBQcmVjb25kaXRpb24gb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0cz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IHpzKHQua2V5LCBlLCBjbihlLnZhbHVlLm1hcFZhbHVlKSwgRnMuZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUuYWRkTXV0YXRpb25CYXRjaCh0LCBzLCBvLCBlKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG8gPSBlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gZS5hcHBseVRvTG9jYWxEb2N1bWVudFNldChyLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKHQsIGUuYmF0Y2hJZCwgcyk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLnRoZW4oKCgpID0+ICh7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogby5iYXRjaElkLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IGxzKHIpXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKHQuYmF0Y2hJZCksIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGxldCBzID0gdC5UY1t0LmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgcyB8fCAocyA9IG5ldyBwZShldCkpO1xuICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGUsIG4pLCB0LlRjW3QuY3VycmVudFVzZXIudG9LZXkoKV0gPSBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAocywgdC5iYXRjaElkLCBuKSwgYXdhaXQgdWEocywgdC5jaGFuZ2VzKSwgYXdhaXQgY2Mocy5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCBlID0gRWModCwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIFdjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdXUobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi55Yy5nZXQoZSk7XG4gICAgICAgICAgICBzICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIEYodC5hZGRlZERvY3VtZW50cy5zaXplICsgdC5tb2RpZmllZERvY3VtZW50cy5zaXplICsgdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSksIFxuICAgICAgICAgICAgdC5hZGRlZERvY3VtZW50cy5zaXplID4gMCA/IHMuZmMgPSAhMCA6IHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBGKHMuZmMpIDogdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwICYmIChGKHMuZmMpLCBcbiAgICAgICAgICAgIHMuZmMgPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IHVhKG4sIHQsIGUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgdnQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIEhjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChzLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovID09PSBuIHx8ICFzLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcy53Yy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHMudmlldy5NdShlKTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgdC5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4ubGlzdGVuZXJzKSBcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0Lk11KGUpICYmIChzID0gITApO1xuICAgICAgICAgICAgfSkpLCBzICYmIHhjKG4pO1xuICAgICAgICB9KHMuZXZlbnRNYW5hZ2VyLCBlKSwgdC5sZW5ndGggJiYgcy5kYy5udSh0KSwgcy5vbmxpbmVTdGF0ZSA9IGUsIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUuc2V0T25saW5lU3RhdGUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlamVjdHMgdGhlIGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldElELiBUaGlzIGNhbiBiZSB0cmlnZ2VyZWQgYnkgdGhlXG4gKiBiYWNrZW5kIGZvciBhbnkgYWN0aXZlIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXRJRCBjb3JyZXNwb25kcyB0byBvbmUgcHJldmlvdXNseSBpbml0aWF0ZWQgYnkgdGhlXG4gKiB1c2VyIGFzIHBhcnQgb2YgVGFyZ2V0RGF0YSBwYXNzZWQgdG8gbGlzdGVuKCkgb24gUmVtb3RlU3RvcmUuXG4gKiBAcGFyYW0gZXJyIC0gQSBkZXNjcmlwdGlvbiBvZiB0aGUgY29uZGl0aW9uIHRoYXQgaGFzIGZvcmNlZCB0aGUgcmVqZWN0aW9uLlxuICogTmVhcmx5IGFsd2F5cyB0aGlzIHdpbGwgYmUgYW4gaW5kaWNhdGlvbiB0aGF0IHRoZSB1c2VyIGlzIG5vIGxvbmdlclxuICogYXV0aG9yaXplZCB0byBzZWUgdGhlIGRhdGEgbWF0Y2hpbmcgdGhlIHRhcmdldC5cbiAqLyBhc3luYyBmdW5jdGlvbiBKYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCk7XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbik7XG4gICAgY29uc3QgaSA9IHMueWMuZ2V0KGUpLCByID0gaSAmJiBpLmtleTtcbiAgICBpZiAocikge1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogV2UgcmVhbGx5IG9ubHkgc2hvdWxkIGRvIHRoZSBmb2xsb3dpbmcgb24gcGVybWlzc2lvblxuICAgICAgICAvLyBkZW5pZWQgZXJyb3JzLCBidXQgd2UgZG9uJ3QgaGF2ZSB0aGUgY2F1c2UgY29kZSBoZXJlLlxuICAgICAgICAvLyBJdCdzIGEgbGltYm8gZG9jLiBDcmVhdGUgYSBzeW50aGV0aWMgZXZlbnQgc2F5aW5nIGl0IHdhcyBkZWxldGVkLlxuICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYSBoYWNrLiBJZGVhbGx5LCB3ZSB3b3VsZCBoYXZlIGEgbWV0aG9kIGluIHRoZSBsb2NhbFxuICAgICAgICAvLyBzdG9yZSB0byBwdXJnZSBhIGRvY3VtZW50LiBIb3dldmVyLCBpdCB3b3VsZCBiZSB0cmlja3kgdG8ga2VlcCBhbGwgb2ZcbiAgICAgICAgLy8gdGhlIGxvY2FsIHN0b3JlJ3MgaW52YXJpYW50cyB3aXRoIGFub3RoZXIgbWV0aG9kLlxuICAgICAgICBsZXQgdCA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcbiAgICAgICAgLy8gVE9ETyhiLzIxNzE4OTIxNik6IFRoaXMgbGltYm8gZG9jdW1lbnQgc2hvdWxkIGlkZWFsbHkgaGF2ZSBhIHJlYWQgdGltZSxcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBwaWNrZWQgdXAgYnkgYW55IHJlYWQtdGltZSBiYXNlZCBzY2Fucy4gVGhlIGJhY2tlbmQsXG4gICAgICAgIC8vIGhvd2V2ZXIsIGRvZXMgbm90IHNlbmQgYSByZWFkIHRpbWUgZm9yIHRhcmdldCByZW1vdmFscy5cbiAgICAgICAgICAgICAgICB0ID0gdC5pbnNlcnQociwgYW4ubmV3Tm9Eb2N1bWVudChyLCBydC5taW4oKSkpO1xuICAgICAgICBjb25zdCBuID0gZ3MoKS5hZGQociksIGkgPSBuZXcgbWkocnQubWluKCksIFxuICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyBuZXcgTWFwLCBcbiAgICAgICAgLyogdGFyZ2V0TWlzbWF0Y2hlcz0gKi8gbmV3IHBlKGV0KSwgdCwgbik7XG4gICAgICAgIGF3YWl0IFdjKHMsIGkpLCBcbiAgICAgICAgLy8gU2luY2UgdGhpcyBxdWVyeSBmYWlsZWQsIHdlIHdvbid0IHdhbnQgdG8gbWFudWFsbHkgdW5saXN0ZW4gdG8gaXQuXG4gICAgICAgIC8vIFdlIG9ubHkgcmVtb3ZlIGl0IGZyb20gYm9va2tlZXBpbmcgYWZ0ZXIgd2Ugc3VjY2Vzc2Z1bGx5IGFwcGxpZWQgdGhlXG4gICAgICAgIC8vIFJlbW90ZUV2ZW50LiBJZiBgYXBwbHlSZW1vdGVFdmVudCgpYCB0aHJvd3MsIHdlIHdhbnQgdG8gcmUtbGlzdGVuIHRvXG4gICAgICAgIC8vIHRoaXMgcXVlcnkgd2hlbiB0aGUgUmVtb3RlU3RvcmUgcmVzdGFydHMgdGhlIFdhdGNoIHN0cmVhbSwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIHJlLXRyaWdnZXIgdGhlIHRhcmdldCBmYWlsdXJlLlxuICAgICAgICBzLmdjID0gcy5nYy5yZW1vdmUociksIHMueWMuZGVsZXRlKGUpLCBvYShzKTtcbiAgICB9IGVsc2UgYXdhaXQgbHUocy5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4gbmEocywgZSwgbikpKS5jYXRjaCh2dCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFljKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IGUuYmF0Y2guYmF0Y2hJZDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgcnUobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHRcbiAgICAgICAgLy8gdXApLCBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlblxuICAgICAgICAvLyBiZWZvcmUgbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBlYShuLCBzLCAvKmVycm9yPSovIG51bGwpLCB0YShuLCBzKSwgbi5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKHMsIFwiYWNrbm93bGVkZ2VkXCIpLCBcbiAgICAgICAgYXdhaXQgdWEobiwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCB2dCh0KTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFhjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlamVjdCBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5tdXRhdGlvblF1ZXVlLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgoZSA9PiAoRihudWxsICE9PSBlKSwgcyA9IGUua2V5cygpLCBcbiAgICAgICAgICAgICAgICBuLm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSkpKS5uZXh0KCgoKSA9PiBuLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkpKS5uZXh0KCgoKSA9PiBuLmRvY3VtZW50T3ZlcmxheUNhY2hlLnJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCh0LCBzLCBlKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXModCwgcykpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0LCBzKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmdcbiAqIHNlcnZlciByZXNwb25zZS5cbiAqXG4gKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAqLyAocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxuICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcbiAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBlYShzLCBlLCBuKSwgdGEocywgZSksIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pLCBcbiAgICAgICAgYXdhaXQgdWEocywgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCB2dChuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gWmModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIGVjKG4ucmVtb3RlU3RvcmUpIHx8IE4oXCJTeW5jRW5naW5lXCIsIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUubXV0YXRpb25RdWV1ZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpKSk7XG4gICAgICAgIH0obi5sb2NhbFN0b3JlKTtcbiAgICAgICAgaWYgKC0xID09PSB0KSBcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheSBpZiB0aGVyZSBpcyBubyBwZW5kaW5nIHdyaXRlcyBhdCB0aGUgbW9tZW50LlxuICAgICAgICByZXR1cm4gdm9pZCBlLnJlc29sdmUoKTtcbiAgICAgICAgY29uc3QgcyA9IG4uRWMuZ2V0KHQpIHx8IFtdO1xuICAgICAgICBzLnB1c2goZSksIG4uRWMuc2V0KHQsIHMpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgY29uc3QgbiA9IEVjKHQsIFwiSW5pdGlhbGl6YXRpb24gb2Ygd2FpdEZvclBlbmRpbmdXcml0ZXMoKSBvcGVyYXRpb24gZmFpbGVkXCIpO1xuICAgICAgICBlLnJlamVjdChuKTtcbiAgICB9XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGNhbGxiYWNrcyB0aGF0IGFyZSB3YWl0aW5nIGZvciB0aGlzIGJhdGNoIGlkIHRvIGdldCBhY2tub3dsZWRnZWQgYnkgc2VydmVyLFxuICogaWYgdGhlcmUgYXJlIGFueS5cbiAqLyBmdW5jdGlvbiB0YSh0LCBlKSB7XG4gICAgKHQuRWMuZ2V0KGUpIHx8IFtdKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5yZXNvbHZlKCk7XG4gICAgfSkpLCB0LkVjLmRlbGV0ZShlKTtcbn1cblxuLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBlYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCk7XG4gICAgbGV0IGkgPSBzLlRjW3MuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcbiAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgY29uc3QgdCA9IGkuZ2V0KGUpO1xuICAgICAgICB0ICYmIChuID8gdC5yZWplY3QobikgOiB0LnJlc29sdmUoKSwgaSA9IGkucmVtb3ZlKGUpKSwgcy5UY1tzLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gaTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5hKHQsIGUsIG4gPSBudWxsKSB7XG4gICAgdC5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGUpO1xuICAgIGZvciAoY29uc3QgcyBvZiB0Ll9jLmdldChlKSkgdC53Yy5kZWxldGUocyksIG4gJiYgdC5kYy5QYyhzLCBuKTtcbiAgICBpZiAodC5fYy5kZWxldGUoZSksIHQuaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIHQuSWMuSXMoZSkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LkljLmNvbnRhaW5zS2V5KGUpIHx8IFxuICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgICAgICBzYSh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2EodCwgZSkge1xuICAgIHQubWMuZGVsZXRlKGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoZSB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCBiZWNhdXNlIHRoZSBxdWVyeSBmYWlsZWQuIEluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGUga2V5IHdvbid0IGV4aXN0IGluIGBsaW1ib1RhcmdldHNCeUtleWAuIE9ubHkgZG8gdGhlIGNsZWFudXAgaWYgd2Ugc3RpbGwgaGF2ZSB0aGUgdGFyZ2V0LlxuICAgIGNvbnN0IG4gPSB0LmdjLmdldChlKTtcbiAgICBudWxsICE9PSBuICYmIChKdSh0LnJlbW90ZVN0b3JlLCBuKSwgdC5nYyA9IHQuZ2MucmVtb3ZlKGUpLCB0LnljLmRlbGV0ZShuKSwgb2EodCkpO1xufVxuXG5mdW5jdGlvbiBpYSh0LCBlLCBuKSB7XG4gICAgZm9yIChjb25zdCBzIG9mIG4pIGlmIChzIGluc3RhbmNlb2YgRmMpIHQuSWMuYWRkUmVmZXJlbmNlKHMua2V5LCBlKSwgcmEodCwgcyk7IGVsc2UgaWYgKHMgaW5zdGFuY2VvZiBCYykge1xuICAgICAgICBOKFwiU3luY0VuZ2luZVwiLCBcIkRvY3VtZW50IG5vIGxvbmdlciBpbiBsaW1ibzogXCIgKyBzLmtleSksIHQuSWMucmVtb3ZlUmVmZXJlbmNlKHMua2V5LCBlKTtcbiAgICAgICAgdC5JYy5jb250YWluc0tleShzLmtleSkgfHwgXG4gICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICBzYSh0LCBzLmtleSk7XG4gICAgfSBlbHNlIE8oKTtcbn1cblxuZnVuY3Rpb24gcmEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmtleSwgcyA9IG4ucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB0LmdjLmdldChuKSB8fCB0Lm1jLmhhcyhzKSB8fCAoTihcIlN5bmNFbmdpbmVcIiwgXCJOZXcgZG9jdW1lbnQgaW4gbGltYm86IFwiICsgbiksIHQubWMuYWRkKHMpLCBcbiAgICBvYSh0KSk7XG59XG5cbi8qKlxuICogU3RhcnRzIGxpc3RlbnMgZm9yIGRvY3VtZW50cyBpbiBsaW1ibyB0aGF0IGFyZSBlbnF1ZXVlZCBmb3IgcmVzb2x1dGlvbixcbiAqIHN1YmplY3QgdG8gYSBtYXhpbXVtIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLlxuICpcbiAqIFdpdGhvdXQgYm91bmRpbmcgdGhlIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLCB0aGUgc2VydmVyIGNhbiBmYWlsXG4gKiB3aXRoIFwicmVzb3VyY2UgZXhoYXVzdGVkXCIgZXJyb3JzIHdoaWNoIGNhbiBsZWFkIHRvIHBhdGhvbG9naWNhbCBjbGllbnRcbiAqIGJlaGF2aW9yIGFzIHNlZW4gaW4gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvMjY4My5cbiAqLyBmdW5jdGlvbiBvYSh0KSB7XG4gICAgZm9yICg7dC5tYy5zaXplID4gMCAmJiB0LmdjLnNpemUgPCB0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOyApIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICB0Lm1jLmRlbGV0ZShlKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBodCh1dC5mcm9tU3RyaW5nKGUpKSwgcyA9IHQuQWMubmV4dCgpO1xuICAgICAgICB0LnljLnNldChzLCBuZXcgVWMobikpLCB0LmdjID0gdC5nYy5pbnNlcnQobiwgcyksIEh1KHQucmVtb3RlU3RvcmUsIG5ldyBjcihKbihHbihuLnBhdGgpKSwgcywgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gLCBPdC5jdCkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gdWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpLCBpID0gW10sIHIgPSBbXSwgbyA9IFtdO1xuICAgIHMud2MuaXNFbXB0eSgpIHx8IChzLndjLmZvckVhY2goKCh0LCB1KSA9PiB7XG4gICAgICAgIG8ucHVzaChzLlJjKHUsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHZpZXdzIGlmIHRoZXJlIGFyZSBhY3R1YWwgY2hhbmdlcy5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBjaGFuZ2VzLCBvciB3ZSBhcmUgaGFuZGxpbmcgYSBnbG9iYWwgc25hcHNob3QsIG5vdGlmeVxuICAgICAgICAgICAgLy8gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHF1ZXJ5IHN0YXRlLlxuICAgICAgICAgICAgKHQgfHwgbikgJiYgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKHUudGFyZ2V0SWQsIChudWxsID09IHQgPyB2b2lkIDAgOiB0LmZyb21DYWNoZSkgPyBcIm5vdC1jdXJyZW50XCIgOiBcImN1cnJlbnRcIiksIFxuICAgICAgICAgICAgdCkge1xuICAgICAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdHUuTGkodS50YXJnZXRJZCwgdCk7XG4gICAgICAgICAgICAgICAgci5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpO1xuICAgIH0pKSwgYXdhaXQgUHJvbWlzZS5hbGwobyksIHMuZGMubnUoaSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBSdC5mb3JFYWNoKGUsIChlID0+IFJ0LmZvckVhY2goZS5GaSwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKS5uZXh0KCgoKSA9PiBSdC5mb3JFYWNoKGUuQmksIChzID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIGUudGFyZ2V0SWQsIHMpKSkpKSkpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghRHQodCkpIHRocm93IHQ7XG4gICAgICAgICAgICAvLyBJZiBgbm90aWZ5TG9jYWxWaWV3Q2hhbmdlc2AgZmFpbHMsIHdlIGRpZCBub3QgYWR2YW5jZSB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIG51bWJlciBmb3IgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdHJpZ2dlciB0aGVtIHRvIGJlIGRlbGV0ZWQgZWFybGllciB0aGFuIHRoZXkgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlLCBidXQgaXQgc2hvdWxkIG5vdCBpbnZhbGlkYXRlIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIGRhdGEuXG4gICAgICAgICAgICBOKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uSmkuZ2V0KGUpLCBzID0gdC5zbmFwc2hvdFZlcnNpb24sIGkgPSB0LndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHMpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uSmkgPSBuLkppLmluc2VydChlLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0ocy5sb2NhbFN0b3JlLCByKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBpZiAoIW4uY3VycmVudFVzZXIuaXNFcXVhbChlKSkge1xuICAgICAgICBOKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgZS50b0tleSgpKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGl1KG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIG4uY3VycmVudFVzZXIgPSBlLCBcbiAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHQuRWMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdC5yZWplY3QobmV3IFUocS5DQU5DRUxMRUQsIGUpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIHQuRWMuY2xlYXIoKTtcbiAgICAgICAgfShuLCBcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIiksIFxuICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UoZSwgdC5yZW1vdmVkQmF0Y2hJZHMsIHQuYWRkZWRCYXRjaElkcyksIGF3YWl0IHVhKG4sIHQuZXIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gbi55Yy5nZXQoZSk7XG4gICAgaWYgKHMgJiYgcy5mYykgcmV0dXJuIGdzKCkuYWRkKHMua2V5KTtcbiAgICB7XG4gICAgICAgIGxldCB0ID0gZ3MoKTtcbiAgICAgICAgY29uc3QgcyA9IG4uX2MuZ2V0KGUpO1xuICAgICAgICBpZiAoIXMpIHJldHVybiB0O1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcykge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4ud2MuZ2V0KGUpO1xuICAgICAgICAgICAgdCA9IHQudW5pb25XaXRoKHMudmlldy5uYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY29uY2lsZSB0aGUgbGlzdCBvZiBzeW5jZWQgZG9jdW1lbnRzIGluIGFuIGV4aXN0aW5nIHZpZXcgd2l0aCB0aG9zZVxuICogZnJvbSBwZXJzaXN0ZW5jZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBoYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBhd2FpdCBmdShuLmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gZS52aWV3LmhjKHMpO1xuICAgIHJldHVybiBuLmlzUHJpbWFyeUNsaWVudCAmJiBpYShuLCBlLnRhcmdldElkLCBpLmNjKSwgaTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgbmV3bHkgY2hhbmdlZCBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgYW5kIHJhaXNlc1xuICogc25hcHNob3RzIGlmIG5lZWRlZC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGxhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gd3Uobi5sb2NhbFN0b3JlLCBlKS50aGVuKCh0ID0+IHVhKG4sIHQpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGZhKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gTCh0KSwgciA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEwodCksIHMgPSBMKG4ubXV0YXRpb25RdWV1ZSk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9va3VwIG11dGF0aW9uIGRvY3VtZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuU24odCwgZSkubmV4dCgoZSA9PiBlID8gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModCwgZSkgOiBSdC5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKTtcbiAgICBudWxsICE9PSByID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgY2MoaS5yZW1vdGVTdG9yZSkgOiBcImFja25vd2xlZGdlZFwiID09PSBuIHx8IFwicmVqZWN0ZWRcIiA9PT0gbiA/IChcbiAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxuICAgIC8vIG90aGVyIGNsaWVudHMuXG4gICAgZWEoaSwgZSwgcyB8fCBudWxsKSwgdGEoaSwgZSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgTChMKHQpLm11dGF0aW9uUXVldWUpLkNuKGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpKSA6IE8oKSwgYXdhaXQgdWEoaSwgcikpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgTihcIlN5bmNFbmdpbmVcIiwgXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIgKyBlKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGRhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBpZiAocGEobiksIElhKG4pLCAhMCA9PT0gZSAmJiAhMCAhPT0gbi52Yykge1xuICAgICAgICAvLyBTZWNvbmRhcnkgdGFicyBvbmx5IG1haW50YWluIFZpZXdzIGZvciB0aGVpciBsb2NhbCBsaXN0ZW5lcnMgYW5kIHRoZVxuICAgICAgICAvLyBWaWV3cyBpbnRlcm5hbCBzdGF0ZSBtYXkgbm90IGJlIDEwMCUgcG9wdWxhdGVkIChpbiBwYXJ0aWN1bGFyXG4gICAgICAgIC8vIHNlY29uZGFyeSB0YWJzIGRvbid0IHRyYWNrIHN5bmNlZERvY3VtZW50cywgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhlXG4gICAgICAgIC8vIHNlcnZlciBjb25zaWRlcnMgdG8gYmUgaW4gdGhlIHRhcmdldCkuIFNvIHdoZW4gYSBzZWNvbmRhcnkgYmVjb21lc1xuICAgICAgICAvLyBwcmltYXJ5LCB3ZSBuZWVkIHRvIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHZpZXdzIGZvciBhbGwgdGFyZ2V0c1xuICAgICAgICAvLyBtYXRjaCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgICAgY29uc3QgdCA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCksIGUgPSBhd2FpdCB3YShuLCB0LnRvQXJyYXkoKSk7XG4gICAgICAgIG4udmMgPSAhMCwgYXdhaXQgeWMobi5yZW1vdGVTdG9yZSwgITApO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgSHUobi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gZSAmJiAhMSAhPT0gbi52Yykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4uX2MuZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gdC5wdXNoKGkpIDogZSA9IGUudGhlbigoKCkgPT4gKG5hKG4sIGkpLCBcbiAgICAgICAgICAgIGx1KG4ubG9jYWxTdG9yZSwgaSwgXG4gICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKSkpKSwgSnUobi5yZW1vdGVTdG9yZSwgaSk7XG4gICAgICAgIH0pKSwgYXdhaXQgZSwgYXdhaXQgd2EobiwgdCksIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gTCh0KTtcbiAgICAgICAgICAgIGUueWMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBKdShlLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgICAgIH0pKSwgZS5JYy5UcygpLCBlLnljID0gbmV3IE1hcCwgZS5nYyA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4udmMgPSAhMSwgYXdhaXQgeWMobi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gd2EodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpLCBpID0gW10sIHIgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgY29uc3QgbiA9IHMuX2MuZ2V0KHQpO1xuICAgICAgICBpZiAobiAmJiAwICE9PSBuLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgZmV0Y2ggdGhlaXIgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgLy8gZnJvbSBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxuICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxuICAgICAgICAgICAgZSA9IGF3YWl0IGh1KHMubG9jYWxTdG9yZSwgSm4oblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy53Yy5nZXQodCksIG4gPSBhd2FpdCBoYShzLCBlKTtcbiAgICAgICAgICAgICAgICBuLnNuYXBzaG90ICYmIHIucHVzaChuLnNuYXBzaG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgbmV2ZXIgZXhlY3V0ZWQgb24gdGhpcyBjbGllbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSB0YXJnZXQgaW4gTG9jYWxTdG9yZSBhbmQgaW5pdGlhbGl6ZSBhIG5ldyBWaWV3LlxuICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IGR1KHMubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgICAgICBlID0gYXdhaXQgaHUocy5sb2NhbFN0b3JlLCBuKSwgYXdhaXQgUWMocywgX2EobiksIHQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCBlLnJlc3VtZVRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2goZSk7XG4gICAgfVxuICAgIHJldHVybiBzLmRjLm51KHIpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9hKHQpIHtcbiAgICByZXR1cm4gS24odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5vcmRlckJ5LCB0LmZpbHRlcnMsIHQubGltaXQsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBtYSh0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgcmV0dXJuIEwoTChlLmxvY2FsU3RvcmUpLnBlcnNpc3RlbmNlKS4kaSgpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gZ2EodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBMKHQpO1xuICAgIGlmIChpLnZjKSBcbiAgICAvLyBJZiB3ZSByZWNlaXZlIGEgdGFyZ2V0IHN0YXRlIG5vdGlmaWNhdGlvbiB2aWEgV2ViU3RvcmFnZSwgd2UgYXJlXG4gICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICByZXR1cm4gdm9pZCBOKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTtcbiAgICBjb25zdCByID0gaS5fYy5nZXQoZSk7XG4gICAgaWYgKHIgJiYgci5sZW5ndGggPiAwKSBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgXCJjdXJyZW50XCI6XG4gICAgICBjYXNlIFwibm90LWN1cnJlbnRcIjpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IHd1KGkubG9jYWxTdG9yZSwgc3MoclswXSkpLCBzID0gbWkuY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UoZSwgXCJjdXJyZW50XCIgPT09IG4sIFZlLkVNUFRZX0JZVEVfU1RSSU5HKTtcbiAgICAgICAgICAgIGF3YWl0IHVhKGksIHQsIHMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgIGF3YWl0IGx1KGkubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICEwKSwgbmEoaSwgZSwgcyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBPKCk7XG4gICAgfVxufVxuXG4vKiogQWRkcyBvciByZW1vdmVzIFdhdGNoIHRhcmdldHMgZm9yIHF1ZXJpZXMgZnJvbSBkaWZmZXJlbnQgdGFicy4gKi8gYXN5bmMgZnVuY3Rpb24geWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBwYSh0KTtcbiAgICBpZiAocy52Yykge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHMuX2MuaGFzKHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIE4oXCJTeW5jRW5naW5lXCIsIFwiQWRkaW5nIGFuIGFscmVhZHkgYWN0aXZlIHRhcmdldCBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IGR1KHMubG9jYWxTdG9yZSwgdCksIG4gPSBhd2FpdCBodShzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAgICAgYXdhaXQgUWMocywgX2EoZSksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCBuLnJlc3VtZVRva2VuKSwgSHUocy5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIFxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlIHNpbmNlIHRoZSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuXG4gICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXG4gICAgICAgIHMuX2MuaGFzKHQpICYmIFxuICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxuICAgICAgICBhd2FpdCBsdShzLmxvY2FsU3RvcmUsIHQsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgSnUocy5yZW1vdGVTdG9yZSwgdCksIG5hKHMsIHQpO1xuICAgICAgICB9KSkuY2F0Y2godnQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcGEodCkge1xuICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgIHJldHVybiBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50ID0gV2MuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IGFhLmJpbmQobnVsbCwgZSksIFxuICAgIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbiA9IEpjLmJpbmQobnVsbCwgZSksIGUuZGMubnUgPSBEYy5iaW5kKG51bGwsIGUuZXZlbnRNYW5hZ2VyKSwgXG4gICAgZS5kYy5QYyA9IENjLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBlO1xufVxuXG5mdW5jdGlvbiBJYSh0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlID0gWWMuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUgPSBYYy5iaW5kKG51bGwsIGUpLCBcbiAgICBlO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBUYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAoXG4gICAgLyoqIExvYWRzIGEgYnVuZGxlIGFuZCByZXR1cm5zIHRoZSBsaXN0IG9mIGFmZmVjdGVkIGNvbGxlY3Rpb24gZ3JvdXBzLiAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBlLmdldE1ldGFkYXRhKCk7XG4gICAgICAgICAgICBpZiAoYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gTmkoZS5jcmVhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcImhhc05ld2VyQnVuZGxlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5xcy5nZXRCdW5kbGVNZXRhZGF0YSh0LCBlLmlkKSkpLnRoZW4oKHQgPT4gISF0ICYmIHQuY3JlYXRlVGltZS5jb21wYXJlVG8ocykgPj0gMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYEJ1bmRsZU1ldGFkYXRhYCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSkgcmV0dXJuIGF3YWl0IGUuY2xvc2UoKSwgbi5fY29tcGxldGVXaXRoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdGU6IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiB0LnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfShzKSksIFByb21pc2UucmVzb2x2ZShuZXcgU2V0KTtcbiAgICAgICAgICAgIG4uX3VwZGF0ZVByb2dyZXNzKE9jKHMpKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgJGMocywgdC5sb2NhbFN0b3JlLCBlLnNlcmlhbGl6ZXIpO1xuICAgICAgICAgICAgbGV0IHIgPSBhd2FpdCBlLmJjKCk7XG4gICAgICAgICAgICBmb3IgKDtyOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgaS56dShyKTtcbiAgICAgICAgICAgICAgICB0ICYmIG4uX3VwZGF0ZVByb2dyZXNzKHQpLCByID0gYXdhaXQgZS5iYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbyA9IGF3YWl0IGkuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB1YSh0LCBvLkp1LCBcbiAgICAgICAgICAgIC8qIHJlbW90ZUV2ZW50ICovIHZvaWQgMCksIFxuICAgICAgICAgICAgLy8gU2F2ZSBtZXRhZGF0YSwgc28gbG9hZGluZyB0aGUgc2FtZSBidW5kbGUgd2lsbCBza2lwLlxuICAgICAgICAgICAgYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBidW5kbGVcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbi5xcy5zYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBgTmFtZWRRdWVyeWAgYXNzb2NpYXRlZCB3aXRoIGdpdmVuIHF1ZXJ5IG5hbWUuIFByb21pc2VcbiAqIHJlc29sdmVzIHRvIHVuZGVmaW5lZCBpZiBubyBwZXJzaXN0ZWQgZGF0YSBjYW4gYmUgZm91bmQuXG4gKi8gKHQubG9jYWxTdG9yZSwgcyksIG4uX2NvbXBsZXRlV2l0aChvLnByb2dyZXNzKSwgUHJvbWlzZS5yZXNvbHZlKG8uSHUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gTShcIlN5bmNFbmdpbmVcIiwgYExvYWRpbmcgYnVuZGxlIGZhaWxlZCB3aXRoICR7dH1gKSwgbi5fZmFpbFdpdGgodCksIFByb21pc2UucmVzb2x2ZShuZXcgU2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gKiBVc2VzIEVhZ2VyR0MgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovKShzLCBlLCBuKS50aGVuKCh0ID0+IHtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQodCk7XG4gICAgfSkpO1xufVxuXG5jbGFzcyBFYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBGdSh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHRoaXMuY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUodCksIFxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdGhpcy5jcmVhdGVQZXJzaXN0ZW5jZSh0KSwgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zdGFydCgpLCB0aGlzLmxvY2FsU3RvcmUgPSB0aGlzLmNyZWF0ZUxvY2FsU3RvcmUodCksIFxuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyID0gdGhpcy5jcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlcih0LCB0aGlzLmxvY2FsU3RvcmUpLCB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciA9IHRoaXMuY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKHQsIHRoaXMubG9jYWxTdG9yZSk7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjcmVhdGVMb2NhbFN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIHN1KHRoaXMucGVyc2lzdGVuY2UsIG5ldyBldSwgdC5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UodCkge1xuICAgICAgICByZXR1cm4gbmV3IEtvKFFvLnpzLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYnU7XG4gICAgfVxuICAgIGFzeW5jIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5nY1NjaGVkdWxlciAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0b3AoKSwgYXdhaXQgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zaHV0ZG93bigpLCBcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zaHV0ZG93bigpO1xuICAgIH1cbn1cblxuY2xhc3MgQWEgZXh0ZW5kcyBFYSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdDtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIodCwgZSkge1xuICAgICAgICBGKHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUgaW5zdGFuY2VvZiBqbyk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgcG8obiwgdC5hc3luY1F1ZXVlLCBlKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gc28ud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IHNvLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgS28oKHQgPT4gam8uenModCwgZSkpLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyB2YSBleHRlbmRzIEVhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuVmMgPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5mb3JjZU93bmVyc2hpcCA9IG4sIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKHQpLCBhd2FpdCB0aGlzLlZjLmluaXRpYWxpemUodGhpcywgdCksIFxuICAgICAgICAvLyBFbnF1ZXVlIHdyaXRlcyBmcm9tIGEgcHJldmlvdXMgc2Vzc2lvblxuICAgICAgICBhd2FpdCBJYSh0aGlzLlZjLnN5bmNFbmdpbmUpLCBhd2FpdCBjYyh0aGlzLlZjLnJlbW90ZVN0b3JlKSwgXG4gICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXG4gICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuSWkoKCgpID0+ICh0aGlzLmdjU2NoZWR1bGVyICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5nY1NjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIgJiYgIXRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBjcmVhdGVMb2NhbFN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIHN1KHRoaXMucGVyc2lzdGVuY2UsIG5ldyBldSwgdC5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IHBvKG4sIHQuYXN5bmNRdWV1ZSwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgJHQoZSwgdGhpcy5wZXJzaXN0ZW5jZSk7XG4gICAgICAgIHJldHVybiBuZXcgTXQodC5hc3luY1F1ZXVlLCBuKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gWm8odC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpLCBuID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gc28ud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IHNvLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgSm8odGhpcy5zeW5jaHJvbml6ZVRhYnMsIGUsIHQuY2xpZW50SWQsIG4sIHQuYXN5bmNRdWV1ZSwgJHUoKSwgT3UoKSwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYnU7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggbXVsdGktdGFiIEluZGV4ZWREQlxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogSW4gdGhlIGxlZ2FjeSBjbGllbnQsIHRoaXMgcHJvdmlkZXIgaXMgdXNlZCB0byBwcm92aWRlIGJvdGggbXVsdGktdGFiIGFuZFxuICogbm9uLW11bHRpLXRhYiBwZXJzaXN0ZW5jZSBzaW5jZSB3ZSBjYW5ub3QgdGVsbCBhdCBidWlsZCB0aW1lIHdoZXRoZXJcbiAqIGBzeW5jaHJvbml6ZVRhYnNgIHdpbGwgYmUgZW5hYmxlZC5cbiAqLyBjbGFzcyBSYSBleHRlbmRzIHZhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIC8qIGZvcmNlT3duZXJzaGlwPSAqLyAhMSksIHRoaXMuVmMgPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlZjLnN5bmNFbmdpbmU7XG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgaW5zdGFuY2VvZiBQdSAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAganI6IGZhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICB6cjogZ2EuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIFdyOiB5YS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgJGk6IG1hLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBRcjogbGEuYmluZChudWxsLCBlKVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5JaSgoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBhd2FpdCBkYSh0aGlzLlZjLnN5bmNFbmdpbmUsIHQpLCB0aGlzLmdjU2NoZWR1bGVyICYmICh0ICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KCkgOiB0IHx8IHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpKSwgXG4gICAgICAgICAgICB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciAmJiAodCAmJiAhdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0KCkgOiB0IHx8IHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0b3AoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUodCkge1xuICAgICAgICBjb25zdCBlID0gJHUoKTtcbiAgICAgICAgaWYgKCFQdS5EKGUpKSB0aHJvdyBuZXcgVShxLlVOSU1QTEVNRU5URUQsIFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTtcbiAgICAgICAgY29uc3QgbiA9IFpvKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHQuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQdShlLCB0LmFzeW5jUXVldWUsIG4sIHQuY2xpZW50SWQsIHQuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBQYSB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gdC5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdC5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUoZSksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKGUpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcihlKSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKGUsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhdC5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IHQgPT4gSGModGhpcy5zeW5jRW5naW5lLCB0LCAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovKSwgXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBjYS5iaW5kKG51bGwsIHRoaXMuc3luY0VuZ2luZSksIFxuICAgICAgICBhd2FpdCB5Yyh0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnN5bmNFbmdpbmUuaXNQcmltYXJ5Q2xpZW50KSk7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50TWFuYWdlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYmM7XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBGdSh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IChzID0gdC5kYXRhYmFzZUluZm8sIG5ldyBNdShzKSk7XG4gICAgICAgIHZhciBzO1xuICAgICAgICAvKiogUmV0dXJuIHRoZSBQbGF0Zm9ybS1zcGVjaWZpYyBjb25uZWN0aXZpdHkgbW9uaXRvci4gKi8gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEt1KHQsIGUsIG4sIHMpO1xuICAgICAgICB9KHQuYXV0aENyZWRlbnRpYWxzLCB0LmFwcENoZWNrQ3JlZGVudGlhbHMsIG4sIGUpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZSh0KSB7XG4gICAgICAgIHJldHVybiBlID0gdGhpcy5sb2NhbFN0b3JlLCBuID0gdGhpcy5kYXRhc3RvcmUsIHMgPSB0LmFzeW5jUXVldWUsIGkgPSB0ID0+IEhjKHRoaXMuc3luY0VuZ2luZSwgdCwgMCAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5SZW1vdGVTdG9yZSAqLyksIFxuICAgICAgICByID0gU3UuRCgpID8gbmV3IFN1IDogbmV3IFZ1LCBuZXcganUoZSwgbiwgcywgaSwgcik7XG4gICAgICAgIHZhciBlLCBuLCBzLCBpLCByO1xuICAgICAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi8gICAgfVxuICAgIGNyZWF0ZVN5bmNFbmdpbmUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICAgICAgcywgaSwgciwgbykge1xuICAgICAgICAgICAgY29uc3QgdSA9IG5ldyBLYyh0LCBlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmICh1LnZjID0gITApLCB1O1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIHQuaW5pdGlhbFVzZXIsIHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIGUpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gTCh0KTtcbiAgICAgICAgICAgIE4oXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uXCIpLCBlLnZ1LmFkZCg1IC8qIE9mZmxpbmVDYXVzZS5TaHV0ZG93biAqLyksIFxuICAgICAgICAgICAgYXdhaXQgV3UoZSksIGUuUHUuc2h1dGRvd24oKSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gKHJhdGhlciB0aGFuIE9mZmxpbmUpIHRvIGF2b2lkIHBvdGVudGlhbGx5XG4gICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHNwdXJpb3VzIGxpc3RlbmVyIGV2ZW50cyB3aXRoIGNhY2hlZCBkYXRhLCBldGMuXG4gICAgICAgICAgICBlLmJ1LnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKTtcbiAgICAgICAgfSh0aGlzLnJlbW90ZVN0b3JlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvdyBtYW55IGJ5dGVzIHRvIHJlYWQgZWFjaCB0aW1lIHdoZW4gYFJlYWRhYmxlU3RyZWFtUmVhZGVyLnJlYWQoKWAgaXNcbiAqIGNhbGxlZC4gT25seSBhcHBsaWNhYmxlIGZvciBieXRlIHN0cmVhbXMgdGhhdCB3ZSBjb250cm9sIChlLmcuIHRob3NlIGJhY2tlZFxuICogYnkgYW4gVUludDhBcnJheSkuXG4gKi9cbi8qKlxuICogQnVpbGRzIGEgYEJ5dGVTdHJlYW1SZWFkZXJgIGZyb20gYSBVSW50OEFycmF5LlxuICogQHBhcmFtIHNvdXJjZSAtIFRoZSBkYXRhIHNvdXJjZSB0byB1c2UuXG4gKiBAcGFyYW0gYnl0ZXNQZXJSZWFkIC0gSG93IG1hbnkgYnl0ZXMgZWFjaCBgcmVhZCgpYCBmcm9tIHRoZSByZXR1cm5lZCByZWFkZXJcbiAqICAgICAgICB3aWxsIHJlYWQuXG4gKi9cbmZ1bmN0aW9uIGJhKHQsIGUgPSAxMDI0MCkge1xuICAgIGxldCBuID0gMDtcbiAgICAvLyBUaGUgVHlwZVNjcmlwdCBkZWZpbml0aW9uIGZvciBSZWFkYWJsZVN0cmVhbVJlYWRlciBjaGFuZ2VkLiBXZSB1c2VcbiAgICAvLyBgYW55YCBoZXJlIHRvIGFsbG93IHRoaXMgY29kZSB0byBjb21waWxlIHdpdGggZGlmZmVyZW50IHZlcnNpb25zLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQyOTcwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXN5bmMgcmVhZCgpIHtcbiAgICAgICAgICAgIGlmIChuIDwgdC5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQuc2xpY2UobiwgbiArIGUpLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gKz0gZSwgcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNhbmNlbCgpIHt9LFxuICAgICAgICByZWxlYXNlTG9jaygpIHt9LFxuICAgICAgICBjbG9zZWQ6IFByb21pc2UucmVzb2x2ZSgpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogT24gd2ViLCBhIGBSZWFkYWJsZVN0cmVhbWAgaXMgd3JhcHBlZCBhcm91bmQgYnkgYSBgQnl0ZVN0cmVhbVJlYWRlcmAuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKlxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgVmEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRlZCA9ICExO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMuU2ModGhpcy5vYnNlcnZlci5uZXh0LCB0KTtcbiAgICB9XG4gICAgZXJyb3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy5TYyh0aGlzLm9ic2VydmVyLmVycm9yLCB0KSA6IGsoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgdC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgRGMoKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMDtcbiAgICB9XG4gICAgU2ModCwgZSkge1xuICAgICAgICB0aGlzLm11dGVkIHx8IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0ZWQgfHwgdChlKTtcbiAgICAgICAgfSksIDApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBidW5kbGUuXG4gKlxuICogVGFrZXMgYSBidW5kbGUgc3RyZWFtIG9yIGJ1ZmZlciwgYW5kIHByZXNlbnRzIGFic3RyYWN0aW9ucyB0byByZWFkIGJ1bmRsZWRcbiAqIGVsZW1lbnRzIG91dCBvZiB0aGUgdW5kZXJseWluZyBjb250ZW50LlxuICovIGNsYXNzIFNhIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHJlYWRlciB0byByZWFkIGZyb20gdW5kZXJseWluZyBiaW5hcnkgYnVuZGxlIGRhdGEgc291cmNlLiAqL1xuICAgIHQsIGUpIHtcbiAgICAgICAgdGhpcy5DYyA9IHQsIHRoaXMuc2VyaWFsaXplciA9IGUsIFxuICAgICAgICAvKiogQ2FjaGVkIGJ1bmRsZSBtZXRhZGF0YS4gKi9cbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBLLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVybmFsIGJ1ZmZlciB0byBob2xkIGJ1bmRsZSBjb250ZW50LCBhY2N1bXVsYXRpbmcgaW5jb21wbGV0ZSBlbGVtZW50XG4gICAgICAgICAqIGNvbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5LCB0aGlzLnhjID0gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIiksIFxuICAgICAgICAvLyBSZWFkIHRoZSBtZXRhZGF0YSAod2hpY2ggaXMgdGhlIGZpcnN0IGVsZW1lbnQpLlxuICAgICAgICB0aGlzLk5jKCkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0ICYmIHQuUXUoKSA/IHRoaXMubWV0YWRhdGEucmVzb2x2ZSh0Lkd1Lm1ldGFkYXRhKSA6IHRoaXMubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJ1bmRsZSBpcyBub3QgYSBtZXRhZGF0YSwgaXQgaXNcXG4gICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShudWxsID09IHQgPyB2b2lkIDAgOiB0Lkd1KX1gKSk7XG4gICAgICAgIH0pLCAodCA9PiB0aGlzLm1ldGFkYXRhLnJlamVjdCh0KSkpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ2MuY2FuY2VsKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldE1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YS5wcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBiYygpIHtcbiAgICAgICAgLy8gTWFrZXMgc3VyZSBtZXRhZGF0YSBpcyByZWFkIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRNZXRhZGF0YSgpLCB0aGlzLk5jKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGhlYWQgb2YgaW50ZXJuYWwgYnVmZmVyLCBhbmQgcHVsbGluZyBtb3JlIGRhdGEgZnJvbVxuICAgICAqIHVuZGVybHlpbmcgc3RyZWFtIGlmIGEgY29tcGxldGUgZWxlbWVudCBjYW5ub3QgYmUgZm91bmQsIHVudGlsIGFuXG4gICAgICogZWxlbWVudChpbmNsdWRpbmcgdGhlIHByZWZpeGVkIGxlbmd0aCBhbmQgdGhlIEpTT04gc3RyaW5nKSBpcyBmb3VuZC5cbiAgICAgKlxuICAgICAqIE9uY2UgYSBjb21wbGV0ZSBlbGVtZW50IGlzIHJlYWQsIGl0IGlzIGRyb3BwZWQgZnJvbSBpbnRlcm5hbCBidWZmZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGVpdGhlciB0aGUgYnVuZGxlZCBlbGVtZW50LCBvciBudWxsIGlmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mXG4gICAgICogdGhlIHN0cmVhbS5cbiAgICAgKi8gICAgYXN5bmMgTmMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLmtjKCk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMueGMuZGVjb2RlKHQpLCBuID0gTnVtYmVyKGUpO1xuICAgICAgICBpc05hTihuKSAmJiB0aGlzLk1jKGBsZW5ndGggc3RyaW5nICgke2V9KSBpcyBub3QgdmFsaWQgbnVtYmVyYCk7XG4gICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0aGlzLiRjKG4pO1xuICAgICAgICByZXR1cm4gbmV3IGtjKEpTT04ucGFyc2UocyksIHQubGVuZ3RoICsgbik7XG4gICAgfVxuICAgIC8qKiBGaXJzdCBpbmRleCBvZiAneycgZnJvbSB0aGUgdW5kZXJseWluZyBidWZmZXIuICovICAgIE9jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZmluZEluZGV4KCh0ID0+IHQgPT09IFwie1wiLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIsIHVudGlsIHRoZSBmaXJzdCAneycsIGFuZFxuICAgICAqIHJldHVybiB0aGUgY29udGVudC5cbiAgICAgKlxuICAgICAqIElmIHJlYWNoZWQgZW5kIG9mIHRoZSBzdHJlYW0sIHJldHVybnMgYSBudWxsLlxuICAgICAqLyAgICBhc3luYyBrYygpIHtcbiAgICAgICAgZm9yICg7dGhpcy5PYygpIDwgMDsgKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5GYygpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGVyZVxuICAgICAgICAvLyBoYXBwZW5zIHRvIGJlIG5vIG1vcmUgZGF0YSB0byBwcm9jZXNzLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5PYygpO1xuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGJ1dCBzdGlsbFxuICAgICAgICAvLyBjYW5ub3QgZmluZCBhbiBvcGVuIGJyYWNrZXQuXG4gICAgICAgICAgICAgICAgdCA8IDAgJiYgdGhpcy5NYyhcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBhIGxlbmd0aCBzdHJpbmcgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIGEgc3BlY2lmaWVkIHBvc2l0aW9uIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciwgZm9yIGEgc3BlY2lmaWVkXG4gICAgICogbnVtYmVyIG9mIGJ5dGVzLCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpZiBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGRlY29kZWQgZnJvbSB0aGUgcmVhZCBieXRlcy5cbiAgICAgKi8gICAgYXN5bmMgJGModCkge1xuICAgICAgICBmb3IgKDt0aGlzLmJ1ZmZlci5sZW5ndGggPCB0OyApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuRmMoKSAmJiB0aGlzLk1jKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIG1vcmUgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnhjLmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQganNvbiBzdHJpbmcuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIE1jKHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aHJvdyB0aGlzLkNjLmNhbmNlbCgpLCBuZXcgRXJyb3IoYEludmFsaWQgYnVuZGxlIGZvcm1hdDogJHt0fWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWxscyBtb3JlIGRhdGEgZnJvbSB1bmRlcmx5aW5nIHN0cmVhbSB0byBpbnRlcm5hbCBidWZmZXIuXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgICovICAgIGFzeW5jIEZjKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5DYy5yZWFkKCk7XG4gICAgICAgIGlmICghdC5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIubGVuZ3RoICsgdC52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZS5zZXQodGhpcy5idWZmZXIpLCBlLnNldCh0LnZhbHVlLCB0aGlzLmJ1ZmZlci5sZW5ndGgpLCB0aGlzLmJ1ZmZlciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQuZG9uZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEludGVybmFsIHRyYW5zYWN0aW9uIG9iamVjdCByZXNwb25zaWJsZSBmb3IgYWNjdW11bGF0aW5nIHRoZSBtdXRhdGlvbnMgdG9cbiAqIHBlcmZvcm0gYW5kIHRoZSBiYXNlIHZlcnNpb25zIGZvciBhbnkgZG9jdW1lbnRzIHJlYWQuXG4gKi9cbmNsYXNzIERhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdCwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAodCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuXCIpO1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEwodCksIHMgPSBMaShuLnNlcmlhbGl6ZXIpICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBlLm1hcCgodCA9PiAkaShuLnNlcmlhbGl6ZXIsIHQpKSlcbiAgICAgICAgICAgIH0sIHIgPSBhd2FpdCBuLnZvKFwiQmF0Y2hHZXREb2N1bWVudHNcIiwgcywgaSwgZS5sZW5ndGgpLCBvID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IEdpKG4uc2VyaWFsaXplciwgdCk7XG4gICAgICAgICAgICAgICAgby5zZXQoZS5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCB1ID0gW107XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gby5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBGKCEhZSksIHUucHVzaChlKTtcbiAgICAgICAgICAgIH0pKSwgdTtcbiAgICAgICAgfSh0aGlzLmRhdGFzdG9yZSwgdCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4gdGhpcy5yZWNvcmRWZXJzaW9uKHQpKSksIGU7XG4gICAgfVxuICAgIHNldCh0LCBlKSB7XG4gICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlKGUudG9NdXRhdGlvbih0LCB0aGlzLnByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RXcml0ZUVycm9yID0gdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBkZWxldGUodCkge1xuICAgICAgICB0aGlzLndyaXRlKG5ldyBZcyh0LCB0aGlzLnByZWNvbmRpdGlvbih0KSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBhc3luYyBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLmxhc3RXcml0ZUVycm9yKSB0aHJvdyB0aGlzLmxhc3RXcml0ZUVycm9yO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yZWFkVmVyc2lvbnM7XG4gICAgICAgIC8vIEZvciBlYWNoIG11dGF0aW9uLCBub3RlIHRoYXQgdGhlIGRvYyB3YXMgd3JpdHRlbi5cbiAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQuZGVsZXRlKGUua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBGb3IgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGJ1dCBub3Qgd3JpdHRlbiB0bywgd2Ugd2FudCB0byBwZXJmb3JtXG4gICAgICAgIC8vIGEgYHZlcmlmeWAgb3BlcmF0aW9uLlxuICAgICAgICB0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gaHQuZnJvbVBhdGgoZSk7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5wdXNoKG5ldyBYcyhuLCB0aGlzLnByZWNvbmRpdGlvbihuKSkpO1xuICAgICAgICB9KSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gTGkobi5zZXJpYWxpemVyKSArIFwiL2RvY3VtZW50c1wiLCBpID0ge1xuICAgICAgICAgICAgICAgIHdyaXRlczogZS5tYXAoKHQgPT4gamkobi5zZXJpYWxpemVyLCB0KSkpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXdhaXQgbi5JbyhcIkNvbW1pdFwiLCBzLCBpKTtcbiAgICAgICAgfSh0aGlzLmRhdGFzdG9yZSwgdGhpcy5tdXRhdGlvbnMpLCB0aGlzLmNvbW1pdHRlZCA9ICEwO1xuICAgIH1cbiAgICByZWNvcmRWZXJzaW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGlmICh0LmlzRm91bmREb2N1bWVudCgpKSBlID0gdC52ZXJzaW9uOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdC5pc05vRG9jdW1lbnQoKSkgdGhyb3cgTygpO1xuICAgICAgICAgICAgLy8gUmVwcmVzZW50IGEgZGVsZXRlZCBkb2MgdXNpbmcgU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICAgICAgZSA9IHJ0Lm1pbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBpZiAoIWUuaXNFcXVhbChuKSkgXG4gICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgIHRocm93IG5ldyBVKHEuQUJPUlRFRCwgXCJEb2N1bWVudCB2ZXJzaW9uIGNoYW5nZWQgYmV0d2VlbiB0d28gcmVhZHMuXCIpO1xuICAgICAgICB9IGVsc2UgdGhpcy5yZWFkVmVyc2lvbnMuc2V0KHQua2V5LnRvU3RyaW5nKCksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIG9mIHRoaXMgZG9jdW1lbnQgd2hlbiBpdCB3YXMgcmVhZCBpbiB0aGlzIHRyYW5zYWN0aW9uLFxuICAgICAqIGFzIGEgcHJlY29uZGl0aW9uLCBvciBubyBwcmVjb25kaXRpb24gaWYgaXQgd2FzIG5vdCByZWFkLlxuICAgICAqLyAgICBwcmVjb25kaXRpb24odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiAhdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlID8gZS5pc0VxdWFsKHJ0Lm1pbigpKSA/IEZzLmV4aXN0cyghMSkgOiBGcy51cGRhdGVUaW1lKGUpIDogRnMubm9uZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjb25kaXRpb24gZm9yIGEgZG9jdW1lbnQgaWYgdGhlIG9wZXJhdGlvbiBpcyBhbiB1cGRhdGUuXG4gICAgICovICAgIHByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgLy8gVGhlIGZpcnN0IHRpbWUgYSBkb2N1bWVudCBpcyB3cml0dGVuLCB3ZSB3YW50IHRvIHRha2UgaW50byBhY2NvdW50IHRoZVxuICAgICAgICAvLyByZWFkIHRpbWUgYW5kIGV4aXN0ZW5jZVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlKSB7XG4gICAgICAgICAgICBpZiAoZS5pc0VxdWFsKHJ0Lm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGcy51cGRhdGVUaW1lKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvY3VtZW50IHdhcyBub3QgcmVhZCwgc28gd2UganVzdCB1c2UgdGhlIHByZWNvbmRpdGlvbnMgZm9yIGEgYmxpbmRcbiAgICAgICAgLy8gdXBkYXRlLlxuICAgICAgICByZXR1cm4gRnMuZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUodCkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKHQpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovIGNsYXNzIENhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5vcHRpb25zID0gbiwgdGhpcy51cGRhdGVGdW5jdGlvbiA9IHMsIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gaSwgdGhpcy5CYyA9IG4ubWF4QXR0ZW1wdHMsIHRoaXMucW8gPSBuZXcgQnUodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVGltZXJJZC5UcmFuc2FjdGlvblJldHJ5ICovKTtcbiAgICB9XG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovICAgIHJ1bigpIHtcbiAgICAgICAgdGhpcy5CYyAtPSAxLCB0aGlzLkxjKCk7XG4gICAgfVxuICAgIExjKCkge1xuICAgICAgICB0aGlzLnFvLk5vKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IERhKHRoaXMuZGF0YXN0b3JlKSwgZSA9IHRoaXMucWModCk7XG4gICAgICAgICAgICBlICYmIGUudGhlbigoZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHQuY29tbWl0KCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlc29sdmUoZSk7XG4gICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5VYyh0KTtcbiAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5VYyh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBxYyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy51cGRhdGVGdW5jdGlvbih0KTtcbiAgICAgICAgICAgIHJldHVybiAhRnQoZSkgJiYgZS5jYXRjaCAmJiBlLnRoZW4gPyBlIDogKHRoaXMuZGVmZXJyZWQucmVqZWN0KEVycm9yKFwiVHJhbnNhY3Rpb24gY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBQcm9taXNlXCIpKSwgXG4gICAgICAgICAgICBudWxsKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5IGVycm9ycyB0aHJvd24gYnkgdXNlciBwcm92aWRlZCB1cGRhdGVGdW5jdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KSwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBVYyh0KSB7XG4gICAgICAgIHRoaXMuQmMgPiAwICYmIHRoaXMuS2ModCkgPyAodGhpcy5CYyAtPSAxLCB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuTGMoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKSA6IHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpO1xuICAgIH1cbiAgICBLYyh0KSB7XG4gICAgICAgIGlmIChcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lKSB7XG4gICAgICAgICAgICAvLyBJbiB0cmFuc2FjdGlvbnMsIHRoZSBiYWNrZW5kIHdpbGwgZmFpbCBvdXRkYXRlZCByZWFkcyB3aXRoIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICAgICAgICAvLyBub24tbWF0Y2hpbmcgZG9jdW1lbnQgdmVyc2lvbnMgd2l0aCBBQk9SVEVELiBUaGVzZSBlcnJvcnMgc2hvdWxkIGJlIHJldHJpZWQuXG4gICAgICAgICAgICBjb25zdCBlID0gdC5jb2RlO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWJvcnRlZFwiID09PSBlIHx8IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiID09PSBlIHx8IFwiYWxyZWFkeS1leGlzdHNcIiA9PT0gZSB8fCAhb2koZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlIC8vXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIC8vXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS4gLy9cbiAqL1xuY2xhc3MgeGEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5kYXRhYmFzZUluZm8gPSBzLCBcbiAgICAgICAgdGhpcy51c2VyID0gVi5VTkFVVEhFTlRJQ0FURUQsIHRoaXMuY2xpZW50SWQgPSB0dC5BKCksIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCB0aGlzLmF1dGhDcmVkZW50aWFscy5zdGFydChuLCAoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgdXNlcj1cIiwgdC51aWQpLCBhd2FpdCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIodCksIFxuICAgICAgICAgICAgdGhpcy51c2VyID0gdDtcbiAgICAgICAgfSkpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc3RhcnQobiwgKHQgPT4gKE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCBuZXcgYXBwIGNoZWNrIHRva2VuPVwiLCB0KSwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIodCwgdGhpcy51c2VyKSkpKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q29uZmlndXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFzeW5jUXVldWU6IHRoaXMuYXN5bmNRdWV1ZSxcbiAgICAgICAgICAgIGRhdGFiYXNlSW5mbzogdGhpcy5kYXRhYmFzZUluZm8sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhDcmVkZW50aWFsczogdGhpcy5hdXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBhcHBDaGVja0NyZWRlbnRpYWxzOiB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBpbml0aWFsVXNlcjogdGhpcy51c2VyLFxuICAgICAgICAgICAgbWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM6IDEwMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSB0O1xuICAgIH1cbiAgICBzZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb24gLy9cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLiAvL1xuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgSztcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMuX29ubGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIHRoaXMuX29mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMuX29mZmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCBcbiAgICAgICAgICAgICAgICAvLyBUaGUgY3JlZGVudGlhbHMgcHJvdmlkZXIgbXVzdCBiZSB0ZXJtaW5hdGVkIGFmdGVyIHNodXR0aW5nIGRvd24gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlU3RvcmUgYXMgaXQgd2lsbCBwcmV2ZW50IHRoZSBSZW1vdGVTdG9yZSBmcm9tIHJldHJpZXZpbmcgYXV0aFxuICAgICAgICAgICAgICAgIC8vIHRva2Vucy5cbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEVjKGUsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHQucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHQucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIE5hKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4pO1xuICAgIGxldCBzID0gbi5pbml0aWFsVXNlcjtcbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgdCA9PiB7XG4gICAgICAgIHMuaXNFcXVhbCh0KSB8fCAoYXdhaXQgaXUoZS5sb2NhbFN0b3JlLCB0KSwgcyA9IHQpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICBlLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiB0LnRlcm1pbmF0ZSgpKSksIHQuX29mZmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24ga2EodCwgZSkge1xuICAgIHQuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCk7XG4gICAgY29uc3QgbiA9IGF3YWl0ICRhKHQpO1xuICAgIE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgY29uc3QgcyA9IGF3YWl0IHQuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgIGF3YWl0IGUuaW5pdGlhbGl6ZShuLCBzKSwgXG4gICAgLy8gVGhlIENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciBvZiB0aGUgb25saW5lIGNvbXBvbmVudCBwcm92aWRlciB0YWtlc1xuICAgIC8vIHByZWNlZGVuY2Ugb3ZlciB0aGUgb2ZmbGluZSBjb21wb25lbnQgcHJvdmlkZXIuXG4gICAgdC5zZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoKHQgPT4gZ2MoZS5yZW1vdGVTdG9yZSwgdCkpKSwgdC5zZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIoKCh0LCBuKSA9PiBnYyhlLnJlbW90ZVN0b3JlLCBuKSkpLCBcbiAgICB0Ll9vbmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuLyoqXG4gKiBEZWNpZGVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGVycm9yIGFsbG93cyB1cyB0byBncmFjZWZ1bGx5IGRpc2FibGVcbiAqIHBlcnNpc3RlbmNlIChhcyBvcHBvc2VkIHRvIGNyYXNoaW5nIHRoZSBjbGllbnQpLlxuICovIGZ1bmN0aW9uIE1hKHQpIHtcbiAgICByZXR1cm4gXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSA/IHQuY29kZSA9PT0gcS5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQuY29kZSA9PT0gcS5VTklNUExFTUVOVEVEIDogIShcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgfHwgKFxuICAgIC8vIFdoZW4gdGhlIGJyb3dzZXIgaXMgb3V0IG9mIHF1b3RhIHdlIGNvdWxkIGdldCBlaXRoZXIgcXVvdGEgZXhjZWVkZWRcbiAgICAvLyBvciBhbiBhYm9ydGVkIGVycm9yIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBlcnJvciBoYXBwZW5lZCBkdXJpbmdcbiAgICAvLyBzY2hlbWEgbWlncmF0aW9uLlxuICAgIDIyID09PSB0LmNvZGUgfHwgMjAgPT09IHQuY29kZSB8fCBcbiAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgMTEgPT09IHQuY29kZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uICRhKHQpIHtcbiAgICBpZiAoIXQuX29mZmxpbmVDb21wb25lbnRzKSBpZiAodC5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikge1xuICAgICAgICBOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgdXNlciBwcm92aWRlZCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBOYSh0LCB0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vZmZsaW5lKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGU7XG4gICAgICAgICAgICBpZiAoIU1hKG4pKSB0aHJvdyBuO1xuICAgICAgICAgICAgTShcIkVycm9yIHVzaW5nIHVzZXIgcHJvdmlkZWQgY2FjaGUuIEZhbGxpbmcgYmFjayB0byBtZW1vcnkgY2FjaGU6IFwiICsgbiksIGF3YWl0IE5hKHQsIG5ldyBFYSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgTihcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBhd2FpdCBOYSh0LCBuZXcgRWEpO1xuICAgIHJldHVybiB0Ll9vZmZsaW5lQ29tcG9uZW50cztcbn1cblxuYXN5bmMgZnVuY3Rpb24gT2EodCkge1xuICAgIHJldHVybiB0Ll9vbmxpbmVDb21wb25lbnRzIHx8ICh0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyID8gKE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyB1c2VyIHByb3ZpZGVkIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBrYSh0LCB0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vbmxpbmUpKSA6IChOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQga2EodCwgbmV3IFBhKSkpLCB0Ll9vbmxpbmVDb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBGYSh0KSB7XG4gICAgcmV0dXJuICRhKHQpLnRoZW4oKHQgPT4gdC5wZXJzaXN0ZW5jZSkpO1xufVxuXG5mdW5jdGlvbiBCYSh0KSB7XG4gICAgcmV0dXJuICRhKHQpLnRoZW4oKHQgPT4gdC5sb2NhbFN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIExhKHQpIHtcbiAgICByZXR1cm4gT2EodCkudGhlbigodCA9PiB0LnJlbW90ZVN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIHFhKHQpIHtcbiAgICByZXR1cm4gT2EodCkudGhlbigodCA9PiB0LnN5bmNFbmdpbmUpKTtcbn1cblxuZnVuY3Rpb24gVWEodCkge1xuICAgIHJldHVybiBPYSh0KS50aGVuKCh0ID0+IHQuZGF0YXN0b3JlKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEthKHQpIHtcbiAgICBjb25zdCBlID0gYXdhaXQgT2EodCksIG4gPSBlLmV2ZW50TWFuYWdlcjtcbiAgICByZXR1cm4gbi5vbkxpc3RlbiA9IEdjLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgbi5vblVubGlzdGVuID0gamMuYmluZChudWxsLCBlLnN5bmNFbmdpbmUpLCBcbiAgICBuO1xufVxuXG4vKiogRW5hYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uIGFuZCByZS1lbnF1ZXVlcyBhbGwgcGVuZGluZyBvcGVyYXRpb25zLiAqLyBmdW5jdGlvbiBHYSh0KSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBGYSh0KSwgbiA9IGF3YWl0IExhKHQpO1xuICAgICAgICByZXR1cm4gZS5zZXROZXR3b3JrRW5hYmxlZCghMCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUudnUuZGVsZXRlKDAgLyogT2ZmbGluZUNhdXNlLlVzZXJEaXNhYmxlZCAqLyksIHp1KGUpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gUWEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgRmEodCksIG4gPSBhd2FpdCBMYSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gTCh0KTtcbiAgICAgICAgICAgIGUudnUuYWRkKDAgLyogT2ZmbGluZUNhdXNlLlVzZXJEaXNhYmxlZCAqLyksIGF3YWl0IFd1KGUpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSBzbyBnZXQoKXMgcmV0dXJuIGZyb20gY2FjaGUsIGV0Yy5cbiAgICAgICAgICAgIGUuYnUuc2V0KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHdyaXRlcyB0aGF0IHdlcmUgcGVuZGluZyBhdCB0aGUgdGltZVxuICogdGhpcyBtZXRob2Qgd2FzIGNhbGxlZCByZWNlaXZlZCBzZXJ2ZXIgYWNrbm93bGVkZ2VtZW50LiBBbiBhY2tub3dsZWRnZW1lbnRcbiAqIGNhbiBiZSBlaXRoZXIgYWNjZXB0YW5jZSBvciByZWplY3Rpb24uXG4gKi8gZnVuY3Rpb24gamEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJyZWFkIGRvY3VtZW50XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudCh0LCBlKSkpO1xuICAgICAgICAgICAgfSh0LCBlKTtcbiAgICAgICAgICAgIHMuaXNGb3VuZERvY3VtZW50KCkgPyBuLnJlc29sdmUocykgOiBzLmlzTm9Eb2N1bWVudCgpID8gbi5yZXNvbHZlKG51bGwpIDogbi5yZWplY3QobmV3IFUocS5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSBleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIHRoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIHNlcnZlci4pXCIpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IEVjKHQsIGBGYWlsZWQgdG8gZ2V0IGRvY3VtZW50ICcke2V9IGZyb20gY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBkb2N1bWVudCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBCYSh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiB6YSh0LCBlLCBuID0ge30pIHtcbiAgICBjb25zdCBzID0gbmV3IEs7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgVmEoe1xuICAgICAgICAgICAgbmV4dDogciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBTYyh0LCBvKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHUgPSByLmRvY3MuaGFzKG4pO1xuICAgICAgICAgICAgICAgICF1ICYmIHIuZnJvbUNhY2hlID8gXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZiB3ZSdyZSBvbmxpbmUgYW5kIHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAgICAgLy8gZXhpc3QgdGhlbiB3ZSByZXNvbHZlIHdpdGggYSBkb2MuZXhpc3RzIHNldCB0byBmYWxzZS4gSWZcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvZmZsaW5lIGhvd2V2ZXIsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gY2FzZS4gVHdvIG9wdGlvbnM6IDEpIENhY2hlIHRoZSBuZWdhdGl2ZSByZXNwb25zZSBmcm9tXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciBzbyB3ZSBjYW4gZGVsaXZlciB0aGF0IGV2ZW4gd2hlbiB5b3UncmVcbiAgICAgICAgICAgICAgICAvLyBvZmZsaW5lIDIpIEFjdHVhbGx5IHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGUgb25saW5lIGNhc2VcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgICAgICAgICAgICBpLnJlamVjdChuZXcgVShxLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgYmVjYXVzZSB0aGUgY2xpZW50IGlzIG9mZmxpbmUuXCIpKSA6IHUgJiYgci5mcm9tQ2FjaGUgJiYgcyAmJiBcInNlcnZlclwiID09PSBzLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBVKHEuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBkb2VzIGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSkgOiBpLnJlc29sdmUocik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IHQgPT4gaS5yZWplY3QodClcbiAgICAgICAgfSksIG8gPSBuZXcgTmMoR24obi5wYXRoKSwgciwge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICBLdTogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBWYyh0LCBvKTtcbiAgICB9KGF3YWl0IEthKHQpLCB0LmFzeW5jUXVldWUsIGUsIG4sIHMpKSksIHMucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gV2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBmdSh0LCBlLCBcbiAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gbmV3IExjKGUsIHMuaXIpLCByID0gaS5zYyhzLmRvY3VtZW50cyksIG8gPSBpLmFwcGx5Q2hhbmdlcyhyLCBcbiAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSk7XG4gICAgICAgICAgICBuLnJlc29sdmUoby5zbmFwc2hvdCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBFYyh0LCBgRmFpbGVkIHRvIGV4ZWN1dGUgcXVlcnkgJyR7ZX0gYWdhaW5zdCBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIHF1ZXJ5IHNuYXBzaG90IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IEJhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIEhhKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBWYSh7XG4gICAgICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IFNjKHQsIG8pKSksIG4uZnJvbUNhY2hlICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IFUocS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKSA6IGkucmVzb2x2ZShuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBOYyhuLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIEt1OiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFZjKHQsIG8pO1xuICAgIH0oYXdhaXQgS2EodCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBKYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBWYShlKTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgTCh0KS5rdS5hZGQoZSksIFxuICAgICAgICAvLyBJbW1lZGlhdGVseSBmaXJlIGFuIGluaXRpYWwgZXZlbnQsIGluZGljYXRpbmcgYWxsIGV4aXN0aW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyBhcmUgaW4tc3luYy5cbiAgICAgICAgZS5uZXh0KCk7XG4gICAgfShhd2FpdCBLYSh0KSwgbikpKSwgKCkgPT4ge1xuICAgICAgICBuLkRjKCksIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBMKHQpLmt1LmRlbGV0ZShlKTtcbiAgICAgICAgfShhd2FpdCBLYSh0KSwgbikpKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFRha2VzIGFuIHVwZGF0ZUZ1bmN0aW9uIGluIHdoaWNoIGEgc2V0IG9mIHJlYWRzIGFuZCB3cml0ZXMgY2FuIGJlIHBlcmZvcm1lZFxuICogYXRvbWljYWxseS4gSW4gdGhlIHVwZGF0ZUZ1bmN0aW9uLCB0aGUgY2xpZW50IGNhbiByZWFkIGFuZCB3cml0ZSB2YWx1ZXNcbiAqIHVzaW5nIHRoZSBzdXBwbGllZCB0cmFuc2FjdGlvbiBvYmplY3QuIEFmdGVyIHRoZSB1cGRhdGVGdW5jdGlvbiwgYWxsXG4gKiBjaGFuZ2VzIHdpbGwgYmUgY29tbWl0dGVkLiBJZiBhIHJldHJ5YWJsZSBlcnJvciBvY2N1cnMgKGV4OiBzb21lIG90aGVyXG4gKiBjbGllbnQgaGFzIGNoYW5nZWQgYW55IG9mIHRoZSBkYXRhIHJlZmVyZW5jZWQpLCB0aGVuIHRoZSB1cGRhdGVGdW5jdGlvblxuICogd2lsbCBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXIgYSBiYWNrb2ZmLiBJZiB0aGUgdXBkYXRlRnVuY3Rpb24gc3RpbGwgZmFpbHNcbiAqIGFmdGVyIGFsbCByZXRyaWVzLCB0aGVuIHRoZSB0cmFuc2FjdGlvbiB3aWxsIGJlIHJlamVjdGVkLlxuICpcbiAqIFRoZSB0cmFuc2FjdGlvbiBvYmplY3QgcGFzc2VkIHRvIHRoZSB1cGRhdGVGdW5jdGlvbiBjb250YWlucyBtZXRob2RzIGZvclxuICogYWNjZXNzaW5nIGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMuIFVubGlrZSBvdGhlciBkYXRhc3RvcmUgYWNjZXNzLCBkYXRhXG4gKiBhY2Nlc3NlZCB3aXRoIHRoZSB0cmFuc2FjdGlvbiB3aWxsIG5vdCByZWZsZWN0IGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdFxuICogYmVlbiBjb21taXR0ZWQuIEZvciB0aGlzIHJlYXNvbiwgaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgcmVhZHMgYXJlXG4gKiBwZXJmb3JtZWQgYmVmb3JlIGFueSB3cml0ZXMuIFRyYW5zYWN0aW9ucyBtdXN0IGJlIHBlcmZvcm1lZCB3aGlsZSBvbmxpbmUuXG4gKi8gZnVuY3Rpb24gWWEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBuID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IGhpKCkuZW5jb2RlKHQpIDogdDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2EodCwgZSk7XG4gICAgICAgIH0oZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gYmEodCwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSByZXR1cm4gYmEobmV3IFVpbnQ4QXJyYXkodCksIGUpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSkgcmV0dXJuIHQuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2Ugb2YgYHRvQnl0ZVN0cmVhbVJlYWRlcmAgaGFzIHRvIGJlIGEgQXJyYXlCdWZmZXIgb3IgUmVhZGFibGVTdHJlYW1cIik7XG4gICAgICAgIH0obiksIGUpO1xuICAgIH0obiwgRnUoZSkpO1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIFRhKGF3YWl0IHFhKHQpLCBpLCBzKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIFhhKHQsIGUpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5hbWVkIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5xcy5nZXROYW1lZFF1ZXJ5KHQsIGUpKSk7XG4gICAgfShhd2FpdCBCYSh0KSwgZSkpKTtcbn1cblxuZnVuY3Rpb24gWmEodCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTCh0KSwgcyA9IG4uaW5kZXhNYW5hZ2VyLCBpID0gW107XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29uZmlndXJlIGluZGV4ZXNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gcy5nZXRGaWVsZEluZGV4ZXModCkubmV4dCgobiA9PiBcbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLyoqXG4gKiBDb21wYXJlcyB0d28gYXJyYXkgZm9yIGVxdWFsaXR5IHVzaW5nIGNvbXBhcmF0b3IuIFRoZSBtZXRob2QgY29tcHV0ZXMgdGhlXG4gKiBpbnRlcnNlY3Rpb24gYW5kIGludm9rZXMgYG9uQWRkYCBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIGluIGBhZnRlcmAgYnV0IG5vdFxuICogYGJlZm9yZWAuIGBvblJlbW92ZWAgaXMgaW52b2tlZCBmb3IgZXZlcnkgZWxlbWVudCBpbiBgYmVmb3JlYCBidXQgbWlzc2luZ1xuICogZnJvbSBgYWZ0ZXJgLlxuICpcbiAqIFRoZSBtZXRob2QgY3JlYXRlcyBhIGNvcHkgb2YgYm90aCBgYmVmb3JlYCBhbmQgYGFmdGVyYCBhbmQgcnVucyBpbiBPKG4gbG9nXG4gKiBuKSwgd2hlcmUgbiBpcyB0aGUgc2l6ZSBvZiB0aGUgdHdvIGxpc3RzLlxuICpcbiAqIEBwYXJhbSBiZWZvcmUgLSBUaGUgZWxlbWVudHMgdGhhdCBleGlzdCBpbiB0aGUgb3JpZ2luYWwgYXJyYXkuXG4gKiBAcGFyYW0gYWZ0ZXIgLSBUaGUgZWxlbWVudHMgdG8gZGlmZiBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBjb21wYXJhdG9yIC0gVGhlIGNvbXBhcmF0b3IgZm9yIHRoZSBlbGVtZW50cyBpbiBiZWZvcmUgYW5kIGFmdGVyLlxuICogQHBhcmFtIG9uQWRkIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mIGBcbiAqIGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLlxuICogQHBhcmFtIG9uUmVtb3ZlIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mXG4gKiBgYmVmb3JlYCBidXQgbm90IGBhZnRlcmAuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICAgICAgdCA9IFsgLi4udCBdLCBlID0gWyAuLi5lIF0sIHQuc29ydChuKSwgZS5zb3J0KG4pO1xuICAgICAgICAgICAgY29uc3QgciA9IHQubGVuZ3RoLCBvID0gZS5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgdSA9IDAsIGMgPSAwO1xuICAgICAgICAgICAgZm9yICg7dSA8IG8gJiYgYyA8IHI7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuKHRbY10sIGVbdV0pO1xuICAgICAgICAgICAgICAgIHIgPCAwID8gXG4gICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZFxuICAgICAgICAgICAgICAgIC8vIHdhbGt0aHJvdWdoIGlzIG9ubHkgaW4gYGJlZm9yZWAuXG4gICAgICAgICAgICAgICAgaSh0W2MrK10pIDogciA+IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgYWRkZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZCB3YWxrdGhyb3VnaFxuICAgICAgICAgICAgICAgIC8vIGlzIG9ubHkgaW4gYGFmdGVyYC5cbiAgICAgICAgICAgICAgICBzKGVbdSsrXSkgOiAodSsrLCBjKyspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICg7dSA8IG87ICkgcyhlW3UrK10pO1xuICAgICAgICAgICAgZm9yICg7YyA8IHI7ICkgaSh0W2MrK10pO1xuICAgICAgICB9KG4sIGUsIHd0LCAoZSA9PiB7XG4gICAgICAgICAgICBpLnB1c2gocy5hZGRGaWVsZEluZGV4KHQsIGUpKTtcbiAgICAgICAgfSksIChlID0+IHtcbiAgICAgICAgICAgIGkucHVzaChzLmRlbGV0ZUZpZWxkSW5kZXgodCwgZSkpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBSdC53YWl0Rm9yKGkpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBjbGllbnQgc3RhdGUgaXM6XG4gICAgLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4gICAgKGF3YWl0IEJhKHQpLCBlKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb21wYXJlcyB0d28gYEV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9uc2Agb2JqZWN0cyBmb3IgZXF1YWxpdHkuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgRXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zYCB3aXRoIHRoZSBzYW1lXG4gKiBvcHRpb24gdmFsdWVzIGFzIHRoZSBnaXZlbiBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gdGgodCkge1xuICAgIGNvbnN0IGUgPSB7fTtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnRpbWVvdXRTZWNvbmRzICYmIChlLnRpbWVvdXRTZWNvbmRzID0gdC50aW1lb3V0U2Vjb25kcyksIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGVoID0gbmV3IE1hcDtcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBtYXAgdGhhdCBlbnN1cmVzIG9ubHkgb25lIERhdGFzdG9yZSBleGlzdHMgcGVyIEZpcmVzdG9yZVxuICogaW5zdGFuY2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBuaCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgY2Fubm90IGJlIGNhbGxlZCB3aXRoIGFuIGVtcHR5ICR7ZX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdHdvIGJvb2xlYW4gb3B0aW9ucyBhcmUgbm90IHNldCBhdCB0aGUgc2FtZSB0aW1lLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gc2godCwgZSwgbiwgcykge1xuICAgIGlmICghMCA9PT0gZSAmJiAhMCA9PT0gcykgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgJHt0fSBhbmQgJHtufSBjYW5ub3QgYmUgdXNlZCB0b2dldGhlci5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdCBjb250YWluc1xuICogYW4gZXZlbiBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBpaCh0KSB7XG4gICAgaWYgKCFodC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgY29sbGVjdGlvbiAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0XG4gKiBjb250YWlucyBhbiBvZGQgbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gcmgodCkge1xuICAgIGlmIChodC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxuICovXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xuZnVuY3Rpb24gb2godCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gXCJudWxsXCI7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0Lmxlbmd0aCA+IDIwICYmICh0ID0gYCR7dC5zdWJzdHJpbmcoMCwgMjApfS4uLmApLCBcbiAgICBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCB8fCBcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIFwiXCIgKyB0O1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBcImFuIGFycmF5XCI7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgICAgIC8qKiB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQuY29uc3RydWN0b3IpIHJldHVybiB0LmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYCwgb3B0aW9uYWxseSB1bndyYXBwaW5nIENvbXBhdCB0eXBlcyB0byBleHBvc2UgdGhlXG4gKiB1bmRlcmx5aW5nIGluc3RhbmNlLiBUaHJvd3MgaWYgIGBvYmpgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgVGAuXG4gKlxuICogVGhpcyBjYXN0IGlzIHVzZWQgaW4gdGhlIExpdGUgYW5kIEZ1bGwgU0RLIHRvIHZlcmlmeSBpbnN0YW5jZSB0eXBlcyBmb3JcbiAqIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIHB1YmxpYyBBUEkuXG4gKiBAaW50ZXJuYWxcbiAqLyAodCk7XG4gICAgICAgICAgICByZXR1cm4gZSA/IGBhIGN1c3RvbSAke2V9IG9iamVjdGAgOiBcImFuIG9iamVjdFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgPyBcImEgZnVuY3Rpb25cIiA6IE8oKTtcbn1cblxuZnVuY3Rpb24gdWgodCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZSkge1xuICAgIGlmIChcIl9kZWxlZ2F0ZVwiIGluIHQgJiYgKFxuICAgIC8vIFVud3JhcCBDb21wYXQgdHlwZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHQgPSB0Ll9kZWxlZ2F0ZSksICEodCBpbnN0YW5jZW9mIGUpKSB7XG4gICAgICAgIGlmIChlLm5hbWUgPT09IHQuY29uc3RydWN0b3IubmFtZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlR5cGUgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGluc3RhbmNlLiBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgU0RLP1wiKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbiA9IG9oKHQpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRXhwZWN0ZWQgdHlwZSAnJHtlLm5hbWV9JywgYnV0IGl0IHdhczogJHtufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBjaCh0LCBlKSB7XG4gICAgaWYgKGUgPD0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIHJlcXVpcmVzIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiAke2V9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcbi8qKlxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxuICogdXNlci1zdXBwbGllZCBgRmlyZXN0b3JlU2V0dGluZ3NgIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxuICovXG5jbGFzcyBhaCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB2YXIgZSwgbjtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdC5ob3N0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0LnNzbCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHByb3ZpZGUgc3NsIG9wdGlvbiBpZiBob3N0IG9wdGlvbiBpcyBub3Qgc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiwgdGhpcy5zc2wgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgdGhpcy5ob3N0ID0gdC5ob3N0LCB0aGlzLnNzbCA9IG51bGwgPT09IChlID0gdC5zc2wpIHx8IHZvaWQgMCA9PT0gZSB8fCBlO1xuICAgICAgICBpZiAodGhpcy5jcmVkZW50aWFscyA9IHQuY3JlZGVudGlhbHMsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9ICEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBcbiAgICAgICAgdGhpcy5jYWNoZSA9IHQubG9jYWxDYWNoZSwgdm9pZCAwID09PSB0LmNhY2hlU2l6ZUJ5dGVzKSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gNDE5NDMwNDA7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKC0xICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHQuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHQuY2FjaGVTaXplQnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgc2goXCJleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgXCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcIiwgdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcpLCBcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA/IHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gITEgOiB2b2lkIDAgPT09IHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID8gdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0cnVlIDogXG4gICAgICAgIC8vIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgY29lcmNlIHRoZSB2YWx1ZSB0byBib29sZWFuIGV2ZW4gdGhvdWdoXG4gICAgICAgIC8vIHRoZSBUeXBlU2NyaXB0IGNvbXBpbGVyIGhhcyBuYXJyb3dlZCB0aGUgdHlwZSB0byBib29sZWFuIGFscmVhZHkuXG4gICAgICAgIC8vIG5vaW5zcGVjdGlvbiBQb2ludGxlc3NCb29sZWFuRXhwcmVzc2lvbkpTXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zID0gdGgobnVsbCAhPT0gKG4gPSB0LmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucykgJiYgdm9pZCAwICE9PSBuID8gbiA6IHt9KSwgXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQudGltZW91dFNlY29uZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odC50aW1lb3V0U2Vjb25kcykpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7dC50aW1lb3V0U2Vjb25kc30gKG11c3Qgbm90IGJlIE5hTilgKTtcbiAgICAgICAgICAgICAgICBpZiAodC50aW1lb3V0U2Vjb25kcyA8IDUpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7dC50aW1lb3V0U2Vjb25kc30gKG1pbmltdW0gYWxsb3dlZCB2YWx1ZSBpcyA1KWApO1xuICAgICAgICAgICAgICAgIGlmICh0LnRpbWVvdXRTZWNvbmRzID4gMzApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7dC50aW1lb3V0U2Vjb25kc30gKG1heGltdW0gYWxsb3dlZCB2YWx1ZSBpcyAzMClgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyAodGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0ID09PSB0Lmhvc3QgJiYgdGhpcy5zc2wgPT09IHQuc3NsICYmIHRoaXMuY3JlZGVudGlhbHMgPT09IHQuY3JlZGVudGlhbHMgJiYgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyAmJiB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgJiYgKGUgPSB0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucywgXG4gICAgICAgIG4gPSB0LmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucywgZS50aW1lb3V0U2Vjb25kcyA9PT0gbi50aW1lb3V0U2Vjb25kcykgJiYgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID09PSB0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgJiYgdGhpcy51c2VGZXRjaFN0cmVhbXMgPT09IHQudXNlRmV0Y2hTdHJlYW1zO1xuICAgICAgICB2YXIgZSwgbjtcbiAgICB9XG59XG5cbmNsYXNzIGhoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5fYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5fYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuX2RhdGFiYXNlSWQgPSBuLCBcbiAgICAgICAgdGhpcy5fYXBwID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgYWgoe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgYWgodCksIHZvaWQgMCAhPT0gdC5jcmVkZW50aWFscyAmJiAodGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gbmV3IFE7XG4gICAgICAgICAgICBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiZmlyc3RQYXJ0eVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSCh0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsLCB0LmF1dGhUb2tlbkZhY3RvcnkgfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuY2xpZW50O1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIm1ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciBmYWlsZWQgZHVlIHRvIGludmFsaWQgY3JlZGVudGlhbCB0eXBlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuY3JlZGVudGlhbHMpKTtcbiAgICB9XG4gICAgX2dldFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9mcmVlemVTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITAsIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVybWluYXRlVGFzayB8fCAodGhpcy5fdGVybWluYXRlVGFzayA9IHRoaXMuX3Rlcm1pbmF0ZSgpKSwgdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBGaXJlc3RvcmVgIGluc3RhbmNlLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhcHA6IHRoaXMuX2FwcCxcbiAgICAgICAgICAgIGRhdGFiYXNlSWQ6IHRoaXMuX2RhdGFiYXNlSWQsXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5fc2V0dGluZ3NcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVybWluYXRlcyBhbGwgY29tcG9uZW50cyB1c2VkIGJ5IHRoaXMgY2xpZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgbWV0aG9kIHRvIGNsZWFuIHVwIHRoZWlyIG93biBkZXBlbmRlbmNpZXMsIGJ1dCBtdXN0IGFsc28gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kLlxuICAgICAqXG4gICAgICogT25seSBldmVyIGNhbGxlZCBvbmNlLlxuICAgICAqLyAgICBfdGVybWluYXRlKCkge1xuICAgICAgICAvKipcbiAqIFJlbW92ZXMgYWxsIGNvbXBvbmVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBpbnN0YW5jZS4gTXVzdCBiZSBjYWxsZWRcbiAqIHdoZW4gdGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIGlzIHRlcm1pbmF0ZWQuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBlaC5nZXQodCk7XG4gICAgICAgICAgICBlICYmIChOKFwiQ29tcG9uZW50UHJvdmlkZXJcIiwgXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksIGVoLmRlbGV0ZSh0KSwgZS50ZXJtaW5hdGUoKSk7XG4gICAgICAgIH0odGhpcyksIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGaXJlc3RvcmUgZW11bGF0b3IuXG4gKlxuICogTm90ZTogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueVxuICogb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIHRvIGNvbmZpZ3VyZSB0byBjb25uZWN0IHRvIHRoZVxuICogZW11bGF0b3IuXG4gKiBAcGFyYW0gaG9zdCAtIHRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KS5cbiAqIEBwYXJhbSBwb3J0IC0gdGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA5MDAwKS5cbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nXG4gKiBTZWN1cml0eSBSdWxlcy5cbiAqLyBmdW5jdGlvbiBsaCh0LCBlLCBuLCBzID0ge30pIHtcbiAgICB2YXIgaTtcbiAgICBjb25zdCByID0gKHQgPSB1aCh0LCBoaCkpLl9nZXRTZXR0aW5ncygpLCBvID0gYCR7ZX06JHtufWA7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHIuaG9zdCAmJiByLmhvc3QgIT09IG8gJiYgTShcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkLlwiKSwgXG4gICAgdC5fc2V0U2V0dGluZ3MoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByKSwge1xuICAgICAgICBob3N0OiBvLFxuICAgICAgICBzc2w6ICExXG4gICAgfSkpLCBzLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgbGV0IGUsIG47XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBzLm1vY2tVc2VyVG9rZW4pIGUgPSBzLm1vY2tVc2VyVG9rZW4sIG4gPSBWLk1PQ0tfVVNFUjsgZWxzZSB7XG4gICAgICAgICAgICAvLyBMZXQgY3JlYXRlTW9ja1VzZXJUb2tlbiB2YWxpZGF0ZSBmaXJzdCAoY2F0Y2hlcyBjb21tb24gbWlzdGFrZXMgbGlrZVxuICAgICAgICAgICAgLy8gaW52YWxpZCBmaWVsZCBcInVpZFwiIGFuZCBtaXNzaW5nIGZpZWxkIFwic3ViXCIgLyBcInVzZXJfaWRcIi4pXG4gICAgICAgICAgICBlID0gY3JlYXRlTW9ja1VzZXJUb2tlbihzLm1vY2tVc2VyVG9rZW4sIG51bGwgPT09IChpID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBzLm1vY2tVc2VyVG9rZW4uc3ViIHx8IHMubW9ja1VzZXJUb2tlbi51c2VyX2lkO1xuICAgICAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgVihyKTtcbiAgICAgICAgfVxuICAgICAgICB0Ll9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgaihuZXcgRyhlLCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFJlZmVyZW5jZWAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAqLyBjbGFzcyBmaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZG9jdW1lbnRcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBnZXQgX3BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRvY3VtZW50J3MgaWRlbnRpZmllciB3aXRoaW4gaXRzIGNvbGxlY3Rpb24uXG4gICAgICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudCAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgYmVsb25ncyB0by5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3aCh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGZoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeWAgcmVmZXJzIHRvIGEgcXVlcnkgd2hpY2ggeW91IGNhbiByZWFkIG9yIGxpc3RlbiB0by4gWW91IGNhbiBhbHNvXG4gKiBjb25zdHJ1Y3QgcmVmaW5lZCBgUXVlcnlgIG9iamVjdHMgYnkgYWRkaW5nIGZpbHRlcnMgYW5kIG9yZGVyaW5nLlxuICovIGNsYXNzIGRoIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBsaXRlIHZlcnNpb24gb2YgdGhlIFF1ZXJ5IGNsYXNzIGluIHRoZSBtYWluIFNESy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fcXVlcnkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJxdWVyeVwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGRoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9xdWVyeSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYENvbGxlY3Rpb25SZWZlcmVuY2VgIG9iamVjdCBjYW4gYmUgdXNlZCBmb3IgYWRkaW5nIGRvY3VtZW50cywgZ2V0dGluZ1xuICogZG9jdW1lbnQgcmVmZXJlbmNlcywgYW5kIHF1ZXJ5aW5nIGZvciBkb2N1bWVudHMgKHVzaW5nIHtAbGluayAocXVlcnk6MSl9KS5cbiAqLyBjbGFzcyB3aCBleHRlbmRzIGRoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgR24obikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiB0LmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgZmgodGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBodCh0KSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IHdoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9oKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgbmgoXCJjb2xsZWN0aW9uXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIGhoKSB7XG4gICAgICAgIGNvbnN0IHMgPSB1dC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4gcmgocyksIG5ldyB3aCh0LCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBmaCB8fCB0IGluc3RhbmNlb2Ygd2gpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQodXQuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiByaChzKSwgbmV3IHdoKHQuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gbWgodCwgZSkge1xuICAgIGlmICh0ID0gdWgodCwgaGgpLCBuaChcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgZSksIGUuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke2V9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgZGgodCwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVW4odXQuZW1wdHlQYXRoKCksIHQpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBnaCh0LCBlLCAuLi5uKSB7XG4gICAgaWYgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIFxuICAgIC8vIFdlIGFsbG93IG9taXNzaW9uIG9mICdwYXRoU3RyaW5nJyBidXQgZXhwbGljaXRseSBwcm9oaWJpdCBwYXNzaW5nIGluIGJvdGhcbiAgICAvLyAndW5kZWZpbmVkJyBhbmQgJ251bGwnLlxuICAgIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggJiYgKGUgPSB0dC5BKCkpLCBuaChcImRvY1wiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBoaCkge1xuICAgICAgICBjb25zdCBzID0gdXQuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIGloKHMpLCBuZXcgZmgodCwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IGh0KHMpKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgZmggfHwgdCBpbnN0YW5jZW9mIHdoKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB0Ll9wYXRoLmNoaWxkKHV0LmZyb21TdHJpbmcoZSwgLi4ubikpO1xuICAgICAgICByZXR1cm4gaWgocyksIG5ldyBmaCh0LmZpcmVzdG9yZSwgdCBpbnN0YW5jZW9mIHdoID8gdC5jb252ZXJ0ZXIgOiBudWxsLCBuZXcgaHQocykpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24geWgodCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCAodCBpbnN0YW5jZW9mIGZoIHx8IHQgaW5zdGFuY2VvZiB3aCkgJiYgKGUgaW5zdGFuY2VvZiBmaCB8fCBlIGluc3RhbmNlb2Ygd2gpICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgdC5wYXRoID09PSBlLnBhdGggJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBwaCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgaW5zdGFuY2VvZiBkaCAmJiBlIGluc3RhbmNlb2YgZGggJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiBabih0Ll9xdWVyeSwgZS5fcXVlcnkpICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEloIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXG4gICAgICAgIHRoaXMuR2MgPSBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIC8vIEEgbGlzdCBvZiByZXRyeWFibGUgb3BlcmF0aW9ucy4gUmV0cnlhYmxlIG9wZXJhdGlvbnMgYXJlIHJ1biBpbiBvcmRlciBhbmRcbiAgICAgICAgLy8gcmV0cmllZCB3aXRoIGJhY2tvZmYuXG4gICAgICAgIHRoaXMuUWMgPSBbXSwgXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IE9uY2UgaXQgaXMgc2V0IHRvIHRydWUsIGl0IHdpbGwgbm90XG4gICAgICAgIC8vIGJlIGNoYW5nZWQgYWdhaW4uXG4gICAgICAgIHRoaXMuamMgPSAhMSwgXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgc2NoZWR1bGVkIHRvIGJlIHF1ZXVlZCBpbiB0aGUgZnV0dXJlLiBPcGVyYXRpb25zIGFyZVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgdGhleSBhcmUgcnVuIG9yIGNhbmNlbGVkLlxuICAgICAgICB0aGlzLnpjID0gW10sIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIHRoaXMuV2MgPSBudWxsLCBcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcbiAgICAgICAgLy8gYXNzZXJ0aW9uIHNhbml0eS1jaGVja3MuXG4gICAgICAgIHRoaXMuSGMgPSAhMSwgXG4gICAgICAgIC8vIEVuYWJsZWQgZHVyaW5nIHNodXRkb3duIG9uIFNhZmFyaSB0byBwcmV2ZW50IGZ1dHVyZSBhY2Nlc3MgdG8gSW5kZXhlZERCLlxuICAgICAgICB0aGlzLkpjID0gITEsIFxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxuICAgICAgICB0aGlzLlljID0gW10sIFxuICAgICAgICAvLyBCYWNrb2ZmIHRpbWVyIHVzZWQgdG8gc2NoZWR1bGUgcmV0cmllcyBmb3IgcmV0cnlhYmxlIG9wZXJhdGlvbnNcbiAgICAgICAgdGhpcy5xbyA9IG5ldyBCdSh0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogVGltZXJJZC5Bc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLlhjID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IE91KCk7XG4gICAgICAgICAgICB0ICYmIE4oXCJBc3luY1F1ZXVlXCIsIFwiVmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VkIHRvIFwiICsgdC52aXNpYmlsaXR5U3RhdGUpLCB0aGlzLnFvLk1vKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSBPdSgpO1xuICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyICYmIHQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5YYyk7XG4gICAgfVxuICAgIGdldCBpc1NodXR0aW5nRG93bigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuamM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXG4gICAgICovICAgIGVucXVldWVBbmRGb3JnZXQodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuZW5xdWV1ZSh0KTtcbiAgICB9XG4gICAgZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQodCkge1xuICAgICAgICB0aGlzLlpjKCksIFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMudGEodCk7XG4gICAgfVxuICAgIGVudGVyUmVzdHJpY3RlZE1vZGUodCkge1xuICAgICAgICBpZiAoIXRoaXMuamMpIHtcbiAgICAgICAgICAgIHRoaXMuamMgPSAhMCwgdGhpcy5KYyA9IHQgfHwgITE7XG4gICAgICAgICAgICBjb25zdCBlID0gT3UoKTtcbiAgICAgICAgICAgIGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlhjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnF1ZXVlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuWmMoKSwgdGhpcy5qYykgXG4gICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKCkgPT4ge30pKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgUHJvbWlzZSB0aGF0IHdlIGNhbiByZXR1cm4gdG8gdGhlIGNhbGxlZS4gVGhpc1xuICAgICAgICAvLyBhbGxvd3MgdXMgdG8gcmV0dXJuIGEgXCJoYW5naW5nIFByb21pc2VcIiBvbmx5IHRvIHRoZSBjYWxsZWUgYW5kIHN0aWxsXG4gICAgICAgIC8vIGFkdmFuY2UgdGhlIHF1ZXVlIGV2ZW4gd2hlbiB0aGUgb3BlcmF0aW9uIGlzIG5vdCBydW4uXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdGhpcy50YSgoKCkgPT4gdGhpcy5qYyAmJiB0aGlzLkpjID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAodCgpLnRoZW4oZS5yZXNvbHZlLCBlLnJlamVjdCksIFxuICAgICAgICBlLnByb21pc2UpKSkudGhlbigoKCkgPT4gZS5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUodCkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLlFjLnB1c2godCksIHRoaXMuZWEoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgZWEoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLlFjLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLlFjWzBdKCksIHRoaXMuUWMuc2hpZnQoKSwgdGhpcy5xby5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGlmICghRHQodCkpIHRocm93IHQ7XG4gLy8gRmFpbHVyZSB3aWxsIGJlIGhhbmRsZWQgYnkgQXN5bmNRdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOKFwiQXN5bmNRdWV1ZVwiLCBcIk9wZXJhdGlvbiBmYWlsZWQgd2l0aCByZXRyeWFibGUgZXJyb3I6IFwiICsgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLlFjLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYWRkaXRpb25hbCBvcGVyYXRpb25zLCB3ZSByZS1zY2hlZHVsZSBgcmV0cnlOZXh0T3AoKWAuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBydW4gcmV0cnlhYmxlIG9wZXJhdGlvbnMgdGhhdCBmYWlsZWQgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGVpciBpbml0aWFsIGF0dGVtcHQgc2luY2Ugd2UgZG9uJ3Qga25vdyB3aGV0aGVyIHRoZXkgYXJlIGFscmVhZHlcbiAgICAgICAgICAgIC8vIGVucXVldWVkLiBJZiwgZm9yIGV4YW1wbGUsIGBvcDFgLCBgb3AyYCwgYG9wM2AgYXJlIGVucXVldWVkIGFuZCBgb3AxYFxuICAgICAgICAgICAgLy8gbmVlZHMgdG8gIGJlIHJlLXJ1biwgd2Ugd2lsbCBydW4gYG9wMWAsIGBvcDFgLCBgb3AyYCB1c2luZyB0aGVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZW5xdWV1ZWQgY2FsbHMgdG8gYHJldHJ5TmV4dE9wKClgLiBgb3AzKClgIHdpbGwgdGhlbiBydW4gaW4gdGhlXG4gICAgICAgICAgICAvLyBjYWxsIHNjaGVkdWxlZCBoZXJlLlxuICAgICAgICAgICAgLy8gU2luY2UgYGJhY2tvZmZBbmRSdW4oKWAgY2FuY2VscyBhbiBleGlzdGluZyBiYWNrb2ZmIGFuZCBzY2hlZHVsZXMgYVxuICAgICAgICAgICAgLy8gbmV3IGJhY2tvZmYgb24gZXZlcnkgY2FsbCwgdGhlcmUgaXMgb25seSBldmVyIGEgc2luZ2xlIGFkZGl0aW9uYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbiBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICB0aGlzLnFvLk5vKCgoKSA9PiB0aGlzLmVhKCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0YSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkdjLnRoZW4oKCgpID0+ICh0aGlzLkhjID0gITAsIHQoKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLldjID0gdCwgdGhpcy5IYyA9ICExO1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLyoqXG4gKiBDaHJvbWUgaW5jbHVkZXMgRXJyb3IubWVzc2FnZSBpbiBFcnJvci5zdGFjay4gT3RoZXIgYnJvd3NlcnMgZG8gbm90LlxuICogVGhpcyByZXR1cm5zIGV4cGVjdGVkIG91dHB1dCBvZiBtZXNzYWdlICsgc3RhY2sgd2hlbiBhdmFpbGFibGUuXG4gKiBAcGFyYW0gZXJyb3IgLSBFcnJvciBvciBGaXJlc3RvcmVFcnJvclxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSB0Lm1lc3NhZ2UgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICB0LnN0YWNrICYmIChlID0gdC5zdGFjay5pbmNsdWRlcyh0Lm1lc3NhZ2UpID8gdC5zdGFjayA6IHQubWVzc2FnZSArIFwiXFxuXCIgKyB0LnN0YWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0KTtcbiAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyB0aGF0IHRoaXMudGFpbCBiZWNvbWVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBhbmRcbiAgICAgICAgICAgIC8vIGFsbCBmdXJ0aGVyIGF0dGVtcHRzIHRvIGNoYWluICh2aWEgLnRoZW4pIHdpbGwganVzdCBzaG9ydC1jaXJjdWl0XG4gICAgICAgICAgICAvLyBhbmQgcmV0dXJuIHRoZSByZWplY3RlZCBQcm9taXNlLlxuICAgICAgICAgICAgdGhyb3cgayhcIklOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogXCIsIGUpLCB0O1xuICAgICAgICB9KSkudGhlbigodCA9PiAodGhpcy5IYyA9ICExLCB0KSkpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5HYyA9IGUsIGU7XG4gICAgfVxuICAgIGVucXVldWVBZnRlckRlbGF5KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5aYygpLCBcbiAgICAgICAgLy8gRmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IgdGltZXJJZHMgdGhhdCBoYXZlIGJlZW4gb3ZlcnJpZGVuLlxuICAgICAgICB0aGlzLlljLmluZGV4T2YodCkgPiAtMSAmJiAoZSA9IDApO1xuICAgICAgICBjb25zdCBzID0gVGMuY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgdCwgZSwgbiwgKHQgPT4gdGhpcy5uYSh0KSkpO1xuICAgICAgICByZXR1cm4gdGhpcy56Yy5wdXNoKHMpLCBzO1xuICAgIH1cbiAgICBaYygpIHtcbiAgICAgICAgdGhpcy5XYyAmJiBPKCk7XG4gICAgfVxuICAgIHZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSB7fVxuICAgIC8qKlxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxuICAgICAqLyAgICBhc3luYyBzYSgpIHtcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBpbiB0aGUgcXVldWUgcHJpb3IgdG8gZHJhaW5pbmcgbWF5IGhhdmUgZW5xdWV1ZWQgYWRkaXRpb25hbFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBLZWVwIGRyYWluaW5nIHRoZSBxdWV1ZSB1bnRpbCB0aGUgdGFpbCBpcyBubyBsb25nZXIgYWR2YW5jZWQsXG4gICAgICAgIC8vIHdoaWNoIGluZGljYXRlcyB0aGF0IG5vIG1vcmUgbmV3IG9wZXJhdGlvbnMgd2VyZSBlbnF1ZXVlZCBhbmQgdGhhdCBhbGxcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB3ZXJlIGV4ZWN1dGVkLlxuICAgICAgICBsZXQgdDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdCA9IHRoaXMuR2MsIGF3YWl0IHQ7XG4gICAgICAgIH0gd2hpbGUgKHQgIT09IHRoaXMuR2MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcbiAgICAgKiBleGlzdHMuXG4gICAgICovICAgIGlhKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuemMpIGlmIChlLnRpbWVySWQgPT09IHQpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIC0gRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkXG4gICAgICogd2lsbCBiZSBkcmFpbmVkLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1biBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKi8gICAgcmEodCkge1xuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXG4gICAgICAgIHJldHVybiB0aGlzLnNhKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cbiAgICAgICAgICAgIHRoaXMuemMuc29ydCgoKHQsIGUpID0+IHQudGFyZ2V0VGltZU1zIC0gZS50YXJnZXRUaW1lTXMpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnpjKSBpZiAoZS5za2lwRGVsYXkoKSwgXCJhbGxcIiAvKiBUaW1lcklkLkFsbCAqLyAhPT0gdCAmJiBlLnRpbWVySWQgPT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2EoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBvYSh0KSB7XG4gICAgICAgIHRoaXMuWWMucHVzaCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIG5hKHQpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnpjLmluZGV4T2YodCk7XG4gICAgICAgIHRoaXMuemMuc3BsaWNlKGUsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVGgodCkge1xuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXG4gKiBtZXRob2RzLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGlmICh0IGluIG4gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuW3RdKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFJlcHJlc2VudHMgdGhlIHRhc2sgb2YgbG9hZGluZyBhIEZpcmVzdG9yZSBidW5kbGUuIEl0IHByb3ZpZGVzIHByb2dyZXNzIG9mIGJ1bmRsZVxuICogbG9hZGluZywgYXMgd2VsbCBhcyB0YXNrIGNvbXBsZXRpb24gYW5kIGVycm9yIGV2ZW50cy5cbiAqXG4gKiBUaGUgQVBJIGlzIGNvbXBhdGlibGUgd2l0aCBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gKHQsIFsgXCJuZXh0XCIsIFwiZXJyb3JcIiwgXCJjb21wbGV0ZVwiIF0pO1xufVxuXG5jbGFzcyBFaCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7fSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlciA9IG5ldyBLLCB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICAgICAgdG90YWxCeXRlczogMCxcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiAwLFxuICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGZ1bmN0aW9ucyB0byBsaXN0ZW4gdG8gYnVuZGxlIGxvYWRpbmcgcHJvZ3Jlc3MgZXZlbnRzLlxuICAgICAqIEBwYXJhbSBuZXh0IC0gQ2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBwcm9ncmVzcyB1cGRhdGUgZnJvbSBidW5kbGUgbG9hZGluZy4gVHlwaWNhbGx5IGBuZXh0YCBjYWxscyBvY2N1clxuICAgICAqICAgZWFjaCB0aW1lIGEgRmlyZXN0b3JlIGRvY3VtZW50IGlzIGxvYWRlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICogQHBhcmFtIGVycm9yIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy4gVGhlIHRhc2sgYWJvcnRzIGFmdGVyIHJlcG9ydGluZyB0aGVcbiAgICAgKiAgIGVycm9yLCBhbmQgdGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdXBkYXRlcyBhZnRlciB0aGlzLlxuICAgICAqIEBwYXJhbSBjb21wbGV0ZSAtIENhbGxlZCB3aGVuIHRoZSBsb2FkaW5nIHRhc2sgaXMgY29tcGxldGUuXG4gICAgICovICAgIG9uUHJvZ3Jlc3ModCwgZSwgbikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogdCxcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgY29tcGxldGU6IG5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4uY2F0Y2hgIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLmNhdGNoKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi50aGVuYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25GdWxmaWxsZWQgLSBDYWxsZWQgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlIGxvYWRpbmcgdGFzayB3aXRoIGEgZmluYWwgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHVwZGF0ZS5cbiAgICAgKiAgIFRoZSB1cGRhdGUgd2lsbCBhbHdheXMgaGF2ZSBpdHMgYHRhc2tTdGF0ZWAgc2V0IHRvIGBcIlN1Y2Nlc3NcImAuXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICB0aGVuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS50aGVuKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9jb21wbGV0ZVdpdGgodCkge1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9ncmVzcyh0KSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlKCksIFxuICAgICAgICB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlc29sdmUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgZmFpbGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgRXJyb3JgIGFzIHRoZSByZWFzb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfZmFpbFdpdGgodCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlID0gXCJFcnJvclwiLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHRoaXMuX2xhc3RQcm9ncmVzcyksIFxuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IodCksIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVqZWN0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhIHByb2dyZXNzIHVwZGF0ZSBvZiBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyAtIFRoZSBuZXcgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfdXBkYXRlUHJvZ3Jlc3ModCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB0LCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29uc3RhbnQgdXNlZCB0byBpbmRpY2F0ZSB0aGUgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbiBzaG91bGQgYmUgZGlzYWJsZWQuXG4gKiBTZXQgdGhpcyB2YWx1ZSBhcyB0aGUgYGNhY2hlU2l6ZUJ5dGVzYCBvbiB0aGUgc2V0dGluZ3MgcGFzc2VkIHRvIHRoZVxuICoge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gY29uc3QgQWggPSAtMTtcblxuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKi8gY2xhc3MgdmggZXh0ZW5kcyBoaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBuZXcgSWgsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gKG51bGwgPT0gcyA/IHZvaWQgMCA6IHMubmFtZSkgfHwgXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCB8fCBcbiAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSVxuICAgICAgICAvLyB1c2FnZSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICBWaCh0aGlzKSwgdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB7QGxpbmsgRmlyZXN0b3JlfSB3aXRoIHRoZSBwcm92aWRlZCBzZXR0aW5ncy5cbiAqIENhbiBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9uLCBpbmNsdWRpbmdcbiAqIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS4gSWYgdGhlIGN1c3RvbSBzZXR0aW5ncyBhcmUgZW1wdHksIHRoaXMgZnVuY3Rpb24gaXNcbiAqIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gd2l0aCB3aGljaCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogYmUgYXNzb2NpYXRlZC5cbiAqIEBwYXJhbSBzZXR0aW5ncyAtIEEgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBuYW1lIG9mIGRhdGFiYXNlLlxuICogQHJldHVybnMgQSBuZXdseSBpbml0aWFsaXplZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBmdW5jdGlvbiBSaCh0LCBlLCBuKSB7XG4gICAgbiB8fCAobiA9IFwiKGRlZmF1bHQpXCIpO1xuICAgIGNvbnN0IHMgPSBfZ2V0UHJvdmlkZXIodCwgXCJmaXJlc3RvcmVcIik7XG4gICAgaWYgKHMuaXNJbml0aWFsaXplZChuKSkge1xuICAgICAgICBjb25zdCB0ID0gcy5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgaWRlbnRpZmllcjogblxuICAgICAgICB9KSwgaSA9IHMuZ2V0T3B0aW9ucyhuKTtcbiAgICAgICAgaWYgKGRlZXBFcXVhbChpLCBlKSkgcmV0dXJuIHQ7XG4gICAgICAgIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJpbml0aWFsaXplRmlyZXN0b3JlKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplRmlyZXN0b3JlKCkgd2l0aCB0aGUgc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEZpcmVzdG9yZSgpIHRvIHJldHVybiB0aGUgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS5cIik7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgdm9pZCAwICE9PSBlLmxvY2FsQ2FjaGUpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZSBhbmQgY2FjaGVTaXplQnl0ZXMgY2Fubm90IGJlIHNwZWNpZmllZCBhdCB0aGUgc2FtZSB0aW1lIGFzIGNhY2hlU2l6ZUJ5dGVzIHdpbGxiZSBkZXByZWNhdGVkLiBJbnN0ZWFkLCBzcGVjaWZ5IHRoZSBjYWNoZSBzaXplIGluIHRoZSBjYWNoZSBvYmplY3RcIik7XG4gICAgaWYgKHZvaWQgMCAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiAtMSAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiBlLmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICByZXR1cm4gcy5pbml0aWFsaXplKHtcbiAgICAgICAgb3B0aW9uczogZSxcbiAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBuXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIFBoKGUsIG4pIHtcbiAgICBjb25zdCBzID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSA/IGUgOiBnZXRBcHAoKSwgaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBlIDogbiB8fCBcIihkZWZhdWx0KVwiLCByID0gX2dldFByb3ZpZGVyKHMsIFwiZmlyZXN0b3JlXCIpLmdldEltbWVkaWF0ZSh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlcbiAgICB9KTtcbiAgICBpZiAoIXIuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIGNvbnN0IHQgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQoXCJmaXJlc3RvcmVcIik7XG4gICAgICAgIHQgJiYgbGgociwgLi4udCk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGJoKHQpIHtcbiAgICByZXR1cm4gdC5fZmlyZXN0b3JlQ2xpZW50IHx8IFZoKHQpLCB0Ll9maXJlc3RvcmVDbGllbnQudmVyaWZ5Tm90VGVybWluYXRlZCgpLCB0Ll9maXJlc3RvcmVDbGllbnQ7XG59XG5cbmZ1bmN0aW9uIFZoKHQpIHtcbiAgICB2YXIgZSwgbiwgcztcbiAgICBjb25zdCBpID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgciA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyAkZSh0LCBlLCBuLCBzLmhvc3QsIHMuc3NsLCBzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCB0aChzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyksIHMudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KHQuX2RhdGFiYXNlSWQsIChudWxsID09PSAoZSA9IHQuX2FwcCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCB0Ll9wZXJzaXN0ZW5jZUtleSwgaSk7XG4gICAgdC5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IHhhKHQuX2F1dGhDcmVkZW50aWFscywgdC5fYXBwQ2hlY2tDcmVkZW50aWFscywgdC5fcXVldWUsIHIpLCBcbiAgICAobnVsbCA9PT0gKG4gPSBpLmNhY2hlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIpICYmIChudWxsID09PSAocyA9IGkuY2FjaGUpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyKSAmJiAodC5fZmlyZXN0b3JlQ2xpZW50Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyID0ge1xuICAgICAgICBfb2ZmbGluZUtpbmQ6IGkuY2FjaGUua2luZCxcbiAgICAgICAgX29mZmxpbmU6IGkuY2FjaGUuX29mZmxpbmVDb21wb25lbnRQcm92aWRlcixcbiAgICAgICAgX29ubGluZTogaS5jYWNoZS5fb25saW5lQ29tcG9uZW50UHJvdmlkZXJcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhblxuICoge0BsaW5rIGluaXRpYWxpemVGaXJlc3RvcmV9LCB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2UgaXRcbiAqIHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFBlcnNpc3RlbmNlIGNhbm5vdCBiZSB1c2VkIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcGFyYW0gcGVyc2lzdGVuY2VTZXR0aW5ncyAtIE9wdGlvbmFsIHNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmVcbiAqIHBlcnNpc3RlbmNlLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50IHN0b3JhZ2UuXG4gKiBAZGVwcmVjYXRlZCBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciByZWxlYXNlLiBJbnN0ZWFkLCBzZXRcbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgdG8gYW4gaW5zdGFuY2Ugb2YgYEluZGV4ZWREYkxvY2FsQ2FjaGVgIHRvXG4gKiB0dXJuIG9uIEluZGV4ZWREYiBjYWNoZS4gQ2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdoZW4gYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYFxuICogaXMgYWxyZWFkeSBzcGVjaWZpZWQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKi8gZnVuY3Rpb24gU2godCwgZSkge1xuICAgIEJoKHQgPSB1aCh0LCB2aCkpO1xuICAgIGNvbnN0IG4gPSBiaCh0KTtcbiAgICBpZiAobi5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlNESyBjYWNoZSBpcyBhbHJlYWR5IHNwZWNpZmllZC5cIik7XG4gICAgTShcImVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKCkgd2lsbCBiZSBkZXByZWNhdGVkIGluIHRoZSBmdXR1cmUsIHlvdSBjYW4gdXNlIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgaW5zdGVhZC5cIik7XG4gICAgY29uc3QgcyA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIGkgPSBuZXcgUGE7XG4gICAgcmV0dXJuIENoKG4sIGksIG5ldyB2YShpLCBzLmNhY2hlU2l6ZUJ5dGVzLCBudWxsID09IGUgPyB2b2lkIDAgOiBlLmZvcmNlT3duZXJzaGlwKSk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIG11bHRpLXRhYiBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLiBJZiBlbmFibGVkXG4gKiBhY3Jvc3MgYWxsIHRhYnMsIGFsbCBvcGVyYXRpb25zIHNoYXJlIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZSwgaW5jbHVkaW5nXG4gKiBzaGFyZWQgZXhlY3V0aW9uIG9mIHF1ZXJpZXMgYW5kIGxhdGVuY3ktY29tcGVuc2F0ZWQgbG9jYWwgZG9jdW1lbnQgdXBkYXRlc1xuICogYWNyb3NzIGFsbCBjb25uZWN0ZWQgaW5zdGFuY2VzLlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlXG4gKiBpdCByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIgYW5kXG4gKiAgICAgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50XG4gKiBzdG9yYWdlLlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gSW5zdGVhZCwgc2V0XG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIGFuIGluc3RhbmNlIG9mIGBJbmRleGVkRGJMb2NhbENhY2hlYCB0b1xuICogdHVybiBvbiBpbmRleGVkZGIgY2FjaGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aGVuIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWBcbiAqIGlzIGFscmVhZHkgc3BlY2lmaWVkIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uLlxuICovIGZ1bmN0aW9uIERoKHQpIHtcbiAgICBCaCh0ID0gdWgodCwgdmgpKTtcbiAgICBjb25zdCBlID0gYmgodCk7XG4gICAgaWYgKGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJTREsgY2FjaGUgaXMgYWxyZWFkeSBzcGVjaWZpZWQuXCIpO1xuICAgIE0oXCJlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKCkgd2lsbCBiZSBkZXByZWNhdGVkIGluIHRoZSBmdXR1cmUsIHlvdSBjYW4gdXNlIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgaW5zdGVhZC5cIik7XG4gICAgY29uc3QgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBuZXcgUGE7XG4gICAgcmV0dXJuIENoKGUsIHMsIG5ldyBSYShzLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gQ2godCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IE5hKHQsIG4pLCBhd2FpdCBrYSh0LCBlKSwgcy5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0O1xuICAgICAgICAgICAgaWYgKCFNYShlKSkgdGhyb3cgZTtcbiAgICAgICAgICAgIE0oXCJFcnJvciBlbmFibGluZyBpbmRleGVkZGIgY2FjaGUuIEZhbGxpbmcgYmFjayB0byBtZW1vcnkgY2FjaGU6IFwiICsgZSksIHMucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHMucHJvbWlzZSkpO1xufVxuXG4vKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfSkpLiBJZiB0aGUge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIHN0aWxsIHJ1bm5pbmcsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgZXJyb3IgY29kZVxuICogb2YgYGZhaWxlZC1wcmVjb25kaXRpb25gLlxuICpcbiAqIE5vdGU6IGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGlzIHByaW1hcmlseSBpbnRlbmRlZCB0byBoZWxwIHdyaXRlXG4gKiByZWxpYWJsZSB0ZXN0cyB0aGF0IHVzZSBDbG91ZCBGaXJlc3RvcmUuIEl0IHVzZXMgYW4gZWZmaWNpZW50IG1lY2hhbmlzbSBmb3JcbiAqIGRyb3BwaW5nIGV4aXN0aW5nIGRhdGEgYnV0IGRvZXMgbm90IGF0dGVtcHQgdG8gc2VjdXJlbHkgb3ZlcndyaXRlIG9yXG4gKiBvdGhlcndpc2UgbWFrZSBjYWNoZWQgZGF0YSB1bnJlY292ZXJhYmxlLiBGb3IgYXBwbGljYXRpb25zIHRoYXQgYXJlIHNlbnNpdGl2ZVxuICogdG8gdGhlIGRpc2Nsb3N1cmUgb2YgY2FjaGVkIGRhdGEgaW4gYmV0d2VlbiB1c2VyIHNlc3Npb25zLCB3ZSBzdHJvbmdseVxuICogcmVjb21tZW5kIG5vdCBlbmFibGluZyBwZXJzaXN0ZW5jZSBhdCBhbGwuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBjbGVhciBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHBlcnNpc3RlbnQgc3RvcmFnZSBpc1xuICogY2xlYXJlZC4gT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICovIGZ1bmN0aW9uIHhoKHQpIHtcbiAgICBpZiAodC5faW5pdGlhbGl6ZWQgJiYgIXQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJQZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBjbGVhcmVkIGJlZm9yZSBhIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZCBvciBhZnRlciBpdCBpcyB0ZXJtaW5hdGVkLlwiKTtcbiAgICBjb25zdCBlID0gbmV3IEs7XG4gICAgcmV0dXJuIHQuX3F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFidC5EKCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdCArIFwibWFpblwiO1xuICAgICAgICAgICAgICAgIGF3YWl0IGJ0LmRlbGV0ZShlKTtcbiAgICAgICAgICAgIH0oWm8odC5fZGF0YWJhc2VJZCwgdC5fcGVyc2lzdGVuY2VLZXkpKSwgZS5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGUucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLCBlLnByb21pc2U7XG59XG5cbi8qKlxuICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBmb3IgdGhlIGFjdGl2ZSB1c2VyIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICpcbiAqIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIGltbWVkaWF0ZWx5IGlmIHRoZXJlIGFyZSBubyBvdXRzdGFuZGluZyB3cml0ZXMuXG4gKiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIHdhaXRzIGZvciBhbGwgcHJldmlvdXNseSBpc3N1ZWQgd3JpdGVzIChpbmNsdWRpbmdcbiAqIHRob3NlIHdyaXR0ZW4gaW4gYSBwcmV2aW91cyBhcHAgc2Vzc2lvbiksIGJ1dCBpdCBkb2VzIG5vdCB3YWl0IGZvciB3cml0ZXNcbiAqIHRoYXQgd2VyZSBhZGRlZCBhZnRlciB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkLiBJZiB5b3Ugd2FudCB0byB3YWl0IGZvclxuICogYWRkaXRpb25hbCB3cml0ZXMsIGNhbGwgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIGFnYWluLlxuICpcbiAqIEFueSBvdXRzdGFuZGluZyBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgcHJvbWlzZXMgYXJlIHJlamVjdGVkIGR1cmluZyB1c2VyXG4gKiBjaGFuZ2VzLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiBOaCh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IFpjKGF3YWl0IHFhKHQpLCBlKSkpLCBlLnByb21pc2U7XG4gICAgfShiaCh0ID0gdWgodCwgdmgpKSk7XG59XG5cbi8qKlxuICogUmUtZW5hYmxlcyB1c2Ugb2YgdGhlIG5ldHdvcmsgZm9yIHRoaXMge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgYWZ0ZXIgYSBwcmlvclxuICogY2FsbCB0byB7QGxpbmsgZGlzYWJsZU5ldHdvcmt9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBlbmFibGVkLlxuICovIGZ1bmN0aW9uIGtoKHQpIHtcbiAgICByZXR1cm4gR2EoYmgodCA9IHVoKHQsIHZoKSkpO1xufVxuXG4vKipcbiAqIERpc2FibGVzIG5ldHdvcmsgdXNhZ2UgZm9yIHRoaXMgaW5zdGFuY2UuIEl0IGNhbiBiZSByZS1lbmFibGVkIHZpYSB7QGxpbmtcbiAqIGVuYWJsZU5ldHdvcmt9LiBXaGlsZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCwgYW55IHNuYXBzaG90IGxpc3RlbmVycyxcbiAqIGBnZXREb2MoKWAgb3IgYGdldERvY3MoKWAgY2FsbHMgd2lsbCByZXR1cm4gcmVzdWx0cyBmcm9tIGNhY2hlLCBhbmQgYW55IHdyaXRlXG4gKiBvcGVyYXRpb25zIHdpbGwgYmUgcXVldWVkIHVudGlsIHRoZSBuZXR3b3JrIGlzIHJlc3RvcmVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBkaXNhYmxlZC5cbiAqLyBmdW5jdGlvbiBNaCh0KSB7XG4gICAgcmV0dXJuIFFhKGJoKHQgPSB1aCh0LCB2aCkpKTtcbn1cblxuLyoqXG4gKiBUZXJtaW5hdGVzIHRoZSBwcm92aWRlZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgb25seSB0aGUgYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgZnVuY3Rpb25cbiAqIG1heSBiZSB1c2VkLiBBbnkgb3RoZXIgZnVuY3Rpb24gd2lsbCB0aHJvdyBhIGBGaXJlc3RvcmVFcnJvcmAuXG4gKlxuICogVG8gcmVzdGFydCBhZnRlciB0ZXJtaW5hdGlvbiwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEZpcmViYXNlRmlyZXN0b3JlIHdpdGhcbiAqIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqXG4gKiBUZXJtaW5hdGlvbiBkb2VzIG5vdCBjYW5jZWwgYW55IHBlbmRpbmcgd3JpdGVzLCBhbmQgYW55IHByb21pc2VzIHRoYXQgYXJlXG4gKiBhd2FpdGluZyBhIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciB3aWxsIG5vdCBiZSByZXNvbHZlZC4gSWYgeW91IGhhdmVcbiAqIHBlcnNpc3RlbmNlIGVuYWJsZWQsIHRoZSBuZXh0IHRpbWUgeW91IHN0YXJ0IHRoaXMgaW5zdGFuY2UsIGl0IHdpbGwgcmVzdW1lXG4gKiBzZW5kaW5nIHRoZXNlIHdyaXRlcyB0byB0aGUgc2VydmVyLlxuICpcbiAqIE5vdGU6IFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgaXMgbm90IHJlcXVpcmVkLiBUaGlzXG4gKiBmdW5jdGlvbiBpcyB1c2VmdWwgb25seSB3aGVuIHlvdSB3YW50IHRvIGZvcmNlIHRoaXMgaW5zdGFuY2UgdG8gcmVsZWFzZSBhbGxcbiAqIG9mIGl0cyByZXNvdXJjZXMgb3IgaW4gY29tYmluYXRpb24gd2l0aCBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB0b1xuICogZW5zdXJlIHRoYXQgYWxsIGxvY2FsIHN0YXRlIGlzIGRlc3Ryb3llZCBiZXR3ZWVuIHRlc3QgcnVucy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIGluc3RhbmNlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogdGVybWluYXRlZC5cbiAqLyBmdW5jdGlvbiAkaCh0KSB7XG4gICAgcmV0dXJuIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UodC5hcHAsIFwiZmlyZXN0b3JlXCIsIHQuX2RhdGFiYXNlSWQuZGF0YWJhc2UpLCB0Ll9kZWxldGUoKTtcbn1cblxuLyoqXG4gKiBMb2FkcyBhIEZpcmVzdG9yZSBidW5kbGUgaW50byB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBsb2FkIGJ1bmRsZXMgZm9yLlxuICogQHBhcmFtIGJ1bmRsZURhdGEgLSBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBidW5kbGUgdG8gYmUgbG9hZGVkLiBWYWxpZFxuICogb2JqZWN0cyBhcmUgYEFycmF5QnVmZmVyYCwgYFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+YCBvciBgc3RyaW5nYC5cbiAqXG4gKiBAcmV0dXJucyBBIGBMb2FkQnVuZGxlVGFza2Agb2JqZWN0LCB3aGljaCBub3RpZmllcyBjYWxsZXJzIHdpdGggcHJvZ3Jlc3NcbiAqIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYVxuICogYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz5gLlxuICovIGZ1bmN0aW9uIE9oKHQsIGUpIHtcbiAgICBjb25zdCBuID0gYmgodCA9IHVoKHQsIHZoKSksIHMgPSBuZXcgRWg7XG4gICAgcmV0dXJuIFlhKG4sIHQuX2RhdGFiYXNlSWQsIGUsIHMpLCBzO1xufVxuXG4vKipcbiAqIFJlYWRzIGEgRmlyZXN0b3JlIHtAbGluayBRdWVyeX0gZnJvbSBsb2NhbCBjYWNoZSwgaWRlbnRpZmllZCBieSB0aGUgZ2l2ZW5cbiAqIG5hbWUuXG4gKlxuICogVGhlIG5hbWVkIHF1ZXJpZXMgYXJlIHBhY2thZ2VkICBpbnRvIGJ1bmRsZXMgb24gdGhlIHNlcnZlciBzaWRlIChhbG9uZ1xuICogd2l0aCByZXN1bHRpbmcgZG9jdW1lbnRzKSwgYW5kIGxvYWRlZCB0byBsb2NhbCBjYWNoZSB1c2luZyBgbG9hZEJ1bmRsZWAuIE9uY2VcbiAqIGluIGxvY2FsIGNhY2hlLCB1c2UgdGhpcyBtZXRob2QgdG8gZXh0cmFjdCBhIHtAbGluayBRdWVyeX0gYnkgbmFtZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIHJlYWQgdGhlIHF1ZXJ5IGZyb20uXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgUXVlcnkgb3IgYG51bGxgLlxuICovIGZ1bmN0aW9uIEZoKHQsIGUpIHtcbiAgICByZXR1cm4gWGEoYmgodCA9IHVoKHQsIHZoKSksIGUpLnRoZW4oKGUgPT4gZSA/IG5ldyBkaCh0LCBudWxsLCBlLnF1ZXJ5KSA6IG51bGwpKTtcbn1cblxuZnVuY3Rpb24gQmgodCkge1xuICAgIGlmICh0Ll9pbml0aWFsaXplZCB8fCB0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgcGVyc2lzdGVuY2UgY2FuIG5vIGxvbmdlciBiZSBlbmFibGVkLiBZb3UgY2FuIG9ubHkgZW5hYmxlIHBlcnNpc3RlbmNlIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGFnZ3JlZ2F0aW9uIHRoYXQgY2FuIGJlIHBlcmZvcm1lZCBieSBGaXJlc3RvcmUuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbmNsYXNzIExoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgQWdncmVnYXRlRmllbGQ8VD5cbiAgICAgKiBAcGFyYW0gX2FnZ3JlZ2F0ZVR5cGUgU3BlY2lmaWVzIHRoZSB0eXBlIG9mIGFnZ3JlZ2F0aW9uIG9wZXJhdGlvbiB0byBwZXJmb3JtLlxuICAgICAqIEBwYXJhbSBfaW50ZXJuYWxGaWVsZFBhdGggT3B0aW9uYWxseSBzcGVjaWZpZXMgdGhlIGZpZWxkIHRoYXQgaXMgYWdncmVnYXRlZC5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBUT0RPIChzdW0vYXZnKSBtYWtlIGFnZ3JlZ2F0ZVR5cGUgcHVibGljIHdoZW4gdGhlIGZlYXR1cmUgaXMgc3VwcG9ydGVkXG4gICAgdCA9IFwiY291bnRcIiwgZSkge1xuICAgICAgICB0aGlzLl9hZ2dyZWdhdGVUeXBlID0gdCwgdGhpcy5faW50ZXJuYWxGaWVsZFBhdGggPSBlLCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiQWdncmVnYXRlRmllbGRcIjtcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIHJlc3VsdHMgb2YgZXhlY3V0aW5nIGFuIGFnZ3JlZ2F0aW9uIHF1ZXJ5LlxuICovIGNsYXNzIHFoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9kYXRhID0gbiwgXG4gICAgICAgIC8qKiBBIHR5cGUgc3RyaW5nIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIkFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RcIiwgdGhpcy5xdWVyeSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdHMgb2YgdGhlIGFnZ3JlZ2F0aW9ucyBwZXJmb3JtZWQgb3ZlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIHF1ZXJ5LlxuICAgICAqXG4gICAgICogVGhlIGtleXMgb2YgdGhlIHJldHVybmVkIG9iamVjdCB3aWxsIGJlIHRoZSBzYW1lIGFzIHRob3NlIG9mIHRoZVxuICAgICAqIGBBZ2dyZWdhdGVTcGVjYCBvYmplY3Qgc3BlY2lmaWVkIHRvIHRoZSBhZ2dyZWdhdGlvbiBtZXRob2QsIGFuZCB0aGUgdmFsdWVzXG4gICAgICogd2lsbCBiZSB0aGUgY29ycmVzcG9uZGluZyBhZ2dyZWdhdGlvbiByZXN1bHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0cyBvZiB0aGUgYWdncmVnYXRpb25zIHBlcmZvcm1lZCBvdmVyIHRoZSB1bmRlcmx5aW5nXG4gICAgICogcXVlcnkuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0T2JqZWN0TWFwKHRoaXMuX2RhdGEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgVWgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVoKFZlLmZyb21CYXNlNjRTdHJpbmcodCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVWgoVmUuZnJvbVVpbnQ4QXJyYXkodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKHQuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRmllbGRQYXRoYCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhXG4gKiBzaW5nbGUgZmllbGQgbmFtZSAocmVmZXJyaW5nIHRvIGEgdG9wLWxldmVsIGZpZWxkIGluIHRoZSBkb2N1bWVudCksIG9yIGFcbiAqIGxpc3Qgb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxuICpcbiAqIENyZWF0ZSBhIGBGaWVsZFBhdGhgIGJ5IHByb3ZpZGluZyBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICovIGNsYXNzIEtoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYEZpZWxkUGF0aGAgZnJvbSB0aGUgcHJvdmlkZWQgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAgICAgKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGROYW1lcyAtIEEgbGlzdCBvZiBmaWVsZCBuYW1lcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciguLi50KSB7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGg7ICsrZSkgaWYgKDAgPT09IHRbZV0ubGVuZ3RoKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBuYW1lIGF0IGFyZ3VtZW50ICQoaSArIDEpLiBGaWVsZCBuYW1lcyBtdXN0IG5vdCBiZSBlbXB0eS5cIik7XG4gICAgICAgIHRoaXMuX2ludGVybmFsUGF0aCA9IG5ldyBhdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgRmllbGRQYXRoYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxQYXRoLmlzRXF1YWwodC5faW50ZXJuYWxQYXRoKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgc2VudGluZWwgYEZpZWxkUGF0aGAgdG8gcmVmZXIgdG8gdGhlIElEIG9mIGEgZG9jdW1lbnQuXG4gKiBJdCBjYW4gYmUgdXNlZCBpbiBxdWVyaWVzIHRvIHNvcnQgb3IgZmlsdGVyIGJ5IHRoZSBkb2N1bWVudCBJRC5cbiAqLyBmdW5jdGlvbiBHaCgpIHtcbiAgICByZXR1cm4gbmV3IEtoKFwiX19uYW1lX19cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNlbnRpbmVsIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIHdoZW4gd3JpdGluZyBkb2N1bWVudCBmaWVsZHMgd2l0aCBgc2V0KClgXG4gKiBvciBgdXBkYXRlKClgLlxuICovIGNsYXNzIFFoIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gX21ldGhvZE5hbWUgLSBUaGUgcHVibGljIEFQSSBlbmRwb2ludCB0aGF0IHJldHVybnMgdGhpcyBjbGFzcy5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9tZXRob2ROYW1lID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGEgZ2VvZ3JhcGhpYyBsb2NhdGlvbiBpbiBGaXJlc3RvcmUuIFRoZVxuICogbG9jYXRpb24gaXMgcmVwcmVzZW50ZWQgYXMgbGF0aXR1ZGUvbG9uZ2l0dWRlIHBhaXIuXG4gKlxuICogTGF0aXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy05MCwgOTBdLlxuICogTG9uZ2l0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstMTgwLCAxODBdLlxuICovIGNsYXNzIGpoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGltbXV0YWJsZSBgR2VvUG9pbnRgIG9iamVjdCB3aXRoIHRoZSBwcm92aWRlZCBsYXRpdHVkZSBhbmRcbiAgICAgKiBsb25naXR1ZGUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBsYXRpdHVkZSAtIFRoZSBsYXRpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLlxuICAgICAqIEBwYXJhbSBsb25naXR1ZGUgLSBUaGUgbG9uZ2l0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIGlmICghaXNGaW5pdGUodCkgfHwgdCA8IC05MCB8fCB0ID4gOTApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJMYXRpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MCwgYnV0IHdhczogXCIgKyB0KTtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShlKSB8fCBlIDwgLTE4MCB8fCBlID4gMTgwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiTG9uZ2l0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAsIGJ1dCB3YXM6IFwiICsgZSk7XG4gICAgICAgIHRoaXMuX2xhdCA9IHQsIHRoaXMuX2xvbmcgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGF0aXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbGF0aXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsb25naXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbG9uZ2l0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9uZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBHZW9Qb2ludGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0ID09PSB0Ll9sYXQgJiYgdGhpcy5fbG9uZyA9PT0gdC5fbG9uZztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEdlb1BvaW50LiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogdGhpcy5fbGF0LFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiB0aGlzLl9sb25nXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdHVhbGx5IHByaXZhdGUgdG8gSlMgY29uc3VtZXJzIG9mIG91ciBBUEksIHNvIHRoaXMgZnVuY3Rpb24gaXMgcHJlZml4ZWRcbiAgICAgKiB3aXRoIGFuIHVuZGVyc2NvcmUuXG4gICAgICovICAgIF9jb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gZXQodGhpcy5fbGF0LCB0Ll9sYXQpIHx8IGV0KHRoaXMuX2xvbmcsIHQuX2xvbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgemggPSAvXl9fLipfXyQvO1xuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIGRvY3VtZW50IGRhdGEgKGUuZy4gZm9yIGEgc2V0RGF0YSBjYWxsKS4gKi8gY2xhc3MgV2gge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5maWVsZE1hc2sgPyBuZXcgenModCwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpIDogbmV3IGpzKHQsIHRoaXMuZGF0YSwgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBcInVwZGF0ZVwiIGRhdGEgKGkuZS4gZm9yIGFuIHVwZGF0ZURhdGEgY2FsbCkuICovIGNsYXNzIEhoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBUaGUgZmllbGRNYXNrIGRvZXMgbm90IGluY2x1ZGUgZG9jdW1lbnQgdHJhbnNmb3Jtcy5cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB6cyh0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBKaCh0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDAgLyogVXNlckRhdGFTb3VyY2UuU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovIDpcbiAgICAgIGNhc2UgNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxufVxuXG4vKiogQSBcImNvbnRleHRcIiBvYmplY3QgcGFzc2VkIGFyb3VuZCB3aGlsZSBwYXJzaW5nIHVzZXIgZGF0YS4gKi8gY2xhc3MgWWgge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUGFyc2VDb250ZXh0IHdpdGggdGhlIGdpdmVuIHNvdXJjZSBhbmQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyAtIFRoZSBzZXR0aW5ncyBmb3IgdGhlIHBhcnNlci5cbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSBJRCBvZiB0aGUgRmlyZXN0b3JlIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHRvIGdlbmVyYXRlIHRoZSBWYWx1ZSBwcm90by5cbiAgICAgKiBAcGFyYW0gaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAtIFdoZXRoZXIgdG8gaWdub3JlIHVuZGVmaW5lZCBwcm9wZXJ0aWVzXG4gICAgICogcmF0aGVyIHRoYW4gdGhyb3cuXG4gICAgICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHRyYW5zZm9ybXMgZW5jb3VudGVyZWRcbiAgICAgKiB3aGlsZSBwYXJzaW5nIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBmaWVsZE1hc2sgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCBwYXRocyBlbmNvdW50ZXJlZCB3aGlsZSBwYXJzaW5nXG4gICAgICogdGhlIGRhdGEuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdywgc28gcGF0aCBjYW4gYmVcbiAgICAgKiBudWxsIHRvIGluZGljYXRlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgYW55IGxvY2F0aW9uIHdpdGhpbiBhbiBhcnJheSAoaW5cbiAgICAgKiB3aGljaCBjYXNlIGNlcnRhaW4gZmVhdHVyZXMgd2lsbCBub3Qgd29yayBhbmQgZXJyb3JzIHdpbGwgYmUgc29tZXdoYXRcbiAgICAgKiBjb21wcm9taXNlZCkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gZSwgdGhpcy5zZXJpYWxpemVyID0gbiwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gcywgXG4gICAgICAgIC8vIE1pbm9yIGhhY2s6IElmIGZpZWxkVHJhbnNmb3JtcyBpcyB1bmRlZmluZWQsIHdlIGFzc3VtZSB0aGlzIGlzIGFuXG4gICAgICAgIC8vIGV4dGVybmFsIGNhbGwgYW5kIHdlIG5lZWQgdG8gdmFsaWRhdGUgdGhlIGVudGlyZSBwYXRoLlxuICAgICAgICB2b2lkIDAgPT09IGkgJiYgdGhpcy51YSgpLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGkgfHwgW10sIHRoaXMuZmllbGRNYXNrID0gciB8fCBbXTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBhdGg7XG4gICAgfVxuICAgIGdldCBjYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuY2E7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbmV3IGNvbnRleHQgd2l0aCB0aGUgc3BlY2lmaWVkIHNldHRpbmdzIG92ZXJ3cml0dGVuLiAqLyAgICBhYSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgWWgoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNldHRpbmdzKSwgdCksIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XG4gICAgfVxuICAgIGhhKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAoZSA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jaGlsZCh0KSwgcyA9IHRoaXMuYWEoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIGxhOiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHMuZmEodCksIHM7XG4gICAgfVxuICAgIGRhKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAoZSA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jaGlsZCh0KSwgcyA9IHRoaXMuYWEoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIGxhOiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHMudWEoKSwgcztcbiAgICB9XG4gICAgd2EodCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdzsgc28gbWFrZSBwYXRoXG4gICAgICAgIC8vIHVuZGVmaW5lZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuYWEoe1xuICAgICAgICAgICAgcGF0aDogdm9pZCAwLFxuICAgICAgICAgICAgbGE6ICEwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYSh0KSB7XG4gICAgICAgIHJldHVybiBnbCh0LCB0aGlzLnNldHRpbmdzLm1ldGhvZE5hbWUsIHRoaXMuc2V0dGluZ3MubWEgfHwgITEsIHRoaXMucGF0aCwgdGhpcy5zZXR0aW5ncy5nYSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiAnZmllbGRQYXRoJyB3YXMgdHJhdmVyc2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBjb250ZXh0LiAqLyAgICBjb250YWlucyh0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZmllbGRNYXNrLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUpKSkgfHwgdm9pZCAwICE9PSB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5maW5kKChlID0+IHQuaXNQcmVmaXhPZihlLmZpZWxkKSkpO1xuICAgIH1cbiAgICB1YSgpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogUmVtb3ZlIG51bGwgY2hlY2sgb25jZSB3ZSBoYXZlIHByb3BlciBwYXRocyBmb3IgZmllbGRzXG4gICAgICAgIC8vIHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICh0aGlzLnBhdGgpIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5wYXRoLmxlbmd0aDsgdCsrKSB0aGlzLmZhKHRoaXMucGF0aC5nZXQodCkpO1xuICAgIH1cbiAgICBmYSh0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgdGhyb3cgdGhpcy5fYShcIkRvY3VtZW50IGZpZWxkcyBtdXN0IG5vdCBiZSBlbXB0eVwiKTtcbiAgICAgICAgaWYgKEpoKHRoaXMuY2EpICYmIHpoLnRlc3QodCkpIHRocm93IHRoaXMuX2EoJ0RvY3VtZW50IGZpZWxkcyBjYW5ub3QgYmVnaW4gYW5kIGVuZCB3aXRoIFwiX19cIicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZm9yIHBhcnNpbmcgcmF3IHVzZXIgaW5wdXQgKHByb3ZpZGVkIHZpYSB0aGUgQVBJKSBpbnRvIGludGVybmFsIG1vZGVsXG4gKiBjbGFzc2VzLlxuICovIGNsYXNzIFhoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IGUsIHRoaXMuc2VyaWFsaXplciA9IG4gfHwgRnUodCk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRvcC1sZXZlbCBwYXJzZSBjb250ZXh0LiAqLyAgICB5YSh0LCBlLCBuLCBzID0gITEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBZaCh7XG4gICAgICAgICAgICBjYTogdCxcbiAgICAgICAgICAgIG1ldGhvZE5hbWU6IGUsXG4gICAgICAgICAgICBnYTogbixcbiAgICAgICAgICAgIHBhdGg6IGF0LmVtcHR5UGF0aCgpLFxuICAgICAgICAgICAgbGE6ICExLFxuICAgICAgICAgICAgbWE6IHNcbiAgICAgICAgfSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBaaCh0KSB7XG4gICAgY29uc3QgZSA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIG4gPSBGdSh0Ll9kYXRhYmFzZUlkKTtcbiAgICByZXR1cm4gbmV3IFhoKHQuX2RhdGFiYXNlSWQsICEhZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBuKTtcbn1cblxuLyoqIFBhcnNlIGRvY3VtZW50IGRhdGEgZnJvbSBhIHNldCgpIGNhbGwuICovIGZ1bmN0aW9uIHRsKHQsIGUsIG4sIHMsIGksIHIgPSB7fSkge1xuICAgIGNvbnN0IG8gPSB0LnlhKHIubWVyZ2UgfHwgci5tZXJnZUZpZWxkcyA/IDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gOiAwIC8qIFVzZXJEYXRhU291cmNlLlNldCAqLyAsIGUsIG4sIGkpO1xuICAgIGRsKFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgbywgcyk7XG4gICAgY29uc3QgdSA9IGxsKHMsIG8pO1xuICAgIGxldCBjLCBhO1xuICAgIGlmIChyLm1lcmdlKSBjID0gbmV3IFJlKG8uZmllbGRNYXNrKSwgYSA9IG8uZmllbGRUcmFuc2Zvcm1zOyBlbHNlIGlmIChyLm1lcmdlRmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB3bChlLCBzLCBuKTtcbiAgICAgICAgICAgIGlmICghby5jb250YWlucyhpKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRmllbGQgJyR7aX0nIGlzIHNwZWNpZmllZCBpbiB5b3VyIGZpZWxkIG1hc2sgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGlucHV0IGRhdGEuYCk7XG4gICAgICAgICAgICB5bCh0LCBpKSB8fCB0LnB1c2goaSk7XG4gICAgICAgIH1cbiAgICAgICAgYyA9IG5ldyBSZSh0KSwgYSA9IG8uZmllbGRUcmFuc2Zvcm1zLmZpbHRlcigodCA9PiBjLmNvdmVycyh0LmZpZWxkKSkpO1xuICAgIH0gZWxzZSBjID0gbnVsbCwgYSA9IG8uZmllbGRUcmFuc2Zvcm1zO1xuICAgIHJldHVybiBuZXcgV2gobmV3IHVuKHUpLCBjLCBhKTtcbn1cblxuY2xhc3MgZWwgZXh0ZW5kcyBRaCB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBpZiAoMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyAhPT0gdC5jYSkgdGhyb3cgMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gPT09IHQuY2EgPyB0Ll9hKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYXBwZWFyIGF0IHRoZSB0b3AgbGV2ZWwgb2YgeW91ciB1cGRhdGUgZGF0YWApIDogdC5fYShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbm5vdCBiZSB1c2VkIHdpdGggc2V0KCkgdW5sZXNzIHlvdSBwYXNzIHttZXJnZTp0cnVlfWApO1xuICAgICAgICAvLyBObyB0cmFuc2Zvcm0gdG8gYWRkIGZvciBhIGRlbGV0ZSwgYnV0IHdlIG5lZWQgdG8gYWRkIGl0IHRvIG91clxuICAgICAgICAvLyBmaWVsZE1hc2sgc28gaXQgZ2V0cyBkZWxldGVkLlxuICAgICAgICByZXR1cm4gdC5maWVsZE1hc2sucHVzaCh0LnBhdGgpLCBudWxsO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBlbDtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNoaWxkIGNvbnRleHQgZm9yIHBhcnNpbmcgU2VyaWFsaXphYmxlRmllbGRWYWx1ZXMuXG4gKlxuICogVGhpcyBpcyBkaWZmZXJlbnQgdGhhbiBjYWxsaW5nIGBQYXJzZUNvbnRleHQuY29udGV4dFdpdGhgIGJlY2F1c2UgaXQga2VlcHNcbiAqIHRoZSBmaWVsZFRyYW5zZm9ybXMgYW5kIGZpZWxkTWFzayBzZXBhcmF0ZS5cbiAqXG4gKiBUaGUgY3JlYXRlZCBjb250ZXh0IGhhcyBpdHMgYGRhdGFTb3VyY2VgIHNldCB0byBgVXNlckRhdGFTb3VyY2UuQXJndW1lbnRgLlxuICogQWx0aG91Z2ggdGhlc2UgdmFsdWVzIGFyZSB1c2VkIHdpdGggd3JpdGVzLCBhbnkgZWxlbWVudHMgaW4gdGhlc2UgRmllbGRWYWx1ZXNcbiAqIGFyZSBub3QgY29uc2lkZXJlZCB3cml0ZXMgc2luY2UgdGhleSBjYW5ub3QgY29udGFpbiBhbnkgRmllbGRWYWx1ZSBzZW50aW5lbHMsXG4gKiBldGMuXG4gKlxuICogQHBhcmFtIGZpZWxkVmFsdWUgLSBUaGUgc2VudGluZWwgRmllbGRWYWx1ZSBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgY2hpbGRcbiAqICAgICBjb250ZXh0LlxuICogQHBhcmFtIGNvbnRleHQgLSBUaGUgcGFyZW50IGNvbnRleHQuXG4gKiBAcGFyYW0gYXJyYXlFbGVtZW50IC0gV2hldGhlciBvciBub3QgdGhlIEZpZWxkVmFsdWUgaGFzIGFuIGFycmF5LlxuICovIGZ1bmN0aW9uIG5sKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gbmV3IFloKHtcbiAgICAgICAgY2E6IDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gLFxuICAgICAgICBnYTogZS5zZXR0aW5ncy5nYSxcbiAgICAgICAgbWV0aG9kTmFtZTogdC5fbWV0aG9kTmFtZSxcbiAgICAgICAgbGE6IG5cbiAgICB9LCBlLmRhdGFiYXNlSWQsIGUuc2VyaWFsaXplciwgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbn1cblxuY2xhc3Mgc2wgZXh0ZW5kcyBRaCB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICByZXR1cm4gbmV3IE1zKHQucGF0aCwgbmV3IGJzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2Ygc2w7XG4gICAgfVxufVxuXG5jbGFzcyBpbCBleHRlbmRzIFFoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLnBhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gbmwodGhpcywgdCwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy5wYS5tYXAoKHQgPT4gaGwodCwgZSkpKSwgcyA9IG5ldyBWcyhuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNcyh0LnBhdGgsIHMpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBybCBleHRlbmRzIFFoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLnBhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gbmwodGhpcywgdCwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy5wYS5tYXAoKHQgPT4gaGwodCwgZSkpKSwgcyA9IG5ldyBEcyhuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNcyh0LnBhdGgsIHMpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBvbCBleHRlbmRzIFFoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLklhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IHhzKHQuc2VyaWFsaXplciwgRXModC5zZXJpYWxpemVyLCB0aGlzLklhKSk7XG4gICAgICAgIHJldHVybiBuZXcgTXModC5wYXRoLCBlKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYW4gdXBkYXRlKCkgY2FsbC4gKi8gZnVuY3Rpb24gdWwodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSB0LnlhKDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgZSwgbik7XG4gICAgZGwoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBpLCBzKTtcbiAgICBjb25zdCByID0gW10sIG8gPSB1bi5lbXB0eSgpO1xuICAgIGdlKHMsICgodCwgcykgPT4ge1xuICAgICAgICBjb25zdCB1ID0gbWwoZSwgdCwgbik7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBzID0gZ2V0TW9kdWxhckluc3RhbmNlKHMpO1xuICAgICAgICBjb25zdCBjID0gaS5kYSh1KTtcbiAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBlbCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICByLnB1c2godSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IGhsKHMsIGMpO1xuICAgICAgICAgICAgbnVsbCAhPSB0ICYmIChyLnB1c2godSksIG8uc2V0KHUsIHQpKTtcbiAgICAgICAgfVxuICAgIH0pKTtcbiAgICBjb25zdCB1ID0gbmV3IFJlKHIpO1xuICAgIHJldHVybiBuZXcgSGgobywgdSwgaS5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhIGxpc3Qgb2YgZmllbGQvdmFsdWUgYXJndW1lbnRzLiAqLyBmdW5jdGlvbiBjbCh0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgY29uc3QgbyA9IHQueWEoMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gLCBlLCBuKSwgdSA9IFsgd2woZSwgcywgbikgXSwgYyA9IFsgaSBdO1xuICAgIGlmIChyLmxlbmd0aCAlIDIgIT0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIG5hbWVzIGFuZCB2YWx1ZXMuYCk7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCArPSAyKSB1LnB1c2god2woZSwgclt0XSkpLCBjLnB1c2goclt0ICsgMV0pO1xuICAgIGNvbnN0IGEgPSBbXSwgaCA9IHVuLmVtcHR5KCk7XG4gICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIHRvIHBpY2sgdGhlIGxhc3QgdmFsdWUgZm9yIGEgZmllbGQgaWYgdGhlXG4gICAgLy8gdXNlciBzcGVjaWZpZWQgdGhlIGZpZWxkIG11bHRpcGxlIHRpbWVzLlxuICAgIGZvciAobGV0IHQgPSB1Lmxlbmd0aCAtIDE7IHQgPj0gMDsgLS10KSBpZiAoIXlsKGEsIHVbdF0pKSB7XG4gICAgICAgIGNvbnN0IGUgPSB1W3RdO1xuICAgICAgICBsZXQgbiA9IGNbdF07XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pO1xuICAgICAgICBjb25zdCBzID0gby5kYShlKTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBlbCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICBhLnB1c2goZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IGhsKG4sIHMpO1xuICAgICAgICAgICAgbnVsbCAhPSB0ICYmIChhLnB1c2goZSksIGguc2V0KGUsIHQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsID0gbmV3IFJlKGEpO1xuICAgIHJldHVybiBuZXcgSGgoaCwgbCwgby5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgXCJxdWVyeSB2YWx1ZVwiIChlLmcuIHZhbHVlIGluIGEgd2hlcmUgZmlsdGVyIG9yIGEgdmFsdWUgaW4gYSBjdXJzb3JcbiAqIGJvdW5kKS5cbiAqXG4gKiBAcGFyYW0gYWxsb3dBcnJheXMgLSBXaGV0aGVyIHRoZSBxdWVyeSB2YWx1ZSBpcyBhbiBhcnJheSB0aGF0IG1heSBkaXJlY3RseVxuICogY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZS5nLiB0aGUgb3BlcmFuZCBvZiBhbiBgaW5gIHF1ZXJ5KS5cbiAqLyBmdW5jdGlvbiBhbCh0LCBlLCBuLCBzID0gITEpIHtcbiAgICByZXR1cm4gaGwobiwgdC55YShzID8gNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDogMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyAsIGUpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdXNlciBkYXRhIHRvIFByb3RvYnVmIFZhbHVlcy5cbiAqXG4gKiBAcGFyYW0gaW5wdXQgLSBEYXRhIHRvIGJlIHBhcnNlZC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gQSBjb250ZXh0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcGF0aCBiZWluZyBwYXJzZWQsXG4gKiB0aGUgc291cmNlIG9mIHRoZSBkYXRhIGJlaW5nIHBhcnNlZCwgZXRjLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZSwgb3IgbnVsbCBpZiB0aGUgdmFsdWUgd2FzIGEgRmllbGRWYWx1ZSBzZW50aW5lbFxuICogdGhhdCBzaG91bGQgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRpbmcgcGFyc2VkIGRhdGEuXG4gKi8gZnVuY3Rpb24gaGwodCwgZSkge1xuICAgIGlmIChmbChcbiAgICAvLyBVbndyYXAgdGhlIEFQSSB0eXBlIGZyb20gdGhlIENvbXBhdCBTREsuIFRoaXMgd2lsbCByZXR1cm4gdGhlIEFQSSB0eXBlXG4gICAgLy8gZnJvbSBmaXJlc3RvcmUtZXhwLlxuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpKSByZXR1cm4gZGwoXCJVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTpcIiwgZSwgdCksIGxsKHQsIGUpO1xuICAgIGlmICh0IGluc3RhbmNlb2YgUWgpIFxuICAgIC8vIEZpZWxkVmFsdWVzIHVzdWFsbHkgcGFyc2UgaW50byB0cmFuc2Zvcm1zIChleGNlcHQgZGVsZXRlRmllbGQoKSlcbiAgICAvLyBpbiB3aGljaCBjYXNlIHdlIGRvIG5vdCB3YW50IHRvIGluY2x1ZGUgdGhpcyBmaWVsZCBpbiBvdXIgcGFyc2VkIGRhdGFcbiAgICAvLyAoYXMgZG9pbmcgc28gd2lsbCBvdmVyd3JpdGUgdGhlIGZpZWxkIGRpcmVjdGx5IHByaW9yIHRvIHRoZSB0cmFuc2Zvcm1cbiAgICAvLyB0cnlpbmcgdG8gdHJhbnNmb3JtIGl0KS4gU28gd2UgZG9uJ3QgYWRkIHRoaXMgbG9jYXRpb24gdG9cbiAgICAvLyBjb250ZXh0LmZpZWxkTWFzayBhbmQgd2UgcmV0dXJuIG51bGwgYXMgb3VyIHBhcnNpbmcgcmVzdWx0LlxuICAgIC8qKlxuICogXCJQYXJzZXNcIiB0aGUgcHJvdmlkZWQgRmllbGRWYWx1ZUltcGwsIGFkZGluZyBhbnkgbmVjZXNzYXJ5IHRyYW5zZm9ybXMgdG9cbiAqIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gU2VudGluZWxzIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIHdyaXRlcywgYW5kIG5vdCB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAoIUpoKGUuY2EpKSB0aHJvdyBlLl9hKGAke3QuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKWApO1xuICAgICAgICBpZiAoIWUucGF0aCkgdGhyb3cgZS5fYShgJHt0Ll9tZXRob2ROYW1lfSgpIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluc2lkZSBhcnJheXNgKTtcbiAgICAgICAgY29uc3QgbiA9IHQuX3RvRmllbGRUcmFuc2Zvcm0oZSk7XG4gICAgICAgIG4gJiYgZS5maWVsZFRyYW5zZm9ybXMucHVzaChuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2UgYSBzY2FsYXIgdmFsdWUgKGkuZS4gbm90IGFuIE9iamVjdCwgQXJyYXksIG9yIEZpZWxkVmFsdWUpXG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZVxuICovICh0LCBlKSwgbnVsbDtcbiAgICBpZiAodm9pZCAwID09PSB0ICYmIGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcykgXG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCBpdCBjYW4gbmV2ZXIgcGFydGljaXBhdGUgaW4gdGhlIGZpZWxkTWFzaywgc29cbiAgICAvLyBkb24ndCBoYW5kbGUgdGhpcyBiZWxvdy4gSWYgYGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXNgIGlzIGZhbHNlLFxuICAgIC8vIGBwYXJzZVNjYWxhclZhbHVlYCB3aWxsIHJlamVjdCBhbiB1bmRlZmluZWQgdmFsdWUuXG4gICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKFxuICAgIC8vIElmIGNvbnRleHQucGF0aCBpcyBudWxsIHdlIGFyZSBpbnNpZGUgYW4gYXJyYXkgYW5kIHdlIGRvbid0IHN1cHBvcnRcbiAgICAvLyBmaWVsZCBtYXNrIHBhdGhzIG1vcmUgZ3JhbnVsYXIgdGhhbiB0aGUgdG9wLWxldmVsIGFycmF5LlxuICAgIGUucGF0aCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCksIHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBJbmNsdWRlIHRoZSBwYXRoIGNvbnRhaW5pbmcgdGhlIGFycmF5IGluIHRoZSBlcnJvclxuICAgICAgICAvLyBtZXNzYWdlLlxuICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBJTiBxdWVyaWVzLCB0aGUgcGFyc2VkIGRhdGEgaXMgYW4gYXJyYXkgKHJlcHJlc2VudGluZ1xuICAgICAgICAvLyB0aGUgc2V0IG9mIHZhbHVlcyB0byBiZSBpbmNsdWRlZCBmb3IgdGhlIElOIHF1ZXJ5KSB0aGF0IG1heSBkaXJlY3RseVxuICAgICAgICAvLyBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlYWNoIHJlcHJlc2VudGluZyBhbiBpbmRpdmlkdWFsIGZpZWxkXG4gICAgICAgIC8vIHZhbHVlKSwgc28gd2UgZGlzYWJsZSB0aGlzIHZhbGlkYXRpb24uXG4gICAgICAgIGlmIChlLnNldHRpbmdzLmxhICYmIDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyAhPT0gZS5jYSkgdGhyb3cgZS5fYShcIk5lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gaGwoaSwgZS53YShzKSk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSB0ICYmIChcbiAgICAgICAgICAgICAgICAvLyBKdXN0IGluY2x1ZGUgbnVsbHMgaW4gdGhlIGFycmF5IGZvciBmaWVsZHMgYmVpbmcgcmVwbGFjZWQgd2l0aCBhXG4gICAgICAgICAgICAgICAgLy8gc2VudGluZWwuXG4gICAgICAgICAgICAgICAgdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgICAgIH0pLCBuLnB1c2godCksIHMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAobnVsbCA9PT0gKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpKSByZXR1cm4ge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIEVzKGUuc2VyaWFsaXplciwgdCk7XG4gICAgICAgIGlmIChcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2xlYW5WYWx1ZTogdFxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGl0LmZyb21EYXRlKHQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogRGkoZS5zZXJpYWxpemVyLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGl0KSB7XG4gICAgICAgICAgICAvLyBGaXJlc3RvcmUgYmFja2VuZCB0cnVuY2F0ZXMgcHJlY2lzaW9uIGRvd24gdG8gbWljcm9zZWNvbmRzLiBUbyBlbnN1cmVcbiAgICAgICAgICAgIC8vIG9mZmxpbmUgbW9kZSB3b3JrcyB0aGUgc2FtZSB3aXRoIHJlZ2FyZHMgdG8gdHJ1bmNhdGlvbiwgcGVyZm9ybSB0aGVcbiAgICAgICAgICAgIC8vIHRydW5jYXRpb24gaW1tZWRpYXRlbHkgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgYmFja2VuZCB0byBkbyB0aGF0LlxuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBpdCh0LnNlY29uZHMsIDFlMyAqIE1hdGguZmxvb3IodC5uYW5vc2Vjb25kcyAvIDFlMykpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogRGkoZS5zZXJpYWxpemVyLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGpoKSByZXR1cm4ge1xuICAgICAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgICAgIGxhdGl0dWRlOiB0LmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdC5sb25naXR1ZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBVaCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGJ5dGVzVmFsdWU6IENpKGUuc2VyaWFsaXplciwgdC5fYnl0ZVN0cmluZylcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBmaCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZGF0YWJhc2VJZCwgcyA9IHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkO1xuICAgICAgICAgICAgaWYgKCFzLmlzRXF1YWwobikpIHRocm93IGUuX2EoYERvY3VtZW50IHJlZmVyZW5jZSBpcyBmb3IgZGF0YWJhc2UgJHtzLnByb2plY3RJZH0vJHtzLmRhdGFiYXNlfSBidXQgc2hvdWxkIGJlIGZvciBkYXRhYmFzZSAke24ucHJvamVjdElkfS8ke24uZGF0YWJhc2V9YCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jZVZhbHVlOiBraSh0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCB8fCBlLmRhdGFiYXNlSWQsIHQuX2tleS5wYXRoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlLl9hKGBVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogJHtvaCh0KX1gKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxuICogaW50byBhIHN0cnVjdC4gTm9ybWFsIGNsYXNzL3Byb3RvdHlwZSBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlXG4gKiBKU09OIG9iamVjdHMgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkIHRvIGEgc3RydWN0IHZhbHVlLiBBcnJheXMsIERhdGVzLFxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXG4gKiB0byBzcGVjaWZpYyBGaWVsZFZhbHVlIHR5cGVzIG90aGVyIHRoYW4gT2JqZWN0VmFsdWUuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiBsbCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHt9O1xuICAgIHJldHVybiB5ZSh0KSA/IFxuICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcbiAgICAvLyBtYXNrIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cbiAgICBlLnBhdGggJiYgZS5wYXRoLmxlbmd0aCA+IDAgJiYgZS5maWVsZE1hc2sucHVzaChlLnBhdGgpIDogZ2UodCwgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBobChzLCBlLmhhKHQpKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChuW3RdID0gaSk7XG4gICAgfSkpLCB7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZsKHQpIHtcbiAgICByZXR1cm4gIShcIm9iamVjdFwiICE9IHR5cGVvZiB0IHx8IG51bGwgPT09IHQgfHwgdCBpbnN0YW5jZW9mIEFycmF5IHx8IHQgaW5zdGFuY2VvZiBEYXRlIHx8IHQgaW5zdGFuY2VvZiBpdCB8fCB0IGluc3RhbmNlb2YgamggfHwgdCBpbnN0YW5jZW9mIFVoIHx8IHQgaW5zdGFuY2VvZiBmaCB8fCB0IGluc3RhbmNlb2YgUWgpO1xufVxuXG5mdW5jdGlvbiBkbCh0LCBlLCBuKSB7XG4gICAgaWYgKCFmbChuKSB8fCAhZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ICYmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgbnVsbCA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpKTtcbiAgICB9KG4pKSB7XG4gICAgICAgIGNvbnN0IHMgPSBvaChuKTtcbiAgICAgICAgdGhyb3cgXCJhbiBvYmplY3RcIiA9PT0gcyA/IGUuX2EodCArIFwiIGEgY3VzdG9tIG9iamVjdFwiKSA6IGUuX2EodCArIFwiIFwiICsgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKSBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiB3bCh0LCBlLCBuKSB7XG4gICAgaWYgKChcbiAgICAvLyBJZiByZXF1aXJlZCwgcmVwbGFjZSB0aGUgRmllbGRQYXRoIENvbXBhdCBjbGFzcyB3aXRoIHdpdGggdGhlIGZpcmVzdG9yZS1leHBcbiAgICAvLyBGaWVsZFBhdGguXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgaW5zdGFuY2VvZiBLaCkgcmV0dXJuIGUuX2ludGVybmFsUGF0aDtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkgcmV0dXJuIG1sKHQsIGUpO1xuICAgIHRocm93IGdsKFwiRmllbGQgcGF0aCBhcmd1bWVudHMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZyBvciBcIiwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIGFueSBjaGFyYWN0ZXJzIGluIGEgZmllbGQgcGF0aCBzdHJpbmcgdGhhdCBhcmUgcmVzZXJ2ZWQuXG4gKi8gY29uc3QgX2wgPSBuZXcgUmVnRXhwKFwiW35cXFxcKi9cXFxcW1xcXFxdXVwiKTtcblxuLyoqXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcbiAqIHdhcyB0aHJvd24uXG4gKiBAcGFyYW0gbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWNseSB2aXNpYmxlIG1ldGhvZCBuYW1lXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBkb3Qtc2VwYXJhdGVkIHN0cmluZyBmb3JtIG9mIGEgZmllbGQgcGF0aCB3aGljaCB3aWxsIGJlXG4gKiBzcGxpdCBvbiBkb3RzLlxuICogQHBhcmFtIHRhcmdldERvYyAtIFRoZSBkb2N1bWVudCBhZ2FpbnN0IHdoaWNoIHRoZSBmaWVsZCBwYXRoIHdpbGwgYmVcbiAqIGV2YWx1YXRlZC5cbiAqLyBmdW5jdGlvbiBtbCh0LCBlLCBuKSB7XG4gICAgaWYgKGUuc2VhcmNoKF9sKSA+PSAwKSB0aHJvdyBnbChgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAnficsICcqJywgJy8nLCAnWycsIG9yICddJ2AsIHQsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBLaCguLi5lLnNwbGl0KFwiLlwiKSkuX2ludGVybmFsUGF0aDtcbiAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgIHRocm93IGdsKGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCwgdCwgXG4gICAgICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgICAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2wodCwgZSwgbiwgcywgaSkge1xuICAgIGNvbnN0IHIgPSBzICYmICFzLmlzRW1wdHkoKSwgbyA9IHZvaWQgMCAhPT0gaTtcbiAgICBsZXQgdSA9IGBGdW5jdGlvbiAke2V9KCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhYDtcbiAgICBuICYmICh1ICs9IFwiICh2aWEgYHRvRmlyZXN0b3JlKClgKVwiKSwgdSArPSBcIi4gXCI7XG4gICAgbGV0IGMgPSBcIlwiO1xuICAgIHJldHVybiAociB8fCBvKSAmJiAoYyArPSBcIiAoZm91bmRcIiwgciAmJiAoYyArPSBgIGluIGZpZWxkICR7c31gKSwgbyAmJiAoYyArPSBgIGluIGRvY3VtZW50ICR7aX1gKSwgXG4gICAgYyArPSBcIilcIiksIG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgdSArIHQgKyBjKTtcbn1cblxuLyoqIENoZWNrcyBgaGF5c3RhY2tgIGlmIEZpZWxkUGF0aCBgbmVlZGxlYCBpcyBwcmVzZW50LiBSdW5zIGluIE8obikuICovIGZ1bmN0aW9uIHlsKHQsIGUpIHtcbiAgICByZXR1cm4gdC5zb21lKCh0ID0+IHQuaXNFcXVhbChlKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIHBsIHtcbiAgICAvLyBOb3RlOiBUaGlzIGNsYXNzIGlzIHN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiB0aGUgRG9jdW1lbnRTbmFwc2hvdCBpblxuICAgIC8vIHRoZSBsZWdhY3kgU0RLLiBUaGUgY2hhbmdlcyBhcmU6XG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE1ldGFkYXRhLlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RPcHRpb25zLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9rZXkgPSBuLCB0aGlzLl9kb2N1bWVudCA9IHMsIFxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBpO1xuICAgIH1cbiAgICAvKiogUHJvcGVydHkgb2YgdGhlIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHByb3ZpZGVzIHRoZSBkb2N1bWVudCdzIElELiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYERvY3VtZW50UmVmZXJlbmNlYCBmb3IgdGhlIGRvY3VtZW50IGluY2x1ZGVkIGluIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAuXG4gICAgICovICAgIGdldCByZWYoKSB7XG4gICAgICAgIHJldHVybiBuZXcgZmgodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIsIHRoaXMuX2tleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpZ25hbHMgd2hldGhlciBvciBub3QgdGhlIGRvY3VtZW50IGF0IHRoZSBzbmFwc2hvdCdzIGxvY2F0aW9uIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZG9jdW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYFxuICAgICAqIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBJbCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKFRsKFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUpIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUoZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBJbCBleHRlbmRzIHBsIHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKClgIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIFRsKHQsIGUpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IG1sKHQsIGUpIDogZSBpbnN0YW5jZW9mIEtoID8gZS5faW50ZXJuYWxQYXRoIDogZS5fZGVsZWdhdGUuX2ludGVybmFsUGF0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gRWwodCkge1xuICAgIGlmIChcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyA9PT0gdC5saW1pdFR5cGUgJiYgMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgVShxLlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBbiBgQXBwbGlhYmxlQ29uc3RyYWludGAgaXMgYW4gYWJzdHJhY3Rpb24gb2YgYSBjb25zdHJhaW50IHRoYXQgY2FuIGJlIGFwcGxpZWRcbiAqIHRvIGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICovIGNsYXNzIEFsIHt9XG5cbi8qKlxuICogQSBgUXVlcnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9LFxuICoge0BsaW5rIG9yZGVyQnl9LCB7QGxpbmsgKHN0YXJ0QXQ6MSl9LCB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9LCB7QGxpbmtcbiAqIChlbmRCZWZvcmU6MSl9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSwge0BsaW5rIGxpbWl0VG9MYXN0fSBhbmRcbiAqIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdFxuICogYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUNvbnN0cmFpbnRgLlxuICovIGNsYXNzIHZsIGV4dGVuZHMgQWwge31cblxuZnVuY3Rpb24gUmwodCwgZSwgLi4ubikge1xuICAgIGxldCBzID0gW107XG4gICAgZSBpbnN0YW5jZW9mIEFsICYmIHMucHVzaChlKSwgcyA9IHMuY29uY2F0KG4pLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmZpbHRlcigodCA9PiB0IGluc3RhbmNlb2YgVmwpKS5sZW5ndGgsIG4gPSB0LmZpbHRlcigodCA9PiB0IGluc3RhbmNlb2YgUGwpKS5sZW5ndGg7XG4gICAgICAgIGlmIChlID4gMSB8fCBlID4gMCAmJiBuID4gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWRRdWVyeS4gV2hlbiB1c2luZyBjb21wb3NpdGUgZmlsdGVycywgeW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSBmaWx0ZXIgYXQgdGhlIHRvcCBsZXZlbC4gQ29uc2lkZXIgbmVzdGluZyB0aGUgbXVsdGlwbGUgZmlsdGVycyB3aXRoaW4gYW4gYGFuZCguLi4pYCBzdGF0ZW1lbnQuIEZvciBleGFtcGxlOiBjaGFuZ2UgYHF1ZXJ5KHF1ZXJ5LCB3aGVyZSguLi4pLCBvciguLi4pKWAgdG8gYHF1ZXJ5KHF1ZXJ5LCBhbmQod2hlcmUoLi4uKSwgb3IoLi4uKSkpYC5cIik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBDb252ZXJ0cyBGaXJlc3RvcmUncyBpbnRlcm5hbCB0eXBlcyB0byB0aGUgSmF2YVNjcmlwdCB0eXBlcyB0aGF0IHdlIGV4cG9zZVxuICogdG8gdGhlIHVzZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gKHMpO1xuICAgIGZvciAoY29uc3QgZSBvZiBzKSB0ID0gZS5fYXBwbHkodCk7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQSBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5XG4gKiBhIEZpcmVzdG9yZSBxdWVyeSBieSBmaWx0ZXJpbmcgb24gb25lIG9yIG1vcmUgZG9jdW1lbnQgZmllbGRzLlxuICogYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSBhbmQgY2FuIHRoZW5cbiAqIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zXG4gKiB0aGlzIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGAuXG4gKi8gY2xhc3MgUGwgZXh0ZW5kcyB2bCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLl9maWVsZCA9IHQsIHRoaXMuX29wID0gZSwgdGhpcy5fdmFsdWUgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIndoZXJlXCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQbCh0LCBlLCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3BhcnNlKHQpO1xuICAgICAgICByZXR1cm4gUWwodC5fcXVlcnksIGUpLCBuZXcgZGgodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBZbih0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbiAgICBfcGFyc2UodCkge1xuICAgICAgICBjb25zdCBlID0gWmgodC5maXJlc3RvcmUpLCBuID0gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICAgICAgbGV0IHU7XG4gICAgICAgICAgICBpZiAoaS5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSByIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSByKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBZb3UgY2FuJ3QgcGVyZm9ybSAnJHtyfScgcXVlcmllcyBvbiBkb2N1bWVudElkKCkuYCk7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gcikge1xuICAgICAgICAgICAgICAgICAgICBHbChvLCByKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbykgZS5wdXNoKEtsKHMsIHQsIG4pKTtcbiAgICAgICAgICAgICAgICAgICAgdSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgdSA9IEtsKHMsIHQsIG8pO1xuICAgICAgICAgICAgfSBlbHNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAhPT0gciAmJiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAhPT0gciAmJiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAhPT0gciB8fCBHbChvLCByKSwgXG4gICAgICAgICAgICB1ID0gYWwobiwgZSwgbywgXG4gICAgICAgICAgICAvKiBhbGxvd0FycmF5cz0gKi8gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSByIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSByKTtcbiAgICAgICAgICAgIHJldHVybiBtbi5jcmVhdGUoaSwgciwgdSk7XG4gICAgICAgIH0odC5fcXVlcnksIFwid2hlcmVcIiwgZSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHRoaXMuX2ZpZWxkLCB0aGlzLl9vcCwgdGhpcy5fdmFsdWUpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH0gdGhhdCBlbmZvcmNlcyB0aGF0IGRvY3VtZW50c1xuICogbXVzdCBjb250YWluIHRoZSBzcGVjaWZpZWQgZmllbGQgYW5kIHRoYXQgdGhlIHZhbHVlIHNob3VsZCBzYXRpc2Z5IHRoZVxuICogcmVsYXRpb24gY29uc3RyYWludCBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggdG8gY29tcGFyZVxuICogQHBhcmFtIG9wU3RyIC0gVGhlIG9wZXJhdGlvbiBzdHJpbmcgKGUuZyBcIiZsdDtcIiwgXCImbHQ7PVwiLCBcIj09XCIsIFwiJmx0O1wiLFxuICogICBcIiZsdDs9XCIsIFwiIT1cIikuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgZm9yIGNvbXBhcmlzb25cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gYmwodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBlLCBpID0gVGwoXCJ3aGVyZVwiLCB0KTtcbiAgICByZXR1cm4gUGwuX2NyZWF0ZShpLCBzLCBuKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzXG4gKiByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeSBieSBwZXJmb3JtaW5nIHRoZSBsb2dpY2FsIE9SIG9yIEFORCBvZiBtdWx0aXBsZVxuICoge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fXMgb3Ige0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH1zLlxuICogYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayBvcn0gb3JcbiAqIHtAbGluayBhbmR9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhlIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFZsIGV4dGVuZHMgQWwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICB0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuX3F1ZXJ5Q29uc3RyYWludHMgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmwodCwgZSk7XG4gICAgfVxuICAgIF9wYXJzZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzLm1hcCgoZSA9PiBlLl9wYXJzZSh0KSkpLmZpbHRlcigodCA9PiB0LmdldEZpbHRlcnMoKS5sZW5ndGggPiAwKSk7XG4gICAgICAgIHJldHVybiAxID09PSBlLmxlbmd0aCA/IGVbMF0gOiBnbi5jcmVhdGUoZSwgdGhpcy5fZ2V0T3BlcmF0b3IoKSk7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLl9wYXJzZSh0KTtcbiAgICAgICAgcmV0dXJuIDAgPT09IGUuZ2V0RmlsdGVycygpLmxlbmd0aCA/IHQgOiAoZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG4gPSB0O1xuICAgICAgICAgICAgY29uc3QgcyA9IGUuZ2V0RmxhdHRlbmVkRmlsdGVycygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHMpIFFsKG4sIHQpLCBuID0gWW4obiwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgZmlsdGVyIG9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIGdpdmVuIGxpc3Qgb2YgZmlsdGVycyBhbmRcbiAgICAgICAgLy8gcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXG4gICAgICAgICh0Ll9xdWVyeSwgZSksIG5ldyBkaCh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIFluKHQuX3F1ZXJ5LCBlKSkpO1xuICAgIH1cbiAgICBfZ2V0UXVlcnlDb25zdHJhaW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5Q29uc3RyYWludHM7XG4gICAgfVxuICAgIF9nZXRPcGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIFwiYW5kXCIgPT09IHRoaXMudHlwZSA/IFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovIDogXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9IHRoYXQgaXMgYSBkaXNqdW5jdGlvbiBvZlxuICogdGhlIGdpdmVuIGZpbHRlciBjb25zdHJhaW50cy4gQSBkaXNqdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXMgYSBkb2N1bWVudCBpZiBpdFxuICogc2F0aXNmaWVzIGFueSBvZiB0aGUgZ2l2ZW4gZmlsdGVycy5cbiAqXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIE9wdGlvbmFsLiBUaGUgbGlzdCBvZlxuICoge0BsaW5rIFF1ZXJ5RmlsdGVyQ29uc3RyYWludH1zIHRvIHBlcmZvcm0gYSBkaXNqdW5jdGlvbiBmb3IuIFRoZXNlIG11c3QgYmVcbiAqIGNyZWF0ZWQgd2l0aCBjYWxscyB0byB7QGxpbmsgd2hlcmV9LCB7QGxpbmsgb3J9LCBvciB7QGxpbmsgYW5kfS5cbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIFNsKC4uLnQpIHtcbiAgICAvLyBPbmx5IHN1cHBvcnQgUXVlcnlGaWx0ZXJDb25zdHJhaW50c1xuICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4gemwoXCJvclwiLCB0KSkpLCBWbC5fY3JlYXRlKFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyAsIHQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0gdGhhdCBpcyBhIGNvbmp1bmN0aW9uIG9mXG4gKiB0aGUgZ2l2ZW4gZmlsdGVyIGNvbnN0cmFpbnRzLiBBIGNvbmp1bmN0aW9uIGZpbHRlciBpbmNsdWRlcyBhIGRvY3VtZW50IGlmIGl0XG4gKiBzYXRpc2ZpZXMgYWxsIG9mIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gT3B0aW9uYWwuIFRoZSBsaXN0IG9mXG4gKiB7QGxpbmsgUXVlcnlGaWx0ZXJDb25zdHJhaW50fXMgdG8gcGVyZm9ybSBhIGNvbmp1bmN0aW9uIGZvci4gVGhlc2UgbXVzdCBiZVxuICogY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayB3aGVyZX0sIHtAbGluayBvcn0sIG9yIHtAbGluayBhbmR9LlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gRGwoLi4udCkge1xuICAgIC8vIE9ubHkgc3VwcG9ydCBRdWVyeUZpbHRlckNvbnN0cmFpbnRzXG4gICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB6bChcImFuZFwiLCB0KSkpLCBWbC5fY3JlYXRlKFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovICwgdCk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBzb3J0IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZ1xuICoge0BsaW5rIG9yZGVyQnl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGAuXG4gKlxuICogTm90ZTogRG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIG9yZGVyQnkgZmllbGQgd2lsbCBub3QgYmUgcHJlc2VudCBpblxuICogdGhlIHF1ZXJ5IHJlc3VsdC5cbiAqLyBjbGFzcyBDbCBleHRlbmRzIHZsIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuX2ZpZWxkID0gdCwgdGhpcy5fZGlyZWN0aW9uID0gZSwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJvcmRlckJ5XCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDbCh0LCBlKTtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LnN0YXJ0QXQpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBzdGFydEF0KCkgb3Igc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5lbmRBdCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIGVuZEF0KCkgb3IgZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgZG4oZSwgbik7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBqbih0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBvcmRlciBieS4gSXQgbXVzdCBtYXRjaCBhbnkgaW5lcXVhbGl0eS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHpuKHQpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBuICYmIGpsKHQsIG4sIGUuZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0odCwgcyksIHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGUgYSBgQm91bmRgIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGBCb3VuZGAgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxuICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcbiAqIHBvc2l0aW9uLlxuICpcbiAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcbiAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXG4gKiBzZXJ2ZXIgdGltZXN0YW1wLlxuICovICh0Ll9xdWVyeSwgdGhpcy5fZmllbGQsIHRoaXMuX2RpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiBuZXcgZGgodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCBuLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeU9yZGVyQnlDb25zdHJhaW50fSB0aGF0IHNvcnRzIHRoZSBxdWVyeSByZXN1bHQgYnkgdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQsIG9wdGlvbmFsbHkgaW4gZGVzY2VuZGluZyBvcmRlciBpbnN0ZWFkIG9mIGFzY2VuZGluZy5cbiAqXG4gKiBOb3RlOiBEb2N1bWVudHMgdGhhdCBkbyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIGZpZWxkIHdpbGwgbm90IGJlIHByZXNlbnRcbiAqIGluIHRoZSBxdWVyeSByZXN1bHQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBmaWVsZCB0byBzb3J0IGJ5LlxuICogQHBhcmFtIGRpcmVjdGlvblN0ciAtIE9wdGlvbmFsIGRpcmVjdGlvbiB0byBzb3J0IGJ5ICgnYXNjJyBvciAnZGVzYycpLiBJZlxuICogbm90IHNwZWNpZmllZCwgb3JkZXIgd2lsbCBiZSBhc2NlbmRpbmcuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlPcmRlckJ5Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24geGwodCwgZSA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gZSwgcyA9IFRsKFwib3JkZXJCeVwiLCB0KTtcbiAgICByZXR1cm4gQ2wuX2NyZWF0ZShzLCBuKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUxpbWl0Q29uc3RyYWludGAgaXMgdXNlZCB0byBsaW1pdCB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZCBieVxuICogYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlMaW1pdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgbGltaXR9IG9yXG4gKiB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3XG4gKiBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlMaW1pdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIE5sIGV4dGVuZHMgdmwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICB0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuX2xpbWl0ID0gZSwgdGhpcy5fbGltaXRUeXBlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IE5sKHQsIGUsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gbmV3IGRoKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgWG4odC5fcXVlcnksIHRoaXMuX2xpbWl0LCB0aGlzLl9saW1pdFR5cGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nXG4gKiBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24ga2wodCkge1xuICAgIHJldHVybiBjaChcImxpbWl0XCIsIHQpLCBObC5fY3JlYXRlKFwibGltaXRcIiwgdCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZ1xuICogZG9jdW1lbnRzLlxuICpcbiAqIFlvdSBtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIGBvcmRlckJ5YCBjbGF1c2UgZm9yIGBsaW1pdFRvTGFzdGAgcXVlcmllcyxcbiAqIG90aGVyd2lzZSBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24gZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBNbCh0KSB7XG4gICAgcmV0dXJuIGNoKFwibGltaXRUb0xhc3RcIiwgdCksIE5sLl9jcmVhdGUoXCJsaW1pdFRvTGFzdFwiLCB0LCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAgaXMgdXNlZCB0byBleGNsdWRlIGRvY3VtZW50cyBmcm9tIHRoZSBzdGFydCBvZiBhXG4gKiByZXN1bHQgc2V0IHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKHN0YXJ0QXQ6MSl9IG9yXG4gKiB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGFcbiAqIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlTdGFydEF0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgJGwgZXh0ZW5kcyB2bCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5fZG9jT3JGaWVsZHMgPSBlLCB0aGlzLl9pbmNsdXNpdmUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgJGwodCwgZSwgbik7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBVbCh0LCB0aGlzLnR5cGUsIHRoaXMuX2RvY09yRmllbGRzLCB0aGlzLl9pbmNsdXNpdmUpO1xuICAgICAgICByZXR1cm4gbmV3IGRoKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIGUsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBPbCguLi50KSB7XG4gICAgcmV0dXJuICRsLl9jcmVhdGUoXCJzdGFydEF0XCIsIHQsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gRmwoLi4udCkge1xuICAgIHJldHVybiAkbC5fY3JlYXRlKFwic3RhcnRBZnRlclwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbi8qKlxuICogQSBgUXVlcnlFbmRBdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gZXhjbHVkZSBkb2N1bWVudHMgZnJvbSB0aGUgZW5kIG9mIGFcbiAqIHJlc3VsdCBzZXQgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlFbmRBdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgKGVuZEF0OjEpfSBvclxuICoge0BsaW5rIChlbmRCZWZvcmU6MSl9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3XG4gKiBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlFbmRBdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIEJsIGV4dGVuZHMgdmwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICB0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuX2RvY09yRmllbGRzID0gZSwgdGhpcy5faW5jbHVzaXZlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IEJsKHQsIGUsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gVWwodCwgdGhpcy50eXBlLCB0aGlzLl9kb2NPckZpZWxkcywgdGhpcy5faW5jbHVzaXZlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBkaCh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIGUpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBMbCguLi50KSB7XG4gICAgcmV0dXJuIEJsLl9jcmVhdGUoXCJlbmRCZWZvcmVcIiwgdCwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITEpO1xufVxuXG5mdW5jdGlvbiBxbCguLi50KSB7XG4gICAgcmV0dXJuIEJsLl9jcmVhdGUoXCJlbmRBdFwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMCk7XG59XG5cbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqLyBmdW5jdGlvbiBVbCh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKG5bMF0gPSBnZXRNb2R1bGFySW5zdGFuY2UoblswXSksIG5bMF0gaW5zdGFuY2VvZiBwbCkgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgaWYgKCFzKSB0aHJvdyBuZXcgVShxLk5PVF9GT1VORCwgYENhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciAke259KCkuYCk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcbiAgICAgICAgLy8gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgSG4odCkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgci5wdXNoKFdlKGUsIHMua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChOZSh0KSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHt0fScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgaG4ociwgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBlLCBuWzBdLl9kb2N1bWVudCwgcyk7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gWmgodC5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtzfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCB1ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGkubGVuZ3RoOyByKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gaVtyXTtcbiAgICAgICAgICAgICAgICBpZiAob1tyXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGMpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3N9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBjfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIVduKHQpICYmIC0xICE9PSBjLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtjfScgY29udGFpbnMgYSBzbGFzaC5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQucGF0aC5jaGlsZCh1dC5mcm9tU3RyaW5nKGMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFodC5pc0RvY3VtZW50S2V5KG4pKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtufScgaXMgbm90IGJlY2F1c2UgaXQgY29udGFpbnMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cy5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBodChuKTtcbiAgICAgICAgICAgICAgICAgICAgdS5wdXNoKFdlKGUsIGkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gYWwobiwgcywgYyk7XG4gICAgICAgICAgICAgICAgICAgIHUucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGhuKHUsIHIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBgZG9jdW1lbnRJZFZhbHVlYCBpbnRvIGEgYFJlZmVyZW5jZVZhbHVlYCwgdGhyb3dpbmdcbiAqIGFwcHJvcHJpYXRlIGVycm9ycyBpZiB0aGUgdmFsdWUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhIGBEb2N1bWVudFJlZmVyZW5jZWBcbiAqIG9yIGBzdHJpbmdgLCBvciBpZiB0aGUgc3RyaW5nIGlzIG1hbGZvcm1lZC5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBpLCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEtsKHQsIGUsIG4pIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgKG4gPSBnZXRNb2R1bGFySW5zdGFuY2UobikpKSB7XG4gICAgICAgIGlmIChcIlwiID09PSBuKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7XG4gICAgICAgIGlmICghV24oZSkgJiYgLTEgIT09IG4uaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7bn0nIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5gKTtcbiAgICAgICAgY29uc3QgcyA9IGUucGF0aC5jaGlsZCh1dC5mcm9tU3RyaW5nKG4pKTtcbiAgICAgICAgaWYgKCFodC5pc0RvY3VtZW50S2V5KHMpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtzfScgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKCR7cy5sZW5ndGh9KS5gKTtcbiAgICAgICAgcmV0dXJuIFdlKHQsIG5ldyBodChzKSk7XG4gICAgfVxuICAgIGlmIChuIGluc3RhbmNlb2YgZmgpIHJldHVybiBXZSh0LCBuLl9rZXkpO1xuICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogJHtvaChuKX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcbiAqIGFycmF5IHJlcXVpcmVtZW50cy5cbiAqLyBmdW5jdGlvbiBHbCh0LCBlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHQpIHx8IDAgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7ZS50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBvcGVyYXRvciwgcmV0dXJucyB0aGUgc2V0IG9mIG9wZXJhdG9ycyB0aGF0IGNhbm5vdCBiZSB1c2VkIHdpdGggaXQuXG4gKlxuICogVGhpcyBpcyBub3QgYSBjb21wcmVoZW5zaXZlIGNoZWNrLCBhbmQgdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgcmVtb3ZlZCBpbiB0aGVcbiAqIGxvbmcgdGVybS4gVmFsaWRhdGlvbnMgc2hvdWxkIG9jY3VyIGluIHRoZSBGaXJlc3RvcmUgYmFja2VuZC5cbiAqXG4gKiBPcGVyYXRvcnMgaW4gYSBxdWVyeSBtdXN0IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIHNldCBvZiBydWxlczpcbiAqIDEuIE9ubHkgb25lIGluZXF1YWxpdHkgcGVyIHF1ZXJ5LlxuICogMi4gYE5PVF9JTmAgY2Fubm90IGJlIHVzZWQgd2l0aCBhcnJheSwgZGlzanVuY3RpdmUsIG9yIGBOT1RfRVFVQUxgIG9wZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBRbCh0LCBlKSB7XG4gICAgaWYgKGUuaXNJbmVxdWFsaXR5KCkpIHtcbiAgICAgICAgY29uc3QgbiA9IHpuKHQpLCBzID0gZS5maWVsZDtcbiAgICAgICAgaWYgKG51bGwgIT09IG4gJiYgIW4uaXNFcXVhbChzKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gQWxsIHdoZXJlIGZpbHRlcnMgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG11c3QgYmUgb24gdGhlIHNhbWUgZmllbGQuIEJ1dCB5b3UgaGF2ZSBpbmVxdWFsaXR5IGZpbHRlcnMgb24gJyR7bi50b1N0cmluZygpfScgYW5kICcke3MudG9TdHJpbmcoKX0nYCk7XG4gICAgICAgIGNvbnN0IGkgPSBqbih0KTtcbiAgICAgICAgbnVsbCAhPT0gaSAmJiBqbCh0LCBzLCBpKTtcbiAgICB9XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGZvciAoY29uc3QgdCBvZiBuLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgaWYgKGUuaW5kZXhPZih0Lm9wKSA+PSAwKSByZXR1cm4gdC5vcDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSh0LmZpbHRlcnMsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXTtcblxuICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gXTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9KGUub3ApKTtcbiAgICBpZiAobnVsbCAhPT0gbikgXG4gICAgLy8gU3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxuICAgIHRocm93IG4gPT09IGUub3AgPyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlci5gKSA6IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlcnMgd2l0aCAnJHtuLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xufVxuXG5mdW5jdGlvbiBqbCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuLmlzRXF1YWwoZSkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBoYXZlIGEgd2hlcmUgZmlsdGVyIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBvbiBmaWVsZCAnJHtlLnRvU3RyaW5nKCl9JyBhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJyR7ZS50b1N0cmluZygpfScgYXMgeW91ciBmaXJzdCBhcmd1bWVudCB0byBvcmRlckJ5KCksIGJ1dCB5b3VyIGZpcnN0IG9yZGVyQnkoKSBpcyBvbiBmaWVsZCAnJHtuLnRvU3RyaW5nKCl9JyBpbnN0ZWFkLmApO1xufVxuXG5mdW5jdGlvbiB6bCh0LCBlKSB7XG4gICAgaWYgKCEoZSBpbnN0YW5jZW9mIFBsIHx8IGUgaW5zdGFuY2VvZiBWbCkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSByZXF1aXJlcyBBcHBsaWFibGVDb25zdHJhaW50cyBjcmVhdGVkIHdpdGggYSBjYWxsIHRvICd3aGVyZSguLi4pJywgJ29yKC4uLiknLCBvciAnYW5kKC4uLiknLmApO1xufVxuXG5jbGFzcyBXbCB7XG4gICAgY29udmVydFZhbHVlKHQsIGUgPSBcIm5vbmVcIikge1xuICAgICAgICBzd2l0Y2ggKExlKHQpKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdC5ib29sZWFuVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBDZSh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoeGUodC5ieXRlc1ZhbHVlKSk7XG5cbiAgICAgICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRSZWZlcmVuY2UodC5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdlb1BvaW50KHQuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEFycmF5KHQuYXJyYXlWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0KHQubWFwVmFsdWUsIGUpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IE8oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0T2JqZWN0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdE1hcCh0LmZpZWxkcywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBjb252ZXJ0T2JqZWN0TWFwKHQsIGUgPSBcIm5vbmVcIikge1xuICAgICAgICBjb25zdCBuID0ge307XG4gICAgICAgIHJldHVybiBnZSh0LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG5bdF0gPSB0aGlzLmNvbnZlcnRWYWx1ZShzLCBlKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBjb252ZXJ0R2VvUG9pbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IGpoKENlKHQubGF0aXR1ZGUpLCBDZSh0LmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gKHQudmFsdWVzIHx8IFtdKS5tYXAoKHQgPT4gdGhpcy5jb252ZXJ0VmFsdWUodCwgZSkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IGtlKHQpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCBlKTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChNZSh0KSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydFRpbWVzdGFtcCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBpdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH1cbiAgICBjb252ZXJ0RG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdXQuZnJvbVN0cmluZyh0KTtcbiAgICAgICAgRih1cihuKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgT2Uobi5nZXQoMSksIG4uZ2V0KDMpKSwgaSA9IG5ldyBodChuLnBvcEZpcnN0KDUpKTtcbiAgICAgICAgcmV0dXJuIHMuaXNFcXVhbChlKSB8fCBcbiAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cbiAgICAgICAgayhgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHtlLnByb2plY3RJZH0vJHtlLmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gSGwodCwgZSwgbikge1xuICAgIGxldCBzO1xuICAgIC8vIENhc3QgdG8gYGFueWAgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgdW5pb24gdHlwZSBjb25zdHJhaW50IG9uXG4gICAgLy8gdG9GaXJlc3RvcmUoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiBzID0gdCA/IG4gJiYgKG4ubWVyZ2UgfHwgbi5tZXJnZUZpZWxkcykgPyB0LnRvRmlyZXN0b3JlKGUsIG4pIDogdC50b0ZpcmVzdG9yZShlKSA6IGUsIFxuICAgIHM7XG59XG5cbmNsYXNzIEpsIGV4dGVuZHMgV2wge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IFVoKHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBmaCh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBzdW0gb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIHN1bSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gWWwodCkge1xuICAgIHJldHVybiBuZXcgTGgoXCJzdW1cIiwgd2woXCJzdW1cIiwgdCkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBhdmVyYWdlIG9mXG4gKiBhIHNwZWNpZmllZCBmaWVsZCBvdmVyIGEgcmFuZ2Ugb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAcGFyYW0gZmllbGQgU3BlY2lmaWVzIHRoZSBmaWVsZCB0byBhdmVyYWdlIGFjcm9zcyB0aGUgcmVzdWx0IHNldC5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBYbCh0KSB7XG4gICAgcmV0dXJuIG5ldyBMaChcImF2Z1wiLCB3bChcImF2ZXJhZ2VcIiwgdCkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBjb3VudCBvZlxuICogZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gWmwoKSB7XG4gICAgcmV0dXJuIG5ldyBMaChcImNvdW50XCIpO1xufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byAnQWdncmVnYXRlRmllbGRgIGluc3RhbmNlcyBmb3IgZXF1YWxpdHkuXG4gKlxuICogQHBhcmFtIGxlZnQgQ29tcGFyZSB0aGlzIEFnZ3JlZ2F0ZUZpZWxkIHRvIHRoZSBgcmlnaHRgLlxuICogQHBhcmFtIHJpZ2h0IENvbXBhcmUgdGhpcyBBZ2dyZWdhdGVGaWVsZCB0byB0aGUgYGxlZnRgLlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIHRmKHQsIGUpIHtcbiAgICB2YXIgbiwgcztcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIExoICYmIGUgaW5zdGFuY2VvZiBMaCAmJiB0Ll9hZ2dyZWdhdGVUeXBlID09PSBlLl9hZ2dyZWdhdGVUeXBlICYmIChudWxsID09PSAobiA9IHQuX2ludGVybmFsRmllbGRQYXRoKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbm9uaWNhbFN0cmluZygpKSA9PT0gKG51bGwgPT09IChzID0gZS5faW50ZXJuYWxGaWVsZFBhdGgpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2Fub25pY2FsU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cbiAqXG4gKiBUd28gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCBcImVxdWFsXCIgaWYgdGhleSBoYXZlXG4gKiB1bmRlcmx5aW5nIHF1ZXJpZXMgdGhhdCBjb21wYXJlIGVxdWFsLCBhbmQgdGhlIHNhbWUgZGF0YS5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIFRoZSBmaXJzdCBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIFRoZSBzZWNvbmQgYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIGNvbXBhcmUuXG4gKlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBcImVxdWFsXCIsIGFzIGRlZmluZWQgYWJvdmUsIG9yIGBmYWxzZWBcbiAqIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBlZih0LCBlKSB7XG4gICAgcmV0dXJuIHBoKHQucXVlcnksIGUucXVlcnkpICYmIGRlZXBFcXVhbCh0LmRhdGEoKSwgZS5kYXRhKCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgbmYge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBTbmFwc2hvdE1ldGFkYXRhYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gdC5oYXNQZW5kaW5nV3JpdGVzICYmIHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBzZiBleHRlbmRzIHBsIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMsIHIpLCB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9maXJlc3RvcmVJbXBsID0gdCwgdGhpcy5tZXRhZGF0YSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGRhdGEgZXhpc3RzLiBUcnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgcmYodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYHNlcnZlclRpbWVzdGFtcCgpYCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2V0IHRvXG4gICAgICogaXRzIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnlcbiAgICAgKiBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgdGhlIGZpZWxkIGlzIHJldHJpZXZlZFxuICAgICAqIGZyb20gdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCwgZSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoVGwoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShuLCBlLnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgcmYgZXh0ZW5kcyBzZiB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlTbmFwc2hvdGAgY29udGFpbnMgemVybyBvciBtb3JlIGBEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqLyBjbGFzcyBvZiB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fc25hcHNob3QgPSBzLCB0aGlzLm1ldGFkYXRhID0gbmV3IG5mKHMuaGFzUGVuZGluZ1dyaXRlcywgcy5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCB0O1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmNhbGwoZSwgbmV3IHJmKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcgbmYodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyh0ID0ge30pIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAoZSAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IGUgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodC5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyByZih0Ll9maXJlc3RvcmUsIHQuX3VzZXJEYXRhV3JpdGVyLCBuLmRvYy5rZXksIG4uZG9jLCBuZXcgbmYodC5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4uZG9jLmtleSksIHQuX3NuYXBzaG90LmZyb21DYWNoZSksIHQucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFkZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogZSsrXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEEgYERvY3VtZW50U2V0YCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxuICAgICAgICAgICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IHQuX3NuYXBzaG90Lm9sZERvY3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMuZmlsdGVyKCh0ID0+IGUgfHwgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSB0LnR5cGUpKS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IHJmKHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIGUuZG9jLmtleSwgZS5kb2MsIG5ldyBuZih0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoZS5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCByID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IGUudHlwZSAmJiAoaSA9IG4uaW5kZXhPZihlLmRvYy5rZXkpLCBuID0gbi5kZWxldGUoZS5kb2Mua2V5KSksIFxuICAgICAgICAgICAgICAgICAgICAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAhPT0gZS50eXBlICYmIChuID0gbi5hZGQoZS5kb2MpLCByID0gbi5pbmRleE9mKGUuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdWYoZS50eXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odGhpcywgZSksIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gZSksIHRoaXMuX2NhY2hlZENoYW5nZXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1Zih0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgIHJldHVybiBcImFkZGVkXCI7XG5cbiAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgcmV0dXJuIFwibW9kaWZpZWRcIjtcblxuICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgIHJldHVybiBcInJlbW92ZWRcIjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE8oKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlZXhwKTogQWRkIHRlc3RzIGZvciBzbmFwc2hvdEVxdWFsIHdpdGggZGlmZmVyZW50IHNuYXBzaG90XG4vLyBtZXRhZGF0YVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICovIGZ1bmN0aW9uIGNmKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHNmICYmIGUgaW5zdGFuY2VvZiBzZiA/IHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIHQuX2tleS5pc0VxdWFsKGUuX2tleSkgJiYgKG51bGwgPT09IHQuX2RvY3VtZW50ID8gbnVsbCA9PT0gZS5fZG9jdW1lbnQgOiB0Ll9kb2N1bWVudC5pc0VxdWFsKGUuX2RvY3VtZW50KSkgJiYgdC5fY29udmVydGVyID09PSBlLl9jb252ZXJ0ZXIgOiB0IGluc3RhbmNlb2Ygb2YgJiYgZSBpbnN0YW5jZW9mIG9mICYmICh0Ll9maXJlc3RvcmUgPT09IGUuX2ZpcmVzdG9yZSAmJiBwaCh0LnF1ZXJ5LCBlLnF1ZXJ5KSAmJiB0Lm1ldGFkYXRhLmlzRXF1YWwoZS5tZXRhZGF0YSkgJiYgdC5fc25hcHNob3QuaXNFcXVhbChlLl9zbmFwc2hvdCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIE5vdGU6IGBnZXREb2MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieSB3YWl0aW5nXG4gKiBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWYgeW91IGFyZVxuICogb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLCBpbnZva2VcbiAqIHtAbGluayBnZXREb2NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdG8gZmV0Y2guXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBhZih0KSB7XG4gICAgdCA9IHVoKHQsIGZoKTtcbiAgICBjb25zdCBlID0gdWgodC5maXJlc3RvcmUsIHZoKTtcbiAgICByZXR1cm4gemEoYmgoZSksIHQuX2tleSkudGhlbigobiA9PiBBZihlLCB0LCBuKSkpO1xufVxuXG5jbGFzcyBoZiBleHRlbmRzIFdsIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaCh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgZmgodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gbGYodCkge1xuICAgIHQgPSB1aCh0LCBmaCk7XG4gICAgY29uc3QgZSA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIG4gPSBiaChlKSwgcyA9IG5ldyBoZihlKTtcbiAgICByZXR1cm4gamEobiwgdC5fa2V5KS50aGVuKChuID0+IG5ldyBzZihlLCBzLCB0Ll9rZXksIG4sIG5ldyBuZihudWxsICE9PSBuICYmIG4uaGFzTG9jYWxNdXRhdGlvbnMsIFxuICAgIC8qIGZyb21DYWNoZT0gKi8gITApLCB0LmNvbnZlcnRlcikpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gdGhlIHNlcnZlci5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGZmKHQpIHtcbiAgICB0ID0gdWgodCwgZmgpO1xuICAgIGNvbnN0IGUgPSB1aCh0LmZpcmVzdG9yZSwgdmgpO1xuICAgIHJldHVybiB6YShiaChlKSwgdC5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gQWYoZSwgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBkZih0KSB7XG4gICAgdCA9IHVoKHQsIGRoKTtcbiAgICBjb25zdCBlID0gdWgodC5maXJlc3RvcmUsIHZoKSwgbiA9IGJoKGUpLCBzID0gbmV3IGhmKGUpO1xuICAgIHJldHVybiBFbCh0Ll9xdWVyeSksIEhhKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBvZihlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlbXB0eSByZXN1bHQgc2V0IGlmIG5vIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgcXVlcnkgYXJlIGN1cnJlbnRseVxuICogY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiB3Zih0KSB7XG4gICAgdCA9IHVoKHQsIGRoKTtcbiAgICBjb25zdCBlID0gdWgodC5maXJlc3RvcmUsIHZoKSwgbiA9IGJoKGUpLCBzID0gbmV3IGhmKGUpO1xuICAgIHJldHVybiBXYShuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgb2YoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSB0aGVcbiAqIHNlcnZlci4gUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBfZih0KSB7XG4gICAgdCA9IHVoKHQsIGRoKTtcbiAgICBjb25zdCBlID0gdWgodC5maXJlc3RvcmUsIHZoKSwgbiA9IGJoKGUpLCBzID0gbmV3IGhmKGUpO1xuICAgIHJldHVybiBIYShuLCB0Ll9xdWVyeSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IG5ldyBvZihlLCBzLCB0LCBuKSkpO1xufVxuXG5mdW5jdGlvbiBtZih0LCBlLCBuKSB7XG4gICAgdCA9IHVoKHQsIGZoKTtcbiAgICBjb25zdCBzID0gdWgodC5maXJlc3RvcmUsIHZoKSwgaSA9IEhsKHQuY29udmVydGVyLCBlLCBuKTtcbiAgICByZXR1cm4gRWYocywgWyB0bChaaChzKSwgXCJzZXREb2NcIiwgdC5fa2V5LCBpLCBudWxsICE9PSB0LmNvbnZlcnRlciwgbikudG9NdXRhdGlvbih0Ll9rZXksIEZzLm5vbmUoKSkgXSk7XG59XG5cbmZ1bmN0aW9uIGdmKHQsIGUsIG4sIC4uLnMpIHtcbiAgICB0ID0gdWgodCwgZmgpO1xuICAgIGNvbnN0IGkgPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCByID0gWmgoaSk7XG4gICAgbGV0IG87XG4gICAgbyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChcbiAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgS2ggPyBjbChyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUsIG4sIHMpIDogdWwociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlKTtcbiAgICByZXR1cm4gRWYoaSwgWyBvLnRvTXV0YXRpb24odC5fa2V5LCBGcy5leGlzdHMoITApKSBdKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgc3BlY2lmaWVkIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBkZWxldGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBkZWxldGVkIGZyb20gdGhlIGJhY2tlbmQgKG5vdGUgdGhhdCBpdCB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiB5Zih0KSB7XG4gICAgcmV0dXJuIEVmKHVoKHQuZmlyZXN0b3JlLCB2aCksIFsgbmV3IFlzKHQuX2tleSwgRnMubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gcGYodCwgZSkge1xuICAgIGNvbnN0IG4gPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCBzID0gZ2godCksIGkgPSBIbCh0LmNvbnZlcnRlciwgZSk7XG4gICAgcmV0dXJuIEVmKG4sIFsgdGwoWmgodC5maXJlc3RvcmUpLCBcImFkZERvY1wiLCBzLl9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihzLl9rZXksIEZzLmV4aXN0cyghMSkpIF0pLnRoZW4oKCgpID0+IHMpKTtcbn1cblxuZnVuY3Rpb24gSWYodCwgLi4uZSkge1xuICAgIHZhciBuLCBzLCBpO1xuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCk7XG4gICAgbGV0IHIgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICExXG4gICAgfSwgbyA9IDA7XG4gICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgZVtvXSB8fCBUaChlW29dKSB8fCAociA9IGVbb10sIG8rKyk7XG4gICAgY29uc3QgdSA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogci5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzXG4gICAgfTtcbiAgICBpZiAoVGgoZVtvXSkpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbb107XG4gICAgICAgIGVbb10gPSBudWxsID09PSAobiA9IHQubmV4dCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5iaW5kKHQpLCBlW28gKyAxXSA9IG51bGwgPT09IChzID0gdC5lcnJvcikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5iaW5kKHQpLCBcbiAgICAgICAgZVtvICsgMl0gPSBudWxsID09PSAoaSA9IHQuY29tcGxldGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuYmluZCh0KTtcbiAgICB9XG4gICAgbGV0IGMsIGEsIGg7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBmaCkgYSA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIGggPSBHbih0Ll9rZXkucGF0aCksIGMgPSB7XG4gICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgZVtvXSAmJiBlW29dKEFmKGEsIHQsIG4pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICB9OyBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IHVoKHQsIGRoKTtcbiAgICAgICAgYSA9IHVoKG4uZmlyZXN0b3JlLCB2aCksIGggPSBuLl9xdWVyeTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBoZihhKTtcbiAgICAgICAgYyA9IHtcbiAgICAgICAgICAgIG5leHQ6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGVbb10gJiYgZVtvXShuZXcgb2YoYSwgcywgbiwgdCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgICAgICB9LCBFbCh0Ll9xdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgVmEocyksIHIgPSBuZXcgTmMoZSwgaSwgbik7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gVmMoYXdhaXQgS2EodCksIHIpKSksICgpID0+IHtcbiAgICAgICAgICAgIGkuRGMoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IFNjKGF3YWl0IEthKHQpLCByKSkpO1xuICAgICAgICB9O1xuICAgIH0oYmgoYSksIGgsIHUsIGMpO1xufVxuXG5mdW5jdGlvbiBUZih0LCBlKSB7XG4gICAgcmV0dXJuIEphKGJoKHQgPSB1aCh0LCB2aCkpLCBUaChlKSA/IGUgOiB7XG4gICAgICAgIG5leHQ6IGVcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBMb2NhbGx5IHdyaXRlcyBgbXV0YXRpb25zYCBvbiB0aGUgYXN5bmMgcXVldWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBFZih0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHpjKGF3YWl0IHFhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG4gICAgfShiaCh0KSwgZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSB7QGxpbmsgVmlld1NuYXBzaG90fSB0aGF0IGNvbnRhaW5zIHRoZSBzaW5nbGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGByZWZgXG4gKiB0byBhIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS5cbiAqLyBmdW5jdGlvbiBBZih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG4uZG9jcy5nZXQoZS5fa2V5KSwgaSA9IG5ldyBoZih0KTtcbiAgICByZXR1cm4gbmV3IHNmKHQsIGksIGUuX2tleSwgcywgbmV3IG5mKG4uaGFzUGVuZGluZ1dyaXRlcywgbi5mcm9tQ2FjaGUpLCBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgdGhlIGdpdmVuIHF1ZXJ5LFxuICogd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gY291bnQgdGhlIGRvY3VtZW50cyBpcyBlZmZpY2llbnQgYmVjYXVzZSBvbmx5IHRoZVxuICogZmluYWwgY291bnQsIG5vdCB0aGUgZG9jdW1lbnRzJyBkYXRhLCBpcyBkb3dubG9hZGVkLiBUaGlzIGZ1bmN0aW9uIGNhbiBldmVuXG4gKiBjb3VudCB0aGUgZG9jdW1lbnRzIGlmIHRoZSByZXN1bHQgc2V0IHdvdWxkIGJlIHByb2hpYml0aXZlbHkgbGFyZ2UgdG9cbiAqIGRvd25sb2FkIGVudGlyZWx5IChlLmcuIHRob3VzYW5kcyBvZiBkb2N1bWVudHMpLlxuICpcbiAqIFRoZSByZXN1bHQgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGlzIHByZXNlbnRlZCwgdW5hbHRlcmVkLCB3aXRob3V0XG4gKiBjb25zaWRlcmluZyBhbnkgbG9jYWwgc3RhdGUuIFRoYXQgaXMsIGRvY3VtZW50cyBpbiB0aGUgbG9jYWwgY2FjaGUgYXJlIG5vdFxuICogdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLCBuZWl0aGVyIGFyZSBsb2NhbCBtb2RpZmljYXRpb25zIG5vdCB5ZXRcbiAqIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuIFByZXZpb3VzbHktZG93bmxvYWRlZCByZXN1bHRzLCBpZiBhbnksIGFyZSBub3RcbiAqIHVzZWQ6IGV2ZXJ5IHJlcXVlc3QgdXNpbmcgdGhpcyBzb3VyY2UgbmVjZXNzYXJpbHkgaW52b2x2ZXMgYSByb3VuZCB0cmlwIHRvXG4gKiB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB3aG9zZSByZXN1bHQgc2V0IHNpemUgdG8gY2FsY3VsYXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSBjb3VudDsgdGhlIGNvdW50IGNhbiBiZVxuICogcmV0cmlldmVkIGZyb20gYHNuYXBzaG90LmRhdGEoKS5jb3VudGAsIHdoZXJlIGBzbmFwc2hvdGAgaXMgdGhlXG4gKiBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gd2hpY2ggdGhlIHJldHVybmVkIFByb21pc2UgcmVzb2x2ZXMuXG4gKi8gZnVuY3Rpb24gdmYodCkge1xuICAgIHJldHVybiBSZih0LCB7XG4gICAgICAgIGNvdW50OiBabCgpXG4gICAgfSk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3BlY2lmaWVkIGFnZ3JlZ2F0aW9ucyBvdmVyIHRoZSBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdFxuICogc2V0IG9mIHRoZSBnaXZlbiBxdWVyeSwgd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGFnZ3JlZ2F0aW9uIHZhbHVlcywgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGlzIGRvd25sb2FkZWQuIFRoaXNcbiAqIGZ1bmN0aW9uIGNhbiBldmVuIHBlcmZvcm0gYWdncmVnYXRpb25zIG9mIHRoZSBkb2N1bWVudHMgaWYgdGhlIHJlc3VsdCBzZXRcbiAqIHdvdWxkIGJlIHByb2hpYml0aXZlbHkgbGFyZ2UgdG8gZG93bmxvYWQgZW50aXJlbHkgKGUuZy4gdGhvdXNhbmRzIG9mIGRvY3VtZW50cykuXG4gKlxuICogVGhlIHJlc3VsdCByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgaXMgcHJlc2VudGVkLCB1bmFsdGVyZWQsIHdpdGhvdXRcbiAqIGNvbnNpZGVyaW5nIGFueSBsb2NhbCBzdGF0ZS4gVGhhdCBpcywgZG9jdW1lbnRzIGluIHRoZSBsb2NhbCBjYWNoZSBhcmUgbm90XG4gKiB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24sIG5laXRoZXIgYXJlIGxvY2FsIG1vZGlmaWNhdGlvbnMgbm90IHlldFxuICogc3luY2hyb25pemVkIHdpdGggdGhlIHNlcnZlci4gUHJldmlvdXNseS1kb3dubG9hZGVkIHJlc3VsdHMsIGlmIGFueSwgYXJlIG5vdFxuICogdXNlZDogZXZlcnkgcmVxdWVzdCB1c2luZyB0aGlzIHNvdXJjZSBuZWNlc3NhcmlseSBpbnZvbHZlcyBhIHJvdW5kIHRyaXAgdG9cbiAqIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IFRoZSBxdWVyeSB3aG9zZSByZXN1bHQgc2V0IHRvIGFnZ3JlZ2F0ZSBvdmVyLlxuICogQHBhcmFtIGFnZ3JlZ2F0ZVNwZWMgQW4gYEFnZ3JlZ2F0ZVNwZWNgIG9iamVjdCB0aGF0IHNwZWNpZmllcyB0aGUgYWdncmVnYXRlc1xuICogdG8gcGVyZm9ybSBvdmVyIHRoZSByZXN1bHQgc2V0LiBUaGUgQWdncmVnYXRlU3BlYyBzcGVjaWZpZXMgYWxpYXNlcyBmb3IgZWFjaFxuICogYWdncmVnYXRlLCB3aGljaCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYWdncmVnYXRlIHJlc3VsdC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhZ2dyZWdhdGVTbmFwc2hvdCA9IGF3YWl0IGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIocXVlcnksIHtcbiAqICAgY291bnRPZkRvY3M6IGNvdW50KCksXG4gKiAgIHRvdGFsSG91cnM6IHN1bSgnaG91cnMnKSxcbiAqICAgYXZlcmFnZVNjb3JlOiBhdmVyYWdlKCdzY29yZScpXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBjb3VudE9mRG9jczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmNvdW50T2ZEb2NzO1xuICogY29uc3QgdG90YWxIb3VyczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLnRvdGFsSG91cnM7XG4gKiBjb25zdCBhdmVyYWdlU2NvcmU6IG51bWJlciB8IG51bGwgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkuYXZlcmFnZVNjb3JlO1xuICogYGBgXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gUmYodCwgZSkge1xuICAgIGNvbnN0IG4gPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCBzID0gYmgobiksIGkgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBzKSAmJiBuLnB1c2goZSh0W3NdLCBzLCB0KSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH0oZSwgKCh0LCBlKSA9PiBuZXcgbmkoZSwgdC5fYWdncmVnYXRlVHlwZSwgdC5faW50ZXJuYWxGaWVsZFBhdGgpKSk7XG4gICAgLy8gUnVuIHRoZSBhZ2dyZWdhdGlvbiBhbmQgY29udmVydCB0aGUgcmVzdWx0c1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPIChzdW0vYXZnKSBzaG91bGQgd2UgdXBkYXRlIHRoaXMgdG8gdXNlIHRoZSBldmVudCBtYW5hZ2VyP1xuICAgICAgICAgICAgLy8gSW1wbGVtZW50IGFuZCBjYWxsIGV4ZWN1dGVBZ2dyZWdhdGVRdWVyeVZpYVNuYXBzaG90TGlzdGVuZXIsIHNpbWlsYXJcbiAgICAgICAgICAgIC8vIHRvIHRoZSBpbXBsZW1lbnRhdGlvbiBpbiBmaXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyXG4gICAgICAgICAgICAvLyBhYm92ZVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMjc3NjI4Mzg0KTogY2hlY2sgYGNhblVzZU5ldHdvcmsoKWAgYW5kIGhhbmRsZSBtdWx0aS10YWIuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGF3YWl0IFVhKHQpO1xuICAgICAgICAgICAgICAgIHMucmVzb2x2ZShHdShpLCBlLCBuKSk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgcy5yZWplY3QodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgcy5wcm9taXNlO1xuICAgIH0ocywgdC5fcXVlcnksIGkpLnRoZW4oKGUgPT4gXG4gICAgLyoqXG4gKiBDb252ZXJ0cyB0aGUgY29yZSBhZ2dyZWdyYXRpb24gcmVzdWx0IHRvIGFuIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YFxuICogdGhhdCBjYW4gYmUgcmV0dXJuZWQgdG8gdGhlIGNvbnN1bWVyLlxuICogQHBhcmFtIHF1ZXJ5XG4gKiBAcGFyYW0gYWdncmVnYXRlUmVzdWx0IENvcmUgYWdncmVnYXRpb24gcmVzdWx0XG4gKiBAaW50ZXJuYWxcbiAqL1xuICAgIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBoZih0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBxaChlLCBzLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4sIHQsIGUpKSk7XG59XG5cbmNsYXNzIFBmIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5XCIsIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IFBhLCAobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5nYXJiYWdlQ29sbGVjdG9yKSA/IHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IHQuZ2FyYmFnZUNvbGxlY3Rvci5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIDogdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IEVhO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIGJmIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICB0aGlzLmtpbmQgPSBcInBlcnNpc3RlbnRcIiwgKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQudGFiTWFuYWdlcikgPyAodC50YWJNYW5hZ2VyLl9pbml0aWFsaXplKHQpLCBcbiAgICAgICAgZSA9IHQudGFiTWFuYWdlcikgOiAoZSA9ICRmKHZvaWQgMCksIGUuX2luaXRpYWxpemUodCkpLCB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IGUuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCBcbiAgICAgICAgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gZS5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIFZmIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlFYWdlclwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgRWE7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgU2Yge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlMcnVcIiwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IEFhKHQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yYC4gVGhpcyBpcyBhbHNvIHRoZVxuICogZGVmYXVsdCBnYXJiYWdlIGNvbGxlY3RvciB1bmxlc3MgaXQgaXMgZXhwbGljaXRseSBzcGVjaWZpZWQgb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIERmKCkge1xuICAgIHJldHVybiBuZXcgVmY7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvcmAuXG4gKlxuICogQSB0YXJnZXQgc2l6ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHBhcnQgb2YgdGhlIHNldHRpbmcgcGFyYW1ldGVyLiBUaGVcbiAqIGNvbGxlY3RvciB3aWxsIHN0YXJ0IGRlbGV0aW5nIGRvY3VtZW50cyBvbmNlIHRoZSBjYWNoZSBzaXplIGV4Y2VlZHNcbiAqIHRoZSBnaXZlbiBzaXplLiBUaGUgZGVmYXVsdCBjYWNoZSBzaXplIGlzIDQwTUIgKDQwICogMTAyNCAqIDEwMjQgYnl0ZXMpLlxuICovIGZ1bmN0aW9uIENmKHQpIHtcbiAgICByZXR1cm4gbmV3IFNmKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuY2FjaGVTaXplQnl0ZXMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYE1lbW9yeUxvY2FsQ2FjaGVgLiBUaGUgaW5zdGFuY2UgY2FuIGJlIHNldCB0b1xuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byB0ZWxsIHRoZSBTREsgd2hpY2ggY2FjaGUgbGF5ZXIgdG8gdXNlLlxuICovIGZ1bmN0aW9uIHhmKHQpIHtcbiAgICByZXR1cm4gbmV3IFBmKHQpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRMb2NhbENhY2hlYC4gVGhlIGluc3RhbmNlIGNhbiBiZSBzZXQgdG9cbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgdG8gdGVsbCB0aGUgU0RLIHdoaWNoIGNhY2hlIGxheWVyIHRvIHVzZS5cbiAqXG4gKiBQZXJzaXN0ZW50IGNhY2hlIGNhbm5vdCBiZSB1c2VkIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudC5cbiAqLyBmdW5jdGlvbiBOZih0KSB7XG4gICAgcmV0dXJuIG5ldyBiZih0KTtcbn1cblxuY2xhc3Mga2Yge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5mb3JjZU93bmVyc2hpcCA9IHQsIHRoaXMua2luZCA9IFwicGVyc2lzdGVudFNpbmdsZVRhYlwiO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIF9pbml0aWFsaXplKHQpIHtcbiAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgUGEsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyB2YSh0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciwgbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5jYWNoZVNpemVCeXRlcywgdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxufVxuXG5jbGFzcyBNZiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwiUGVyc2lzdGVudE11bHRpcGxlVGFiXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgX2luaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBQYSwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IFJhKHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCBudWxsID09IHQgPyB2b2lkIDAgOiB0LmNhY2hlU2l6ZUJ5dGVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXJgLlxuICpcbiAqIEBwYXJhbSBzZXR0aW5ncyBDb25maWd1cmVzIHRoZSBjcmVhdGVkIHRhYiBtYW5hZ2VyLlxuICovIGZ1bmN0aW9uICRmKHQpIHtcbiAgICByZXR1cm4gbmV3IGtmKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuZm9yY2VPd25lcnNoaXApO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXJgLlxuICovIGZ1bmN0aW9uIE9mKCkge1xuICAgIHJldHVybiBuZXcgTWY7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEZmID0ge1xuICAgIG1heEF0dGVtcHRzOiA1XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHdyaXRlIGJhdGNoLCB1c2VkIHRvIHBlcmZvcm0gbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICpcbiAqIEEgYFdyaXRlQmF0Y2hgIG9iamVjdCBjYW4gYmUgYWNxdWlyZWQgYnkgY2FsbGluZyB7QGxpbmsgd3JpdGVCYXRjaH0uIEl0XG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBhZGRpbmcgd3JpdGVzIHRvIHRoZSB3cml0ZSBiYXRjaC4gTm9uZSBvZiB0aGUgd3JpdGVzXG4gKiB3aWxsIGJlIGNvbW1pdHRlZCAob3IgdmlzaWJsZSBsb2NhbGx5KSB1bnRpbCB7QGxpbmsgV3JpdGVCYXRjaC5jb21taXR9IGlzXG4gKiBjYWxsZWQuXG4gKi9cbmNsYXNzIEJmIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fY29tbWl0SGFuZGxlciA9IGUsIHRoaXMuX211dGF0aW9ucyA9IFtdLCB0aGlzLl9jb21taXR0ZWQgPSAhMSwgXG4gICAgICAgIHRoaXMuX2RhdGFSZWFkZXIgPSBaaCh0KTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IHMgPSBMZih0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gSGwocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gdGwodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihzLl9rZXksIEZzLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgaSA9IExmKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIEtoID8gY2wodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogdWwodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUpLCBcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKGkuX2tleSwgRnMuZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBlID0gTGYodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQobmV3IFlzKGUuX2tleSwgRnMubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1pdHMgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhpcyB3cml0ZSBiYXRjaCBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHQgb2YgdGhlc2Ugd3JpdGVzIHdpbGwgb25seSBiZSByZWZsZWN0ZWQgaW4gZG9jdW1lbnQgcmVhZHMgdGhhdFxuICAgICAqIG9jY3VyIGFmdGVyIHRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzLiBJZiB0aGUgY2xpZW50IGlzIG9mZmxpbmUsIHRoZVxuICAgICAqIHdyaXRlIGZhaWxzLiBJZiB5b3Ugd291bGQgbGlrZSB0byBzZWUgbG9jYWwgbW9kaWZpY2F0aW9ucyBvciBidWZmZXIgd3JpdGVzXG4gICAgICogdW50aWwgdGhlIGNsaWVudCBpcyBvbmxpbmUsIHVzZSB0aGUgZnVsbCBGaXJlc3RvcmUgU0RLLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgb25jZSBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGUgYmF0Y2ggaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bGx5IHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgYXMgYW4gYXRvbWljIHVuaXQgKG5vdGUgdGhhdCBpdCB3b24ndFxuICAgICAqIHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICAgICAqLyAgICBjb21taXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKSwgdGhpcy5fY29tbWl0dGVkID0gITAsIHRoaXMuX211dGF0aW9ucy5sZW5ndGggPiAwID8gdGhpcy5fY29tbWl0SGFuZGxlcih0aGlzLl9tdXRhdGlvbnMpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIF92ZXJpZnlOb3RDb21taXR0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb21taXR0ZWQpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIHdyaXRlIGJhdGNoIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlciBjb21taXQoKSBoYXMgYmVlbiBjYWxsZWQuXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTGYodCwgZSkge1xuICAgIGlmICgodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkuZmlyZXN0b3JlICE9PSBlKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiUHJvdmlkZWQgZG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIGluc3RhbmNlLlwiKTtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE8obXJzY2htaWR0KSBDb25zaWRlciB1c2luZyBgQmFzZVRyYW5zYWN0aW9uYCBhcyB0aGUgYmFzZSBjbGFzcyBpbiB0aGVcbi8vIGxlZ2FjeSBTREsuXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovXG5jbGFzcyBxZiBleHRlbmRzIGNsYXNzIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdHJhbnNhY3Rpb24gPSBlLCB0aGlzLl9kYXRhUmVhZGVyID0gWmgodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gTGYodCwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBKbCh0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24ubG9va3VwKFsgZS5fa2V5IF0pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0IHx8IDEgIT09IHQubGVuZ3RoKSByZXR1cm4gTygpO1xuICAgICAgICAgICAgY29uc3QgcyA9IHRbMF07XG4gICAgICAgICAgICBpZiAocy5pc0ZvdW5kRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBwbCh0aGlzLl9maXJlc3RvcmUsIG4sIHMua2V5LCBzLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICBpZiAocy5pc05vRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBwbCh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgbnVsbCwgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgTygpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBMZih0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gSGwocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gdGwodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5zZXQocy5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgY29uc3QgaSA9IExmKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIEtoID8gY2wodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IHVsKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi51cGRhdGUoaS5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IExmKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUoZS5fa2V5KSwgdGhpcztcbiAgICB9XG59IHtcbiAgICAvLyBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIHNhbWUgbG9naWMgYXMgdGhlIFRyYW5zYWN0aW9uIEFQSSBpbiB0aGUgTGl0ZSBTREtcbiAgICAvLyBidXQgaXMgc3ViY2xhc3NlZCBpbiBvcmRlciB0byByZXR1cm4gaXRzIG93biBEb2N1bWVudFNuYXBzaG90IHR5cGVzLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgdGhpcy5fZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBMZih0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IGhmKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXQodCkudGhlbigodCA9PiBuZXcgc2YodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIHQuX2RvY3VtZW50LCBuZXcgbmYoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIGUuY29udmVydGVyKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gYHVwZGF0ZUZ1bmN0aW9uYCBhbmQgdGhlbiBhdHRlbXB0cyB0byBjb21taXQgdGhlIGNoYW5nZXNcbiAqIGFwcGxpZWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvbi4gSWYgYW55IGRvY3VtZW50IHJlYWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogaGFzIGNoYW5nZWQsIENsb3VkIEZpcmVzdG9yZSByZXRyaWVzIHRoZSBgdXBkYXRlRnVuY3Rpb25gLiBJZiBpdCBmYWlscyB0b1xuICogY29tbWl0IGFmdGVyIDUgYXR0ZW1wdHMsIHRoZSB0cmFuc2FjdGlvbiBmYWlscy5cbiAqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gaXMgNTAwLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgRmlyZXN0b3JlIGRhdGFiYXNlIHRvIHJ1biB0aGlzXG4gKiB0cmFuc2FjdGlvbiBhZ2FpbnN0LlxuICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogY29udGV4dC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIG1heGltdW0gbnVtYmVyIG9mIGF0dGVtcHRzIHRvXG4gKiBjb21taXQuXG4gKiBAcmV0dXJucyBJZiB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBvciB3YXMgZXhwbGljaXRseSBhYm9ydGVkXG4gKiAodGhlIGB1cGRhdGVGdW5jdGlvbmAgcmV0dXJuZWQgYSBmYWlsZWQgcHJvbWlzZSksIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZVxuICogYHVwZGF0ZUZ1bmN0aW9uIGBpcyByZXR1cm5lZCBoZXJlLiBPdGhlcndpc2UsIGlmIHRoZSB0cmFuc2FjdGlvbiBmYWlsZWQsIGFcbiAqIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgY29ycmVzcG9uZGluZyBmYWlsdXJlIGVycm9yIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIFVmKHQsIGUsIG4pIHtcbiAgICB0ID0gdWgodCwgdmgpO1xuICAgIGNvbnN0IHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIEZmKSwgbik7XG4gICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKHQubWF4QXR0ZW1wdHMgPCAxKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiTWF4IGF0dGVtcHRzIG11c3QgYmUgYXQgbGVhc3QgMVwiKTtcbiAgICB9KHMpO1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgVWEodCk7XG4gICAgICAgICAgICBuZXcgQ2EodC5hc3luY1F1ZXVlLCBpLCBuLCBlLCBzKS5ydW4oKTtcbiAgICAgICAgfSkpLCBzLnByb21pc2U7XG4gICAgfShiaCh0KSwgKG4gPT4gZShuZXcgcWYodCwgbikpKSwgcyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCBmb3IgdXNlIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSBvclxuICoge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSB3aXRoIGB7bWVyZ2U6IHRydWV9YCB0byBtYXJrIGEgZmllbGQgZm9yIGRlbGV0aW9uLlxuICovIGZ1bmN0aW9uIEtmKCkge1xuICAgIHJldHVybiBuZXcgZWwoXCJkZWxldGVGaWVsZFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0b1xuICogaW5jbHVkZSBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wIGluIHRoZSB3cml0dGVuIGRhdGEuXG4gKi8gZnVuY3Rpb24gR2YoKSB7XG4gICAgcmV0dXJuIG5ldyBzbChcInNlcnZlclRpbWVzdGFtcFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gdW5pb24gdGhlIGdpdmVuIGVsZW1lbnRzIHdpdGggYW55IGFycmF5XG4gKiB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEVhY2ggc3BlY2lmaWVkIGVsZW1lbnQgdGhhdCBkb2Vzbid0XG4gKiBhbHJlYWR5IGV4aXN0IGluIHRoZSBhcnJheSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbmQuIElmIHRoZSBmaWVsZCBiZWluZ1xuICogbW9kaWZpZWQgaXMgbm90IGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGFycmF5XG4gKiBjb250YWluaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmllZCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gdW5pb24gaW50byB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWAuXG4gKi8gZnVuY3Rpb24gUWYoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBpbChcImFycmF5VW5pb25cIiwgdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayAoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIHVwZGF0ZURvYzoxfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gcmVtb3ZlIHRoZSBnaXZlbiBlbGVtZW50cyBmcm9tIGFueVxuICogYXJyYXkgdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBBbGwgaW5zdGFuY2VzIG9mIGVhY2ggZWxlbWVudFxuICogc3BlY2lmaWVkIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheS4gSWYgdGhlIGZpZWxkIGJlaW5nIG1vZGlmaWVkIGlzIG5vdFxuICogYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gZW1wdHkgYXJyYXkuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIGpmKC4uLnQpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgcmwoXCJhcnJheVJlbW92ZVwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gaW5jcmVtZW50IHRoZSBmaWVsZCdzIGN1cnJlbnQgdmFsdWUgYnlcbiAqIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBJZiBlaXRoZXIgdGhlIG9wZXJhbmQgb3IgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgdXNlcyBmbG9hdGluZyBwb2ludFxuICogcHJlY2lzaW9uLCBhbGwgYXJpdGhtZXRpYyBmb2xsb3dzIElFRUUgNzU0IHNlbWFudGljcy4gSWYgYm90aCB2YWx1ZXMgYXJlXG4gKiBpbnRlZ2VycywgdmFsdWVzIG91dHNpZGUgb2YgSmF2YVNjcmlwdCdzIHNhZmUgbnVtYmVyIHJhbmdlXG4gKiAoYE51bWJlci5NSU5fU0FGRV9JTlRFR0VSYCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgKSBhcmUgYWxzbyBzdWJqZWN0IHRvXG4gKiBwcmVjaXNpb24gbG9zcy4gRnVydGhlcm1vcmUsIG9uY2UgcHJvY2Vzc2VkIGJ5IHRoZSBGaXJlc3RvcmUgYmFja2VuZCwgYWxsXG4gKiBpbnRlZ2VyIG9wZXJhdGlvbnMgYXJlIGNhcHBlZCBiZXR3ZWVuIC0yXjYzIGFuZCAyXjYzLTEuXG4gKlxuICogSWYgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgaXMgbm90IG9mIHR5cGUgYG51bWJlcmAsIG9yIGlmIHRoZSBmaWVsZCBkb2VzIG5vdFxuICogeWV0IGV4aXN0LCB0aGUgdHJhbnNmb3JtYXRpb24gc2V0cyB0aGUgZmllbGQgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBuIC0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBieS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIHpmKHQpIHtcbiAgICByZXR1cm4gbmV3IG9sKFwiaW5jcmVtZW50XCIsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgd3JpdGUgYmF0Y2gsIHVzZWQgZm9yIHBlcmZvcm1pbmcgbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlXG4gKiBhdG9taWMgb3BlcmF0aW9uLiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUge0BsaW5rIFdyaXRlQmF0Y2h9XG4gKiBpcyA1MDAuXG4gKlxuICogVW5saWtlIHRyYW5zYWN0aW9ucywgd3JpdGUgYmF0Y2hlcyBhcmUgcGVyc2lzdGVkIG9mZmxpbmUgYW5kIHRoZXJlZm9yZSBhcmVcbiAqIHByZWZlcmFibGUgd2hlbiB5b3UgZG9uJ3QgbmVlZCB0byBjb25kaXRpb24geW91ciB3cml0ZXMgb24gcmVhZCBkYXRhLlxuICpcbiAqIEByZXR1cm5zIEEge0BsaW5rIFdyaXRlQmF0Y2h9IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXRvbWljYWxseSBleGVjdXRlIG11bHRpcGxlXG4gKiB3cml0ZXMuXG4gKi8gZnVuY3Rpb24gV2YodCkge1xuICAgIHJldHVybiBiaCh0ID0gdWgodCwgdmgpKSwgbmV3IEJmKHQsIChlID0+IEVmKHQsIGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIEhmKHQsIGUpIHtcbiAgICB2YXIgbjtcbiAgICBjb25zdCBzID0gYmgodCA9IHVoKHQsIHZoKSk7XG4gICAgaWYgKCFzLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyIHx8IFwibWVtb3J5XCIgPT09IChudWxsID09PSAobiA9IHMuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uX29mZmxpbmVLaW5kKSkgXG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCByZXR1cm4gYW4gZXJyb3IgaWYgdGhlIHVzZXIgaGFzIG5vdCBlbmFibGVkXG4gICAgLy8gcGVyc2lzdGVuY2Ugc2luY2UgYGVuYWJsZUluZGV4ZWRkYlBlcnNpc3RlbmNlKClgIGNhbiBmYWlsIG9uIHRoZSBXZWIuXG4gICAgcmV0dXJuIE0oXCJDYW5ub3QgZW5hYmxlIGluZGV4ZXMgd2hlbiBwZXJzaXN0ZW5jZSBpcyBkaXNhYmxlZFwiKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHQpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gcGFyc2UgSlNPTjogXCIgKyAobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5tZXNzYWdlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odCkgOiB0LCBuID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUuaW5kZXhlcykpIGZvciAoY29uc3QgdCBvZiBlLmluZGV4ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBKZih0LCBcImNvbGxlY3Rpb25Hcm91cFwiKSwgcyA9IFtdO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodC5maWVsZHMpKSBmb3IgKGNvbnN0IGUgb2YgdC5maWVsZHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbWwoXCJzZXRJbmRleENvbmZpZ3VyYXRpb25cIiwgSmYoZSwgXCJmaWVsZFBhdGhcIikpO1xuICAgICAgICAgICAgICAgIFwiQ09OVEFJTlNcIiA9PT0gZS5hcnJheUNvbmZpZyA/IHMucHVzaChuZXcgX3QodCwgMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8pKSA6IFwiQVNDRU5ESU5HXCIgPT09IGUub3JkZXIgPyBzLnB1c2gobmV3IF90KHQsIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLykpIDogXCJERVNDRU5ESU5HXCIgPT09IGUub3JkZXIgJiYgcy5wdXNoKG5ldyBfdCh0LCAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuLnB1c2gobmV3IGx0KGx0LlVOS05PV05fSUQsIGUsIHMsIGd0LmVtcHR5KCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9KGUpO1xuICAgIHJldHVybiBaYShzLCBpKTtcbn1cblxuZnVuY3Rpb24gSmYodCwgZSkge1xuICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiB0W2VdKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiTWlzc2luZyBzdHJpbmcgdmFsdWUgZm9yOiBcIiArIGUpO1xuICAgIHJldHVybiB0W2VdO1xufVxuXG4vKipcbiAqIENsb3VkIEZpcmVzdG9yZVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovICFmdW5jdGlvbih0LCBlID0gITApIHtcbiAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICBTID0gdDtcbiAgICB9KFNES19WRVJTSU9OKSwgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJmaXJlc3RvcmVcIiwgKCh0LCB7aW5zdGFuY2VJZGVudGlmaWVyOiBuLCBvcHRpb25zOiBzfSkgPT4ge1xuICAgICAgICBjb25zdCBpID0gdC5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKSwgciA9IG5ldyB2aChuZXcgeih0LmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiKSksIG5ldyBZKHQuZ2V0UHJvdmlkZXIoXCJhcHAtY2hlY2staW50ZXJuYWxcIikpLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkodC5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9lKHQub3B0aW9ucy5wcm9qZWN0SWQsIGUpO1xuICAgICAgICB9KGksIG4pLCBpKTtcbiAgICAgICAgcmV0dXJuIHMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHVzZUZldGNoU3RyZWFtczogZVxuICAgICAgICB9LCBzKSwgci5fc2V0U2V0dGluZ3MocyksIHI7XG4gICAgfSksIFwiUFVCTElDXCIpLnNldE11bHRpcGxlSW5zdGFuY2VzKCEwKSksIHJlZ2lzdGVyVmVyc2lvbihiLCBcIjMuMTIuMlwiLCB0KSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oYiwgXCIzLjEyLjJcIiwgXCJlc20yMDE3XCIpO1xufSgpO1xuXG5leHBvcnQgeyBXbCBhcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBMaCBhcyBBZ2dyZWdhdGVGaWVsZCwgcWggYXMgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCwgVWggYXMgQnl0ZXMsIEFoIGFzIENBQ0hFX1NJWkVfVU5MSU1JVEVELCB3aCBhcyBDb2xsZWN0aW9uUmVmZXJlbmNlLCBmaCBhcyBEb2N1bWVudFJlZmVyZW5jZSwgc2YgYXMgRG9jdW1lbnRTbmFwc2hvdCwgS2ggYXMgRmllbGRQYXRoLCBRaCBhcyBGaWVsZFZhbHVlLCB2aCBhcyBGaXJlc3RvcmUsIFUgYXMgRmlyZXN0b3JlRXJyb3IsIGpoIGFzIEdlb1BvaW50LCBFaCBhcyBMb2FkQnVuZGxlVGFzaywgZGggYXMgUXVlcnksIFZsIGFzIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCwgdmwgYXMgUXVlcnlDb25zdHJhaW50LCByZiBhcyBRdWVyeURvY3VtZW50U25hcHNob3QsIEJsIGFzIFF1ZXJ5RW5kQXRDb25zdHJhaW50LCBQbCBhcyBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCwgTmwgYXMgUXVlcnlMaW1pdENvbnN0cmFpbnQsIENsIGFzIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnQsIG9mIGFzIFF1ZXJ5U25hcHNob3QsICRsIGFzIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQsIG5mIGFzIFNuYXBzaG90TWV0YWRhdGEsIGl0IGFzIFRpbWVzdGFtcCwgcWYgYXMgVHJhbnNhY3Rpb24sIEJmIGFzIFdyaXRlQmF0Y2gsIE9lIGFzIF9EYXRhYmFzZUlkLCBodCBhcyBfRG9jdW1lbnRLZXksIFggYXMgX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyLCBRIGFzIF9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLCBhdCBhcyBfRmllbGRQYXRoLCBjaSBhcyBfVGVzdGluZ0hvb2tzLCB1aCBhcyBfY2FzdCwgQiBhcyBfZGVidWdBc3NlcnQsIGJlIGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgTSBhcyBfbG9nV2Fybiwgc2ggYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIHBmIGFzIGFkZERvYywgdGYgYXMgYWdncmVnYXRlRmllbGRFcXVhbCwgZWYgYXMgYWdncmVnYXRlUXVlcnlTbmFwc2hvdEVxdWFsLCBEbCBhcyBhbmQsIGpmIGFzIGFycmF5UmVtb3ZlLCBRZiBhcyBhcnJheVVuaW9uLCBYbCBhcyBhdmVyYWdlLCB4aCBhcyBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCBfaCBhcyBjb2xsZWN0aW9uLCBtaCBhcyBjb2xsZWN0aW9uR3JvdXAsIGxoIGFzIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgWmwgYXMgY291bnQsIHlmIGFzIGRlbGV0ZURvYywgS2YgYXMgZGVsZXRlRmllbGQsIE1oIGFzIGRpc2FibGVOZXR3b3JrLCBnaCBhcyBkb2MsIEdoIGFzIGRvY3VtZW50SWQsIFNoIGFzIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBEaCBhcyBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBraCBhcyBlbmFibGVOZXR3b3JrLCBxbCBhcyBlbmRBdCwgTGwgYXMgZW5kQmVmb3JlLCBiaCBhcyBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkLCBFZiBhcyBleGVjdXRlV3JpdGUsIFJmIGFzIGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIsIHZmIGFzIGdldENvdW50RnJvbVNlcnZlciwgYWYgYXMgZ2V0RG9jLCBsZiBhcyBnZXREb2NGcm9tQ2FjaGUsIGZmIGFzIGdldERvY0Zyb21TZXJ2ZXIsIGRmIGFzIGdldERvY3MsIHdmIGFzIGdldERvY3NGcm9tQ2FjaGUsIF9mIGFzIGdldERvY3NGcm9tU2VydmVyLCBQaCBhcyBnZXRGaXJlc3RvcmUsIHpmIGFzIGluY3JlbWVudCwgUmggYXMgaW5pdGlhbGl6ZUZpcmVzdG9yZSwga2wgYXMgbGltaXQsIE1sIGFzIGxpbWl0VG9MYXN0LCBPaCBhcyBsb2FkQnVuZGxlLCBEZiBhcyBtZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3IsIHhmIGFzIG1lbW9yeUxvY2FsQ2FjaGUsIENmIGFzIG1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3IsIEZoIGFzIG5hbWVkUXVlcnksIElmIGFzIG9uU25hcHNob3QsIFRmIGFzIG9uU25hcHNob3RzSW5TeW5jLCBTbCBhcyBvciwgeGwgYXMgb3JkZXJCeSwgTmYgYXMgcGVyc2lzdGVudExvY2FsQ2FjaGUsIE9mIGFzIHBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXIsICRmIGFzIHBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyLCBSbCBhcyBxdWVyeSwgcGggYXMgcXVlcnlFcXVhbCwgeWggYXMgcmVmRXF1YWwsIFVmIGFzIHJ1blRyYW5zYWN0aW9uLCBHZiBhcyBzZXJ2ZXJUaW1lc3RhbXAsIG1mIGFzIHNldERvYywgSGYgYXMgc2V0SW5kZXhDb25maWd1cmF0aW9uLCB4IGFzIHNldExvZ0xldmVsLCBjZiBhcyBzbmFwc2hvdEVxdWFsLCBGbCBhcyBzdGFydEFmdGVyLCBPbCBhcyBzdGFydEF0LCBZbCBhcyBzdW0sICRoIGFzIHRlcm1pbmF0ZSwgZ2YgYXMgdXBkYXRlRG9jLCBOaCBhcyB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgYmwgYXMgd2hlcmUsIFdmIGFzIHdyaXRlQmF0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMgKi9cblxuaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcbmltcG9ydCB7XG4gIGdldEZpcmVzdG9yZSxcbiAgY29sbGVjdGlvbixcbiAgZG9jLFxuICBnZXREb2MsXG4gIGdldERvY3MsXG4gIHNldERvYyxcbn0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5BUElfS0VZLFxuICBhdXRoRG9tYWluOiBcIndoZXJlLWlzLXdhbGRvLTRlYjhmLmZpcmViYXNlYXBwLmNvbVwiLFxuICBwcm9qZWN0SWQ6IFwid2hlcmUtaXMtd2FsZG8tNGViOGZcIixcbiAgc3RvcmFnZUJ1Y2tldDogXCJ3aGVyZS1pcy13YWxkby00ZWI4Zi5hcHBzcG90LmNvbVwiLFxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI3MjExNDc3ODI1NDVcIixcbiAgYXBwSWQ6IFwiMTo3MjExNDc3ODI1NDU6d2ViOjM1ZDk3NmRjZDc4NzdjOGI3NDI2MzBcIixcbn07XG5cbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuXG5jb25zdCBkYiA9IGdldEZpcmVzdG9yZShhcHApO1xuXG5leHBvcnQgeyBhcHAsIGRiLCBjb2xsZWN0aW9uLCBkb2MsIGdldERvYywgZ2V0RG9jcywgc2V0RG9jIH07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1zaGFkb3cgKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgeyBkYiwgY29sbGVjdGlvbiwgZG9jLCBnZXREb2MsIGdldERvY3MsIHNldERvYyB9IGZyb20gXCIuL2ZpcmViYXNlXCI7XG5cbmV4cG9ydCBjb25zdCBMb2NhdGlvbk1hbmFnZXIgPSAoKCkgPT4ge1xuICBjb25zdCBiYWNrZ3JvdW5kSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kSW1nXCIpO1xuXG4gIGNvbnN0IGNoYXJhY3RlcnMgPSB7XG4gICAgYm93c2VyOiB7IGxlZnQ6IDE0MzAsIHRvcDogMzEzMCwgcmlnaHQ6IDE3MzAsIGJvdHRvbTogMzQyNCB9LFxuICAgIG5lbzogeyBsZWZ0OiA2OTAsIHRvcDogNDcwMCwgcmlnaHQ6IDkwMCwgYm90dG9tOiA0OTAwIH0sXG4gICAgd2FsZG86IHsgbGVmdDogMTQ1MCwgdG9wOiA2NTUwLCByaWdodDogMTY1MCwgYm90dG9tOiA2NzUwIH0sXG4gICAgbWVnOiB7IGxlZnQ6IDI1NiwgdG9wOiA0ODQsIHJpZ2h0OiA0NTYsIGJvdHRvbTogNjg0IH0sXG4gICAgcGlrYWNodTogeyBsZWZ0OiA5ODIsIHRvcDogMTQzNywgcmlnaHQ6IDExODIsIGJvdHRvbTogMTYzNyB9LFxuICAgIG1pa2U6IHsgbGVmdDogMTEyMSwgdG9wOiAxNTM4LCByaWdodDogMTMyMSwgYm90dG9tOiAxNzM4IH0sXG4gIH07XG5cbiAgY29uc3QgZ2V0Q29vcmRpbmF0ZXMgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCByZWN0ID0gYmFja2dyb3VuZEltZy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCB4ID0gZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdDtcbiAgICBjb25zdCB5ID0gZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wO1xuICAgIC8vIGNvbnNvbGUubG9nKGBYOiAke3h9LCBZOiAke3l9YCk7XG5cbiAgICBjb25zdCByZWZlcmVuY2VXaWR0aCA9IDE5MjA7XG4gICAgY29uc3Qgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBjb25zdCBzY2FsaW5nRmFjdG9yID0gc2NyZWVuV2lkdGggLyByZWZlcmVuY2VXaWR0aDtcblxuICAgIGNvbnN0IHNjYWxlZFggPSB4IC8gc2NhbGluZ0ZhY3RvcjtcbiAgICBjb25zdCBzY2FsZWRZID0geSAvIHNjYWxpbmdGYWN0b3I7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgU2NhbGVkIFg6ICR7c2NhbGVkWH0sIFNjYWxlZCBZOiAke3NjYWxlZFl9YCk7XG5cbiAgICByZXR1cm4geyB4LCB5LCBzY2FsZWRYLCBzY2FsZWRZIH07XG4gIH07XG5cbiAgY29uc3QgZ2V0Q29vcmRpbmF0ZUFyZWEgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCB7IHNjYWxlZFgsIHNjYWxlZFkgfSA9IGdldENvb3JkaW5hdGVzKGV2ZW50KTtcblxuICAgIGNvbnN0IGFyZWEgPSB7XG4gICAgICBsZWZ0OiBzY2FsZWRYIC0gMTAwLFxuICAgICAgdG9wOiBzY2FsZWRZIC0gMTAwLFxuICAgICAgcmlnaHQ6IHNjYWxlZFggKyAxMDAsXG4gICAgICBib3R0b206IHNjYWxlZFkgKyAxMDAsXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKGBBcmVhOiAke0pTT04uc3RyaW5naWZ5KGFyZWEpfWApO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY2hhcmFjdGVycyxcbiAgICBnZXRDb29yZGluYXRlcyxcbiAgICBnZXRDb29yZGluYXRlQXJlYSxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBGaXJlc3RvcmVNYW5hZ2VyID0gKCgpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gIGNvbnN0IGNoYXJhY3RlcnMgPSBMb2NhdGlvbk1hbmFnZXIuY2hhcmFjdGVycztcblxuICBjb25zdCBzdG9yZUNoYXJhY3RlckxvY2F0aW9ucyA9ICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgT2JqZWN0LmVudHJpZXMoY2hhcmFjdGVycykuZm9yRWFjaChcbiAgICAgICAgKFtjaGFyYWN0ZXIsIHsgbGVmdCwgdG9wLCByaWdodCwgYm90dG9tIH1dKSA9PiB7XG4gICAgICAgICAgc2V0RG9jKGRvYyhkYiwgXCJjaGFyYWN0ZXJMb2NhdGlvbnNcIiwgY2hhcmFjdGVyKSwge1xuICAgICAgICAgICAgbGVmdCxcbiAgICAgICAgICAgIHRvcCxcbiAgICAgICAgICAgIHJpZ2h0LFxuICAgICAgICAgICAgYm90dG9tLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke2NoYXJhY3Rlcn0gbG9jYXRpb24gc3RvcmVkIHN1Y2Nlc3NmdWxseS5gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHN0b3JpbmcgJHtjaGFyYWN0ZXJ9IGxvY2F0aW9uOmAsIGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc3RvcmluZyBjaGFyYWN0ZXIgbG9jYXRpb25zOlwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldENoYXJhY3RlckxvY2F0aW9ucyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsIFwiY2hhcmFjdGVyTG9jYXRpb25zXCIpKTtcblxuICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IGRvYy5pZDtcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20gfSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2NoYXJhY3Rlcn06ICgke2xlZnR9LCAke3RvcH0sICR7cmlnaHR9LCAke2JvdHRvbX0pYCk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgY2hhcmFjdGVyIGxvY2F0aW9uczpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB2ZXJpZnlDbGlja2VkUG9zaXRpb24gPSBhc3luYyAoeCwgeSwgZ2FtZUNob2ljZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgXCJjaGFyYWN0ZXJMb2NhdGlvbnNcIikpO1xuICAgICAgbGV0IGZvdW5kQ2hhcmFjdGVyID0gbnVsbDtcblxuICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IGRvYy5pZDtcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20gfSA9IGRvYy5kYXRhKCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIChnYW1lQ2hvaWNlID09PSBcImN5YmVycHVua1wiICYmXG4gICAgICAgICAgICAoY2hhcmFjdGVyID09PSBcImJvd3NlclwiIHx8XG4gICAgICAgICAgICAgIGNoYXJhY3RlciA9PT0gXCJuZW9cIiB8fFxuICAgICAgICAgICAgICBjaGFyYWN0ZXIgPT09IFwid2FsZG9cIikpIHx8XG4gICAgICAgICAgKGdhbWVDaG9pY2UgPT09IFwicm9ib3RcIiAmJlxuICAgICAgICAgICAgKGNoYXJhY3RlciA9PT0gXCJtZWdcIiB8fFxuICAgICAgICAgICAgICBjaGFyYWN0ZXIgPT09IFwicGlrYWNodVwiIHx8XG4gICAgICAgICAgICAgIGNoYXJhY3RlciA9PT0gXCJtaWtlXCIpKVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoeCA+PSBsZWZ0ICYmIHggPD0gcmlnaHQgJiYgeSA+PSB0b3AgJiYgeSA8PSBib3R0b20pIHtcbiAgICAgICAgICAgIGZvdW5kQ2hhcmFjdGVyID0gY2hhcmFjdGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBmb3VuZENoYXJhY3RlcjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHZlcmlmeWluZyBjbGlja2VkIHBvc2l0aW9uOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hlY2tVc2VyRXhpc3RzID0gYXN5bmMgKHVzZXJuYW1lLCBnYW1lQ2hvaWNlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJEb2NSZWYgPSBkb2MoZGIsIGB1c2VyVGltZXMtJHtnYW1lQ2hvaWNlfWAsIHVzZXJuYW1lKTtcbiAgICAgIGNvbnN0IHVzZXJEb2NTbmFwc2hvdCA9IGF3YWl0IGdldERvYyh1c2VyRG9jUmVmKTtcbiAgICAgIHJldHVybiB1c2VyRG9jU25hcHNob3QuZXhpc3RzKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNoZWNraW5nIGlmIHVzZXIgJHt1c2VybmFtZX0gZXhpc3RzOmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc3RvcmVVc2VyVGltZSA9IGFzeW5jICh1c2VybmFtZSwgdGltZSwgZ2FtZUNob2ljZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCBgdXNlclRpbWVzLSR7Z2FtZUNob2ljZX1gLCB1c2VybmFtZSksIHsgdGltZSB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3Igc3RvcmluZyB1c2VyIHRpbWUgZm9yICR7dXNlcm5hbWV9OmAsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGNvbnN0IGdldFRvcDEwVGltZXMgPSBhc3luYyAoZ2FtZUNob2ljZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgYHVzZXJUaW1lcy0ke2dhbWVDaG9pY2V9YCkpO1xuXG4gICAgICBjb25zdCB1c2VyVGltZXMgPSBbXTtcbiAgICAgIHNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xuICAgICAgICBjb25zdCB1c2VybmFtZSA9IGRvYy5pZDtcbiAgICAgICAgY29uc3QgeyB0aW1lIH0gPSBkb2MuZGF0YSgpO1xuICAgICAgICB1c2VyVGltZXMucHVzaCh7IHVzZXJuYW1lLCB0aW1lIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHVzZXJUaW1lcy5zb3J0KChhLCBiKSA9PiBhLnRpbWUubG9jYWxlQ29tcGFyZShiLnRpbWUpKTtcblxuICAgICAgY29uc3QgdG9wMTBVc2VyVGltZXMgPSB1c2VyVGltZXMuc2xpY2UoMCwgMTApO1xuXG4gICAgICByZXR1cm4gdG9wMTBVc2VyVGltZXM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIHVzZXIgdGltZXM6XCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzdG9yZUNoYXJhY3RlckxvY2F0aW9ucyxcbiAgICBnZXRDaGFyYWN0ZXJMb2NhdGlvbnMsXG4gICAgdmVyaWZ5Q2xpY2tlZFBvc2l0aW9uLFxuICAgIGNoZWNrVXNlckV4aXN0cyxcbiAgICBzdG9yZVVzZXJUaW1lLFxuICAgIGdldFRvcDEwVGltZXMsXG4gIH07XG59KSgpO1xuIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1jeWNsZVxuaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCIuL2FwcFwiO1xuXG5leHBvcnQgY29uc3QgUmVuZGVyZXJIZWxwZXJzID0gKCgpID0+IHtcbiAgY29uc3Qgc2V0UG9zaXRpb24gPSAoZWxlbWVudCwgeCwgeSkgPT4ge1xuICAgIGNvbnN0IHBvc2l0aW9uZWQgPSBlbGVtZW50O1xuICAgIHBvc2l0aW9uZWQuc3R5bGUubGVmdCA9IGAke3h9cHhgO1xuICAgIHBvc2l0aW9uZWQuc3R5bGUudG9wID0gYCR7eX1weGA7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlRGl2ID0gKGNsYXNzTmFtZSwgdGV4dCkgPT4ge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGl2LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICBpZiAodGV4dCkge1xuICAgICAgZGl2LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG4gICAgcmV0dXJuIGRpdjtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVCdXR0b24gPSAodGV4dCwgY2hhcmFjdGVyKSA9PiB7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIGJ1dHRvbi50eXBlID0gXCJidXR0b25cIjtcbiAgICBidXR0b24uZGF0YXNldC5jaGFyYWN0ZXIgPSBjaGFyYWN0ZXI7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBDb250cm9sbGVyLmhhbmRsZUNoYXJhY3RlckJ1dHRvbkNsaWNrKTtcbiAgICByZXR1cm4gYnV0dG9uO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUVsZW1lbnQgPSAoZWxlbWVudCkgPT4ge1xuICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzZXRQb3NpdGlvbixcbiAgICBjcmVhdGVEaXYsXG4gICAgY3JlYXRlQnV0dG9uLFxuICAgIHJlbW92ZUVsZW1lbnQsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgY29uc3QgUmVuZGVyZXIgPSAoKCkgPT4ge1xuICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250ZW50XCIpO1xuXG4gIGNvbnN0IGNpcmNsZXMgPSBbXTtcbiAgY29uc3QgcG9wdXBzID0gW107XG5cbiAgY29uc3QgY3JlYXRlRmVlZGJhY2tNc2cgPSAobWVzc2FnZSwgeCwgeSwgY29sb3IgPSBcInJlZFwiKSA9PiB7XG4gICAgY29uc3QgZmVlZGJhY2tNc2cgPSBSZW5kZXJlckhlbHBlcnMuY3JlYXRlRGl2KFwiZmVlZGJhY2tcIiwgbWVzc2FnZSk7XG4gICAgUmVuZGVyZXJIZWxwZXJzLnNldFBvc2l0aW9uKGZlZWRiYWNrTXNnLCB4IC0gMTUwLCB5IC0gMTAwKTtcbiAgICBmZWVkYmFja01zZy5zdHlsZS5iYWNrZ3JvdW5kID0gYHJnYmEoJHtcbiAgICAgIGNvbG9yID09PSBcImdyZWVuXCIgPyBcIjAsIDI1NSwgMFwiIDogXCIyNTUsIDAsIDBcIlxuICAgIH0sIDAuNylgO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZmVlZGJhY2tNc2cpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBmZWVkYmFja01zZy5yZW1vdmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVDaXJjbGUgPSAoKSA9PiB7XG4gICAgaWYgKGNpcmNsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2lyY2xlVG9SZW1vdmUgPSBjaXJjbGVzLnBvcCgpO1xuICAgICAgUmVuZGVyZXJIZWxwZXJzLnJlbW92ZUVsZW1lbnQoY2lyY2xlVG9SZW1vdmUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBjcmVhdGVDaXJjbGUgPSAoeCwgeSkgPT4ge1xuICAgIGNvbnN0IGNpcmNsZSA9IFJlbmRlcmVySGVscGVycy5jcmVhdGVEaXYoXCJjaXJjbGVcIik7XG4gICAgUmVuZGVyZXJIZWxwZXJzLnNldFBvc2l0aW9uKGNpcmNsZSwgeCAtIDUwLCB5IC0gNTApO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcbiAgICBjaXJjbGVzLnB1c2goY2lyY2xlKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVQb3B1cCA9ICgpID0+IHtcbiAgICBpZiAocG9wdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHBvcHVwVG9SZW1vdmUgPSBwb3B1cHMucG9wKCk7XG4gICAgICBSZW5kZXJlckhlbHBlcnMucmVtb3ZlRWxlbWVudChwb3B1cFRvUmVtb3ZlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUG9wdXAgPSAoeCwgeSwgZm91bmRDaGFyYWN0ZXJzKSA9PiB7XG4gICAgY29uc3QgcG9wdXAgPSBSZW5kZXJlckhlbHBlcnMuY3JlYXRlRGl2KFwiY2hvaWNlXCIpO1xuXG4gICAgY29uc3QgbWF4WCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gMTUwO1xuICAgIGNvbnN0IHBvcHVwWCA9IHggKyA2MDtcblxuICAgIGlmIChwb3B1cFggPiBtYXhYKSB7XG4gICAgICBSZW5kZXJlckhlbHBlcnMuc2V0UG9zaXRpb24ocG9wdXAsIHggLSAxNjAsIHkgLSA3MCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlbmRlcmVySGVscGVycy5zZXRQb3NpdGlvbihwb3B1cCwgeCArIDYwLCB5IC0gNzApO1xuICAgIH1cblxuICAgIGNvbnN0IGdhbWVDaG9pY2UgPSBDb250cm9sbGVyLmdldEdhbWVDaG9pY2UoKTtcblxuICAgIGxldCBvcHRpb25zO1xuXG4gICAgaWYgKGdhbWVDaG9pY2UgPT09IFwiY3liZXJwdW5rXCIpIHtcbiAgICAgIG9wdGlvbnMgPSBbXG4gICAgICAgIHsgdGV4dDogXCJCb3dzZXJcIiwgY2hhcmFjdGVyOiBcImJvd3NlclwiIH0sXG4gICAgICAgIHsgdGV4dDogXCJOZW9cIiwgY2hhcmFjdGVyOiBcIm5lb1wiIH0sXG4gICAgICAgIHsgdGV4dDogXCJXYWxkb1wiLCBjaGFyYWN0ZXI6IFwid2FsZG9cIiB9LFxuICAgICAgXTtcbiAgICB9IGVsc2UgaWYgKGdhbWVDaG9pY2UgPT09IFwicm9ib3RcIikge1xuICAgICAgb3B0aW9ucyA9IFtcbiAgICAgICAgeyB0ZXh0OiBcIk1lZ1wiLCBjaGFyYWN0ZXI6IFwibWVnXCIgfSxcbiAgICAgICAgeyB0ZXh0OiBcIlBpa2FjaHVcIiwgY2hhcmFjdGVyOiBcInBpa2FjaHVcIiB9LFxuICAgICAgICB7IHRleHQ6IFwiTWlrZVwiLCBjaGFyYWN0ZXI6IFwibWlrZVwiIH0sXG4gICAgICBdO1xuICAgIH1cblxuICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICBjb25zdCBjaG9pY2UgPSBSZW5kZXJlckhlbHBlcnMuY3JlYXRlQnV0dG9uKFxuICAgICAgICBvcHRpb24udGV4dCxcbiAgICAgICAgb3B0aW9uLmNoYXJhY3RlclxuICAgICAgKTtcblxuICAgICAgaWYgKGZvdW5kQ2hhcmFjdGVycy5pbmNsdWRlcyhvcHRpb24uY2hhcmFjdGVyKSkge1xuICAgICAgICBjaG9pY2UuY2xhc3NMaXN0LmFkZChcImZvdW5kXCIpO1xuICAgICAgICBjaG9pY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgQ29udHJvbGxlci5oYW5kbGVDaGFyYWN0ZXJCdXR0b25DbGlja1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBwb3B1cC5hcHBlbmRDaGlsZChjaG9pY2UpO1xuICAgIH0pO1xuXG4gICAgY29udGVudC5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgcG9wdXBzLnB1c2gocG9wdXApO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVRhYmxlID0gKHRvcDEwVXNlclRpbWVzKSA9PiB7XG4gICAgY29uc3QgZ2FtZUNob2ljZSA9IENvbnRyb2xsZXIuZ2V0R2FtZUNob2ljZSgpO1xuXG4gICAgY29uc3QgbGVhZGVyYm9hcmRIZWFkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsZWFkZXJib2FyZEhlYWRpbmdcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkR2FtZUNob2ljZSA9XG4gICAgICBnYW1lQ2hvaWNlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZ2FtZUNob2ljZS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xuICAgIGxlYWRlcmJvYXJkSGVhZGluZy50ZXh0Q29udGVudCA9IGBUb3AgMTAgRm9yICR7Zm9ybWF0dGVkR2FtZUNob2ljZX06YDtcblxuICAgIGNvbnN0IHRpbWVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGltZXJcIik7XG4gICAgY29uc3QgY3VycmVudFVzZXJUaW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjdXJyZW50VXNlclRpbWVcIik7XG4gICAgY3VycmVudFVzZXJUaW1lLnRleHRDb250ZW50ID0gYFlvdXIgdGltZTogJHt0aW1lckVsZW1lbnQudGV4dENvbnRlbnR9LmA7XG5cbiAgICBjb25zdCBzY29yZWJvYXJkVGFibGVCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YWJsZUJvZHlcIik7XG4gICAgc2NvcmVib2FyZFRhYmxlQm9keS50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICB0b3AxMFVzZXJUaW1lcy5mb3JFYWNoKCh1c2VyVGltZSkgPT4ge1xuICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgICAgY29uc3QgdXNlcm5hbWVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgdXNlcm5hbWVDZWxsLnRleHRDb250ZW50ID0gdXNlclRpbWUudXNlcm5hbWU7XG4gICAgICBjb25zdCB0aW1lQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgIHRpbWVDZWxsLnRleHRDb250ZW50ID0gdXNlclRpbWUudGltZTtcblxuICAgICAgcm93LmFwcGVuZENoaWxkKHVzZXJuYW1lQ2VsbCk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQodGltZUNlbGwpO1xuICAgICAgc2NvcmVib2FyZFRhYmxlQm9keS5hcHBlbmRDaGlsZChyb3cpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlRmVlZGJhY2tNc2csXG4gICAgcmVtb3ZlQ2lyY2xlLFxuICAgIGNyZWF0ZUNpcmNsZSxcbiAgICByZW1vdmVQb3B1cCxcbiAgICBjcmVhdGVQb3B1cCxcbiAgICBjcmVhdGVUYWJsZSxcbiAgfTtcbn0pKCk7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1jeWNsZVxuaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gXCIuL2FwcFwiO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tIFwiLi9yZW5kZXJcIjtcbmltcG9ydCB7IEZpcmVzdG9yZU1hbmFnZXIgfSBmcm9tIFwiLi9hcHAtbG9naWNcIjtcblxuZXhwb3J0IGNvbnN0IEFwcEhlbHBlcnMgPSAoKCkgPT4ge1xuICBjb25zdCB0aW1lckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpbWVyXCIpO1xuXG4gIGxldCB0aW1lckludGVydmFsO1xuICBsZXQgY3VycmVudFNsaWRlID0gMDtcblxuICBjb25zdCBmb3JtYXRUaW1lID0gKG1pbGxpc2Vjb25kcykgPT4ge1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaWxsaXNlY29uZHMgLyAzNjAwMDAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigobWlsbGlzZWNvbmRzICUgMzYwMDAwMCkgLyA2MDAwMCk7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IoKG1pbGxpc2Vjb25kcyAlIDYwMDAwKSAvIDEwMDApO1xuICAgIGNvbnN0IGZvcm1hdHRlZEhvdXJzID0gU3RyaW5nKGhvdXJzKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkTWludXRlcyA9IFN0cmluZyhtaW51dGVzKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkU2Vjb25kcyA9IFN0cmluZyhzZWNvbmRzKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkTWlsbGlzZWNvbmRzID0gU3RyaW5nKG1pbGxpc2Vjb25kcyAlIDEwMDApLnBhZFN0YXJ0KDMsIFwiMFwiKTtcbiAgICByZXR1cm4gYCR7Zm9ybWF0dGVkSG91cnN9OiR7Zm9ybWF0dGVkTWludXRlc306JHtmb3JtYXR0ZWRTZWNvbmRzfS4ke2Zvcm1hdHRlZE1pbGxpc2Vjb25kc31gO1xuICB9O1xuXG4gIGNvbnN0IHN0YXJ0VGltZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICBjb25zdCB1cGRhdGVUaW1lciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBjb25zdCBlbGFwc2VkTWlsbGlzZWNvbmRzID0gY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gZm9ybWF0VGltZShlbGFwc2VkTWlsbGlzZWNvbmRzKTtcbiAgICAgIHRpbWVyRWxlbWVudC50ZXh0Q29udGVudCA9IGZvcm1hdHRlZFRpbWU7XG4gICAgfTtcblxuICAgIHRpbWVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh1cGRhdGVUaW1lciwgMSk7XG4gIH07XG5cbiAgY29uc3Qgc3RvcFRpbWVyID0gKCkgPT4ge1xuICAgIGNsZWFySW50ZXJ2YWwodGltZXJJbnRlcnZhbCk7XG4gIH07XG5cbiAgY29uc3QgcmVzZXRUaW1lciA9ICgpID0+IHtcbiAgICBzdG9wVGltZXIoKTtcbiAgICB0aW1lckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIjAwOjAwOjAwXCI7XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlQ291bnQgPSAoKSA9PiB7XG4gICAgY29uc3QgY291bnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb3VudFwiKTtcbiAgICBjb25zdCBmb3VuZENvdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ncmF5ZWQtb3V0XCIpLmxlbmd0aDtcbiAgICBjb3VudEVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHtmb3VuZENvdW50fS8zYDtcbiAgfTtcblxuICBjb25zdCByZXNldENvdW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNvdW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY291bnRcIik7XG4gICAgY291bnRFbGVtZW50LnRleHRDb250ZW50ID0gXCIwLzNcIjtcbiAgfTtcblxuICBjb25zdCBncmF5T3V0Q2hhcmFjdGVySWNvbiA9IChjaGFyYWN0ZXJJZCkgPT4ge1xuICAgIGNvbnN0IGNoYXJhY3RlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtjaGFyYWN0ZXJJZH1gKTtcbiAgICBpZiAoY2hhcmFjdGVyRWxlbWVudCkge1xuICAgICAgY2hhcmFjdGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ3JheWVkLW91dFwiKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2xlYXJDaGFyYWN0ZXJJY29ucyA9ICgpID0+IHtcbiAgICBjb25zdCBjaGFyYWN0ZXJJZHMgPSBbXCJib3dzZXJcIiwgXCJuZW9cIiwgXCJ3YWxkb1wiXTtcbiAgICBjaGFyYWN0ZXJJZHMuZm9yRWFjaCgoY2hhcmFjdGVySWQpID0+IHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtjaGFyYWN0ZXJJZH1gKTtcbiAgICAgIGlmIChjaGFyYWN0ZXJFbGVtZW50KSB7XG4gICAgICAgIGNoYXJhY3RlckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImdyYXllZC1vdXRcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc2hvd01vZGFsID0gKG1vZGFsKSA9PiB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IG1vZGFsLmNsb3Nlc3QoXCIub3ZlcmxheVwiKTtcbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gIH07XG5cbiAgY29uc3QgaGlkZU1vZGFsID0gKG1vZGFsKSA9PiB7XG4gICAgY29uc3Qgb3ZlcmxheSA9IG1vZGFsLmNsb3Nlc3QoXCIub3ZlcmxheVwiKTtcbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH07XG5cbiAgY29uc3QgZ2V0TGVhZGVyYm9hcmQgPSAoZ2FtZUNob2ljZSwgc3VibWl0QnV0dG9uKSA9PiB7XG4gICAgY29uc3QgdXNlcm5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZW5kZ2FtZSBpbnB1dFwiKTtcblxuICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAodXNlcm5hbWUpIHtcbiAgICAgICAgY29uc3QgdXNlckV4aXN0cyA9IGF3YWl0IEZpcmVzdG9yZU1hbmFnZXIuY2hlY2tVc2VyRXhpc3RzKFxuICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgIGdhbWVDaG9pY2VcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodXNlckV4aXN0cykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIEZpcmVzdG9yZU1hbmFnZXIuc3RvcmVVc2VyVGltZShcbiAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICB0aW1lckVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICAgICAgZ2FtZUNob2ljZVxuICAgICAgICApO1xuICAgICAgICBjb25zdCB0b3AxMFVzZXJUaW1lcyA9IGF3YWl0IEZpcmVzdG9yZU1hbmFnZXIuZ2V0VG9wMTBUaW1lcyhnYW1lQ2hvaWNlKTtcbiAgICAgICAgUmVuZGVyZXIuY3JlYXRlVGFibGUodG9wMTBVc2VyVGltZXMpO1xuICAgICAgICBzaG93TW9kYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC5sZWFkZXJib2FyZFwiKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaGFuZGxlU3VibWl0KCk7XG4gICAgICBoaWRlTW9kYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC5lbmRnYW1lXCIpKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVBY3RpdmVEb3QgPSAoKSA9PiB7XG4gICAgY29uc3QgZG90cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZG90XCIpO1xuICAgIGRvdHMuZm9yRWFjaCgoZG90LCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4ID09PSBjdXJyZW50U2xpZGUpIHtcbiAgICAgICAgZG90LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb3QuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVBY3RpdmVTbGlkZSA9IChkaXJlY3Rpb24pID0+IHtcbiAgICBjb25zdCBzbGlkZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlXCIpO1xuICAgIGNvbnN0IHRvdGFsU2xpZGVzID0gc2xpZGVzLmxlbmd0aDtcblxuICAgIHNsaWRlc1tjdXJyZW50U2xpZGVdLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG5cbiAgICBpZiAoZGlyZWN0aW9uID09PSBcImxlZnRcIikge1xuICAgICAgY3VycmVudFNsaWRlID0gKGN1cnJlbnRTbGlkZSAtIDEgKyB0b3RhbFNsaWRlcykgJSB0b3RhbFNsaWRlcztcbiAgICAgIHNsaWRlc1tjdXJyZW50U2xpZGVdLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtMTAwJSlcIjtcbiAgICAgIHNsaWRlc1tjdXJyZW50U2xpZGVdLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gXCJyaWdodFwiKSB7XG4gICAgICBjdXJyZW50U2xpZGUgPSAoY3VycmVudFNsaWRlICsgMSkgJSB0b3RhbFNsaWRlcztcbiAgICAgIHNsaWRlc1tjdXJyZW50U2xpZGVdLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgxMDAlKVwiO1xuICAgICAgc2xpZGVzW2N1cnJlbnRTbGlkZV0uc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgIH1cblxuICAgIHNsaWRlc1tjdXJyZW50U2xpZGVdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNsaWRlc1tjdXJyZW50U2xpZGVdLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgwKVwiO1xuICAgICAgc2xpZGVzW2N1cnJlbnRTbGlkZV0uc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgIH0sIDApO1xuICB9O1xuXG4gIGNvbnN0IHNldEJhY2tncm91bmRJbWFnZSA9ICgpID0+IHtcbiAgICBjb25zdCBiYWNrZ3JvdW5kSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNiYWNrZ3JvdW5kSW1nXCIpO1xuICAgIGNvbnN0IGdhbWVDaG9pY2UgPSBDb250cm9sbGVyLmdldEdhbWVDaG9pY2UoKTtcblxuICAgIHN3aXRjaCAoZ2FtZUNob2ljZSkge1xuICAgICAgY2FzZSBcImN5YmVycHVua1wiOlxuICAgICAgICBiYWNrZ3JvdW5kSW1nLnNyYyA9IFwiLi4vZGlzdC9pbWFnZXMvY3liZXJwdW5rLWNpdHkuanBnXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInJvYm90XCI6XG4gICAgICAgIGJhY2tncm91bmRJbWcuc3JjID0gXCIuLi9kaXN0L2ltYWdlcy9yb2JvdC1jaXR5LmpwZ1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJhY2tncm91bmRJbWcuc3JjID0gXCIuLi9kaXN0L2ltYWdlcy9jeWJlcnB1bmstY2l0eS5qcGdcIjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2V0Q2hhcmFjdGVySWNvbnMgPSAoKSA9PiB7XG4gICAgY29uc3QgaWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoYXJhY3RlciA+IC5pY29uXCIpO1xuICAgIGNvbnN0IHRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2hhcmFjdGVyID4gLnRleHQgPiBoM1wiKTtcbiAgICBjb25zdCBnYW1lQ2hvaWNlID0gQ29udHJvbGxlci5nZXRHYW1lQ2hvaWNlKCk7XG5cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID0ge1xuICAgICAgY3liZXJwdW5rOiBbXG4gICAgICAgIHsgaWNvbjogXCIuLi9kaXN0L2ltYWdlcy9ib3dzZXIucG5nXCIsIHRpdGxlOiBcIkJvd3NlclwiIH0sXG4gICAgICAgIHsgaWNvbjogXCIuLi9kaXN0L2ltYWdlcy9uZW8ucG5nXCIsIHRpdGxlOiBcIk5lb1wiIH0sXG4gICAgICAgIHsgaWNvbjogXCIuLi9kaXN0L2ltYWdlcy93YWxkby5wbmdcIiwgdGl0bGU6IFwiV2FsZG9cIiB9LFxuICAgICAgXSxcbiAgICAgIHJvYm90OiBbXG4gICAgICAgIHsgaWNvbjogXCIuLi9kaXN0L2ltYWdlcy9tZWcucG5nXCIsIHRpdGxlOiBcIk1lZ1wiIH0sXG4gICAgICAgIHsgaWNvbjogXCIuLi9kaXN0L2ltYWdlcy9waWthY2h1LnBuZ1wiLCB0aXRsZTogXCJQaWthY2h1XCIgfSxcbiAgICAgICAgeyBpY29uOiBcIi4uL2Rpc3QvaW1hZ2VzL21pa2UucG5nXCIsIHRpdGxlOiBcIk1pa2VcIiB9LFxuICAgICAgXSxcbiAgICB9O1xuXG4gICAgY29uc3QgY2hhcmFjdGVycyA9IGNoYXJhY3RlckRhdGFbZ2FtZUNob2ljZV0gfHwgY2hhcmFjdGVyRGF0YS5kZWZhdWx0O1xuXG4gICAgY2hhcmFjdGVycy5mb3JFYWNoKChjaGFyYWN0ZXIsIGluZGV4KSA9PiB7XG4gICAgICBpY29uc1tpbmRleF0uc3JjID0gY2hhcmFjdGVyLmljb247XG4gICAgICB0aXRsZXNbaW5kZXhdLnRleHRDb250ZW50ID0gY2hhcmFjdGVyLnRpdGxlO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHNldENoYXJhY3RlcklkID0gKCkgPT4ge1xuICAgIGNvbnN0IGNoYXJhY3RlckVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jaGFyYWN0ZXJcIik7XG4gICAgY2hhcmFjdGVyRWxlbWVudHMuZm9yRWFjaCgoY2hhcmFjdGVyRWxlbWVudCkgPT4ge1xuICAgICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gY2hhcmFjdGVyRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xuICAgICAgaWYgKGltYWdlRWxlbWVudCkge1xuICAgICAgICBjb25zdCBpbWFnZU5hbWUgPSBpbWFnZUVsZW1lbnQuc3JjLnNwbGl0KFwiL1wiKS5wb3AoKS5zcGxpdChcIi5cIilbMF07XG4gICAgICAgIGNoYXJhY3RlckVsZW1lbnQuaWQgPSBpbWFnZU5hbWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzdGFydFRpbWVyLFxuICAgIHN0b3BUaW1lcixcbiAgICByZXNldFRpbWVyLFxuICAgIHJlc2V0Q291bnQsXG4gICAgdXBkYXRlQ291bnQsXG4gICAgZ3JheU91dENoYXJhY3Rlckljb24sXG4gICAgY2xlYXJDaGFyYWN0ZXJJY29ucyxcbiAgICBzaG93TW9kYWwsXG4gICAgaGlkZU1vZGFsLFxuICAgIGdldExlYWRlcmJvYXJkLFxuICAgIHVwZGF0ZUFjdGl2ZURvdCxcbiAgICB1cGRhdGVBY3RpdmVTbGlkZSxcbiAgICBzZXRCYWNrZ3JvdW5kSW1hZ2UsXG4gICAgc2V0Q2hhcmFjdGVySWNvbnMsXG4gICAgc2V0Q2hhcmFjdGVySWQsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgY29uc3QgTG9naWNIZWxwZXJzID0gKCgpID0+IHtcbiAgLy8gLi4uXG59KSgpO1xuIiwiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWN5Y2xlICovXG5cbi8vIFRPIERPOlxuLy8gMS4gLS0tXG4vLyAyLiAtLS1cbi8vIDMuIC0tLVxuLy8gNC4gLS0tXG4vLyA1LiAtLS1cbi8vIDYuIC0tLVxuLy8gNy4gQWRkIGNvbW1lbnRzIGFuZCBzaHJpbmsgaW1hZ2VzXG4vLyA4LiBNZXJnZSBhbmQgcHVzaCB0byBnaC1wYWdlcyBpbiBhIHdheSB0aGF0IHdvcmtzXG5cbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSBcIi4vcmVuZGVyXCI7XG5pbXBvcnQgeyBBcHBIZWxwZXJzIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IEZpcmVzdG9yZU1hbmFnZXIsIExvY2F0aW9uTWFuYWdlciB9IGZyb20gXCIuL2FwcC1sb2dpY1wiO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydFxuZXhwb3J0IGNvbnN0IENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250ZW50XCIpO1xuICBjb25zdCBkcm9wZG93bkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZHJvcGRvd25CdXR0b25cIik7XG4gIGNvbnN0IGRyb3Bkb3duTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZHJvcGRvd25NZW51XCIpO1xuICBjb25zdCBzdGFydEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN0YXJ0QnV0dG9uXCIpO1xuICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYXlBZ2FpbkJ1dHRvblwiKTtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdWJtaXRVc2VybmFtZVwiKTtcbiAgY29uc3QgaW5pdGlhbE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC5pbml0aWFsXCIpO1xuICBjb25zdCBlbmRnYW1lTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmVuZGdhbWVcIik7XG4gIGNvbnN0IGxlYWRlcmJvYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmxlYWRlcmJvYXJkXCIpO1xuICBjb25zdCBsZWZ0QXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93LmxlZnRcIik7XG4gIGNvbnN0IHJpZ2h0QXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFycm93LnJpZ2h0XCIpO1xuICBjb25zdCB1c2VybmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbmRnYW1lIGlucHV0XCIpO1xuICBjb25zdCB1c2VybmFtZUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN1c2VybmFtZUVycm9yXCIpO1xuXG4gIGxldCBpc0dhbWVTdGFydGVkID0gZmFsc2U7XG4gIGxldCBpc0FkZGluZ0NpcmNsZSA9IGZhbHNlO1xuICBsZXQgaXNBZGRpbmdQb3B1cCA9IGZhbHNlO1xuICBsZXQgc2VsZWN0ZWRDaGFyYWN0ZXIgPSBudWxsO1xuICBsZXQgZ2FtZUNob2ljZSA9IG51bGw7XG4gIGNvbnN0IGZvdW5kQ2hhcmFjdGVycyA9IFtdO1xuXG4gIGNvbnN0IHN0YXJ0R2FtZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGNsaWNrZWRCdXR0b24gPSBldmVudC50YXJnZXQ7XG4gICAgZ2FtZUNob2ljZSA9IGNsaWNrZWRCdXR0b24uZGF0YXNldC5jaG9pY2U7XG5cbiAgICBpZiAoIWlzR2FtZVN0YXJ0ZWQpIHtcbiAgICAgIEFwcEhlbHBlcnMuaGlkZU1vZGFsKGluaXRpYWxNb2RhbCk7XG4gICAgICBBcHBIZWxwZXJzLnN0YXJ0VGltZXIoKTtcbiAgICAgIGlzR2FtZVN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgaXNBZGRpbmdDaXJjbGUgPSB0cnVlO1xuICAgICAgaXNBZGRpbmdQb3B1cCA9IHRydWU7XG4gICAgICBBcHBIZWxwZXJzLnNldEJhY2tncm91bmRJbWFnZSgpO1xuICAgICAgQXBwSGVscGVycy5zZXRDaGFyYWN0ZXJJY29ucygpO1xuICAgICAgQXBwSGVscGVycy5zZXRDaGFyYWN0ZXJJZCgpO1xuICAgIH1cblxuICAgIHJldHVybiBnYW1lQ2hvaWNlO1xuICB9O1xuXG4gIC8vIEdldHRlciBmdW5jdGlvbiB1c2VkIHRvIHJldHVybiBnYW1lQ2hvaWNlIGZyb20gQ29udHJvbGxlciBtb2R1bGVcbiAgY29uc3QgZ2V0R2FtZUNob2ljZSA9ICgpID0+IGdhbWVDaG9pY2U7XG5cbiAgY29uc3QgcmVzZXRHYW1lID0gKCkgPT4ge1xuICAgIGlzR2FtZVN0YXJ0ZWQgPSBmYWxzZTtcbiAgICBpc0FkZGluZ0NpcmNsZSA9IGZhbHNlO1xuICAgIGlzQWRkaW5nUG9wdXAgPSBmYWxzZTtcbiAgICBzZWxlY3RlZENoYXJhY3RlciA9IG51bGw7XG4gICAgZm91bmRDaGFyYWN0ZXJzLmxlbmd0aCA9IDA7XG4gICAgdXNlcm5hbWVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgdXNlcm5hbWVFcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG5cbiAgICBBcHBIZWxwZXJzLnJlc2V0Q291bnQoKTtcbiAgICBBcHBIZWxwZXJzLnJlc2V0VGltZXIoKTtcbiAgICBBcHBIZWxwZXJzLmNsZWFyQ2hhcmFjdGVySWNvbnMoKTtcbiAgICBBcHBIZWxwZXJzLmhpZGVNb2RhbChsZWFkZXJib2FyZE1vZGFsKTtcbiAgICBBcHBIZWxwZXJzLmhpZGVNb2RhbChlbmRnYW1lTW9kYWwpO1xuICAgIEFwcEhlbHBlcnMuc2hvd01vZGFsKGluaXRpYWxNb2RhbCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ29udGVudENsaWNrID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgaWYgKFxuICAgICAgIWlzR2FtZVN0YXJ0ZWQgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiaGVhZGVyXCIpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xvc2VzdChcImZvb3RlclwiKSB8fFxuICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIub3ZlcmxheVwiKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0FkZGluZ0NpcmNsZSkge1xuICAgICAgY29uc3QgeyB4LCB5LCBzY2FsZWRYLCBzY2FsZWRZIH0gPSBMb2NhdGlvbk1hbmFnZXIuZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpO1xuICAgICAgUmVuZGVyZXIuY3JlYXRlQ2lyY2xlKHgsIHkpO1xuICAgICAgUmVuZGVyZXIuY3JlYXRlUG9wdXAoeCwgeSwgZm91bmRDaGFyYWN0ZXJzKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgc2VsZWN0ZWRDaGFyYWN0ZXIgPSBhd2FpdCBGaXJlc3RvcmVNYW5hZ2VyLnZlcmlmeUNsaWNrZWRQb3NpdGlvbihcbiAgICAgICAgICBzY2FsZWRYLFxuICAgICAgICAgIHNjYWxlZFksXG4gICAgICAgICAgZ2FtZUNob2ljZVxuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHZlcmlmeWluZyBjbGlja2VkIHBvc2l0aW9uOlwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlbmRlcmVyLnJlbW92ZUNpcmNsZSgpO1xuICAgICAgUmVuZGVyZXIucmVtb3ZlUG9wdXAoKTtcbiAgICB9XG5cbiAgICBpc0FkZGluZ0NpcmNsZSA9ICFpc0FkZGluZ0NpcmNsZTtcbiAgICBpc0FkZGluZ1BvcHVwID0gIWlzQWRkaW5nUG9wdXA7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2hhcmFjdGVyQnV0dG9uQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCB7IHgsIHkgfSA9IExvY2F0aW9uTWFuYWdlci5nZXRDb29yZGluYXRlcyhldmVudCk7XG4gICAgUmVuZGVyZXIucmVtb3ZlUG9wdXAoKTtcblxuICAgIGNvbnN0IGNsaWNrZWRDaGFyYWN0ZXIgPSBldmVudC50YXJnZXQuZGF0YXNldC5jaGFyYWN0ZXI7XG5cbiAgICBpZiAoc2VsZWN0ZWRDaGFyYWN0ZXIgPT09IGNsaWNrZWRDaGFyYWN0ZXIpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZENoYXJhY3RlciA9XG4gICAgICAgIHNlbGVjdGVkQ2hhcmFjdGVyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgc2VsZWN0ZWRDaGFyYWN0ZXIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbiAgICAgIFJlbmRlcmVyLmNyZWF0ZUZlZWRiYWNrTXNnKGBGb3VuZCAke2Zvcm1hdHRlZENoYXJhY3Rlcn0hYCwgeCwgeSwgXCJncmVlblwiKTtcblxuICAgICAgQXBwSGVscGVycy5ncmF5T3V0Q2hhcmFjdGVySWNvbihjbGlja2VkQ2hhcmFjdGVyKTtcbiAgICAgIEFwcEhlbHBlcnMudXBkYXRlQ291bnQoKTtcblxuICAgICAgZm91bmRDaGFyYWN0ZXJzLnB1c2goY2xpY2tlZENoYXJhY3Rlcik7XG4gICAgICBSZW5kZXJlci5yZW1vdmVQb3B1cCgpO1xuICAgICAgUmVuZGVyZXIuY3JlYXRlUG9wdXAoeCwgeSwgZm91bmRDaGFyYWN0ZXJzKTtcblxuICAgICAgaWYgKGZvdW5kQ2hhcmFjdGVycy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgQXBwSGVscGVycy5zdG9wVGltZXIoKTtcbiAgICAgICAgQXBwSGVscGVycy5nZXRMZWFkZXJib2FyZChnYW1lQ2hvaWNlLCBzdWJtaXRCdXR0b24pO1xuICAgICAgICBBcHBIZWxwZXJzLnNob3dNb2RhbChlbmRnYW1lTW9kYWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBSZW5kZXJlci5jcmVhdGVGZWVkYmFja01zZyhcIktlZXAgbG9va2luZyFcIiwgeCwgeSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgbGVmdEFycm93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBBcHBIZWxwZXJzLnVwZGF0ZUFjdGl2ZVNsaWRlKFwibGVmdFwiKTtcbiAgICAgIEFwcEhlbHBlcnMudXBkYXRlQWN0aXZlRG90KCk7XG4gICAgfSk7XG5cbiAgICByaWdodEFycm93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBBcHBIZWxwZXJzLnVwZGF0ZUFjdGl2ZVNsaWRlKFwicmlnaHRcIik7XG4gICAgICBBcHBIZWxwZXJzLnVwZGF0ZUFjdGl2ZURvdCgpO1xuICAgIH0pO1xuXG4gICAgY29udGVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ29udGVudENsaWNrKTtcblxuICAgIGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNob2ljZSBidXR0b25cIik7XG4gICAgYnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2hhcmFjdGVyQnV0dG9uQ2xpY2spO1xuICAgIH0pO1xuXG4gICAgZHJvcGRvd25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGRyb3Bkb3duTWVudS5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcbiAgICAgIGRyb3Bkb3duQnV0dG9uLnRleHRDb250ZW50ID0gZHJvcGRvd25NZW51LmNsYXNzTGlzdC5jb250YWlucyhcInNob3dcIilcbiAgICAgICAgPyBcIuKWsiBIaWRlIENoYXJhY3RlcnMg4payXCJcbiAgICAgICAgOiBcIuKWvCBTaG93IENoYXJhY3RlcnMg4pa8XCI7XG4gICAgfSk7XG5cbiAgICBzdGFydEJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN0YXJ0R2FtZSk7XG4gICAgfSk7XG5cbiAgICBwbGF5QWdhaW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlc2V0R2FtZSk7XG5cbiAgICBBcHBIZWxwZXJzLmhpZGVNb2RhbChsZWFkZXJib2FyZE1vZGFsKTtcbiAgICBBcHBIZWxwZXJzLmhpZGVNb2RhbChlbmRnYW1lTW9kYWwpO1xuICAgIEFwcEhlbHBlcnMuc2hvd01vZGFsKGluaXRpYWxNb2RhbCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICAgIGhhbmRsZUNoYXJhY3RlckJ1dHRvbkNsaWNrLFxuICAgIGdldEdhbWVDaG9pY2UsXG4gIH07XG59KSgpO1xuXG5Db250cm9sbGVyLmluaXQoKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDk1NCk7XG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzY4KTtcbiJdLCJuYW1lcyI6WyJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwicCIsImkiLCJsZW5ndGgiLCJjIiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkVOQ09ERURfVkFMUyIsInRoaXMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsImluaXRfIiwiYnl0ZVRvQ2hhck1hcCIsIm91dHB1dCIsImJ5dGUxIiwiaGF2ZUJ5dGUyIiwiYnl0ZTIiLCJoYXZlQnl0ZTMiLCJieXRlMyIsIm91dEJ5dGUxIiwib3V0Qnl0ZTIiLCJvdXRCeXRlMyIsIm91dEJ5dGU0IiwicHVzaCIsImpvaW4iLCJlbmNvZGVTdHJpbmciLCJidG9hIiwiZGVjb2RlU3RyaW5nIiwiYnl0ZXMiLCJwb3MiLCJjMSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImMyIiwidSIsImMzIiwiYnl0ZUFycmF5VG9TdHJpbmciLCJkZWNvZGVTdHJpbmdUb0J5dGVBcnJheSIsImNoYXJUb0J5dGVNYXAiLCJjaGFyQXQiLCJieXRlNCIsIkRlY29kZUJhc2U2NFN0cmluZ0Vycm9yIiwiY29uc3RydWN0b3IiLCJzdXBlciIsImFyZ3VtZW50cyIsIm5hbWUiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsInJlcGxhY2UiLCJnZXREZWZhdWx0cyIsInNlbGYiLCJ3aW5kb3ciLCJnIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImRlZmF1bHRzSnNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiZG9jdW1lbnQiLCJtYXRjaCIsImNvb2tpZSIsImUiLCJkZWNvZGVkIiwiY29uc29sZSIsImVycm9yIiwiYmFzZTY0RGVjb2RlIiwiZ2V0RGVmYXVsdHNGcm9tQ29va2llIiwiaW5mbyIsImdldERlZmF1bHRBcHBDb25maWciLCJfYSIsImNvbmZpZyIsIkRlZmVycmVkIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJQcm9taXNlIiwid3JhcENhbGxiYWNrIiwiY2FsbGJhY2siLCJ2YWx1ZSIsImNhdGNoIiwiRmlyZWJhc2VFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY3VzdG9tRGF0YSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJkYXRhIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJfIiwia2V5IiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJhIiwiYiIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiayIsImluY2x1ZGVzIiwiYVByb3AiLCJiUHJvcCIsImlzT2JqZWN0IiwidGhpbmciLCJfZGVsZWdhdGUiLCJDb21wb25lbnQiLCJpbnN0YW5jZUZhY3RvcnkiLCJ0eXBlIiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJtb2RlIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJzZXRTZXJ2aWNlUHJvcHMiLCJwcm9wcyIsInNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb21wb25lbnQiLCJpbnN0YW5jZXMiLCJNYXAiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJnZXQiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJoYXMiLCJkZWZlcnJlZCIsInNldCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldEltbWVkaWF0ZSIsIm9wdGlvbnMiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZW50cmllcyIsImNsZWFySW5zdGFuY2UiLCJkZWxldGUiLCJhc3luYyIsInNlcnZpY2VzIiwiZnJvbSIsInZhbHVlcyIsImFsbCIsImZpbHRlciIsIm1hcCIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJhZGQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwibm93IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWV0aG9kIiwiTG9nZ2VyIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJfdXNlckxvZ0hhbmRsZXIiLCJ2YWwiLCJUeXBlRXJyb3IiLCJzZXRMb2dMZXZlbCIsImxvZ0hhbmRsZXIiLCJ1c2VyTG9nSGFuZGxlciIsImRlYnVnIiwibG9nIiwid2FybiIsImluc3RhbmNlT2ZBbnkiLCJvYmplY3QiLCJjb25zdHJ1Y3RvcnMiLCJzb21lIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwidGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiSURCVHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZU5hbWVzIiwib2JqZWN0U3RvcmUiLCJ0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlIiwiZnVuYyIsIklEQkRhdGFiYXNlIiwidHJhbnNhY3Rpb24iLCJJREJDdXJzb3IiLCJhZHZhbmNlIiwiY29udGludWUiLCJjb250aW51ZVByaW1hcnlLZXkiLCJhcHBseSIsInVud3JhcCIsInN0b3JlTmFtZXMiLCJ0eCIsImNhbGwiLCJzb3J0IiwiZG9uZSIsInVubGlzdGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlIiwiRE9NRXhjZXB0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJyZXF1ZXN0Iiwic3VjY2VzcyIsInJlc3VsdCIsInRoZW4iLCJwcm9taXNpZnlSZXF1ZXN0IiwibmV3VmFsdWUiLCJyZWFkTWV0aG9kcyIsIndyaXRlTWV0aG9kcyIsImNhY2hlZE1ldGhvZHMiLCJnZXRNZXRob2QiLCJ0YXJnZXRGdW5jTmFtZSIsInVzZUluZGV4IiwiaXNXcml0ZSIsInN0b3JlTmFtZSIsInN0b3JlIiwiaW5kZXgiLCJzaGlmdCIsIm9sZFRyYXBzIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJ2ZXJzaW9uIiwibG9nU3RyaW5nIiwibmFtZSRvIiwidmVyc2lvbiQxIiwibG9nZ2VyIiwiUExBVEZPUk1fTE9HX1NUUklORyIsIl9hcHBzIiwiX2NvbXBvbmVudHMiLCJfYWRkQ29tcG9uZW50IiwiYXBwIiwiX3JlZ2lzdGVyQ29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIkRCX05BTUUiLCJEQl9WRVJTSU9OIiwiU1RPUkVfTkFNRSIsImRiUHJvbWlzZSIsImdldERiUHJvbWlzZSIsImJsb2NrZWQiLCJ1cGdyYWRlIiwiYmxvY2tpbmciLCJ0ZXJtaW5hdGVkIiwiaW5kZXhlZERCIiwib3BlbiIsIm9wZW5Qcm9taXNlIiwiZXZlbnQiLCJvbGRWZXJzaW9uIiwibmV3VmVyc2lvbiIsImRiIiwib3BlbkRCIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJvcmlnaW5hbEVycm9yTWVzc2FnZSIsIndyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCIiwiaGVhcnRiZWF0T2JqZWN0IiwicHV0IiwiY29tcHV0ZUtleSIsImlkYkdldEVycm9yIiwiYXBwSWQiLCJIZWFydGJlYXRTZXJ2aWNlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIkhlYXJ0YmVhdFN0b3JhZ2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UiLCJyZWFkIiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImxhc3RTZW50SGVhcnRiZWF0RGF0ZSIsImhlYXJ0YmVhdHMiLCJzaW5nbGVEYXRlSGVhcnRiZWF0IiwiaGJUaW1lc3RhbXAiLCJ2YWx1ZU9mIiwib3ZlcndyaXRlIiwiaGVhcnRiZWF0c1RvU2VuZCIsInVuc2VudEVudHJpZXMiLCJoZWFydGJlYXRzQ2FjaGUiLCJtYXhTaXplIiwic2xpY2UiLCJoZWFydGJlYXRFbnRyeSIsImZpbmQiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3RyaW5naWZ5Iiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwicHJlRXhpc3QiLCJEQl9DSEVDS19OQU1FIiwib25zdWNjZXNzIiwiY2xvc2UiLCJkZWxldGVEYXRhYmFzZSIsIm9udXBncmFkZW5lZWRlZCIsIm9uZXJyb3IiLCJpZGJIZWFydGJlYXRPYmplY3QiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwiZ2xvYmFsIiwiZXNtIiwiZ29vZyIsImwiLCJhYSIsImNhIiwiTWF0aCIsInJhbmRvbSIsImRhIiwiZWEiLCJiaW5kIiwiZmEiLCJkIiwidW5zaGlmdCIsInEiLCJGdW5jdGlvbiIsInRvU3RyaW5nIiwiaW5kZXhPZiIsImhhIiwiciIsIiQiLCJhYyIsImYiLCJoIiwibiIsInYiLCJzIiwibyIsInNhIiwiTiIsImhhc093blByb3BlcnR5Iiwia2EiLCJtYSIsIm5hIiwidyIsImRlZmF1bHRQcmV2ZW50ZWQiLCJvYSIsImRlZmluZVByb3BlcnR5IiwieCIsInRlc3QiLCJwYSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInkiLCJxYSIsInphIiwiRGEiLCJ0YSIsInoiLCJ1YSIsInZhIiwid2EiLCJ0b0xvd2VyQ2FzZSIsInhhIiwieWEiLCJkb2N1bWVudE1vZGUiLCJBYSIsIkJhIiwiZXhlYyIsIkNhIiwicGFyc2VGbG9hdCIsInBhcnNlSW50IiwiRmEiLCJBIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbiIsInNjcmVlblkiLCJzY3JlZW5YIiwiY2xpZW50WSIsImNsaWVudFgiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5Iiwic3RhdGUiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiR2EiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiSGEiLCJJYSIsIkphIiwibGlzdGVuZXIiLCJwcm94eSIsInNyYyIsImNhcHR1cmUiLCJsYSIsImlhIiwiS2EiLCJOYSIsIlBhIiwiUWEiLCJzcGxpdCIsIlJhIiwiU2EiLCJVYSIsInNwbGljZSIsIlRhIiwiVmEiLCJXYSIsIllhIiwib25jZSIsIlphIiwiJGEiLCJPIiwiYWIiLCJiYiIsImViIiwiY2IiLCJhdHRhY2hFdmVudCIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJQIiwiZmIiLCJnYiIsImRldGFjaEV2ZW50IiwiaGFuZGxlRXZlbnQiLCJCIiwiUyIsIkoiLCJDIiwiaWIiLCJjb25jYXQiLCJ0IiwiamIiLCJsYiIsIm1iIiwibmV4dCIsIm9iIiwiaiIsInBiIiwicmVzZXQiLCJxYiIsInJiIiwic2V0VGltZW91dCIsInNiIiwidGIiLCJ2YiIsInViIiwid2IiLCJ4YiIsImdhIiwiVCIsImNsZWFyVGltZW91dCIsInliIiwiTnVtYmVyIiwiemIiLCJtIiwic3RhcnQiLCJBYiIsIkJiIiwiQ2IiLCJEYiIsIkZiIiwiR2IiLCJEIiwiSmIiLCJFYSIsIkUiLCJMYiIsIk1iIiwiTmIiLCJPYiIsIlBiIiwiU1RBVF9FVkVOVCIsInN0YXQiLCJGIiwiUWIiLCJzaXplIiwiUmIiLCJTYiIsIk5PX0VSUk9SIiwiRWIiLCJUSU1FT1VUIiwiSWIiLCJUYiIsIktiIiwiJGIiLCJVYiIsIlZiIiwiV2IiLCJYYiIsIk9QRU4iLCJIYiIsIlliIiwiWmIiLCJiYyIsIlciLCJVIiwiY2MiLCJWIiwiSSIsIkwiLCJHIiwiWSIsIk0iLCJiYSIsIksiLCJkYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZWMiLCJmYyIsImdjIiwiaGMiLCJpYyIsImpjIiwia2MiLCJsYyIsIm5iIiwib2MiLCJyYyIsInVjIiwicWMiLCJ2YyIsInBjIiwiaXNOYU4iLCJ3YyIsIm5jIiwiSCIsInNjIiwiYWJvcnQiLCJ4YyIsInljIiwiemMiLCJBYyIsIkJjIiwicmEiLCJMYSIsIk1hIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJDYyIsIkRjIiwiRWMiLCJGYyIsIkdjIiwiSGMiLCJLYyIsImZvckVhY2giLCJaIiwiSmMiLCJJYyIsImphIiwibWMiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsInN0cmVhbSIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInRyaW0iLCJPYSIsInRjIiwiY2FuY2VsIiwiTGMiLCJSZWdFeHAiLCJOYyIsIk9jIiwiUGMiLCJRYyIsIlJjIiwiJGMiLCJYYyIsIlNjIiwiWWMiLCJmbG9vciIsImFicyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsIlpjIiwiVGMiLCJlbmNvZGVVUklDb21wb25lbnQiLCJVYyIsIlZjIiwiV2MiLCJNYyIsImFkIiwiY2QiLCJkZCIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImVkIiwiZmQiLCJjbGVhciIsImdkIiwiaGQiLCJpZCIsImtkIiwib25sb2FkIiwib25hYm9ydCIsIm9udGltZW91dCIsImxkIiwibWQiLCJyZWFkeVN0YXRlIiwibmQiLCJzdGF0dXMiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZSIsInN0YXR1c1RleHQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJIZWFkZXJzIiwicWQiLCJYYSIsInBkIiwib2QiLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJib2R5IiwiZmV0Y2giLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJSZWFkYWJsZVN0cmVhbSIsImdldFJlYWRlciIsInRleHQiLCJVaW50OEFycmF5Iiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsInJkIiwic2QiLCJ0ZCIsInVkIiwidmQiLCJ5ZCIsInpkIiwiQWQiLCJsb2NhdGlvbiIsInByb3RvY29sIiwid2QiLCJtb3pSZXNwb25zZUFycmF5QnVmZmVyIiwiQmQiLCJDZCIsIkRkIiwiaW50ZXJuYWxDaGFubmVsUGFyYW1zIiwiRWQiLCJ4bWxIdHRwRmFjdG9yeSIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsImVuY29kZUluaXRNZXNzYWdlSGVhZGVycyIsImZvcmNlTG9uZ1BvbGxpbmciLCJkZXRlY3RCdWZmZXJpbmdQcm94eSIsImxvbmdQb2xsaW5nVGltZW91dCIsIkZkIiwiR2QiLCJzZW5kQmVhY29uIiwiSW1hZ2UiLCJIZCIsIkxkIiwiS2QiLCJyb3VuZCIsIm1pbiIsIm1heCIsIkpkIiwiTWQiLCJJZCIsImlzQWN0aXZlIiwiamQiLCJob3N0bmFtZSIsInBvcnQiLCJOZCIsIk9kIiwiUSIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJpbml0TWVzc2FnZUhlYWRlcnMiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJzZW5kUmF3SnNvbiIsImh0dHBTZXNzaW9uSWRQYXJhbSIsIlIiLCJQZCIsIl9faGVhZGVyc19fIiwic3RhdHVzQ29kZSIsIl9fc3RhdHVzX18iLCJfX3NtX18iLCJRZCIsImJsb2NrU2l6ZSIsIlNkIiwidG9VcHBlckNhc2UiLCJnZXRQcm90b3R5cGVPZiIsIkZvcm1EYXRhIiwid2l0aENyZWRlbnRpYWxzIiwidGltZW91dCIsInhkIiwia2IiLCJfX2RhdGFfXyIsIlRkIiwiaXNGaW5pdGUiLCJVZCIsIldkIiwiWGQiLCJYIiwiWmQiLCIkZCIsImFlIiwiWWQiLCJiZSIsImNlaWwiLCJMTjIiLCJwb3ciLCJhbmQiLCJvciIsInhvciIsImNyZWF0ZVdlYkNoYW5uZWwiLCJIVFRQX0VSUk9SIiwiQ09NUExFVEUiLCJFdmVudFR5cGUiLCJDTE9TRSIsIk1FU1NBR0UiLCJsaXN0ZW4iLCJsaXN0ZW5PbmNlIiwiZ2V0TGFzdEVycm9yIiwiZ2V0TGFzdEVycm9yQ29kZSIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlSnNvbiIsImdldFJlc3BvbnNlVGV4dCIsInNldFdpdGhDcmVkZW50aWFscyIsImRpZ2VzdCIsInVwZGF0ZSIsIm11bHRpcGx5IiwibW9kdWxvIiwiY29tcGFyZSIsInRvTnVtYmVyIiwiZ2V0Qml0cyIsImZyb21OdW1iZXIiLCJmcm9tU3RyaW5nIiwiVmQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiZ2V0U3RhdEV2ZW50VGFyZ2V0IiwiRXJyb3JDb2RlIiwiRXZlbnQiLCJTdGF0IiwiUFJPWFkiLCJOT1BST1hZIiwiRmV0Y2hYbWxIdHRwRmFjdG9yeSIsIldlYkNoYW5uZWwiLCJYaHJJbyIsIk1kNSIsIkludGVnZXIiLCJ1aWQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJ0b0tleSIsImlzRXF1YWwiLCJVTkFVVEhFTlRJQ0FURUQiLCJHT09HTEVfQ1JFREVOVElBTFMiLCJGSVJTVF9QQVJUWSIsIk1PQ0tfVVNFUiIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJVTkFWQUlMQUJMRSIsIkRBVEFfTE9TUyIsInVzZXIiLCJnZXRUb2tlbiIsImludmFsaWRhdGVUb2tlbiIsImVucXVldWVSZXRyeWFibGUiLCJzaHV0ZG93biIsInRva2VuIiwiY2hhbmdlTGlzdGVuZXIiLCJjdXJyZW50VXNlciIsImZvcmNlUmVmcmVzaCIsImF1dGgiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsImFjY2Vzc1Rva2VuIiwicmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIiLCJnZXRVaWQiLCJhcHBDaGVjayIsImFkZFRva2VuTGlzdGVuZXIiLCJyZW1vdmVUb2tlbkxpc3RlbmVyIiwiY3J5cHRvIiwibXNDcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJ0dCIsInN0YXRpYyIsImV0IiwibnQiLCJldmVyeSIsIml0Iiwic2Vjb25kcyIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsImdldFRpbWUiLCJ0b0RhdGUiLCJ0b01pbGxpcyIsIl9jb21wYXJlVG8iLCJ0b0pTT04iLCJwYWRTdGFydCIsInJ0IiwidGltZXN0YW1wIiwiY29tcGFyZVRvIiwidG9NaWNyb3NlY29uZHMiLCJ0b1RpbWVzdGFtcCIsIm90Iiwic2VnbWVudHMiLCJvZmZzZXQiLCJsZW4iLCJjb21wYXJhdG9yIiwiY2hpbGQiLCJsaW1pdCIsImNvbnN0cnVjdCIsInBvcEZpcnN0IiwicG9wTGFzdCIsImZpcnN0U2VnbWVudCIsImxhc3RTZWdtZW50IiwiaXNFbXB0eSIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwidG9BcnJheSIsInV0IiwiY2Fub25pY2FsU3RyaW5nIiwiY3QiLCJhdCIsImlzVmFsaWRJZGVudGlmaWVyIiwiaXNLZXlGaWVsZCIsImh0IiwicGF0aCIsImVtcHR5UGF0aCIsImNvbGxlY3Rpb25Hcm91cCIsImhhc0NvbGxlY3Rpb25JZCIsImdldENvbGxlY3Rpb25Hcm91cCIsImdldENvbGxlY3Rpb25QYXRoIiwicHQiLCJJdCIsInJlYWRUaW1lIiwiZG9jdW1lbnRLZXkiLCJsYXJnZXN0QmF0Y2hJZCIsImVtcHR5IiwiVHQiLCJFdCIsIkF0Iiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJhZGRPbkNvbW1pdHRlZExpc3RlbmVyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwidnQiLCJSdCIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiRHQiLCJPdCIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJ3cml0ZVNlcXVlbmNlTnVtYmVyIiwiRnQiLCJCdCIsIm1lIiwiZ2UiLCJ5ZSIsInBlIiwicm9vdCIsIlRlIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJyZW1vdmUiLCJsZWZ0IiwicmlnaHQiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiSWUiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVja01heERlcHRoIiwiY2hlY2siLCJFZSIsImZpcnN0IiwibGFzdCIsImZvckVhY2hJblJhbmdlIiwiZm9yRWFjaFdoaWxlIiwiZmlyc3RBZnRlck9yRXF1YWwiLCJBZSIsInVuaW9uV2l0aCIsIml0ZXIiLCJSZSIsImZpZWxkcyIsImNvdmVycyIsIlBlIiwiVmUiLCJiaW5hcnlTdHJpbmciLCJTeW1ib2wiLCJpdGVyYXRvciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwiU2UiLCJEZSIsInN1YnN0ciIsIm5hbm9zIiwiQ2UiLCJ4ZSIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIk5lIiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwia2UiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJNZSIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCIkZSIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJsb25nUG9sbGluZ09wdGlvbnMiLCJ1c2VGZXRjaFN0cmVhbXMiLCJPZSIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiaXNEZWZhdWx0RGF0YWJhc2UiLCJGZSIsIkxlIiwiZW4iLCJxZSIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsIlVlIiwiS2UiLCJHZSIsIlFlIiwiamUiLCJmcm9tTmFtZSIsIkhlIiwiSmUiLCJZZSIsIlhlIiwiWmUiLCJ0biIsInVuIiwiZmllbGQiLCJnZXRGaWVsZHNNYXAiLCJzZXRBbGwiLCJhcHBseUNoYW5nZXMiLCJjbG9uZSIsImNuIiwiYW4iLCJkb2N1bWVudFR5cGUiLCJjcmVhdGVUaW1lIiwiZG9jdW1lbnRTdGF0ZSIsImNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQiLCJjb252ZXJ0VG9Ob0RvY3VtZW50IiwiY29udmVydFRvVW5rbm93bkRvY3VtZW50Iiwic2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJzZXRSZWFkVGltZSIsImhhc0xvY2FsTXV0YXRpb25zIiwiaGFzQ29tbWl0dGVkTXV0YXRpb25zIiwiaGFzUGVuZGluZ1dyaXRlcyIsImlzVmFsaWREb2N1bWVudCIsImlzRm91bmREb2N1bWVudCIsImlzTm9Eb2N1bWVudCIsImlzVW5rbm93bkRvY3VtZW50IiwibXV0YWJsZUNvcHkiLCJobiIsInBvc2l0aW9uIiwiaW5jbHVzaXZlIiwibG4iLCJkaXIiLCJmbiIsImRuIiwid24iLCJfbiIsIm1uIiwib3AiLCJjcmVhdGVLZXlGaWVsZEluRmlsdGVyIiwiUG4iLCJEbiIsIkNuIiwieG4iLCJObiIsImJuIiwiVm4iLCJtYXRjaGVzIiwibWF0Y2hlc0NvbXBhcmlzb24iLCJpc0luZXF1YWxpdHkiLCJnZXRGbGF0dGVuZWRGaWx0ZXJzIiwiZ2V0RmlsdGVycyIsImdldEZpcnN0SW5lcXVhbGl0eUZpZWxkIiwiZ24iLCJmaWx0ZXJzIiwibHQiLCJ5biIsInJlZHVjZSIsImZ0IiwiSW4iLCJUbiIsIkVuIiwiQW4iLCJSbiIsIlNuIiwibnVsbFZhbHVlIiwia24iLCJvcmRlckJ5Iiwic3RhcnRBdCIsImVuZEF0IiwiZHQiLCJNbiIsIiRuIiwiT24iLCJGbiIsImlzRG9jdW1lbnRLZXkiLCJVbiIsImV4cGxpY2l0T3JkZXJCeSIsImxpbWl0VHlwZSIsInd0IiwiX3QiLCJHbiIsIlFuIiwiSG4iLCJ6biIsImpuIiwia2V5RmllbGQiLCJKbiIsIlhuIiwiWm4iLCJ0cyIsImVzIiwibnMiLCJpcyIsInJzIiwib3MiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJpbm5lclNpemUiLCJ1cyIsImNzIiwiYXMiLCJocyIsImxzIiwib3ZlcmxheWVkRG9jdW1lbnQiLCJmcyIsIndzIiwiZHMiLCJfcyIsIm1zIiwiZ3MiLCJ5cyIsIklzIiwidXNlUHJvdG8zSnNvbiIsIlRzIiwiRXMiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIkx0IiwiQXMiLCJ2cyIsImJzIiwiVnMiLCJTcyIsIkRzIiwiQ3MiLCJQcyIsIk5zIiwiZ3QiLCJzZXJpYWxpemVyIiwiUnMiLCJ4cyIsImVsZW1lbnRzIiwia3MiLCJPcyIsInRyYW5zZm9ybVJlc3VsdHMiLCJGcyIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJpc05vbmUiLCJCcyIsIkxzIiwicXMiLCJZcyIsIm5vbmUiLCJqcyIsInpzIiwiVXMiLCJIcyIsImZpZWxkVHJhbnNmb3JtcyIsInByZWNvbmRpdGlvbiIsIldzIiwiS3MiLCJKcyIsImZpZWxkTWFzayIsIkdzIiwidHJhbnNmb3JtIiwiUXMiLCIkcyIsImdldEZpZWxkTWFzayIsIlhzIiwiWnMiLCJiYXRjaElkIiwibG9jYWxXcml0ZVRpbWUiLCJiYXNlTXV0YXRpb25zIiwibXV0YXRpb25zIiwiYXBwbHlUb1JlbW90ZURvY3VtZW50IiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsImFwcGx5VG9Mb2NhbERvY3VtZW50U2V0IiwibXV0YXRlZEZpZWxkcyIsInRpIiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJlaSIsIm11dGF0aW9uIiwiZ2V0S2V5Iiwic2kiLCJjb3VudCIsInVuY2hhbmdlZE5hbWVzIiwiaWkiLCJyaSIsInVpIiwiY2kiLCJvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzIiwiYWkiLCJvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoIiwibm90aWZ5T25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCIsImxpIiwiZmkiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsImRpIiwiRGF0YVZpZXciLCJidWZmZXIiLCJnZXRVaW50MzIiLCJ3aSIsImJpdG1hcCIsInBhZGRpbmciLCJoYXNoQ291bnQiLCJfaSIsIm1pIiwic25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q2hhbmdlcyIsInRhcmdldE1pc21hdGNoZXMiLCJkb2N1bWVudFVwZGF0ZXMiLCJyZXNvbHZlZExpbWJvRG9jdW1lbnRzIiwiZ2kiLCJjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UiLCJyZXN1bWVUb2tlbiIsImN1cnJlbnQiLCJhZGRlZERvY3VtZW50cyIsIm1vZGlmaWVkRG9jdW1lbnRzIiwicmVtb3ZlZERvY3VtZW50cyIsInlpIiwiUHQiLCJyZW1vdmVkVGFyZ2V0SWRzIiwiYnQiLCJwaSIsInRhcmdldElkIiwiVnQiLCJJaSIsInRhcmdldElkcyIsImNhdXNlIiwiVGkiLCJTdCIsInZpIiwiQ3QiLCJ4dCIsIk50Iiwia3QiLCJNdCIsIiR0IiwicXQiLCJVdCIsIkt0IiwiRWkiLCJHdCIsIlF0IiwianQiLCJ6dCIsIkFpIiwiV3QiLCJIdCIsIkp0IiwiWXQiLCJYdCIsImZvckVhY2hUYXJnZXQiLCJadCIsInRlIiwicmVtb3ZlVGFyZ2V0IiwiZWUiLCJuZSIsInNlIiwibmV3Tm9Eb2N1bWVudCIsImllIiwicmUiLCJsb2NhbENhY2hlQ291bnQiLCJleGlzdGVuY2VGaWx0ZXJDb3VudCIsImJsb29tRmlsdGVyIiwiYXBwbGllZCIsImJpdG1hcExlbmd0aCIsImJpdHMiLCJvZSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJ1ZSIsImNlIiwicHVycG9zZSIsImhlIiwibGUiLCJSaSIsImFzYyIsImRlc2MiLCJQaSIsImluIiwiYmkiLCJWaSIsIlNpIiwiRGkiLCJDaSIsInhpIiwiTmkiLCJmcm9tVGltZXN0YW1wIiwia2kiLCJNaSIsInVyIiwiJGkiLCJPaSIsInFpIiwiRmkiLCJMaSIsIlVpIiwiSGkiLCJkb2N1bWVudHMiLCJKaSIsInN0cnVjdHVyZWRRdWVyeSIsInBhcmVudCIsImNvbGxlY3Rpb25JZCIsImFsbERlc2NlbmRhbnRzIiwicnIiLCJ3aGVyZSIsInNyIiwiZGlyZWN0aW9uIiwidHIiLCJiZWZvcmUiLCJZaSIsIkJpIiwiWmkiLCJpciIsIktuIiwidW5hcnlGaWx0ZXIiLCJOYU4iLCJmaWVsZEZpbHRlciIsImNvbXBvc2l0ZUZpbHRlciIsImVyIiwibnIiLCJmaWVsZFBhdGgiLCJmcm9tU2VydmVyRm9ybWF0IiwiZmllbGRQYXRocyIsImNyIiwic2VxdWVuY2VOdW1iZXIiLCJsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiZXhwZWN0ZWRDb3VudCIsIndpdGhTZXF1ZW5jZU51bWJlciIsIndpdGhSZXN1bWVUb2tlbiIsIndpdGhFeHBlY3RlZENvdW50Iiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJhciIsImZlIiwieXIiLCJiciIsIl9lIiwidmUiLCJ6ciIsInJuIiwiV3IiLCJhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwiZ2V0RW50cmllcyIsImFkZEZpZWxkSW5kZXgiLCJkZWxldGVGaWVsZEluZGV4IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQiLCJnZXRJbmRleFR5cGUiLCJnZXRGaWVsZEluZGV4ZXMiLCJnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUiLCJnZXRNaW5PZmZzZXQiLCJnZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwIiwidXBkYXRlQ29sbGVjdGlvbkdyb3VwIiwidXBkYXRlSW5kZXhFbnRyaWVzIiwic28iLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSIsIkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCIsIkRFRkFVTFQiLCJESVNBQkxFRCIsImxvIiwidm8iLCJjaGFuZ2VzIiwiY2hhbmdlc0FwcGxpZWQiLCJhZGRFbnRyeSIsImFzc2VydE5vdEFwcGxpZWQiLCJyZW1vdmVFbnRyeSIsIm5ld0ludmFsaWREb2N1bWVudCIsImdldEVudHJ5IiwiZ2V0RnJvbUNhY2hlIiwiZ2V0QWxsRnJvbUNhY2hlIiwiTm8iLCJrbyIsInJlbW90ZURvY3VtZW50Q2FjaGUiLCJtdXRhdGlvblF1ZXVlIiwiZG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJpbmRleE1hbmFnZXIiLCJnZXREb2N1bWVudCIsImdldE92ZXJsYXkiLCJnZXREb2N1bWVudHMiLCJnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyIsInBvcHVsYXRlT3ZlcmxheXMiLCJjb21wdXRlVmlld3MiLCJnZXRPdmVybGF5ZWREb2N1bWVudHMiLCJnZXRPdmVybGF5cyIsInJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwic2F2ZU92ZXJsYXlzIiwicmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5IiwiV24iLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkiLCJnZXROZXh0RG9jdW1lbnRzIiwiZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwIiwiZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uIiwiTW8iLCJnZXRCdW5kbGVNZXRhZGF0YSIsInNhdmVCdW5kbGVNZXRhZGF0YSIsImdldE5hbWVkUXVlcnkiLCJzYXZlTmFtZWRRdWVyeSIsInF1ZXJ5IiwiYnVuZGxlZFF1ZXJ5IiwiJG8iLCJvdmVybGF5cyIsIndlIiwicmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkIiwiT28iLCJGbyIsImFkZFJlZmVyZW5jZSIsInJlbW92ZVJlZmVyZW5jZSIsInBzIiwiY29udGFpbnNLZXkiLCJCbyIsInJlZmVyZW5jZURlbGVnYXRlIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJQT1NJVElWRV9JTkZJTklUWSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJMbyIsImRvY3MiLCJzZXRJbmRleE1hbmFnZXIiLCJuZXdDaGFuZ2VCdWZmZXIiLCJxbyIsImdldFNpemUiLCJVbyIsInBlcnNpc3RlbmNlIiwibGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImhpZ2hlc3RUYXJnZXRJZCIsInRhcmdldENvdW50IiwiTXMiLCJnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwiZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyIiwiYWxsb2NhdGVUYXJnZXRJZCIsInNldFRhcmdldHNNZXRhZGF0YSIsImFkZFRhcmdldERhdGEiLCJ1cGRhdGVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldHMiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsImdldFRhcmdldENvdW50IiwiZ2V0VGFyZ2V0RGF0YSIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiS28iLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsImdldEluZGV4TWFuYWdlciIsImdldERvY3VtZW50T3ZlcmxheUNhY2hlIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFRhcmdldENhY2hlIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsImdldEJ1bmRsZUNhY2hlIiwicnVuVHJhbnNhY3Rpb24iLCJHbyIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsIlFvIiwiZnJvbVBhdGgiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwidHUiLCJmcm9tQ2FjaGUiLCJkb2NDaGFuZ2VzIiwiZG9jIiwiZXUiLCJLaSIsIkdpIiwiUWkiLCJqaSIsInppIiwiV2kiLCJ5dCIsIm51IiwiWGkiLCJsb2NhbERvY3VtZW50cyIsImNvbGxlY3RHYXJiYWdlIiwiY29sbGVjdCIsIml1IiwicmVtb3ZlZEJhdGNoSWRzIiwiYWRkZWRCYXRjaElkcyIsIm91IiwiYXUiLCJsdSIsImZ1IiwiX3UiLCJzcyIsIlJ1IiwiYWN0aXZlVGFyZ2V0SWRzIiwibHIiLCJkciIsImhyIiwidXBkYXRlVGltZU1zIiwiYnUiLCJIciIsIkpyIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJWdSIsIllyIiwiU3UiLCJYciIsIlpyIiwiZW8iLCJubyIsImlvIiwiRHUiLCJDdSIsInh1IiwiQmF0Y2hHZXREb2N1bWVudHMiLCJDb21taXQiLCJSdW5RdWVyeSIsIlJ1bkFnZ3JlZ2F0aW9uUXVlcnkiLCJOdSIsInJvIiwib28iLCJ1byIsImNvIiwiYW8iLCJobyIsIm9uTWVzc2FnZSIsImZvIiwid28iLCJfbyIsImt1IiwiTXUiLCJkYXRhYmFzZUluZm8iLCJtbyIsInlvIiwicG8iLCJJbyIsIlRvIiwiRW8iLCJBbyIsIlJvIiwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zIiwidGltZW91dFNlY29uZHMiLCJPdSIsIkZ1IiwiQnUiLCJ0aW1lcklkIiwiUG8iLCJibyIsIlZvIiwiU28iLCJEbyIsIkNvIiwieG8iLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsInNraXBEZWxheSIsIkx1IiwiY29ubmVjdGlvbiIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwiam8iLCJ6byIsIldvIiwiSG8iLCJKbyIsIllvIiwiWG8iLCJabyIsImVucXVldWVBbmRGb3JnZXQiLCJxdSIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJkb2N1bWVudERlbGV0ZSIsImRvY3VtZW50UmVtb3ZlIiwic3UiLCJhZGRUYXJnZXQiLCJsYWJlbHMiLCJVdSIsInJ1IiwibGFzdFN0cmVhbVRva2VuIiwidXUiLCJzdHJlYW1Ub2tlbiIsIndyaXRlUmVzdWx0cyIsImNvbW1pdFRpbWUiLCJjdSIsImh1Iiwid3JpdGVzIiwidXBkYXRlTWFzayIsInZlcmlmeSIsInVwZGF0ZVRyYW5zZm9ybXMiLCJzZXRUb1NlcnZlclZhbHVlIiwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzIiwicmVtb3ZlQWxsRnJvbUFycmF5IiwiaW5jcmVtZW50IiwiY3VycmVudERvY3VtZW50IiwiS3UiLCJhdXRoQ3JlZGVudGlhbHMiLCJhcHBDaGVja0NyZWRlbnRpYWxzIiwidGVybWluYXRlIiwiUXUiLCJhc3luY1F1ZXVlIiwid3UiLCJtdSIsImd1IiwieXUiLCJwdSIsIkl1IiwiVHUiLCJqdSIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJFdSIsIkF1IiwidnUiLCJQdSIsIld1IiwienUiLCJIdSIsIlp1IiwiWXUiLCJKdSIsIlh1IiwicmVqZWN0TGlzdGVuIiwiYXBwbHlSZW1vdGVFdmVudCIsIl9jIiwiYXBwbHlTdWNjZXNzZnVsV3JpdGUiLCJvaSIsInJlamVjdEZhaWxlZFdyaXRlIiwidmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcyIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJzdG9wIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwidGltZXJIYW5kbGUiLCJoYW5kbGVEZWxheUVsYXBzZWQiLCJrZXllZE1hcCIsInNvcnRlZFNldCIsInRyYWNrIiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiaGFzQ2FjaGVkUmVzdWx0cyIsImVtcHR5U2V0IiwibGlzdGVuZXJzIiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwib25MaXN0ZW4iLCJvbkVycm9yIiwiJHUiLCJvblVubGlzdGVuIiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsImZyb21Jbml0aWFsRG9jdW1lbnRzIiwic25hcHNob3QiLCJ2aWV3IiwicmVtb3RlU3RvcmUiLCJldmVudE1hbmFnZXIiLCJzaGFyZWRDbGllbnRTdGF0ZSIsIm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zIiwiaXNQcmltYXJ5Q2xpZW50IiwidHJhY2tSZW1vdmFscyIsInN5bmNocm9uaXplVGFicyIsImNyZWF0ZVNoYXJlZENsaWVudFN0YXRlIiwiY3JlYXRlUGVyc2lzdGVuY2UiLCJjcmVhdGVMb2NhbFN0b3JlIiwiZ2NTY2hlZHVsZXIiLCJjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlciIsImluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsImNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsImluaXRpYWxVc2VyIiwiY3JlYXRlRGF0YXN0b3JlIiwiY3JlYXRlUmVtb3RlU3RvcmUiLCJjcmVhdGVFdmVudE1hbmFnZXIiLCJzeW5jRW5naW5lIiwiY3JlYXRlU3luY0VuZ2luZSIsIm9ic2VydmVyIiwibXV0ZWQiLCJjbGllbnRJZCIsImF1dGhDcmVkZW50aWFsTGlzdGVuZXIiLCJhcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lciIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJpc1NodXR0aW5nRG93biIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCIsIl9vbmxpbmVDb21wb25lbnRzIiwiX29mZmxpbmVDb21wb25lbnRzIiwiZ2V0Q29uZmlndXJhdGlvbiIsIl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyIiwiX29mZmxpbmUiLCJfb25saW5lIiwidGgiLCJlaCIsIm5oIiwiaWgiLCJyaCIsIm9oIiwidWgiLCJhaCIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJsb2NhbENhY2hlIiwiY2FjaGVTaXplQnl0ZXMiLCJzaCIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMiLCJoaCIsIl9hdXRoQ3JlZGVudGlhbHMiLCJfYXBwQ2hlY2tDcmVkZW50aWFscyIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9pbml0aWFsaXplZCIsIl90ZXJtaW5hdGVkIiwiX3Rlcm1pbmF0ZVRhc2siLCJfc2V0U2V0dGluZ3MiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsImF1dGhUb2tlbkZhY3RvcnkiLCJjbGllbnQiLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwic2V0dGluZ3MiLCJmaCIsImNvbnZlcnRlciIsIl9rZXkiLCJmaXJlc3RvcmUiLCJfcGF0aCIsIndoIiwid2l0aENvbnZlcnRlciIsImRoIiwiX3F1ZXJ5IiwiX2giLCJnaCIsIkloIiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsInN0YWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJ2aCIsIl9xdWV1ZSIsIl9maXJlc3RvcmVDbGllbnQiLCJWaCIsImJoIiwiX29mZmxpbmVDb21wb25lbnRQcm92aWRlciIsIl9vbmxpbmVDb21wb25lbnRQcm92aWRlciIsIl9vZmZsaW5lS2luZCIsImtpbmQiLCJVaCIsIl9ieXRlU3RyaW5nIiwiS2giLCJfaW50ZXJuYWxQYXRoIiwiUWgiLCJfbWV0aG9kTmFtZSIsImpoIiwiX2xhdCIsIl9sb25nIiwiemgiLCJXaCIsInRvTXV0YXRpb24iLCJKaCIsIlloIiwiZ2wiLCJtZXRob2ROYW1lIiwiY29udGFpbnMiLCJYaCIsIlpoIiwidGwiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiZGwiLCJsbCIsIndsIiwieWwiLCJobCIsImZsIiwiX3RvRmllbGRUcmFuc2Zvcm0iLCJmcm9tRGF0ZSIsIm1sIiwiX2wiLCJzZWFyY2giLCJwbCIsIl9maXJlc3RvcmUiLCJfdXNlckRhdGFXcml0ZXIiLCJfZG9jdW1lbnQiLCJfY29udmVydGVyIiwicmVmIiwiSWwiLCJmcm9tRmlyZXN0b3JlIiwiY29udmVydFZhbHVlIiwiVGwiLCJXbCIsImNvbnZlcnRUaW1lc3RhbXAiLCJjb252ZXJ0U2VydmVyVGltZXN0YW1wIiwiY29udmVydEJ5dGVzIiwiY29udmVydFJlZmVyZW5jZSIsImNvbnZlcnRHZW9Qb2ludCIsImNvbnZlcnRBcnJheSIsImNvbnZlcnRPYmplY3QiLCJjb252ZXJ0T2JqZWN0TWFwIiwiY29udmVydERvY3VtZW50S2V5IiwibmYiLCJzZiIsIl9maXJlc3RvcmVJbXBsIiwibWV0YWRhdGEiLCJyZiIsInNlcnZlclRpbWVzdGFtcHMiLCJvZiIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsInVmIiwiaGYiLCJkZiIsIkVsIiwic291cmNlIiwibWYiLCJ0b0ZpcmVzdG9yZSIsIkhsIiwiRWYiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsImdldEFwcCIsInByb2R1Y3ROYW1lIiwiX2IiLCJlbXVsYXRvckhvc3RzIiwiZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCIsInNlcGFyYXRvckluZGV4IiwibGFzdEluZGV4T2YiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQiLCJtb2NrVXNlclRva2VuIiwicHJvamVjdCIsImlhdCIsInN1YiIsInVzZXJfaWQiLCJwYXlsb2FkIiwiaXNzIiwiYXVkIiwiZXhwIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduX2luX3Byb3ZpZGVyIiwiaWRlbnRpdGllcyIsImFsZyIsImNyZWF0ZU1vY2tVc2VyVG9rZW4iLCJsaCIsImFwaUtleSIsImF1dGhEb21haW4iLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJMb2NhdGlvbk1hbmFnZXIiLCJiYWNrZ3JvdW5kSW1nIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb29yZGluYXRlcyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJzY2FsaW5nRmFjdG9yIiwiaW5uZXJXaWR0aCIsInNjYWxlZFgiLCJzY2FsZWRZIiwiY2hhcmFjdGVycyIsImJvd3NlciIsImJvdHRvbSIsIm5lbyIsIndhbGRvIiwibWVnIiwicGlrYWNodSIsIm1pa2UiLCJnZXRDb29yZGluYXRlQXJlYSIsImFyZWEiLCJGaXJlc3RvcmVNYW5hZ2VyIiwic3RvcmVDaGFyYWN0ZXJMb2NhdGlvbnMiLCJjaGFyYWN0ZXIiLCJnZXRDaGFyYWN0ZXJMb2NhdGlvbnMiLCJ2ZXJpZnlDbGlja2VkUG9zaXRpb24iLCJnYW1lQ2hvaWNlIiwiZm91bmRDaGFyYWN0ZXIiLCJjaGVja1VzZXJFeGlzdHMiLCJ1c2VybmFtZSIsInVzZXJEb2NSZWYiLCJBZiIsInN0b3JlVXNlclRpbWUiLCJ0aW1lIiwiZ2V0VG9wMTBUaW1lcyIsInVzZXJUaW1lcyIsImxvY2FsZUNvbXBhcmUiLCJSZW5kZXJlckhlbHBlcnMiLCJlbGVtZW50IiwicG9zaXRpb25lZCIsInN0eWxlIiwiY2xhc3NOYW1lIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiZGF0YXNldCIsIkNvbnRyb2xsZXIiLCJoYW5kbGVDaGFyYWN0ZXJCdXR0b25DbGljayIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIlJlbmRlcmVyIiwiY29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjaXJjbGVzIiwicG9wdXBzIiwiY3JlYXRlRmVlZGJhY2tNc2ciLCJmZWVkYmFja01zZyIsImJhY2tncm91bmQiLCJhcHBlbmRDaGlsZCIsInJlbW92ZUNpcmNsZSIsImNpcmNsZVRvUmVtb3ZlIiwiY3JlYXRlQ2lyY2xlIiwiY2lyY2xlIiwicmVtb3ZlUG9wdXAiLCJwb3B1cFRvUmVtb3ZlIiwiY3JlYXRlUG9wdXAiLCJmb3VuZENoYXJhY3RlcnMiLCJwb3B1cCIsImdldEdhbWVDaG9pY2UiLCJvcHRpb24iLCJjaG9pY2UiLCJjbGFzc0xpc3QiLCJjcmVhdGVUYWJsZSIsInRvcDEwVXNlclRpbWVzIiwibGVhZGVyYm9hcmRIZWFkaW5nIiwiZm9ybWF0dGVkR2FtZUNob2ljZSIsInRpbWVyRWxlbWVudCIsInNjb3JlYm9hcmRUYWJsZUJvZHkiLCJ1c2VyVGltZSIsInJvdyIsInVzZXJuYW1lQ2VsbCIsInRpbWVDZWxsIiwiQXBwSGVscGVycyIsInRpbWVySW50ZXJ2YWwiLCJjdXJyZW50U2xpZGUiLCJzdG9wVGltZXIiLCJjbGVhckludGVydmFsIiwic2hvd01vZGFsIiwibW9kYWwiLCJjbG9zZXN0IiwiZGlzcGxheSIsImhpZGVNb2RhbCIsInN0YXJ0VGltZXIiLCJzdGFydFRpbWUiLCJzZXRJbnRlcnZhbCIsImZvcm1hdHRlZFRpbWUiLCJtaWxsaXNlY29uZHMiLCJob3VycyIsIm1pbnV0ZXMiLCJmb3JtYXRUaW1lIiwicmVzZXRUaW1lciIsInJlc2V0Q291bnQiLCJ1cGRhdGVDb3VudCIsImNvdW50RWxlbWVudCIsImZvdW5kQ291bnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZ3JheU91dENoYXJhY3Rlckljb24iLCJjaGFyYWN0ZXJJZCIsImNoYXJhY3RlckVsZW1lbnQiLCJjbGVhckNoYXJhY3Rlckljb25zIiwiZ2V0TGVhZGVyYm9hcmQiLCJzdWJtaXRCdXR0b24iLCJ1c2VybmFtZUlucHV0IiwiaGFuZGxlU3VibWl0IiwidXBkYXRlQWN0aXZlRG90IiwiZG90IiwidXBkYXRlQWN0aXZlU2xpZGUiLCJzbGlkZXMiLCJ0b3RhbFNsaWRlcyIsIm9wYWNpdHkiLCJzZXRCYWNrZ3JvdW5kSW1hZ2UiLCJzZXRDaGFyYWN0ZXJJY29ucyIsImljb25zIiwidGl0bGVzIiwiY2hhcmFjdGVyRGF0YSIsImN5YmVycHVuayIsImljb24iLCJ0aXRsZSIsInJvYm90IiwiZGVmYXVsdCIsInNldENoYXJhY3RlcklkIiwiaW1hZ2VFbGVtZW50IiwiaW1hZ2VOYW1lIiwiZHJvcGRvd25CdXR0b24iLCJkcm9wZG93bk1lbnUiLCJzdGFydEJ1dHRvbnMiLCJwbGF5QWdhaW5CdXR0b24iLCJpbml0aWFsTW9kYWwiLCJlbmRnYW1lTW9kYWwiLCJsZWFkZXJib2FyZE1vZGFsIiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsInVzZXJuYW1lRXJyb3IiLCJpc0dhbWVTdGFydGVkIiwiaXNBZGRpbmdDaXJjbGUiLCJpc0FkZGluZ1BvcHVwIiwic2VsZWN0ZWRDaGFyYWN0ZXIiLCJzdGFydEdhbWUiLCJjbGlja2VkQnV0dG9uIiwicmVzZXRHYW1lIiwiaGFuZGxlQ29udGVudENsaWNrIiwiY2xpY2tlZENoYXJhY3RlciIsImZvcm1hdHRlZENoYXJhY3RlciIsImluaXQiLCJ0b2dnbGUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImRlZmluaXRpb24iLCJlbnVtZXJhYmxlIiwib2JqIl0sInNvdXJjZVJvb3QiOiIifQ==
(()=>{"use strict";const e=(()=>{const e=document.getElementById("backgroundImg");return{getCoordinates:t=>{const n=e.getBoundingClientRect(),o=t.clientX-n.left,c=t.clientY-n.top;console.log(`X: ${o}, Y: ${c}`);const r=o/(window.innerWidth/1920),l=c/(window.innerHeight/1080);return console.log(`Scaled X: ${r}, Scaled Y: ${l}`),{x:o,y:c}},formatTime:e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60);return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(e%60).padStart(2,"0")}`}}})();console.log("interface.js says: this seem to be working");const t=(()=>{const e=document.getElementById("content"),o=document.getElementById("overlay"),c=[],r=[],l=(e,t)=>{const n=document.createElement("div");return n.className=e,t&&(n.textContent=t),n},s=(e,t,n)=>{const o=e;o.style.left=`${t}px`,o.style.top=`${n}px`},a=e=>{e.parentNode&&e.parentNode.removeChild(e)};return{createDiv:l,setPosition:s,createFeedbackMsg:(t,n,o)=>{const c=l("feedback",t);s(c,n-150,o-100),c.style.background="rgba(255, 0, 0, 0.7)",e.appendChild(c),setTimeout((()=>{c.remove()}),5e3)},createLink:(e,t)=>{const n=document.createElement("a");return n.textContent=e,n.href="#",n.addEventListener("click",t),n},showOverlay:()=>{o.style.display="flex"},hideOverlay:()=>{o.style.display="none"},removeElement:a,removeCircle:()=>{if(c.length>0){const e=c.pop();a(e)}},createCircle:(t,n)=>{const o=l("circle");s(o,t-50,n-50),e.appendChild(o),c.push(o)},removePopup:()=>{if(r.length>0){const e=r.pop();a(e)}},createPopup:(o,c)=>{const a=l("choice");s(a,o+60,c-70),["Bowser","Neo","Waldo"].forEach((e=>{const o=t.createLink(e,n.handleLinkClick);a.appendChild(o)})),e.appendChild(a),r.push(a)}}})(),n=(()=>{const n=document.getElementById("content"),o=document.getElementById("dropdownButton"),c=document.getElementById("dropdownMenu"),r=document.getElementById("startButton"),l=document.getElementById("timer");let s=!1,a=!1,i=!1;const d=()=>{s||(t.hideOverlay(),(()=>{let t=0;setInterval((()=>{t+=1;const n=e.formatTime(t);l.textContent=n}),1e3)})(),s=!0,a=!0,i=!0)},m=n=>{if(s&&!n.target.closest("header")&&!n.target.closest("footer")&&n.target!==r){if(a){const{x:o,y:c}=e.getCoordinates(n);t.createCircle(o,c),t.createPopup(o,c)}else t.removeCircle(),t.removePopup();a=!a,i=!i}},p=n=>{n.preventDefault(),console.log("handelLinkClick() triggered");const{x:o,y:c}=e.getCoordinates(n);t.removePopup(),t.createFeedbackMsg("Keep looking!",o,c)};return{init:()=>{n.addEventListener("click",m),document.querySelectorAll(".choice a").forEach((e=>{e.addEventListener("click",p)})),o.addEventListener("click",(()=>{c.classList.toggle("show"),o.textContent=c.classList.contains("show")?"▲ Hide Characters ▲":"▼ Show Characters ▼"})),r.addEventListener("click",d),t.showOverlay()},handleLinkClick:p}})();n.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFHMUJQLEVBQW1CeEUsSUFHdkJBLEVBQU11RixpQkFFTjlFLFFBQVFDLElBQUksK0JBQ1osTUFBTSxFQUFFUCxFQUFDLEVBQUVHLEdBQU1YLEVBQWlCSSxlQUFlQyxHQUNqRHdCLEVBQVN3QyxjQUNUeEMsRUFBU2tCLGtCQUFrQixnQkFBaUJ2QyxFQUFHRyxFQUFFLEVBdUJuRCxNQUFPLENBQ0xrRixLQXJCVyxLQUNYL0QsRUFBUTRCLGlCQUFpQixRQUFTK0IsR0FFcEJ2RixTQUFTNEYsaUJBQWlCLGFBQ2xDckIsU0FBU2pCLElBQ2JBLEVBQUtFLGlCQUFpQixRQUFTbUIsRUFBZ0IsSUFHakRDLEVBQWVwQixpQkFBaUIsU0FBUyxLQUN2Q3FCLEVBQWFnQixVQUFVQyxPQUFPLFFBQzlCbEIsRUFBZXZDLFlBQWN3QyxFQUFhZ0IsVUFBVUUsU0FBUyxRQUN6RCxzQkFDQSxxQkFBcUIsSUFHM0JqQixFQUFZdEIsaUJBQWlCLFFBQVMyQixHQUV0Q3hELEVBQVM4QixhQUFhLEVBS3RCa0Isa0JBRUgsRUFwR2tCLEdBc0duQkQsRUFBV2lCLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL3NyYy91dGlscy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL3NyYy9pbnRlcmZhY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEludGVyZmFjZUhlbHBlcnMgPSAoKCkgPT4ge1xuICBjb25zdCBiYWNrZ3JvdW5kSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kSW1nXCIpO1xuXG4gIGNvbnN0IGdldENvb3JkaW5hdGVzID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgcmVjdCA9IGJhY2tncm91bmRJbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgY29uc3QgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcbiAgICBjb25zb2xlLmxvZyhgWDogJHt4fSwgWTogJHt5fWApO1xuXG4gICAgY29uc3QgcmVmZXJlbmNlV2lkdGggPSAxOTIwOyAvLyBSZWZlcmVuY2Ugd2lkdGggb2YgdGhlIGNvb3JkaW5hdGUgc3lzdGVtXG4gICAgY29uc3QgcmVmZXJlbmNlSGVpZ2h0ID0gMTA4MDsgLy8gUmVmZXJlbmNlIGhlaWdodCBvZiB0aGUgY29vcmRpbmF0ZSBzeXN0ZW1cblxuICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgY29uc3Qgc2NyZWVuSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgY29uc3Qgd2lkdGhTY2FsaW5nRmFjdG9yID0gc2NyZWVuV2lkdGggLyByZWZlcmVuY2VXaWR0aDtcbiAgICBjb25zdCBoZWlnaHRTY2FsaW5nRmFjdG9yID0gc2NyZWVuSGVpZ2h0IC8gcmVmZXJlbmNlSGVpZ2h0O1xuXG4gICAgY29uc3Qgc2NhbGVkWCA9IHggLyB3aWR0aFNjYWxpbmdGYWN0b3I7XG4gICAgY29uc3Qgc2NhbGVkWSA9IHkgLyBoZWlnaHRTY2FsaW5nRmFjdG9yO1xuXG4gICAgY29uc29sZS5sb2coYFNjYWxlZCBYOiAke3NjYWxlZFh9LCBTY2FsZWQgWTogJHtzY2FsZWRZfWApO1xuXG4gICAgcmV0dXJuIHsgeCwgeSB9O1xuICB9O1xuXG4gIGNvbnN0IGZvcm1hdFRpbWUgPSAoc2Vjb25kcykgPT4ge1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRIb3VycyA9IFN0cmluZyhob3VycykucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgIGNvbnN0IGZvcm1hdHRlZE1pbnV0ZXMgPSBTdHJpbmcobWludXRlcykucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgIGNvbnN0IGZvcm1hdHRlZFNlY29uZHMgPSBTdHJpbmcoc2Vjb25kcyAlIDYwKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgcmV0dXJuIGAke2Zvcm1hdHRlZEhvdXJzfToke2Zvcm1hdHRlZE1pbnV0ZXN9OiR7Zm9ybWF0dGVkU2Vjb25kc31gO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0Q29vcmRpbmF0ZXMsXG4gICAgZm9ybWF0VGltZSxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBMb2dpY0hlbHBlcnMgPSAoKCkgPT4ge1xuICAvLyAuLi5cbn0pKCk7XG4iLCIvLyBUTyBETzpcbi8vIEFkZGl0aW9uYWwgY2xlYW51cCBpZiBuZWNlc3Nhcnlcbi8vIENvbnRpbnVlIHdpdGggMTAuXG5cbmltcG9ydCB7IEludGVyZmFjZUhlbHBlcnMgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5jb25zb2xlLmxvZyhcImludGVyZmFjZS5qcyBzYXlzOiB0aGlzIHNlZW0gdG8gYmUgd29ya2luZ1wiKTtcblxuY29uc3QgUmVuZGVyZXIgPSAoKCkgPT4ge1xuICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdmVybGF5XCIpO1xuXG4gIGNvbnN0IGNpcmNsZXMgPSBbXTtcbiAgY29uc3QgcG9wdXBzID0gW107XG5cbiAgY29uc3QgY3JlYXRlRGl2ID0gKGNsYXNzTmFtZSwgdGV4dCkgPT4ge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGl2LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICBpZiAodGV4dCkge1xuICAgICAgZGl2LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG4gICAgcmV0dXJuIGRpdjtcbiAgfTtcblxuICBjb25zdCBzZXRQb3NpdGlvbiA9IChlbGVtZW50LCB4LCB5KSA9PiB7XG4gICAgY29uc3QgcG9zaXRpb25lZCA9IGVsZW1lbnQ7XG4gICAgcG9zaXRpb25lZC5zdHlsZS5sZWZ0ID0gYCR7eH1weGA7XG4gICAgcG9zaXRpb25lZC5zdHlsZS50b3AgPSBgJHt5fXB4YDtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVGZWVkYmFja01zZyA9IChtZXNzYWdlLCB4LCB5KSA9PiB7XG4gICAgY29uc3QgZmVlZGJhY2tNc2cgPSBjcmVhdGVEaXYoXCJmZWVkYmFja1wiLCBtZXNzYWdlKTtcbiAgICBzZXRQb3NpdGlvbihmZWVkYmFja01zZywgeCAtIDE1MCwgeSAtIDEwMCk7XG4gICAgZmVlZGJhY2tNc2cuc3R5bGUuYmFja2dyb3VuZCA9IFwicmdiYSgyNTUsIDAsIDAsIDAuNylcIjtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGZlZWRiYWNrTXNnKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZmVlZGJhY2tNc2cucmVtb3ZlKCk7XG4gICAgfSwgNTAwMCk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlTGluayA9ICh0ZXh0LCBjbGlja0hhbmRsZXIpID0+IHtcbiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgbGluay50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgbGluay5ocmVmID0gXCIjXCI7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tIYW5kbGVyKTtcbiAgICByZXR1cm4gbGluaztcbiAgfTtcblxuICBjb25zdCBzaG93T3ZlcmxheSA9ICgpID0+IHtcbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgfTtcblxuICBjb25zdCBoaWRlT3ZlcmxheSA9ICgpID0+IHtcbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfTtcblxuICBjb25zdCByZW1vdmVFbGVtZW50ID0gKGVsZW1lbnQpID0+IHtcbiAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUNpcmNsZSA9ICgpID0+IHtcbiAgICBpZiAoY2lyY2xlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjaXJjbGVUb1JlbW92ZSA9IGNpcmNsZXMucG9wKCk7XG4gICAgICByZW1vdmVFbGVtZW50KGNpcmNsZVRvUmVtb3ZlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlQ2lyY2xlID0gKHgsIHkpID0+IHtcbiAgICBjb25zdCBjaXJjbGUgPSBjcmVhdGVEaXYoXCJjaXJjbGVcIik7XG4gICAgc2V0UG9zaXRpb24oY2lyY2xlLCB4IC0gNTAsIHkgLSA1MCk7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZChjaXJjbGUpO1xuICAgIGNpcmNsZXMucHVzaChjaXJjbGUpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZVBvcHVwID0gKCkgPT4ge1xuICAgIGlmIChwb3B1cHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcG9wdXBUb1JlbW92ZSA9IHBvcHVwcy5wb3AoKTtcbiAgICAgIHJlbW92ZUVsZW1lbnQocG9wdXBUb1JlbW92ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVBvcHVwID0gKHgsIHkpID0+IHtcbiAgICBjb25zdCBwb3B1cCA9IGNyZWF0ZURpdihcImNob2ljZVwiKTtcbiAgICBzZXRQb3NpdGlvbihwb3B1cCwgeCArIDYwLCB5IC0gNzApO1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9IFtcIkJvd3NlclwiLCBcIk5lb1wiLCBcIldhbGRvXCJdO1xuICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgIGNvbnN0IGNob2ljZSA9IFJlbmRlcmVyLmNyZWF0ZUxpbmsob3B0aW9uLCBDb250cm9sbGVyLmhhbmRsZUxpbmtDbGljayk7XG4gICAgICBwb3B1cC5hcHBlbmRDaGlsZChjaG9pY2UpO1xuICAgIH0pO1xuXG4gICAgY29udGVudC5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgcG9wdXBzLnB1c2gocG9wdXApO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlRGl2LFxuICAgIHNldFBvc2l0aW9uLFxuICAgIGNyZWF0ZUZlZWRiYWNrTXNnLFxuICAgIGNyZWF0ZUxpbmssXG4gICAgc2hvd092ZXJsYXksXG4gICAgaGlkZU92ZXJsYXksXG4gICAgcmVtb3ZlRWxlbWVudCxcbiAgICByZW1vdmVDaXJjbGUsXG4gICAgY3JlYXRlQ2lyY2xlLFxuICAgIHJlbW92ZVBvcHVwLFxuICAgIGNyZWF0ZVBvcHVwLFxuICB9O1xufSkoKTtcblxuY29uc3QgQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG4gIGNvbnN0IGRyb3Bkb3duQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkcm9wZG93bkJ1dHRvblwiKTtcbiAgY29uc3QgZHJvcGRvd25NZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkcm9wZG93bk1lbnVcIik7XG4gIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGFydEJ1dHRvblwiKTtcbiAgY29uc3QgdGltZXJFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lclwiKTtcblxuICBsZXQgaXNHYW1lU3RhcnRlZCA9IGZhbHNlO1xuICBsZXQgaXNBZGRpbmdDaXJjbGUgPSBmYWxzZTtcbiAgbGV0IGlzQWRkaW5nUG9wdXAgPSBmYWxzZTtcblxuICBjb25zdCBzdGFydFRpbWVyID0gKCkgPT4ge1xuICAgIGxldCBzZWNvbmRzID0gMDtcblxuICAgIGNvbnN0IHVwZGF0ZVRpbWVyID0gKCkgPT4ge1xuICAgICAgc2Vjb25kcyArPSAxO1xuICAgICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IEludGVyZmFjZUhlbHBlcnMuZm9ybWF0VGltZShzZWNvbmRzKTtcbiAgICAgIHRpbWVyRWxlbWVudC50ZXh0Q29udGVudCA9IGZvcm1hdHRlZFRpbWU7XG4gICAgfTtcblxuICAgIHNldEludGVydmFsKHVwZGF0ZVRpbWVyLCAxMDAwKTtcbiAgfTtcblxuICBjb25zdCBzdGFydEdhbWUgPSAoKSA9PiB7XG4gICAgaWYgKCFpc0dhbWVTdGFydGVkKSB7XG4gICAgICBSZW5kZXJlci5oaWRlT3ZlcmxheSgpO1xuICAgICAgc3RhcnRUaW1lcigpO1xuICAgICAgaXNHYW1lU3RhcnRlZCA9IHRydWU7XG4gICAgICBpc0FkZGluZ0NpcmNsZSA9IHRydWU7XG4gICAgICBpc0FkZGluZ1BvcHVwID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ29udGVudENsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKFxuICAgICAgIWlzR2FtZVN0YXJ0ZWQgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiaGVhZGVyXCIpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xvc2VzdChcImZvb3RlclwiKSB8fFxuICAgICAgZXZlbnQudGFyZ2V0ID09PSBzdGFydEJ1dHRvblxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0FkZGluZ0NpcmNsZSkge1xuICAgICAgY29uc3QgeyB4LCB5IH0gPSBJbnRlcmZhY2VIZWxwZXJzLmdldENvb3JkaW5hdGVzKGV2ZW50KTtcbiAgICAgIFJlbmRlcmVyLmNyZWF0ZUNpcmNsZSh4LCB5KTtcbiAgICAgIFJlbmRlcmVyLmNyZWF0ZVBvcHVwKHgsIHkpO1xuICAgICAgLy8gPz8/XG4gICAgICAvLyBjb25zdCBhcmVhQ29vcmRpbmF0ZXMgPSB7XG4gICAgICAvLyAgIHRvcExlZnRYOiA3MzQsXG4gICAgICAvLyAgIHRvcExlZnRZOiAxNTgwLFxuICAgICAgLy8gICBib3R0b21SaWdodFg6IDg1MixcbiAgICAgIC8vICAgYm90dG9tUmlnaHRZOiAxNjc3LFxuICAgICAgLy8gfTtcblxuICAgICAgLy8gSW50ZXJmYWNlSGVscGVycy5jaGVja0lmQ2xpY2tlZEluc2lkZUFyZWEoZXZlbnQsIGFyZWFDb29yZGluYXRlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlbmRlcmVyLnJlbW92ZUNpcmNsZSgpO1xuICAgICAgUmVuZGVyZXIucmVtb3ZlUG9wdXAoKTtcbiAgICB9XG5cbiAgICBpc0FkZGluZ0NpcmNsZSA9ICFpc0FkZGluZ0NpcmNsZTtcbiAgICBpc0FkZGluZ1BvcHVwID0gIWlzQWRkaW5nUG9wdXA7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTGlua0NsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUgbGluaywgc28gdGhhdCB0aGUgdXNlciBkb2Vzbid0XG4gICAgLy8gZ2V0IHRocm93biB1cCB0byB0aGUgdG9wIG9mIHRoZSBwYWdlIGZvciBlYWNoIGxpbmsgY2xpY2tcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc29sZS5sb2coXCJoYW5kZWxMaW5rQ2xpY2soKSB0cmlnZ2VyZWRcIik7XG4gICAgY29uc3QgeyB4LCB5IH0gPSBJbnRlcmZhY2VIZWxwZXJzLmdldENvb3JkaW5hdGVzKGV2ZW50KTtcbiAgICBSZW5kZXJlci5yZW1vdmVQb3B1cCgpO1xuICAgIFJlbmRlcmVyLmNyZWF0ZUZlZWRiYWNrTXNnKFwiS2VlcCBsb29raW5nIVwiLCB4LCB5KTtcbiAgfTtcblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIGNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNvbnRlbnRDbGljayk7XG5cbiAgICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2hvaWNlIGFcIik7XG4gICAgbGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTGlua0NsaWNrKTtcbiAgICB9KTtcblxuICAgIGRyb3Bkb3duQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkcm9wZG93bk1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XG4gICAgICBkcm9wZG93bkJ1dHRvbi50ZXh0Q29udGVudCA9IGRyb3Bkb3duTWVudS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93XCIpXG4gICAgICAgID8gXCLilrIgSGlkZSBDaGFyYWN0ZXJzIOKWslwiXG4gICAgICAgIDogXCLilrwgU2hvdyBDaGFyYWN0ZXJzIOKWvFwiO1xuICAgIH0pO1xuXG4gICAgc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN0YXJ0R2FtZSk7XG5cbiAgICBSZW5kZXJlci5zaG93T3ZlcmxheSgpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdCxcbiAgICBoYW5kbGVMaW5rQ2xpY2ssXG4gIH07XG59KSgpO1xuXG5Db250cm9sbGVyLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJJbnRlcmZhY2VIZWxwZXJzIiwiYmFja2dyb3VuZEltZyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb29yZGluYXRlcyIsImV2ZW50IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIngiLCJjbGllbnRYIiwibGVmdCIsInkiLCJjbGllbnRZIiwidG9wIiwiY29uc29sZSIsImxvZyIsInNjYWxlZFgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwic2NhbGVkWSIsImlubmVySGVpZ2h0IiwiZm9ybWF0VGltZSIsInNlY29uZHMiLCJob3VycyIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZXMiLCJTdHJpbmciLCJwYWRTdGFydCIsIlJlbmRlcmVyIiwiY29udGVudCIsIm92ZXJsYXkiLCJjaXJjbGVzIiwicG9wdXBzIiwiY3JlYXRlRGl2IiwiY2xhc3NOYW1lIiwidGV4dCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNldFBvc2l0aW9uIiwiZWxlbWVudCIsInBvc2l0aW9uZWQiLCJzdHlsZSIsInJlbW92ZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVGZWVkYmFja01zZyIsIm1lc3NhZ2UiLCJmZWVkYmFja01zZyIsImJhY2tncm91bmQiLCJhcHBlbmRDaGlsZCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJjcmVhdGVMaW5rIiwiY2xpY2tIYW5kbGVyIiwibGluayIsImhyZWYiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd092ZXJsYXkiLCJkaXNwbGF5IiwiaGlkZU92ZXJsYXkiLCJyZW1vdmVDaXJjbGUiLCJsZW5ndGgiLCJjaXJjbGVUb1JlbW92ZSIsInBvcCIsImNyZWF0ZUNpcmNsZSIsImNpcmNsZSIsInB1c2giLCJyZW1vdmVQb3B1cCIsInBvcHVwVG9SZW1vdmUiLCJjcmVhdGVQb3B1cCIsInBvcHVwIiwiZm9yRWFjaCIsIm9wdGlvbiIsImNob2ljZSIsIkNvbnRyb2xsZXIiLCJoYW5kbGVMaW5rQ2xpY2siLCJkcm9wZG93bkJ1dHRvbiIsImRyb3Bkb3duTWVudSIsInN0YXJ0QnV0dG9uIiwidGltZXJFbGVtZW50IiwiaXNHYW1lU3RhcnRlZCIsImlzQWRkaW5nQ2lyY2xlIiwiaXNBZGRpbmdQb3B1cCIsInN0YXJ0R2FtZSIsInNldEludGVydmFsIiwiZm9ybWF0dGVkVGltZSIsInN0YXJ0VGltZXIiLCJoYW5kbGVDb250ZW50Q2xpY2siLCJ0YXJnZXQiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJpbml0IiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIl0sInNvdXJjZVJvb3QiOiIifQ==
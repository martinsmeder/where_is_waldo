/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={954:(t,e,n)=>{n.d(e,{k:()=>Gl,j:()=>Hl});const s=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&s+1<t.length&&56320==(64512&t.charCodeAt(s+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++s)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},r={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let e=0;e<t.length;e+=3){const r=t[e],i=e+1<t.length,o=i?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=r>>2,h=(3&r)<<4|o>>4;let l=(15&o)<<2|c>>6,d=63&c;a||(d=64,i||(l=64)),s.push(n[u],n[h],n[l],n[d])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[s++]=String.fromCharCode(55296+(i>>10)),e[s++]=String.fromCharCode(56320+(1023&i))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==o||null==a||null==c)throw new i;const u=r<<2|o>>4;if(s.push(u),64!==a){const t=o<<4&240|a>>2;if(s.push(t),64!==c){const t=a<<6&192|c;s.push(t)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=s(t);return r.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const t="MISSING_ENV_VAR".__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return r.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},c=()=>{var t;return null===(t=a())||void 0===t?void 0:t.config};class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}class h extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l.prototype.create)}}class l{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,r=this.errors[t],i=r?function(t,e){return t.replace(d,((t,n)=>{const s=e[n];return null!=s?String(s):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new h(s,o,n)}}const d=/\{\$([^}]+)}/g;function f(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const n=t[r],i=e[r];if(g(n)&&g(i)){if(!f(n,i))return!1}else if(n!==i)return!1}for(const t of s)if(!n.includes(t))return!1;return!0}function g(t){return null!==t&&"object"==typeof t}function p(t){return t&&t._delegate?t._delegate:t}class m{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const y="[DEFAULT]";class v{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new u;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),s=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(s)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:y})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=y){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=y){return this.instances.has(t)}getOptions(t=y){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(s);return s}onInit(t,e){var n;const s=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&t(i,s),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===y?void 0:s),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var s;return n||null}normalizeInstanceIdentifier(t=y){return this.component?this.component.multipleInstances?t:y:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class w{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new v(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const E=[];var b,T;(T=b||(b={}))[T.DEBUG=0]="DEBUG",T[T.VERBOSE=1]="VERBOSE",T[T.INFO=2]="INFO",T[T.WARN=3]="WARN",T[T.ERROR=4]="ERROR",T[T.SILENT=5]="SILENT";const C={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},I=b.INFO,S={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},_=(t,e,...n)=>{if(e<t.logLevel)return;const s=(new Date).toISOString(),r=S[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${s}]  ${t.name}:`,...n)};class A{constructor(t){this.name=t,this._logLevel=I,this._logHandler=_,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in b))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?C[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...t),this._logHandler(this,b.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...t),this._logHandler(this,b.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,b.INFO,...t),this._logHandler(this,b.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,b.WARN,...t),this._logHandler(this,b.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,b.ERROR,...t),this._logHandler(this,b.ERROR,...t)}}const D=(t,e)=>e.some((e=>t instanceof e));let k,N;const x=new WeakMap,R=new WeakMap,L=new WeakMap,M=new WeakMap,O=new WeakMap;let P={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return R.get(t);if("objectStoreNames"===e)return t.objectStoreNames||L.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return V(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function F(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(N||(N=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(U(this),t),V(x.get(this))}:function(...t){return V(e.apply(U(this),t))}:function(t,...n){const s=e.call(U(this),t,...n);return L.set(s,t.sort?t.sort():[t]),V(s)}:(t instanceof IDBTransaction&&function(t){if(R.has(t))return;const e=new Promise(((e,n)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",i),t.removeEventListener("abort",i)},r=()=>{e(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",i),t.addEventListener("abort",i)}));R.set(t,e)}(t),D(t,k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,P):t);var e}function V(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",i)},r=()=>{e(V(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",i)}));return e.then((e=>{e instanceof IDBCursor&&x.set(e,t)})).catch((()=>{})),O.set(e,t),e}(t);if(M.has(t))return M.get(t);const e=F(t);return e!==t&&(M.set(t,e),O.set(e,t)),e}const U=t=>O.get(t),B=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],$=new Map;function q(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if($.get(e))return $.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=j.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!r&&!B.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,r?"readwrite":"readonly");let o=i.store;return s&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&i.done]))[0]};return $.set(e,i),i}var z;z=P,P={...z,get:(t,e,n)=>q(t,e)||z.get(t,e,n),has:(t,e)=>!!q(t,e)||z.has(t,e)};class K{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const H="@firebase/app",G="0.9.12",Q=new A("@firebase/app"),W="[DEFAULT]",X={[H]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Y=new Map,J=new Map;function Z(t,e){try{t.container.addComponent(e)}catch(n){Q.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tt(t){const e=t.name;if(J.has(e))return Q.debug(`There were multiple attempts to register component ${e}.`),!1;J.set(e,t);for(const e of Y.values())Z(e,t);return!0}const et=new l("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new m("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}function st(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const s=Object.assign({name:W,automaticDataCollectionEnabled:!1},e),r=s.name;if("string"!=typeof r||!r)throw et.create("bad-app-name",{appName:String(r)});if(n||(n=c()),!n)throw et.create("no-options");const i=Y.get(r);if(i){if(f(n,i.options)&&f(s,i.config))return i;throw et.create("duplicate-app",{appName:r})}const o=new w(r);for(const t of J.values())o.addComponent(t);const a=new nt(n,s,o);return Y.set(r,a),a}function rt(t,e,n){var s;let r=null!==(s=X[t])&&void 0!==s?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const t=[`Unable to register library "${r}" with version "${e}":`];return i&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Q.warn(t.join(" "))}tt(new m(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const it="firebase-heartbeat-database",ot=1,at="firebase-heartbeat-store";let ct=null;function ut(){return ct||(ct=function(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=V(o);return s&&o.addEventListener("upgradeneeded",(t=>{s(V(o.result),t.oldVersion,t.newVersion,V(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{i&&t.addEventListener("close",(()=>i())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(it,ot,{upgrade:(t,e)=>{0===e&&t.createObjectStore(at)}}).catch((t=>{throw et.create("idb-open",{originalErrorMessage:t.message})}))),ct}async function ht(t,e){try{const n=(await ut()).transaction(at,"readwrite"),s=n.objectStore(at);await s.put(e,lt(t)),await n.done}catch(t){if(t instanceof h)Q.warn(t.message);else{const e=et.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});Q.warn(e.message)}}}function lt(t){return`${t.name}!${t.options.appId}`}class dt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new gt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=ft();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=ft(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let s=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),pt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),pt(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),s=o(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ft(){return(new Date).toISOString().substring(0,10)}class gt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await ut();return await e.transaction(at).objectStore(at).get(lt(t))}catch(t){if(t instanceof h)Q.warn(t.message);else{const e=et.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Q.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function pt(t){return o(JSON.stringify({version:2,heartbeats:t})).length}tt(new m("platform-logger",(t=>new K(t)),"PRIVATE")),tt(new m("heartbeat",(t=>new dt(t)),"PRIVATE")),rt(H,G,""),rt(H,G,"esm2017"),rt("fire-js","");var mt,yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vt={},wt=wt||{},Et=yt||self;function bt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Tt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ct="closure_uid_"+(1e9*Math.random()>>>0),It=0;function St(t,e,n){return t.call.apply(t.bind,arguments)}function _t(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function At(t,e,n){return(At=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?St:_t).apply(null,arguments)}function Dt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function kt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,s){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return e.prototype[n].apply(t,r)}}function Nt(){this.s=this.s,this.o=this.o}Nt.prototype.s=!1,Nt.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Ct)&&t[Ct]||(t[Ct]=++It))},Nt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Rt(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Lt(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(bt(n)){const e=t.length||0,s=n.length||0;t.length=e+s;for(let r=0;r<s;r++)t[e+r]=n[r]}else t.push(n)}}function Mt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var Ot=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Et.addEventListener("test",(()=>{}),e),Et.removeEventListener("test",(()=>{}),e)}catch(t){}return t}();function Pt(t){return/^[\s\xa0]*$/.test(t)}function Ft(){var t=Et.navigator;return t&&(t=t.userAgent)?t:""}function Vt(t){return-1!=Ft().indexOf(t)}function Ut(t){return Ut[" "](t),t}Ut[" "]=function(){};var Bt,jt,$t,qt=Vt("Opera"),zt=Vt("Trident")||Vt("MSIE"),Kt=Vt("Edge"),Ht=Kt||zt,Gt=Vt("Gecko")&&!(-1!=Ft().toLowerCase().indexOf("webkit")&&!Vt("Edge"))&&!(Vt("Trident")||Vt("MSIE"))&&!Vt("Edge"),Qt=-1!=Ft().toLowerCase().indexOf("webkit")&&!Vt("Edge");function Wt(){var t=Et.document;return t?t.documentMode:void 0}t:{var Xt="",Yt=(jt=Ft(),Gt?/rv:([^\);]+)(\)|;)/.exec(jt):Kt?/Edge\/([\d\.]+)/.exec(jt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(jt):Qt?/WebKit\/(\S+)/.exec(jt):qt?/(?:Version)[ \/]?(\S+)/.exec(jt):void 0);if(Yt&&(Xt=Yt?Yt[1]:""),zt){var Jt=Wt();if(null!=Jt&&Jt>parseFloat(Xt)){Bt=String(Jt);break t}}Bt=Xt}Et.document&&zt?$t=Wt()||parseInt(Bt,10)||void 0:$t=void 0;var Zt=$t;function te(t,e){if(Mt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Gt){t:{try{Ut(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ee[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&te.$.h.call(this)}}kt(te,Mt);var ee={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),se=0;function re(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=r,this.key=++se,this.fa=this.ia=!1}function ie(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function oe(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function ae(t){const e={};for(const n in t)e[n]=t[n];return e}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(t,e){let n,s;for(let e=1;e<arguments.length;e++){for(n in s=arguments[e],s)t[n]=s[n];for(let e=0;e<ce.length;e++)n=ce[e],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function he(t){this.src=t,this.g={},this.h=0}function le(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=xt(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ie(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function de(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==s)return r}return-1}he.prototype.add=function(t,e,n,s,r){var i=t.toString();(t=this.g[i])||(t=this.g[i]=[],this.h++);var o=de(t,e,s,r);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new re(e,this.src,i,!!s,r)).ia=n,t.push(e)),e};var fe="closure_lm_"+(1e6*Math.random()|0),ge={};function pe(t,e,n,s,r){if(s&&s.once)return ye(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)pe(t,e[i],n,s,r);return null}return n=Ie(n),t&&t[ne]?t.O(e,n,Tt(s)?!!s.capture:!!s,r):me(t,e,n,!1,s,r)}function me(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=Tt(r)?!!r.capture:!!r,a=Te(t);if(a||(t[fe]=a=new he(t)),(n=a.add(e,n,s,o,i)).proxy)return n;if(s=function(){const t=be;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)Ot||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(Ee(e.toString()),s);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(s)}return n}function ye(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)ye(t,e[i],n,s,r);return null}return n=Ie(n),t&&t[ne]?t.P(e,n,Tt(s)?!!s.capture:!!s,r):me(t,e,n,!0,s,r)}function ve(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)ve(t,e[i],n,s,r);else s=Tt(s)?!!s.capture:!!s,n=Ie(n),t&&t[ne]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=de(i=t.g[e],n,s,r))&&(ie(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete t.g[e],t.h--))):t&&(t=Te(t))&&(e=t.g[e.toString()],t=-1,e&&(t=de(e,n,s,r)),(n=-1<t?e[t]:null)&&we(n))}function we(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[ne])le(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Ee(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=Te(e))?(le(n,t),0==n.h&&(n.src=null,e[fe]=null)):ie(t)}}}function Ee(t){return t in ge?ge[t]:ge[t]="on"+t}function be(t,e){if(t.fa)t=!0;else{e=new te(e,this);var n=t.listener,s=t.la||t.src;t.ia&&we(t),t=n.call(s,e)}return t}function Te(t){return(t=t[fe])instanceof he?t:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(t){return"function"==typeof t?t:(t[Ce]||(t[Ce]=function(e){return t.handleEvent(e)}),t[Ce])}function Se(){Nt.call(this),this.i=new he(this),this.S=this,this.J=null}function _e(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,"string"==typeof e)e=new Mt(e,t);else if(e instanceof Mt)e.target=e.target||t;else{var r=e;ue(e=new Mt(s,t),r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=Ae(o,s,!0,e)&&r}if(r=Ae(o=e.g=t,s,!0,e)&&r,r=Ae(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)r=Ae(o=e.g=n[i],s,!1,e)&&r}function Ae(t,e,n,s){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&le(t.i,o),r=!1!==a.call(c,s)&&r}}return r&&!s.defaultPrevented}kt(Se,Nt),Se.prototype[ne]=!0,Se.prototype.removeEventListener=function(t,e,n,s){ve(this,t,e,n,s)},Se.prototype.N=function(){if(Se.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)ie(n[s]);delete e.g[t],e.h--}}this.J=null},Se.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)},Se.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};var De=Et.JSON.stringify;function ke(){var t=Pe;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ne=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new xe),(t=>t.reset()));class xe{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Re(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Le(t){Et.setTimeout((()=>{throw t}),0)}let Me,Oe=!1,Pe=new class{constructor(){this.h=this.g=null}add(t,e){const n=Ne.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Fe=()=>{const t=Et.Promise.resolve(void 0);Me=()=>{t.then(Ve)}};var Ve=()=>{for(var t;t=ke();){try{t.h.call(t.g)}catch(t){Le(t)}var e=Ne;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Oe=!1};function Ue(t,e){Se.call(this),this.h=t||1,this.g=e||Et,this.j=At(this.qb,this),this.l=Date.now()}function Be(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function je(t,e,n){if("function"==typeof t)n&&(t=At(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=At(t.handleEvent,t)}return 2147483647<Number(e)?-1:Et.setTimeout(t,e||0)}function $e(t){t.g=je((()=>{t.g=null,t.i&&(t.i=!1,$e(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}kt(Ue,Se),(mt=Ue.prototype).ga=!1,mt.T=null,mt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_e(this,"tick"),this.ga&&(Be(this),this.start()))}},mt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.N=function(){Ue.$.N.call(this),Be(this),delete this.g};class qe extends Nt{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:$e(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(t){Nt.call(this),this.h=t,this.g={}}kt(ze,Nt);var Ke=[];function He(t,e,n,s){Array.isArray(n)||(n&&(Ke[0]=n.toString()),n=Ke);for(var r=0;r<n.length;r++){var i=pe(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ge(t){oe(t.g,(function(t,e){this.g.hasOwnProperty(e)&&we(t)}),t),t.g={}}function Qe(){this.g=!0}function We(t,e,n,s){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<r.length;o++)r[o]=""}}}return De(n)}catch(t){return e}}(t,n)+(s?" "+s:"")}))}ze.prototype.N=function(){ze.$.N.call(this),Ge(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qe.prototype.Ea=function(){this.g=!1},Qe.prototype.info=function(){};var Xe={},Ye=null;function Je(){return Ye=Ye||new Se}function Ze(t){Mt.call(this,Xe.Ta,t)}function tn(t){const e=Je();_e(e,new Ze(e))}function en(t,e){Mt.call(this,Xe.STAT_EVENT,t),this.stat=e}function nn(t){const e=Je();_e(e,new en(e,t))}function sn(t,e){Mt.call(this,Xe.Ua,t),this.size=e}function rn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Et.setTimeout((function(){t()}),e)}Xe.Ta="serverreachability",kt(Ze,Mt),Xe.STAT_EVENT="statevent",kt(en,Mt),Xe.Ua="timingevent",kt(sn,Mt);var on={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},an={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cn(){}function un(t){return t.h||(t.h=t.i())}function hn(){}cn.prototype.h=null;var ln,dn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fn(){Mt.call(this,"d")}function gn(){Mt.call(this,"c")}function pn(){}function mn(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new ze(this),this.P=vn,t=Ht?125:void 0,this.V=new Ue(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new yn}function yn(){this.i=null,this.g="",this.h=!1}kt(fn,Mt),kt(gn,Mt),kt(pn,cn),pn.prototype.g=function(){return new XMLHttpRequest},pn.prototype.i=function(){return{}},ln=new pn;var vn=45e3,wn={},En={};function bn(t,e,n){t.L=1,t.v=Bn(On(e)),t.s=n,t.S=!0,Tn(t,null)}function Tn(t,e){t.G=Date.now(),_n(t),t.A=On(t.v);var n=t.A,s=t.W;Array.isArray(s)||(s=[String(s)]),Zn(n.i,"t",s),t.C=0,n=t.l.J,t.h=new yn,t.g=Js(t.l,n?e:null,!t.s),0<t.O&&(t.M=new qe(At(t.Pa,t,t.g),t.O)),He(t.U,t.g,"readystatechange",t.nb),e=t.I?ae(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),tn(),function(t,e,n,s,r,i){t.info((function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var h=u[0];u=u[1];var l=h.split("_");o=2<=l.length&&"type"==l[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.W,t.s)}function Cn(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function In(t,e,n){let s,r=!0;for(;!t.J&&t.C<n.length;){if(s=Sn(t,n),s==En){4==e&&(t.o=4,nn(14),r=!1),We(t.j,t.m,null,"[Incomplete Response]");break}if(s==wn){t.o=4,nn(15),We(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}We(t.j,t.m,s,null),xn(t,s)}Cn(t)&&s!=En&&s!=wn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,nn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zs(e),e.M=!0,nn(11))):(We(t.j,t.m,n,"[Invalid Chunked Response]"),Nn(t),kn(t))}function Sn(t,e){var n=t.C,s=e.indexOf("\n",n);return-1==s?En:(n=Number(e.substring(n,s)),isNaN(n)?wn:(s+=1)+n>e.length?En:(e=e.slice(s,s+n),t.C=s+n,e))}function _n(t){t.Y=Date.now()+t.P,An(t,t.P)}function An(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=rn(At(t.lb,t),e)}function Dn(t){t.B&&(Et.clearTimeout(t.B),t.B=null)}function kn(t){0==t.l.H||t.J||Gs(t.l,t)}function Nn(t){Dn(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Be(t.V),Ge(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function xn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||is(n.i,t)))if(!t.K&&is(n.i,t)&&3==n.H){try{var s=n.Ja.g.parse(e)}catch(t){s=null}if(Array.isArray(s)&&3==s.length){var r=s;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Hs(n),Ps(n)}qs(n),nn(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=rn(At(n.ib,n),6e3));if(1>=rs(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Ws(n,11)}else if((t.K||n.g==t)&&Hs(n),!Pt(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const e=u[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=u[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const h=u[5];null!=h&&"number"==typeof h&&0<h&&(s=1.5*h,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const l=t.g;if(l){const t=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var i=s.i;i.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(os(i,i.h),i.h=null))}if(s.F){const t=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(s.Da=t,Un(s.I,s.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((s=n).wa=Ys(s,s.J?s.pa:null,s.Y),o.K){as(s.i,o);var a=o,c=s.L;c&&a.setTimeout(c),a.B&&(Dn(a),_n(a)),s.g=o}else $s(s);0<n.j.length&&Vs(n)}else"stop"!=u[0]&&"close"!=u[0]||Ws(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Ws(n,7):Os(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}tn()}catch(t){}}function Rn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(bt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(bt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}(t),s=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(bt(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}for(s in e=[],n=0,t)e[n++]=t[s];return e}(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}(mt=mn.prototype).setTimeout=function(t){this.P=t},mt.nb=function(t){t=t.target;const e=this.M;e&&3==ks(t)?e.l():this.Pa(t)},mt.Pa=function(t){try{if(t==this.g)t:{const h=ks(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||Ht||this.g&&(this.h.h||this.g.ja()||Ns(this.g)))){this.J||4!=h||7==e||tn(),Dn(this);var n=this.g.da();this.ca=n;e:if(Cn(this)){var s=Ns(this.g);t="";var r=s.length,i=4==ks(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nn(this),kn(this);var o="";break e}this.h.i=new Et.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,s,r,i,o){t.info((function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pt(a)){var u=a;break e}}u=null}if(!(n=u)){this.i=!1,this.o=3,nn(12),Nn(this),kn(this);break t}We(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xn(this,n)}this.S?(In(this,h,o),Ht&&this.i&&3==h&&(He(this.U,this.V,"tick",this.mb),this.V.start())):(We(this.j,this.m,o,null),xn(this,o)),4==h&&Nn(this),this.i&&!this.J&&(4==h?Gs(this.l,this):(this.i=!1,_n(this)))}else(function(t){const e={};t=(t.g&&2<=ks(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<t.length;s++){if(Pt(t[s]))continue;var n=Re(t[s]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=e[r]||[];e[r]=i,i.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,nn(12)):(this.o=0,nn(13)),Nn(this),kn(this)}}}catch(t){}},mt.mb=function(){if(this.g){var t=ks(this.g),e=this.g.ja();this.C<e.length&&(Dn(this),In(this,t,e),this.i&&4!=t&&_n(this))}},mt.cancel=function(){this.J=!0,Nn(this)},mt.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.L&&(tn(),nn(17)),Nn(this),this.o=2,kn(this)):An(this,this.Y-t)};var Ln=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Mn){this.h=t.h,Pn(this,t.j),this.s=t.s,this.g=t.g,Fn(this,t.m),this.l=t.l;var e=t.i,n=new Wn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Vn(this,n),this.o=t.o}else t&&(e=String(t).match(Ln))?(this.h=!1,Pn(this,e[1]||"",!0),this.s=jn(e[2]||""),this.g=jn(e[3]||"",!0),Fn(this,e[4]),this.l=jn(e[5]||"",!0),Vn(this,e[6]||"",!0),this.o=jn(e[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}function On(t){return new Mn(t)}function Pn(t,e,n){t.j=n?jn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Vn(t,e,n){e instanceof Wn?(t.i=e,function(t,e){e&&!t.j&&(Xn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=$n(e,Gn)),t.i=new Wn(e,t.h))}function Un(t,e,n){t.i.set(e,n)}function Bn(t){return Un(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $n(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.j;e&&t.push($n(e,zn,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push($n(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push($n(n,"/"==n.charAt(0)?Hn:Kn,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$n(n,Qn)),t.join("")};var zn=/[#\/\?@]/g,Kn=/[#\?:]/g,Hn=/[#\?]/g,Gn=/[#\?@]/g,Qn=/#/g;function Wn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xn(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t,e){Xn(t),e=ts(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Jn(t,e){return Xn(t),e=ts(t,e),t.g.has(e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.i=null,t.g.set(ts(t,e),Rt(n)),t.h+=n.length)}function ts(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function es(t){this.l=t||ns,t=Et.PerformanceNavigationTiming?0<(t=Et.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=Wn.prototype).add=function(t,e){Xn(this),this.i=null,t=ts(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},mt.forEach=function(t,e){Xn(this),this.g.forEach((function(n,s){n.forEach((function(n){t.call(e,n,s,this)}),this)}),this)},mt.ta=function(){Xn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let t=0;t<r.length;t++)n.push(e[s])}return n},mt.Z=function(t){Xn(this);let e=[];if("string"==typeof t)Jn(this,t)&&(e=e.concat(this.g.get(ts(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},mt.set=function(t,e){return Xn(this),this.i=null,Jn(this,t=ts(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},mt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var r=i;""!==o[s]&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};var ns=10;function ss(t){return!!t.h||!!t.g&&t.g.size>=t.j}function rs(t){return t.h?1:t.g?t.g.size:0}function is(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function os(t,e){t.g?t.g.add(e):t.h=e}function as(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function cs(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Rt(t.i)}es.prototype.cancel=function(){if(this.i=cs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var us=class{stringify(t){return Et.JSON.stringify(t,void 0)}parse(t){return Et.JSON.parse(t,void 0)}};function hs(){this.g=new us}function ls(t,e,n){const s=n||"";try{Rn(t,(function(t,n){let r=t;Tt(t)&&(r=De(t)),e.push(s+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}function ds(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch(t){}}function fs(t){this.l=t.fc||null,this.j=t.ob||!1}function gs(t,e){Se.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kt(fs,cn),fs.prototype.g=function(){return new gs(this.l,this.j)},fs.prototype.i=function(t){return function(){return t}}({}),kt(gs,Se);var ps=0;function ms(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function ys(t){t.readyState=4,t.l=null,t.j=null,t.A=null,vs(t)}function vs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(mt=gs.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,vs(this)},mt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ys(this)),this.readyState=ps},mt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,vs(this)),this.g&&(this.readyState=3,vs(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Et.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ms(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},mt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ys(this):vs(this),3==this.readyState&&ms(this)}},mt.Za=function(t){this.g&&(this.response=this.responseText=t,ys(this))},mt.Ya=function(t){this.g&&(this.response=t,ys(this))},mt.ka=function(){this.g&&ys(this)},mt.setRequestHeader=function(t,e){this.v.append(t,e)},mt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(gs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ws=Et.JSON.parse;function Es(t){Se.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bs,this.L=this.M=!1}kt(Es,Se);var bs="",Ts=/^https?$/i,Cs=["POST","PUT"];function Is(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ss(t),As(t)}function Ss(t){t.F||(t.F=!0,_e(t,"complete"),_e(t,"error"))}function _s(t){if(t.h&&void 0!==wt&&(!t.C[1]||4!=ks(t)||2!=t.da()))if(t.v&&4==ks(t))je(t.La,0,t);else if(_e(t,"readystatechange"),4==ks(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===o){var r=String(t.I).match(Ln)[1]||null;!r&&Et.self&&Et.self.location&&(r=Et.self.location.protocol.slice(0,-1)),s=!Ts.test(r?r.toLowerCase():"")}n=s}if(n)_e(t,"complete"),_e(t,"success");else{t.m=6;try{var i=2<ks(t)?t.g.statusText:""}catch(t){i=""}t.j=i+" ["+t.da()+"]",Ss(t)}}finally{As(t)}}}function As(t,e){if(t.g){Ds(t);const n=t.g,s=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||_e(t,"ready");try{n.onreadystatechange=s}catch(t){}}}function Ds(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Et.clearTimeout(t.A),t.A=null)}function ks(t){return t.g?t.g.readyState:0}function Ns(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case bs:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function xs(t){let e="";return oe(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Rs(t,e,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=xs(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Un(t,e,n))}function Ls(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ms(t){this.Ga=0,this.j=[],this.l=new Qe,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ls("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ls("baseRetryDelayMs",5e3,t),this.hb=Ls("retryDelaySeedMs",1e4,t),this.eb=Ls("forwardChannelMaxRetries",2,t),this.xa=Ls("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new es(t&&t.concurrentRequestLimit),this.Ja=new hs,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Os(t){if(Fs(t),3==t.H){var e=t.W++,n=On(t.I);if(Un(n,"SID",t.K),Un(n,"RID",e),Un(n,"TYPE","terminate"),Bs(t,n),(e=new mn(t,t.l,e)).L=2,e.v=Bn(On(n)),n=!1,Et.navigator&&Et.navigator.sendBeacon)try{n=Et.navigator.sendBeacon(e.v.toString(),"")}catch(t){}!n&&Et.Image&&((new Image).src=e.v,n=!0),n||(e.g=Js(e.l,null),e.g.ha(e.v)),e.G=Date.now(),_n(e)}Xs(t)}function Ps(t){t.g&&(zs(t),t.g.cancel(),t.g=null)}function Fs(t){Ps(t),t.u&&(Et.clearTimeout(t.u),t.u=null),Hs(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Et.clearTimeout(t.m),t.m=null)}function Vs(t){if(!ss(t.i)&&!t.m){t.m=!0;var e=t.Na;Me||Fe(),Oe||(Me(),Oe=!0),Pe.add(e,t),t.C=0}}function Us(t,e){var n;n=e?e.m:t.W++;const s=On(t.I);Un(s,"SID",t.K),Un(s,"RID",n),Un(s,"AID",t.V),Bs(t,s),t.o&&t.s&&Rs(s,t.o,t.s),n=new mn(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=js(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),os(t.i,n),bn(n,s,e)}function Bs(t,e){t.na&&oe(t.na,(function(t,n){Un(e,n,t)})),t.h&&Rn({},(function(t,n){Un(e,n,t)}))}function js(t,e,n){n=Math.min(t.j.length,n);var s=t.h?At(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let i=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),i=!1;else try{ls(a,t,"req"+n+"_")}catch(t){s&&s(a)}}if(i){s=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,s}function $s(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Me||Fe(),Oe||(Me(),Oe=!0),Pe.add(e,t),t.A=0}}function qs(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=rn(At(t.Ma,t),Qs(t,t.A)),t.A++,0))}function zs(t){null!=t.B&&(Et.clearTimeout(t.B),t.B=null)}function Ks(t){t.g=new mn(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=On(t.wa);Un(e,"RID","rpc"),Un(e,"SID",t.K),Un(e,"AID",t.V),Un(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Un(e,"TO",t.qa),Un(e,"TYPE","xmlhttp"),Bs(t,e),t.o&&t.s&&Rs(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Bn(On(e)),n.s=null,n.S=!0,Tn(n,t)}function Hs(t){null!=t.v&&(Et.clearTimeout(t.v),t.v=null)}function Gs(t,e){var n=null;if(t.g==e){Hs(t),zs(t),t.g=null;var s=2}else{if(!is(t.i,e))return;n=e.F,as(t.i,e),s=1}if(0!=t.H)if(e.i)if(1==s){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;_e(s=Je(),new sn(s,n)),Vs(t)}else $s(t);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==s&&function(t,e){return!(rs(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=rn(At(t.Na,t,e),Qs(t,t.C)),t.C++,0)))}(t,e)||2==s&&qs(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Ws(t,5);break;case 4:Ws(t,10);break;case 3:Ws(t,6);break;default:Ws(t,2)}}function Qs(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ws(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var s=At(t.pb,t);n||(n=new Mn("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||Pn(n,"https"),Bn(n)),function(t,e){const n=new Qe;if(Et.Image){const s=new Image;s.onload=Dt(ds,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Dt(ds,n,s,"TestLoadImage: error",!1,e),s.onabort=Dt(ds,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Dt(ds,n,s,"TestLoadImage: timeout",!1,e),Et.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=t}else e(!1)}(n.toString(),s)}else nn(2);t.H=0,t.h&&t.h.za(e),Xs(t),Fs(t)}function Xs(t){if(t.H=0,t.ma=[],t.h){const e=cs(t.i);0==e.length&&0==t.j.length||(Lt(t.ma,e),Lt(t.ma,t.j),t.i.i.length=0,Rt(t.j),t.j.length=0),t.h.ya()}}function Ys(t,e,n){var s=n instanceof Mn?On(n):new Mn(n);if(""!=s.g)e&&(s.g=e+"."+s.g),Fn(s,s.m);else{var r=Et.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new Mn(null);s&&Pn(i,s),e&&(i.g=e),r&&Fn(i,r),n&&(i.l=n),s=i}return n=t.F,e=t.Da,n&&e&&Un(s,n,e),Un(s,"VER",t.ra),Bs(t,s),s}function Js(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ha&&!t.va?new Es(new fs({ob:!0})):new Es(t.va)).Oa(t.J),e}function Zs(){}function tr(){if(zt&&!(10<=Number(Zt)))throw Error("Environmental error: no available transport.")}function er(t,e){Se.call(this),this.g=new Ms(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Pt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pt(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new rr(this)}function nr(t){fn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function sr(){gn.call(this),this.status=1}function rr(t){this.g=t}function ir(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function or(t,e,n){n||(n=0);var s=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)s[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)s[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var i=t.g[3],o=e+(i^n&(r^i))+s[0]+3614090360&4294967295;o=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=(n=(r=(i=(e=n+(o<<7&4294967295|o>>>25))+((o=i+(r^e&(n^r))+s[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(e^n))+s[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(i^e))+s[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(r^i))+s[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^e&(n^r))+s[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(e^n))+s[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(i^e))+s[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(r^i))+s[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^e&(n^r))+s[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(e^n))+s[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(i^e))+s[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(r^i))+s[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(r^e&(n^r))+s[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^i&(e^n))+s[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(i^e))+s[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^i&(n^r))+s[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(e^n))+s[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(i^e))+s[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(r^i))+s[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^i&(n^r))+s[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(e^n))+s[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(i^e))+s[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(r^i))+s[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^i&(n^r))+s[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(e^n))+s[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(i^e))+s[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(r^i))+s[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^i&(n^r))+s[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^r&(e^n))+s[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(i^e))+s[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(r^i))+s[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^i)+s[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^r)+s[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^e^n)+s[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^e)+s[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^i)+s[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^r)+s[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^e^n)+s[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^e)+s[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^i)+s[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^r)+s[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^e^n)+s[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^e)+s[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^i)+s[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^r)+s[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(i^e^n)+s[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^i^e)+s[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~i))+s[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~r))+s[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(i|~n))+s[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~e))+s[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~i))+s[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~r))+s[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(i|~n))+s[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~e))+s[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~i))+s[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~r))+s[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(i|~n))+s[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(r|~e))+s[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(e=n+((o=e+(r^(n|~i))+s[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~r))+s[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=i+((o=r+(e^(i|~n))+s[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+i&4294967295}function ar(t,e){this.h=e;for(var n=[],s=!0,r=t.length-1;0<=r;r--){var i=0|t[r];s&&i==e||(n[r]=i,s=!1)}this.g=n}(mt=Es.prototype).Oa=function(t){this.M=t},mt.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ln.g(),this.C=this.u?un(this.u):un(ln),this.g.onreadystatechange=At(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Is(this,t)}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const t of s.keys())n.set(t,s.get(t))}s=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=Et.FormData&&t instanceof Et.FormData,!(0<=xt(Cs,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ds(this),0<this.B&&((this.L=function(t){return zt&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=At(this.ua,this)):this.A=je(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Is(this,t)}},mt.ua=function(){void 0!==wt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_e(this,"timeout"),this.abort(8))},mt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,_e(this,"complete"),_e(this,"abort"),As(this))},mt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),As(this,!0)),Es.$.N.call(this)},mt.La=function(){this.s||(this.G||this.v||this.l?_s(this):this.kb())},mt.kb=function(){_s(this)},mt.isActive=function(){return!!this.g},mt.da=function(){try{return 2<ks(this)?this.g.status:-1}catch(t){return-1}},mt.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},mt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ws(e)}},mt.Ia=function(){return this.m},mt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=Ms.prototype).ra=8,mt.H=1,mt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new mn(this,this.l,t);let i=this.s;if(this.U&&(i?(i=ae(i),ue(i,this.U)):i=this.U),null!==this.o||this.O||(r.I=i,i=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var s=this.j[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=js(this,r,e),Un(n=On(this.I),"RID",t),Un(n,"CVER",22),this.F&&Un(n,"X-HTTP-Session-Id",this.F),Bs(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(xs(i)))+"&"+e:this.o&&Rs(n,this.o,i)),os(this.i,r),this.bb&&Un(n,"TYPE","init"),this.P?(Un(n,"$req",e),Un(n,"SID","null"),r.aa=!0,bn(r,n,null)):bn(r,n,e),this.H=2}}else 3==this.H&&(t?Us(this,t):0==this.j.length||ss(this.i)||Us(this))},mt.Ma=function(){if(this.u=null,Ks(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=rn(At(this.jb,this),t)}},mt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nn(10),Ps(this),Ks(this))},mt.ib=function(){null!=this.v&&(this.v=null,Ps(this),qs(this),nn(19))},mt.pb=function(t){t?(this.l.info("Successfully pinged google.com"),nn(2)):(this.l.info("Failed to ping google.com"),nn(1))},mt.isActive=function(){return!!this.h&&this.h.isActive(this)},(mt=Zs.prototype).Ba=function(){},mt.Aa=function(){},mt.za=function(){},mt.ya=function(){},mt.isActive=function(){return!0},mt.Va=function(){},tr.prototype.g=function(t,e){return new er(t,e)},kt(er,Se),er.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;nn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ys(t,null,t.Y),Vs(t)},er.prototype.close=function(){Os(this.g)},er.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=De(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Vs(e)},er.prototype.N=function(){this.g.h=null,delete this.j,Os(this.g),delete this.g,er.$.N.call(this)},kt(nr,fn),kt(sr,gn),kt(rr,Zs),rr.prototype.Ba=function(){_e(this.g,"a")},rr.prototype.Aa=function(t){_e(this.g,new nr(t))},rr.prototype.za=function(t){_e(this.g,new sr)},rr.prototype.ya=function(){_e(this.g,"b")},kt(ir,(function(){this.blockSize=-1})),ir.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ir.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,s=this.m,r=this.h,i=0;i<e;){if(0==r)for(;i<=n;)or(this,t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(s[r++]=t.charCodeAt(i++),r==this.blockSize){or(this,s),r=0;break}}else for(;i<e;)if(s[r++]=t[i++],r==this.blockSize){or(this,s),r=0;break}}this.h=r,this.i+=e},ir.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};var cr={};function ur(t){return-128<=t&&128>t?function(t,e){var n=cr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new ar([0|t],0>t?-1:0)}(t)}(t):new ar([0|t],0>t?-1:0)}function hr(t){if(isNaN(t)||!isFinite(t))return dr;if(0>t)return yr(hr(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=lr;return new ar(e,0)}var lr=4294967296,dr=ur(0),fr=ur(1),gr=ur(16777216);function pr(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function mr(t){return-1==t.h}function yr(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new ar(n,~t.h).add(fr)}function vr(t,e){return t.add(yr(e))}function wr(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Er(t,e){this.g=t,this.h=e}function br(t,e){if(pr(e))throw Error("division by zero");if(pr(t))return new Er(dr,dr);if(mr(t))return e=br(yr(t),e),new Er(yr(e.g),yr(e.h));if(mr(e))return e=br(t,yr(e)),new Er(yr(e.g),e.h);if(30<t.g.length){if(mr(t)||mr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=fr,s=e;0>=s.X(t);)n=Tr(n),s=Tr(s);var r=Cr(n,1),i=Cr(s,1);for(s=Cr(s,2),n=Cr(n,2);!pr(s);){var o=i.add(s);0>=o.X(t)&&(r=r.add(n),i=o),s=Cr(s,1),n=Cr(n,1)}return e=vr(t,r.R(e)),new Er(r,e)}for(r=dr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),o=(i=hr(n)).R(e);mr(o)||0<o.X(t);)o=(i=hr(n-=s)).R(e);pr(i)&&(i=fr),r=r.add(i),t=vr(t,o)}return new Er(r,t)}function Tr(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new ar(n,t.h)}function Cr(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,r=[],i=0;i<s;i++)r[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ar(r,t.h)}(mt=ar.prototype).ea=function(){if(mr(this))return-yr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:lr+s)*e,e*=lr}return t},mt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(pr(this))return"0";if(mr(this))return"-"+yr(this).toString(t);for(var e=hr(Math.pow(t,6)),n=this,s="";;){var r=br(n,e).g,i=((0<(n=vr(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(pr(n=r))return i+s;for(;6>i.length;)i="0"+i;s=i+s}},mt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},mt.X=function(t){return mr(t=vr(this,t))?-1:pr(t)?0:1},mt.abs=function(){return mr(this)?yr(this):this},mt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,r=0;r<=e;r++){var i=s+(65535&this.D(r))+(65535&t.D(r)),o=(i>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);s=o>>>16,i&=65535,o&=65535,n[r]=o<<16|i}return new ar(n,-2147483648&n[n.length-1]?-1:0)},mt.R=function(t){if(pr(this)||pr(t))return dr;if(mr(this))return mr(t)?yr(this).R(yr(t)):yr(yr(this).R(t));if(mr(t))return yr(this.R(yr(t)));if(0>this.X(gr)&&0>t.X(gr))return hr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var r=0;r<t.g.length;r++){var i=this.D(s)>>>16,o=65535&this.D(s),a=t.D(r)>>>16,c=65535&t.D(r);n[2*s+2*r]+=o*c,wr(n,2*s+2*r),n[2*s+2*r+1]+=i*c,wr(n,2*s+2*r+1),n[2*s+2*r+1]+=o*a,wr(n,2*s+2*r+1),n[2*s+2*r+2]+=i*a,wr(n,2*s+2*r+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new ar(n,0)},mt.gb=function(t){return br(this,t).h},mt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new ar(n,this.h&t.h)},mt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new ar(n,this.h|t.h)},mt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new ar(n,this.h^t.h)},tr.prototype.createWebChannel=tr.prototype.g,er.prototype.send=er.prototype.u,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,an.COMPLETE="complete",hn.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",Se.prototype.listen=Se.prototype.O,Es.prototype.listenOnce=Es.prototype.P,Es.prototype.getLastError=Es.prototype.Sa,Es.prototype.getLastErrorCode=Es.prototype.Ia,Es.prototype.getStatus=Es.prototype.da,Es.prototype.getResponseJson=Es.prototype.Wa,Es.prototype.getResponseText=Es.prototype.ja,Es.prototype.send=Es.prototype.ha,Es.prototype.setWithCredentials=Es.prototype.Oa,ir.prototype.digest=ir.prototype.l,ir.prototype.reset=ir.prototype.reset,ir.prototype.update=ir.prototype.j,ar.prototype.add=ar.prototype.add,ar.prototype.multiply=ar.prototype.R,ar.prototype.modulo=ar.prototype.gb,ar.prototype.compare=ar.prototype.X,ar.prototype.toNumber=ar.prototype.ea,ar.prototype.toString=ar.prototype.toString,ar.prototype.getBits=ar.prototype.D,ar.fromNumber=hr,ar.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return yr(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=hr(Math.pow(n,8)),r=dr,i=0;i<e.length;i+=8){var o=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+o),n);8>o?(o=hr(Math.pow(n,o)),r=r.R(o).add(hr(a))):r=(r=r.R(s)).add(hr(a))}return r};var Ir=vt.createWebChannelTransport=function(){return new tr},Sr=vt.getStatEventTarget=function(){return Je()},_r=vt.ErrorCode=on,Ar=vt.EventType=an,Dr=vt.Event=Xe,kr=vt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Nr=vt.FetchXmlHttpFactory=fs,xr=vt.WebChannel=hn,Rr=vt.XhrIo=Es,Lr=vt.Md5=ir,Mr=vt.Integer=ar;const Or="@firebase/firestore";class Pr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let Fr="9.22.2";const Vr=new A("@firebase/firestore");function Ur(){return Vr.logLevel}function Br(t,...e){if(Vr.logLevel<=b.DEBUG){const n=e.map(qr);Vr.debug(`Firestore (${Fr}): ${t}`,...n)}}function jr(t,...e){if(Vr.logLevel<=b.ERROR){const n=e.map(qr);Vr.error(`Firestore (${Fr}): ${t}`,...n)}}function $r(t,...e){if(Vr.logLevel<=b.WARN){const n=e.map(qr);Vr.warn(`Firestore (${Fr}): ${t}`,...n)}}function qr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function zr(t="Unexpected state"){const e=`FIRESTORE (${Fr}) INTERNAL ASSERTION FAILED: `+t;throw jr(e),new Error(e)}function Kr(t,e){t||zr()}function Hr(t,e){return t}const Gr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qr extends h{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Xr{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Yr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Pr.UNAUTHENTICATED)))}shutdown(){}}class Jr{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Zr{constructor(t){this.t=t,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const s=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Wr,t.enqueueRetryable((()=>s(this.currentUser)))};const i=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await s(this.currentUser)}))},o=t=>{Br("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Br("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Wr)}}),0),i()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Br("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Kr("string"==typeof e.accessToken),new Xr(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Kr(null===t||"string"==typeof t),new Pr(t)}}class ti{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ei{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new ti(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(Pr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ni{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class si{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const n=t=>{null!=t.error&&Br("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.T;return this.T=t.token,Br("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const s=t=>{Br("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.I.onInit((t=>s(t))),setTimeout((()=>{if(!this.appCheck){const t=this.I.getImmediate({optional:!0});t?s(t):Br("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Kr("string"==typeof t.token),this.T=t.token,new ni(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ri(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ii{static A(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=ri(40);for(let s=0;s<n.length;++s)e.length<20&&n[s]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[s]%62))}return e}}function oi(t,e){return t<e?-1:t>e?1:0}function ai(t,e,n){return t.length===e.length&&t.every(((t,s)=>n(t,e[s])))}class ci{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ci.fromMillis(Date.now())}static fromDate(t){return ci.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ci(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?oi(this.nanoseconds,t.nanoseconds):oi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ui{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ui(t)}static min(){return new ui(new ci(0,0))}static max(){return new ui(new ci(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hi{constructor(t,e,n){void 0===e?e=0:e>t.length&&zr(),void 0===n?n=t.length-e:n>t.length-e&&zr(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===hi.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof hi?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const n=t.get(s),r=e.get(s);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class li extends hi{construct(t,e,n){return new li(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Qr(Gr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new li(e)}static emptyPath(){return new li([])}}const di=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends hi{construct(t,e,n){return new fi(t,e,n)}static isValidIdentifier(t){return di.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fi(["__name__"])}static fromServerFormat(t){const e=[];let n="",s=0;const r=()=>{if(0===n.length)throw new Qr(Gr.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let i=!1;for(;s<t.length;){const e=t[s];if("\\"===e){if(s+1===t.length)throw new Qr(Gr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[s+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Qr(Gr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,s+=2}else"`"===e?(i=!i,s++):"."!==e||i?(n+=e,s++):(r(),s++)}if(r(),i)throw new Qr(Gr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fi(e)}static emptyPath(){return new fi([])}}class gi{constructor(t){this.path=t}static fromPath(t){return new gi(li.fromString(t))}static fromName(t){return new gi(li.fromString(t).popFirst(5))}static empty(){return new gi(li.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===li.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return li.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gi(new li(t.slice()))}}function pi(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new mi(ui.min(),gi.empty(),-1)}static max(){return new mi(ui.max(),gi.empty(),-1)}}function yi(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=gi.comparator(t.documentKey,e.documentKey),0!==n?n:oi(t.largestBatchId,e.largestBatchId))}const vi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ei(t){if(t.code!==Gr.FAILED_PRECONDITION||t.message!==vi)throw t;Br("LocalStore","Unexpectedly lost primary lease")}class bi{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&zr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new bi(((n,s)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,s)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof bi?e:bi.resolve(e)}catch(t){return bi.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):bi.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):bi.reject(e)}static resolve(t){return new bi(((e,n)=>{e(t)}))}static reject(t){return new bi(((e,n)=>{n(t)}))}static waitFor(t){return new bi(((e,n)=>{let s=0,r=0,i=!1;t.forEach((t=>{++s,t.next((()=>{++r,i&&r===s&&e()}),(t=>n(t)))})),i=!0,r===s&&e()}))}static or(t){let e=bi.resolve(!1);for(const n of t)e=e.next((t=>t?bi.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,s)=>{n.push(e.call(this,t,s))})),this.waitFor(n)}static mapArray(t,e){return new bi(((n,s)=>{const r=t.length,i=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{i[c]=t,++o,o===r&&n(i)}),(t=>s(t)))}}))}static doWhile(t,e){return new bi(((n,s)=>{const r=()=>{!0===t()?e().next((()=>{r()}),s):n()};r()}))}}function Ti(t){return"IndexedDbTransactionError"===t.name}class Ci{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ot(t),this.ut=t=>e.writeSequenceNumber(t))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}function Ii(t){return null==t}function Si(t){return 0===t&&1/t==-1/0}Ci.ct=-1;function _i(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Di(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ki{constructor(t,e){this.comparator=t,this.root=e||xi.EMPTY}insert(t,e){return new ki(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(t){return new ki(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(0===s)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ni(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ni(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ni(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ni(this.root,t,this.comparator,!0)}}class Ni{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xi{constructor(t,e,n,s,r){this.key=t,this.value=e,this.color=null!=n?n:xi.RED,this.left=null!=s?s:xi.EMPTY,this.right=null!=r?r:xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,r){return new xi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const r=n(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,e,n),null):0===r?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===e(t,s.key)){if(s.right.isEmpty())return xi.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zr();if(this.right.isRed())throw zr();const t=this.left.check();if(t!==this.right.check())throw zr();return t+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1,xi.EMPTY=new class{constructor(){this.size=0}get key(){throw zr()}get value(){throw zr()}get color(){throw zr()}get left(){throw zr()}get right(){throw zr()}copy(t,e,n,s,r){return this}insert(t,e,n){return new xi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ri{constructor(t){this.comparator=t,this.data=new ki(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Li(this.data.getIterator())}getIteratorFrom(t){return new Li(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Ri))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(0!==this.comparator(t,s))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ri(this.comparator);return e.data=t,e}}class Li{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mi{constructor(t){this.fields=t,t.sort(fi.comparator)}static empty(){return new Mi([])}unionWith(t){let e=new Ri(fi.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Mi(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ai(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Oi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Oi("Invalid base64 string: "+t):t}}(t);return new Pi(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Pi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return oi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pi.EMPTY_BYTE_STRING=new Pi("");const Fi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(t){if(Kr(!!t),"string"==typeof t){let e=0;const n=Fi.exec(t);if(Kr(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ui(t.seconds),nanos:Ui(t.nanos)}}function Ui(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Bi(t){return"string"==typeof t?Pi.fromBase64String(t):Pi.fromUint8Array(t)}function ji(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $i(t){const e=t.mapValue.fields.__previous_value__;return ji(e)?$i(e):e}function qi(t){const e=Vi(t.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}class zi{constructor(t,e,n,s,r,i,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Ki{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Ki&&t.projectId===this.projectId&&t.database===this.database}}const Hi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ji(t)?4:oo(t)?9007199254740991:10:zr()}function Qi(t,e){if(t===e)return!0;const n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qi(t).isEqual(qi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Vi(t.timestampValue),s=Vi(e.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Bi(t.bytesValue).isEqual(Bi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ui(t.geoPointValue.latitude)===Ui(e.geoPointValue.latitude)&&Ui(t.geoPointValue.longitude)===Ui(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ui(t.integerValue)===Ui(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ui(t.doubleValue),s=Ui(e.doubleValue);return n===s?Si(n)===Si(s):isNaN(n)&&isNaN(s)}return!1}(t,e);case 9:return ai(t.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:return function(t,e){const n=t.mapValue.fields||{},s=e.mapValue.fields||{};if(_i(n)!==_i(s))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===s[t]||!Qi(n[t],s[t])))return!1;return!0}(t,e);default:return zr()}}function Wi(t,e){return void 0!==(t.values||[]).find((t=>Qi(t,e)))}function Xi(t,e){if(t===e)return 0;const n=Gi(t),s=Gi(e);if(n!==s)return oi(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return oi(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ui(t.integerValue||t.doubleValue),s=Ui(e.integerValue||e.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(t,e);case 3:return Yi(t.timestampValue,e.timestampValue);case 4:return Yi(qi(t),qi(e));case 5:return oi(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Bi(t),s=Bi(e);return n.compareTo(s)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),s=e.split("/");for(let t=0;t<n.length&&t<s.length;t++){const e=oi(n[t],s[t]);if(0!==e)return e}return oi(n.length,s.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=oi(Ui(t.latitude),Ui(e.latitude));return 0!==n?n:oi(Ui(t.longitude),Ui(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],s=e.values||[];for(let t=0;t<n.length&&t<s.length;++t){const e=Xi(n[t],s[t]);if(e)return e}return oi(n.length,s.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Hi.mapValue&&e===Hi.mapValue)return 0;if(t===Hi.mapValue)return 1;if(e===Hi.mapValue)return-1;const n=t.fields||{},s=Object.keys(n),r=e.fields||{},i=Object.keys(r);s.sort(),i.sort();for(let t=0;t<s.length&&t<i.length;++t){const e=oi(s[t],i[t]);if(0!==e)return e;const o=Xi(n[s[t]],r[i[t]]);if(0!==o)return o}return oi(s.length,i.length)}(t.mapValue,e.mapValue);default:throw zr()}}function Yi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oi(t,e);const n=Vi(t),s=Vi(e),r=oi(n.seconds,s.seconds);return 0!==r?r:oi(n.nanos,s.nanos)}function Ji(t){return Zi(t)}function Zi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Vi(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Bi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,gi.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const s of t.values||[])n?n=!1:e+=",",e+=Zi(s);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",s=!0;for(const r of e)s?s=!1:n+=",",n+=`${r}:${Zi(t.fields[r])}`;return n+"}"}(t.mapValue):zr();var e,n}function to(t){return!!t&&"integerValue"in t}function eo(t){return!!t&&"arrayValue"in t}function no(t){return!!t&&"nullValue"in t}function so(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ro(t){return!!t&&"mapValue"in t}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ai(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=io(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oo(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class ao{constructor(t){this.value=t}static empty(){return new ao({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ro(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=io(e)}setAll(t){let e=fi.emptyPath(),n={},s=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,s),n={},s=[],e=r.popLast()}t?n[r.lastSegment()]=io(t):s.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,s)}delete(t){const e=this.field(t.popLast());ro(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Qi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];ro(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){Ai(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new ao(io(this.value))}}function co(t){const e=[];return Ai(t.fields,((t,n)=>{const s=new fi([t]);if(ro(n)){const t=co(n.mapValue).fields;if(0===t.length)e.push(s);else for(const n of t)e.push(s.child(n))}else e.push(s)})),new Mi(e)}class uo{constructor(t,e,n,s,r,i,o){this.key=t,this.documentType=e,this.version=n,this.readTime=s,this.createTime=r,this.data=i,this.documentState=o}static newInvalidDocument(t){return new uo(t,0,ui.min(),ui.min(),ui.min(),ao.empty(),0)}static newFoundDocument(t,e,n,s){return new uo(t,1,e,ui.min(),n,s,0)}static newNoDocument(t,e){return new uo(t,2,e,ui.min(),ui.min(),ao.empty(),0)}static newUnknownDocument(t,e){return new uo(t,3,e,ui.min(),ui.min(),ao.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ui.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ao.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ao.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ui.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof uo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new uo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ho{constructor(t,e){this.position=t,this.inclusive=e}}function lo(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(s=i.field.isKeyField()?gi.comparator(gi.fromName(o.referenceValue),n.key):Xi(o,n.data.field(i.field)),"desc"===i.dir&&(s*=-1),0!==s)break}return s}function fo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qi(t.position[n],e.position[n]))return!1;return!0}class go{constructor(t,e="asc"){this.field=t,this.dir=e}}function po(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class mo{}class yo extends mo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Io(t,e,n):"array-contains"===e?new Do(t,n):"in"===e?new ko(t,n):"not-in"===e?new No(t,n):"array-contains-any"===e?new xo(t,n):new yo(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new So(t,n):new _o(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Xi(e,this.value)):null!==e&&Gi(this.value)===Gi(e)&&this.matchesComparison(Xi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vo extends mo{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new vo(t,e)}matches(t){return wo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft((t=>t.isInequality()));return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function wo(t){return"and"===t.op}function Eo(t){return function(t){for(const e of t.filters)if(e instanceof vo)return!1;return!0}(t)&&wo(t)}function bo(t){if(t instanceof yo)return t.field.canonicalString()+t.op.toString()+Ji(t.value);if(Eo(t))return t.filters.map((t=>bo(t))).join(",");{const e=t.filters.map((t=>bo(t))).join(",");return`${t.op}(${e})`}}function To(t,e){return t instanceof yo?function(t,e){return e instanceof yo&&t.op===e.op&&t.field.isEqual(e.field)&&Qi(t.value,e.value)}(t,e):t instanceof vo?function(t,e){return e instanceof vo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,s)=>t&&To(n,e.filters[s])),!0)}(t,e):void zr()}function Co(t){return t instanceof yo?function(t){return`${t.field.canonicalString()} ${t.op} ${Ji(t.value)}`}(t):t instanceof vo?function(t){return t.op.toString()+" {"+t.getFilters().map(Co).join(" ,")+"}"}(t):"Filter"}class Io extends yo{constructor(t,e,n){super(t,e,n),this.key=gi.fromName(n.referenceValue)}matches(t){const e=gi.comparator(t.key,this.key);return this.matchesComparison(e)}}class So extends yo{constructor(t,e){super(t,"in",e),this.keys=Ao(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class _o extends yo{constructor(t,e){super(t,"not-in",e),this.keys=Ao(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Ao(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>gi.fromName(t.referenceValue)))}class Do extends yo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return eo(e)&&Wi(e.arrayValue,this.value)}}class ko extends yo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Wi(this.value.arrayValue,e)}}class No extends yo{constructor(t,e){super(t,"not-in",e)}matches(t){if(Wi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Wi(this.value.arrayValue,e)}}class xo extends yo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!eo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Wi(this.value.arrayValue,t)))}}class Ro{constructor(t,e=null,n=[],s=[],r=null,i=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=i,this.endAt=o,this.dt=null}}function Lo(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Ro(t,e,n,s,r,i,o)}function Mo(t){const e=Hr(t);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>bo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Ii(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Ji(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Ji(t))).join(",")),e.dt=t}return e.dt}function Oo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!po(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!To(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fo(t.startAt,e.startAt)&&fo(t.endAt,e.endAt)}function Po(t){return gi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Fo{constructor(t,e=null,n=[],s=[],r=null,i="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=i,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Vo(t){return new Fo(t)}function Uo(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Bo(t){const e=Hr(t);if(null===e.wt){e.wt=[];const t=function(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.wt.push(new go(t)),e.wt.push(new go(fi.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.wt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new go(fi.keyField(),t))}}}return e.wt}function jo(t){const e=Hr(t);if(!e._t)if("F"===e.limitType)e._t=Lo(e.path,e.collectionGroup,Bo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Bo(e)){const e="desc"===n.dir?"asc":"desc";t.push(new go(n.field,e))}const n=e.endAt?new ho(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ho(e.startAt.position,e.startAt.inclusive):null;e._t=Lo(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}return e._t}function $o(t,e,n){return new Fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qo(t,e){return Oo(jo(t),jo(e))&&t.limitType===e.limitType}function zo(t){return`${Mo(jo(t))}|lt:${t.limitType}`}function Ko(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Co(t))).join(", ")}]`),Ii(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Ji(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Ji(t))).join(",")),`Target(${e})`}(jo(t))}; limitType=${t.limitType})`}function Ho(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):gi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Bo(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const s=lo(t,e,n);return t.inclusive?s<=0:s<0}(t.startAt,Bo(t),e)||t.endAt&&!function(t,e,n){const s=lo(t,e,n);return t.inclusive?s>=0:s>0}(t.endAt,Bo(t),e))}(t,e)}function Go(t){return(e,n)=>{let s=!1;for(const r of Bo(t)){const t=Qo(r,e,n);if(0!==t)return t;s=s||r.field.isKeyField()}return 0}}function Qo(t,e,n){const s=t.field.isKeyField()?gi.comparator(e.key,n.key):function(t,e,n){const s=e.data.field(t),r=n.data.field(t);return null!==s&&null!==r?Xi(s,r):zr()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return zr()}}class Wo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,s]of n)if(this.equalsFn(e,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(void 0===s)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],t))return void(s[n]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return 1===n.length?delete this.inner[e]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ai(this.inner,((e,n)=>{for(const[e,s]of n)t(e,s)}))}isEmpty(){return Di(this.inner)}size(){return this.innerSize}}const Xo=new ki(gi.comparator);function Yo(){return Xo}const Jo=new ki(gi.comparator);function Zo(...t){let e=Jo;for(const n of t)e=e.insert(n.key,n);return e}function ta(t){let e=Jo;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ea(){return sa()}function na(){return sa()}function sa(){return new Wo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ra=new ki(gi.comparator),ia=new Ri(gi.comparator);function oa(...t){let e=ia;for(const n of t)e=e.add(n);return e}const aa=new Ri(oi);function ca(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Si(e)?"-0":e}}function ua(t){return{integerValue:""+t}}function ha(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Si(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ua(e):ca(t,e)}class la{constructor(){this._=void 0}}function da(t,e,n){return t instanceof pa?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&ji(e)&&(e=$i(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ma?ya(t,e):t instanceof va?wa(t,e):function(t,e){const n=ga(t,e),s=ba(n)+ba(t.gt);return to(n)&&to(t.gt)?ua(s):ca(t.serializer,s)}(t,e)}function fa(t,e,n){return t instanceof ma?ya(t,e):t instanceof va?wa(t,e):n}function ga(t,e){return t instanceof Ea?to(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class pa extends la{}class ma extends la{constructor(t){super(),this.elements=t}}function ya(t,e){const n=Ta(e);for(const e of t.elements)n.some((t=>Qi(t,e)))||n.push(e);return{arrayValue:{values:n}}}class va extends la{constructor(t){super(),this.elements=t}}function wa(t,e){let n=Ta(e);for(const e of t.elements)n=n.filter((t=>!Qi(t,e)));return{arrayValue:{values:n}}}class Ea extends la{constructor(t,e){super(),this.serializer=t,this.gt=e}}function ba(t){return Ui(t.integerValue||t.doubleValue)}function Ta(t){return eo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ca{constructor(t,e){this.version=t,this.transformResults=e}}class Ia{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ia}static exists(t){return new Ia(void 0,t)}static updateTime(t){return new Ia(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Sa(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class _a{}function Aa(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Fa(t.key,Ia.none()):new Ra(t.key,t.data,Ia.none());{const n=t.data,s=ao.empty();let r=new Ri(fi.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?s.delete(t):s.set(t,e),r=r.add(t)}return new La(t.key,s,new Mi(r.toArray()),Ia.none())}}function Da(t,e,n){t instanceof Ra?function(t,e,n){const s=t.value.clone(),r=Oa(t.fieldTransforms,e,n.transformResults);s.setAll(r),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):t instanceof La?function(t,e,n){if(!Sa(t.precondition,e))return void e.convertToUnknownDocument(n.version);const s=Oa(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Ma(t)),r.setAll(s),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,s){return t instanceof Ra?function(t,e,n,s){if(!Sa(t.precondition,e))return n;const r=t.value.clone(),i=Pa(t.fieldTransforms,s,e);return r.setAll(i),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,s):t instanceof La?function(t,e,n,s){if(!Sa(t.precondition,e))return n;const r=Pa(t.fieldTransforms,s,e),i=e.data;return i.setAll(Ma(t)),i.setAll(r),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,s):function(t,e,n){return Sa(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Na(t,e){let n=null;for(const s of t.fieldTransforms){const t=e.data.field(s.field),r=ga(s.transform,t||null);null!=r&&(null===n&&(n=ao.empty()),n.set(s.field,r))}return n||null}function xa(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ai(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ma&&e instanceof ma||t instanceof va&&e instanceof va?ai(t.elements,e.elements,Qi):t instanceof Ea&&e instanceof Ea?Qi(t.gt,e.gt):t instanceof pa&&e instanceof pa}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ra extends _a{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class La extends _a{constructor(t,e,n,s,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Ma(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Oa(t,e,n){const s=new Map;Kr(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,fa(o,a,n[r]))}return s}function Pa(t,e,n){const s=new Map;for(const r of t){const t=r.transform,i=n.data.field(r.field);s.set(r.field,da(t,i,e))}return s}class Fa extends _a{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Va extends _a{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ua{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const s=this.mutations[e];s.key.isEqual(t.key)&&Da(s,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=ka(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=ka(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=na();return this.mutations.forEach((s=>{const r=t.get(s.key),i=r.overlayedDocument;let o=this.applyToLocalView(i,r.mutatedFields);o=e.has(s.key)?null:o;const a=Aa(i,o);null!==a&&n.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(ui.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),oa())}isEqual(t){return this.batchId===t.batchId&&ai(this.mutations,t.mutations,((t,e)=>xa(t,e)))&&ai(this.baseMutations,t.baseMutations,((t,e)=>xa(t,e)))}}class Ba{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){Kr(t.mutations.length===n.length);let s=ra;const r=t.mutations;for(let t=0;t<r.length;t++)s=s.insert(r[t].key,n[t].version);return new Ba(t,e,n,s)}}class ja{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $a{constructor(t,e){this.count=t,this.unchangedNames=e}}var qa,za;function Ka(t){if(void 0===t)return jr("GRPC error has no .code"),Gr.UNKNOWN;switch(t){case qa.OK:return Gr.OK;case qa.CANCELLED:return Gr.CANCELLED;case qa.UNKNOWN:return Gr.UNKNOWN;case qa.DEADLINE_EXCEEDED:return Gr.DEADLINE_EXCEEDED;case qa.RESOURCE_EXHAUSTED:return Gr.RESOURCE_EXHAUSTED;case qa.INTERNAL:return Gr.INTERNAL;case qa.UNAVAILABLE:return Gr.UNAVAILABLE;case qa.UNAUTHENTICATED:return Gr.UNAUTHENTICATED;case qa.INVALID_ARGUMENT:return Gr.INVALID_ARGUMENT;case qa.NOT_FOUND:return Gr.NOT_FOUND;case qa.ALREADY_EXISTS:return Gr.ALREADY_EXISTS;case qa.PERMISSION_DENIED:return Gr.PERMISSION_DENIED;case qa.FAILED_PRECONDITION:return Gr.FAILED_PRECONDITION;case qa.ABORTED:return Gr.ABORTED;case qa.OUT_OF_RANGE:return Gr.OUT_OF_RANGE;case qa.UNIMPLEMENTED:return Gr.UNIMPLEMENTED;case qa.DATA_LOSS:return Gr.DATA_LOSS;default:return zr()}}(za=qa||(qa={}))[za.OK=0]="OK",za[za.CANCELLED=1]="CANCELLED",za[za.UNKNOWN=2]="UNKNOWN",za[za.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",za[za.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",za[za.NOT_FOUND=5]="NOT_FOUND",za[za.ALREADY_EXISTS=6]="ALREADY_EXISTS",za[za.PERMISSION_DENIED=7]="PERMISSION_DENIED",za[za.UNAUTHENTICATED=16]="UNAUTHENTICATED",za[za.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",za[za.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",za[za.ABORTED=10]="ABORTED",za[za.OUT_OF_RANGE=11]="OUT_OF_RANGE",za[za.UNIMPLEMENTED=12]="UNIMPLEMENTED",za[za.INTERNAL=13]="INTERNAL",za[za.UNAVAILABLE=14]="UNAVAILABLE",za[za.DATA_LOSS=15]="DATA_LOSS";class Ha{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ga}static getOrCreateInstance(){return null===Ga&&(Ga=new Ha),Ga}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach((e=>e(t)))}}let Ga=null;const Qa=new Mr([4294967295,4294967295],0);function Wa(t){const e=(new TextEncoder).encode(t),n=new Lr;return n.update(e),new Uint8Array(n.digest())}function Xa(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Mr([n,s],0),new Mr([r,i],0)]}class Ya{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ja(`Invalid padding: ${e}`);if(n<0)throw new Ja(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Ja(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Ja(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=Mr.fromNumber(this.It)}Et(t,e,n){let s=t.add(e.multiply(Mr.fromNumber(n)));return 1===s.compare(Qa)&&(s=new Mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=Wa(t),[n,s]=Xa(e);for(let t=0;t<this.hashCount;t++){const e=this.Et(n,s,t);if(!this.At(e))return!1}return!0}static create(t,e,n){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),i=new Ya(r,s,e);return n.forEach((t=>i.insert(t))),i}insert(t){if(0===this.It)return;const e=Wa(t),[n,s]=Xa(e);for(let t=0;t<this.hashCount;t++){const e=this.Et(n,s,t);this.Rt(e)}}Rt(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Za{constructor(t,e,n,s,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const s=new Map;return s.set(t,tc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Za(ui.min(),s,new ki(oi),Yo(),oa())}}class tc{constructor(t,e,n,s,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new tc(n,e,oa(),oa(),oa())}}class ec{constructor(t,e,n,s){this.Pt=t,this.removedTargetIds=e,this.key=n,this.bt=s}}class nc{constructor(t,e){this.targetId=t,this.Vt=e}}class sc{constructor(t,e,n=Pi.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class rc{constructor(){this.St=0,this.Dt=ac(),this.Ct=Pi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=oa(),e=oa(),n=oa();return this.Dt.forEach(((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:zr()}})),new tc(this.Ct,this.xt,t,e,n)}Ft(){this.Nt=!1,this.Dt=ac()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ic{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=Yo(),this.zt=oc(),this.Wt=new ki(oi)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,(e=>{const n=this.Zt(e);switch(t.state){case 0:this.te(e)&&n.$t(t.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(t.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(e);break;case 3:this.te(e)&&(n.Kt(),n.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),n.$t(t.resumeToken));break;default:zr()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach(((t,n)=>{this.te(n)&&e(n)}))}ne(t){var e;const n=t.targetId,s=t.Vt.count,r=this.se(n);if(r){const i=r.target;if(Po(i))if(0===s){const t=new gi(i.path);this.Yt(n,t,uo.newNoDocument(t,ui.min()))}else Kr(1===s);else{const r=this.ie(n);if(r!==s){const s=this.re(t,r);if(0!==s){this.ee(n);const t=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,t)}null===(e=Ha.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(t,e,n){var s,r,i,o,a,c;const u={localCacheCount:e,existenceFilterCount:n.count},h=n.unchangedNames;return h&&(u.bloomFilter={applied:0===t,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===(i=null===(r=null==h?void 0:h.bits)||void 0===r?void 0:r.bitmap)||void 0===i?void 0:i.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),u}(s,r,t.Vt))}}}}re(t,e){const{unchangedNames:n,count:s}=t.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,c;try{a=Bi(r).toUint8Array()}catch(t){if(t instanceof Oi)return $r("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw t}try{c=new Ya(a,i,o)}catch(t){return $r(t instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",t),1}return 0===c.It?1:s!==e-this.oe(t.targetId,c)?2:0}oe(t,e){const n=this.Gt.getRemoteKeysForTarget(t);let s=0;return n.forEach((n=>{const r=this.Gt.ue(),i=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;e.vt(i)||(this.Yt(t,n,null),s++)})),s}ce(t){const e=new Map;this.Qt.forEach(((n,s)=>{const r=this.se(s);if(r){if(n.current&&Po(r.target)){const e=new gi(r.target.path);null!==this.jt.get(e)||this.ae(s,e)||this.Yt(s,e,uo.newNoDocument(e,t))}n.Mt&&(e.set(s,n.Ot()),n.Ft())}}));let n=oa();this.zt.forEach(((t,e)=>{let s=!0;e.forEachWhile((t=>{const e=this.se(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(s=!1,!1)})),s&&(n=n.add(t))})),this.jt.forEach(((e,n)=>n.setReadTime(t)));const s=new Za(t,e,this.Wt,this.jt,n);return this.jt=Yo(),this.zt=oc(),this.Wt=new ki(oi),s}Jt(t,e){if(!this.te(t))return;const n=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,n),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,n){if(!this.te(t))return;const s=this.Zt(t);this.ae(t,e)?s.Bt(e,1):s.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),n&&(this.jt=this.jt.insert(e,n))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new rc,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Ri(oi),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||Br("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new rc),this.Gt.getRemoteKeysForTarget(t).forEach((e=>{this.Yt(t,e,null)}))}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function oc(){return new ki(gi.comparator)}function ac(){return new ki(gi.comparator)}const cc={asc:"ASCENDING",desc:"DESCENDING"},uc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hc={and:"AND",or:"OR"};class lc{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function dc(t,e){return t.useProto3Json||Ii(e)?e:{value:e}}function fc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gc(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pc(t,e){return fc(t,e.toTimestamp())}function mc(t){return Kr(!!t),ui.fromTimestamp(function(t){const e=Vi(t);return new ci(e.seconds,e.nanos)}(t))}function yc(t,e){return function(t){return new li(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function vc(t){const e=li.fromString(t);return Kr(Pc(e)),e}function wc(t,e){return yc(t.databaseId,e.path)}function Ec(t,e){const n=vc(e);if(n.get(1)!==t.databaseId.projectId)throw new Qr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Qr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new gi(Cc(n))}function bc(t,e){return yc(t.databaseId,e)}function Tc(t){return new li(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cc(t){return Kr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ic(t,e,n){return{name:wc(t,e),fields:n.value.mapValue.fields}}function Sc(t,e){return{documents:[bc(t,e.path)]}}function _c(t,e){const n={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(n.parent=bc(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=bc(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(t){if(0!==t.length)return Mc(vo.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const i=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Rc(t.field),direction:kc(t.dir)}}(t)))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=dc(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function Ac(t){let e=function(t){const e=vc(t);return 4===e.length?li.emptyPath():Cc(e)}(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Kr(1===s);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let i=[];n.where&&(i=function(t){const e=Dc(t);return e instanceof vo&&Eo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new go(Lc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Ii(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new ho(n,e)}(n.startAt));let u=null;return n.endAt&&(u=function(t){const e=!t.before,n=t.values||[];return new ho(n,e)}(n.endAt)),function(t,e,n,s,r,i,o,a){return new Fo(t,e,n,s,r,i,o,a)}(e,r,o,i,a,"F",c,u)}function Dc(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Lc(t.unaryFilter.field);return yo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Lc(t.unaryFilter.field);return yo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lc(t.unaryFilter.field);return yo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Lc(t.unaryFilter.field);return yo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return zr()}}(t):void 0!==t.fieldFilter?function(t){return yo.create(Lc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zr()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return vo.create(t.compositeFilter.filters.map((t=>Dc(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return zr()}}(t.compositeFilter.op))}(t):zr()}function kc(t){return cc[t]}function Nc(t){return uc[t]}function xc(t){return hc[t]}function Rc(t){return{fieldPath:t.canonicalString()}}function Lc(t){return fi.fromServerFormat(t.fieldPath)}function Mc(t){return t instanceof yo?function(t){if("=="===t.op){if(so(t.value))return{unaryFilter:{field:Rc(t.field),op:"IS_NAN"}};if(no(t.value))return{unaryFilter:{field:Rc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(so(t.value))return{unaryFilter:{field:Rc(t.field),op:"IS_NOT_NAN"}};if(no(t.value))return{unaryFilter:{field:Rc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rc(t.field),op:Nc(t.op),value:t.value}}}(t):t instanceof vo?function(t){const e=t.getFilters().map((t=>Mc(t)));return 1===e.length?e[0]:{compositeFilter:{op:xc(t.op),filters:e}}}(t):zr()}function Oc(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Pc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Fc{constructor(t,e,n,s,r=ui.min(),i=ui.min(),o=Pi.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Fc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Vc{constructor(t){this.fe=t}}function Uc(t){const e=Ac({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$o(e,e.limit,"L"):e}class Bc{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(Ui(t.integerValue));else if("doubleValue"in t){const n=Ui(t.doubleValue);isNaN(n)?this.ye(e,13):(this.ye(e,15),Si(n)?e.pe(0):e.pe(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ye(e,20),"string"==typeof n?e.Ie(n):(e.Ie(`${n.seconds||""}`),e.pe(n.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(Bi(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ye(e,45),e.pe(n.latitude||0),e.pe(n.longitude||0)}else"mapValue"in t?oo(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):zr()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const n=t.fields||{};this.ye(e,55);for(const t of Object.keys(n))this.Te(t,e),this.me(n[t],e)}Pe(t,e){const n=t.values||[];this.ye(e,50);for(const t of n)this.me(t,e)}ve(t,e){this.ye(e,37),gi.fromName(t).path.forEach((t=>{this.ye(e,60),this.be(t,e)}))}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}Bc.Ve=new Bc;class jc{constructor(){this.rn=new $c}addToCollectionParentIndex(t,e){return this.rn.add(e),bi.resolve()}getCollectionParents(t,e){return bi.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return bi.resolve()}deleteFieldIndex(t,e){return bi.resolve()}getDocumentsMatchingTarget(t,e){return bi.resolve(null)}getIndexType(t,e){return bi.resolve(0)}getFieldIndexes(t,e){return bi.resolve([])}getNextCollectionGroupToUpdate(t){return bi.resolve(null)}getMinOffset(t,e){return bi.resolve(mi.min())}getMinOffsetFromCollectionGroup(t,e){return bi.resolve(mi.min())}updateCollectionGroup(t,e,n){return bi.resolve()}updateIndexEntries(t,e){return bi.resolve()}}class $c{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new Ri(li.comparator),r=!s.has(n);return this.index[e]=s.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new Ri(li.comparator)).toArray()}}new Uint8Array(0);class qc{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new qc(t,qc.DEFAULT_COLLECTION_PERCENTILE,qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}qc.DEFAULT_COLLECTION_PERCENTILE=10,qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qc.DEFAULT=new qc(41943040,qc.DEFAULT_COLLECTION_PERCENTILE,qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qc.DISABLED=new qc(-1,0,0);class zc{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new zc(0)}static Mn(){return new zc(-1)}}class Kc{constructor(){this.changes=new Wo((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,uo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?bi.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Hc{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Gc{constructor(t,e,n,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=s}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(n=s,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&ka(n.mutation,t,Mi.empty(),ci.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,oa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=oa()){const s=ea();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,n).next((t=>{let e=Zo();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=ea();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,oa())))}populateOverlays(t,e,n){const s=[];return n.forEach((t=>{e.has(t)||s.push(t)})),this.documentOverlayCache.getOverlays(t,s).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,s){let r=Yo();const i=sa(),o=sa();return e.forEach(((t,e)=>{const o=n.get(e.key);s.has(e.key)&&(void 0===o||o.mutation instanceof La)?r=r.insert(e.key,e):void 0!==o?(i.set(e.key,o.mutation.getFieldMask()),ka(o.mutation,e,o.mutation.getFieldMask(),ci.now())):i.set(e.key,Mi.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>i.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Hc(e,null!==(n=i.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=sa();let s=new ki(((t,e)=>t-e)),r=oa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const i=e.get(t);if(null===i)return;let o=n.get(t)||Mi.empty();o=r.applyToLocalView(i,o),n.set(t,o);const a=(s.get(r.batchId)||oa()).add(t);s=s.insert(r.batchId,a)}))})).next((()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const s=o.getNext(),a=s.key,c=s.value,u=na();c.forEach((t=>{if(!r.has(t)){const s=Aa(e.get(t),n.get(t));null!==s&&u.set(t,s),r=r.add(t)}})),i.push(this.documentOverlayCache.saveOverlays(t,a,u))}return bi.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return gi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,s).next((r=>{const i=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,s-r.size):bi.resolve(ea());let o=-1,a=r;return i.next((e=>bi.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?bi.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,oa()))).next((t=>({batchId:o,changes:ta(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new gi(e)).next((t=>{let e=Zo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const s=e.collectionGroup;let r=Zo();return this.indexManager.getCollectionParents(t,s).next((i=>bi.forEach(i,(i=>{const o=function(t,e){return new Fo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,i.child(s));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(t,e,n){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s)))).next((t=>{s.forEach(((e,n)=>{const s=n.getKey();null===t.get(s)&&(t=t.insert(s,uo.newInvalidDocument(s)))}));let n=Zo();return t.forEach(((t,r)=>{const i=s.get(t);void 0!==i&&ka(i.mutation,r,Mi.empty(),ci.now()),Ho(e,r)&&(n=n.insert(t,r))})),n}))}}class Qc{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return bi.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var n;return this.cs.set(e.id,{id:(n=e).id,version:n.version,createTime:mc(n.createTime)}),bi.resolve()}getNamedQuery(t,e){return bi.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,function(t){return{name:t.name,query:Uc(t.bundledQuery),readTime:mc(t.readTime)}}(e)),bi.resolve()}}class Wc{constructor(){this.overlays=new ki(gi.comparator),this.ls=new Map}getOverlay(t,e){return bi.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ea();return bi.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,s)=>{this.we(t,e,s)})),bi.resolve()}removeOverlaysForBatchId(t,e,n){const s=this.ls.get(n);return void 0!==s&&(s.forEach((t=>this.overlays=this.overlays.remove(t))),this.ls.delete(n)),bi.resolve()}getOverlaysForCollection(t,e,n){const s=ea(),r=e.length+1,i=new gi(e.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const t=o.getNext().value,i=t.getKey();if(!e.isPrefixOf(i.path))break;i.path.length===r&&t.largestBatchId>n&&s.set(t.getKey(),t)}return bi.resolve(s)}getOverlaysForCollectionGroup(t,e,n,s){let r=new ki(((t,e)=>t-e));const i=this.overlays.getIterator();for(;i.hasNext();){const t=i.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=ea(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ea(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=s)););return bi.resolve(o)}we(t,e,n){const s=this.overlays.get(n.key);if(null!==s){const t=this.ls.get(s.largestBatchId).delete(n.key);this.ls.set(s.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new ja(e,n));let r=this.ls.get(e);void 0===r&&(r=oa(),this.ls.set(e,r)),this.ls.set(e,r.add(n.key))}}class Xc{constructor(){this.fs=new Ri(Yc.ds),this.ws=new Ri(Yc._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const n=new Yc(t,e);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.ys(new Yc(t,e))}ps(t,e){t.forEach((t=>this.removeReference(t,e)))}Is(t){const e=new gi(new li([])),n=new Yc(e,t),s=new Yc(e,t+1),r=[];return this.ws.forEachInRange([n,s],(t=>{this.ys(t),r.push(t.key)})),r}Ts(){this.fs.forEach((t=>this.ys(t)))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new gi(new li([])),n=new Yc(e,t),s=new Yc(e,t+1);let r=oa();return this.ws.forEachInRange([n,s],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new Yc(t,0),n=this.fs.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Yc{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return gi.comparator(t.key,e.key)||oi(t.As,e.As)}static _s(t,e){return oi(t.As,e.As)||gi.comparator(t.key,e.key)}}class Jc{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Ri(Yc.ds)}checkEmpty(t){return bi.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,s){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ua(r,e,n,s);this.mutationQueue.push(i);for(const e of s)this.Rs=this.Rs.add(new Yc(e.key,r)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return bi.resolve(i)}lookupMutationBatch(t,e){return bi.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.bs(n),r=s<0?0:s;return bi.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return bi.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return bi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Yc(e,0),s=new Yc(e,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,s],(t=>{const e=this.Ps(t.As);r.push(e)})),bi.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Ri(oi);return e.forEach((t=>{const e=new Yc(t,0),s=new Yc(t,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([e,s],(t=>{n=n.add(t.As)}))})),bi.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let r=n;gi.isDocumentKey(r)||(r=r.child(""));const i=new Yc(new gi(r),0);let o=new Ri(oi);return this.Rs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===s&&(o=o.add(t.As)),!0)}),i),bi.resolve(this.Vs(o))}Vs(t){const e=[];return t.forEach((t=>{const n=this.Ps(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Kr(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return bi.forEach(e.mutations,(s=>{const r=new Yc(s.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Rs=n}))}Cn(t){}containsKey(t,e){const n=new Yc(e,0),s=this.Rs.firstAfterOrEqual(n);return bi.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,bi.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Zc{constructor(t){this.Ds=t,this.docs=new ki(gi.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,s=this.docs.get(n),r=s?s.size:0,i=this.Ds(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return bi.resolve(n?n.document.mutableCopy():uo.newInvalidDocument(e))}getEntries(t,e){let n=Yo();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():uo.newInvalidDocument(t))})),bi.resolve(n)}getDocumentsMatchingQuery(t,e,n,s){let r=Yo();const i=e.path,o=new gi(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!i.isPrefixOf(t.path))break;t.path.length>i.length+1||yi(pi(o),n)<=0||(s.has(o.key)||Ho(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return bi.resolve(r)}getAllFromCollectionGroup(t,e,n,s){zr()}Cs(t,e){return bi.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new tu(this)}getSize(t){return bi.resolve(this.size)}}class tu extends Kc{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?e.push(this.os.addEntry(t,s)):this.os.removeEntry(n)})),bi.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}class eu{constructor(t){this.persistence=t,this.xs=new Wo((t=>Mo(t)),Oo),this.lastRemoteSnapshotVersion=ui.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Xc,this.targetCount=0,this.Ms=zc.kn()}forEachTarget(t,e){return this.xs.forEach(((t,n)=>e(n))),bi.resolve()}getLastRemoteSnapshotVersion(t){return bi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return bi.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),bi.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ns&&(this.Ns=e),bi.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new zc(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,bi.resolve()}updateTargetData(t,e){return this.Fn(e),bi.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,bi.resolve()}removeTargets(t,e,n){let s=0;const r=[];return this.xs.forEach(((i,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.xs.delete(i),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)})),bi.waitFor(r).next((()=>s))}getTargetCount(t){return bi.resolve(this.targetCount)}getTargetData(t,e){const n=this.xs.get(e)||null;return bi.resolve(n)}addMatchingKeys(t,e,n){return this.ks.gs(e,n),bi.resolve()}removeMatchingKeys(t,e,n){this.ks.ps(e,n);const s=this.persistence.referenceDelegate,r=[];return s&&e.forEach((e=>{r.push(s.markPotentiallyOrphaned(t,e))})),bi.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),bi.resolve()}getMatchingKeysForTargetId(t,e){const n=this.ks.Es(e);return bi.resolve(n)}containsKey(t,e){return bi.resolve(this.ks.containsKey(e))}}class nu{constructor(t,e){this.$s={},this.overlays={},this.Os=new Ci(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new eu(this),this.indexManager=new jc,this.remoteDocumentCache=function(t){return new Zc(t)}((t=>this.referenceDelegate.Ls(t))),this.serializer=new Vc(e),this.qs=new Qc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Wc,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.$s[t.toKey()];return n||(n=new Jc(e,this.referenceDelegate),this.$s[t.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,n){Br("MemoryPersistence","Starting transaction:",t);const s=new su(this.Os.next());return this.referenceDelegate.Us(),n(s).next((t=>this.referenceDelegate.Ks(s).next((()=>t)))).toPromise().then((t=>(s.raiseOnCommittedEvent(),t)))}Gs(t,e){return bi.or(Object.values(this.$s).map((n=>()=>n.containsKey(t,e))))}}class su extends wi{constructor(t){super(),this.currentSequenceNumber=t}}class ru{constructor(t){this.persistence=t,this.Qs=new Xc,this.js=null}static zs(t){return new ru(t)}get Ws(){if(this.js)return this.js;throw zr()}addReference(t,e,n){return this.Qs.addReference(n,e),this.Ws.delete(n.toString()),bi.resolve()}removeReference(t,e,n){return this.Qs.removeReference(n,e),this.Ws.add(n.toString()),bi.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),bi.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach((t=>this.Ws.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Ws.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bi.forEach(this.Ws,(n=>{const s=gi.fromPath(n);return this.Hs(t,s).next((t=>{t||e.removeEntry(s,ui.min())}))})).next((()=>(this.js=null,e.apply(t))))}updateLimboDocument(t,e){return this.Hs(t,e).next((t=>{t?this.Ws.delete(e.toString()):this.Ws.add(e.toString())}))}Ls(t){return 0}Hs(t,e){return bi.or([()=>bi.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}class iu{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.Fi=n,this.Bi=s}static Li(t,e){let n=oa(),s=oa();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:s=s.add(t.doc.key)}return new iu(t,e.fromCache,n,s)}}class ou{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,n,s){return this.Ki(t,e).next((r=>r||this.Gi(t,e,s,n))).next((n=>n||this.Qi(t,e)))}Ki(t,e){if(Uo(e))return bi.resolve(null);let n=jo(e);return this.indexManager.getIndexType(t,n).next((s=>0===s?null:(null!==e.limit&&1===s&&(e=$o(e,null,"F"),n=jo(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((s=>{const r=oa(...s);return this.Ui.getDocuments(t,r).next((s=>this.indexManager.getMinOffset(t,n).next((n=>{const i=this.ji(e,s);return this.zi(e,i,r,n.readTime)?this.Ki(t,$o(e,null,"F")):this.Wi(t,i,e,n)}))))})))))}Gi(t,e,n,s){return Uo(e)||s.isEqual(ui.min())?this.Qi(t,e):this.Ui.getDocuments(t,n).next((r=>{const i=this.ji(e,r);return this.zi(e,i,n,s)?this.Qi(t,e):(Ur()<=b.DEBUG&&Br("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ko(e)),this.Wi(t,i,e,function(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ui.fromTimestamp(1e9===s?new ci(n+1,0):new ci(n,s));return new mi(r,gi.empty(),e)}(s,-1)))}))}ji(t,e){let n=new Ri(Go(t));return e.forEach(((e,s)=>{Ho(t,s)&&(n=n.add(s))})),n}zi(t,e,n,s){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Qi(t,e){return Ur()<=b.DEBUG&&Br("QueryEngine","Using full collection scan to execute query:",Ko(e)),this.Ui.getDocumentsMatchingQuery(t,e,mi.min())}Wi(t,e,n,s){return this.Ui.getDocumentsMatchingQuery(t,n,s).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class au{constructor(t,e,n,s){this.persistence=t,this.Hi=e,this.serializer=s,this.Ji=new ki(oi),this.Yi=new Wo((t=>Mo(t)),Oo),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(n)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Gc(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ji)))}}async function cu(t,e){const n=Hr(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.mutationQueue.getAllMutationBatches(t).next((r=>(s=r,n.tr(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],i=[];let o=oa();for(const t of s){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({er:t,removedBatchIds:r,addedBatchIds:i})))}))}))}function uu(t){const e=Hr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Bs.getLastRemoteSnapshotVersion(t)))}function hu(t,e){const n=Hr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function lu(t,e,n){const s=Hr(t),r=s.Ji.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(t=>s.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Ti(t))throw t;Br("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(r.target)}function du(t,e,n){const s=Hr(t);let r=ui.min(),i=oa();return s.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const s=Hr(t),r=s.Yi.get(n);return void 0!==r?bi.resolve(s.Ji.get(r)):s.Bs.getTargetData(e,n)}(s,t,jo(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{i=t}))})).next((()=>s.Hi.getDocumentsMatchingQuery(t,e,n?r:ui.min(),n?i:oa()))).next((t=>(function(t,e,n){let s=t.Xi.get(e)||ui.min();n.forEach(((t,e)=>{e.readTime.compareTo(s)>0&&(s=e.readTime)})),t.Xi.set(e,s)}(s,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,ir:i})))))}class fu{constructor(){this.activeTargetIds=aa}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gu{constructor(){this.Hr=new fu,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,n){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new fu,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class pu{Yr(t){}shutdown(){}}class mu{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Br("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){Br("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yu=null;function vu(){return null===yu?yu=268435456+Math.round(2147483648*Math.random()):yu++,"0x"+yu.toString(16)}const wu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Eu{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}const bu="WebChannelConnection";class Tu extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.mo=e+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,n,s,r){const i=vu(),o=this.To(t,e);Br("RestConnection",`Sending RPC '${t}' ${i}:`,o,n);const a={};return this.Eo(a,s,r),this.Ao(t,o,a,n).then((e=>(Br("RestConnection",`Received RPC '${t}' ${i}: `,e),e)),(e=>{throw $r("RestConnection",`RPC '${t}' ${i} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,s,r,i){return this.Io(t,e,n,s,r)}Eo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Fr,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}To(t,e){const n=wu[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,n,s){const r=vu();return new Promise(((i,o)=>{const a=new Rr;a.setWithCredentials(!0),a.listenOnce(Ar.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case _r.NO_ERROR:const e=a.getResponseJson();Br(bu,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),i(e);break;case _r.TIMEOUT:Br(bu,`RPC '${t}' ${r} timed out`),o(new Qr(Gr.DEADLINE_EXCEEDED,"Request time out"));break;case _r.HTTP_ERROR:const n=a.getStatus();if(Br(bu,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Gr).indexOf(e)>=0?e:Gr.UNKNOWN}(e.status);o(new Qr(t,e.message))}else o(new Qr(Gr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Qr(Gr.UNAVAILABLE,"Connection failed."));break;default:zr()}}finally{Br(bu,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(s);Br(bu,`RPC '${t}' ${r} sending request:`,s),a.send(e,"POST",c,n,15)}))}Ro(t,e,n){const s=vu(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Ir(),o=Sr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Nr({})),this.Eo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const u=r.join("");Br(bu,`Creating RPC '${t}' stream ${s}: ${u}`,a);const h=i.createWebChannel(u,a);let l=!1,d=!1;const f=new Eu({ro:e=>{d?Br(bu,`Not sending because RPC '${t}' stream ${s} is closed:`,e):(l||(Br(bu,`Opening RPC '${t}' stream ${s} transport.`),h.open(),l=!0),Br(bu,`RPC '${t}' stream ${s} sending:`,e),h.send(e))},oo:()=>h.close()}),g=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return g(h,xr.EventType.OPEN,(()=>{d||Br(bu,`RPC '${t}' stream ${s} transport opened.`)})),g(h,xr.EventType.CLOSE,(()=>{d||(d=!0,Br(bu,`RPC '${t}' stream ${s} transport closed`),f.wo())})),g(h,xr.EventType.ERROR,(e=>{d||(d=!0,$r(bu,`RPC '${t}' stream ${s} transport errored:`,e),f.wo(new Qr(Gr.UNAVAILABLE,"The operation could not be completed")))})),g(h,xr.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];Kr(!!r);const i=r,o=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){Br(bu,`RPC '${t}' stream ${s} received error:`,o);const e=o.status;let n=function(t){const e=qa[t];if(void 0!==e)return Ka(e)}(e),r=o.message;void 0===n&&(n=Gr.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.wo(new Qr(n,r)),h.close()}else Br(bu,`RPC '${t}' stream ${s} received:`,r),f._o(r)}})),g(o,Dr.STAT_EVENT,(e=>{e.stat===kr.PROXY?Br(bu,`RPC '${t}' stream ${s} detected buffering proxy`):e.stat===kr.NOPROXY&&Br(bu,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function Cu(){return"undefined"!=typeof document?document:null}function Iu(t){return new lc(t,!0)}class Su{constructor(t,e,n=1e3,s=1.5,r=6e4){this.ii=t,this.timerId=e,this.Po=n,this.bo=s,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),s=Math.max(0,e-n);s>0&&Br("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,(()=>(this.Co=Date.now(),t()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class _u{constructor(t,e,n,s,r,i,o,a){this.ii=t,this.$o=n,this.Oo=s,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Su(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(t){this.Ho(),this.stream.send(t)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(t,e){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():e&&e.code===Gr.RESOURCE_EXHAUSTED?(jr(e.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):e&&e.code===Gr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.ao(e)}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Fo===e&&this.Zo(t,n)}),(e=>{t((()=>{const t=new Qr(Gr.UNKNOWN,"Fetching auth token failed: "+e.message);return this.tu(t)}))}))}Zo(t,e){const n=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((t=>{n((()=>this.tu(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(t){return Br("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget((()=>this.Fo===t?e():(Br("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Au extends _u{constructor(t,e,n,s,r,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,i),this.serializer=r}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zr()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(t,e){return t.useProto3Json?(Kr(void 0===e||"string"==typeof e),Pi.fromBase64String(e||"")):(Kr(void 0===e||e instanceof Uint8Array),Pi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Gr.UNKNOWN:Ka(t.code);return new Qr(e,t.message||"")}(o);n=new sc(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ec(t,s.document.name),i=mc(s.document.updateTime),o=s.document.createTime?mc(s.document.createTime):ui.min(),a=new ao({mapValue:{fields:s.document.fields}}),c=uo.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new ec(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ec(t,s.document),i=s.readTime?mc(s.readTime):ui.min(),o=uo.newNoDocument(r,i),a=s.removedTargetIds||[];n=new ec([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ec(t,s.document),i=s.removedTargetIds||[];n=new ec([],i,r,null)}else{if(!("filter"in e))return zr();{e.filter;const t=e.filter;t.targetId;const{count:s=0,unchangedNames:r}=t,i=new $a(s,r),o=t.targetId;n=new nc(o,i)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ui.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?ui.min():e.readTime?mc(e.readTime):ui.min()}(t);return this.listener.nu(e,n)}su(t){const e={};e.database=Tc(this.serializer),e.addTarget=function(t,e){let n;const s=e.target;if(n=Po(s)?{documents:Sc(t,s)}:{query:_c(t,s)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=gc(t,e.resumeToken);const s=dc(t,e.expectedCount);null!==s&&(n.expectedCount=s)}else if(e.snapshotVersion.compareTo(ui.min())>0){n.readTime=fc(t,e.snapshotVersion.toTimestamp());const s=dc(t,e.expectedCount);null!==s&&(n.expectedCount=s)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zr()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.Wo(e)}iu(t){const e={};e.database=Tc(this.serializer),e.removeTarget=t,this.Wo(e)}}class Du extends _u{constructor(t,e,n,s,r,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,i),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(Kr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=function(t,e){return t&&t.length>0?(Kr(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?mc(t.updateTime):mc(e);return n.isEqual(ui.min())&&(n=mc(e)),new Ca(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=mc(t.commitTime);return this.listener.cu(n,e)}return Kr(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=Tc(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Ra)n={update:Ic(t,e.key,e.value)};else if(e instanceof Fa)n={delete:wc(t,e.key)};else if(e instanceof La)n={update:Ic(t,e.key,e.data),updateMask:Oc(e.fieldMask)};else{if(!(e instanceof Va))return zr();n={verify:wc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof pa)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ma)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof va)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ea)return{fieldPath:e.field.canonicalString(),increment:n.gt};throw zr()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:pc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zr()}(t,e.precondition)),n}(this.serializer,t)))};this.Wo(e)}}class ku extends class{}{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Qr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,r])=>this.connection.Io(t,e,n,s,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Gr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Qr(Gr.UNKNOWN,t.toString())}))}vo(t,e,n,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.vo(t,e,n,r,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Gr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Qr(Gr.UNKNOWN,t.toString())}))}terminate(){this.lu=!0}}class Nu{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(jr(e),this.mu=!1):Br("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class xu{constructor(t,e,n,s,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr((t=>{n.enqueueAndForget((async()=>{Bu(this)&&(Br("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Hr(t);e.vu.add(4),await Lu(e),e.bu.set("Unknown"),e.vu.delete(4),await Ru(e)}(this))}))})),this.bu=new Nu(n,s)}}async function Ru(t){if(Bu(t))for(const e of t.Ru)await e(!0)}async function Lu(t){for(const e of t.Ru)await e(!1)}function Mu(t,e){const n=Hr(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Uu(n)?Vu(n):sh(n).Ko()&&Pu(n,e))}function Ou(t,e){const n=Hr(t),s=sh(n);n.Au.delete(e),s.Ko()&&Fu(n,e),0===n.Au.size&&(s.Ko()?s.jo():Bu(n)&&n.bu.set("Unknown"))}function Pu(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ui.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sh(t).su(e)}function Fu(t,e){t.Vu.qt(e),sh(t).iu(e)}function Vu(t){t.Vu=new ic({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),sh(t).start(),t.bu.gu()}function Uu(t){return Bu(t)&&!sh(t).Uo()&&t.Au.size>0}function Bu(t){return 0===Hr(t).vu.size}function ju(t){t.Vu=void 0}async function $u(t){t.Au.forEach(((e,n)=>{Pu(t,e)}))}async function qu(t,e){ju(t),Uu(t)?(t.bu.Iu(e),Vu(t)):t.bu.set("Unknown")}async function zu(t,e,n){if(t.bu.set("Online"),e instanceof sc&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const s of e.targetIds)t.Au.has(s)&&(await t.remoteSyncer.rejectListen(s,n),t.Au.delete(s),t.Vu.removeTarget(s))}(t,e)}catch(n){Br("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ku(t,n)}else if(e instanceof ec?t.Vu.Ht(e):e instanceof nc?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(ui.min()))try{const e=await uu(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Vu.ce(e);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.Au.get(s);r&&t.Au.set(s,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const s=t.Au.get(e);if(!s)return;t.Au.set(e,s.withResumeToken(Pi.EMPTY_BYTE_STRING,s.snapshotVersion)),Fu(t,e);const r=new Fc(s.target,e,n,s.sequenceNumber);Pu(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Br("RemoteStore","Failed to raise snapshot:",e),await Ku(t,e)}}async function Ku(t,e,n){if(!Ti(e))throw e;t.vu.add(1),await Lu(t),t.bu.set("Offline"),n||(n=()=>uu(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Br("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Ru(t)}))}function Hu(t,e){return e().catch((n=>Ku(t,n,e)))}async function Gu(t){const e=Hr(t),n=rh(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Qu(e);)try{const t=await hu(e.localStore,s);if(null===t){0===e.Eu.length&&n.jo();break}s=t.batchId,Wu(e,t)}catch(t){await Ku(e,t)}Xu(e)&&Yu(e)}function Qu(t){return Bu(t)&&t.Eu.length<10}function Wu(t,e){t.Eu.push(e);const n=rh(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Xu(t){return Bu(t)&&!rh(t).Uo()&&t.Eu.length>0}function Yu(t){rh(t).start()}async function Ju(t){rh(t).hu()}async function Zu(t){const e=rh(t);for(const n of t.Eu)e.uu(n.mutations)}async function th(t,e,n){const s=t.Eu.shift(),r=Ba.from(s,e,n);await Hu(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Gu(t)}async function eh(t,e){e&&rh(t).ou&&await async function(t,e){if(function(t){switch(t){default:return zr();case Gr.CANCELLED:case Gr.UNKNOWN:case Gr.DEADLINE_EXCEEDED:case Gr.RESOURCE_EXHAUSTED:case Gr.INTERNAL:case Gr.UNAVAILABLE:case Gr.UNAUTHENTICATED:return!1;case Gr.INVALID_ARGUMENT:case Gr.NOT_FOUND:case Gr.ALREADY_EXISTS:case Gr.PERMISSION_DENIED:case Gr.FAILED_PRECONDITION:case Gr.ABORTED:case Gr.OUT_OF_RANGE:case Gr.UNIMPLEMENTED:case Gr.DATA_LOSS:return!0}}(n=e.code)&&n!==Gr.ABORTED){const n=t.Eu.shift();rh(t).Qo(),await Hu(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Gu(t)}var n}(t,e),Xu(t)&&Yu(t)}async function nh(t,e){const n=Hr(t);n.asyncQueue.verifyOperationInProgress(),Br("RemoteStore","RemoteStore received new credentials");const s=Bu(n);n.vu.add(3),await Lu(n),s&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Ru(n)}function sh(t){return t.Su||(t.Su=function(t,e,n){const s=Hr(t);return s.fu(),new Au(e,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{uo:$u.bind(null,t),ao:qu.bind(null,t),nu:zu.bind(null,t)}),t.Ru.push((async e=>{e?(t.Su.Qo(),Uu(t)?Vu(t):t.bu.set("Unknown")):(await t.Su.stop(),ju(t))}))),t.Su}function rh(t){return t.Du||(t.Du=function(t,e,n){const s=Hr(t);return s.fu(),new Du(e,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{uo:Ju.bind(null,t),ao:eh.bind(null,t),au:Zu.bind(null,t),cu:th.bind(null,t)}),t.Ru.push((async e=>{e?(t.Du.Qo(),await Gu(t)):(await t.Du.stop(),t.Eu.length>0&&(Br("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))}))),t.Du}class ih{constructor(t,e,n,s,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,s,r){const i=Date.now()+n,o=new ih(t,e,i,s,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qr(Gr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oh(t,e){if(jr("AsyncQueue",`${e}: ${t}`),Ti(t))return new Qr(Gr.UNAVAILABLE,`${e}: ${t}`);throw t}class ah{constructor(t){this.comparator=t?(e,n)=>t(e,n)||gi.comparator(e.key,n.key):(t,e)=>gi.comparator(t.key,e.key),this.keyedMap=Zo(),this.sortedSet=new ki(this.comparator)}static emptySet(t){return new ah(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ah))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(!t.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new ah;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class ch{constructor(){this.Cu=new ki(gi.comparator)}track(t){const e=t.doc.key,n=this.Cu.get(e);n?0!==t.type&&3===n.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==n.type?this.Cu=this.Cu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Cu=this.Cu.remove(e):1===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):zr():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class uh{constructor(t,e,n,s,r,i,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,s,r){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new uh(t,e,ah.emptySet(e),i,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&qo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class hh{constructor(){this.Nu=void 0,this.listeners=[]}}class lh{constructor(){this.queries=new Wo((t=>zo(t)),qo),this.onlineState="Unknown",this.ku=new Set}}function dh(t,e){const n=Hr(t);let s=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.listeners)e.$u(t)&&(s=!0);r.Nu=t}}s&&gh(n)}function fh(t,e,n){const s=Hr(t),r=s.queries.get(e);if(r)for(const t of r.listeners)t.onError(n);s.queries.delete(e)}function gh(t){t.ku.forEach((t=>{t.next()}))}class ph{constructor(t,e,n){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new uh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Ku||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){if(t.docChanges.length>0)return!0;const e=this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Uu(t){t=uh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}class mh{constructor(t){this.key=t}}class yh{constructor(t){this.key=t}}class vh{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=oa(),this.mutatedKeys=oa(),this.tc=Go(t),this.ec=new ah(this.tc)}get nc(){return this.Yu}sc(t,e){const n=e?e.ic:new ch,s=e?e.ec:this.ec;let r=e?e.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,c="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((t,e)=>{const u=s.get(t),h=Ho(this.query,e)?e:null,l=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;u&&h?u.data.isEqual(h.data)?l!==d&&(n.track({type:3,doc:h}),f=!0):this.rc(u,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.tc(h,a)>0||c&&this.tc(h,c)<0)&&(o=!0)):!u&&h?(n.track({type:0,doc:h}),f=!0):u&&!h&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(h?(i=i.add(h),r=d?r.add(t):r.delete(t)):(i=i.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const t="F"===this.query.limitType?i.last():i.first();i=i.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ec:i,ic:n,zi:o,mutatedKeys:r}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const s=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const r=t.ic.xu();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr()}};return n(t)-n(e)}(t.type,e.type)||this.tc(t.doc,e.doc))),this.oc(n);const i=e?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==r.length||a?{snapshot:new uh(this.query,t.ec,s,r,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ch,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach((t=>this.Yu=this.Yu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Yu=this.Yu.delete(t))),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=oa(),this.ec.forEach((t=>{this.ac(t.key)&&(this.Zu=this.Zu.add(t.key))}));const e=[];return t.forEach((t=>{this.Zu.has(t)||e.push(new yh(t))})),this.Zu.forEach((n=>{t.has(n)||e.push(new mh(n))})),e}hc(t){this.Yu=t.ir,this.Zu=oa();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return uh.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class wh{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Eh{constructor(t){this.key=t,this.fc=!1}}class bh{constructor(t,e,n,s,r,i){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new Wo((t=>zo(t)),qo),this._c=new Map,this.mc=new Set,this.gc=new ki(gi.comparator),this.yc=new Map,this.Ic=new Xc,this.Tc={},this.Ec=new Map,this.Ac=zc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Th(t,e){const n=function(t){const e=Hr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ih.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_h.bind(null,e),e.dc.nu=dh.bind(null,e.eventManager),e.dc.Pc=fh.bind(null,e.eventManager),e}(t);let s,r;const i=n.wc.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.lc();else{const t=await function(t,e){const n=Hr(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let s;return n.Bs.getTargetData(t,e).next((r=>r?(s=r,bi.resolve(s)):n.Bs.allocateTargetId(t).next((r=>(s=new Fc(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Bs.addTargetData(t,s).next((()=>s)))))))})).then((t=>{const s=n.Ji.get(t.targetId);return(null===s||t.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(t.targetId,t),n.Yi.set(e,t.targetId)),t}))}(n.localStore,jo(e)),i=n.sharedClientState.addLocalQueryTarget(t.targetId);s=t.targetId,r=await async function(t,e,n,s,r){t.Rc=(e,n,s)=>async function(t,e,n,s){let r=e.view.sc(n);r.zi&&(r=await du(t.localStore,e.query,!1).then((({documents:t})=>e.view.sc(t,r))));const i=s&&s.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,i);return Lh(t,e.targetId,o.cc),o.snapshot}(t,e,n,s);const i=await du(t.localStore,e,!0),o=new vh(e,i.ir),a=o.sc(i.documents),c=tc.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==t.onlineState,r),u=o.applyChanges(a,t.isPrimaryClient,c);Lh(t,n,u.cc);const h=new wh(e,n,o);return t.wc.set(e,h),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}(n,e,s,"current"===i,t.resumeToken),n.isPrimaryClient&&Mu(n.remoteStore,t)}return r}async function Ch(t,e){const n=Hr(t),s=n.wc.get(e),r=n._c.get(s.targetId);if(r.length>1)return n._c.set(s.targetId,r.filter((t=>!qo(t,e)))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await lu(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),Ou(n.remoteStore,s.targetId),xh(n,s.targetId)})).catch(Ei)):(xh(n,s.targetId),await lu(n.localStore,s.targetId,!0))}async function Ih(t,e){const n=Hr(t);try{const t=await function(t,e){const n=Hr(t),s=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const o=[];e.targetChanges.forEach(((i,a)=>{const c=r.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(t,i.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(t,i.addedDocuments,a))));let u=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?u=u.withResumeToken(Pi.EMPTY_BYTE_STRING,ui.min()).withLastLimboFreeSnapshotVersion(ui.min()):i.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(i.resumeToken,s)),r=r.insert(a,u),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,i)&&o.push(n.Bs.updateTargetData(t,u))}));let a=Yo(),c=oa();if(e.documentUpdates.forEach((s=>{e.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,s))})),o.push(function(t,e,n){let s=oa(),r=oa();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=Yo();return n.forEach(((n,i)=>{const o=t.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),i.isNoDocument()&&i.version.isEqual(ui.min())?(e.removeEntry(n,i.readTime),s=s.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(i),s=s.insert(n,i)):Br("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)})),{nr:s,sr:r}}))}(t,i,e.documentUpdates).next((t=>{a=t.nr,c=t.sr}))),!s.isEqual(ui.min())){const e=n.Bs.getLastRemoteSnapshotVersion(t).next((e=>n.Bs.setTargetsMetadata(t,t.currentSequenceNumber,s)));o.push(e)}return bi.waitFor(o).next((()=>i.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Ji=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const s=n.yc.get(e);s&&(Kr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?s.fc=!0:t.modifiedDocuments.size>0?Kr(s.fc):t.removedDocuments.size>0&&(Kr(s.fc),s.fc=!1))})),await Ph(n,t,e)}catch(t){await Ei(t)}}function Sh(t,e,n){const s=Hr(t);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const t=[];s.wc.forEach(((n,s)=>{const r=s.view.Mu(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Hr(t);n.onlineState=e;let s=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.Mu(e)&&(s=!0)})),s&&gh(n)}(s.eventManager,e),t.length&&s.dc.nu(t),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function _h(t,e,n){const s=Hr(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.yc.get(e),i=r&&r.key;if(i){let t=new ki(gi.comparator);t=t.insert(i,uo.newNoDocument(i,ui.min()));const n=oa().add(i),r=new Za(ui.min(),new Map,new ki(oi),t,n);await Ih(s,r),s.gc=s.gc.remove(i),s.yc.delete(e),Oh(s)}else await lu(s.localStore,e,!1).then((()=>xh(s,e,n))).catch(Ei)}async function Ah(t,e){const n=Hr(t),s=e.batch.batchId;try{const t=await function(t,e){const n=Hr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const s=e.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,s){const r=n.batch,i=r.keys();let o=bi.resolve();return i.forEach((t=>{o=o.next((()=>s.getEntry(e,t))).next((e=>{const i=n.docVersions.get(t);Kr(null!==i),e.version.compareTo(i)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),s.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=oa();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,s)))}))}(n.localStore,e);Nh(n,s,null),kh(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ph(n,t)}catch(t){await Ei(t)}}async function Dh(t,e,n){const s=Hr(t);try{const t=await function(t,e){const n=Hr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let s;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Kr(null!==e),s=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,s,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,s))).next((()=>n.localDocuments.getDocuments(t,s)))}))}(s.localStore,e);Nh(s,e,n),kh(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ph(s,t)}catch(n){await Ei(n)}}function kh(t,e){(t.Ec.get(e)||[]).forEach((t=>{t.resolve()})),t.Ec.delete(e)}function Nh(t,e,n){const s=Hr(t);let r=s.Tc[s.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),s.Tc[s.currentUser.toKey()]=r}}function xh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t._c.get(e))t.wc.delete(s),n&&t.dc.Pc(s,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach((e=>{t.Ic.containsKey(e)||Rh(t,e)}))}function Rh(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(Ou(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Oh(t))}function Lh(t,e,n){for(const s of n)s instanceof mh?(t.Ic.addReference(s.key,e),Mh(t,s)):s instanceof yh?(Br("SyncEngine","Document no longer in limbo: "+s.key),t.Ic.removeReference(s.key,e),t.Ic.containsKey(s.key)||Rh(t,s.key)):zr()}function Mh(t,e){const n=e.key,s=n.path.canonicalString();t.gc.get(n)||t.mc.has(s)||(Br("SyncEngine","New document in limbo: "+n),t.mc.add(s),Oh(t))}function Oh(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new gi(li.fromString(e)),s=t.Ac.next();t.yc.set(s,new Eh(n)),t.gc=t.gc.insert(n,s),Mu(t.remoteStore,new Fc(jo(Vo(n.path)),s,"TargetPurposeLimboResolution",Ci.ct))}}async function Ph(t,e,n){const s=Hr(t),r=[],i=[],o=[];s.wc.isEmpty()||(s.wc.forEach(((t,a)=>{o.push(s.Rc(a,e,n).then((t=>{if((t||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=iu.Li(a.targetId,t);i.push(e)}})))})),await Promise.all(o),s.dc.nu(r),await async function(t,e){const n=Hr(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>bi.forEach(e,(e=>bi.forEach(e.Fi,(s=>n.persistence.referenceDelegate.addReference(t,e.targetId,s))).next((()=>bi.forEach(e.Bi,(s=>n.persistence.referenceDelegate.removeReference(t,e.targetId,s)))))))))}catch(t){if(!Ti(t))throw t;Br("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Ji.get(e),s=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(s);n.Ji=n.Ji.insert(e,r)}}}(s.localStore,i))}async function Fh(t,e){const n=Hr(t);if(!n.currentUser.isEqual(e)){Br("SyncEngine","User change. New user:",e.toKey());const t=await cu(n.localStore,e);n.currentUser=e,function(t,e){t.Ec.forEach((t=>{t.forEach((t=>{t.reject(new Qr(Gr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ec.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Ph(n,t.er)}}function Vh(t,e){const n=Hr(t),s=n.yc.get(e);if(s&&s.fc)return oa().add(s.key);{let t=oa();const s=n._c.get(e);if(!s)return t;for(const e of s){const s=n.wc.get(e);t=t.unionWith(s.view.nc)}return t}}function Uh(t){const e=Hr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ah.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dh.bind(null,e),e}class Bh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Iu(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,s){return new au(t,e,n,s)}(this.persistence,new ou,t.initialUser,this.serializer)}createPersistence(t){return new nu(ru.zs,this.serializer)}createSharedClientState(t){return new gu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Sh(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fh.bind(null,this.syncEngine),await async function(t,e){const n=Hr(t);e?(n.vu.delete(2),await Ru(n)):e||(n.vu.add(2),await Lu(n),n.bu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new lh}createDatastore(t){const e=Iu(t.databaseInfo.databaseId),n=(s=t.databaseInfo,new Tu(s));var s;return function(t,e,n,s){return new ku(t,e,n,s)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,s=t.asyncQueue,r=t=>Sh(this.syncEngine,t,0),i=mu.D()?new mu:new pu,new xu(e,n,s,r,i);var e,n,s,r,i}createSyncEngine(t,e){return function(t,e,n,s,r,i,o){const a=new bh(t,e,n,s,r,i);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Hr(t);Br("RemoteStore","RemoteStore shutting down."),e.vu.add(5),await Lu(e),e.Pu.shutdown(),e.bu.set("Unknown")}(this.remoteStore)}}class $h{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):jr("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class qh{constructor(t,e,n,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=Pr.UNAUTHENTICATED,this.clientId=ii.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Br("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Br("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=oh(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function zh(t,e){t.asyncQueue.verifyOperationInProgress(),Br("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async t=>{s.isEqual(t)||(await cu(e.localStore,t),s=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Kh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Br("FirestoreClient","Using user provided OfflineComponentProvider");try{await zh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Gr.FAILED_PRECONDITION||t.code===Gr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;$r("Error using user provided cache. Falling back to memory cache: "+n),await zh(t,new Bh)}}else Br("FirestoreClient","Using default OfflineComponentProvider"),await zh(t,new Bh);return t._offlineComponents}(t);Br("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener((t=>nh(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>nh(e.remoteStore,n))),t._onlineComponents=e}async function Hh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Br("FirestoreClient","Using user provided OnlineComponentProvider"),await Kh(t,t._uninitializedComponentsProvider._online)):(Br("FirestoreClient","Using default OnlineComponentProvider"),await Kh(t,new jh))),t._onlineComponents}async function Gh(t){const e=await Hh(t),n=e.eventManager;return n.onListen=Th.bind(null,e.syncEngine),n.onUnlisten=Ch.bind(null,e.syncEngine),n}function Qh(t,e,n={}){const s=new Wr;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,r){const i=new $h({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=Hr(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const t=i.listeners.indexOf(e);t>=0&&(i.listeners.splice(t,1),r=0===i.listeners.length)}if(r)return n.queries.delete(s),n.onUnlisten(s)}(t,o))),n.fromCache&&"server"===s.source?r.reject(new Qr(Gr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new ph(n,i,{includeMetadataChanges:!0,Ku:!0});return async function(t,e){const n=Hr(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new hh),r)try{i.Nu=await n.onListen(s)}catch(t){const n=oh(t,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(n)}n.queries.set(s,i),i.listeners.push(e),e.Mu(n.onlineState),i.Nu&&e.$u(i.Nu)&&gh(n)}(t,o)}(await Gh(t),t.asyncQueue,e,n,s))),s.promise}function Wh(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Xh=new Map;function Yh(t,e,n){if(!n)throw new Qr(Gr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Jh(t){if(!gi.isDocumentKey(t))throw new Qr(Gr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zh(t){if(gi.isDocumentKey(t))throw new Qr(Gr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":zr()}function el(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Qr(Gr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tl(t);throw new Qr(Gr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class nl{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Qr(Gr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qr(Gr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,s){if(!0===e&&!0===s)throw new Qr(Gr.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wh(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Qr(Gr.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Qr(Gr.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Qr(Gr.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class sl{constructor(t,e,n,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qr(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Qr(Gr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nl(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Yr;switch(t.type){case"firstParty":return new ei(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Qr(Gr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Xh.get(t);e&&(Br("ComponentProvider","Removing Datastore"),Xh.delete(t),e.terminate())}(this),Promise.resolve()}}class rl{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rl(this.firestore,t,this._key)}}class il{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new il(this.firestore,t,this._query)}}class ol extends il{constructor(t,e,n){super(t,e,Vo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rl(this.firestore,null,new gi(t))}withConverter(t){return new ol(this.firestore,t,this._path)}}function al(t,e,...n){if(t=p(t),Yh("collection","path",e),t instanceof sl){const s=li.fromString(e,...n);return Zh(s),new ol(t,null,s)}{if(!(t instanceof rl||t instanceof ol))throw new Qr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(li.fromString(e,...n));return Zh(s),new ol(t.firestore,null,s)}}function cl(t,e,...n){if(t=p(t),1===arguments.length&&(e=ii.A()),Yh("doc","path",e),t instanceof sl){const s=li.fromString(e,...n);return Jh(s),new rl(t,null,new gi(s))}{if(!(t instanceof rl||t instanceof ol))throw new Qr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(li.fromString(e,...n));return Jh(s),new rl(t.firestore,t instanceof ol?t.converter:null,new gi(s))}}class ul{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Su(this,"async_queue_retry"),this.Xc=()=>{const t=Cu();t&&Br("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const t=Cu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=Cu();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise((()=>{}));const e=new Wr;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Qc.push(t),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(t){if(!Ti(t))throw t;Br("AsyncQueue","Operation failed with retryable error: "+t)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(t){const e=this.Gc.then((()=>(this.Hc=!0,t().catch((t=>{this.Wc=t,this.Hc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw jr("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Hc=!1,t))))));return this.Gc=e,e}enqueueAfterDelay(t,e,n){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const s=ih.createAndSchedule(this,t,e,n,(t=>this.na(t)));return this.zc.push(s),s}Zc(){this.Wc&&zr()}verifyOperationInProgress(){}async sa(){let t;do{t=this.Gc,await t}while(t!==this.Gc)}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then((()=>{this.zc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()}))}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}class hl extends sl{constructor(t,e,n,s){super(t,e,n,s),this.type="firestore",this._queue=new ul,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dl(this),this._firestoreClient.terminate()}}function ll(t){return t._firestoreClient||dl(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dl(t){var e,n,s;const r=t._freezeSettings(),i=function(t,e,n,s){return new zi(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Wh(s.experimentalLongPollingOptions),s.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new qh(t._authCredentials,t._appCheckCredentials,t._queue,i),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(s=r.cache)||void 0===s?void 0:s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}class fl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new fl(Pi.fromBase64String(t))}catch(t){throw new Qr(Gr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new fl(Pi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class gl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class pl{constructor(t){this._methodName=t}}class ml{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Qr(Gr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Qr(Gr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return oi(this._lat,t._lat)||oi(this._long,t._long)}}const yl=/^__.*__$/;class vl{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new La(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ra(t,this.data,e,this.fieldTransforms)}}function wl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr()}}class El{constructor(t,e,n,s,r,i){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new El(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.aa({path:n,la:!1});return s.fa(t),s}da(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.aa({path:n,la:!1});return s.ua(),s}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return xl(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(wl(this.ca)&&yl.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class bl{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Iu(t)}ya(t,e,n,s=!1){return new El({ca:t,methodName:e,ga:n,path:fi.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tl(t){const e=t._freezeSettings(),n=Iu(t._databaseId);return new bl(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cl(t,e,n,s,r,i={}){const o=t.ya(i.merge||i.mergeFields?2:0,e,n,r);Al("Data must be an object, but it was:",o,s);const a=Sl(s,o);let c,u;if(i.merge)c=new Mi(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const t=[];for(const s of i.mergeFields){const r=Dl(e,s,n);if(!o.contains(r))throw new Qr(Gr.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Rl(t,r)||t.push(r)}c=new Mi(t),u=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=o.fieldTransforms;return new vl(new ao(a),c,u)}function Il(t,e){if(_l(t=p(t)))return Al("Unsupported field value:",e,t),Sl(t,e);if(t instanceof pl)return function(t,e){if(!wl(e.ca))throw e._a(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e._a(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,e){const n=[];let s=0;for(const r of t){let t=Il(r,e.wa(s));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),s++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=p(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ha(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=ci.fromDate(t);return{timestampValue:fc(e.serializer,n)}}if(t instanceof ci){const n=new ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:fc(e.serializer,n)}}if(t instanceof ml)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fl)return{bytesValue:gc(e.serializer,t._byteString)};if(t instanceof rl){const n=e.databaseId,s=t.firestore._databaseId;if(!s.isEqual(n))throw e._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:yc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e._a(`Unsupported field value: ${tl(t)}`)}(t,e)}function Sl(t,e){const n={};return Di(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(t,((t,s)=>{const r=Il(s,e.ha(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function _l(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ci||t instanceof ml||t instanceof fl||t instanceof rl||t instanceof pl)}function Al(t,e,n){if(!_l(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const s=tl(n);throw"an object"===s?e._a(t+" a custom object"):e._a(t+" "+s)}}function Dl(t,e,n){if((e=p(e))instanceof gl)return e._internalPath;if("string"==typeof e)return Nl(t,e);throw xl("Field path arguments must be of type string or ",t,!1,void 0,n)}const kl=new RegExp("[~\\*/\\[\\]]");function Nl(t,e,n){if(e.search(kl)>=0)throw xl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gl(...e.split("."))._internalPath}catch(s){throw xl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xl(t,e,n,s,r){const i=s&&!s.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new Qr(Gr.INVALID_ARGUMENT,a+t+c)}function Rl(t,e){return t.some((t=>t.isEqual(e)))}class Ll{constructor(t,e,n,s,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new rl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Ml(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ol("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Ml extends Ll{data(){return super.data()}}function Ol(t,e){return"string"==typeof e?Nl(t,e):e instanceof gl?e._internalPath:e._delegate._internalPath}class Pl{convertValue(t,e="none"){switch(Gi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Bi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw zr()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Ai(t,((t,s)=>{n[t]=this.convertValue(s,e)})),n}convertGeoPoint(t){return new ml(Ui(t.latitude),Ui(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=$i(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(qi(t));default:return null}}convertTimestamp(t){const e=Vi(t);return new ci(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=li.fromString(t);Kr(Pc(n));const s=new Ki(n.get(1),n.get(3)),r=new gi(n.popFirst(5));return s.isEqual(e)||jr(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}class Fl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Vl extends Ll{constructor(t,e,n,s,r,i){super(t,e,n,s,i),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Ol("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Ul extends Vl{data(t={}){return super.data(t)}}class Bl{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Fl(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Ul(this._firestore,this._userDataWriter,n.key,n,new Fl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qr(Gr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const s=new Ul(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Fl(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const s=new Ul(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Fl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,i=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),i=n.indexOf(e.doc.key)),{type:jl(e.type),doc:s,oldIndex:r,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function jl(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr()}}class $l extends Pl{constructor(t){super(),this.firestore=t}convertBytes(t){return new fl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new rl(this.firestore,null,e)}}function ql(t){t=el(t,il);const e=el(t.firestore,hl),n=ll(e),s=new $l(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Qr(Gr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),Qh(n,t._query).then((n=>new Bl(e,s,t,n)))}function zl(t,e,n){t=el(t,rl);const s=el(t.firestore,hl),r=function(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}(t.converter,e,n);return function(t,e){return function(t,e){const n=new Wr;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const s=Uh(t);try{const t=await function(t,e){const n=Hr(t),s=ci.now(),r=e.reduce(((t,e)=>t.add(e.key)),oa());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Yo(),c=oa();return n.Zi.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{i=r;const o=[];for(const t of e){const e=Na(t,i.get(t.key).overlayedDocument);null!=e&&o.push(new La(t.key,e,co(e.value.mapValue),Ia.exists(!0)))}return n.mutationQueue.addMutationBatch(t,s,o,e)})).next((e=>{o=e;const s=e.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,s)}))})).then((()=>({batchId:o.batchId,changes:ta(i)})))}(s.localStore,e);s.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let s=t.Tc[t.currentUser.toKey()];s||(s=new ki(oi)),s=s.insert(e,n),t.Tc[t.currentUser.toKey()]=s}(s,t.batchId,n),await Ph(s,t.changes),await Gu(s.remoteStore)}catch(t){const e=oh(t,"Failed to persist write");n.reject(e)}}(await function(t){return Hh(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(ll(t),e)}(s,[Cl(Tl(s),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Ia.none())])}!function(t,e=!0){Fr="9.22.2",tt(new m("firestore",((t,{instanceIdentifier:n,options:s})=>{const r=t.getProvider("app").getImmediate(),i=new hl(new Zr(t.getProvider("auth-internal")),new si(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Qr(Gr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(t.options.projectId,e)}(r,n),r);return s=Object.assign({useFetchStreams:e},s),i._setSettings(s),i}),"PUBLIC").setMultipleInstances(!0)),rt(Or,"3.12.2",t),rt(Or,"3.12.2","esm2017")}(),rt("firebase","9.22.2","app");const Kl=function(t,e){const n="string"==typeof t?t:"(default)",s=function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:function(t=W){const e=Y.get(t);if(!e&&t===W&&c())return st();if(!e)throw et.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:n});if(!s._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=a())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),s]:[e.substring(0,n),s]})("firestore");t&&function(t,e,n,s={}){var r;const i=(t=el(t,sl))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==a&&$r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),s.mockUserToken){let e,n;if("string"==typeof s.mockUserToken)e=s.mockUserToken,n=Pr.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(i)),""].join(".")}(s.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const i=s.mockUserToken.sub||s.mockUserToken.user_id;if(!i)throw new Qr(Gr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Pr(i)}t._authCredentials=new Jr(new Xr(e,n))}}(s,...t)}return s}(st({apiKey:"AIzaSyDtK7q2GcDLLV_tsTg05Q5EB1Qe-Qvsqmk",authDomain:"where-is-waldo-4eb8f.firebaseapp.com",projectId:"where-is-waldo-4eb8f",storageBucket:"where-is-waldo-4eb8f.appspot.com",messagingSenderId:"721147782545",appId:"1:721147782545:web:35d976dcd7877c8b742630"}));console.log("app-logic.js says: this seem to be working");const Hl=(()=>{const t=document.getElementById("backgroundImg"),e={bowser:{left:1430,top:3130,right:1730,bottom:3424},neo:{left:690,top:4700,right:900,bottom:4900},waldo:{left:1450,top:6550,right:1650,bottom:6750}},n=e=>{const n=t.getBoundingClientRect(),s=e.clientX-n.left,r=e.clientY-n.top,i=window.innerWidth/1920;return{x:s,y:r,scaledX:s/i,scaledY:r/i}};return{characters:e,getCoordinates:n,captureCharacterArea:t=>{const s=n(t);let r=!1;Object.keys(e).forEach((t=>{((t,e)=>{const{scaledX:n,scaledY:s}=t,{left:r,top:i,right:o,bottom:a}=e;return n>=r&&n<=o&&s>=i&&s<=a})(s,e[t])&&(console.log(`Found ${t}`),r=!0)})),r||console.log("No character found")}}})(),Gl=(()=>{const t=Hl.characters;return{storeCharacterLocations:()=>{try{Object.entries(t).forEach((([t,{left:e,top:n,right:s,bottom:r}])=>{zl(cl(Kl,"characterLocations",t),{left:e,top:n,right:s,bottom:r}).then((()=>{console.log(`${t} location stored successfully.`)})).catch((e=>{console.error(`Error storing ${t} location:`,e)}))}))}catch(t){console.error("Error storing character locations:",t)}},getCharacterLocations:async()=>{try{(await ql(al(Kl,"characterLocations"))).forEach((t=>{const e=t.id,{left:n,top:s,right:r,bottom:i}=t.data();console.log(`${e}: (${n}, ${s}, ${r}, ${i})`)}))}catch(t){console.error("Error retrieving character locations:",t)}},verifyClickedPosition:async(t,e)=>{try{const n=await ql(al(Kl,"characterLocations"));let s=null;return n.forEach((n=>{const r=n.id,{left:i,top:o,right:a,bottom:c}=n.data();t>=i&&t<=a&&e>=o&&e<=c&&(console.log(`Clicked within ${r}'s area.`),s=r)})),s}catch(t){return console.error("Error verifying clicked position:",t),null}},storeUserTime:async(t,e)=>{try{await zl(cl(Kl,"userTimes",t),{time:e}),console.log(`User time stored successfully for ${t}`)}catch(e){console.error(`Error storing user time for ${t}:`,e)}},getAllUserTimes:async()=>{try{const t=await ql(al(Kl,"userTimes")),e=[];return t.forEach((t=>{const n=t.id,{time:s}=t.data();e.push({username:n,time:s})})),e.sort(((t,e)=>t.time.localeCompare(e.time))),e.forEach((t=>{console.log(`Username: ${t.username}, Time: ${t.time}`)})),e}catch(t){console.error("Error retrieving user times:",t)}}}})()},259:(t,e,n)=>{n.d(e,{Q:()=>o,T:()=>i});var s=n(954);console.log("utils.js says: this seem to be working");const r=(()=>{const t=document.getElementById("timer");let e;const n=()=>{clearInterval(e)};return{startTimer:()=>{let n=0;e=setInterval((()=>{n+=1;const e=(t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60);return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(t%60).padStart(2,"0")}`})(n);t.textContent=e}),1e3)},stopTimer:n,resetTimer:()=>{n(),t.textContent="00:00:00"},resetCount:()=>{document.getElementById("count").textContent="0/3"},updateCount:()=>{const t=document.getElementById("count"),e=document.querySelectorAll(".grayed-out").length;t.textContent=`${e}/3`},grayOutCharacterIcon:t=>{const e=document.getElementById(t);e&&e.classList.add("grayed-out")},clearCharacterIcons:()=>{["bowser","neo","waldo"].forEach((t=>{const e=document.getElementById(t);e&&e.classList.remove("grayed-out")}))},showModal:t=>{t.closest(".overlay").style.display="flex",t.style.display="flex"},hideModal:t=>{t.closest(".overlay").style.display="none",t.style.display="none"},setPosition:(t,e,n)=>{const s=t;s.style.left=`${e}px`,s.style.top=`${n}px`},createDiv:(t,e)=>{const n=document.createElement("div");return n.className=t,e&&(n.textContent=e),n},createButton:(t,e)=>{const n=document.createElement("button");return n.textContent=t,n.type="button",n.dataset.character=e,n.addEventListener("click",o.handleButtonClick),n},removeElement:t=>{t.parentNode&&t.parentNode.removeChild(t)},getLeaderboard:()=>{const e=document.querySelector(".endgame input");document.getElementById("submitUsername").addEventListener("click",(async()=>{const n=e.value.trim();if(n){s.k.storeUserTime(n,t.textContent);const e=await s.k.getAllUserTimes();i.createTable(e),r.showModal(document.querySelector(".modal.leaderboard"))}}))}}})();console.log("interface.js says: this seem to be working");const i=(()=>{const t=document.getElementById("content"),e=[],n=[];return{createFeedbackMsg:(e,n,s,i="red")=>{const o=r.createDiv("feedback",e);r.setPosition(o,n-150,s-100),o.style.background=`rgba(${"green"===i?"0, 255, 0":"255, 0, 0"}, 0.7)`,t.appendChild(o),setTimeout((()=>{o.remove()}),5e3)},removeCircle:()=>{if(e.length>0){const t=e.pop();r.removeElement(t)}},createCircle:(n,s)=>{const i=r.createDiv("circle");r.setPosition(i,n-50,s-50),t.appendChild(i),e.push(i)},removePopup:()=>{if(n.length>0){const t=n.pop();r.removeElement(t)}},createPopup:(e,s,i)=>{const a=r.createDiv("choice");r.setPosition(a,e+60,s-70),[{text:"Bowser",character:"bowser"},{text:"Neo",character:"neo"},{text:"Waldo",character:"waldo"}].forEach((t=>{const e=r.createButton(t.text,t.character);i.includes(t.character)&&(e.classList.add("found"),e.removeEventListener("click",o.handleButtonClick)),a.appendChild(e)})),t.appendChild(a),n.push(a)},createTable:t=>{const e=document.getElementById("tableBody");e.textContent="",t.forEach((t=>{const n=document.createElement("tr"),s=document.createElement("td");s.textContent=t.username;const r=document.createElement("td");r.textContent=t.time,n.appendChild(s),n.appendChild(r),e.appendChild(n)}))}}})(),o=(()=>{const t=document.getElementById("content"),e=document.getElementById("dropdownButton"),n=document.getElementById("dropdownMenu"),o=document.getElementById("startButton"),a=document.getElementById("playAgainButton"),c=document.querySelector(".modal.initial"),u=document.querySelector(".modal.endgame"),h=document.querySelector(".modal.leaderboard");let l=!1,d=!1,f=!1,g=null;const p=[],m=()=>{l||(r.hideModal(c),r.startTimer(),l=!0,d=!0,f=!0)},y=()=>{l=!1,d=!1,f=!1,g=null,p.length=0,r.resetCount(),r.resetTimer(),r.clearCharacterIcons(),r.hideModal(h),r.hideModal(u),r.showModal(c)},v=async t=>{if(l&&!t.target.closest("header")&&!t.target.closest("footer")&&!t.target.closest(".overlay")){if(d){const{x:e,y:n,scaledX:r,scaledY:o}=s.j.getCoordinates(t);i.createCircle(e,n),i.createPopup(e,n,p);try{g=await s.k.verifyClickedPosition(r,o)}catch(t){console.error("Error verifying clicked position:",t)}}else i.removeCircle(),i.removePopup();d=!d,f=!f}},w=t=>{const{x:e,y:n}=s.j.getCoordinates(t);i.removePopup();const o=t.target.dataset.character;if(g===o){const t=g.charAt(0).toUpperCase()+g.slice(1).toLowerCase();i.createFeedbackMsg(`Found ${t}!`,e,n,"green"),r.grayOutCharacterIcon(o),r.updateCount(),p.push(o),i.removePopup(),i.createPopup(e,n,p),3===p.length&&(r.stopTimer(),r.getLeaderboard(),r.showModal(u))}else i.createFeedbackMsg("Keep looking!",e,n);return!1};return{init:()=>{t.addEventListener("click",v),document.querySelectorAll(".choice button").forEach((t=>{t.addEventListener("click",w)})),e.addEventListener("click",(()=>{n.classList.toggle("show"),e.textContent=n.classList.contains("show")?"▲ Hide Characters ▲":"▼ Show Characters ▼"})),o.addEventListener("click",m),document.getElementById("submitUsername").addEventListener("click",(()=>{r.hideModal(u)})),a.addEventListener("click",y),r.hideModal(h),r.hideModal(u),r.showModal(c)},handleButtonClick:w}})();o.init()}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(954),n(259)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9Ccm5ELEVBQUksQ0FBQzZuRCxFQUFLcnpELElBQVVqSixPQUFPRSxVQUFVMFUsZUFBZTFLLEtBQUtveUQsRUFBS3J6RCxHQ0dsRjZ5RCxFQUFvQixLQUNNQSxFQUFvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC93cmFwLWlkYi12YWx1ZS5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtLmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vc3JjL2ZpcmViYXNlLmpzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvLy4vc3JjL2FwcC1sb2dpYy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL3NyYy91dGlscy5qcyIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL3NyYy9pbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3doZXJlX2lzX3dhbGRvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cclxuICovXHJcbmNvbnN0IENPTlNUQU5UUyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQ0xJRU5UOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBBZG1pbiBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXHJcbiAgICAgKi9cclxuICAgIFNES19WRVJTSU9OOiAnJHtKU0NPUkVfVkVSU0lPTn0nXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHByb3ZpZGVkIGFzc2VydGlvbiBpcyBmYWxzeVxyXG4gKi9cclxuY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cclxuICovXHJcbmNvbnN0IGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcclxuICAgICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xyXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xyXG4gICAgICAgIG1lc3NhZ2UpO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSQxID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcclxuICAgICAgICAgICAgaSArIDEgPCBzdHIubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzZmYpIDw8IDEwKSArIChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgwM2ZmKTtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXHJcbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxyXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXHJcbiAqL1xyXG5jb25zdCBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChieXRlcykge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHBvcyA9IDAsIGMgPSAwO1xyXG4gICAgd2hpbGUgKHBvcyA8IGJ5dGVzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGMxID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAzMSkgPDwgNikgfCAoYzIgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDIzOSAmJiBjMSA8IDM2NSkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGM0ID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cclxuICAgICAgICAgICAgICAgIDB4MTAwMDA7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDAgKyAodSA+PiAxMCkpO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQuam9pbignJyk7XHJcbn07XHJcbi8vIFdlIGRlZmluZSBpdCBhcyBhbiBvYmplY3QgbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY2xhc3MgYmVjYXVzZSBhIGNsYXNzIGNvbXBpbGVkIGRvd24gdG8gZXM1IGNhbid0XHJcbi8vIGJlIHRyZWVzaGFrZWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwL2lzc3Vlcy8xNjkxXHJcbi8vIFN0YXRpYyBsb29rdXAgbWFwcywgbGF6aWx5IHBvcHVsYXRlZCBieSBpbml0XygpXHJcbmNvbnN0IGJhc2U2NCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byBjaGFyYWN0ZXJzLlxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldCwgc2hhcmVkIGJldHdlZW5cclxuICAgICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcclxuICAgICAqL1xyXG4gICAgRU5DT0RFRF9WQUxTX0JBU0U6ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicgKyAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICsgJzAxMjM0NTY3ODknLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXHJcbiAgICAgKiBzdGFydGVkIGF0IE1vemlsbGEgYnV0IGlzIG5vdyBpbXBsZW1lbnRlZCBieSBtYW55IGJyb3dzZXJzLiBXZSB1c2UgdGhlXHJcbiAgICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcclxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhbiBhcnJheSBvZiBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQW4gYXJyYXkgb2YgYnl0ZXMgKG51bWJlcnMgd2l0aFxyXG4gICAgICogICAgIHZhbHVlIGluIFswLCAyNTVdKSB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5ieXRlVG9DaGFyTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gaW5wdXRbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgKyAyIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gYnl0ZTEgPj4gMjtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUxICYgMHgwMykgPDwgNCkgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlMyA9ICgoYnl0ZTIgJiAweDBmKSA8PCAyKSB8IChieXRlMyA+PiA2KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGU0ID0gYnl0ZTMgJiAweDNmO1xyXG4gICAgICAgICAgICBpZiAoIWhhdmVCeXRlMykge1xyXG4gICAgICAgICAgICAgICAgb3V0Qnl0ZTQgPSA2NDtcclxuICAgICAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Qnl0ZTMgPSA2NDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChieXRlVG9DaGFyTWFwW291dEJ5dGUxXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMl0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTNdLCBieXRlVG9DaGFyTWFwW291dEJ5dGU0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbignJyk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHN0cmluZyB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBJZiB0cnVlLCB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkkMShpbnB1dCksIHdlYlNhZmUpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxyXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxyXG4gICAgICogYmUgYSBtdWx0aXBsZSBvZiA0LlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcclxuICAgICAqIHBhZGRpbmcgd2lsbCBiZSBpbmZlcnJlZC4gIElmIHRoZSBncm91cCBoYXMgb25lIG9yIHR3byBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzXHJcbiAgICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IElucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgY2hhclRvQnl0ZU1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlNCA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUxID09IG51bGwgfHwgYnl0ZTIgPT0gbnVsbCB8fCBieXRlMyA9PSBudWxsIHx8IGJ5dGU0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XHJcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxyXG4gICAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbml0XygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgcXVpY2sgbWFwcGluZ3MgYmFjayBhbmQgZm9ydGgsIHNvIHdlIHByZWNvbXB1dGUgdHdvIG1hcHMuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmUgZm9yZ2l2aW5nIHdoZW4gZGVjb2RpbmcgYW5kIGNvcnJlY3RseSBkZWNvZGUgYm90aCBlbmNvZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEFuIGVycm9yIGVuY291bnRlcmVkIHdoaWxlIGRlY29kaW5nIGJhc2U2NCBzdHJpbmcuXHJcbiAqL1xyXG5jbGFzcyBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJ0RlY29kZUJhc2U2NFN0cmluZ0Vycm9yJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXHJcbiAqL1xyXG5jb25zdCBiYXNlNjRFbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheSQxKHN0cik7XHJcbiAgICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nICh3aXRob3V0IFwiLlwiIHBhZGRpbmcgaW4gdGhlIGVuZCkuXHJcbiAqIGUuZy4gVXNlZCBpbiBKU09OIFdlYiBUb2tlbiAoSldUKSBwYXJ0cy5cclxuICovXHJcbmNvbnN0IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVXNlIGJhc2U2NHVybCBlbmNvZGluZyBhbmQgcmVtb3ZlIHBhZGRpbmcgaW4gdGhlIGVuZCAoZG90IGNoYXJhY3RlcnMpLlxyXG4gICAgcmV0dXJuIGJhc2U2NEVuY29kZShzdHIpLnJlcGxhY2UoL1xcLi9nLCAnJyk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcclxuICpcclxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXHJcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcclxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcclxuICovXHJcbmNvbnN0IGJhc2U2NERlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERvIGEgZGVlcC1jb3B5IG9mIGJhc2ljIEphdmFTY3JpcHQgT2JqZWN0cyBvciBBcnJheXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwQ29weSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XHJcbn1cclxuLyoqXHJcbiAqIENvcHkgcHJvcGVydGllcyBmcm9tIHNvdXJjZSB0byB0YXJnZXQgKHJlY3Vyc2l2ZWx5IGFsbG93cyBleHRlbnNpb25cclxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxyXG4gKiBJZiB0YXJnZXQgaXMgdW5kZWZpbmVkLCBhbiBvYmplY3Qgb2YgdGhlIGFwcHJvcHJpYXRlIHR5cGUgd2lsbCBiZSBjcmVhdGVkXHJcbiAqIChhbmQgcmV0dXJuZWQpLlxyXG4gKlxyXG4gKiBXZSByZWN1cnNpdmVseSBjb3B5IGFsbCBjaGlsZCBwcm9wZXJ0aWVzIG9mIHBsYWluIE9iamVjdHMgaW4gdGhlIHNvdXJjZS0gc29cclxuICogdGhhdCBuYW1lc3BhY2UtIGxpa2UgZGljdGlvbmFyaWVzIGFyZSBtZXJnZWQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB0aGUgdGFyZ2V0IGNhbiBiZSBhIGZ1bmN0aW9uLCBpbiB3aGljaCBjYXNlIHRoZSBwcm9wZXJ0aWVzIGluXHJcbiAqIHRoZSBzb3VyY2UgT2JqZWN0IGFyZSBjb3BpZWQgb250byBpdCBhcyBzdGF0aWMgcHJvcGVydGllcyBvZiB0aGUgRnVuY3Rpb24uXHJcbiAqXHJcbiAqIE5vdGU6IHdlIGRvbid0IG1lcmdlIF9fcHJvdG9fXyB0byBwcmV2ZW50IHByb3RvdHlwZSBwb2xsdXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzb3VyY2UuY29uc3RydWN0b3IpIHtcclxuICAgICAgICBjYXNlIERhdGU6XHJcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXHJcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgLSB0aGV5IHdpbGwgYmUgbG9zdCFcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVZhbHVlID0gc291cmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgY2FzZSBPYmplY3Q6XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBBcnJheTpcclxuICAgICAgICAgICAgLy8gQWx3YXlzIGNvcHkgdGhlIGFycmF5IHNvdXJjZSBhbmQgb3ZlcndyaXRlIHRoZSB0YXJnZXQuXHJcbiAgICAgICAgICAgIHRhcmdldCA9IFtdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcclxuICAgICAgICAvLyB1c2UgaXNWYWxpZEtleSB0byBndWFyZCBhZ2FpbnN0IHByb3RvdHlwZSBwb2xsdXRpb24uIFNlZSBodHRwczovL3NueWsuaW8vdnVsbi9TTllLLUpTLUxPREFTSC00NTAyMDJcclxuICAgICAgICBpZiAoIXNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSB8fCAhaXNWYWxpZEtleShwcm9wKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59XHJcbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XHJcbiAgICByZXR1cm4ga2V5ICE9PSAnX19wcm90b19fJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUG9seWZpbGwgZm9yIGBnbG9iYWxUaGlzYCBvYmplY3QuXHJcbiAqIEByZXR1cm5zIHRoZSBgZ2xvYmFsVGhpc2Agb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEdsb2JhbCgpIHtcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tR2xvYmFsID0gKCkgPT4gZ2V0R2xvYmFsKCkuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4vKipcclxuICogQXR0ZW1wdCB0byByZWFkIGRlZmF1bHRzIGZyb20gYSBKU09OIHN0cmluZyBwcm92aWRlZCB0b1xyXG4gKiBwcm9jZXNzKC4pZW52KC4pX19GSVJFQkFTRV9ERUZBVUxUU19fIG9yIGEgSlNPTiBmaWxlIHdob3NlIHBhdGggaXMgaW5cclxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfUEFUSF9fXHJcbiAqIFRoZSBkb3RzIGFyZSBpbiBwYXJlbnMgYmVjYXVzZSBjZXJ0YWluIGNvbXBpbGVycyAoVml0ZT8pIGNhbm5vdFxyXG4gKiBoYW5kbGUgc2VlaW5nIHRoYXQgdmFyaWFibGUgaW4gY29tbWVudHMuXHJcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy82ODM4XHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSA9ICgpID0+IHtcclxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHByb2Nlc3MuZW52ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlZmF1bHRzSnNvblN0cmluZyA9IHByb2Nlc3MuZW52Ll9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuICAgIGlmIChkZWZhdWx0c0pzb25TdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkZWZhdWx0c0pzb25TdHJpbmcpO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBnZXREZWZhdWx0c0Zyb21Db29raWUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBtYXRjaDtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2goL19fRklSRUJBU0VfREVGQVVMVFNfXz0oW147XSspLyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIFNvbWUgZW52aXJvbm1lbnRzIHN1Y2ggYXMgQW5ndWxhciBVbml2ZXJzYWwgU1NSIGhhdmUgYVxyXG4gICAgICAgIC8vIGBkb2N1bWVudGAgb2JqZWN0IGJ1dCBlcnJvciBvbiBhY2Nlc3NpbmcgYGRvY3VtZW50LmNvb2tpZWAuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjb2RlZCA9IG1hdGNoICYmIGJhc2U2NERlY29kZShtYXRjaFsxXSk7XHJcbiAgICByZXR1cm4gZGVjb2RlZCAmJiBKU09OLnBhcnNlKGRlY29kZWQpO1xyXG59O1xyXG4vKipcclxuICogR2V0IHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0LiBJdCBjaGVja3MgaW4gb3JkZXI6XHJcbiAqICgxKSBpZiBzdWNoIGFuIG9iamVjdCBleGlzdHMgYXMgYSBwcm9wZXJ0eSBvZiBgZ2xvYmFsVGhpc2BcclxuICogKDIpIGlmIHN1Y2ggYW4gb2JqZWN0IHdhcyBwcm92aWRlZCBvbiBhIHNoZWxsIGVudmlyb25tZW50IHZhcmlhYmxlXHJcbiAqICgzKSBpZiBzdWNoIGFuIG9iamVjdCBleGlzdHMgaW4gYSBjb29raWVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHMgPSAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoZ2V0RGVmYXVsdHNGcm9tR2xvYmFsKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21Db29raWUoKSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhdGNoLWFsbCBmb3IgYmVpbmcgdW5hYmxlIHRvIGdldCBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gZHVlXHJcbiAgICAgICAgICogdG8gYW55IGVudmlyb25tZW50IGNhc2Ugd2UgaGF2ZSBub3QgYWNjb3VudGVkIGZvci4gTG9nIHRvXHJcbiAgICAgICAgICogaW5mbyBpbnN0ZWFkIG9mIHN3YWxsb3dpbmcgc28gd2UgY2FuIGZpbmQgdGhlc2UgdW5rbm93biBjYXNlc1xyXG4gICAgICAgICAqIGFuZCBhZGQgcGF0aHMgZm9yIHRoZW0gaWYgbmVlZGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbyhgVW5hYmxlIHRvIGdldCBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gZHVlIHRvOiAke2V9YCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBlbXVsYXRvciBob3N0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgVVJMIGhvc3QgZm9ybWF0dGVkIGxpa2UgYDEyNy4wLjAuMTo5OTk5YCBvciBgWzo6MV06NDAwMGAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3QgPSAocHJvZHVjdE5hbWUpID0+IHsgdmFyIF9hLCBfYjsgcmV0dXJuIChfYiA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbXVsYXRvckhvc3RzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbcHJvZHVjdE5hbWVdOyB9O1xyXG4vKipcclxuICogUmV0dXJucyBlbXVsYXRvciBob3N0bmFtZSBhbmQgcG9ydCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIHBhaXIgb2YgaG9zdG5hbWUgYW5kIHBvcnQgbGlrZSBgW1wiOjoxXCIsIDQwMDBdYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0ID0gKHByb2R1Y3ROYW1lKSA9PiB7XHJcbiAgICBjb25zdCBob3N0ID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdChwcm9kdWN0TmFtZSk7XHJcbiAgICBpZiAoIWhvc3QpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VwYXJhdG9ySW5kZXggPSBob3N0Lmxhc3RJbmRleE9mKCc6Jyk7IC8vIEZpbmRpbmcgdGhlIGxhc3Qgc2luY2UgSVB2NiBhZGRyIGFsc28gaGFzIGNvbG9ucy5cclxuICAgIGlmIChzZXBhcmF0b3JJbmRleCA8PSAwIHx8IHNlcGFyYXRvckluZGV4ICsgMSA9PT0gaG9zdC5sZW5ndGgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaG9zdCAke2hvc3R9IHdpdGggbm8gc2VwYXJhdGUgaG9zdG5hbWUgYW5kIHBvcnQhYCk7XHJcbiAgICB9XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXHJcbiAgICBjb25zdCBwb3J0ID0gcGFyc2VJbnQoaG9zdC5zdWJzdHJpbmcoc2VwYXJhdG9ySW5kZXggKyAxKSwgMTApO1xyXG4gICAgaWYgKGhvc3RbMF0gPT09ICdbJykge1xyXG4gICAgICAgIC8vIEJyYWNrZXQtcXVvdGVkIGBbaXB2NmFkZHJdOnBvcnRgID0+IHJldHVybiBcImlwdjZhZGRyXCIgKHdpdGhvdXQgYnJhY2tldHMpLlxyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMSwgc2VwYXJhdG9ySW5kZXggLSAxKSwgcG9ydF07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDAsIHNlcGFyYXRvckluZGV4KSwgcG9ydF07XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEZpcmViYXNlIGFwcCBjb25maWcgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0QXBwQ29uZmlnID0gKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29uZmlnOyB9O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBleHBlcmltZW50YWwgc2V0dGluZyBvbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdCAocHJvcGVydGllc1xyXG4gKiBwcmVmaXhlZCBieSBcIl9cIilcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RXhwZXJpbWVudGFsU2V0dGluZyA9IChuYW1lKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtgXyR7bmFtZX1gXTsgfTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRGVmZXJyZWQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXHJcbiAgICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xyXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgd3JhcENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIChlcnJvciwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIEF0dGFjaGluZyBub29wIGhhbmRsZXIganVzdCBpbiBjYXNlIGRldmVsb3BlciB3YXNuJ3QgZXhwZWN0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIG9mIG91ciBjYWxsYmFja3MgZG9uJ3QgZXhwZWN0IGEgdmFsdWUgYW5kIG91ciBvd24gdGVzdHNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVNb2NrVXNlclRva2VuKHRva2VuLCBwcm9qZWN0SWQpIHtcclxuICAgIGlmICh0b2tlbi51aWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcInVpZFwiIGZpZWxkIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgbW9ja1VzZXJUb2tlbi4gUGxlYXNlIHVzZSBcInN1YlwiIGluc3RlYWQgZm9yIEZpcmViYXNlIEF1dGggVXNlciBJRC4nKTtcclxuICAgIH1cclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSBcIm5vbmVcIiBhcyB0aGUgYWxnb3JpdGhtLlxyXG4gICAgY29uc3QgaGVhZGVyID0ge1xyXG4gICAgICAgIGFsZzogJ25vbmUnLFxyXG4gICAgICAgIHR5cGU6ICdKV1QnXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RJZCB8fCAnZGVtby1wcm9qZWN0JztcclxuICAgIGNvbnN0IGlhdCA9IHRva2VuLmlhdCB8fCAwO1xyXG4gICAgY29uc3Qgc3ViID0gdG9rZW4uc3ViIHx8IHRva2VuLnVzZXJfaWQ7XHJcbiAgICBpZiAoIXN1Yikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7IFxyXG4gICAgICAgIC8vIFNldCBhbGwgcmVxdWlyZWQgZmllbGRzIHRvIGRlY2VudCBkZWZhdWx0c1xyXG4gICAgICAgIGlzczogYGh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS8ke3Byb2plY3R9YCwgYXVkOiBwcm9qZWN0LCBpYXQsIGV4cDogaWF0ICsgMzYwMCwgYXV0aF90aW1lOiBpYXQsIHN1YiwgdXNlcl9pZDogc3ViLCBmaXJlYmFzZToge1xyXG4gICAgICAgICAgICBzaWduX2luX3Byb3ZpZGVyOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgaWRlbnRpdGllczoge31cclxuICAgICAgICB9IH0sIHRva2VuKTtcclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSB0aGUgZW1wdHkgc3RyaW5nIGFzIGEgc2lnbmF0dXJlLlxyXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gJyc7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KGhlYWRlcikpLFxyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIF0uam9pbignLicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXHJcbiAqIEByZXR1cm4gdXNlciBhZ2VudCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldFVBKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cclxuICpcclxuICogRGVsaWJlcmF0ZWx5IGRvZXMgbm90IHJlbHkgb24gY2hlY2tpbmcgYGZpbGU6Ly9gIFVSTHMgKGFzIHRoaXMgZmFpbHMgUGhvbmVHYXBcclxuICogaW4gdGhlIFJpcHBsZSBlbXVsYXRvcikgbm9yIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseVxyXG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgU2V0dGluZyB1cCBhbiBicm9hZGx5IGFwcGxpY2FibGUgaW5kZXggc2lnbmF0dXJlIGZvciBXaW5kb3dcclxuICAgICAgICAvLyBqdXN0IHRvIGRlYWwgd2l0aCB0aGlzIGNhc2Ugd291bGQgcHJvYmFibHkgYmUgYSBiYWQgaWRlYS5cclxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxyXG4gICAgICAgIC9pb3N8aXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrYmVycnl8aWVtb2JpbGUvaS50ZXN0KGdldFVBKCkpKTtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IE5vZGUuanMuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkIG9yIHNwZWNpZmllZC5cclxuICovXHJcbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xyXG5mdW5jdGlvbiBpc05vZGUoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBmb3JjZUVudmlyb25tZW50ID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvcmNlRW52aXJvbm1lbnQ7XHJcbiAgICBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ25vZGUnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChmb3JjZUVudmlyb25tZW50ID09PSAnYnJvd3NlcicpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XHJcbn1cclxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgaW5kZXhlZERCID09PSAnb2JqZWN0JztcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XHJcbiAqIGlmIGVycm9ycyBvY2N1ciBkdXJpbmcgdGhlIGRhdGFiYXNlIG9wZW4gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XHJcbiAqIHByaXZhdGUgYnJvd3NpbmcpXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgcHJlRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBEQl9DSEVDS19OQU1FID0gJ3ZhbGlkYXRlLWJyb3dzZXItY29udGV4dC1mb3ItaW5kZXhlZGRiLWFuYWx5dGljcy1tb2R1bGUnO1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3BlbihEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRhdGFiYXNlIG9ubHkgd2hlbiBpdCBkb2Vzbid0IHByZS1leGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKChfYSA9IHJlcXVlc3QuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlKSB8fCAnJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3Mgd2hldGhlciBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqL1xyXG5mdW5jdGlvbiBhcmVDb29raWVzRW5hYmxlZCgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTdGFuZGFyZGl6ZWQgRmlyZWJhc2UgRXJyb3IuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKlxyXG4gKiAgIC8vIFR5cGVzY3JpcHQgc3RyaW5nIGxpdGVyYWxzIGZvciB0eXBlLXNhZmUgY29kZXNcclxuICogICB0eXBlIEVyciA9XHJcbiAqICAgICAndW5rbm93bicgfFxyXG4gKiAgICAgJ29iamVjdC1ub3QtZm91bmQnXHJcbiAqICAgICA7XHJcbiAqXHJcbiAqICAgLy8gQ2xvc3VyZSBlbnVtIGZvciB0eXBlLXNhZmUgZXJyb3IgY29kZXNcclxuICogICAvLyBhdC1lbnVtIHtzdHJpbmd9XHJcbiAqICAgdmFyIEVyciA9IHtcclxuICogICAgIFVOS05PV046ICd1bmtub3duJyxcclxuICogICAgIE9CSkVDVF9OT1RfRk9VTkQ6ICdvYmplY3Qtbm90LWZvdW5kJyxcclxuICogICB9XHJcbiAqXHJcbiAqICAgbGV0IGVycm9yczogTWFwPEVyciwgc3RyaW5nPiA9IHtcclxuICogICAgICdnZW5lcmljLWVycm9yJzogXCJVbmtub3duIGVycm9yXCIsXHJcbiAqICAgICAnZmlsZS1ub3QtZm91bmQnOiBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IHskZmlsZX1cIixcclxuICogICB9O1xyXG4gKlxyXG4gKiAgIC8vIFR5cGUtc2FmZSBmdW5jdGlvbiAtIG11c3QgcGFzcyBhIHZhbGlkIGVycm9yIGNvZGUgYXMgcGFyYW0uXHJcbiAqICAgbGV0IGVycm9yID0gbmV3IEVycm9yRmFjdG9yeTxFcnI+KCdzZXJ2aWNlJywgJ1NlcnZpY2UnLCBlcnJvcnMpO1xyXG4gKlxyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuR0VORVJJQyk7XHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5GSUxFX05PVF9GT1VORCwgeydmaWxlJzogZmlsZU5hbWV9KTtcclxuICogICAuLi5cclxuICogICAvLyBTZXJ2aWNlOiBDb3VsZCBub3QgZmlsZSBmaWxlOiBmb28udHh0IChzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kKS5cclxuICpcclxuICogICBjYXRjaCAoZSkge1xyXG4gKiAgICAgYXNzZXJ0KGUubWVzc2FnZSA9PT0gXCJDb3VsZCBub3QgZmluZCBmaWxlOiBmb28udHh0LlwiKTtcclxuICogICAgIGlmICgoZSBhcyBGaXJlYmFzZUVycm9yKT8uY29kZSA9PT0gJ3NlcnZpY2UvZmlsZS1ub3QtZm91bmQnKSB7XHJcbiAqICAgICAgIGNvbnNvbGUubG9nKFwiQ291bGQgbm90IHJlYWQgZmlsZTogXCIgKyBlWydmaWxlJ10pO1xyXG4gKiAgICAgfVxyXG4gKiAgIH1cclxuICovXHJcbmNvbnN0IEVSUk9SX05BTUUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IjQ3VzdG9tX0Vycm9yX1R5cGVzXHJcbmNsYXNzIEZpcmViYXNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgIC8qKiBUaGUgZXJyb3IgY29kZSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGNvZGUsIG1lc3NhZ2UsIFxyXG4gICAgLyoqIEN1c3RvbSBkYXRhIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0gY3VzdG9tRGF0YTtcclxuICAgICAgICAvKiogVGhlIGN1c3RvbSBuYW1lIGZvciBhbGwgRmlyZWJhc2VFcnJvcnMuICovXHJcbiAgICAgICAgdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcclxuICAgICAgICAvLyBGaXggRm9yIEVTNVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cclxuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jbGFzcyBFcnJvckZhY3Rvcnkge1xyXG4gICAgY29uc3RydWN0b3Ioc2VydmljZSwgc2VydmljZU5hbWUsIGVycm9ycykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKGNvZGUsIC4uLmRhdGEpIHtcclxuICAgICAgICBjb25zdCBjdXN0b21EYXRhID0gZGF0YVswXSB8fCB7fTtcclxuICAgICAgICBjb25zdCBmdWxsQ29kZSA9IGAke3RoaXMuc2VydmljZX0vJHtjb2RlfWA7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGVtcGxhdGUgPyByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGN1c3RvbURhdGEpIDogJ0Vycm9yJztcclxuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXHJcbiAgICAgICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBgJHt0aGlzLnNlcnZpY2VOYW1lfTogJHttZXNzYWdlfSAoJHtmdWxsQ29kZX0pLmA7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UsIGN1c3RvbURhdGEpO1xyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIChfLCBrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGRhdGFba2V5XTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCA/IFN0cmluZyh2YWx1ZSkgOiBgPCR7a2V5fT8+YDtcclxuICAgIH0pO1xyXG59XHJcbmNvbnN0IFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEV2YWx1YXRlcyBhIEpTT04gc3RyaW5nIGludG8gYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXHJcbiAqIEByZXR1cm4geyp9IFRoZSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBKU09OLlxyXG4gKi9cclxuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50aW5nIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhc2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cclxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaW5naWZ5KGRhdGEpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGxldCBoZWFkZXIgPSB7fSwgY2xhaW1zID0ge30sIGRhdGEgPSB7fSwgc2lnbmF0dXJlID0gJyc7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgICAgICBoZWFkZXIgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMF0pIHx8ICcnKTtcclxuICAgICAgICBjbGFpbXMgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMV0pIHx8ICcnKTtcclxuICAgICAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcclxuICAgICAgICBkYXRhID0gY2xhaW1zWydkJ10gfHwge307XHJcbiAgICAgICAgZGVsZXRlIGNsYWltc1snZCddO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFkZXIsXHJcbiAgICAgICAgY2xhaW1zLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICB9O1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyB0aW1lLWJhc2VkIGNsYWltcy4gV2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGVcclxuICogdG9rZW4gaXMgd2l0aGluIHRoZSB0aW1lIHdpbmRvdyBhdXRob3JpemVkIGJ5IHRoZSAnbmJmJyAobm90LWJlZm9yZSkgYW5kICdpYXQnIChpc3N1ZWQtYXQpIGNsYWltcy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZFRpbWVzdGFtcCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBjb25zdCBub3cgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICBsZXQgdmFsaWRTaW5jZSA9IDAsIHZhbGlkVW50aWwgPSAwO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnbmJmJykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snbmJmJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSBjbGFpbXNbJ2V4cCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdG9rZW4gd2lsbCBleHBpcmUgYWZ0ZXIgMjRoIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCEhbm93ICYmXHJcbiAgICAgICAgISF2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgISF2YWxpZFVudGlsICYmXHJcbiAgICAgICAgbm93ID49IHZhbGlkU2luY2UgJiZcclxuICAgICAgICBub3cgPD0gdmFsaWRVbnRpbCk7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIHJldHVybnMgaXRzIGlzc3VlZCBhdCB0aW1lIGlmIHZhbGlkLCBudWxsIG90aGVyd2lzZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBudWxsIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNzdWVkQXRUaW1lID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYWltc1snaWF0J107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUodG9rZW4pLCBjbGFpbXMgPSBkZWNvZGVkLmNsYWltcztcclxuICAgIHJldHVybiAhIWNsYWltcyAmJiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpO1xyXG59O1xyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltc1snYWRtaW4nXSA9PT0gdHJ1ZTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xyXG59XHJcbmZ1bmN0aW9uIHNhZmVHZXQob2JqLCBrZXkpIHtcclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9ialtrZXldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG1hcChvYmosIGZuLCBjb250ZXh0T2JqKSB7XHJcbiAgICBjb25zdCByZXMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJlc1trZXldID0gZm4uY2FsbChjb250ZXh0T2JqLCBvYmpba2V5XSwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn1cclxuLyoqXHJcbiAqIERlZXAgZXF1YWwgdHdvIG9iamVjdHMuIFN1cHBvcnQgQXJyYXlzIGFuZCBPYmplY3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIpIHtcclxuICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xyXG4gICAgY29uc3QgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcclxuICAgIGZvciAoY29uc3QgayBvZiBhS2V5cykge1xyXG4gICAgICAgIGlmICghYktleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhUHJvcCA9IGFba107XHJcbiAgICAgICAgY29uc3QgYlByb3AgPSBiW2tdO1xyXG4gICAgICAgIGlmIChpc09iamVjdChhUHJvcCkgJiYgaXNPYmplY3QoYlByb3ApKSB7XHJcbiAgICAgICAgICAgIGlmICghZGVlcEVxdWFsKGFQcm9wLCBiUHJvcCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhUHJvcCAhPT0gYlByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgayBvZiBiS2V5cykge1xyXG4gICAgICAgIGlmICghYUtleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGlzT2JqZWN0KHRoaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmVqZWN0cyBpZiB0aGUgZ2l2ZW4gcHJvbWlzZSBkb2Vzbid0IHJlc29sdmUgaW4gdGltZUluTVMgbWlsbGlzZWNvbmRzLlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIHByb21pc2VXaXRoVGltZW91dChwcm9taXNlLCB0aW1lSW5NUyA9IDIwMDApIHtcclxuICAgIGNvbnN0IGRlZmVycmVkUHJvbWlzZSA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiBkZWZlcnJlZFByb21pc2UucmVqZWN0KCd0aW1lb3V0IScpLCB0aW1lSW5NUyk7XHJcbiAgICBwcm9taXNlLnRoZW4oZGVmZXJyZWRQcm9taXNlLnJlc29sdmUsIGRlZmVycmVkUHJvbWlzZS5yZWplY3QpO1xyXG4gICAgcmV0dXJuIGRlZmVycmVkUHJvbWlzZS5wcm9taXNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5c3RyaW5nUGFyYW1zKSkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGFycmF5VmFsID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFycmF5VmFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcclxufVxyXG4vKipcclxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcclxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xyXG4gICAgY29uc3Qgb2JqID0ge307XHJcbiAgICBjb25zdCB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaCh0b2tlbiA9PiB7XHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHRva2VuLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG4vKipcclxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpIHtcclxuICAgIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xyXG4gICAgaWYgKCFxdWVyeVN0YXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XHJcbiAgICByZXR1cm4gdXJsLnN1YnN0cmluZyhxdWVyeVN0YXJ0LCBmcmFnbWVudFN0YXJ0ID4gMCA/IGZyYWdtZW50U3RhcnQgOiB1bmRlZmluZWQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaC5cclxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcclxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcclxuICogICBzaGExLnVwZGF0ZShieXRlcyk7XHJcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xyXG4gKlxyXG4gKiBQZXJmb3JtYW5jZTpcclxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcclxuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcclxuICpcclxuICovXHJcbi8qKlxyXG4gKiBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2ggY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGZpbmFsXHJcbiAqIEBzdHJ1Y3RcclxuICovXHJcbmNsYXNzIFNoYTEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGJ1ZiBCbG9jayB0byBjb21wcmVzcy5cclxuICAgICAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29tcHJlc3NfKGJ1Ziwgb2Zmc2V0KSB7XHJcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgVyA9IHRoaXMuV187XHJcbiAgICAgICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcclxuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0KSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE2OyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICBsZXQgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIGxldCBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgbGV0IGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICBsZXQgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIGxldCBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBlID0gZDtcclxuICAgICAgICAgICAgZCA9IGM7XHJcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGIgPSBhO1xyXG4gICAgICAgICAgICBhID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAodGhpcy5jaGFpbl9bMF0gKyBhKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAodGhpcy5jaGFpbl9bM10gKyBkKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoYnl0ZXMsIGxlbmd0aCkge1xyXG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXHJcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcclxuICAgICAgICBsZXQgaW5idWYgPSB0aGlzLmluYnVmXztcclxuICAgICAgICAvLyBUaGUgb3V0ZXIgd2hpbGUgbG9vcCBzaG91bGQgZXhlY3V0ZSBhdCBtb3N0IHR3aWNlLlxyXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxyXG4gICAgICAgICAgICAvLyBpbnB1dCBidWZmZXIgKGFzc3VtaW5nIGl0IGNvbnRhaW5zIHN1ZmZpY2llbnQgZGF0YSkuIFRoaXMgZ2l2ZXMgfjI1JVxyXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cclxuICAgICAgICAgICAgaWYgKGluYnVmID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnl0ZXMsIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzLmNoYXJDb2RlQXQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXNbbl07XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5idWZfID0gaW5idWY7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgLyoqIEBvdmVycmlkZSAqL1xyXG4gICAgZGlnZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIGxldCB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBIZWxwZXIgdG8gbWFrZSBhIFN1YnNjcmliZSBmdW5jdGlvbiAoanVzdCBsaWtlIFByb21pc2UgaGVscHMgbWFrZSBhXHJcbiAqIFRoZW5hYmxlKS5cclxuICpcclxuICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAqICAgICBhcyBhIHByb3h5LlxyXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgIGNvbnN0IHByb3h5ID0gbmV3IE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpO1xyXG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcclxufVxyXG4vKipcclxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxyXG4gKiBmdW5jdGlvbi5cclxuICovXHJcbmNsYXNzIE9ic2VydmVyUHJveHkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICAgICAqICAgICBhcyBhIHByb3h5LlxyXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBleGVjdXRvcih0aGlzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuZXh0KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgY29tcGxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cclxuICAgICAqXHJcbiAgICAgKiAtIFdlIHJlcXVpcmUgdGhhdCBubyBldmVudCBpcyBzZW50IHRvIGEgc3Vic2NyaWJlciBzeWNocm9ub3VzbHkgdG8gdGhlaXJcclxuICAgICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cclxuICAgICAqL1xyXG4gICAgc3Vic2NyaWJlKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgICAgICBsZXQgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5hbEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHRoaXMuZmluYWxFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICB1bnN1YnNjcmliZU9uZShpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoT2JzZXJ2ZXIoZm4pIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxyXG4gICAgICAgIC8vIHRoaXMub2JzZXJ2ZXJzIHdpbGwgYmVjb21lIHVuZGVmaW5lZC5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcclxuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cclxuICAgIHNlbmRPbmUoaSwgZm4pIHtcclxuICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVycyAhPT0gdW5kZWZpbmVkICYmIHRoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ic2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciB0byBjb25zb2xlLiBiLzMxNDA0ODA2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZShlcnIpIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluYWxFcnJvciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKiogVHVybiBzeW5jaHJvbm91cyBmdW5jdGlvbiBpbnRvIG9uZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmZ1bmN0aW9uIGFzeW5jKGZuLCBvbkVycm9yKSB7XHJcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBmbiguLi5hcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmogJiYgdHlwZW9mIG9ialttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBub29wKCkge1xyXG4gICAgLy8gZG8gbm90aGluZ1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cclxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gbWF4Q291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50IHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxyXG4gKi9cclxuY29uc3QgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIGxldCBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZm5OYW1lICtcclxuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgYXJnQ291bnQgK1xyXG4gICAgICAgICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXHJcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcclxuICAgICAgICAgICAgYXJnRXJyb3IgK1xyXG4gICAgICAgICAgICAnLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBhcmdOYW1lIFRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudFxyXG4gKiBAcmV0dXJuIFRoZSBwcmVmaXggdG8gYWRkIHRvIHRoZSBlcnJvciB0aHJvd24gZm9yIHZhbGlkYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ05hbWUpIHtcclxuICAgIHJldHVybiBgJHtmbk5hbWV9IGZhaWxlZDogJHthcmdOYW1lfSBhcmd1bWVudCBgO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm5OYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXHJcbiAqIEBwYXJhbSBvcHRpb25hbFxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE5hbWUsIFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5jYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROYW1lLCBjb250ZXh0LCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XHJcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXHJcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cclxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXHJcbi8vIGZyb21DaGFyQ29kZSByZXR1cm5zIHRoZSBVVEYtMTYgZW5jb2Rpbmcgb2YgYSBjaGFyYWN0ZXIgLSBzbyBzb21lIFVuaWNvZGUgY2hhcmFjdGVyc1xyXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XHJcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxyXG4vLyBwYWlyKS5cclxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGFzc2VydChpIDwgc3RyLmxlbmd0aCwgJ1N1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLicpO1xyXG4gICAgICAgICAgICBjb25zdCBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIHAgKz0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cclxuICAgICAgICAgICAgcCArPSA0O1xyXG4gICAgICAgICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcCArPSAzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29waWVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcclxuICogR2VuZXJhdGVzIGEgbmV3IHV1aWQuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IHV1aWR2NCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGMgPT4ge1xyXG4gICAgICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDAsIHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMpIHwgMHg4O1xyXG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgIH0pO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gZXhwb25lbnRpYWxseSBpbmNyZWFzZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcclxuLyoqXHJcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cclxuICogU2hvdWxkIGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAxLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdG8gaW5jcmVhc2UgdG8uXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxyXG4vKipcclxuICogVGhlIHBlcmNlbnRhZ2Ugb2YgYmFja29mZiB0aW1lIHRvIHJhbmRvbWl6ZSBieS5cclxuICogU2VlXHJcbiAqIGh0dHA6Ly9nby9zYWZlLWNsaWVudC1iZWhhdmlvciNzdGVwLTEtZGV0ZXJtaW5lLXRoZS1hcHByb3ByaWF0ZS1yZXRyeS1pbnRlcnZhbC10by1oYW5kbGUtc3Bpa2UtdHJhZmZpY1xyXG4gKiBmb3IgY29udGV4dC5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcclxuLyoqXHJcbiAqIEJhc2VkIG9uIHRoZSBiYWNrb2ZmIG1ldGhvZCBmcm9tXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9tYXRoL2V4cG9uZW50aWFsYmFja29mZi5qcy5cclxuICogRXh0cmFjdGVkIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG1ldGFkYXRhIGFuZCBhIHN0YXRlZnVsIEV4cG9uZW50aWFsQmFja29mZiBvYmplY3QgYXJvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMsIGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SKSB7XHJcbiAgICAvLyBDYWxjdWxhdGVzIGFuIGV4cG9uZW50aWFsbHkgaW5jcmVhc2luZyB2YWx1ZS5cclxuICAgIC8vIERldmlhdGlvbjogY2FsY3VsYXRlcyB2YWx1ZSBmcm9tIGNvdW50IGFuZCBhIGNvbnN0YW50IGludGVydmFsLCBzbyB3ZSBvbmx5IG5lZWQgdG8gc2F2ZSB2YWx1ZVxyXG4gICAgLy8gYW5kIGNvdW50IHRvIHJlc3RvcmUgc3RhdGUuXHJcbiAgICBjb25zdCBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xyXG4gICAgLy8gQSByYW5kb20gXCJmdXp6XCIgdG8gYXZvaWQgd2F2ZXMgb2YgcmV0cmllcy5cclxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxyXG4gICAgY29uc3QgcmFuZG9tV2FpdCA9IE1hdGgucm91bmQoXHJcbiAgICAvLyBBIGZyYWN0aW9uIG9mIHRoZSBiYWNrb2ZmIHZhbHVlIHRvIGFkZC9zdWJ0cmFjdC5cclxuICAgIC8vIERldmlhdGlvbjogY2hhbmdlcyBtdWx0aXBsaWNhdGlvbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5LlxyXG4gICAgUkFORE9NX0ZBQ1RPUiAqXHJcbiAgICAgICAgY3VyckJhc2VWYWx1ZSAqXHJcbiAgICAgICAgLy8gQSByYW5kb20gZmxvYXQgKHJvdW5kZWQgdG8gaW50IGJ5IE1hdGgucm91bmQgYWJvdmUpIGluIHRoZSByYW5nZSBbLTEsIDFdLiBEZXRlcm1pbmVzXHJcbiAgICAgICAgLy8gaWYgd2UgYWRkIG9yIHN1YnRyYWN0LlxyXG4gICAgICAgIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqXHJcbiAgICAgICAgMik7XHJcbiAgICAvLyBMaW1pdHMgYmFja29mZiB0byBtYXggdG8gYXZvaWQgZWZmZWN0aXZlbHkgcGVybWFuZW50IGJhY2tvZmYuXHJcbiAgICByZXR1cm4gTWF0aC5taW4oTUFYX1ZBTFVFX01JTExJUywgY3VyckJhc2VWYWx1ZSArIHJhbmRvbVdhaXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlIEVuZ2xpc2ggb3JkaW5hbCBsZXR0ZXJzIGFmdGVyIGEgbnVtYmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBvcmRpbmFsKGkpIHtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2l9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xyXG59XHJcbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XHJcbiAgICBpID0gTWF0aC5hYnMoaSk7XHJcbiAgICBjb25zdCBjZW50ID0gaSAlIDEwMDtcclxuICAgIGlmIChjZW50ID49IDEwICYmIGNlbnQgPD0gMjApIHtcclxuICAgICAgICByZXR1cm4gJ3RoJztcclxuICAgIH1cclxuICAgIGNvbnN0IGRlYyA9IGkgJSAxMDtcclxuICAgIGlmIChkZWMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gJ3N0JztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gJ25kJztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDMpIHtcclxuICAgICAgICByZXR1cm4gJ3JkJztcclxuICAgIH1cclxuICAgIHJldHVybiAndGgnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1vZHVsYXJJbnN0YW5jZShzZXJ2aWNlKSB7XHJcbiAgICBpZiAoc2VydmljZSAmJiBzZXJ2aWNlLl9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENPTlNUQU5UUywgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IsIERlZmVycmVkLCBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IsIE1BWF9WQUxVRV9NSUxMSVMsIFJBTkRPTV9GQUNUT1IsIFNoYTEsIGFyZUNvb2tpZXNFbmFibGVkLCBhc3NlcnQsIGFzc2VydGlvbkVycm9yLCBhc3luYywgYmFzZTY0LCBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVNb2NrVXNlclRva2VuLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFcXVhbCwgZGVlcEV4dGVuZCwgZXJyb3JQcmVmaXgsIGV4dHJhY3RRdWVyeXN0cmluZywgZ2V0RGVmYXVsdEFwcENvbmZpZywgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0LCBnZXREZWZhdWx0cywgZ2V0RXhwZXJpbWVudGFsU2V0dGluZywgZ2V0R2xvYmFsLCBnZXRNb2R1bGFySW5zdGFuY2UsIGdldFVBLCBpc0FkbWluLCBpc0Jyb3dzZXIsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNzdWVkQXRUaW1lLCBqc29uRXZhbCwgbWFwLCBvcmRpbmFsLCBwcm9taXNlV2l0aFRpbWVvdXQsIHF1ZXJ5c3RyaW5nLCBxdWVyeXN0cmluZ0RlY29kZSwgc2FmZUdldCwgc3RyaW5nTGVuZ3RoLCBzdHJpbmdUb0J5dGVBcnJheSwgc3RyaW5naWZ5LCB1dWlkdjQsIHZhbGlkYXRlQXJnQ291bnQsIHZhbGlkYXRlQ2FsbGJhY2ssIHZhbGlkYXRlQ29udGV4dE9iamVjdCwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgdmFsaWRhdGVOYW1lc3BhY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgcHVibGljIHNlcnZpY2UgbmFtZSwgZS5nLiBhcHAsIGF1dGgsIGZpcmVzdG9yZSwgZGF0YWJhc2VcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxyXG4gICAgICogQHBhcmFtIHR5cGUgd2hldGhlciB0aGUgc2VydmljZSBwcm92aWRlZCBieSB0aGUgY29tcG9uZW50IGlzIHB1YmxpYyBvciBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUZhY3RvcnkgPSBpbnN0YW5jZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5MQVpZICovO1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFudGlhdGlvbk1vZGUobW9kZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0TXVsdGlwbGVJbnN0YW5jZXMobXVsdGlwbGVJbnN0YW5jZXMpIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gbXVsdGlwbGVJbnN0YW5jZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRTZXJ2aWNlUHJvcHMocHJvcHMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gY2FsbGJhY2s7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXHJcbiAqIE5hbWVTZXJ2aWNlTWFwcGluZ1tUXSBpcyBhbiBhbGlhcyBmb3IgdGhlIHR5cGUgb2YgdGhlIGluc3RhbmNlXHJcbiAqL1xyXG5jbGFzcyBQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQSBwcm92aWRlciBjYW4gcHJvdmlkZSBtdWxpdHBsZSBpbnN0YW5jZXMgb2YgYSBzZXJ2aWNlXHJcbiAgICAgKiBpZiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyBpcyB0cnVlLlxyXG4gICAgICovXHJcbiAgICBnZXQoaWRlbnRpZmllcikge1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZGVmZXJyZWQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHRoZSBzZXJ2aWNlIGlmIGl0IGNhbiBiZSBhdXRvLWluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpLnByb21pc2U7XHJcbiAgICB9XHJcbiAgICBnZXRJbW1lZGlhdGUob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbmFsID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9wdGlvbmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEluIGNhc2UgYSBjb21wb25lbnQgaXMgbm90IGluaXRpYWxpemVkIGFuZCBzaG91bGQvY2FuIG5vdCBiZSBhdXRvLWluaXRpYWxpemVkIGF0IHRoZSBtb21lbnQsIHJldHVybiBudWxsIGlmIHRoZSBvcHRpb25hbCBmbGFnIGlzIHNldCwgb3IgdGhyb3dcclxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBTZXJ2aWNlICR7dGhpcy5uYW1lfSBpcyBub3QgYXZhaWxhYmxlYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRDb21wb25lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgc2V0Q29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGlmIChjb21wb25lbnQubmFtZSAhPT0gdGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNtYXRjaGluZyBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZm9yIFByb3ZpZGVyICR7dGhpcy5uYW1lfS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgZm9yICR7dGhpcy5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIC8vIHJldHVybiBlYXJseSB3aXRob3V0IGF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGlmIHRoZSBjb21wb25lbnQgcmVxdWlyZXMgZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gKGNhbGxpbmcgYFByb3ZpZGVyLmluaXRpYWxpemUoKWApXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZSBhIGZhdGFsIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgaWYgd2UgbmVlZCB0byBtYWtlIGl0IGNvbmZpZ3VyYWJsZSwgYmVjYXVzZSBzb21lIGNvbXBvbmVudCBtYXkgd2FudCB0byBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXHJcbiAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcclxuICAgICAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xlYXJJbnN0YW5jZShpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcclxuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBtYXJrIHRoZSBwcm92aWRlciBhcyBkZWxldGVkP1xyXG4gICAgYXN5bmMgZGVsZXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdJTlRFUk5BTCcgaW4gc2VydmljZSkgLy8gbGVnYWN5IHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuSU5URVJOQUwuZGVsZXRlKCkpLFxyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdfZGVsZXRlJyBpbiBzZXJ2aWNlKSAvLyBtb2R1bGFyaXplZCBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLl9kZWxldGUoKSlcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIGlzQ29tcG9uZW50U2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCAhPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaXNJbml0aWFsaXplZChpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmhhcyhpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIGdldE9wdGlvbnMoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc09wdGlvbnMuZ2V0KGlkZW50aWZpZXIpIHx8IHt9O1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZShvcHRzID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSB7fSB9ID0gb3B0cztcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdHMuaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgJHt0aGlzLm5hbWV9KCR7bm9ybWFsaXplZElkZW50aWZpZXJ9KSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgJHt0aGlzLm5hbWV9IGhhcyBub3QgYmVlbiByZWdpc3RlcmVkIHlldGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXIsXHJcbiAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByZXNvbHZlIGFueSBwZW5kaW5nIHByb21pc2Ugd2FpdGluZyBmb3IgdGhlIHNlcnZpY2UgaW5zdGFuY2VcclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZElkZW50aWZpZXIgPT09IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCAgYWZ0ZXIgdGhlIHByb3ZpZGVyIGhhcyBiZWVuIGluaXRpYWxpemVkIGJ5IGNhbGxpbmcgcHJvdmlkZXIuaW5pdGlhbGl6ZSgpLlxyXG4gICAgICogVGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgU1lOQ0hST05PVVNMWSwgc28gaXQgc2hvdWxkIG5vdCBleGVjdXRlIGFueSBsb25ncnVubmluZyB0YXNrcyBpbiBvcmRlciB0byBub3QgYmxvY2sgdGhlIHByb2dyYW0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gb3B0aW9uYWwgaW5zdGFuY2UgaWRlbnRpZmllclxyXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB0byB1bnJlZ2lzdGVyIHRoZSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBvbkluaXQoY2FsbGJhY2ssIGlkZW50aWZpZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0NhbGxiYWNrcyA9IChfYSA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChub3JtYWxpemVkSWRlbnRpZmllcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBTZXQoKTtcclxuICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZXhpc3RpbmdDYWxsYmFja3MpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGV4aXN0aW5nSW5zdGFuY2UsIG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuZGVsZXRlKGNhbGxiYWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2Ugb25Jbml0IGNhbGxiYWNrcyBzeW5jaHJvbm91c2x5XHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgdGhlIHNlcnZpY2UgaW5zdGFuY2VgXHJcbiAgICAgKi9cclxuICAgIGludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaWRlbnRpZmllcikge1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbnN0YW5jZSwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluaXQgY2FsbGJhY2tcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMgPSB7fSB9KSB7XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IHRoaXMuY29tcG9uZW50Lmluc3RhbmNlRmFjdG9yeSh0aGlzLmNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cclxuICAgICAgICAgICAgICogTm90ZSB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCBpcyBkaWZmZXJlbnQsIHdoaWNoIGlzIHVzZWQgYnkgdGhlIGNvbXBvbmVudCBjcmVhdG9yLFxyXG4gICAgICAgICAgICAgKiB3aGlsZSBvbkluaXQgbGlzdGVuZXJzIGFyZSByZWdpc3RlcmVkIGJ5IGNvbnN1bWVycyBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9yZGVyIGlzIGltcG9ydGFudFxyXG4gICAgICAgICAgICAgKiBvbkluc3RhbmNlQ3JlYXRlZCgpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpOyB3aGljaFxyXG4gICAgICAgICAgICAgKiBtYWtlcyBgaXNJbml0aWFsaXplZCgpYCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCh0aGlzLmNvbnRhaW5lciwgaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluc3RhbmNlQ3JlYXRlZENhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG91bGRBdXRvSW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICByZXR1cm4gKCEhdGhpcy5jb21wb25lbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgIT09IFwiRVhQTElDSVRcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5FWFBMSUNJVCAqLyk7XHJcbiAgICB9XHJcbn1cclxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuZnVuY3Rpb24gbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikge1xyXG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IERFRkFVTFRfRU5UUllfTkFNRSA/IHVuZGVmaW5lZCA6IGlkZW50aWZpZXI7XHJcbn1cclxuZnVuY3Rpb24gaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBjb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgPT09IFwiRUFHRVJcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5FQUdFUiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50Q29udGFpbmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcclxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xyXG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXHJcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cclxuICAgICAqL1xyXG4gICAgYWRkQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggJHt0aGlzLm5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhlIGV4aXN0aW5nIHByb3ZpZGVyIGZyb20gdGhlIGNvbnRhaW5lciwgc28gd2UgY2FuIHJlZ2lzdGVyIHRoZSBuZXcgY29tcG9uZW50XHJcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJzLmRlbGV0ZShjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcclxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcclxuICAgICAqIHRoZW1zZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIGdldFByb3ZpZGVyKG5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVycy5nZXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNyZWF0ZSBhIFByb3ZpZGVyIGZvciBhIHNlcnZpY2UgdGhhdCBoYXNuJ3QgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlXHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9XHJcbiAgICBnZXRQcm92aWRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyLCBQcm92aWRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG5jb25zdCBpbnN0YW5jZXMgPSBbXTtcclxuLyoqXHJcbiAqIFRoZSBKUyBTREsgc3VwcG9ydHMgNSBsb2cgbGV2ZWxzIGFuZCBhbHNvIGFsbG93cyBhIHVzZXIgdGhlIGFiaWxpdHkgdG9cclxuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgb3JkZXIgaXMgYSBmb2xsb3dzOlxyXG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCB3aWxsIGJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXHJcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxyXG4gKi9cclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV0FSTlwiXSA9IDNdID0gXCJXQVJOXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxuY29uc3QgbGV2ZWxTdHJpbmdUb0VudW0gPSB7XHJcbiAgICAnZGVidWcnOiBMb2dMZXZlbC5ERUJVRyxcclxuICAgICd2ZXJib3NlJzogTG9nTGV2ZWwuVkVSQk9TRSxcclxuICAgICdpbmZvJzogTG9nTGV2ZWwuSU5GTyxcclxuICAgICd3YXJuJzogTG9nTGV2ZWwuV0FSTixcclxuICAgICdlcnJvcic6IExvZ0xldmVsLkVSUk9SLFxyXG4gICAgJ3NpbGVudCc6IExvZ0xldmVsLlNJTEVOVFxyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcclxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxyXG4gKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gKi9cclxuY29uc3QgQ29uc29sZU1ldGhvZCA9IHtcclxuICAgIFtMb2dMZXZlbC5ERUJVR106ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLlZFUkJPU0VdOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5JTkZPXTogJ2luZm8nLFxyXG4gICAgW0xvZ0xldmVsLldBUk5dOiAnd2FybicsXHJcbiAgICBbTG9nTGV2ZWwuRVJST1JdOiAnZXJyb3InXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgaGFuZGxlciB3aWxsIGZvcndhcmQgREVCVUcsIFZFUkJPU0UsIElORk8sIFdBUk4sIGFuZCBFUlJPUlxyXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxyXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxvZ1R5cGUsIC4uLmFyZ3MpID0+IHtcclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSBDb25zb2xlTWV0aG9kW2xvZ1R5cGVdO1xyXG4gICAgaWYgKG1ldGhvZCkge1xyXG4gICAgICAgIGNvbnNvbGVbbWV0aG9kXShgWyR7bm93fV0gICR7aW5zdGFuY2UubmFtZX06YCwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogJHtsb2dUeXBlfSlgKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBsZXZlbCBvZiB0aGUgZ2l2ZW4gTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgb3B0aW9uYWwsIGFkZGl0aW9uYWwsIHVzZXItZGVmaW5lZCBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5zdGFuY2VzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0xldmVsO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIGlmICghKHZhbCBpbiBMb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cclxuICAgIHNldExvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyBsZXZlbFN0cmluZ1RvRW51bVt2YWxdIDogdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlckxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IHVzZXJMb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgZGVidWcoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGxvZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGluZm8oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICB3YXJuKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgaW5zdGFuY2VzLmZvckVhY2goaW5zdCA9PiB7XHJcbiAgICAgICAgaW5zdC5zZXRMb2dMZXZlbChsZXZlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcclxuICAgICAgICBsZXQgY3VzdG9tTG9nTGV2ZWwgPSBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGV2ZWwpIHtcclxuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvZ0NhbGxiYWNrID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsZXZlbCwgLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGFyZ3NcclxuICAgICAgICAgICAgICAgICAgICAubWFwKGFyZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGFyZyA9PiBhcmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+PSAoY3VzdG9tTG9nTGV2ZWwgIT09IG51bGwgJiYgY3VzdG9tTG9nTGV2ZWwgIT09IHZvaWQgMCA/IGN1c3RvbUxvZ0xldmVsIDogaW5zdGFuY2UubG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogTG9nTGV2ZWxbbGV2ZWxdLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGluc3RhbmNlLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwsIHNldFVzZXJMb2dIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoKGMpID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xuICAgIHJldHVybiAoaWRiUHJveHlhYmxlVHlwZXMgfHxcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW1xuICAgICAgICAgICAgSURCRGF0YWJhc2UsXG4gICAgICAgICAgICBJREJPYmplY3RTdG9yZSxcbiAgICAgICAgICAgIElEQkluZGV4LFxuICAgICAgICAgICAgSURCQ3Vyc29yLFxuICAgICAgICAgICAgSURCVHJhbnNhY3Rpb24sXG4gICAgICAgIF0pKTtcbn1cbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIChjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fFxuICAgICAgICAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXG4gICAgICAgIF0pKTtcbn1cbmNvbnN0IGN1cnNvclJlcXVlc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25Eb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gICAgcHJvbWlzZVxuICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgLy8gU2luY2UgY3Vyc29yaW5nIHJldXNlcyB0aGUgSURCUmVxdWVzdCAoKnNpZ2gqKSwgd2UgY2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbFxuICAgICAgICAvLyAoc2VlIHdyYXBGdW5jdGlvbikuXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQkN1cnNvcikge1xuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdE1hcC5zZXQodmFsdWUsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhdGNoaW5nIHRvIGF2b2lkIFwiVW5jYXVnaHQgUHJvbWlzZSBleGNlcHRpb25zXCJcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAvLyBUaGlzIG1hcHBpbmcgZXhpc3RzIGluIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBidXQgZG9lc24ndCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zZm9ybUNhY2hlLiBUaGlzXG4gICAgLy8gaXMgYmVjYXVzZSB3ZSBjcmVhdGUgbWFueSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QuXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm9taXNlLCByZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih0eCkge1xuICAgIC8vIEVhcmx5IGJhaWwgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIGEgZG9uZSBwcm9taXNlIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgIGlmICh0cmFuc2FjdGlvbkRvbmVNYXAuaGFzKHR4KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHR4LmVycm9yIHx8IG5ldyBET01FeGNlcHRpb24oJ0Fib3J0RXJyb3InLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgfSk7XG4gICAgLy8gQ2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbC5cbiAgICB0cmFuc2FjdGlvbkRvbmVNYXAuc2V0KHR4LCBkb25lKTtcbn1cbmxldCBpZGJQcm94eVRyYXBzID0ge1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdHJhbnNhY3Rpb24uZG9uZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnZG9uZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uRG9uZU1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIFBvbHlmaWxsIGZvciBvYmplY3RTdG9yZU5hbWVzIGJlY2F1c2Ugb2YgRWRnZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb2JqZWN0U3RvcmVOYW1lcycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9iamVjdFN0b3JlTmFtZXMgfHwgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFrZSB0eC5zdG9yZSByZXR1cm4gdGhlIG9ubHkgc3RvcmUgaW4gdGhlIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG1hbnkuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3N0b3JlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogcmVjZWl2ZXIub2JqZWN0U3RvcmUocmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWxzZSB0cmFuc2Zvcm0gd2hhdGV2ZXIgd2UgZ2V0IGJhY2suXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldFtwcm9wXSk7XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgKHByb3AgPT09ICdkb25lJyB8fCBwcm9wID09PSAnc3RvcmUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0O1xuICAgIH0sXG59O1xuZnVuY3Rpb24gcmVwbGFjZVRyYXBzKGNhbGxiYWNrKSB7XG4gICAgaWRiUHJveHlUcmFwcyA9IGNhbGxiYWNrKGlkYlByb3h5VHJhcHMpO1xufVxuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAvLyBEdWUgdG8gZXhwZWN0ZWQgb2JqZWN0IGVxdWFsaXR5ICh3aGljaCBpcyBlbmZvcmNlZCBieSB0aGUgY2FjaGluZyBpbiBgd3JhcGApLCB3ZVxuICAgIC8vIG9ubHkgY3JlYXRlIG9uZSBuZXcgZnVuYyBwZXIgZnVuYy5cbiAgICAvLyBFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBvYmplY3RTdG9yZU5hbWVzIChib29vKSwgc28gd2UgcG9seWZpbGwgaXQgaGVyZS5cbiAgICBpZiAoZnVuYyA9PT0gSURCRGF0YWJhc2UucHJvdG90eXBlLnRyYW5zYWN0aW9uICYmXG4gICAgICAgICEoJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZU5hbWVzLCAuLi5hcmdzKSB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGZ1bmMuY2FsbCh1bndyYXAodGhpcyksIHN0b3JlTmFtZXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLnNldCh0eCwgc3RvcmVOYW1lcy5zb3J0ID8gc3RvcmVOYW1lcy5zb3J0KCkgOiBbc3RvcmVOYW1lc10pO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAodHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDdXJzb3IgbWV0aG9kcyBhcmUgc3BlY2lhbCwgYXMgdGhlIGJlaGF2aW91ciBpcyBhIGxpdHRsZSBtb3JlIGRpZmZlcmVudCB0byBzdGFuZGFyZCBJREIuIEluXG4gICAgLy8gSURCLCB5b3UgYWR2YW5jZSB0aGUgY3Vyc29yIGFuZCB3YWl0IGZvciBhIG5ldyAnc3VjY2Vzcycgb24gdGhlIElEQlJlcXVlc3QgdGhhdCBnYXZlIHlvdSB0aGVcbiAgICAvLyBjdXJzb3IuIEl0J3Mga2luZGEgbGlrZSBhIHByb21pc2UgdGhhdCBjYW4gcmVzb2x2ZSB3aXRoIG1hbnkgdmFsdWVzLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxuICAgIC8vIHdpdGggcmVhbCBwcm9taXNlcywgc28gZWFjaCBhZHZhbmNlIG1ldGhvZHMgcmV0dXJucyBhIG5ldyBwcm9taXNlIGZvciB0aGUgY3Vyc29yIG9iamVjdCwgb3JcbiAgICAvLyB1bmRlZmluZWQgaWYgdGhlIGVuZCBvZiB0aGUgY3Vyc29yIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgaWYgKGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkuaW5jbHVkZXMoZnVuYykpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICAgICAgZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAoY3Vyc29yUmVxdWVzdE1hcC5nZXQodGhpcykpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbmV4cG9ydCB7IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBhcyBhLCBpbnN0YW5jZU9mQW55IGFzIGksIHJlcGxhY2VUcmFwcyBhcyByLCB1bndyYXAgYXMgdSwgd3JhcCBhcyB3IH07XG4iLCJpbXBvcnQgeyB3IGFzIHdyYXAsIHIgYXMgcmVwbGFjZVRyYXBzIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5leHBvcnQgeyB1IGFzIHVud3JhcCwgdyBhcyB3cmFwIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5cbi8qKlxuICogT3BlbiBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZywgdGVybWluYXRlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSwgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKSB7XG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCd2ZXJzaW9uY2hhbmdlJywgKGV2ZW50KSA9PiBibG9ja2luZyhldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgcmV0dXJuIG9wZW5Qcm9taXNlO1xufVxuLyoqXG4gKiBEZWxldGUgYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqL1xuZnVuY3Rpb24gZGVsZXRlREIobmFtZSwgeyBibG9ja2VkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UobmFtZSk7XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XG4gICAgaWYgKFxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcbiAgICAgICAgIShpc1dyaXRlIHx8IHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6IHVuZGVmaW5lZCBnemlwcHMgYmV0dGVyLCBidXQgZmFpbHMgaW4gRWRnZSA6KFxuICAgICAgICBjb25zdCB0eCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xuICAgICAgICBpZiAodXNlSW5kZXgpXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5kZXgoYXJncy5zaGlmdCgpKTtcbiAgICAgICAgLy8gTXVzdCByZWplY3QgaWYgb3AgcmVqZWN0cy5cbiAgICAgICAgLy8gSWYgaXQncyBhIHdyaXRlIG9wZXJhdGlvbiwgbXVzdCByZWplY3QgaWYgdHguZG9uZSByZWplY3RzLlxuICAgICAgICAvLyBNdXN0IHJlamVjdCB3aXRoIG9wIHJlamVjdGlvbiBmaXJzdC5cbiAgICAgICAgLy8gTXVzdCByZXNvbHZlIHdpdGggb3AgdmFsdWUuXG4gICAgICAgIC8vIE11c3QgaGFuZGxlIGJvdGggcHJvbWlzZXMgKG5vIHVuaGFuZGxlZCByZWplY3Rpb25zKVxuICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRhcmdldFt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyksXG4gICAgICAgICAgICBpc1dyaXRlICYmIHR4LmRvbmUsXG4gICAgICAgIF0pKVswXTtcbiAgICB9O1xuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XG4gICAgcmV0dXJuIG1ldGhvZDtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxuICAgIGhhczogKHRhcmdldCwgcHJvcCkgPT4gISFnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5oYXModGFyZ2V0LCBwcm9wKSxcbn0pKTtcblxuZXhwb3J0IHsgZGVsZXRlREIsIG9wZW5EQiB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgZ2V0RGVmYXVsdEFwcENvbmZpZywgZGVlcEVxdWFsLCBGaXJlYmFzZUVycm9yLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgaXNJbmRleGVkREJBdmFpbGFibGUsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIENvbXBvbmVudFR5cGUuVkVSU0lPTiAqLztcclxufVxuXG5jb25zdCBuYW1lJG8gPSBcIkBmaXJlYmFzZS9hcHBcIjtcbmNvbnN0IHZlcnNpb24kMSA9IFwiMC45LjEyXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkZiA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQyID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjkuMjIuMlwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdENvbnRyb2xsZXIgPSBhcHAuY29udGFpbmVyXHJcbiAgICAgICAgLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKVxyXG4gICAgICAgIC5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcclxuICAgIGlmIChoZWFydGJlYXRDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdm9pZCBoZWFydGJlYXRDb250cm9sbGVyLnRyaWdnZXJIZWFydGJlYXQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogQXBwRXJyb3IuTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgaW5pdGlhbGl6ZUFwcCgpIGZpcnN0JyxcclxuICAgIFtcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqL106IFwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX1cIixcclxuICAgIFtcImR1cGxpY2F0ZS1hcHBcIiAvKiBBcHBFcnJvci5EVVBMSUNBVEVfQVBQICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgb3IgY29uZmlnXCIsXHJcbiAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIEFwcEVycm9yLkFQUF9ERUxFVEVEICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxyXG4gICAgW1wibm8tb3B0aW9uc1wiIC8qIEFwcEVycm9yLk5PX09QVElPTlMgKi9dOiAnTmVlZCB0byBwcm92aWRlIG9wdGlvbnMsIHdoZW4gbm90IGJlaW5nIGRlcGxveWVkIHRvIGhvc3RpbmcgdmlhIHNvdXJjZS4nLFxyXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0xPR19BUkdVTUVOVCAqL106ICdGaXJzdCBhcmd1bWVudCB0byBgb25Mb2dgIG11c3QgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLicsXHJcbiAgICBbXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovXTogJ0Vycm9yIHRocm93biB3aGVuIG9wZW5pbmcgSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1nZXRcIiAvKiBBcHBFcnJvci5JREJfR0VUICovXTogJ0Vycm9yIHRocm93biB3aGVuIHJlYWRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqL106ICdFcnJvciB0aHJvd24gd2hlbiB3cml0aW5nIHRvIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZGVsZXRlXCIgLyogQXBwRXJyb3IuSURCX0RFTEVURSAqL106ICdFcnJvciB0aHJvd24gd2hlbiBkZWxldGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LidcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FwcCcsICdGaXJlYmFzZScsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEZpcmViYXNlQXBwSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBjb25maWcubmFtZTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPVxyXG4gICAgICAgICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudCgnYXBwJywgKCkgPT4gdGhpcywgXCJQVUJMSUNcIiAvKiBDb21wb25lbnRUeXBlLlBVQkxJQyAqLykpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgIH1cclxuICAgIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBjb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XHJcbiAgICB9XHJcbiAgICBnZXQgY29udGFpbmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNEZWxldGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RlbGV0ZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgaXNEZWxldGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cclxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxyXG4gICAgICovXHJcbiAgICBjaGVja0Rlc3Ryb3llZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiIC8qIEFwcEVycm9yLkFQUF9ERUxFVEVEICovLCB7IGFwcE5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgY3VycmVudCBTREsgdmVyc2lvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgU0RLX1ZFUlNJT04gPSB2ZXJzaW9uO1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQXBwKF9vcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSBfb3B0aW9ucztcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0gZ2V0RGVmYXVsdEFwcENvbmZpZygpKTtcclxuICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tb3B0aW9uc1wiIC8qIEFwcEVycm9yLk5PX09QVElPTlMgKi8pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoZXhpc3RpbmdBcHApIHtcclxuICAgICAgICAvLyByZXR1cm4gdGhlIGV4aXN0aW5nIGFwcCBpZiBvcHRpb25zIGFuZCBjb25maWcgZGVlcCBlcXVhbCB0aGUgb25lcyBpbiB0aGUgZXhpc3RpbmcgYXBwLlxyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgZXhpc3RpbmdBcHAub3B0aW9ucykgJiZcclxuICAgICAgICAgICAgZGVlcEVxdWFsKGNvbmZpZywgZXhpc3RpbmdBcHAuY29uZmlnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBBcHBFcnJvci5EVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lKTtcclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XHJcbiAgICBfYXBwcy5zZXQobmFtZSwgbmV3QXBwKTtcclxuICAgIHJldHVybiBuZXdBcHA7XHJcbn1cclxuLyoqXHJcbiAqIFJldHJpZXZlcyBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cclxuICpcclxuICogV2hlbiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC4gV2hlbiBhbiBhcHAgbmFtZVxyXG4gKiBpcyBwcm92aWRlZCwgdGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cclxuICpcclxuICogQW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiB0aGUgYXBwIGJlaW5nIHJldHJpZXZlZCBoYXMgbm90IHlldCBiZWVuXHJcbiAqIGluaXRpYWxpemVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiB0aGUgZGVmYXVsdCBhcHBcclxuICogY29uc3QgYXBwID0gZ2V0QXBwKCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiBhIG5hbWVkIGFwcFxyXG4gKiBjb25zdCBvdGhlckFwcCA9IGdldEFwcChcIm90aGVyQXBwXCIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gcmV0dXJuLiBJZiBubyBuYW1lIGlzXHJcbiAqICAgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGlzIGBcIltERUZBVUxUXVwiYC5cclxuICpcclxuICogQHJldHVybnMgVGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBhcHAgbmFtZS5cclxuICogICBJZiBubyBhcHAgbmFtZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHAobmFtZSA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgY29uc3QgYXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKCFhcHAgJiYgbmFtZSA9PT0gREVGQVVMVF9FTlRSWV9OQU1FICYmIGdldERlZmF1bHRBcHBDb25maWcoKSkge1xyXG4gICAgICAgIHJldHVybiBpbml0aWFsaXplQXBwKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFwcCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogQXBwRXJyb3IuTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwO1xyXG59XHJcbi8qKlxyXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZW5kZXJzIHRoaXMgYXBwIHVudXNhYmxlIGFuZCBmcmVlcyB0aGUgcmVzb3VyY2VzIG9mIGFsbCBhc3NvY2lhdGVkXHJcbiAqIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGRlbGV0ZUFwcChhcHApXHJcbiAqICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICogICB9KVxyXG4gKiAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcChhcHApIHtcclxuICAgIGNvbnN0IG5hbWUgPSBhcHAubmFtZTtcclxuICAgIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcclxuICAgICAgICBfYXBwcy5kZWxldGUobmFtZSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXBwLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXJzKClcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiBwcm92aWRlci5kZWxldGUoKSkpO1xyXG4gICAgICAgIGFwcC5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cclxuICogQHBhcmFtIGxpYnJhcnkgLSBOYW1lIG9mIDFwIG9yIDNwIGxpYnJhcnkgKGUuZy4gZmlyZXN0b3JlLCBhbmd1bGFyZmlyZSlcclxuICogQHBhcmFtIHZlcnNpb24gLSBDdXJyZW50IHZlcnNpb24gb2YgdGhhdCBsaWJyYXJ5LlxyXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVE9ETzogV2UgY2FuIHVzZSB0aGlzIGNoZWNrIHRvIHdoaXRlbGlzdCBzdHJpbmdzIHdoZW4vaWYgd2Ugc2V0IHVwXHJcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cclxuICAgIGxldCBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcclxuICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgbGlicmFyeSArPSBgLSR7dmFyaWFudH1gO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGlicmFyeU1pc21hdGNoID0gbGlicmFyeS5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgY29uc3QgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICBjb25zdCB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICBgVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXCIke2xpYnJhcnl9XCIgd2l0aCB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiOmBcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoICYmIHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgdmVyc2lvbiBuYW1lIFwiJHt2ZXJzaW9ufVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nZ2VyLndhcm4od2FybmluZy5qb2luKCcgJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGAke2xpYnJhcnl9LXZlcnNpb25gLCAoKSA9PiAoeyBsaWJyYXJ5LCB2ZXJzaW9uIH0pLCBcIlZFUlNJT05cIiAvKiBDb21wb25lbnRUeXBlLlZFUlNJT04gKi8pKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgaGFuZGxlciBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZyhsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucyk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGxldmVsIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIGFyZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYGluZm9gLCBlcnJvcnMgYXJlIGxvZ2dlZCwgYnV0IGBkZWJ1Z2AgYW5kXHJcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsb2dMZXZlbCkge1xyXG4gICAgc2V0TG9nTGV2ZWwkMShsb2dMZXZlbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREJfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtZGF0YWJhc2UnO1xyXG5jb25zdCBEQl9WRVJTSU9OID0gMTtcclxuY29uc3QgU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtc3RvcmUnO1xyXG5sZXQgZGJQcm9taXNlID0gbnVsbDtcclxuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xyXG4gICAgaWYgKCFkYlByb21pc2UpIHtcclxuICAgICAgICBkYlByb21pc2UgPSBvcGVuREIoREJfTkFNRSwgREJfVkVSU0lPTiwge1xyXG4gICAgICAgICAgICB1cGdyYWRlOiAoZGIsIG9sZFZlcnNpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxyXG4gICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LCBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKGFwcCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXHJcbiAgICAgICAgICAgIC50cmFuc2FjdGlvbihTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLmdldChjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1nZXRcIiAvKiBBcHBFcnJvci5JREJfR0VUICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGlkYkdldEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQihhcHAsIGhlYXJ0YmVhdE9iamVjdCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHgub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgYXdhaXQgb2JqZWN0U3RvcmUucHV0KGhlYXJ0YmVhdE9iamVjdCwgY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICBhd2FpdCB0eC5kb25lO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGlkYkdldEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjb21wdXRlS2V5KGFwcCkge1xyXG4gICAgcmV0dXJuIGAke2FwcC5uYW1lfSEke2FwcC5vcHRpb25zLmFwcElkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgTUFYX0hFQURFUl9CWVRFUyA9IDEwMjQ7XHJcbi8vIDMwIGRheXNcclxuY29uc3QgU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUyA9IDMwICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuY2xhc3MgSGVhcnRiZWF0U2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW4tbWVtb3J5IGNhY2hlIGZvciBoZWFydGJlYXRzLCB1c2VkIGJ5IGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB0byBnZW5lcmF0ZVxyXG4gICAgICAgICAqIHRoZSBoZWFkZXIgc3RyaW5nLlxyXG4gICAgICAgICAqIFN0b3JlcyBvbmUgcmVjb3JkIHBlciBkYXRlLiBUaGlzIHdpbGwgYmUgY29uc29saWRhdGVkIGludG8gdGhlIHN0YW5kYXJkXHJcbiAgICAgICAgICogZm9ybWF0IG9mIG9uZSByZWNvcmQgcGVyIHVzZXIgYWdlbnQgc3RyaW5nIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgaGVhZGVyLlxyXG4gICAgICAgICAqIFBvcHVsYXRlZCBmcm9tIGluZGV4ZWREQiB3aGVuIHRoZSBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZCBhbmQgc2hvdWxkXHJcbiAgICAgICAgICogYmUga2VwdCBpbiBzeW5jIHdpdGggaW5kZXhlZERCLlxyXG4gICAgICAgICAqIExlYXZlIHB1YmxpYyBmb3IgZWFzaWVyIHRlc3RpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gbnVsbDtcclxuICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fc3RvcmFnZSA9IG5ldyBIZWFydGJlYXRTdG9yYWdlSW1wbChhcHApO1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UgPSB0aGlzLl9zdG9yYWdlLnJlYWQoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHRvIHJlcG9ydCBhIGhlYXJ0YmVhdC4gVGhlIGZ1bmN0aW9uIHdpbGwgZ2VuZXJhdGVcclxuICAgICAqIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IG9iamVjdCwgdXBkYXRlIGhlYXJ0YmVhdHNDYWNoZSwgYW5kIHBlcnNpc3QgaXRcclxuICAgICAqIHRvIEluZGV4ZWREQi5cclxuICAgICAqIE5vdGUgdGhhdCB3ZSBvbmx5IHN0b3JlIG9uZSBoZWFydGJlYXQgcGVyIGRheS4gU28gaWYgYSBoZWFydGJlYXQgZm9yIHRvZGF5IGlzXHJcbiAgICAgKiBhbHJlYWR5IGxvZ2dlZCwgc3Vic2VxdWVudCBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIGluIHRoZSBzYW1lIGRheSB3aWxsIGJlIGlnbm9yZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRyaWdnZXJIZWFydGJlYXQoKSB7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG8gbm90IHN0b3JlIGEgaGVhcnRiZWF0IGlmIG9uZSBpcyBhbHJlYWR5IHN0b3JlZCBmb3IgdGhpcyBkYXlcclxuICAgICAgICAvLyBvciBpZiBhIGhlYWRlciBoYXMgYWxyZWFkeSBiZWVuIHNlbnQgdG9kYXkuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPT09IGRhdGUgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuc29tZShzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSA9PT0gZGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gZW50cnkgZm9yIHRoaXMgZGF0ZS4gQ3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMucHVzaCh7IGRhdGUsIGFnZW50IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZW1vdmUgZW50cmllcyBvbGRlciB0aGFuIDMwIGRheXMuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5maWx0ZXIoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhiVGltZXN0YW1wID0gbmV3IERhdGUoc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBub3cgLSBoYlRpbWVzdGFtcCA8PSBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgaGVhcnRiZWF0LXNwZWNpZmljIGhlYWRlciBkaXJlY3RseS5cclxuICAgICAqIEl0IGFsc28gY2xlYXJzIGFsbCBoZWFydGJlYXRzIGZyb20gbWVtb3J5IGFzIHdlbGwgYXMgaW4gSW5kZXhlZERCLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IENvbnN1bWluZyBwcm9kdWN0IFNES3Mgc2hvdWxkIG5vdCBzZW5kIHRoZSBoZWFkZXIgaWYgdGhpcyBtZXRob2RcclxuICAgICAqIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRIZWFydGJlYXRzSGVhZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgaXQncyBzdGlsbCBudWxsIG9yIHRoZSBhcnJheSBpcyBlbXB0eSwgdGhlcmUgaXMgbm8gZGF0YSB0byBzZW5kLlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAvLyBFeHRyYWN0IGFzIG1hbnkgaGVhcnRiZWF0cyBmcm9tIHRoZSBjYWNoZSBhcyB3aWxsIGZpdCB1bmRlciB0aGUgc2l6ZSBsaW1pdC5cclxuICAgICAgICBjb25zdCB7IGhlYXJ0YmVhdHNUb1NlbmQsIHVuc2VudEVudHJpZXMgfSA9IGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNUb1NlbmQgfSkpO1xyXG4gICAgICAgIC8vIFN0b3JlIGxhc3Qgc2VudCBkYXRlIHRvIHByZXZlbnQgYW5vdGhlciBiZWluZyBsb2dnZWQvc2VudCBmb3IgdGhlIHNhbWUgZGF5LlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPSBkYXRlO1xyXG4gICAgICAgIGlmICh1bnNlbnRFbnRyaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gU3RvcmUgYW55IHVuc2VudCBlbnRyaWVzIGlmIHRoZXkgZXhpc3QuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdW5zZW50RW50cmllcztcclxuICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyBtb3JlIGxpa2VseSB0aGFuIGVtcHR5aW5nIHRoZSBhcnJheSAoYmVsb3cpIHRvIGxlYWQgdG8gc29tZSBvZGQgc3RhdGVcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNhY2hlIGlzbid0IGVtcHR5IGFuZCB0aGlzIHdpbGwgYmUgY2FsbGVkIGFnYWluIG9uIHRoZSBuZXh0IHJlcXVlc3QsXHJcbiAgICAgICAgICAgIC8vIGFuZCBpcyBwcm9iYWJseSBzYWZlc3QgaWYgd2UgYXdhaXQgaXQuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBEbyBub3Qgd2FpdCBmb3IgdGhpcywgdG8gcmVkdWNlIGxhdGVuY3kuXHJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlclN0cmluZztcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRVVENEYXRlU3RyaW5nKCkge1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgLy8gUmV0dXJucyBkYXRlIGZvcm1hdCAnWVlZWS1NTS1ERCdcclxuICAgIHJldHVybiB0b2RheS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMCk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIoaGVhcnRiZWF0c0NhY2hlLCBtYXhTaXplID0gTUFYX0hFQURFUl9CWVRFUykge1xyXG4gICAgLy8gSGVhcnRiZWF0cyBncm91cGVkIGJ5IHVzZXIgYWdlbnQgaW4gdGhlIHN0YW5kYXJkIGZvcm1hdCB0byBiZSBzZW50IGluXHJcbiAgICAvLyB0aGUgaGVhZGVyLlxyXG4gICAgY29uc3QgaGVhcnRiZWF0c1RvU2VuZCA9IFtdO1xyXG4gICAgLy8gU2luZ2xlIGRhdGUgZm9ybWF0IGhlYXJ0YmVhdHMgdGhhdCBhcmUgbm90IHNlbnQuXHJcbiAgICBsZXQgdW5zZW50RW50cmllcyA9IGhlYXJ0YmVhdHNDYWNoZS5zbGljZSgpO1xyXG4gICAgZm9yIChjb25zdCBzaW5nbGVEYXRlSGVhcnRiZWF0IG9mIGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgICAgIC8vIExvb2sgZm9yIGFuIGV4aXN0aW5nIGVudHJ5IHdpdGggdGhlIHNhbWUgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBoZWFydGJlYXRFbnRyeSA9IGhlYXJ0YmVhdHNUb1NlbmQuZmluZChoYiA9PiBoYi5hZ2VudCA9PT0gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCk7XHJcbiAgICAgICAgaWYgKCFoZWFydGJlYXRFbnRyeSkge1xyXG4gICAgICAgICAgICAvLyBJZiBubyBlbnRyeSBmb3IgdGhpcyB1c2VyIGFnZW50IGV4aXN0cywgY3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGFnZW50OiBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50LFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGVdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGhlYXJ0YmVhdFxyXG4gICAgICAgICAgICAgICAgLy8gZW50cnkgYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnB1c2goc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgZGF0ZVxyXG4gICAgICAgICAgICAvLyBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvcCB1bnNlbnQgZW50cnkgZnJvbSBxdWV1ZS4gKFNraXBwZWQgaWYgYWRkaW5nIHRoZSBlbnRyeSBleGNlZWRlZFxyXG4gICAgICAgIC8vIHF1b3RhIGFuZCB0aGUgbG9vcCBicmVha3MgZWFybHkuKVxyXG4gICAgICAgIHVuc2VudEVudHJpZXMgPSB1bnNlbnRFbnRyaWVzLnNsaWNlKDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFydGJlYXRzVG9TZW5kLFxyXG4gICAgICAgIHVuc2VudEVudHJpZXNcclxuICAgIH07XHJcbn1cclxuY2xhc3MgSGVhcnRiZWF0U3RvcmFnZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZSA9IHRoaXMucnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpIHtcclxuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkIGFsbCBoZWFydGJlYXRzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyByZWFkKCkge1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgaGVhcnRiZWF0czogW10gfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkhlYXJ0YmVhdE9iamVjdCA9IGF3YWl0IHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQih0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3QgfHwgeyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIG92ZXJ3cml0ZSB0aGUgc3RvcmFnZSB3aXRoIHRoZSBwcm92aWRlZCBoZWFydGJlYXRzXHJcbiAgICBhc3luYyBvdmVyd3JpdGUoaGVhcnRiZWF0c09iamVjdCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcclxuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogKF9hID0gaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUsXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBoZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIGFkZChoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0cyxcclxuICAgICAgICAgICAgICAgICAgICAuLi5oZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgYnl0ZXMgb2YgYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgYXJyYXkgYWZ0ZXIgYmVpbmcgd3JhcHBlZFxyXG4gKiBpbiBhIHBsYXRmb3JtIGxvZ2dpbmcgaGVhZGVyIEpTT04gb2JqZWN0LCBzdHJpbmdpZmllZCwgYW5kIGNvbnZlcnRlZFxyXG4gKiB0byBiYXNlIDY0LlxyXG4gKi9cclxuZnVuY3Rpb24gY291bnRCeXRlcyhoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgIC8vIGJhc2U2NCBoYXMgYSByZXN0cmljdGVkIHNldCBvZiBjaGFyYWN0ZXJzLCBhbGwgb2Ygd2hpY2ggc2hvdWxkIGJlIDEgYnl0ZS5cclxuICAgIHJldHVybiBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhcclxuICAgIC8vIGhlYXJ0YmVhdHNDYWNoZSB3cmFwcGVyIHByb3BlcnRpZXNcclxuICAgIEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c0NhY2hlIH0pKS5sZW5ndGg7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgY29udGFpbmVyID0+IG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIENvbXBvbmVudFR5cGUuUFJJVkFURSAqLykpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2hlYXJ0YmVhdCcsIGNvbnRhaW5lciA9PiBuZXcgSGVhcnRiZWF0U2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCB2YXJpYW50KTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsICdlc20yMDE3Jyk7XHJcbiAgICAvLyBSZWdpc3RlciBwbGF0Zm9ybSBTREsgaWRlbnRpZmllciAobm8gdmVyc2lvbikuXHJcbiAgICByZWdpc3RlclZlcnNpb24oJ2ZpcmUtanMnLCAnJyk7XHJcbn1cblxuLyoqXHJcbiAqIEZpcmViYXNlIEFwcFxyXG4gKlxyXG4gKiBAcmVtYXJrcyBUaGlzIHBhY2thZ2UgY29vcmRpbmF0ZXMgdGhlIGNvbW11bmljYXRpb24gYmV0d2VlbiB0aGUgZGlmZmVyZW50IEZpcmViYXNlIGNvbXBvbmVudHNcclxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXHJcbiAqL1xyXG5yZWdpc3RlckNvcmVDb21wb25lbnRzKCcnKTtcblxuZXhwb3J0IHsgU0RLX1ZFUlNJT04sIERFRkFVTFRfRU5UUllfTkFNRSBhcyBfREVGQVVMVF9FTlRSWV9OQU1FLCBfYWRkQ29tcG9uZW50LCBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQsIF9hcHBzLCBfY2xlYXJDb21wb25lbnRzLCBfY29tcG9uZW50cywgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIGRlbGV0ZUFwcCwgZ2V0QXBwLCBnZXRBcHBzLCBpbml0aWFsaXplQXBwLCBvbkxvZywgcmVnaXN0ZXJWZXJzaW9uLCBzZXRMb2dMZXZlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgZXNtID0ge307XG5cbi8qXG5cbiBDb3B5cmlnaHQgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLlxuIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4qL1xuXG52YXIgayxnb29nPWdvb2d8fHt9LGw9Y29tbW9uanNHbG9iYWx8fHNlbGY7ZnVuY3Rpb24gYWEoYSl7dmFyIGI9dHlwZW9mIGE7Yj1cIm9iamVjdFwiIT1iP2I6YT9BcnJheS5pc0FycmF5KGEpP1wiYXJyYXlcIjpiOlwibnVsbFwiO3JldHVybiBcImFycmF5XCI9PWJ8fFwib2JqZWN0XCI9PWImJlwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aH1mdW5jdGlvbiBwKGEpe3ZhciBiPXR5cGVvZiBhO3JldHVybiBcIm9iamVjdFwiPT1iJiZudWxsIT1hfHxcImZ1bmN0aW9uXCI9PWJ9ZnVuY3Rpb24gYmEoYSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGNhKSYmYVtjYV18fChhW2NhXT0rK2RhKX12YXIgY2E9XCJjbG9zdXJlX3VpZF9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKSxkYT0wO2Z1bmN0aW9uIGVhKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gZmEoYSxiLGMpe2lmKCFhKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShlLGQpO3JldHVybiBhLmFwcGx5KGIsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcShhLGIsYyl7RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJi0xIT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC50b1N0cmluZygpLmluZGV4T2YoXCJuYXRpdmUgY29kZVwiKT9xPWVhOnE9ZmE7cmV0dXJuIHEuYXBwbHkobnVsbCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gaGEoYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5zbGljZSgpO2QucHVzaC5hcHBseShkLGFyZ3VtZW50cyk7cmV0dXJuIGEuYXBwbHkodGhpcyxkKX19ZnVuY3Rpb24gcihhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS4kPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5hYz1mdW5jdGlvbihkLGUsZil7Zm9yKHZhciBoPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMiksbj0yO248YXJndW1lbnRzLmxlbmd0aDtuKyspaFtuLTJdPWFyZ3VtZW50c1tuXTtyZXR1cm4gYi5wcm90b3R5cGVbZV0uYXBwbHkoZCxoKX07fWZ1bmN0aW9uIHYoKXt0aGlzLnM9dGhpcy5zO3RoaXMubz10aGlzLm87fXZhciBpYT0wO3YucHJvdG90eXBlLnM9ITE7di5wcm90b3R5cGUuc2E9ZnVuY3Rpb24oKXtpZighdGhpcy5zJiYodGhpcy5zPSEwLHRoaXMuTigpLDAhPWlhKSl7YmEodGhpcyk7fX07di5wcm90b3R5cGUuTj1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBrYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX07ZnVuY3Rpb24gbWEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfVxuZnVuY3Rpb24gbmEoYSxiKXtmb3IobGV0IGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKXtjb25zdCBkPWFyZ3VtZW50c1tjXTtpZihhYShkKSl7Y29uc3QgZT1hLmxlbmd0aHx8MCxmPWQubGVuZ3RofHwwO2EubGVuZ3RoPWUrZjtmb3IobGV0IGg9MDtoPGY7aCsrKWFbZStoXT1kW2hdO31lbHNlIGEucHVzaChkKTt9fWZ1bmN0aW9uIHcoYSxiKXt0aGlzLnR5cGU9YTt0aGlzLmc9dGhpcy50YXJnZXQ9Yjt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITE7fXcucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITA7fTt2YXIgb2E9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIiwoKT0+e30sYiksbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFwiLCgpPT57fSxiKTt9Y2F0Y2goYyl7fXJldHVybiBhfSgpO2Z1bmN0aW9uIHgoYSl7cmV0dXJuIC9eW1xcc1xceGEwXSokLy50ZXN0KGEpfWZ1bmN0aW9uIHBhKCl7dmFyIGE9bC5uYXZpZ2F0b3I7cmV0dXJuIGEmJihhPWEudXNlckFnZW50KT9hOlwiXCJ9ZnVuY3Rpb24geShhKXtyZXR1cm4gLTEhPXBhKCkuaW5kZXhPZihhKX1mdW5jdGlvbiBxYShhKXtxYVtcIiBcIl0oYSk7cmV0dXJuIGF9cWFbXCIgXCJdPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiByYShhLGIpe3ZhciBjPXNhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYyxhKT9jW2FdOmNbYV09YihhKX12YXIgdGE9eShcIk9wZXJhXCIpLHo9eShcIlRyaWRlbnRcIil8fHkoXCJNU0lFXCIpLHVhPXkoXCJFZGdlXCIpLHZhPXVhfHx6LHdhPXkoXCJHZWNrb1wiKSYmISgtMSE9cGEoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJ3ZWJraXRcIikmJiF5KFwiRWRnZVwiKSkmJiEoeShcIlRyaWRlbnRcIil8fHkoXCJNU0lFXCIpKSYmIXkoXCJFZGdlXCIpLHhhPS0xIT1wYSgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIndlYmtpdFwiKSYmIXkoXCJFZGdlXCIpO2Z1bmN0aW9uIHlhKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIHphO1xuYTp7dmFyIEFhPVwiXCIsQmE9ZnVuY3Rpb24oKXt2YXIgYT1wYSgpO2lmKHdhKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYodWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeilyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKHhhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKHRhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO0JhJiYoQWE9QmE/QmFbMV06XCJcIik7aWYoeil7dmFyIENhPXlhKCk7aWYobnVsbCE9Q2EmJkNhPnBhcnNlRmxvYXQoQWEpKXt6YT1TdHJpbmcoQ2EpO2JyZWFrIGF9fXphPUFhO312YXIgRGE7aWYobC5kb2N1bWVudCYmeil7dmFyIEVhPXlhKCk7RGE9RWE/RWE6cGFyc2VJbnQoemEsMTApfHx2b2lkIDA7fWVsc2UgRGE9dm9pZCAwO3ZhciBGYT1EYTtmdW5jdGlvbiBBKGEsYil7dy5jYWxsKHRoaXMsYT9hLnR5cGU6XCJcIik7dGhpcy5yZWxhdGVkVGFyZ2V0PXRoaXMuZz10aGlzLnRhcmdldD1udWxsO3RoaXMuYnV0dG9uPXRoaXMuc2NyZWVuWT10aGlzLnNjcmVlblg9dGhpcy5jbGllbnRZPXRoaXMuY2xpZW50WD0wO3RoaXMua2V5PVwiXCI7dGhpcy5tZXRhS2V5PXRoaXMuc2hpZnRLZXk9dGhpcy5hbHRLZXk9dGhpcy5jdHJsS2V5PSExO3RoaXMuc3RhdGU9bnVsbDt0aGlzLnBvaW50ZXJJZD0wO3RoaXMucG9pbnRlclR5cGU9XCJcIjt0aGlzLmk9bnVsbDtpZihhKXt2YXIgYz10aGlzLnR5cGU9YS50eXBlLGQ9YS5jaGFuZ2VkVG91Y2hlcyYmYS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/YS5jaGFuZ2VkVG91Y2hlc1swXTpudWxsO3RoaXMudGFyZ2V0PWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7dGhpcy5nPWI7aWYoYj1hLnJlbGF0ZWRUYXJnZXQpe2lmKHdhKXthOnt0cnl7cWEoYi5ub2RlTmFtZSk7dmFyIGU9ITA7YnJlYWsgYX1jYXRjaChmKXt9ZT1cbiExO31lfHwoYj1udWxsKTt9fWVsc2UgXCJtb3VzZW92ZXJcIj09Yz9iPWEuZnJvbUVsZW1lbnQ6XCJtb3VzZW91dFwiPT1jJiYoYj1hLnRvRWxlbWVudCk7dGhpcy5yZWxhdGVkVGFyZ2V0PWI7ZD8odGhpcy5jbGllbnRYPXZvaWQgMCE9PWQuY2xpZW50WD9kLmNsaWVudFg6ZC5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09ZC5jbGllbnRZP2QuY2xpZW50WTpkLnBhZ2VZLHRoaXMuc2NyZWVuWD1kLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWQuc2NyZWVuWXx8MCk6KHRoaXMuY2xpZW50WD12b2lkIDAhPT1hLmNsaWVudFg/YS5jbGllbnRYOmEucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWEuY2xpZW50WT9hLmNsaWVudFk6YS5wYWdlWSx0aGlzLnNjcmVlblg9YS5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1hLnNjcmVlbll8fDApO3RoaXMuYnV0dG9uPWEuYnV0dG9uO3RoaXMua2V5PWEua2V5fHxcIlwiO3RoaXMuY3RybEtleT1hLmN0cmxLZXk7dGhpcy5hbHRLZXk9YS5hbHRLZXk7dGhpcy5zaGlmdEtleT1cbmEuc2hpZnRLZXk7dGhpcy5tZXRhS2V5PWEubWV0YUtleTt0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZHx8MDt0aGlzLnBvaW50ZXJUeXBlPVwic3RyaW5nXCI9PT10eXBlb2YgYS5wb2ludGVyVHlwZT9hLnBvaW50ZXJUeXBlOkdhW2EucG9pbnRlclR5cGVdfHxcIlwiO3RoaXMuc3RhdGU9YS5zdGF0ZTt0aGlzLmk9YTthLmRlZmF1bHRQcmV2ZW50ZWQmJkEuJC5oLmNhbGwodGhpcyk7fX1yKEEsdyk7dmFyIEdhPXsyOlwidG91Y2hcIiwzOlwicGVuXCIsNDpcIm1vdXNlXCJ9O0EucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtBLiQuaC5jYWxsKHRoaXMpO3ZhciBhPXRoaXMuaTthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExO307dmFyIEhhPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgSWE9MDtmdW5jdGlvbiBKYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMubGE9ZTt0aGlzLmtleT0rK0lhO3RoaXMuZmE9dGhpcy5pYT0hMTt9ZnVuY3Rpb24gS2EoYSl7YS5mYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5sYT1udWxsO31mdW5jdGlvbiBOYShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIE9hKGEsYil7Zm9yKGNvbnN0IGMgaW4gYSliLmNhbGwodm9pZCAwLGFbY10sYyxhKTt9ZnVuY3Rpb24gUGEoYSl7Y29uc3QgYj17fTtmb3IoY29uc3QgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn1jb25zdCBRYT1cImNvbnN0cnVjdG9yIGhhc093blByb3BlcnR5IGlzUHJvdG90eXBlT2YgcHJvcGVydHlJc0VudW1lcmFibGUgdG9Mb2NhbGVTdHJpbmcgdG9TdHJpbmcgdmFsdWVPZlwiLnNwbGl0KFwiIFwiKTtmdW5jdGlvbiBSYShhLGIpe2xldCBjLGQ7Zm9yKGxldCBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7ZD1hcmd1bWVudHNbZV07Zm9yKGMgaW4gZClhW2NdPWRbY107Zm9yKGxldCBmPTA7ZjxRYS5sZW5ndGg7ZisrKWM9UWFbZl0sT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsYykmJihhW2NdPWRbY10pO319ZnVuY3Rpb24gU2EoYSl7dGhpcy5zcmM9YTt0aGlzLmc9e307dGhpcy5oPTA7fVNhLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1hLnRvU3RyaW5nKCk7YT10aGlzLmdbZl07YXx8KGE9dGhpcy5nW2ZdPVtdLHRoaXMuaCsrKTt2YXIgaD1UYShhLGIsZCxlKTstMTxoPyhiPWFbaF0sY3x8KGIuaWE9ITEpKTooYj1uZXcgSmEoYix0aGlzLnNyYyxmLCEhZCxlKSxiLmlhPWMsYS5wdXNoKGIpKTtyZXR1cm4gYn07ZnVuY3Rpb24gVWEoYSxiKXt2YXIgYz1iLnR5cGU7aWYoYyBpbiBhLmcpe3ZhciBkPWEuZ1tjXSxlPWthKGQsYiksZjsoZj0wPD1lKSYmQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGQsZSwxKTtmJiYoS2EoYiksMD09YS5nW2NdLmxlbmd0aCYmKGRlbGV0ZSBhLmdbY10sYS5oLS0pKTt9fVxuZnVuY3Rpb24gVGEoYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZTxhLmxlbmd0aDsrK2Upe3ZhciBmPWFbZV07aWYoIWYuZmEmJmYubGlzdGVuZXI9PWImJmYuY2FwdHVyZT09ISFjJiZmLmxhPT1kKXJldHVybiBlfXJldHVybiAtMX12YXIgVmE9XCJjbG9zdXJlX2xtX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKSxXYT17fTtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe2lmKGQmJmQub25jZSlyZXR1cm4gWmEoYSxiLGMsZCxlKTtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylZYShhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9JGEoYyk7cmV0dXJuIGEmJmFbSGFdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6YWIoYSxiLGMsITEsZCxlKX1cbmZ1bmN0aW9uIGFiKGEsYixjLGQsZSxmKXtpZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgaD1wKGUpPyEhZS5jYXB0dXJlOiEhZSxuPWJiKGEpO258fChhW1ZhXT1uPW5ldyBTYShhKSk7Yz1uLmFkZChiLGMsZCxoLGYpO2lmKGMucHJveHkpcmV0dXJuIGM7ZD1jYigpO2MucHJveHk9ZDtkLnNyYz1hO2QubGlzdGVuZXI9YztpZihhLmFkZEV2ZW50TGlzdGVuZXIpb2F8fChlPWgpLHZvaWQgMD09PWUmJihlPSExKSxhLmFkZEV2ZW50TGlzdGVuZXIoYi50b1N0cmluZygpLGQsZSk7ZWxzZSBpZihhLmF0dGFjaEV2ZW50KWEuYXR0YWNoRXZlbnQoZGIoYi50b1N0cmluZygpKSxkKTtlbHNlIGlmKGEuYWRkTGlzdGVuZXImJmEucmVtb3ZlTGlzdGVuZXIpYS5hZGRMaXN0ZW5lcihkKTtlbHNlIHRocm93IEVycm9yKFwiYWRkRXZlbnRMaXN0ZW5lciBhbmQgYXR0YWNoRXZlbnQgYXJlIHVuYXZhaWxhYmxlLlwiKTtyZXR1cm4gY31cbmZ1bmN0aW9uIGNiKCl7ZnVuY3Rpb24gYShjKXtyZXR1cm4gYi5jYWxsKGEuc3JjLGEubGlzdGVuZXIsYyl9Y29uc3QgYj1lYjtyZXR1cm4gYX1mdW5jdGlvbiBaYShhLGIsYyxkLGUpe2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKVphKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz0kYShjKTtyZXR1cm4gYSYmYVtIYV0/YS5QKGIsYyxwKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTphYihhLGIsYywhMCxkLGUpfVxuZnVuY3Rpb24gZmIoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7ZWxzZSAoZD1wKGQpPyEhZC5jYXB0dXJlOiEhZCxjPSRhKGMpLGEmJmFbSGFdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9VGEoZixjLGQsZSksLTE8YyYmKEthKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1iYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9VGEoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmZ2IoYykpO31cbmZ1bmN0aW9uIGdiKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuZmEpe3ZhciBiPWEuc3JjO2lmKGImJmJbSGFdKVVhKGIuaSxhKTtlbHNlIHt2YXIgYz1hLnR5cGUsZD1hLnByb3h5O2IucmVtb3ZlRXZlbnRMaXN0ZW5lcj9iLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxkLGEuY2FwdHVyZSk6Yi5kZXRhY2hFdmVudD9iLmRldGFjaEV2ZW50KGRiKGMpLGQpOmIuYWRkTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXIoZCk7KGM9YmIoYikpPyhVYShjLGEpLDA9PWMuaCYmKGMuc3JjPW51bGwsYltWYV09bnVsbCkpOkthKGEpO319fWZ1bmN0aW9uIGRiKGEpe3JldHVybiBhIGluIFdhP1dhW2FdOldhW2FdPVwib25cIithfWZ1bmN0aW9uIGViKGEsYil7aWYoYS5mYSlhPSEwO2Vsc2Uge2I9bmV3IEEoYix0aGlzKTt2YXIgYz1hLmxpc3RlbmVyLGQ9YS5sYXx8YS5zcmM7YS5pYSYmZ2IoYSk7YT1jLmNhbGwoZCxiKTt9cmV0dXJuIGF9XG5mdW5jdGlvbiBiYihhKXthPWFbVmFdO3JldHVybiBhIGluc3RhbmNlb2YgU2E/YTpudWxsfXZhciBoYj1cIl9fY2xvc3VyZV9ldmVudHNfZm5fXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCk7ZnVuY3Rpb24gJGEoYSl7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpcmV0dXJuIGE7YVtoYl18fChhW2hiXT1mdW5jdGlvbihiKXtyZXR1cm4gYS5oYW5kbGVFdmVudChiKX0pO3JldHVybiBhW2hiXX1mdW5jdGlvbiBCKCl7di5jYWxsKHRoaXMpO3RoaXMuaT1uZXcgU2EodGhpcyk7dGhpcy5TPXRoaXM7dGhpcy5KPW51bGw7fXIoQix2KTtCLnByb3RvdHlwZVtIYV09ITA7Qi5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtmYih0aGlzLGEsYixjLGQpO307XG5mdW5jdGlvbiBDKGEsYil7dmFyIGMsZD1hLko7aWYoZClmb3IoYz1bXTtkO2Q9ZC5KKWMucHVzaChkKTthPWEuUztkPWIudHlwZXx8YjtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpYj1uZXcgdyhiLGEpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIHcpYi50YXJnZXQ9Yi50YXJnZXR8fGE7ZWxzZSB7dmFyIGU9YjtiPW5ldyB3KGQsYSk7UmEoYixlKTt9ZT0hMDtpZihjKWZvcih2YXIgZj1jLmxlbmd0aC0xOzA8PWY7Zi0tKXt2YXIgaD1iLmc9Y1tmXTtlPWliKGgsZCwhMCxiKSYmZTt9aD1iLmc9YTtlPWliKGgsZCwhMCxiKSYmZTtlPWliKGgsZCwhMSxiKSYmZTtpZihjKWZvcihmPTA7ZjxjLmxlbmd0aDtmKyspaD1iLmc9Y1tmXSxlPWliKGgsZCwhMSxiKSYmZTt9XG5CLnByb3RvdHlwZS5OPWZ1bmN0aW9uKCl7Qi4kLk4uY2FsbCh0aGlzKTtpZih0aGlzLmkpe3ZhciBhPXRoaXMuaSxjO2ZvcihjIGluIGEuZyl7Zm9yKHZhciBkPWEuZ1tjXSxlPTA7ZTxkLmxlbmd0aDtlKyspS2EoZFtlXSk7ZGVsZXRlIGEuZ1tjXTthLmgtLTt9fXRoaXMuSj1udWxsO307Qi5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMSxjLGQpfTtCLnByb3RvdHlwZS5QPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmkuYWRkKFN0cmluZyhhKSxiLCEwLGMsZCl9O1xuZnVuY3Rpb24gaWIoYSxiLGMsZCl7Yj1hLmkuZ1tTdHJpbmcoYildO2lmKCFiKXJldHVybiAhMDtiPWIuY29uY2F0KCk7Zm9yKHZhciBlPSEwLGY9MDtmPGIubGVuZ3RoOysrZil7dmFyIGg9YltmXTtpZihoJiYhaC5mYSYmaC5jYXB0dXJlPT1jKXt2YXIgbj1oLmxpc3RlbmVyLHQ9aC5sYXx8aC5zcmM7aC5pYSYmVWEoYS5pLGgpO2U9ITEhPT1uLmNhbGwodCxkKSYmZTt9fXJldHVybiBlJiYhZC5kZWZhdWx0UHJldmVudGVkfXZhciBqYj1sLkpTT04uc3RyaW5naWZ5O2NsYXNzIGtie2NvbnN0cnVjdG9yKGEsYil7dGhpcy5pPWE7dGhpcy5qPWI7dGhpcy5oPTA7dGhpcy5nPW51bGw7fWdldCgpe2xldCBhOzA8dGhpcy5oPyh0aGlzLmgtLSxhPXRoaXMuZyx0aGlzLmc9YS5uZXh0LGEubmV4dD1udWxsKTphPXRoaXMuaSgpO3JldHVybiBhfX1mdW5jdGlvbiBsYigpe3ZhciBhPW1iO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgbmJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9b2IuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciBvYj1uZXcga2IoKCk9Pm5ldyBwYixhPT5hLnJlc2V0KCkpO2NsYXNzIHBie2NvbnN0cnVjdG9yKCl7dGhpcy5uZXh0PXRoaXMuZz10aGlzLmg9bnVsbDt9c2V0KGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7dGhpcy5uZXh0PW51bGw7fXJlc2V0KCl7dGhpcy5uZXh0PXRoaXMuZz10aGlzLmg9bnVsbDt9fWZ1bmN0aW9uIHFiKGEpe3ZhciBiPTE7YT1hLnNwbGl0KFwiOlwiKTtjb25zdCBjPVtdO2Zvcig7MDxiJiZhLmxlbmd0aDspYy5wdXNoKGEuc2hpZnQoKSksYi0tO2EubGVuZ3RoJiZjLnB1c2goYS5qb2luKFwiOlwiKSk7cmV0dXJuIGN9ZnVuY3Rpb24gcmIoYSl7bC5zZXRUaW1lb3V0KCgpPT57dGhyb3cgYTt9LDApO31sZXQgc2IsdGI9ITEsbWI9bmV3IG5iLHZiPSgpPT57Y29uc3QgYT1sLlByb21pc2UucmVzb2x2ZSh2b2lkIDApO3NiPSgpPT57YS50aGVuKHViKTt9O307dmFyIHViPSgpPT57Zm9yKHZhciBhO2E9bGIoKTspe3RyeXthLmguY2FsbChhLmcpO31jYXRjaChjKXtyYihjKTt9dmFyIGI9b2I7Yi5qKGEpOzEwMD5iLmgmJihiLmgrKyxhLm5leHQ9Yi5nLGIuZz1hKTt9dGI9ITE7fTtmdW5jdGlvbiB3YihhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLnFiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO31yKHdiLEIpO2s9d2IucHJvdG90eXBlO2suZ2E9ITE7ay5UPW51bGw7ay5xYj1mdW5jdGlvbigpe2lmKHRoaXMuZ2Epe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5UPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuVCYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5UKSx0aGlzLlQ9bnVsbCksQyh0aGlzLFwidGlja1wiKSx0aGlzLmdhJiYoeGIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZ2E9ITA7dGhpcy5UfHwodGhpcy5UPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24geGIoYSl7YS5nYT0hMTthLlQmJihhLmcuY2xlYXJUaW1lb3V0KGEuVCksYS5UPW51bGwpO31rLk49ZnVuY3Rpb24oKXt3Yi4kLk4uY2FsbCh0aGlzKTt4Yih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24geWIoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiB6YihhKXthLmc9eWIoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsemIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgQWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOnpiKHRoaXMpO31OKCl7c3VwZXIuTigpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEJiKGEpe3YuY2FsbCh0aGlzKTt0aGlzLmg9YTt0aGlzLmc9e307fXIoQmIsdik7dmFyIENiPVtdO2Z1bmN0aW9uIERiKGEsYixjLGQpe0FycmF5LmlzQXJyYXkoYyl8fChjJiYoQ2JbMF09Yy50b1N0cmluZygpKSxjPUNiKTtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9WWEoYixjW2VdLGR8fGEuaGFuZGxlRXZlbnQsITEsYS5ofHxhKTtpZighZilicmVhazthLmdbZi5rZXldPWY7fX1mdW5jdGlvbiBGYihhKXtOYShhLmcsZnVuY3Rpb24oYixjKXt0aGlzLmcuaGFzT3duUHJvcGVydHkoYykmJmdiKGIpO30sYSk7YS5nPXt9O31CYi5wcm90b3R5cGUuTj1mdW5jdGlvbigpe0JiLiQuTi5jYWxsKHRoaXMpO0ZiKHRoaXMpO307QmIucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJFdmVudEhhbmRsZXIuaGFuZGxlRXZlbnQgbm90IGltcGxlbWVudGVkXCIpO307ZnVuY3Rpb24gR2IoKXt0aGlzLmc9ITA7fUdiLnByb3RvdHlwZS5FYT1mdW5jdGlvbigpe3RoaXMuZz0hMTt9O2Z1bmN0aW9uIEhiKGEsYixjLGQsZSxmKXthLmluZm8oZnVuY3Rpb24oKXtpZihhLmcpaWYoZil7dmFyIGg9XCJcIjtmb3IodmFyIG49Zi5zcGxpdChcIiZcIiksdD0wO3Q8bi5sZW5ndGg7dCsrKXt2YXIgbT1uW3RdLnNwbGl0KFwiPVwiKTtpZigxPG0ubGVuZ3RoKXt2YXIgdT1tWzBdO209bVsxXTt2YXIgTD11LnNwbGl0KFwiX1wiKTtoPTI8PUwubGVuZ3RoJiZcInR5cGVcIj09TFsxXT9oKyh1K1wiPVwiK20rXCImXCIpOmgrKHUrXCI9cmVkYWN0ZWQmXCIpO319fWVsc2UgaD1udWxsO2Vsc2UgaD1mO3JldHVybiBcIlhNTEhUVFAgUkVRIChcIitkK1wiKSBbYXR0ZW1wdCBcIitlK1wiXTogXCIrYitcIlxcblwiK2MrXCJcXG5cIitofSk7fVxuZnVuY3Rpb24gSWIoYSxiLGMsZCxlLGYsaCl7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiWE1MSFRUUCBSRVNQIChcIitkK1wiKSBbIGF0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIrZitcIiBcIitofSk7fWZ1bmN0aW9uIEQoYSxiLGMsZCl7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiWE1MSFRUUCBURVhUIChcIitiK1wiKTogXCIrSmIoYSxjKSsoZD9cIiBcIitkOlwiXCIpfSk7fWZ1bmN0aW9uIEtiKGEsYil7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiVElNRU9VVDogXCIrYn0pO31HYi5wcm90b3R5cGUuaW5mbz1mdW5jdGlvbigpe307XG5mdW5jdGlvbiBKYihhLGIpe2lmKCFhLmcpcmV0dXJuIGI7aWYoIWIpcmV0dXJuIG51bGw7dHJ5e3ZhciBjPUpTT04ucGFyc2UoYik7aWYoYylmb3IoYT0wO2E8Yy5sZW5ndGg7YSsrKWlmKEFycmF5LmlzQXJyYXkoY1thXSkpe3ZhciBkPWNbYV07aWYoISgyPmQubGVuZ3RoKSl7dmFyIGU9ZFsxXTtpZihBcnJheS5pc0FycmF5KGUpJiYhKDE+ZS5sZW5ndGgpKXt2YXIgZj1lWzBdO2lmKFwibm9vcFwiIT1mJiZcInN0b3BcIiE9ZiYmXCJjbG9zZVwiIT1mKWZvcih2YXIgaD0xO2g8ZS5sZW5ndGg7aCsrKWVbaF09XCJcIjt9fX1yZXR1cm4gamIoYyl9Y2F0Y2gobil7cmV0dXJuIGJ9fXZhciBFPXt9LExiPW51bGw7ZnVuY3Rpb24gTWIoKXtyZXR1cm4gTGI9TGJ8fG5ldyBCfUUuVGE9XCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIjtmdW5jdGlvbiBOYihhKXt3LmNhbGwodGhpcyxFLlRhLGEpO31yKE5iLHcpO2Z1bmN0aW9uIE9iKGEpe2NvbnN0IGI9TWIoKTtDKGIsbmV3IE5iKGIpKTt9RS5TVEFUX0VWRU5UPVwic3RhdGV2ZW50XCI7ZnVuY3Rpb24gUGIoYSxiKXt3LmNhbGwodGhpcyxFLlNUQVRfRVZFTlQsYSk7dGhpcy5zdGF0PWI7fXIoUGIsdyk7ZnVuY3Rpb24gRihhKXtjb25zdCBiPU1iKCk7QyhiLG5ldyBQYihiLGEpKTt9RS5VYT1cInRpbWluZ2V2ZW50XCI7ZnVuY3Rpb24gUWIoYSxiKXt3LmNhbGwodGhpcyxFLlVhLGEpO3RoaXMuc2l6ZT1iO31yKFFiLHcpO1xuZnVuY3Rpb24gUmIoYSxiKXtpZihcImZ1bmN0aW9uXCIhPT10eXBlb2YgYSl0aHJvdyBFcnJvcihcIkZuIG11c3Qgbm90IGJlIG51bGwgYW5kIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YSgpO30sYil9dmFyIFNiPXtOT19FUlJPUjowLHJiOjEsRWI6MixEYjozLHliOjQsQ2I6NSxGYjo2LFFhOjcsVElNRU9VVDo4LEliOjl9O3ZhciBUYj17d2I6XCJjb21wbGV0ZVwiLFNiOlwic3VjY2Vzc1wiLFJhOlwiZXJyb3JcIixRYTpcImFib3J0XCIsS2I6XCJyZWFkeVwiLExiOlwicmVhZHlzdGF0ZWNoYW5nZVwiLFRJTUVPVVQ6XCJ0aW1lb3V0XCIsR2I6XCJpbmNyZW1lbnRhbGRhdGFcIixKYjpcInByb2dyZXNzXCIsemI6XCJkb3dubG9hZHByb2dyZXNzXCIsJGI6XCJ1cGxvYWRwcm9ncmVzc1wifTtmdW5jdGlvbiBVYigpe31VYi5wcm90b3R5cGUuaD1udWxsO2Z1bmN0aW9uIFZiKGEpe3JldHVybiBhLmh8fChhLmg9YS5pKCkpfWZ1bmN0aW9uIFdiKCl7fXZhciBYYj17T1BFTjpcImFcIix2YjpcImJcIixSYTpcImNcIixIYjpcImRcIn07ZnVuY3Rpb24gWWIoKXt3LmNhbGwodGhpcyxcImRcIik7fXIoWWIsdyk7ZnVuY3Rpb24gWmIoKXt3LmNhbGwodGhpcyxcImNcIik7fXIoWmIsdyk7dmFyICRiO2Z1bmN0aW9uIGFjKCl7fXIoYWMsVWIpO2FjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07YWMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319OyRiPW5ldyBhYztmdW5jdGlvbiBiYyhhLGIsYyxkKXt0aGlzLmw9YTt0aGlzLmo9Yjt0aGlzLm09Yzt0aGlzLlc9ZHx8MTt0aGlzLlU9bmV3IEJiKHRoaXMpO3RoaXMuUD1jYzthPXZhPzEyNTp2b2lkIDA7dGhpcy5WPW5ldyB3YihhKTt0aGlzLkk9bnVsbDt0aGlzLmk9ITE7dGhpcy5zPXRoaXMuQT10aGlzLnY9dGhpcy5MPXRoaXMuRz10aGlzLlk9dGhpcy5CPW51bGw7dGhpcy5GPVtdO3RoaXMuZz1udWxsO3RoaXMuQz0wO3RoaXMubz10aGlzLnU9bnVsbDt0aGlzLmNhPS0xO3RoaXMuSj0hMTt0aGlzLk89MDt0aGlzLk09bnVsbDt0aGlzLmJhPXRoaXMuSz10aGlzLmFhPXRoaXMuUz0hMTt0aGlzLmg9bmV3IGRjO31mdW5jdGlvbiBkYygpe3RoaXMuaT1udWxsO3RoaXMuZz1cIlwiO3RoaXMuaD0hMTt9dmFyIGNjPTQ1RTMsZWM9e30sZmM9e307az1iYy5wcm90b3R5cGU7ay5zZXRUaW1lb3V0PWZ1bmN0aW9uKGEpe3RoaXMuUD1hO307XG5mdW5jdGlvbiBnYyhhLGIsYyl7YS5MPTE7YS52PWhjKEcoYikpO2Eucz1jO2EuUz0hMDtpYyhhLG51bGwpO31mdW5jdGlvbiBpYyhhLGIpe2EuRz1EYXRlLm5vdygpO2pjKGEpO2EuQT1HKGEudik7dmFyIGM9YS5BLGQ9YS5XO0FycmF5LmlzQXJyYXkoZCl8fChkPVtTdHJpbmcoZCldKTtrYyhjLmksXCJ0XCIsZCk7YS5DPTA7Yz1hLmwuSjthLmg9bmV3IGRjO2EuZz1sYyhhLmwsYz9iOm51bGwsIWEucyk7MDxhLk8mJihhLk09bmV3IEFiKHEoYS5QYSxhLGEuZyksYS5PKSk7RGIoYS5VLGEuZyxcInJlYWR5c3RhdGVjaGFuZ2VcIixhLm5iKTtiPWEuST9QYShhLkkpOnt9O2Eucz8oYS51fHwoYS51PVwiUE9TVFwiKSxiW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsYS5nLmhhKGEuQSxhLnUsYS5zLGIpKTooYS51PVwiR0VUXCIsYS5nLmhhKGEuQSxhLnUsbnVsbCxiKSk7T2IoKTtIYihhLmosYS51LGEuQSxhLm0sYS5XLGEucyk7fVxuay5uYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2NvbnN0IGI9dGhpcy5NO2ImJjM9PUgoYSk/Yi5sKCk6dGhpcy5QYShhKTt9O1xuay5QYT1mdW5jdGlvbihhKXt0cnl7aWYoYT09dGhpcy5nKWE6e2NvbnN0IHU9SCh0aGlzLmcpO3ZhciBiPXRoaXMuZy5JYSgpO2NvbnN0IEw9dGhpcy5nLmRhKCk7aWYoISgzPnUpJiYoMyE9dXx8dmF8fHRoaXMuZyYmKHRoaXMuaC5ofHx0aGlzLmcuamEoKXx8bWModGhpcy5nKSkpKXt0aGlzLkp8fDQhPXV8fDc9PWJ8fCg4PT1ifHwwPj1MP09iKDMpOk9iKDIpKTtuYyh0aGlzKTt2YXIgYz10aGlzLmcuZGEoKTt0aGlzLmNhPWM7YjppZihvYyh0aGlzKSl7dmFyIGQ9bWModGhpcy5nKTthPVwiXCI7dmFyIGU9ZC5sZW5ndGgsZj00PT1IKHRoaXMuZyk7aWYoIXRoaXMuaC5pKXtpZihcInVuZGVmaW5lZFwiPT09dHlwZW9mIFRleHREZWNvZGVyKXtJKHRoaXMpO3BjKHRoaXMpO3ZhciBoPVwiXCI7YnJlYWsgYn10aGlzLmguaT1uZXcgbC5UZXh0RGVjb2Rlcjt9Zm9yKGI9MDtiPGU7YisrKXRoaXMuaC5oPSEwLGErPXRoaXMuaC5pLmRlY29kZShkW2JdLHtzdHJlYW06ZiYmYj09ZS0xfSk7ZC5zcGxpY2UoMCxcbmUpO3RoaXMuaC5nKz1hO3RoaXMuQz0wO2g9dGhpcy5oLmc7fWVsc2UgaD10aGlzLmcuamEoKTt0aGlzLmk9MjAwPT1jO0liKHRoaXMuaix0aGlzLnUsdGhpcy5BLHRoaXMubSx0aGlzLlcsdSxjKTtpZih0aGlzLmkpe2lmKHRoaXMuYWEmJiF0aGlzLkspe2I6e2lmKHRoaXMuZyl7dmFyIG4sdD10aGlzLmc7aWYoKG49dC5nP3QuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYheChuKSl7dmFyIG09bjticmVhayBifX1tPW51bGw7fWlmKGM9bSlEKHRoaXMuaix0aGlzLm0sYyxcIkluaXRpYWwgaGFuZHNoYWtlIHJlc3BvbnNlIHZpYSBYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKSx0aGlzLks9ITAscWModGhpcyxjKTtlbHNlIHt0aGlzLmk9ITE7dGhpcy5vPTM7RigxMik7SSh0aGlzKTtwYyh0aGlzKTticmVhayBhfX10aGlzLlM/KHJjKHRoaXMsdSxoKSx2YSYmdGhpcy5pJiYzPT11JiYoRGIodGhpcy5VLHRoaXMuVixcInRpY2tcIix0aGlzLm1iKSxcbnRoaXMuVi5zdGFydCgpKSk6KEQodGhpcy5qLHRoaXMubSxoLG51bGwpLHFjKHRoaXMsaCkpOzQ9PXUmJkkodGhpcyk7dGhpcy5pJiYhdGhpcy5KJiYoND09dT9zYyh0aGlzLmwsdGhpcyk6KHRoaXMuaT0hMSxqYyh0aGlzKSkpO31lbHNlIHRjKHRoaXMuZyksNDAwPT1jJiYwPGguaW5kZXhPZihcIlVua25vd24gU0lEXCIpPyh0aGlzLm89MyxGKDEyKSk6KHRoaXMubz0wLEYoMTMpKSxJKHRoaXMpLHBjKHRoaXMpO319fWNhdGNoKHUpe31maW5hbGx5e319O2Z1bmN0aW9uIG9jKGEpe3JldHVybiBhLmc/XCJHRVRcIj09YS51JiYyIT1hLkwmJmEubC5IYTohMX1cbmZ1bmN0aW9uIHJjKGEsYixjKXtsZXQgZD0hMCxlO2Zvcig7IWEuSiYmYS5DPGMubGVuZ3RoOylpZihlPXVjKGEsYyksZT09ZmMpezQ9PWImJihhLm89NCxGKDE0KSxkPSExKTtEKGEuaixhLm0sbnVsbCxcIltJbmNvbXBsZXRlIFJlc3BvbnNlXVwiKTticmVha31lbHNlIGlmKGU9PWVjKXthLm89NDtGKDE1KTtEKGEuaixhLm0sYyxcIltJbnZhbGlkIENodW5rXVwiKTtkPSExO2JyZWFrfWVsc2UgRChhLmosYS5tLGUsbnVsbCkscWMoYSxlKTtvYyhhKSYmZSE9ZmMmJmUhPWVjJiYoYS5oLmc9XCJcIixhLkM9MCk7NCE9Ynx8MCE9Yy5sZW5ndGh8fGEuaC5ofHwoYS5vPTEsRigxNiksZD0hMSk7YS5pPWEuaSYmZDtkPzA8Yy5sZW5ndGgmJiFhLmJhJiYoYS5iYT0hMCxiPWEubCxiLmc9PWEmJmIuY2EmJiFiLk0mJihiLmwuaW5mbyhcIkdyZWF0LCBubyBidWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQuIEJ5dGVzIHJlY2VpdmVkOiBcIitjLmxlbmd0aCksdmMoYiksYi5NPSEwLEYoMTEpKSk6KEQoYS5qLGEubSxcbmMsXCJbSW52YWxpZCBDaHVua2VkIFJlc3BvbnNlXVwiKSxJKGEpLHBjKGEpKTt9ay5tYj1mdW5jdGlvbigpe2lmKHRoaXMuZyl7dmFyIGE9SCh0aGlzLmcpLGI9dGhpcy5nLmphKCk7dGhpcy5DPGIubGVuZ3RoJiYobmModGhpcykscmModGhpcyxhLGIpLHRoaXMuaSYmNCE9YSYmamModGhpcykpO319O2Z1bmN0aW9uIHVjKGEsYil7dmFyIGM9YS5DLGQ9Yi5pbmRleE9mKFwiXFxuXCIsYyk7aWYoLTE9PWQpcmV0dXJuIGZjO2M9TnVtYmVyKGIuc3Vic3RyaW5nKGMsZCkpO2lmKGlzTmFOKGMpKXJldHVybiBlYztkKz0xO2lmKGQrYz5iLmxlbmd0aClyZXR1cm4gZmM7Yj1iLnNsaWNlKGQsZCtjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5KPSEwO0kodGhpcyk7fTtmdW5jdGlvbiBqYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7d2MoYSxhLlApO31cbmZ1bmN0aW9uIHdjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPVJiKHEoYS5sYixhKSxiKTt9ZnVuY3Rpb24gbmMoYSl7YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWsubGI9ZnVuY3Rpb24oKXt0aGlzLkI9bnVsbDtjb25zdCBhPURhdGUubm93KCk7MDw9YS10aGlzLlk/KEtiKHRoaXMuaix0aGlzLkEpLDIhPXRoaXMuTCYmKE9iKCksRigxNykpLEkodGhpcyksdGhpcy5vPTIscGModGhpcykpOndjKHRoaXMsdGhpcy5ZLWEpO307ZnVuY3Rpb24gcGMoYSl7MD09YS5sLkh8fGEuSnx8c2MoYS5sLGEpO31mdW5jdGlvbiBJKGEpe25jKGEpO3ZhciBiPWEuTTtiJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLnNhJiZiLnNhKCk7YS5NPW51bGw7eGIoYS5WKTtGYihhLlUpO2EuZyYmKGI9YS5nLGEuZz1udWxsLGIuYWJvcnQoKSxiLnNhKCkpO31cbmZ1bmN0aW9uIHFjKGEsYil7dHJ5e3ZhciBjPWEubDtpZigwIT1jLkgmJihjLmc9PWF8fHhjKGMuaSxhKSkpaWYoIWEuSyYmeGMoYy5pLGEpJiYzPT1jLkgpe3RyeXt2YXIgZD1jLkphLmcucGFyc2UoYik7fWNhdGNoKG0pe2Q9bnVsbDt9aWYoQXJyYXkuaXNBcnJheShkKSYmMz09ZC5sZW5ndGgpe3ZhciBlPWQ7aWYoMD09ZVswXSlhOntpZighYy51KXtpZihjLmcpaWYoYy5nLkcrM0UzPGEuRyl5YyhjKSx6YyhjKTtlbHNlIGJyZWFrIGE7QWMoYyk7RigxOCk7fX1lbHNlIGMuRmE9ZVsxXSwwPGMuRmEtYy5WJiYzNzUwMD5lWzJdJiZjLkcmJjA9PWMuQSYmIWMudiYmKGMudj1SYihxKGMuaWIsYyksNkUzKSk7aWYoMT49QmMoYy5pKSYmYy5vYSl7dHJ5e2Mub2EoKTt9Y2F0Y2gobSl7fWMub2E9dm9pZCAwO319ZWxzZSBKKGMsMTEpO31lbHNlIGlmKChhLkt8fGMuZz09YSkmJnljKGMpLCF4KGIpKWZvcihlPWMuSmEuZy5wYXJzZShiKSxiPTA7YjxlLmxlbmd0aDtiKyspe2xldCBtPWVbYl07Yy5WPVxubVswXTttPW1bMV07aWYoMj09Yy5IKWlmKFwiY1wiPT1tWzBdKXtjLks9bVsxXTtjLnBhPW1bMl07Y29uc3QgdT1tWzNdO251bGwhPXUmJihjLnJhPXUsYy5sLmluZm8oXCJWRVI9XCIrYy5yYSkpO2NvbnN0IEw9bVs0XTtudWxsIT1MJiYoYy5HYT1MLGMubC5pbmZvKFwiU1ZFUj1cIitjLkdhKSk7Y29uc3QgTGE9bVs1XTtudWxsIT1MYSYmXCJudW1iZXJcIj09PXR5cGVvZiBMYSYmMDxMYSYmKGQ9MS41KkxhLGMuTD1kLGMubC5pbmZvKFwiYmFja0NoYW5uZWxSZXF1ZXN0VGltZW91dE1zXz1cIitkKSk7ZD1jO2NvbnN0IGxhPWEuZztpZihsYSl7Y29uc3QgTWE9bGEuZz9sYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1DbGllbnQtV2lyZS1Qcm90b2NvbFwiKTpudWxsO2lmKE1hKXt2YXIgZj1kLmk7Zi5nfHwtMT09TWEuaW5kZXhPZihcInNwZHlcIikmJi0xPT1NYS5pbmRleE9mKFwicXVpY1wiKSYmLTE9PU1hLmluZGV4T2YoXCJoMlwiKXx8KGYuaj1mLmwsZi5nPW5ldyBTZXQsZi5oJiYoQ2MoZixmLmgpLGYuaD1udWxsKSk7fWlmKGQuRil7Y29uc3QgRWI9XG5sYS5nP2xhLmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtU2Vzc2lvbi1JZFwiKTpudWxsO0ViJiYoZC5EYT1FYixLKGQuSSxkLkYsRWIpKTt9fWMuSD0zO2MuaCYmYy5oLkJhKCk7Yy5jYSYmKGMuUz1EYXRlLm5vdygpLWEuRyxjLmwuaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuUytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLndhPURjKGQsZC5KP2QucGE6bnVsbCxkLlkpO2lmKGguSyl7RWMoZC5pLGgpO3ZhciBuPWgsdD1kLkw7dCYmbi5zZXRUaW1lb3V0KHQpO24uQiYmKG5jKG4pLGpjKG4pKTtkLmc9aDt9ZWxzZSBGYyhkKTswPGMuai5sZW5ndGgmJkdjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fEooYyw3KTtlbHNlIDM9PWMuSCYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/SihjLDcpOkhjKGMpOlwibm9vcFwiIT1tWzBdJiZjLmgmJmMuaC5BYShtKSxjLkE9MCk7fU9iKDQpO31jYXRjaChtKXt9fWZ1bmN0aW9uIEljKGEpe2lmKGEuWiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5aKXJldHVybiBhLlooKTtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIE1hcCYmYSBpbnN0YW5jZW9mIE1hcHx8XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBTZXQmJmEgaW5zdGFuY2VvZiBTZXQpcmV0dXJuIEFycmF5LmZyb20oYS52YWx1ZXMoKSk7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBhLnNwbGl0KFwiXCIpO2lmKGFhKGEpKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyliLnB1c2goYVtkXSk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGQgaW4gYSliW2MrK109YVtkXTtyZXR1cm4gYn1cbmZ1bmN0aW9uIEpjKGEpe2lmKGEudGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEudGEpcmV0dXJuIGEudGEoKTtpZighYS5afHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBhLlope2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgTWFwJiZhIGluc3RhbmNlb2YgTWFwKXJldHVybiBBcnJheS5mcm9tKGEua2V5cygpKTtpZighKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgU2V0JiZhIGluc3RhbmNlb2YgU2V0KSl7aWYoYWEoYSl8fFwic3RyaW5nXCI9PT10eXBlb2YgYSl7dmFyIGI9W107YT1hLmxlbmd0aDtmb3IodmFyIGM9MDtjPGE7YysrKWIucHVzaChjKTtyZXR1cm4gYn1iPVtdO2M9MDtmb3IoY29uc3QgZCBpbiBhKWJbYysrXT1kO3JldHVybiBifX19XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihhYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLHZvaWQgMCk7ZWxzZSBmb3IodmFyIGM9SmMoYSksZD1JYyhhKSxlPWQubGVuZ3RoLGY9MDtmPGU7ZisrKWIuY2FsbCh2b2lkIDAsZFtmXSxjJiZjW2ZdLGEpO312YXIgTGM9UmVnRXhwKFwiXig/OihbXjovPyMuXSspOik/KD86Ly8oPzooW15cXFxcXFxcXC8/I10qKUApPyhbXlxcXFxcXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFxcXFxcLz8jXXwkKSk/KFtePyNdKyk/KD86XFxcXD8oW14jXSopKT8oPzojKFtcXFxcc1xcXFxTXSopKT8kXCIpO2Z1bmN0aW9uIE1jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gTShhKXt0aGlzLmc9dGhpcy5zPXRoaXMuaj1cIlwiO3RoaXMubT1udWxsO3RoaXMubz10aGlzLmw9XCJcIjt0aGlzLmg9ITE7aWYoYSBpbnN0YW5jZW9mIE0pe3RoaXMuaD1hLmg7TmModGhpcyxhLmopO3RoaXMucz1hLnM7dGhpcy5nPWEuZztPYyh0aGlzLGEubSk7dGhpcy5sPWEubDt2YXIgYj1hLmk7dmFyIGM9bmV3IFBjO2MuaT1iLmk7Yi5nJiYoYy5nPW5ldyBNYXAoYi5nKSxjLmg9Yi5oKTtRYyh0aGlzLGMpO3RoaXMubz1hLm87fWVsc2UgYSYmKGI9U3RyaW5nKGEpLm1hdGNoKExjKSk/KHRoaXMuaD0hMSxOYyh0aGlzLGJbMV18fFwiXCIsITApLHRoaXMucz1SYyhiWzJdfHxcIlwiKSx0aGlzLmc9UmMoYlszXXx8XCJcIiwhMCksT2ModGhpcyxiWzRdKSx0aGlzLmw9UmMoYls1XXx8XCJcIiwhMCksUWModGhpcyxiWzZdfHxcIlwiLCEwKSx0aGlzLm89UmMoYls3XXx8XCJcIikpOih0aGlzLmg9ITEsdGhpcy5pPW5ldyBQYyhudWxsLHRoaXMuaCkpO31cbk0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzLmo7YiYmYS5wdXNoKFNjKGIsVGMsITApLFwiOlwiKTt2YXIgYz10aGlzLmc7aWYoY3x8XCJmaWxlXCI9PWIpYS5wdXNoKFwiLy9cIiksKGI9dGhpcy5zKSYmYS5wdXNoKFNjKGIsVGMsITApLFwiQFwiKSxhLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSkucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxjPXRoaXMubSxudWxsIT1jJiZhLnB1c2goXCI6XCIsU3RyaW5nKGMpKTtpZihjPXRoaXMubCl0aGlzLmcmJlwiL1wiIT1jLmNoYXJBdCgwKSYmYS5wdXNoKFwiL1wiKSxhLnB1c2goU2MoYyxcIi9cIj09Yy5jaGFyQXQoMCk/VWM6VmMsITApKTsoYz10aGlzLmkudG9TdHJpbmcoKSkmJmEucHVzaChcIj9cIixjKTsoYz10aGlzLm8pJiZhLnB1c2goXCIjXCIsU2MoYyxXYykpO3JldHVybiBhLmpvaW4oXCJcIil9O2Z1bmN0aW9uIEcoYSl7cmV0dXJuIG5ldyBNKGEpfVxuZnVuY3Rpb24gTmMoYSxiLGMpe2Euaj1jP1JjKGIsITApOmI7YS5qJiYoYS5qPWEuai5yZXBsYWNlKC86JC8sXCJcIikpO31mdW5jdGlvbiBPYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFFjKGEsYixjKXtiIGluc3RhbmNlb2YgUGM/KGEuaT1iLFhjKGEuaSxhLmgpKTooY3x8KGI9U2MoYixZYykpLGEuaT1uZXcgUGMoYixhLmgpKTt9ZnVuY3Rpb24gSyhhLGIsYyl7YS5pLnNldChiLGMpO31mdW5jdGlvbiBoYyhhKXtLKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBSYyhhLGIpe3JldHVybiBhP2I/ZGVjb2RlVVJJKGEucmVwbGFjZSgvJTI1L2csXCIlMjUyNVwiKSk6ZGVjb2RlVVJJQ29tcG9uZW50KGEpOlwiXCJ9ZnVuY3Rpb24gU2MoYSxiLGMpe3JldHVybiBcInN0cmluZ1wiPT09dHlwZW9mIGE/KGE9ZW5jb2RlVVJJKGEpLnJlcGxhY2UoYixaYyksYyYmKGE9YS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGEpOm51bGx9ZnVuY3Rpb24gWmMoYSl7YT1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIFwiJVwiKyhhPj40JjE1KS50b1N0cmluZygxNikrKGEmMTUpLnRvU3RyaW5nKDE2KX12YXIgVGM9L1sjXFwvXFw/QF0vZyxWYz0vWyNcXD86XS9nLFVjPS9bI1xcP10vZyxZYz0vWyNcXD9AXS9nLFdjPS8jL2c7ZnVuY3Rpb24gUGMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9XG5mdW5jdGlvbiBOKGEpe2EuZ3x8KGEuZz1uZXcgTWFwLGEuaD0wLGEuaSYmTWMoYS5pLGZ1bmN0aW9uKGIsYyl7YS5hZGQoZGVjb2RlVVJJQ29tcG9uZW50KGIucmVwbGFjZSgvXFwrL2csXCIgXCIpKSxjKTt9KSk7fWs9UGMucHJvdG90eXBlO2suYWRkPWZ1bmN0aW9uKGEsYil7Tih0aGlzKTt0aGlzLmk9bnVsbDthPU8odGhpcyxhKTt2YXIgYz10aGlzLmcuZ2V0KGEpO2N8fHRoaXMuZy5zZXQoYSxjPVtdKTtjLnB1c2goYik7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtmdW5jdGlvbiAkYyhhLGIpe04oYSk7Yj1PKGEsYik7YS5nLmhhcyhiKSYmKGEuaT1udWxsLGEuaC09YS5nLmdldChiKS5sZW5ndGgsYS5nLmRlbGV0ZShiKSk7fWZ1bmN0aW9uIGFkKGEsYil7TihhKTtiPU8oYSxiKTtyZXR1cm4gYS5nLmhhcyhiKX1cbmsuZm9yRWFjaD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXtjLmZvckVhY2goZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2sudGE9ZnVuY3Rpb24oKXtOKHRoaXMpO2NvbnN0IGE9QXJyYXkuZnJvbSh0aGlzLmcudmFsdWVzKCkpLGI9QXJyYXkuZnJvbSh0aGlzLmcua2V5cygpKSxjPVtdO2ZvcihsZXQgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXtjb25zdCBlPWFbZF07Zm9yKGxldCBmPTA7ZjxlLmxlbmd0aDtmKyspYy5wdXNoKGJbZF0pO31yZXR1cm4gY307ay5aPWZ1bmN0aW9uKGEpe04odGhpcyk7bGV0IGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWFkKHRoaXMsYSkmJihiPWIuY29uY2F0KHRoaXMuZy5nZXQoTyh0aGlzLGEpKSkpO2Vsc2Uge2E9QXJyYXkuZnJvbSh0aGlzLmcudmFsdWVzKCkpO2ZvcihsZXQgYz0wO2M8YS5sZW5ndGg7YysrKWI9Yi5jb25jYXQoYVtjXSk7fXJldHVybiBifTtcbmsuc2V0PWZ1bmN0aW9uKGEsYil7Tih0aGlzKTt0aGlzLmk9bnVsbDthPU8odGhpcyxhKTthZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5aKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBrYyhhLGIsYyl7JGMoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChPKGEsYiksbWEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj1BcnJheS5mcm9tKHRoaXMuZy5rZXlzKCkpO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO2NvbnN0IGY9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSksaD10aGlzLlooZCk7Zm9yKGQ9MDtkPGgubGVuZ3RoO2QrKyl7dmFyIGU9ZjtcIlwiIT09aFtkXSYmKGUrPVwiPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaFtkXSkpKTthLnB1c2goZSk7fX1yZXR1cm4gdGhpcy5pPWEuam9pbihcIiZcIil9O2Z1bmN0aW9uIE8oYSxiKXtiPVN0cmluZyhiKTthLmomJihiPWIudG9Mb3dlckNhc2UoKSk7cmV0dXJuIGJ9XG5mdW5jdGlvbiBYYyhhLGIpe2ImJiFhLmomJihOKGEpLGEuaT1udWxsLGEuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7dmFyIGU9ZC50b0xvd2VyQ2FzZSgpO2QhPWUmJigkYyh0aGlzLGQpLGtjKHRoaXMsZSxjKSk7fSxhKSk7YS5qPWI7fXZhciBiZD1jbGFzc3tjb25zdHJ1Y3RvcihhLGIpe3RoaXMuZz1hO3RoaXMubWFwPWI7fX07ZnVuY3Rpb24gY2QoYSl7dGhpcy5sPWF8fGRkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuS2EmJmwuZy5LYSgpJiZsLmcuS2EoKS5lYyk7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgZGQ9MTA7ZnVuY3Rpb24gZWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBCYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geGMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBDYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEVjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31jZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWZkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gZmQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5GKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRik7cmV0dXJuIGJ9cmV0dXJuIG1hKGEuaSl9dmFyIGdkPWNsYXNze3N0cmluZ2lmeShhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9cGFyc2UoYSl7cmV0dXJuIGwuSlNPTi5wYXJzZShhLHZvaWQgMCl9fTtmdW5jdGlvbiBoZCgpe3RoaXMuZz1uZXcgZ2Q7fWZ1bmN0aW9uIGlkKGEsYixjKXtjb25zdCBkPWN8fFwiXCI7dHJ5e0tjKGEsZnVuY3Rpb24oZSxmKXtsZXQgaD1lO3AoZSkmJihoPWpiKGUpKTtiLnB1c2goZCtmK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChoKSk7fSk7fWNhdGNoKGUpe3Rocm93IGIucHVzaChkK1widHlwZT1cIitlbmNvZGVVUklDb21wb25lbnQoXCJfYmFkbWFwXCIpKSxlO319ZnVuY3Rpb24gamQoYSxiKXtjb25zdCBjPW5ldyBHYjtpZihsLkltYWdlKXtjb25zdCBkPW5ldyBJbWFnZTtkLm9ubG9hZD1oYShrZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxiKTtkLm9uZXJyb3I9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogZXJyb3JcIiwhMSxiKTtkLm9uYWJvcnQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogYWJvcnRcIiwhMSxiKTtkLm9udGltZW91dD1oYShrZCxjLGQsXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsYik7bC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoZC5vbnRpbWVvdXQpZC5vbnRpbWVvdXQoKTt9LDFFNCk7ZC5zcmM9YTt9ZWxzZSBiKCExKTt9ZnVuY3Rpb24ga2QoYSxiLGMsZCxlKXt0cnl7Yi5vbmxvYWQ9bnVsbCxiLm9uZXJyb3I9bnVsbCxiLm9uYWJvcnQ9bnVsbCxiLm9udGltZW91dD1udWxsLGUoZCk7fWNhdGNoKGYpe319ZnVuY3Rpb24gbGQoYSl7dGhpcy5sPWEuZmN8fG51bGw7dGhpcy5qPWEub2J8fCExO31yKGxkLFViKTtsZC5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgbWQodGhpcy5sLHRoaXMuail9O2xkLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX0oe30pO2Z1bmN0aW9uIG1kKGEsYil7Qi5jYWxsKHRoaXMpO3RoaXMuRj1hO3RoaXMudT1iO3RoaXMubT12b2lkIDA7dGhpcy5yZWFkeVN0YXRlPW5kO3RoaXMuc3RhdHVzPTA7dGhpcy5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVRleHQ9dGhpcy5yZXNwb25zZT10aGlzLnN0YXR1c1RleHQ9XCJcIjt0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLmg9bnVsbDt0aGlzLkM9XCJHRVRcIjt0aGlzLkI9XCJcIjt0aGlzLmc9ITE7dGhpcy5BPXRoaXMuaj10aGlzLmw9bnVsbDt9cihtZCxCKTt2YXIgbmQ9MDtrPW1kLnByb3RvdHlwZTtcbmsub3Blbj1mdW5jdGlvbihhLGIpe2lmKHRoaXMucmVhZHlTdGF0ZSE9bmQpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwiRXJyb3IgcmVvcGVuaW5nIGEgY29ubmVjdGlvblwiKTt0aGlzLkM9YTt0aGlzLkI9Yjt0aGlzLnJlYWR5U3RhdGU9MTtvZCh0aGlzKTt9O2suc2VuZD1mdW5jdGlvbihhKXtpZigxIT10aGlzLnJlYWR5U3RhdGUpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwibmVlZCB0byBjYWxsIG9wZW4oKSBmaXJzdC4gXCIpO3RoaXMuZz0hMDtjb25zdCBiPXtoZWFkZXJzOnRoaXMudixtZXRob2Q6dGhpcy5DLGNyZWRlbnRpYWxzOnRoaXMubSxjYWNoZTp2b2lkIDB9O2EmJihiLmJvZHk9YSk7KHRoaXMuRnx8bCkuZmV0Y2gobmV3IFJlcXVlc3QodGhpcy5CLGIpKS50aGVuKHRoaXMuJGEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO307XG5rLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLnN0YXR1cz0wO3RoaXMuaiYmdGhpcy5qLmNhbmNlbChcIlJlcXVlc3Qgd2FzIGFib3J0ZWQuXCIpLmNhdGNoKCgpPT57fSk7MTw9dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLmcmJjQhPXRoaXMucmVhZHlTdGF0ZSYmKHRoaXMuZz0hMSxwZCh0aGlzKSk7dGhpcy5yZWFkeVN0YXRlPW5kO307XG5rLiRhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyYmKHRoaXMubD1hLHRoaXMuaHx8KHRoaXMuc3RhdHVzPXRoaXMubC5zdGF0dXMsdGhpcy5zdGF0dXNUZXh0PXRoaXMubC5zdGF0dXNUZXh0LHRoaXMuaD1hLmhlYWRlcnMsdGhpcy5yZWFkeVN0YXRlPTIsb2QodGhpcykpLHRoaXMuZyYmKHRoaXMucmVhZHlTdGF0ZT0zLG9kKHRoaXMpLHRoaXMuZykpKWlmKFwiYXJyYXlidWZmZXJcIj09PXRoaXMucmVzcG9uc2VUeXBlKWEuYXJyYXlCdWZmZXIoKS50aGVuKHRoaXMuWWEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBsLlJlYWRhYmxlU3RyZWFtJiZcImJvZHlcImluIGEpe3RoaXMuaj1hLmJvZHkuZ2V0UmVhZGVyKCk7aWYodGhpcy51KXtpZih0aGlzLnJlc3BvbnNlVHlwZSl0aHJvdyBFcnJvcigncmVzcG9uc2VUeXBlIG11c3QgYmUgZW1wdHkgZm9yIFwic3RyZWFtQmluYXJ5Q2h1bmtzXCIgbW9kZSByZXNwb25zZXMuJyk7dGhpcy5yZXNwb25zZT1cbltdO31lbHNlIHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIix0aGlzLkE9bmV3IFRleHREZWNvZGVyO3FkKHRoaXMpO31lbHNlIGEudGV4dCgpLnRoZW4odGhpcy5aYS5iaW5kKHRoaXMpLHRoaXMua2EuYmluZCh0aGlzKSk7fTtmdW5jdGlvbiBxZChhKXthLmoucmVhZCgpLnRoZW4oYS5YYS5iaW5kKGEpKS5jYXRjaChhLmthLmJpbmQoYSkpO31rLlhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7aWYodGhpcy51JiZhLnZhbHVlKXRoaXMucmVzcG9uc2UucHVzaChhLnZhbHVlKTtlbHNlIGlmKCF0aGlzLnUpe3ZhciBiPWEudmFsdWU/YS52YWx1ZTpuZXcgVWludDhBcnJheSgwKTtpZihiPXRoaXMuQS5kZWNvZGUoYix7c3RyZWFtOiFhLmRvbmV9KSl0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0Kz1iO31hLmRvbmU/cGQodGhpcyk6b2QodGhpcyk7Mz09dGhpcy5yZWFkeVN0YXRlJiZxZCh0aGlzKTt9fTtcbmsuWmE9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1hLHBkKHRoaXMpKTt9O2suWWE9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodGhpcy5yZXNwb25zZT1hLHBkKHRoaXMpKTt9O2sua2E9ZnVuY3Rpb24oKXt0aGlzLmcmJnBkKHRoaXMpO307ZnVuY3Rpb24gcGQoYSl7YS5yZWFkeVN0YXRlPTQ7YS5sPW51bGw7YS5qPW51bGw7YS5BPW51bGw7b2QoYSk7fWsuc2V0UmVxdWVzdEhlYWRlcj1mdW5jdGlvbihhLGIpe3RoaXMudi5hcHBlbmQoYSxiKTt9O2suZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaD90aGlzLmguZ2V0KGEudG9Mb3dlckNhc2UoKSl8fFwiXCI6XCJcIn07XG5rLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe2lmKCF0aGlzLmgpcmV0dXJuIFwiXCI7Y29uc3QgYT1bXSxiPXRoaXMuaC5lbnRyaWVzKCk7Zm9yKHZhciBjPWIubmV4dCgpOyFjLmRvbmU7KWM9Yy52YWx1ZSxhLnB1c2goY1swXStcIjogXCIrY1sxXSksYz1iLm5leHQoKTtyZXR1cm4gYS5qb2luKFwiXFxyXFxuXCIpfTtmdW5jdGlvbiBvZChhKXthLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYS5vbnJlYWR5c3RhdGVjaGFuZ2UuY2FsbChhKTt9T2JqZWN0LmRlZmluZVByb3BlcnR5KG1kLnByb3RvdHlwZSxcIndpdGhDcmVkZW50aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gXCJpbmNsdWRlXCI9PT10aGlzLm19LHNldDpmdW5jdGlvbihhKXt0aGlzLm09YT9cImluY2x1ZGVcIjpcInNhbWUtb3JpZ2luXCI7fX0pO3ZhciByZD1sLkpTT04ucGFyc2U7ZnVuY3Rpb24gUChhKXtCLmNhbGwodGhpcyk7dGhpcy5oZWFkZXJzPW5ldyBNYXA7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkk9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5HPXRoaXMudj10aGlzLkY9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5LPXNkO3RoaXMuTD10aGlzLk09ITE7fXIoUCxCKTt2YXIgc2Q9XCJcIix0ZD0vXmh0dHBzPyQvaSx1ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1QLnByb3RvdHlwZTtrLk9hPWZ1bmN0aW9uKGEpe3RoaXMuTT1hO307XG5rLmhhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZyl0aHJvdyBFcnJvcihcIltnb29nLm5ldC5YaHJJb10gT2JqZWN0IGlzIGFjdGl2ZSB3aXRoIGFub3RoZXIgcmVxdWVzdD1cIit0aGlzLkkrXCI7IG5ld1VyaT1cIithKTtiPWI/Yi50b1VwcGVyQ2FzZSgpOlwiR0VUXCI7dGhpcy5JPWE7dGhpcy5qPVwiXCI7dGhpcy5tPTA7dGhpcy5GPSExO3RoaXMuaD0hMDt0aGlzLmc9dGhpcy51P3RoaXMudS5nKCk6JGIuZygpO3RoaXMuQz10aGlzLnU/VmIodGhpcy51KTpWYigkYik7dGhpcy5nLm9ucmVhZHlzdGF0ZWNoYW5nZT1xKHRoaXMuTGEsdGhpcyk7dHJ5e3RoaXMuRz0hMCx0aGlzLmcub3BlbihiLFN0cmluZyhhKSwhMCksdGhpcy5HPSExO31jYXRjaChmKXt2ZCh0aGlzLGYpO3JldHVybn1hPWN8fFwiXCI7Yz1uZXcgTWFwKHRoaXMuaGVhZGVycyk7aWYoZClpZihPYmplY3QuZ2V0UHJvdG90eXBlT2YoZCk9PT1PYmplY3QucHJvdG90eXBlKWZvcih2YXIgZSBpbiBkKWMuc2V0KGUsZFtlXSk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PT1cbnR5cGVvZiBkLmtleXMmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiBkLmdldClmb3IoY29uc3QgZiBvZiBkLmtleXMoKSljLnNldChmLGQuZ2V0KGYpKTtlbHNlIHRocm93IEVycm9yKFwiVW5rbm93biBpbnB1dCB0eXBlIGZvciBvcHRfaGVhZGVyczogXCIrU3RyaW5nKGQpKTtkPUFycmF5LmZyb20oYy5rZXlzKCkpLmZpbmQoZj0+XCJjb250ZW50LXR5cGVcIj09Zi50b0xvd2VyQ2FzZSgpKTtlPWwuRm9ybURhdGEmJmEgaW5zdGFuY2VvZiBsLkZvcm1EYXRhOyEoMDw9a2EodWQsYikpfHxkfHxlfHxjLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7Zm9yKGNvbnN0IFtmLGhdb2YgYyl0aGlzLmcuc2V0UmVxdWVzdEhlYWRlcihmLGgpO3RoaXMuSyYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5LKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5NJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz1cbnRoaXMuTSk7dHJ5e3dkKHRoaXMpLDA8dGhpcy5CJiYoKHRoaXMuTD14ZCh0aGlzLmcpKT8odGhpcy5nLnRpbWVvdXQ9dGhpcy5CLHRoaXMuZy5vbnRpbWVvdXQ9cSh0aGlzLnVhLHRoaXMpKTp0aGlzLkE9eWIodGhpcy51YSx0aGlzLkIsdGhpcykpLHRoaXMudj0hMCx0aGlzLmcuc2VuZChhKSx0aGlzLnY9ITE7fWNhdGNoKGYpe3ZkKHRoaXMsZik7fX07ZnVuY3Rpb24geGQoYSl7cmV0dXJuIHomJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1rLnVhPWZ1bmN0aW9uKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdvb2cmJnRoaXMuZyYmKHRoaXMuaj1cIlRpbWVkIG91dCBhZnRlciBcIit0aGlzLkIrXCJtcywgYWJvcnRpbmdcIix0aGlzLm09OCxDKHRoaXMsXCJ0aW1lb3V0XCIpLHRoaXMuYWJvcnQoOCkpO307ZnVuY3Rpb24gdmQoYSxiKXthLmg9ITE7YS5nJiYoYS5sPSEwLGEuZy5hYm9ydCgpLGEubD0hMSk7YS5qPWI7YS5tPTU7eWQoYSk7emQoYSk7fVxuZnVuY3Rpb24geWQoYSl7YS5GfHwoYS5GPSEwLEMoYSxcImNvbXBsZXRlXCIpLEMoYSxcImVycm9yXCIpKTt9ay5hYm9ydD1mdW5jdGlvbihhKXt0aGlzLmcmJnRoaXMuaCYmKHRoaXMuaD0hMSx0aGlzLmw9ITAsdGhpcy5nLmFib3J0KCksdGhpcy5sPSExLHRoaXMubT1hfHw3LEModGhpcyxcImNvbXBsZXRlXCIpLEModGhpcyxcImFib3J0XCIpLHpkKHRoaXMpKTt9O2suTj1mdW5jdGlvbigpe3RoaXMuZyYmKHRoaXMuaCYmKHRoaXMuaD0hMSx0aGlzLmw9ITAsdGhpcy5nLmFib3J0KCksdGhpcy5sPSExKSx6ZCh0aGlzLCEwKSk7UC4kLk4uY2FsbCh0aGlzKTt9O2suTGE9ZnVuY3Rpb24oKXt0aGlzLnN8fCh0aGlzLkd8fHRoaXMudnx8dGhpcy5sP0FkKHRoaXMpOnRoaXMua2IoKSk7fTtrLmtiPWZ1bmN0aW9uKCl7QWQodGhpcyk7fTtcbmZ1bmN0aW9uIEFkKGEpe2lmKGEuaCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdvb2cmJighYS5DWzFdfHw0IT1IKGEpfHwyIT1hLmRhKCkpKWlmKGEudiYmND09SChhKSl5YihhLkxhLDAsYSk7ZWxzZSBpZihDKGEsXCJyZWFkeXN0YXRlY2hhbmdlXCIpLDQ9PUgoYSkpe2EuaD0hMTt0cnl7Y29uc3QgaD1hLmRhKCk7YTpzd2l0Y2goaCl7Y2FzZSAyMDA6Y2FzZSAyMDE6Y2FzZSAyMDI6Y2FzZSAyMDQ6Y2FzZSAyMDY6Y2FzZSAzMDQ6Y2FzZSAxMjIzOnZhciBiPSEwO2JyZWFrIGE7ZGVmYXVsdDpiPSExO312YXIgYztpZighKGM9Yikpe3ZhciBkO2lmKGQ9MD09PWgpe3ZhciBlPVN0cmluZyhhLkkpLm1hdGNoKExjKVsxXXx8bnVsbDshZSYmbC5zZWxmJiZsLnNlbGYubG9jYXRpb24mJihlPWwuc2VsZi5sb2NhdGlvbi5wcm90b2NvbC5zbGljZSgwLC0xKSk7ZD0hdGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUMoYSxcImNvbXBsZXRlXCIpLEMoYSxcInN1Y2Nlc3NcIik7ZWxzZSB7YS5tPVxuNjt0cnl7dmFyIGY9MjxIKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKG4pe2Y9XCJcIjt9YS5qPWYrXCIgW1wiK2EuZGEoKStcIl1cIjt5ZChhKTt9fWZpbmFsbHl7emQoYSk7fX19ZnVuY3Rpb24gemQoYSxiKXtpZihhLmcpe3dkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdPygpPT57fTpudWxsO2EuZz1udWxsO2EuQz1udWxsO2J8fEMoYSxcInJlYWR5XCIpO3RyeXtjLm9ucmVhZHlzdGF0ZWNoYW5nZT1kO31jYXRjaChlKXt9fX1mdW5jdGlvbiB3ZChhKXthLmcmJmEuTCYmKGEuZy5vbnRpbWVvdXQ9bnVsbCk7YS5BJiYobC5jbGVhclRpbWVvdXQoYS5BKSxhLkE9bnVsbCk7fWsuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmd9O2Z1bmN0aW9uIEgoYSl7cmV0dXJuIGEuZz9hLmcucmVhZHlTdGF0ZTowfWsuZGE9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIDI8SCh0aGlzKT90aGlzLmcuc3RhdHVzOi0xfWNhdGNoKGEpe3JldHVybiAtMX19O1xuay5qYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5nP3RoaXMuZy5yZXNwb25zZVRleHQ6XCJcIn1jYXRjaChhKXtyZXR1cm4gXCJcIn19O2suV2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXt2YXIgYj10aGlzLmcucmVzcG9uc2VUZXh0O2EmJjA9PWIuaW5kZXhPZihhKSYmKGI9Yi5zdWJzdHJpbmcoYS5sZW5ndGgpKTtyZXR1cm4gcmQoYil9fTtmdW5jdGlvbiBtYyhhKXt0cnl7aWYoIWEuZylyZXR1cm4gbnVsbDtpZihcInJlc3BvbnNlXCJpbiBhLmcpcmV0dXJuIGEuZy5yZXNwb25zZTtzd2l0Y2goYS5LKXtjYXNlIHNkOmNhc2UgXCJ0ZXh0XCI6cmV0dXJuIGEuZy5yZXNwb25zZVRleHQ7Y2FzZSBcImFycmF5YnVmZmVyXCI6aWYoXCJtb3pSZXNwb25zZUFycmF5QnVmZmVyXCJpbiBhLmcpcmV0dXJuIGEuZy5tb3pSZXNwb25zZUFycmF5QnVmZmVyfXJldHVybiBudWxsfWNhdGNoKGIpe3JldHVybiBudWxsfX1cbmZ1bmN0aW9uIHRjKGEpe2NvbnN0IGI9e307YT0oYS5nJiYyPD1IKGEpP2EuZy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKXx8XCJcIjpcIlwiKS5zcGxpdChcIlxcclxcblwiKTtmb3IobGV0IGQ9MDtkPGEubGVuZ3RoO2QrKyl7aWYoeChhW2RdKSljb250aW51ZTt2YXIgYz1xYihhW2RdKTtjb25zdCBlPWNbMF07Yz1jWzFdO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgYyljb250aW51ZTtjPWMudHJpbSgpO2NvbnN0IGY9YltlXXx8W107YltlXT1mO2YucHVzaChjKTt9T2EoYixmdW5jdGlvbihkKXtyZXR1cm4gZC5qb2luKFwiLCBcIil9KTt9ay5JYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm19O2suU2E9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBCZChhKXtsZXQgYj1cIlwiO05hKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBDZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1CZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpLKGEsYixjKSk7fWZ1bmN0aW9uIERkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIEVkKGEpe3RoaXMuR2E9MDt0aGlzLmo9W107dGhpcy5sPW5ldyBHYjt0aGlzLnBhPXRoaXMud2E9dGhpcy5JPXRoaXMuWT10aGlzLmc9dGhpcy5EYT10aGlzLkY9dGhpcy5uYT10aGlzLm89dGhpcy5VPXRoaXMucz1udWxsO3RoaXMuZmI9dGhpcy5XPTA7dGhpcy5jYj1EZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5HPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaD1udWxsO3RoaXMuYWE9ITA7dGhpcy5GYT10aGlzLlY9LTE7dGhpcy5iYT10aGlzLkE9dGhpcy5DPTA7dGhpcy5hYj1EZChcImJhc2VSZXRyeURlbGF5TXNcIiw1RTMsYSk7dGhpcy5oYj1EZChcInJldHJ5RGVsYXlTZWVkTXNcIiwxRTQsYSk7dGhpcy5lYj1EZChcImZvcndhcmRDaGFubmVsTWF4UmV0cmllc1wiLDIsYSk7dGhpcy54YT1EZChcImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNc1wiLDJFNCxhKTt0aGlzLnZhPWEmJmEueG1sSHR0cEZhY3Rvcnl8fHZvaWQgMDt0aGlzLkhhPWEmJmEuZGN8fCExO3RoaXMuTD1cbnZvaWQgMDt0aGlzLko9YSYmYS5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLks9XCJcIjt0aGlzLmk9bmV3IGNkKGEmJmEuY29uY3VycmVudFJlcXVlc3RMaW1pdCk7dGhpcy5KYT1uZXcgaGQ7dGhpcy5QPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5PPWEmJmEuZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzfHwhMTt0aGlzLlAmJnRoaXMuTyYmKHRoaXMuTz0hMSk7dGhpcy5iYj1hJiZhLmJjfHwhMTthJiZhLkVhJiZ0aGlzLmwuRWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLmFhPSExKTt0aGlzLmNhPSF0aGlzLlAmJnRoaXMuYWEmJmEmJmEuZGV0ZWN0QnVmZmVyaW5nUHJveHl8fCExO3RoaXMucWE9dm9pZCAwO2EmJmEubG9uZ1BvbGxpbmdUaW1lb3V0JiYwPGEubG9uZ1BvbGxpbmdUaW1lb3V0JiYodGhpcy5xYT1hLmxvbmdQb2xsaW5nVGltZW91dCk7dGhpcy5vYT12b2lkIDA7dGhpcy5TPTA7dGhpcy5NPSExO3RoaXMubWE9dGhpcy5CPW51bGw7fWs9RWQucHJvdG90eXBlO1xuay5yYT04O2suSD0xO2Z1bmN0aW9uIEhjKGEpe0ZkKGEpO2lmKDM9PWEuSCl7dmFyIGI9YS5XKyssYz1HKGEuSSk7SyhjLFwiU0lEXCIsYS5LKTtLKGMsXCJSSURcIixiKTtLKGMsXCJUWVBFXCIsXCJ0ZXJtaW5hdGVcIik7R2QoYSxjKTtiPW5ldyBiYyhhLGEubCxiKTtiLkw9MjtiLnY9aGMoRyhjKSk7Yz0hMTtpZihsLm5hdmlnYXRvciYmbC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbil0cnl7Yz1sLm5hdmlnYXRvci5zZW5kQmVhY29uKGIudi50b1N0cmluZygpLFwiXCIpO31jYXRjaChkKXt9IWMmJmwuSW1hZ2UmJigobmV3IEltYWdlKS5zcmM9Yi52LGM9ITApO2N8fChiLmc9bGMoYi5sLG51bGwpLGIuZy5oYShiLnYpKTtiLkc9RGF0ZS5ub3coKTtqYyhiKTt9SGQoYSk7fWZ1bmN0aW9uIHpjKGEpe2EuZyYmKHZjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gRmQoYSl7emMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7eWMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gR2MoYSl7aWYoIWVkKGEuaSkmJiFhLm0pe2EubT0hMDt2YXIgYj1hLk5hO3NifHx2YigpO3RifHwoc2IoKSx0Yj0hMCk7bWIuYWRkKGIsYSk7YS5DPTA7fX1mdW5jdGlvbiBJZChhLGIpe2lmKEJjKGEuaSk+PWEuaS5qLShhLm0/MTowKSlyZXR1cm4gITE7aWYoYS5tKXJldHVybiBhLmo9Yi5GLmNvbmNhdChhLmopLCEwO2lmKDE9PWEuSHx8Mj09YS5IfHxhLkM+PShhLmNiPzA6YS5lYikpcmV0dXJuICExO2EubT1SYihxKGEuTmEsYSxiKSxKZChhLGEuQykpO2EuQysrO3JldHVybiAhMH1cbmsuTmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5tKWlmKHRoaXMubT1udWxsLDE9PXRoaXMuSCl7aWYoIWEpe3RoaXMuVz1NYXRoLmZsb29yKDFFNSpNYXRoLnJhbmRvbSgpKTthPXRoaXMuVysrO2NvbnN0IGU9bmV3IGJjKHRoaXMsdGhpcy5sLGEpO2xldCBmPXRoaXMuczt0aGlzLlUmJihmPyhmPVBhKGYpLFJhKGYsdGhpcy5VKSk6Zj10aGlzLlUpO251bGwhPT10aGlzLm98fHRoaXMuT3x8KGUuST1mLGY9bnVsbCk7aWYodGhpcy5QKWE6e3ZhciBiPTA7Zm9yKHZhciBjPTA7Yzx0aGlzLmoubGVuZ3RoO2MrKyl7Yjp7dmFyIGQ9dGhpcy5qW2NdO2lmKFwiX19kYXRhX19cImluIGQubWFwJiYoZD1kLm1hcC5fX2RhdGFfXyxcInN0cmluZ1wiPT09dHlwZW9mIGQpKXtkPWQubGVuZ3RoO2JyZWFrIGJ9ZD12b2lkIDA7fWlmKHZvaWQgMD09PWQpYnJlYWs7Yis9ZDtpZig0MDk2PGIpe2I9YzticmVhayBhfWlmKDQwOTY9PT1ifHxjPT09dGhpcy5qLmxlbmd0aC0xKXtiPWMrMTticmVhayBhfX1iPTFFMzt9ZWxzZSBiPVxuMUUzO2I9S2QodGhpcyxlLGIpO2M9Ryh0aGlzLkkpO0soYyxcIlJJRFwiLGEpO0soYyxcIkNWRVJcIiwyMik7dGhpcy5GJiZLKGMsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiLHRoaXMuRik7R2QodGhpcyxjKTtmJiYodGhpcy5PP2I9XCJoZWFkZXJzPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoQmQoZikpKStcIiZcIitiOnRoaXMubyYmQ2QoYyx0aGlzLm8sZikpO0NjKHRoaXMuaSxlKTt0aGlzLmJiJiZLKGMsXCJUWVBFXCIsXCJpbml0XCIpO3RoaXMuUD8oSyhjLFwiJHJlcVwiLGIpLEsoYyxcIlNJRFwiLFwibnVsbFwiKSxlLmFhPSEwLGdjKGUsYyxudWxsKSk6Z2MoZSxjLGIpO3RoaXMuSD0yO319ZWxzZSAzPT10aGlzLkgmJihhP0xkKHRoaXMsYSk6MD09dGhpcy5qLmxlbmd0aHx8ZWQodGhpcy5pKXx8TGQodGhpcykpO307XG5mdW5jdGlvbiBMZChhLGIpe3ZhciBjO2I/Yz1iLm06Yz1hLlcrKztjb25zdCBkPUcoYS5JKTtLKGQsXCJTSURcIixhLkspO0soZCxcIlJJRFwiLGMpO0soZCxcIkFJRFwiLGEuVik7R2QoYSxkKTthLm8mJmEucyYmQ2QoZCxhLm8sYS5zKTtjPW5ldyBiYyhhLGEubCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5JPWEucyk7YiYmKGEuaj1iLkYuY29uY2F0KGEuaikpO2I9S2QoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS54YSkrTWF0aC5yb3VuZCguNSphLnhhKk1hdGgucmFuZG9tKCkpKTtDYyhhLmksYyk7Z2MoYyxkLGIpO31mdW5jdGlvbiBHZChhLGIpe2EubmEmJk5hKGEubmEsZnVuY3Rpb24oYyxkKXtLKGIsZCxjKTt9KTthLmgmJktjKHt9LGZ1bmN0aW9uKGMsZCl7SyhiLGQsYyk7fSk7fVxuZnVuY3Rpb24gS2QoYSxiLGMpe2M9TWF0aC5taW4oYS5qLmxlbmd0aCxjKTt2YXIgZD1hLmg/cShhLmguVmEsYS5oLGEpOm51bGw7YTp7dmFyIGU9YS5qO2xldCBmPS0xO2Zvcig7Oyl7Y29uc3QgaD1bXCJjb3VudD1cIitjXTstMT09Zj8wPGM/KGY9ZVswXS5nLGgucHVzaChcIm9mcz1cIitmKSk6Zj0wOmgucHVzaChcIm9mcz1cIitmKTtsZXQgbj0hMDtmb3IobGV0IHQ9MDt0PGM7dCsrKXtsZXQgbT1lW3RdLmc7Y29uc3QgdT1lW3RdLm1hcDttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt0XS5nLTEwMCksbj0hMTtlbHNlIHRyeXtpZCh1LGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goTCl7ZCYmZCh1KTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmouc3BsaWNlKDAsYyk7Yi5GPWE7cmV0dXJuIGR9ZnVuY3Rpb24gRmMoYSl7aWYoIWEuZyYmIWEudSl7YS5iYT0xO3ZhciBiPWEuTWE7c2J8fHZiKCk7dGJ8fChzYigpLHRiPSEwKTttYi5hZGQoYixhKTthLkE9MDt9fVxuZnVuY3Rpb24gQWMoYSl7aWYoYS5nfHxhLnV8fDM8PWEuQSlyZXR1cm4gITE7YS5iYSsrO2EudT1SYihxKGEuTWEsYSksSmQoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5NYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO01kKHRoaXMpO2lmKHRoaXMuY2EmJiEodGhpcy5NfHxudWxsPT10aGlzLmd8fDA+PXRoaXMuUykpe3ZhciBhPTIqdGhpcy5TO3RoaXMubC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVyIGVuYWJsZWQ6IFwiK2EpO3RoaXMuQj1SYihxKHRoaXMuamIsdGhpcyksYSk7fX07ay5qYj1mdW5jdGlvbigpe3RoaXMuQiYmKHRoaXMuQj1udWxsLHRoaXMubC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVvdXQgcmVhY2hlZC5cIiksdGhpcy5sLmluZm8oXCJCdWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQgYW5kIHN3aXRjaCB0byBsb25nLXBvbGxpbmchXCIpLHRoaXMuRz0hMSx0aGlzLk09ITAsRigxMCksemModGhpcyksTWQodGhpcykpO307XG5mdW5jdGlvbiB2YyhhKXtudWxsIT1hLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ZnVuY3Rpb24gTWQoYSl7YS5nPW5ldyBiYyhhLGEubCxcInJwY1wiLGEuYmEpO251bGw9PT1hLm8mJihhLmcuST1hLnMpO2EuZy5PPTA7dmFyIGI9RyhhLndhKTtLKGIsXCJSSURcIixcInJwY1wiKTtLKGIsXCJTSURcIixhLkspO0soYixcIkFJRFwiLGEuVik7SyhiLFwiQ0lcIixhLkc/XCIwXCI6XCIxXCIpOyFhLkcmJmEucWEmJksoYixcIlRPXCIsYS5xYSk7SyhiLFwiVFlQRVwiLFwieG1saHR0cFwiKTtHZChhLGIpO2EubyYmYS5zJiZDZChiLGEubyxhLnMpO2EuTCYmYS5nLnNldFRpbWVvdXQoYS5MKTt2YXIgYz1hLmc7YT1hLnBhO2MuTD0xO2Mudj1oYyhHKGIpKTtjLnM9bnVsbDtjLlM9ITA7aWMoYyxhKTt9ay5pYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLHpjKHRoaXMpLEFjKHRoaXMpLEYoMTkpKTt9O1xuZnVuY3Rpb24geWMoYSl7bnVsbCE9YS52JiYobC5jbGVhclRpbWVvdXQoYS52KSxhLnY9bnVsbCk7fWZ1bmN0aW9uIHNjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3ljKGEpO3ZjKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeGMoYS5pLGIpKWM9Yi5GLEVjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47aWYoMCE9YS5IKWlmKGIuaSlpZigxPT1kKXtjPWIucz9iLnMubGVuZ3RoOjA7Yj1EYXRlLm5vdygpLWIuRzt2YXIgZT1hLkM7ZD1NYigpO0MoZCxuZXcgUWIoZCxjKSk7R2MoYSk7fWVsc2UgRmMoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGIuY2F8fCEoMT09ZCYmSWQoYSxiKXx8Mj09ZCYmQWMoYSkpKXN3aXRjaChjJiYwPGMubGVuZ3RoJiYoYj1hLmksYi5pPWIuaS5jb25jYXQoYykpLGUpe2Nhc2UgMTpKKGEsNSk7YnJlYWs7Y2FzZSA0OkooYSwxMCk7YnJlYWs7Y2FzZSAzOkooYSw2KTticmVhaztkZWZhdWx0OkooYSwyKTt9fVxuZnVuY3Rpb24gSmQoYSxiKXtsZXQgYz1hLmFiK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphLmhiKTthLmlzQWN0aXZlKCl8fChjKj0yKTtyZXR1cm4gYypifWZ1bmN0aW9uIEooYSxiKXthLmwuaW5mbyhcIkVycm9yIGNvZGUgXCIrYik7aWYoMj09Yil7dmFyIGM9bnVsbDthLmgmJihjPW51bGwpO3ZhciBkPXEoYS5wYixhKTtjfHwoYz1uZXcgTShcIi8vd3d3Lmdvb2dsZS5jb20vaW1hZ2VzL2NsZWFyZG90LmdpZlwiKSxsLmxvY2F0aW9uJiZcImh0dHBcIj09bC5sb2NhdGlvbi5wcm90b2NvbHx8TmMoYyxcImh0dHBzXCIpLGhjKGMpKTtqZChjLnRvU3RyaW5nKCksZCk7fWVsc2UgRigyKTthLkg9MDthLmgmJmEuaC56YShiKTtIZChhKTtGZChhKTt9ay5wYj1mdW5jdGlvbihhKXthPyh0aGlzLmwuaW5mbyhcIlN1Y2Nlc3NmdWxseSBwaW5nZWQgZ29vZ2xlLmNvbVwiKSxGKDIpKToodGhpcy5sLmluZm8oXCJGYWlsZWQgdG8gcGluZyBnb29nbGUuY29tXCIpLEYoMSkpO307XG5mdW5jdGlvbiBIZChhKXthLkg9MDthLm1hPVtdO2lmKGEuaCl7Y29uc3QgYj1mZChhLmkpO2lmKDAhPWIubGVuZ3RofHwwIT1hLmoubGVuZ3RoKW5hKGEubWEsYiksbmEoYS5tYSxhLmopLGEuaS5pLmxlbmd0aD0wLG1hKGEuaiksYS5qLmxlbmd0aD0wO2EuaC55YSgpO319ZnVuY3Rpb24gRGMoYSxiLGMpe3ZhciBkPWMgaW5zdGFuY2VvZiBNP0coYyk6bmV3IE0oYyk7aWYoXCJcIiE9ZC5nKWImJihkLmc9YitcIi5cIitkLmcpLE9jKGQsZC5tKTtlbHNlIHt2YXIgZT1sLmxvY2F0aW9uO2Q9ZS5wcm90b2NvbDtiPWI/YitcIi5cIitlLmhvc3RuYW1lOmUuaG9zdG5hbWU7ZT0rZS5wb3J0O3ZhciBmPW5ldyBNKG51bGwpO2QmJk5jKGYsZCk7YiYmKGYuZz1iKTtlJiZPYyhmLGUpO2MmJihmLmw9Yyk7ZD1mO31jPWEuRjtiPWEuRGE7YyYmYiYmSyhkLGMsYik7SyhkLFwiVkVSXCIsYS5yYSk7R2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIGxjKGEsYixjKXtpZihiJiYhYS5KKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5IYSYmIWEudmE/bmV3IFAobmV3IGxkKHtvYjohMH0pKTpuZXcgUChhLnZhKTtiLk9hKGEuSik7cmV0dXJuIGJ9ay5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiAhIXRoaXMuaCYmdGhpcy5oLmlzQWN0aXZlKHRoaXMpfTtmdW5jdGlvbiBOZCgpe31rPU5kLnByb3RvdHlwZTtrLkJhPWZ1bmN0aW9uKCl7fTtrLkFhPWZ1bmN0aW9uKCl7fTtrLnphPWZ1bmN0aW9uKCl7fTtrLnlhPWZ1bmN0aW9uKCl7fTtrLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEwfTtrLlZhPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBPZCgpe2lmKHomJiEoMTA8PU51bWJlcihGYSkpKXRocm93IEVycm9yKFwiRW52aXJvbm1lbnRhbCBlcnJvcjogbm8gYXZhaWxhYmxlIHRyYW5zcG9ydC5cIik7fU9kLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBRKGEsYil9O1xuZnVuY3Rpb24gUShhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLmc9bmV3IEVkKGIpO3RoaXMubD1hO3RoaXMuaD1iJiZiLm1lc3NhZ2VVcmxQYXJhbXN8fG51bGw7YT1iJiZiLm1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIuY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCYmKGE/YVtcIlgtQ2xpZW50LVByb3RvY29sXCJdPVwid2ViY2hhbm5lbFwiOmE9e1wiWC1DbGllbnQtUHJvdG9jb2xcIjpcIndlYmNoYW5uZWxcIn0pO3RoaXMuZy5zPWE7YT1iJiZiLmluaXRNZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLm1lc3NhZ2VDb250ZW50VHlwZSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIl09Yi5tZXNzYWdlQ29udGVudFR5cGU6YT17XCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCI6Yi5tZXNzYWdlQ29udGVudFR5cGV9KTtiJiZiLkNhJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCJdPWIuQ2E6YT17XCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIjpiLkNhfSk7dGhpcy5nLlU9XG5hOyhhPWImJmIuY2MpJiYheChhKSYmKHRoaXMuZy5vPWEpO3RoaXMuQT1iJiZiLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMudj1iJiZiLnNlbmRSYXdKc29ufHwhMTsoYj1iJiZiLmh0dHBTZXNzaW9uSWRQYXJhbSkmJiF4KGIpJiYodGhpcy5nLkY9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgUih0aGlzKTt9cihRLEIpO1EucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaD10aGlzLmo7dGhpcy5BJiYodGhpcy5nLko9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO0YoMCk7YS5ZPWI7YS5uYT1jfHx7fTthLkc9YS5hYTthLkk9RGMoYSxudWxsLGEuWSk7R2MoYSk7fTtRLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0hjKHRoaXMuZyk7fTtcblEucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSl7dmFyIGM9e307Yy5fX2RhdGFfXz1hO2E9Yzt9ZWxzZSB0aGlzLnYmJihjPXt9LGMuX19kYXRhX189amIoYSksYT1jKTtiLmoucHVzaChuZXcgYmQoYi5mYisrLGEpKTszPT1iLkgmJkdjKGIpO307US5wcm90b3R5cGUuTj1mdW5jdGlvbigpe3RoaXMuZy5oPW51bGw7ZGVsZXRlIHRoaXMuajtIYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7US4kLk4uY2FsbCh0aGlzKTt9O1xuZnVuY3Rpb24gUGQoYSl7WWIuY2FsbCh0aGlzKTthLl9faGVhZGVyc19fJiYodGhpcy5oZWFkZXJzPWEuX19oZWFkZXJzX18sdGhpcy5zdGF0dXNDb2RlPWEuX19zdGF0dXNfXyxkZWxldGUgYS5fX2hlYWRlcnNfXyxkZWxldGUgYS5fX3N0YXR1c19fKTt2YXIgYj1hLl9fc21fXztpZihiKXthOntmb3IoY29uc3QgYyBpbiBiKXthPWM7YnJlYWsgYX1hPXZvaWQgMDt9aWYodGhpcy5pPWEpYT10aGlzLmksYj1udWxsIT09YiYmYSBpbiBiP2JbYV06dm9pZCAwO3RoaXMuZGF0YT1iO31lbHNlIHRoaXMuZGF0YT1hO31yKFBkLFliKTtmdW5jdGlvbiBRZCgpe1piLmNhbGwodGhpcyk7dGhpcy5zdGF0dXM9MTt9cihRZCxaYik7ZnVuY3Rpb24gUihhKXt0aGlzLmc9YTt9cihSLE5kKTtSLnByb3RvdHlwZS5CYT1mdW5jdGlvbigpe0ModGhpcy5nLFwiYVwiKTt9O1IucHJvdG90eXBlLkFhPWZ1bmN0aW9uKGEpe0ModGhpcy5nLG5ldyBQZChhKSk7fTtcblIucHJvdG90eXBlLnphPWZ1bmN0aW9uKGEpe0ModGhpcy5nLG5ldyBRZCgpKTt9O1IucHJvdG90eXBlLnlhPWZ1bmN0aW9uKCl7Qyh0aGlzLmcsXCJiXCIpO307ZnVuY3Rpb24gUmQoKXt0aGlzLmJsb2NrU2l6ZT0tMTt9ZnVuY3Rpb24gUygpe3RoaXMuYmxvY2tTaXplPS0xO3RoaXMuYmxvY2tTaXplPTY0O3RoaXMuZz1BcnJheSg0KTt0aGlzLm09QXJyYXkodGhpcy5ibG9ja1NpemUpO3RoaXMuaT10aGlzLmg9MDt0aGlzLnJlc2V0KCk7fXIoUyxSZCk7Uy5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmdbMF09MTczMjU4NDE5Mzt0aGlzLmdbMV09NDAyMzIzMzQxNzt0aGlzLmdbMl09MjU2MjM4MzEwMjt0aGlzLmdbM109MjcxNzMzODc4O3RoaXMuaT10aGlzLmg9MDt9O1xuZnVuY3Rpb24gU2QoYSxiLGMpe2N8fChjPTApO3ZhciBkPUFycmF5KDE2KTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpZm9yKHZhciBlPTA7MTY+ZTsrK2UpZFtlXT1iLmNoYXJDb2RlQXQoYysrKXxiLmNoYXJDb2RlQXQoYysrKTw8OHxiLmNoYXJDb2RlQXQoYysrKTw8MTZ8Yi5jaGFyQ29kZUF0KGMrKyk8PDI0O2Vsc2UgZm9yKGU9MDsxNj5lOysrZSlkW2VdPWJbYysrXXxiW2MrK108PDh8YltjKytdPDwxNnxiW2MrK108PDI0O2I9YS5nWzBdO2M9YS5nWzFdO2U9YS5nWzJdO3ZhciBmPWEuZ1szXTt2YXIgaD1iKyhmXmMmKGVeZikpK2RbMF0rMzYxNDA5MDM2MCY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbMV0rMzkwNTQwMjcxMCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxoPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzJdKzYwNjEwNTgxOSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO1xuaD1jKyhiXmUmKGZeYikpK2RbM10rMzI1MDQ0MTk2NiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZl5jJihlXmYpKStkWzRdKzQxMTg1NDgzOTkmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzVdKzEyMDAwODA0MjYmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFs2XSsyODIxNzM1OTU1JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7aD1jKyhiXmUmKGZeYikpK2RbN10rNDI0OTI2MTMxMyY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZl5jJihlXmYpKStkWzhdKzE3NzAwMzU0MTYmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzldKzIzMzY1NTI4NzkmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8XG5oPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzEwXSs0Mjk0OTI1MjMzJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7aD1jKyhiXmUmKGZeYikpK2RbMTFdKzIzMDQ1NjMxMzQmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFsxMl0rMTgwNDYwMzY4MiY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbMTNdKzQyNTQ2MjYxOTUmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsxNF0rMjc5Mjk2NTAwNiY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzE1XSsxMjM2NTM1MzI5JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhlXmYmKGNeZSkpK2RbMV0rNDEyOTE3MDc4NiY0Mjk0OTY3Mjk1O2I9YysoaDw8XG41JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFs2XSszMjI1NDY1NjY0JjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFsxMV0rNjQzNzE3NzEzJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbMF0rMzkyMTA2OTk5NCY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoZV5mJihjXmUpKStkWzVdKzM1OTM0MDg2MDUmNDI5NDk2NzI5NTtiPWMrKGg8PDUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzEwXSszODAxNjA4MyY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbMTVdKzM2MzQ0ODg5NjEmNDI5NDk2NzI5NTtlPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFs0XSszODg5NDI5NDQ4JjQyOTQ5NjcyOTU7Yz1cbmUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFs5XSs1Njg0NDY0MzgmNDI5NDk2NzI5NTtiPWMrKGg8PDUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzE0XSszMjc1MTYzNjA2JjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFszXSs0MTA3NjAzMzM1JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbOF0rMTE2MzUzMTUwMSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoZV5mJihjXmUpKStkWzEzXSsyODUwMjg1ODI5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsyXSs0MjQzNTYzNTEyJjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFs3XSsxNzM1MzI4NDczJjQyOTQ5NjcyOTU7XG5lPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFsxMl0rMjM2ODM1OTU2MiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoY15lXmYpK2RbNV0rNDI5NDU4ODczOCY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFs4XSsyMjcyMzkyODMzJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fGg+Pj4yMSk7aD1lKyhmXmJeYykrZFsxMV0rMTgzOTAzMDU2MiY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbMTRdKzQyNTk2NTc3NDAmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoY15lXmYpK2RbMV0rMjc2Mzk3NTIzNiY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFs0XSsxMjcyODkzMzUzJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fFxuaD4+PjIxKTtoPWUrKGZeYl5jKStkWzddKzQxMzk0Njk2NjQmNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzEwXSszMjAwMjM2NjU2JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzEzXSs2ODEyNzkxNzQmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbMF0rMzkzNjQzMDA3NCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbM10rMzU3MjQ0NTMxNyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbNl0rNzYwMjkxODkmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoY15lXmYpK2RbOV0rMzY1NDYwMjgwOSY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFsxMl0rXG4zODczMTUxNDYxJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fGg+Pj4yMSk7aD1lKyhmXmJeYykrZFsxNV0rNTMwNzQyNTIwJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFsyXSszMjk5NjI4NjQ1JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGVeKGN8fmYpKStkWzBdKzQwOTYzMzY0NTImNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbN10rMTEyNjg5MTQxNSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbMTRdKzI4Nzg2MTIzOTEmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzVdKzQyMzc1MzMyNDEmNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzEyXSsxNzAwNDg1NTcxJlxuNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbM10rMjM5OTk4MDY5MCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbMTBdKzQyOTM5MTU3NzMmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzFdKzIyNDAwNDQ0OTcmNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzhdKzE4NzMzMTMzNTkmNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbMTVdKzQyNjQzNTU1NTImNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzZdKzI3MzQ3Njg5MTYmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzEzXSsxMzA5MTUxNjQ5JlxuNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzRdKzQxNDk0NDQyMjYmNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbMTFdKzMxNzQ3NTY5MTcmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzJdKzcxODc4NzI1OSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbOV0rMzk1MTQ4MTc0NSY0Mjk0OTY3Mjk1O2EuZ1swXT1hLmdbMF0rYiY0Mjk0OTY3Mjk1O2EuZ1sxXT1hLmdbMV0rKGUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKSkmNDI5NDk2NzI5NTthLmdbMl09YS5nWzJdK2UmNDI5NDk2NzI5NTthLmdbM109YS5nWzNdK2YmNDI5NDk2NzI5NTt9XG5TLnByb3RvdHlwZS5qPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9YS5sZW5ndGgpO2Zvcih2YXIgYz1iLXRoaXMuYmxvY2tTaXplLGQ9dGhpcy5tLGU9dGhpcy5oLGY9MDtmPGI7KXtpZigwPT1lKWZvcig7Zjw9YzspU2QodGhpcyxhLGYpLGYrPXRoaXMuYmxvY2tTaXplO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlmb3IoO2Y8Yjspe2lmKGRbZSsrXT1hLmNoYXJDb2RlQXQoZisrKSxlPT10aGlzLmJsb2NrU2l6ZSl7U2QodGhpcyxkKTtlPTA7YnJlYWt9fWVsc2UgZm9yKDtmPGI7KWlmKGRbZSsrXT1hW2YrK10sZT09dGhpcy5ibG9ja1NpemUpe1NkKHRoaXMsZCk7ZT0wO2JyZWFrfX10aGlzLmg9ZTt0aGlzLmkrPWI7fTtcblMucHJvdG90eXBlLmw9ZnVuY3Rpb24oKXt2YXIgYT1BcnJheSgoNTY+dGhpcy5oP3RoaXMuYmxvY2tTaXplOjIqdGhpcy5ibG9ja1NpemUpLXRoaXMuaCk7YVswXT0xMjg7Zm9yKHZhciBiPTE7YjxhLmxlbmd0aC04OysrYilhW2JdPTA7dmFyIGM9OCp0aGlzLmk7Zm9yKGI9YS5sZW5ndGgtODtiPGEubGVuZ3RoOysrYilhW2JdPWMmMjU1LGMvPTI1Njt0aGlzLmooYSk7YT1BcnJheSgxNik7Zm9yKGI9Yz0wOzQ+YjsrK2IpZm9yKHZhciBkPTA7MzI+ZDtkKz04KWFbYysrXT10aGlzLmdbYl0+Pj5kJjI1NTtyZXR1cm4gYX07ZnVuY3Rpb24gVChhLGIpe3RoaXMuaD1iO2Zvcih2YXIgYz1bXSxkPSEwLGU9YS5sZW5ndGgtMTswPD1lO2UtLSl7dmFyIGY9YVtlXXwwO2QmJmY9PWJ8fChjW2VdPWYsZD0hMSk7fXRoaXMuZz1jO312YXIgc2E9e307ZnVuY3Rpb24gVGQoYSl7cmV0dXJuIC0xMjg8PWEmJjEyOD5hP3JhKGEsZnVuY3Rpb24oYil7cmV0dXJuIG5ldyBUKFtifDBdLDA+Yj8tMTowKX0pOm5ldyBUKFthfDBdLDA+YT8tMTowKX1mdW5jdGlvbiBVKGEpe2lmKGlzTmFOKGEpfHwhaXNGaW5pdGUoYSkpcmV0dXJuIFY7aWYoMD5hKXJldHVybiBXKFUoLWEpKTtmb3IodmFyIGI9W10sYz0xLGQ9MDthPj1jO2QrKyliW2RdPWEvY3wwLGMqPVVkO3JldHVybiBuZXcgVChiLDApfVxuZnVuY3Rpb24gVmQoYSxiKXtpZigwPT1hLmxlbmd0aCl0aHJvdyBFcnJvcihcIm51bWJlciBmb3JtYXQgZXJyb3I6IGVtcHR5IHN0cmluZ1wiKTtiPWJ8fDEwO2lmKDI+Ynx8MzY8Yil0aHJvdyBFcnJvcihcInJhZGl4IG91dCBvZiByYW5nZTogXCIrYik7aWYoXCItXCI9PWEuY2hhckF0KDApKXJldHVybiBXKFZkKGEuc3Vic3RyaW5nKDEpLGIpKTtpZigwPD1hLmluZGV4T2YoXCItXCIpKXRocm93IEVycm9yKCdudW1iZXIgZm9ybWF0IGVycm9yOiBpbnRlcmlvciBcIi1cIiBjaGFyYWN0ZXInKTtmb3IodmFyIGM9VShNYXRoLnBvdyhiLDgpKSxkPVYsZT0wO2U8YS5sZW5ndGg7ZSs9OCl7dmFyIGY9TWF0aC5taW4oOCxhLmxlbmd0aC1lKSxoPXBhcnNlSW50KGEuc3Vic3RyaW5nKGUsZStmKSxiKTs4PmY/KGY9VShNYXRoLnBvdyhiLGYpKSxkPWQuUihmKS5hZGQoVShoKSkpOihkPWQuUihjKSxkPWQuYWRkKFUoaCkpKTt9cmV0dXJuIGR9XG52YXIgVWQ9NDI5NDk2NzI5NixWPVRkKDApLFdkPVRkKDEpLFhkPVRkKDE2Nzc3MjE2KTtrPVQucHJvdG90eXBlO2suZWE9ZnVuY3Rpb24oKXtpZihYKHRoaXMpKXJldHVybiAtVyh0aGlzKS5lYSgpO2Zvcih2YXIgYT0wLGI9MSxjPTA7Yzx0aGlzLmcubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5EKGMpO2ErPSgwPD1kP2Q6VWQrZCkqYjtiKj1VZDt9cmV0dXJuIGF9O1xuay50b1N0cmluZz1mdW5jdGlvbihhKXthPWF8fDEwO2lmKDI+YXx8MzY8YSl0aHJvdyBFcnJvcihcInJhZGl4IG91dCBvZiByYW5nZTogXCIrYSk7aWYoWSh0aGlzKSlyZXR1cm4gXCIwXCI7aWYoWCh0aGlzKSlyZXR1cm4gXCItXCIrVyh0aGlzKS50b1N0cmluZyhhKTtmb3IodmFyIGI9VShNYXRoLnBvdyhhLDYpKSxjPXRoaXMsZD1cIlwiOzspe3ZhciBlPVlkKGMsYikuZztjPVpkKGMsZS5SKGIpKTt2YXIgZj0oKDA8Yy5nLmxlbmd0aD9jLmdbMF06Yy5oKT4+PjApLnRvU3RyaW5nKGEpO2M9ZTtpZihZKGMpKXJldHVybiBmK2Q7Zm9yKDs2PmYubGVuZ3RoOylmPVwiMFwiK2Y7ZD1mK2Q7fX07ay5EPWZ1bmN0aW9uKGEpe3JldHVybiAwPmE/MDphPHRoaXMuZy5sZW5ndGg/dGhpcy5nW2FdOnRoaXMuaH07ZnVuY3Rpb24gWShhKXtpZigwIT1hLmgpcmV0dXJuICExO2Zvcih2YXIgYj0wO2I8YS5nLmxlbmd0aDtiKyspaWYoMCE9YS5nW2JdKXJldHVybiAhMTtyZXR1cm4gITB9XG5mdW5jdGlvbiBYKGEpe3JldHVybiAtMT09YS5ofWsuWD1mdW5jdGlvbihhKXthPVpkKHRoaXMsYSk7cmV0dXJuIFgoYSk/LTE6WShhKT8wOjF9O2Z1bmN0aW9uIFcoYSl7Zm9yKHZhciBiPWEuZy5sZW5ndGgsYz1bXSxkPTA7ZDxiO2QrKyljW2RdPX5hLmdbZF07cmV0dXJuIChuZXcgVChjLH5hLmgpKS5hZGQoV2QpfWsuYWJzPWZ1bmN0aW9uKCl7cmV0dXJuIFgodGhpcyk/Vyh0aGlzKTp0aGlzfTtrLmFkZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MCxlPTA7ZTw9YjtlKyspe3ZhciBmPWQrKHRoaXMuRChlKSY2NTUzNSkrKGEuRChlKSY2NTUzNSksaD0oZj4+PjE2KSsodGhpcy5EKGUpPj4+MTYpKyhhLkQoZSk+Pj4xNik7ZD1oPj4+MTY7ZiY9NjU1MzU7aCY9NjU1MzU7Y1tlXT1oPDwxNnxmO31yZXR1cm4gbmV3IFQoYyxjW2MubGVuZ3RoLTFdJi0yMTQ3NDgzNjQ4Py0xOjApfTtcbmZ1bmN0aW9uIFpkKGEsYil7cmV0dXJuIGEuYWRkKFcoYikpfVxuay5SPWZ1bmN0aW9uKGEpe2lmKFkodGhpcyl8fFkoYSkpcmV0dXJuIFY7aWYoWCh0aGlzKSlyZXR1cm4gWChhKT9XKHRoaXMpLlIoVyhhKSk6VyhXKHRoaXMpLlIoYSkpO2lmKFgoYSkpcmV0dXJuIFcodGhpcy5SKFcoYSkpKTtpZigwPnRoaXMuWChYZCkmJjA+YS5YKFhkKSlyZXR1cm4gVSh0aGlzLmVhKCkqYS5lYSgpKTtmb3IodmFyIGI9dGhpcy5nLmxlbmd0aCthLmcubGVuZ3RoLGM9W10sZD0wO2Q8MipiO2QrKyljW2RdPTA7Zm9yKGQ9MDtkPHRoaXMuZy5sZW5ndGg7ZCsrKWZvcih2YXIgZT0wO2U8YS5nLmxlbmd0aDtlKyspe3ZhciBmPXRoaXMuRChkKT4+PjE2LGg9dGhpcy5EKGQpJjY1NTM1LG49YS5EKGUpPj4+MTYsdD1hLkQoZSkmNjU1MzU7Y1syKmQrMiplXSs9aCp0OyRkKGMsMipkKzIqZSk7Y1syKmQrMiplKzFdKz1mKnQ7JGQoYywyKmQrMiplKzEpO2NbMipkKzIqZSsxXSs9aCpuOyRkKGMsMipkKzIqZSsxKTtjWzIqZCsyKmUrMl0rPWYqbjskZChjLDIqZCsyKmUrMik7fWZvcihkPVxuMDtkPGI7ZCsrKWNbZF09Y1syKmQrMV08PDE2fGNbMipkXTtmb3IoZD1iO2Q8MipiO2QrKyljW2RdPTA7cmV0dXJuIG5ldyBUKGMsMCl9O2Z1bmN0aW9uICRkKGEsYil7Zm9yKDsoYVtiXSY2NTUzNSkhPWFbYl07KWFbYisxXSs9YVtiXT4+PjE2LGFbYl0mPTY1NTM1LGIrKzt9ZnVuY3Rpb24gYWUoYSxiKXt0aGlzLmc9YTt0aGlzLmg9Yjt9XG5mdW5jdGlvbiBZZChhLGIpe2lmKFkoYikpdGhyb3cgRXJyb3IoXCJkaXZpc2lvbiBieSB6ZXJvXCIpO2lmKFkoYSkpcmV0dXJuIG5ldyBhZShWLFYpO2lmKFgoYSkpcmV0dXJuIGI9WWQoVyhhKSxiKSxuZXcgYWUoVyhiLmcpLFcoYi5oKSk7aWYoWChiKSlyZXR1cm4gYj1ZZChhLFcoYikpLG5ldyBhZShXKGIuZyksYi5oKTtpZigzMDxhLmcubGVuZ3RoKXtpZihYKGEpfHxYKGIpKXRocm93IEVycm9yKFwic2xvd0RpdmlkZV8gb25seSB3b3JrcyB3aXRoIHBvc2l0aXZlIGludGVnZXJzLlwiKTtmb3IodmFyIGM9V2QsZD1iOzA+PWQuWChhKTspYz1iZShjKSxkPWJlKGQpO3ZhciBlPVooYywxKSxmPVooZCwxKTtkPVooZCwyKTtmb3IoYz1aKGMsMik7IVkoZCk7KXt2YXIgaD1mLmFkZChkKTswPj1oLlgoYSkmJihlPWUuYWRkKGMpLGY9aCk7ZD1aKGQsMSk7Yz1aKGMsMSk7fWI9WmQoYSxlLlIoYikpO3JldHVybiBuZXcgYWUoZSxiKX1mb3IoZT1WOzA8PWEuWChiKTspe2M9TWF0aC5tYXgoMSxNYXRoLmZsb29yKGEuZWEoKS9cbmIuZWEoKSkpO2Q9TWF0aC5jZWlsKE1hdGgubG9nKGMpL01hdGguTE4yKTtkPTQ4Pj1kPzE6TWF0aC5wb3coMixkLTQ4KTtmPVUoYyk7Zm9yKGg9Zi5SKGIpO1goaCl8fDA8aC5YKGEpOyljLT1kLGY9VShjKSxoPWYuUihiKTtZKGYpJiYoZj1XZCk7ZT1lLmFkZChmKTthPVpkKGEsaCk7fXJldHVybiBuZXcgYWUoZSxhKX1rLmdiPWZ1bmN0aW9uKGEpe3JldHVybiBZZCh0aGlzLGEpLmh9O2suYW5kPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCkmYS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaCZhLmgpfTtrLm9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCl8YS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaHxhLmgpfTtcbmsueG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCleYS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaF5hLmgpfTtmdW5jdGlvbiBiZShhKXtmb3IodmFyIGI9YS5nLmxlbmd0aCsxLGM9W10sZD0wO2Q8YjtkKyspY1tkXT1hLkQoZCk8PDF8YS5EKGQtMSk+Pj4zMTtyZXR1cm4gbmV3IFQoYyxhLmgpfWZ1bmN0aW9uIFooYSxiKXt2YXIgYz1iPj41O2IlPTMyO2Zvcih2YXIgZD1hLmcubGVuZ3RoLWMsZT1bXSxmPTA7ZjxkO2YrKyllW2ZdPTA8Yj9hLkQoZitjKT4+PmJ8YS5EKGYrYysxKTw8MzItYjphLkQoZitjKTtyZXR1cm4gbmV3IFQoZSxhLmgpfU9kLnByb3RvdHlwZS5jcmVhdGVXZWJDaGFubmVsPU9kLnByb3RvdHlwZS5nO1EucHJvdG90eXBlLnNlbmQ9US5wcm90b3R5cGUudTtRLnByb3RvdHlwZS5vcGVuPVEucHJvdG90eXBlLm07US5wcm90b3R5cGUuY2xvc2U9US5wcm90b3R5cGUuY2xvc2U7U2IuTk9fRVJST1I9MDtTYi5USU1FT1VUPTg7U2IuSFRUUF9FUlJPUj02O1RiLkNPTVBMRVRFPVwiY29tcGxldGVcIjtXYi5FdmVudFR5cGU9WGI7WGIuT1BFTj1cImFcIjtYYi5DTE9TRT1cImJcIjtYYi5FUlJPUj1cImNcIjtYYi5NRVNTQUdFPVwiZFwiO0IucHJvdG90eXBlLmxpc3Rlbj1CLnByb3RvdHlwZS5PO1AucHJvdG90eXBlLmxpc3Rlbk9uY2U9UC5wcm90b3R5cGUuUDtQLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9UC5wcm90b3R5cGUuU2E7UC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1QLnByb3RvdHlwZS5JYTtQLnByb3RvdHlwZS5nZXRTdGF0dXM9UC5wcm90b3R5cGUuZGE7UC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVAucHJvdG90eXBlLldhO1xuUC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVAucHJvdG90eXBlLmphO1AucHJvdG90eXBlLnNlbmQ9UC5wcm90b3R5cGUuaGE7UC5wcm90b3R5cGUuc2V0V2l0aENyZWRlbnRpYWxzPVAucHJvdG90eXBlLk9hO1MucHJvdG90eXBlLmRpZ2VzdD1TLnByb3RvdHlwZS5sO1MucHJvdG90eXBlLnJlc2V0PVMucHJvdG90eXBlLnJlc2V0O1MucHJvdG90eXBlLnVwZGF0ZT1TLnByb3RvdHlwZS5qO1QucHJvdG90eXBlLmFkZD1ULnByb3RvdHlwZS5hZGQ7VC5wcm90b3R5cGUubXVsdGlwbHk9VC5wcm90b3R5cGUuUjtULnByb3RvdHlwZS5tb2R1bG89VC5wcm90b3R5cGUuZ2I7VC5wcm90b3R5cGUuY29tcGFyZT1ULnByb3RvdHlwZS5YO1QucHJvdG90eXBlLnRvTnVtYmVyPVQucHJvdG90eXBlLmVhO1QucHJvdG90eXBlLnRvU3RyaW5nPVQucHJvdG90eXBlLnRvU3RyaW5nO1QucHJvdG90eXBlLmdldEJpdHM9VC5wcm90b3R5cGUuRDtULmZyb21OdW1iZXI9VTtULmZyb21TdHJpbmc9VmQ7XG52YXIgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCA9IGVzbS5jcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPZH07dmFyIGdldFN0YXRFdmVudFRhcmdldCA9IGVzbS5nZXRTdGF0RXZlbnRUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gTWIoKX07dmFyIEVycm9yQ29kZSA9IGVzbS5FcnJvckNvZGU9U2I7dmFyIEV2ZW50VHlwZSA9IGVzbS5FdmVudFR5cGU9VGI7dmFyIEV2ZW50ID0gZXNtLkV2ZW50PUU7dmFyIFN0YXQgPSBlc20uU3RhdD17eGI6MCxBYjoxLEJiOjIsVWI6MyxaYjo0LFdiOjUsWGI6NixWYjo3LFRiOjgsWWI6OSxQUk9YWToxMCxOT1BST1hZOjExLFJiOjEyLE5iOjEzLE9iOjE0LE1iOjE1LFBiOjE2LFFiOjE3LHRiOjE4LHNiOjE5LHViOjIwfTt2YXIgRmV0Y2hYbWxIdHRwRmFjdG9yeSA9IGVzbS5GZXRjaFhtbEh0dHBGYWN0b3J5PWxkO3ZhciBXZWJDaGFubmVsID0gZXNtLldlYkNoYW5uZWw9V2I7dmFyIFhocklvID0gZXNtLlhocklvPVA7dmFyIE1kNSA9IGVzbS5NZDU9Uzt2YXIgSW50ZWdlciA9IGVzbS5JbnRlZ2VyPVQ7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgSW50ZWdlciwgTWQ1LCBTdGF0LCBXZWJDaGFubmVsLCBYaHJJbywgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZXNtIGFzIGRlZmF1bHQsIGdldFN0YXRFdmVudFRhcmdldCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgU0RLX1ZFUlNJT04gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBMb2dMZXZlbCB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRmlyZWJhc2VFcnJvciwgY3JlYXRlTW9ja1VzZXJUb2tlbiwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0VUEsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc1NhZmFyaSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IEludGVnZXIsIFhocklvLCBFdmVudFR5cGUsIEVycm9yQ29kZSwgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZ2V0U3RhdEV2ZW50VGFyZ2V0LCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBXZWJDaGFubmVsLCBFdmVudCwgU3RhdCwgTWQ1IH0gZnJvbSAnQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlcic7XG5cbmNvbnN0IGIgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIGEgbnVsbGFibGUgVUlELiBNb3N0bHkgZXhpc3RzIHRvIG1ha2UgY29kZSBtb3JlXG4gKiByZWFkYWJsZS5cbiAqL1xuY2xhc3MgViB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnVpZCA9IHQ7XG4gICAgfVxuICAgIGlzQXV0aGVudGljYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy51aWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBrZXkgcmVwcmVzZW50aW5nIHRoaXMgdXNlciwgc3VpdGFibGUgZm9yIGluY2x1c2lvbiBpbiBhXG4gICAgICogZGljdGlvbmFyeS5cbiAgICAgKi8gICAgdG9LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQXV0aGVudGljYXRlZCgpID8gXCJ1aWQ6XCIgKyB0aGlzLnVpZCA6IFwiYW5vbnltb3VzLXVzZXJcIjtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0LnVpZCA9PT0gdGhpcy51aWQ7XG4gICAgfVxufVxuXG4vKiogQSB1c2VyIHdpdGggYSBudWxsIFVJRC4gKi8gVi5VTkFVVEhFTlRJQ0FURUQgPSBuZXcgVihudWxsKSwgXG4vLyBUT0RPKG1pa2VsZWhlbik6IExvb2sgaW50byBnZXR0aW5nIGEgcHJvcGVyIHVpZC1lcXVpdmFsZW50IGZvclxuLy8gbm9uLUZpcmViYXNlQXV0aCBwcm92aWRlcnMuXG5WLkdPT0dMRV9DUkVERU5USUFMUyA9IG5ldyBWKFwiZ29vZ2xlLWNyZWRlbnRpYWxzLXVpZFwiKSwgVi5GSVJTVF9QQVJUWSA9IG5ldyBWKFwiZmlyc3QtcGFydHktdWlkXCIpLCBcblYuTU9DS19VU0VSID0gbmV3IFYoXCJtb2NrLXVzZXJcIik7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5sZXQgUyA9IFwiOS4yMi4yXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBEID0gbmV3IExvZ2dlcihcIkBmaXJlYmFzZS9maXJlc3RvcmVcIik7XG5cbi8vIEhlbHBlciBtZXRob2RzIGFyZSBuZWVkZWQgYmVjYXVzZSB2YXJpYWJsZXMgY2FuJ3QgYmUgZXhwb3J0ZWQgYXMgcmVhZC93cml0ZVxuZnVuY3Rpb24gQygpIHtcbiAgICByZXR1cm4gRC5sb2dMZXZlbDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSB2ZXJib3NpdHkgb2YgQ2xvdWQgRmlyZXN0b3JlIGxvZ3MgKGRlYnVnLCBlcnJvciwgb3Igc2lsZW50KS5cbiAqXG4gKiBAcGFyYW0gbG9nTGV2ZWwgLSBUaGUgdmVyYm9zaXR5IHlvdSBzZXQgZm9yIGFjdGl2aXR5IGFuZCBlcnJvciBsb2dnaW5nLiBDYW5cbiAqICAgYmUgYW55IG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICpcbiAqICAgPHVsPlxuICogICAgIDxsaT5gZGVidWdgIGZvciB0aGUgbW9zdCB2ZXJib3NlIGxvZ2dpbmcgbGV2ZWwsIHByaW1hcmlseSBmb3JcbiAqICAgICBkZWJ1Z2dpbmcuPC9saT5cbiAqICAgICA8bGk+YGVycm9yYCB0byBsb2cgZXJyb3JzIG9ubHkuPC9saT5cbiAqICAgICA8bGk+PGNvZGU+YHNpbGVudGAgdG8gdHVybiBvZmYgbG9nZ2luZy48L2xpPlxuICogICA8L3VsPlxuICovIGZ1bmN0aW9uIHgodCkge1xuICAgIEQuc2V0TG9nTGV2ZWwodCk7XG59XG5cbmZ1bmN0aW9uIE4odCwgLi4uZSkge1xuICAgIGlmIChELmxvZ0xldmVsIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcCgkKTtcbiAgICAgICAgRC5kZWJ1ZyhgRmlyZXN0b3JlICgke1N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gayh0LCAuLi5lKSB7XG4gICAgaWYgKEQubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKCQpO1xuICAgICAgICBELmVycm9yKGBGaXJlc3RvcmUgKCR7U30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIE0odCwgLi4uZSkge1xuICAgIGlmIChELmxvZ0xldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKCQpO1xuICAgICAgICBELndhcm4oYEZpcmVzdG9yZSAoJHtTfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYWRkaXRpb25hbCBsb2cgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uICQodCkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdDtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZSA9IHQsIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gQ29udmVydGluZyB0byBKU09OIGZhaWxlZCwganVzdCBsb2cgdGhlIG9iamVjdCBkaXJlY3RseVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKiogRm9ybWF0cyBhbiBvYmplY3QgYXMgYSBKU09OIHN0cmluZywgc3VpdGFibGUgZm9yIGxvZ2dpbmcuICovXG4gICAgdmFyIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqXG4gKiBSZXR1cm5zIGBuZXZlcmAgYW5kIGNhbiBiZSB1c2VkIGluIGV4cHJlc3Npb25zOlxuICogQGV4YW1wbGVcbiAqIGxldCBmdXR1cmVWYXIgPSBmYWlsKCdub3QgaW1wbGVtZW50ZWQgeWV0Jyk7XG4gKi8gZnVuY3Rpb24gTyh0ID0gXCJVbmV4cGVjdGVkIHN0YXRlXCIpIHtcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cbiAgICBjb25zdCBlID0gYEZJUkVTVE9SRSAoJHtTfSkgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIHQ7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgdXNlIEZpcmVzdG9yZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxuICAgIC8vIGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZXJyb3IgYW5kIGFzc2VydCBtb2R1bGVzIHdoaWNoIGRvZXNuJ3Qgd29yay4pXG4gICAgdGhyb3cgayhlKSwgbmV3IEVycm9yKGUpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICovIGZ1bmN0aW9uIEYodCwgZSkge1xuICAgIHQgfHwgTygpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogVGhlIGNvZGUgb2YgY2FsbHNpdGVzIGludm9raW5nIHRoaXMgZnVuY3Rpb24gYXJlIHN0cmlwcGVkIG91dCBpbiBwcm9kdWN0aW9uXG4gKiBidWlsZHMuIEFueSBzaWRlLWVmZmVjdHMgb2YgY29kZSB3aXRoaW4gdGhlIGRlYnVnQXNzZXJ0KCkgaW52b2NhdGlvbiB3aWxsIG5vdFxuICogaGFwcGVuIGluIHRoaXMgY2FzZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBCKHQsIGUpIHtcbiAgICB0IHx8IE8oKTtcbn1cblxuLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAuIEluIG5vbi1wcm9kdWN0aW9uIGJ1aWxkcywgdmVyaWZpZXMgdGhhdCBgb2JqYCBpcyBhblxuICogaW5zdGFuY2Ugb2YgYFRgIGJlZm9yZSBjYXN0aW5nLlxuICovIGZ1bmN0aW9uIEwodCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZSkge1xuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBxID0ge1xuICAgIC8vIENhdXNlcyBhcmUgY29waWVkIGZyb206XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAgICAvKiogTm90IGFuIGVycm9yOyByZXR1cm5lZCBvbiBzdWNjZXNzLiAqL1xuICAgIE9LOiBcIm9rXCIsXG4gICAgLyoqIFRoZSBvcGVyYXRpb24gd2FzIGNhbmNlbGxlZCAodHlwaWNhbGx5IGJ5IHRoZSBjYWxsZXIpLiAqL1xuICAgIENBTkNFTExFRDogXCJjYW5jZWxsZWRcIixcbiAgICAvKiogVW5rbm93biBlcnJvciBvciBhbiBlcnJvciBmcm9tIGEgZGlmZmVyZW50IGVycm9yIGRvbWFpbi4gKi9cbiAgICBVTktOT1dOOiBcInVua25vd25cIixcbiAgICAvKipcbiAgICAgKiBDbGllbnQgc3BlY2lmaWVkIGFuIGludmFsaWQgYXJndW1lbnQuIE5vdGUgdGhhdCB0aGlzIGRpZmZlcnMgZnJvbVxuICAgICAqIEZBSUxFRF9QUkVDT05ESVRJT04uIElOVkFMSURfQVJHVU1FTlQgaW5kaWNhdGVzIGFyZ3VtZW50cyB0aGF0IGFyZVxuICAgICAqIHByb2JsZW1hdGljIHJlZ2FyZGxlc3Mgb2YgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0gKGUuZy4sIGEgbWFsZm9ybWVkIGZpbGVcbiAgICAgKiBuYW1lKS5cbiAgICAgKi9cbiAgICBJTlZBTElEX0FSR1VNRU5UOiBcImludmFsaWQtYXJndW1lbnRcIixcbiAgICAvKipcbiAgICAgKiBEZWFkbGluZSBleHBpcmVkIGJlZm9yZSBvcGVyYXRpb24gY291bGQgY29tcGxldGUuIEZvciBvcGVyYXRpb25zIHRoYXRcbiAgICAgKiBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0sIHRoaXMgZXJyb3IgbWF5IGJlIHJldHVybmVkIGV2ZW4gaWYgdGhlXG4gICAgICogb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiBGb3IgZXhhbXBsZSwgYSBzdWNjZXNzZnVsIHJlc3BvbnNlXG4gICAgICogZnJvbSBhIHNlcnZlciBjb3VsZCBoYXZlIGJlZW4gZGVsYXllZCBsb25nIGVub3VnaCBmb3IgdGhlIGRlYWRsaW5lIHRvXG4gICAgICogZXhwaXJlLlxuICAgICAqL1xuICAgIERFQURMSU5FX0VYQ0VFREVEOiBcImRlYWRsaW5lLWV4Y2VlZGVkXCIsXG4gICAgLyoqIFNvbWUgcmVxdWVzdGVkIGVudGl0eSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIHdhcyBub3QgZm91bmQuICovXG4gICAgTk9UX0ZPVU5EOiBcIm5vdC1mb3VuZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgZW50aXR5IHRoYXQgd2UgYXR0ZW1wdGVkIHRvIGNyZWF0ZSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIGFscmVhZHlcbiAgICAgKiBleGlzdHMuXG4gICAgICovXG4gICAgQUxSRUFEWV9FWElTVFM6IFwiYWxyZWFkeS1leGlzdHNcIixcbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGVyIGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiB0byBleGVjdXRlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgZm9yIHJlamVjdGlvbnMgY2F1c2VkIGJ5IGV4aGF1c3RpbmdcbiAgICAgKiBzb21lIHJlc291cmNlICh1c2UgUkVTT1VSQ0VfRVhIQVVTVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBpZiB0aGUgY2FsbGVyIGNhbiBub3QgYmUgaWRlbnRpZmllZFxuICAgICAqICh1c2UgVU5BVVRIRU5USUNBVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICovXG4gICAgUEVSTUlTU0lPTl9ERU5JRUQ6IFwicGVybWlzc2lvbi1kZW5pZWRcIixcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdCBkb2VzIG5vdCBoYXZlIHZhbGlkIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGZvciB0aGVcbiAgICAgKiBvcGVyYXRpb24uXG4gICAgICovXG4gICAgVU5BVVRIRU5USUNBVEVEOiBcInVuYXV0aGVudGljYXRlZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgcmVzb3VyY2UgaGFzIGJlZW4gZXhoYXVzdGVkLCBwZXJoYXBzIGEgcGVyLXVzZXIgcXVvdGEsIG9yIHBlcmhhcHMgdGhlXG4gICAgICogZW50aXJlIGZpbGUgc3lzdGVtIGlzIG91dCBvZiBzcGFjZS5cbiAgICAgKi9cbiAgICBSRVNPVVJDRV9FWEhBVVNURUQ6IFwicmVzb3VyY2UtZXhoYXVzdGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyByZWplY3RlZCBiZWNhdXNlIHRoZSBzeXN0ZW0gaXMgbm90IGluIGEgc3RhdGUgcmVxdWlyZWQgZm9yXG4gICAgICogdGhlIG9wZXJhdGlvbidzIGV4ZWN1dGlvbi4gRm9yIGV4YW1wbGUsIGRpcmVjdG9yeSB0byBiZSBkZWxldGVkIG1heSBiZVxuICAgICAqIG5vbi1lbXB0eSwgYW4gcm1kaXIgb3BlcmF0aW9uIGlzIGFwcGxpZWQgdG8gYSBub24tZGlyZWN0b3J5LCBldGMuXG4gICAgICpcbiAgICAgKiBBIGxpdG11cyB0ZXN0IHRoYXQgbWF5IGhlbHAgYSBzZXJ2aWNlIGltcGxlbWVudG9yIGluIGRlY2lkaW5nXG4gICAgICogYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELCBhbmQgVU5BVkFJTEFCTEU6XG4gICAgICogIChhKSBVc2UgVU5BVkFJTEFCTEUgaWYgdGhlIGNsaWVudCBjYW4gcmV0cnkganVzdCB0aGUgZmFpbGluZyBjYWxsLlxuICAgICAqICAoYikgVXNlIEFCT1JURUQgaWYgdGhlIGNsaWVudCBzaG91bGQgcmV0cnkgYXQgYSBoaWdoZXItbGV2ZWxcbiAgICAgKiAgICAgIChlLmcuLCByZXN0YXJ0aW5nIGEgcmVhZC1tb2RpZnktd3JpdGUgc2VxdWVuY2UpLlxuICAgICAqICAoYykgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVudGlsXG4gICAgICogICAgICB0aGUgc3lzdGVtIHN0YXRlIGhhcyBiZWVuIGV4cGxpY2l0bHkgZml4ZWQuIEUuZy4sIGlmIGFuIFwicm1kaXJcIlxuICAgICAqICAgICAgZmFpbHMgYmVjYXVzZSB0aGUgZGlyZWN0b3J5IGlzIG5vbi1lbXB0eSwgRkFJTEVEX1BSRUNPTkRJVElPTlxuICAgICAqICAgICAgc2hvdWxkIGJlIHJldHVybmVkIHNpbmNlIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bmxlc3NcbiAgICAgKiAgICAgIHRoZXkgaGF2ZSBmaXJzdCBmaXhlZCB1cCB0aGUgZGlyZWN0b3J5IGJ5IGRlbGV0aW5nIGZpbGVzIGZyb20gaXQuXG4gICAgICogIChkKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHBlcmZvcm1zIGNvbmRpdGlvbmFsXG4gICAgICogICAgICBSRVNUIEdldC9VcGRhdGUvRGVsZXRlIG9uIGEgcmVzb3VyY2UgYW5kIHRoZSByZXNvdXJjZSBvbiB0aGVcbiAgICAgKiAgICAgIHNlcnZlciBkb2VzIG5vdCBtYXRjaCB0aGUgY29uZGl0aW9uLiBFLmcuLCBjb25mbGljdGluZ1xuICAgICAqICAgICAgcmVhZC1tb2RpZnktd3JpdGUgb24gdGhlIHNhbWUgcmVzb3VyY2UuXG4gICAgICovXG4gICAgRkFJTEVEX1BSRUNPTkRJVElPTjogXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIsXG4gICAgLyoqXG4gICAgICogVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZCwgdHlwaWNhbGx5IGR1ZSB0byBhIGNvbmN1cnJlbmN5IGlzc3VlIGxpa2VcbiAgICAgKiBzZXF1ZW5jZXIgY2hlY2sgZmFpbHVyZXMsIHRyYW5zYWN0aW9uIGFib3J0cywgZXRjLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIEFCT1JURUQ6IFwiYWJvcnRlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgYXR0ZW1wdGVkIHBhc3QgdGhlIHZhbGlkIHJhbmdlLiBFLmcuLCBzZWVraW5nIG9yIHJlYWRpbmdcbiAgICAgKiBwYXN0IGVuZCBvZiBmaWxlLlxuICAgICAqXG4gICAgICogVW5saWtlIElOVkFMSURfQVJHVU1FTlQsIHRoaXMgZXJyb3IgaW5kaWNhdGVzIGEgcHJvYmxlbSB0aGF0IG1heSBiZSBmaXhlZFxuICAgICAqIGlmIHRoZSBzeXN0ZW0gc3RhdGUgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGEgMzItYml0IGZpbGUgc3lzdGVtIHdpbGxcbiAgICAgKiBnZW5lcmF0ZSBJTlZBTElEX0FSR1VNRU5UIGlmIGFza2VkIHRvIHJlYWQgYXQgYW4gb2Zmc2V0IHRoYXQgaXMgbm90IGluIHRoZVxuICAgICAqIHJhbmdlIFswLDJeMzItMV0sIGJ1dCBpdCB3aWxsIGdlbmVyYXRlIE9VVF9PRl9SQU5HRSBpZiBhc2tlZCB0byByZWFkIGZyb21cbiAgICAgKiBhbiBvZmZzZXQgcGFzdCB0aGUgY3VycmVudCBmaWxlIHNpemUuXG4gICAgICpcbiAgICAgKiBUaGVyZSBpcyBhIGZhaXIgYml0IG9mIG92ZXJsYXAgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAqIE9VVF9PRl9SQU5HRS4gV2UgcmVjb21tZW5kIHVzaW5nIE9VVF9PRl9SQU5HRSAodGhlIG1vcmUgc3BlY2lmaWMgZXJyb3IpXG4gICAgICogd2hlbiBpdCBhcHBsaWVzIHNvIHRoYXQgY2FsbGVycyB3aG8gYXJlIGl0ZXJhdGluZyB0aHJvdWdoIGEgc3BhY2UgY2FuXG4gICAgICogZWFzaWx5IGxvb2sgZm9yIGFuIE9VVF9PRl9SQU5HRSBlcnJvciB0byBkZXRlY3Qgd2hlbiB0aGV5IGFyZSBkb25lLlxuICAgICAqL1xuICAgIE9VVF9PRl9SQU5HRTogXCJvdXQtb2YtcmFuZ2VcIixcbiAgICAvKiogT3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCBvciBub3Qgc3VwcG9ydGVkL2VuYWJsZWQgaW4gdGhpcyBzZXJ2aWNlLiAqL1xuICAgIFVOSU1QTEVNRU5URUQ6IFwidW5pbXBsZW1lbnRlZFwiLFxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGVycm9ycy4gTWVhbnMgc29tZSBpbnZhcmlhbnRzIGV4cGVjdGVkIGJ5IHVuZGVybHlpbmcgU3lzdGVtIGhhc1xuICAgICAqIGJlZW4gYnJva2VuLiBJZiB5b3Ugc2VlIG9uZSBvZiB0aGVzZSBlcnJvcnMsIFNvbWV0aGluZyBpcyB2ZXJ5IGJyb2tlbi5cbiAgICAgKi9cbiAgICBJTlRFUk5BTDogXCJpbnRlcm5hbFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXJ2aWNlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4gVGhpcyBpcyBhIG1vc3QgbGlrZWx5IGEgdHJhbnNpZW50XG4gICAgICogY29uZGl0aW9uIGFuZCBtYXkgYmUgY29ycmVjdGVkIGJ5IHJldHJ5aW5nIHdpdGggYSBiYWNrb2ZmLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIFVOQVZBSUxBQkxFOiBcInVuYXZhaWxhYmxlXCIsXG4gICAgLyoqIFVucmVjb3ZlcmFibGUgZGF0YSBsb3NzIG9yIGNvcnJ1cHRpb24uICovXG4gICAgREFUQV9MT1NTOiBcImRhdGEtbG9zc1wiXG59O1xuXG4vKiogQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBVIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgYmFja2VuZCBlcnJvciBjb2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGVycm9yLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgY3VzdG9tIGVycm9yIGRlc2NyaXB0aW9uLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSksIHRoaXMuY29kZSA9IHQsIHRoaXMubWVzc2FnZSA9IGUsIFxuICAgICAgICAvLyBIQUNLOiBXZSB3cml0ZSBhIHRvU3RyaW5nIHByb3BlcnR5IGRpcmVjdGx5IGJlY2F1c2UgRXJyb3IgaXMgbm90IGEgcmVhbFxuICAgICAgICAvLyBjbGFzcyBhbmQgc28gaW5oZXJpdGFuY2UgZG9lcyBub3Qgd29yayBjb3JyZWN0bHkuIFdlIGNvdWxkIGFsdGVybmF0aXZlbHlcbiAgICAgICAgLy8gZG8gdGhlIHNhbWUgXCJiYWNrLWRvb3IgaW5oZXJpdGFuY2VcIiB0cmljayB0aGF0IEZpcmViYXNlRXJyb3IgZG9lcy5cbiAgICAgICAgdGhpcy50b1N0cmluZyA9ICgpID0+IGAke3RoaXMubmFtZX06IFtjb2RlPSR7dGhpcy5jb2RlfV06ICR7dGhpcy5tZXNzYWdlfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBLIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSB0LCB0aGlzLnJlamVjdCA9IGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51c2VyID0gZSwgdGhpcy50eXBlID0gXCJPQXV0aFwiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0aGlzLmhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBgQmVhcmVyICR7dH1gKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIFEge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKFYuVU5BVVRIRU5USUNBVEVEKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHJldHVybnMgYSBjb25zdGFudCB0b2tlbi4gVXNlZCBmb3JcbiAqIGVtdWxhdG9yIHRva2VuIG1vY2tpbmcuXG4gKi8gY2xhc3MgaiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnRva2VuID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgdGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpXG4gICAgICAgICAqIFRoaXMgaXNuJ3QgYWN0dWFsbHkgbmVjZXNzYXJ5IHNpbmNlIHRoZSBVSUQgbmV2ZXIgY2hhbmdlcywgYnV0IHdlIHVzZSB0aGlzXG4gICAgICAgICAqIHRvIHZlcmlmeSB0aGUgbGlzdGVuIGNvbnRyYWN0IGlzIGFkaGVyZWQgdG8gaW4gdGVzdHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy50b2tlbik7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gZSwgXG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZSh0aGlzLnRva2VuLnVzZXIpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIHoge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50ID0gdCwgXG4gICAgICAgIC8qKiBUcmFja3MgdGhlIGN1cnJlbnQgVXNlci4gKi9cbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IFYuVU5BVVRIRU5USUNBVEVELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvdW50ZXIgdXNlZCB0byBkZXRlY3QgaWYgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgYSBnZXRUb2tlbiByZXF1ZXN0IHdhc1xuICAgICAgICAgKiBvdXRzdGFuZGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaSA9IDAsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmk7XG4gICAgICAgIC8vIEEgY2hhbmdlIGxpc3RlbmVyIHRoYXQgcHJldmVudHMgZG91YmxlLWZpcmluZyBmb3IgdGhlIHNhbWUgdG9rZW4gY2hhbmdlLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0ID0+IHRoaXMuaSAhPT0gbiA/IChuID0gdGhpcy5pLCBlKHQpKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAvLyBBIHByb21pc2UgdGhhdCBjYW4gYmUgd2FpdGVkIG9uIHRvIGJsb2NrIG9uIHRoZSBuZXh0IHRva2VuIGNoYW5nZS5cbiAgICAgICAgLy8gVGhpcyBwcm9taXNlIGlzIHJlLWNyZWF0ZWQgYWZ0ZXIgZWFjaCBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgbGV0IGkgPSBuZXcgSztcbiAgICAgICAgdGhpcy5vID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pKyssIHRoaXMuY3VycmVudFVzZXIgPSB0aGlzLnUoKSwgaS5yZXNvbHZlKCksIGkgPSBuZXcgSywgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBzKHRoaXMuY3VycmVudFVzZXIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHIgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gaTtcbiAgICAgICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGUucHJvbWlzZSwgYXdhaXQgcyh0aGlzLmN1cnJlbnRVc2VyKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwgbyA9IHQgPT4ge1xuICAgICAgICAgICAgTihcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIGRldGVjdGVkXCIpLCB0aGlzLmF1dGggPSB0LCB0aGlzLmF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKSwgXG4gICAgICAgICAgICByKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudC5vbkluaXQoKHQgPT4gbyh0KSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEF1dGggcmlnaHQgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrIGJlZm9yZSB3ZVxuICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0byBzdGFydCB1cCBpbiB1bmF1dGhlbnRpY2F0ZWQgbW9kZS5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50LmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQgPyBvKHQpIDogKFxuICAgICAgICAgICAgICAgIC8vIElmIGF1dGggaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRoIGBudWxsYCB1c2VyXG4gICAgICAgICAgICAgICAgTihcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIG5vdCB5ZXQgZGV0ZWN0ZWRcIiksIGkucmVzb2x2ZSgpLCBpID0gbmV3IEspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCksIHIoKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmksIGUgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbihlKS50aGVuKChlID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSB0ID8gKE4oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiZ2V0VG9rZW4gYWJvcnRlZCBkdWUgdG8gdG9rZW4gY2hhbmdlLlwiKSwgXG4gICAgICAgIHRoaXMuZ2V0VG9rZW4oKSkgOiBlID8gKEYoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5hY2Nlc3NUb2tlbiksIG5ldyBHKGUuYWNjZXNzVG9rZW4sIHRoaXMuY3VycmVudFVzZXIpKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbiAgICAvLyBBdXRoLmdldFVpZCgpIGNhbiByZXR1cm4gbnVsbCBldmVuIHdpdGggYSB1c2VyIGxvZ2dlZCBpbi4gSXQgaXMgYmVjYXVzZVxuICAgIC8vIGdldFVpZCgpIGlzIHN5bmNocm9ub3VzLCBidXQgdGhlIGF1dGggY29kZSBwb3B1bGF0aW5nIFVpZCBpcyBhc3luY2hyb25vdXMuXG4gICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGluIHRoZSBBdXRoVG9rZW5MaXN0ZW5lciBjYWxsYmFja1xuICAgIC8vIHRvIGd1YXJhbnRlZSB0byBnZXQgdGhlIGFjdHVhbCB1c2VyLlxuICAgIHUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLmdldFVpZCgpO1xuICAgICAgICByZXR1cm4gRihudWxsID09PSB0IHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpLCBuZXcgVih0KTtcbiAgICB9XG59XG5cbi8qXG4gKiBGaXJzdFBhcnR5VG9rZW4gcHJvdmlkZXMgYSBmcmVzaCB0b2tlbiBlYWNoIHRpbWUgaXRzIHZhbHVlXG4gKiBpcyByZXF1ZXN0ZWQsIGJlY2F1c2UgaWYgdGhlIHRva2VuIGlzIHRvbyBvbGQsIHJlcXVlc3RzIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKiBUZWNobmljYWxseSB0aGlzIG1heSBubyBsb25nZXIgYmUgbmVjZXNzYXJ5IHNpbmNlIHRoZSBTREsgc2hvdWxkIGdyYWNlZnVsbHlcbiAqIHJlY292ZXIgZnJvbSB1bmF1dGhlbnRpY2F0ZWQgZXJyb3JzIChzZWUgYi8zMzE0NzgxOCBmb3IgY29udGV4dCksIGJ1dCBpdCdzXG4gKiBzYWZlciB0byBrZWVwIHRoZSBpbXBsZW1lbnRhdGlvbiBhcy1pcy5cbiAqLyBjbGFzcyBXIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuaCA9IHQsIHRoaXMubCA9IGUsIHRoaXMubSA9IG4sIHRoaXMudHlwZSA9IFwiRmlyc3RQYXJ0eVwiLCB0aGlzLnVzZXIgPSBWLkZJUlNUX1BBUlRZLCBcbiAgICAgICAgdGhpcy5nID0gbmV3IE1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBhdXRob3JpemF0aW9uIHRva2VuLCB1c2luZyBhIHByb3ZpZGVkIGZhY3RvcnkgZnVuY3Rpb24sIG9yIHJldHVyblxuICAgICAqIG51bGwuXG4gICAgICovICAgIHAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm0gPyB0aGlzLm0oKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBoZWFkZXJzKCkge1xuICAgICAgICB0aGlzLmcuc2V0KFwiWC1Hb29nLUF1dGhVc2VyXCIsIHRoaXMuaCk7XG4gICAgICAgIC8vIFVzZSBhcnJheSBub3RhdGlvbiB0byBwcmV2ZW50IG1pbmlmaWNhdGlvblxuICAgICAgICBjb25zdCB0ID0gdGhpcy5wKCk7XG4gICAgICAgIHJldHVybiB0ICYmIHRoaXMuZy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIHQpLCB0aGlzLmwgJiYgdGhpcy5nLnNldChcIlgtR29vZy1JYW0tQXV0aG9yaXphdGlvbi1Ub2tlblwiLCB0aGlzLmwpLCBcbiAgICAgICAgdGhpcy5nO1xuICAgIH1cbn1cblxuLypcbiAqIFByb3ZpZGVzIHVzZXIgY3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIHRoZSBGaXJlc3RvcmUgSmF2YVNjcmlwdCBTREtcbiAqIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlciwgdXNpbmcgdGVjaG5pcXVlIHRoYXQgaXMgb25seSBhdmFpbGFibGVcbiAqIHRvIGFwcGxpY2F0aW9ucyBob3N0ZWQgYnkgR29vZ2xlLlxuICovIGNsYXNzIEgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5oID0gdCwgdGhpcy5sID0gZSwgdGhpcy5tID0gbjtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFcodGhpcy5oLCB0aGlzLmwsIHRoaXMubSkpO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVpZC5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKFYuRklSU1RfUEFSVFkpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxufVxuXG5jbGFzcyBKIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0LCB0aGlzLnR5cGUgPSBcIkFwcENoZWNrXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHQgJiYgdC5sZW5ndGggPiAwICYmIHRoaXMuaGVhZGVycy5zZXQoXCJ4LWZpcmViYXNlLWFwcGNoZWNrXCIsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuY2xhc3MgWSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkkgPSB0LCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID0gbnVsbCwgdGhpcy5UID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdCA9PiB7XG4gICAgICAgICAgICBudWxsICE9IHQuZXJyb3IgJiYgTihcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBFcnJvciBnZXR0aW5nIEFwcCBDaGVjayB0b2tlbjsgdXNpbmcgcGxhY2Vob2xkZXIgdG9rZW4gaW5zdGVhZC4gRXJyb3I6ICR7dC5lcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudG9rZW4gIT09IHRoaXMuVDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlQgPSB0LnRva2VuLCBOKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYFJlY2VpdmVkICR7biA/IFwibmV3XCIgOiBcImV4aXN0aW5nXCJ9IHRva2VuLmApLCBcbiAgICAgICAgICAgIG4gPyBlKHQudG9rZW4pIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubyA9IGUgPT4ge1xuICAgICAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBuKGUpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHMgPSB0ID0+IHtcbiAgICAgICAgICAgIE4oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIGRldGVjdGVkXCIpLCB0aGlzLmFwcENoZWNrID0gdCwgdGhpcy5hcHBDaGVjay5hZGRUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuSS5vbkluaXQoKHQgPT4gcyh0KSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEFwcENoZWNrIGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yay5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcENoZWNrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuSS5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gcyh0KSA6IFxuICAgICAgICAgICAgICAgIC8vIElmIEFwcENoZWNrIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aG91dCBpdC5cbiAgICAgICAgICAgICAgICBOKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBub3QgeWV0IGRldGVjdGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID8gdGhpcy5hcHBDaGVjay5nZXRUb2tlbih0KS50aGVuKCh0ID0+IHQgPyAoRihcInN0cmluZ1wiID09IHR5cGVvZiB0LnRva2VuKSwgXG4gICAgICAgIHRoaXMuVCA9IHQudG9rZW4sIG5ldyBKKHQudG9rZW4pKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hcHBDaGVjayAmJiB0aGlzLmFwcENoZWNrLnJlbW92ZVRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gQXBwQ2hlY2sgdG9rZW4gcHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgWCB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEooXCJcIikpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHt9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIENyZWRlbnRpYWxzUHJvdmlkZXIgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mXG4gKiB0aGUgY3JlZGVudGlhbHMgcGFzc2VkIGluLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYG5CeXRlc2Agb2YgcmFuZG9tIGJ5dGVzLlxuICpcbiAqIElmIGBuQnl0ZXMgPCAwYCAsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5mdW5jdGlvbiBaKHQpIHtcbiAgICAvLyBQb2x5ZmlsbHMgZm9yIElFIGFuZCBXZWJXb3JrZXIgYnkgdXNpbmcgYHNlbGZgIGFuZCBgbXNDcnlwdG9gIHdoZW4gYGNyeXB0b2AgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBjb25zdCBlID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmICYmIChzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvKSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgIGlmIChlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5nZXRSYW5kb21WYWx1ZXMpIGUuZ2V0UmFuZG9tVmFsdWVzKG4pOyBlbHNlIFxuICAgIC8vIEZhbGxzIGJhY2sgdG8gTWF0aC5yYW5kb21cbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgbltlXSA9IE1hdGguZmxvb3IoMjU2ICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHR0IHtcbiAgICBzdGF0aWMgQSgpIHtcbiAgICAgICAgLy8gQWxwaGFudW1lcmljIGNoYXJhY3RlcnNcbiAgICAgICAgY29uc3QgdCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIiwgZSA9IE1hdGguZmxvb3IoMjU2IC8gdC5sZW5ndGgpICogdC5sZW5ndGg7XG4gICAgICAgIC8vIFRoZSBsYXJnZXN0IGJ5dGUgdmFsdWUgdGhhdCBpcyBhIG11bHRpcGxlIG9mIGBjaGFyLmxlbmd0aGAuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBcIlwiO1xuICAgICAgICBmb3IgKDtuLmxlbmd0aCA8IDIwOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBaKDQwKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5sZW5ndGg7ICsraSkgXG4gICAgICAgICAgICAvLyBPbmx5IGFjY2VwdCB2YWx1ZXMgdGhhdCBhcmUgWzAsIG1heE11bHRpcGxlKSwgdGhpcyBlbnN1cmVzIHRoZXkgY2FuXG4gICAgICAgICAgICAvLyBiZSBldmVubHkgbWFwcGVkIHRvIGluZGljZXMgb2YgYGNoYXJzYCB2aWEgYSBtb2R1bG8gb3BlcmF0aW9uLlxuICAgICAgICAgICAgbi5sZW5ndGggPCAyMCAmJiBzW2ldIDwgZSAmJiAobiArPSB0LmNoYXJBdChzW2ldICUgdC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGV0KHQsIGUpIHtcbiAgICByZXR1cm4gdCA8IGUgPyAtMSA6IHQgPiBlID8gMSA6IDA7XG59XG5cbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBhcnJheXMgdXNpbmcgaXNFcXVhbCgpLiAqLyBmdW5jdGlvbiBudCh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHQubGVuZ3RoID09PSBlLmxlbmd0aCAmJiB0LmV2ZXJ5KCgodCwgcykgPT4gbih0LCBlW3NdKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltbWVkaWF0ZSBsZXhpY29ncmFwaGljYWxseS1mb2xsb3dpbmcgc3RyaW5nLiBUaGlzIGlzIHVzZWZ1bCB0b1xuICogY29uc3RydWN0IGFuIGluY2x1c2l2ZSByYW5nZSBmb3IgaW5kZXhlZGRiIGl0ZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBzdCh0KSB7XG4gICAgLy8gUmV0dXJuIHRoZSBpbnB1dCBzdHJpbmcsIHdpdGggYW4gYWRkaXRpb25hbCBOVUwgYnl0ZSBhcHBlbmRlZC5cbiAgICByZXR1cm4gdCArIFwiXFwwXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUaGUgZWFybGllc3QgZGF0ZSBzdXBwb3J0ZWQgYnkgRmlyZXN0b3JlIHRpbWVzdGFtcHMgKDAwMDEtMDEtMDFUMDA6MDA6MDBaKS5cbi8qKlxuICogQSBgVGltZXN0YW1wYCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yXG4gKiBjYWxlbmRhciwgcmVwcmVzZW50ZWQgYXMgc2Vjb25kcyBhbmQgZnJhY3Rpb25zIG9mIHNlY29uZHMgYXQgbmFub3NlY29uZFxuICogcmVzb2x1dGlvbiBpbiBVVEMgRXBvY2ggdGltZS5cbiAqXG4gKiBJdCBpcyBlbmNvZGVkIHVzaW5nIHRoZSBQcm9sZXB0aWMgR3JlZ29yaWFuIENhbGVuZGFyIHdoaWNoIGV4dGVuZHMgdGhlXG4gKiBHcmVnb3JpYW4gY2FsZW5kYXIgYmFja3dhcmRzIHRvIHllYXIgb25lLiBJdCBpcyBlbmNvZGVkIGFzc3VtaW5nIGFsbCBtaW51dGVzXG4gKiBhcmUgNjAgc2Vjb25kcyBsb25nLCBpLmUuIGxlYXAgc2Vjb25kcyBhcmUgXCJzbWVhcmVkXCIgc28gdGhhdCBubyBsZWFwIHNlY29uZFxuICogdGFibGUgaXMgbmVlZGVkIGZvciBpbnRlcnByZXRhdGlvbi4gUmFuZ2UgaXMgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICogOTk5OS0xMi0zMVQyMzo1OTo1OS45OTk5OTk5OTlaLlxuICpcbiAqIEZvciBleGFtcGxlcyBhbmQgZnVydGhlciBzcGVjaWZpY2F0aW9ucywgcmVmZXIgdG8gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9wcm90b2J1Zi9ibG9iL21hc3Rlci9zcmMvZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5wcm90byB8IFRpbWVzdGFtcCBkZWZpbml0aW9ufS5cbiAqL1xuY2xhc3MgaXQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gICAgICogICAgIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0gbmFub3NlY29uZHMgLSBUaGUgbm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kXG4gICAgICogICAgIHJlc29sdXRpb24uIE5lZ2F0aXZlIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlXG4gICAgICogICAgIG5vbi1uZWdhdGl2ZSBuYW5vc2Vjb25kcyB2YWx1ZXMgdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmVcbiAgICAgKiAgICAgZnJvbSAwIHRvIDk5OSw5OTksOTk5IGluY2x1c2l2ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmQgcmVzb2x1dGlvbi4qXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBpZiAodGhpcy5zZWNvbmRzID0gdCwgdGhpcy5uYW5vc2Vjb25kcyA9IGUsIGUgPCAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgaWYgKGUgPj0gMWU5KSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgaWYgKHQgPCAtNjIxMzU1OTY4MDApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBicmVhayBpbiB0aGUgeWVhciAxMCwwMDAuXG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gMjUzNDAyMzAwODAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCB3aXRoIHRoZSBjdXJyZW50IGRhdGUsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBuZXcgdGltZXN0YW1wIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgbm93KCkge1xuICAgICAgICByZXR1cm4gaXQuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gaW5pdGlhbGl6ZSB0aGUgYFRpbWVzdGFtcGAgZnJvbS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIGZyb21EYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIGl0LmZyb21NaWxsaXModC5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pbGxpc2Vjb25kcyAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKi8gICAgc3RhdGljIGZyb21NaWxsaXModCkge1xuICAgICAgICBjb25zdCBlID0gTWF0aC5mbG9vcih0IC8gMWUzKSwgbiA9IE1hdGguZmxvb3IoMWU2ICogKHQgLSAxZTMgKiBlKSk7XG4gICAgICAgIHJldHVybiBuZXcgaXQoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QuIFRoaXMgY29udmVyc2lvblxuICAgICAqIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uIHNpbmNlIGBEYXRlYCBvYmplY3RzIG9ubHkgc3VwcG9ydCBtaWxsaXNlY29uZFxuICAgICAqIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhc1xuICAgICAqICAgICB0aGlzIGBUaW1lc3RhbXBgLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKi8gICAgdG9EYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy50b01pbGxpcygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIG51bWVyaWMgdGltZXN0YW1wIChpbiBtaWxsaXNlY29uZHMgc2luY2VcbiAgICAgKiBlcG9jaCkuIFRoaXMgb3BlcmF0aW9uIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBvaW50IGluIHRpbWUgY29ycmVzcG9uZGluZyB0byB0aGlzIHRpbWVzdGFtcCwgcmVwcmVzZW50ZWQgYXNcbiAgICAgKiAgICAgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi8gICAgdG9NaWxsaXMoKSB7XG4gICAgICAgIHJldHVybiAxZTMgKiB0aGlzLnNlY29uZHMgKyB0aGlzLm5hbm9zZWNvbmRzIC8gMWU2O1xuICAgIH1cbiAgICBfY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vjb25kcyA9PT0gdC5zZWNvbmRzID8gZXQodGhpcy5uYW5vc2Vjb25kcywgdC5uYW5vc2Vjb25kcykgOiBldCh0aGlzLnNlY29uZHMsIHQuc2Vjb25kcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFRpbWVzdGFtcGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQuc2Vjb25kcyA9PT0gdGhpcy5zZWNvbmRzICYmIHQubmFub3NlY29uZHMgPT09IHRoaXMubmFub3NlY29uZHM7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdGV4dHVhbCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiVGltZXN0YW1wKHNlY29uZHM9XCIgKyB0aGlzLnNlY29uZHMgKyBcIiwgbmFub3NlY29uZHM9XCIgKyB0aGlzLm5hbm9zZWNvbmRzICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogdGhpcy5zZWNvbmRzLFxuICAgICAgICAgICAgbmFub3NlY29uZHM6IHRoaXMubmFub3NlY29uZHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBvYmplY3QgdG8gYSBwcmltaXRpdmUgc3RyaW5nLCB3aGljaCBhbGxvd3MgYFRpbWVzdGFtcGAgb2JqZWN0c1xuICAgICAqIHRvIGJlIGNvbXBhcmVkIHVzaW5nIHRoZSBgPmAsIGA8PWAsIGA+PWAgYW5kIGA+YCBvcGVyYXRvcnMuXG4gICAgICovICAgIHZhbHVlT2YoKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHJldHVybnMgYSBzdHJpbmcgb2YgdGhlIGZvcm0gPHNlY29uZHM+LjxuYW5vc2Vjb25kcz4gd2hlcmVcbiAgICAgICAgLy8gPHNlY29uZHM+IGlzIHRyYW5zbGF0ZWQgdG8gaGF2ZSBhIG5vbi1uZWdhdGl2ZSB2YWx1ZSBhbmQgYm90aCA8c2Vjb25kcz5cbiAgICAgICAgLy8gYW5kIDxuYW5vc2Vjb25kcz4gYXJlIGxlZnQtcGFkZGVkIHdpdGggemVyb2VzIHRvIGJlIGEgY29uc2lzdGVudCBsZW5ndGguXG4gICAgICAgIC8vIFN0cmluZ3Mgd2l0aCB0aGlzIGZvcm1hdCB0aGVuIGhhdmUgYSBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZyB0aGF0IG1hdGNoZXNcbiAgICAgICAgLy8gdGhlIGV4cGVjdGVkIG9yZGVyaW5nLiBUaGUgPHNlY29uZHM+IHRyYW5zbGF0aW9uIGlzIGRvbmUgdG8gYXZvaWQgaGF2aW5nXG4gICAgICAgIC8vIGEgbGVhZGluZyBuZWdhdGl2ZSBzaWduIChpLmUuIGEgbGVhZGluZyAnLScgY2hhcmFjdGVyKSBpbiBpdHMgc3RyaW5nXG4gICAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3aGljaCB3b3VsZCBhZmZlY3QgaXRzIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5zZWNvbmRzIC0gLTYyMTM1NTk2ODAwO1xuICAgICAgICAvLyBOb3RlOiBVcCB0byAxMiBkZWNpbWFsIGRpZ2l0cyBhcmUgcmVxdWlyZWQgdG8gcmVwcmVzZW50IGFsbCB2YWxpZFxuICAgICAgICAvLyAnc2Vjb25kcycgdmFsdWVzLlxuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcodCkucGFkU3RhcnQoMTIsIFwiMFwiKSArIFwiLlwiICsgU3RyaW5nKHRoaXMubmFub3NlY29uZHMpLnBhZFN0YXJ0KDksIFwiMFwiKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdmVyc2lvbiBvZiBhIGRvY3VtZW50IGluIEZpcmVzdG9yZS4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgdmVyc2lvblxuICogdGltZXN0YW1wLCBzdWNoIGFzIHVwZGF0ZV90aW1lIG9yIHJlYWRfdGltZS5cbiAqLyBjbGFzcyBydCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVGltZXN0YW1wKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBydCh0KTtcbiAgICB9XG4gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBydChuZXcgaXQoMCwgMCkpO1xuICAgIH1cbiAgICBzdGF0aWMgbWF4KCkge1xuICAgICAgICByZXR1cm4gbmV3IHJ0KG5ldyBpdCgyNTM0MDIzMDA3OTksIDk5OTk5OTk5OSkpO1xuICAgIH1cbiAgICBjb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuX2NvbXBhcmVUbyh0LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuaXNFcXVhbCh0LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbnVtYmVyIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZXJzaW9uIGZvciB1c2UgaW4gc3BlYyB0ZXN0cy4gKi8gICAgdG9NaWNyb3NlY29uZHMoKSB7XG4gICAgICAgIC8vIENvbnZlcnQgdG8gbWljcm9zZWNvbmRzLlxuICAgICAgICByZXR1cm4gMWU2ICogdGhpcy50aW1lc3RhbXAuc2Vjb25kcyArIHRoaXMudGltZXN0YW1wLm5hbm9zZWNvbmRzIC8gMWUzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiU25hcHNob3RWZXJzaW9uKFwiICsgdGhpcy50aW1lc3RhbXAudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICB0b1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGF0aCByZXByZXNlbnRzIGFuIG9yZGVyZWQgc2VxdWVuY2Ugb2Ygc3RyaW5nIHNlZ21lbnRzLlxuICovXG5jbGFzcyBvdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB2b2lkIDAgPT09IGUgPyBlID0gMCA6IGUgPiB0Lmxlbmd0aCAmJiBPKCksIHZvaWQgMCA9PT0gbiA/IG4gPSB0Lmxlbmd0aCAtIGUgOiBuID4gdC5sZW5ndGggLSBlICYmIE8oKSwgXG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSB0LCB0aGlzLm9mZnNldCA9IGUsIHRoaXMubGVuID0gbjtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IG90LmNvbXBhcmF0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIGNoaWxkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2Ygb3QgPyB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQpO1xuICAgICAgICB9KSkgOiBlLnB1c2godCksIHRoaXMuY29uc3RydWN0KGUpO1xuICAgIH1cbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovICAgIGxpbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9wRmlyc3QodCkge1xuICAgICAgICByZXR1cm4gdCA9IHZvaWQgMCA9PT0gdCA/IDEgOiB0LCB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCArIHQsIHRoaXMubGVuZ3RoIC0gdCk7XG4gICAgfVxuICAgIHBvcExhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZmlyc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XG4gICAgfVxuICAgIGxhc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXQgKyB0XTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBpc1ByZWZpeE9mKHQpIHtcbiAgICAgICAgaWYgKHQubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaXNJbW1lZGlhdGVQYXJlbnRPZih0KSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCArIDEgIT09IHQubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICBmb3IgKGxldCBlID0gdGhpcy5vZmZzZXQsIG4gPSB0aGlzLmxpbWl0KCk7IGUgPCBuOyBlKyspIHQodGhpcy5zZWdtZW50c1tlXSk7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBNYXRoLm1pbih0Lmxlbmd0aCwgZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG47IHMrKykge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KHMpLCBpID0gZS5nZXQocyk7XG4gICAgICAgICAgICBpZiAobiA8IGkpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChuID4gaSkgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoIDwgZS5sZW5ndGggPyAtMSA6IHQubGVuZ3RoID4gZS5sZW5ndGggPyAxIDogMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyByZXNvdXJjZXMgKGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMpXG4gKiB3aXRoaW4gRmlyZXN0b3JlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIHV0IGV4dGVuZHMgb3Qge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgdXQodCwgZSwgbik7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oXCIvXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gdGhlIGdpdmVuIHNsYXNoLWRlbGltaXRlZCBzdHJpbmcuIElmIG11bHRpcGxlXG4gICAgICogYXJndW1lbnRzIGFyZSBwcm92aWRlZCwgYWxsIGNvbXBvbmVudHMgYXJlIGNvbWJpbmVkLiBMZWFkaW5nIGFuZCB0cmFpbGluZ1xuICAgICAqIHNsYXNoZXMgZnJvbSBhbGwgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TdHJpbmcoLi4udCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSB7XG4gICAgICAgICAgICBpZiAobi5pbmRleE9mKFwiLy9cIikgPj0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBzZWdtZW50ICgke259KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLmApO1xuICAgICAgICAgICAgLy8gU3RyaXAgbGVhZGluZyBhbmQgdHJhbGluZyBzbGFzaGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKC4uLm4uc3BsaXQoXCIvXCIpLmZpbHRlcigodCA9PiB0Lmxlbmd0aCA+IDApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB1dChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1dChbXSk7XG4gICAgfVxufVxuXG5jb25zdCBjdCA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xuXG4vKipcbiAqIEEgZG90LXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHN1Yi1vYmplY3RzIHdpdGhpbiBhIGRvY3VtZW50LlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgYXQgZXh0ZW5kcyBvdCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhdCh0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJpbmcgY291bGQgYmUgdXNlZCBhcyBhIHNlZ21lbnQgaW4gYSBmaWVsZCBwYXRoXG4gICAgICogd2l0aG91dCBlc2NhcGluZy5cbiAgICAgKi8gICAgc3RhdGljIGlzVmFsaWRJZGVudGlmaWVyKHQpIHtcbiAgICAgICAgcmV0dXJuIGN0LnRlc3QodCk7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLm1hcCgodCA9PiAodCA9IHQucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL2AvZywgXCJcXFxcYFwiKSwgXG4gICAgICAgIGF0LmlzVmFsaWRJZGVudGlmaWVyKHQpIHx8ICh0ID0gXCJgXCIgKyB0ICsgXCJgXCIpLCB0KSkpLmpvaW4oXCIuXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIHJlZmVyZW5jZXMgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBpc0tleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gMSA9PT0gdGhpcy5sZW5ndGggJiYgXCJfX25hbWVfX1wiID09PSB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkIGRlc2lnbmF0aW5nIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgc3RhdGljIGtleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gbmV3IGF0KFsgXCJfX25hbWVfX1wiIF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VydmVyRm9ybWF0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IFwiXCIsIHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCk7XG4gICAgICAgICAgICBlLnB1c2gobiksIG4gPSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICBmb3IgKDtzIDwgdC5sZW5ndGg7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRbc107XG4gICAgICAgICAgICBpZiAoXCJcXFxcXCIgPT09IGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocyArIDEgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgdHJhaWxpbmcgZXNjYXBlIGNoYXJhY3RlcjogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdFtzICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKFwiXFxcXFwiICE9PSBlICYmIFwiLlwiICE9PSBlICYmIFwiYFwiICE9PSBlKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgbiArPSBlLCBzICs9IDI7XG4gICAgICAgICAgICB9IGVsc2UgXCJgXCIgPT09IGUgPyAociA9ICFyLCBzKyspIDogXCIuXCIgIT09IGUgfHwgciA/IChuICs9IGUsIHMrKykgOiAoaSgpLCBzKyspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpKCksIHIpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiBcIiArIHQpO1xuICAgICAgICByZXR1cm4gbmV3IGF0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IGF0KFtdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIGh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUGF0aCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgaHQodXQuZnJvbVN0cmluZyh0KSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTmFtZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgaHQodXQuZnJvbVN0cmluZyh0KS5wb3BGaXJzdCg1KSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBodCh1dC5lbXB0eVBhdGgoKSk7XG4gICAgfVxuICAgIGdldCBjb2xsZWN0aW9uR3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgucG9wTGFzdCgpLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbklkLiAqLyAgICBoYXNDb2xsZWN0aW9uSWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmxlbmd0aCA+PSAyICYmIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpID09PSB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgY29sbGVjdGlvbiBncm91cCAoaS5lLiB0aGUgbmFtZSBvZiB0aGUgcGFyZW50IGNvbGxlY3Rpb24pIGZvciB0aGlzIGtleS4gKi8gICAgZ2V0Q29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBmdWxseSBxdWFsaWZpZWQgcGF0aCB0byB0aGUgcGFyZW50IGNvbGxlY3Rpb24uICovICAgIGdldENvbGxlY3Rpb25QYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIDAgPT09IHV0LmNvbXBhcmF0b3IodGhpcy5wYXRoLCB0LnBhdGgpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIHJldHVybiB1dC5jb21wYXJhdG9yKHQucGF0aCwgZS5wYXRoKTtcbiAgICB9XG4gICAgc3RhdGljIGlzRG9jdW1lbnRLZXkodCkge1xuICAgICAgICByZXR1cm4gdC5sZW5ndGggJSAyID09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgZG9jdW1lbnQga2V5IHdpdGggdGhlIGdpdmVuIHNlZ21lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlZ21lbnRzIC0gVGhlIHNlZ21lbnRzIG9mIHRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudFxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIERvY3VtZW50S2V5XG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VnbWVudHModCkge1xuICAgICAgICByZXR1cm4gbmV3IGh0KG5ldyB1dCh0LnNsaWNlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBpbml0aWFsIG11dGF0aW9uIGJhdGNoIGlkIGZvciBlYWNoIGluZGV4LiBHZXRzIHVwZGF0ZWQgZHVyaW5nIGluZGV4XG4gKiBiYWNrZmlsbC5cbiAqL1xuLyoqXG4gKiBBbiBpbmRleCBkZWZpbml0aW9uIGZvciBmaWVsZCBpbmRleGVzIGluIEZpcmVzdG9yZS5cbiAqXG4gKiBFdmVyeSBpbmRleCBpcyBhc3NvY2lhdGVkIHdpdGggYSBjb2xsZWN0aW9uLiBUaGUgZGVmaW5pdGlvbiBjb250YWlucyBhIGxpc3RcbiAqIG9mIGZpZWxkcyBhbmQgdGhlaXIgaW5kZXgga2luZCAod2hpY2ggY2FuIGJlIGBBU0NFTkRJTkdgLCBgREVTQ0VORElOR2Agb3JcbiAqIGBDT05UQUlOU2AgZm9yIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueSBxdWVyaWVzKS5cbiAqXG4gKiBVbmxpa2UgdGhlIGJhY2tlbmQsIHRoZSBTREsgZG9lcyBub3QgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIGNvbGxlY3Rpb24gb3JcbiAqIGNvbGxlY3Rpb24gZ3JvdXAtc2NvcGVkIGluZGljZXMuIEV2ZXJ5IGluZGV4IGNhbiBiZSB1c2VkIGZvciBib3RoIHNpbmdsZVxuICogY29sbGVjdGlvbiBhbmQgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLlxuICovXG5jbGFzcyBsdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IElELiBSZXR1cm5zIC0xIGlmIHRoZSBpbmRleCBJRCBpcyBub3QgYXZhaWxhYmxlIChlLmcuIHRoZSBpbmRleFxuICAgICAqIGhhcyBub3QgeWV0IGJlZW4gcGVyc2lzdGVkKS5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGNvbGxlY3Rpb24gSUQgdGhpcyBpbmRleCBhcHBsaWVzIHRvLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgZmllbGQgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovXG4gICAgbiwgXG4gICAgLyoqIFNob3dzIGhvdyB1cC10by1kYXRlIHRoZSBpbmRleCBpcyBmb3IgdGhlIGN1cnJlbnQgdXNlci4gKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5maWVsZHMgPSBuLCB0aGlzLmluZGV4U3RhdGUgPSBzO1xuICAgIH1cbn1cblxuLyoqIEFuIElEIGZvciBhbiBpbmRleCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYWRkZWQgdG8gcGVyc2lzdGVuY2UuICAqL1xuLyoqIFJldHVybnMgdGhlIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueSBzZWdtZW50IGZvciB0aGlzIGluZGV4LiAqL1xuZnVuY3Rpb24gZnQodCkge1xuICAgIHJldHVybiB0LmZpZWxkcy5maW5kKCh0ID0+IDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovID09PSB0LmtpbmQpKTtcbn1cblxuLyoqIFJldHVybnMgYWxsIGRpcmVjdGlvbmFsIChhc2NlbmRpbmcvZGVzY2VuZGluZykgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovIGZ1bmN0aW9uIGR0KHQpIHtcbiAgICByZXR1cm4gdC5maWVsZHMuZmlsdGVyKCh0ID0+IDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovICE9PSB0LmtpbmQpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBvcmRlciBvZiB0aGUgZG9jdW1lbnQga2V5IGNvbXBvbmVudCBmb3IgdGhlIGdpdmVuIGluZGV4LlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIFdlYiBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24uXG4gKi9cbi8qKlxuICogQ29tcGFyZXMgaW5kZXhlcyBieSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBzZWdtZW50cy4gSWdub3JlcyB1cGRhdGUgdGltZSBhbmRcbiAqIGluZGV4IElELlxuICovXG5mdW5jdGlvbiB3dCh0LCBlKSB7XG4gICAgbGV0IG4gPSBldCh0LmNvbGxlY3Rpb25Hcm91cCwgZS5jb2xsZWN0aW9uR3JvdXApO1xuICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICBmb3IgKGxldCBzID0gMDsgcyA8IE1hdGgubWluKHQuZmllbGRzLmxlbmd0aCwgZS5maWVsZHMubGVuZ3RoKTsgKytzKSBpZiAobiA9IG10KHQuZmllbGRzW3NdLCBlLmZpZWxkc1tzXSksIFxuICAgIDAgIT09IG4pIHJldHVybiBuO1xuICAgIHJldHVybiBldCh0LmZpZWxkcy5sZW5ndGgsIGUuZmllbGRzLmxlbmd0aCk7XG59XG5cbi8qKiBSZXR1cm5zIGEgZGVidWcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGZpZWxkIGluZGV4ICovIGx0LlVOS05PV05fSUQgPSAtMTtcblxuLyoqIEFuIGluZGV4IGNvbXBvbmVudCBjb25zaXN0aW5nIG9mIGZpZWxkIHBhdGggYW5kIGluZGV4IHR5cGUuICAqL1xuY2xhc3MgX3Qge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgZmllbGQgcGF0aCBvZiB0aGUgY29tcG9uZW50LiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgZmllbGRzIHNvcnRpbmcgb3JkZXIuICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLmZpZWxkUGF0aCA9IHQsIHRoaXMua2luZCA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtdCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGF0LmNvbXBhcmF0b3IodC5maWVsZFBhdGgsIGUuZmllbGRQYXRoKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBldCh0LmtpbmQsIGUua2luZCk7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBcImhpZ2ggd2F0ZXIgbWFya1wiIHRoYXQgaW5kaWNhdGVzIGhvdyB1cGRhdGVkIHRoZSBJbmRleCBpcyBmb3IgdGhlXG4gKiBjdXJyZW50IHVzZXIuXG4gKi8gY2xhc3MgZ3Qge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGVuIHRoZSBpbmRleCB3YXMgbGFzdCB1cGRhdGVkIChyZWxhdGl2ZSB0byBvdGhlciBpbmRleGVzKS5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHRoZSBsYXRlc3QgaW5kZXhlZCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBpZC4gKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSB0LCB0aGlzLm9mZnNldCA9IGU7XG4gICAgfVxuICAgIC8qKiBUaGUgc3RhdGUgb2YgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGJhY2tmaWxsZWQuICovICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBndCgwLCBJdC5taW4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gb2Zmc2V0IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIHdpdGggYSByZWFkIHRpbWUgaGlnaGVyIHRoYW5cbiAqIGByZWFkVGltZWAuXG4gKi8gZnVuY3Rpb24geXQodCwgZSkge1xuICAgIC8vIFdlIHdhbnQgdG8gY3JlYXRlIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lXG4gICAgLy8gZ3JlYXRlciB0aGFuIHRoZSBwcm92aWRlZCByZWFkIHRpbWUuIFRvIGRvIHNvLCB3ZSB0ZWNobmljYWxseSBuZWVkIHRvXG4gICAgLy8gY3JlYXRlIGFuIG9mZnNldCBmb3IgYChyZWFkVGltZSwgTUFYX0RPQ1VNRU5UX0tFWSlgLiBXaGlsZSB3ZSBjb3VsZCB1c2VcbiAgICAvLyBVbmljb2RlIGNvZGVwb2ludHMgdG8gZ2VuZXJhdGUgTUFYX0RPQ1VNRU5UX0tFWSwgaXQgaXMgbXVjaCBlYXNpZXIgdG8gdXNlXG4gICAgLy8gYChyZWFkVGltZSArIDEsIERvY3VtZW50S2V5LmVtcHR5KCkpYCBzaW5jZSBgPiBEb2N1bWVudEtleS5lbXB0eSgpYCBtYXRjaGVzXG4gICAgLy8gYWxsIHZhbGlkIGRvY3VtZW50IElEcy5cbiAgICBjb25zdCBuID0gdC50b1RpbWVzdGFtcCgpLnNlY29uZHMsIHMgPSB0LnRvVGltZXN0YW1wKCkubmFub3NlY29uZHMgKyAxLCBpID0gcnQuZnJvbVRpbWVzdGFtcCgxZTkgPT09IHMgPyBuZXcgaXQobiArIDEsIDApIDogbmV3IGl0KG4sIHMpKTtcbiAgICByZXR1cm4gbmV3IEl0KGksIGh0LmVtcHR5KCksIGUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBvZmZzZXQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBwdCh0KSB7XG4gICAgcmV0dXJuIG5ldyBJdCh0LnJlYWRUaW1lLCB0LmtleSwgLTEpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgbGF0ZXN0IHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIElEIHRoYXQgd2VyZSBwcm9jZXNzZWQgZm9yIGFuXG4gKiBpbmRleC5cbiAqLyBjbGFzcyBJdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxhdGVzdCByZWFkIHRpbWUgdmVyc2lvbiB0aGF0IGhhcyBiZWVuIGluZGV4ZWQgYnkgRmlyZXN0b3JlIGZvciB0aGlzXG4gICAgICogZmllbGQgaW5kZXguXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGtleSBvZiB0aGUgbGFzdCBkb2N1bWVudCB0aGF0IHdhcyBpbmRleGVkIGZvciB0aGlzIHF1ZXJ5LiBVc2VcbiAgICAgKiBgRG9jdW1lbnRLZXkuZW1wdHkoKWAgaWYgbm8gZG9jdW1lbnQgaGFzIGJlZW4gaW5kZXhlZC5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKlxuICAgICAqIFRoZSBsYXJnZXN0IG11dGF0aW9uIGJhdGNoIGlkIHRoYXQncyBiZWVuIHByb2Nlc3NlZCBieSBGaXJlc3RvcmUuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnJlYWRUaW1lID0gdCwgdGhpcy5kb2N1bWVudEtleSA9IGUsIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSBuO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBiZWZvcmUgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJdChydC5taW4oKSwgaHQuZW1wdHkoKSwgLTEpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBhZnRlciBhbGwgcmVndWxhciBvZmZzZXRzLiAqLyAgICBzdGF0aWMgbWF4KCkge1xuICAgICAgICByZXR1cm4gbmV3IEl0KHJ0Lm1heCgpLCBodC5lbXB0eSgpLCAtMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBUdCh0LCBlKSB7XG4gICAgbGV0IG4gPSB0LnJlYWRUaW1lLmNvbXBhcmVUbyhlLnJlYWRUaW1lKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiAobiA9IGh0LmNvbXBhcmF0b3IodC5kb2N1bWVudEtleSwgZS5kb2N1bWVudEtleSksIDAgIT09IG4gPyBuIDogZXQodC5sYXJnZXN0QmF0Y2hJZCwgZS5sYXJnZXN0QmF0Y2hJZCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBFdCA9IFwiVGhlIGN1cnJlbnQgdGFiIGlzIG5vdCBpbiB0aGUgcmVxdWlyZWQgc3RhdGUgdG8gcGVyZm9ybSB0aGlzIG9wZXJhdGlvbi4gSXQgbWlnaHQgYmUgbmVjZXNzYXJ5IHRvIHJlZnJlc2ggdGhlIGJyb3dzZXIgdGFiLlwiO1xuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyBBdCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gICAgYWRkT25Db21taXR0ZWRMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMucHVzaCh0KTtcbiAgICB9XG4gICAgcmFpc2VPbkNvbW1pdHRlZEV2ZW50KCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLmZvckVhY2goKHQgPT4gdCgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXG4gKiBhcmUgcmUtdGhyb3duLlxuICpcbiAqIEBwYXJhbSBlcnIgLSBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gKi8gYXN5bmMgZnVuY3Rpb24gdnQodCkge1xuICAgIGlmICh0LmNvZGUgIT09IHEuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCB0Lm1lc3NhZ2UgIT09IEV0KSB0aHJvdyB0O1xuICAgIE4oXCJMb2NhbFN0b3JlXCIsIFwiVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZVwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIFJ0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGwsIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGwsIFxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxuICAgICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMCwgdGhpcy5lcnJvciA9IHZvaWQgMCwgdGhpcy5pc0RvbmUgPSAhMSwgXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGNoYWluaW5nLlxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMSwgdCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLnJlc3VsdCA9IHQsIHRoaXMubmV4dENhbGxiYWNrICYmIFxuICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcbiAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sodCk7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLmVycm9yID0gdCwgdGhpcy5jYXRjaENhbGxiYWNrICYmIHRoaXMuY2F0Y2hDYWxsYmFjayh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodm9pZCAwLCB0KTtcbiAgICB9XG4gICAgbmV4dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgJiYgTygpLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZShlLCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3ModCwgdGhpcy5yZXN1bHQpIDogbmV3IFJ0KCgobiwgcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBTdWNjZXNzKHQsIGUpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9LCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBGYWlsdXJlKGUsIHQpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0KHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHdyYXBVc2VyRnVuY3Rpb24odCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQoKTtcbiAgICAgICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgUnQgPyBlIDogUnQucmVzb2x2ZShlKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgcmV0dXJuIFJ0LnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cmFwU3VjY2Vzcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBSdC5yZXNvbHZlKGUpO1xuICAgIH1cbiAgICB3cmFwRmFpbHVyZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBSdC5yZWplY3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGUodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnQoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBuKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YWl0Rm9yKFxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnQoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9IDAsIGkgPSAwLCByID0gITE7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICsrcywgdC5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgciAmJiBpID09PSBzICYmIGUoKTtcbiAgICAgICAgICAgICAgICB9KSwgKHQgPT4gbih0KSkpO1xuICAgICAgICAgICAgfSkpLCByID0gITAsIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcih0KSB7XG4gICAgICAgIGxldCBlID0gUnQucmVzb2x2ZSghMSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5uZXh0KCh0ID0+IHQgPyBSdC5yZXNvbHZlKHQpIDogbigpKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4ucHVzaChlLmNhbGwodGhpcywgdCwgcykpO1xuICAgICAgICB9KSksIHRoaXMud2FpdEZvcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uY3VycmVudGx5IG1hcCBhbGwgYXJyYXkgZWxlbWVudHMgdGhyb3VnaCBhc3luY2hyb25vdXMgZnVuY3Rpb24uXG4gICAgICovICAgIHN0YXRpYyBtYXBBcnJheSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnQoKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdC5sZW5ndGgsIHIgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCB1ID0gMDsgdSA8IGk7IHUrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSB1O1xuICAgICAgICAgICAgICAgIGUodFtjXSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJbY10gPSB0LCArK28sIG8gPT09IGkgJiYgbihyKTtcbiAgICAgICAgICAgICAgICB9KSwgKHQgPT4gcyh0KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIGFsdGVybmF0aXZlIHRvIHJlY3Vyc2l2ZSBQZXJzaXN0ZW5jZVByb21pc2UgY2FsbHMsIHRoYXQgYXZvaWRzXG4gICAgICogcG90ZW50aWFsIG1lbW9yeSBwcm9ibGVtcyBmcm9tIHVuYm91bmRlZCBjaGFpbnMgb2YgcHJvbWlzZXMuXG4gICAgICpcbiAgICAgKiBUaGUgYGFjdGlvbmAgd2lsbCBiZSBjYWxsZWQgcmVwZWF0ZWRseSB3aGlsZSBgY29uZGl0aW9uYCBpcyB0cnVlLlxuICAgICAqLyAgICBzdGF0aWMgZG9XaGlsZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnQoKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICEwID09PSB0KCkgPyBlKCkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpKCk7XG4gICAgICAgICAgICAgICAgfSksIHMpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGkoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgU2ltcGxlRGIuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIFdyYXBzIGFuIElEQlRyYW5zYWN0aW9uIGFuZCBleHBvc2VzIGEgc3RvcmUoKSBtZXRob2QgdG8gZ2V0IGEgaGFuZGxlIHRvIGFcbiAqIHNwZWNpZmljIG9iamVjdCBzdG9yZS5cbiAqL1xuY2xhc3MgUHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSB0LCB0aGlzLnRyYW5zYWN0aW9uID0gZSwgdGhpcy5hYm9ydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIEluZGV4ZWREYiB0cmFuc2FjdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudiA9IG5ldyBLLCB0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnYucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBlLmVycm9yID8gdGhpcy52LnJlamVjdChuZXcgU3QodCwgZS5lcnJvcikpIDogdGhpcy52LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0ga3QoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy52LnJlamVjdChuZXcgU3QodCwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgb3Blbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFB0KGUsIHQudHJhbnNhY3Rpb24ocywgbikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3QoZSwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IFIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnYucHJvbWlzZTtcbiAgICB9XG4gICAgYWJvcnQodCkge1xuICAgICAgICB0ICYmIHRoaXMudi5yZWplY3QodCksIHRoaXMuYWJvcnRlZCB8fCAoTihcIlNpbXBsZURiXCIsIFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQgPyB0Lm1lc3NhZ2UgOiBcIkNsaWVudC1pbml0aWF0ZWQgYWJvcnRcIiksIFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSAhMCwgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpKTtcbiAgICB9XG4gICAgUCgpIHtcbiAgICAgICAgLy8gSWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgVjMgSW5kZXhlZERCLCB3ZSBpbnZva2UgY29tbWl0KCkgZXhwbGljaXRseSB0b1xuICAgICAgICAvLyBzcGVlZCB1cCBpbmRleCBEQiBwcm9jZXNzaW5nIGlmIHRoZSBldmVudCBsb29wIHJlbWFpbnMgYmxvY2tzLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCB0ID0gdGhpcy50cmFuc2FjdGlvbjtcbiAgICAgICAgdGhpcy5hYm9ydGVkIHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdC5jb21taXQgfHwgdC5jb21taXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodCk7XG4gICAgICAgIHJldHVybiBuZXcgQ3QoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgYnQge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLlYgPSBuO1xuICAgICAgICAvLyBOT1RFOiBBY2NvcmRpbmcgdG8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE5NzA1MCwgdGhlXG4gICAgICAgIC8vIGJ1ZyB3ZSdyZSBjaGVja2luZyBmb3Igc2hvdWxkIGV4aXN0IGluIGlPUyA+PSAxMi4yIGFuZCA8IDEzLCBidXQgZm9yXG4gICAgICAgIC8vIHdoYXRldmVyIHJlYXNvbiBpdCdzIG11Y2ggaGFyZGVyIHRvIGhpdCBhZnRlciAxMi4yIHNvIHdlIG9ubHkgcHJvYWN0aXZlbHlcbiAgICAgICAgLy8gbG9nIG9uIDEyLjIuXG4gICAgICAgIDEyLjIgPT09IGJ0LlMoZ2V0VUEoKSkgJiYgayhcIkZpcmVzdG9yZSBwZXJzaXN0ZW5jZSBzdWZmZXJzIGZyb20gYSBidWcgaW4gaU9TIDEyLjIgU2FmYXJpIHRoYXQgbWF5IGNhdXNlIHlvdXIgYXBwIHRvIHN0b3Agd29ya2luZy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuXCIpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLiAqLyAgICBzdGF0aWMgZGVsZXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIE4oXCJTaW1wbGVEYlwiLCBcIlJlbW92aW5nIGRhdGFiYXNlOlwiLCB0KSwgeHQod2luZG93LmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZSh0KSkudG9Qcm9taXNlKCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgSW5kZXhlZERCIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIEQoKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoYnQuQygpKSByZXR1cm4gITA7XG4gICAgICAgIC8vIFdlIGV4dGVuc2l2ZWx5IHVzZSBpbmRleGVkIGFycmF5IHZhbHVlcyBhbmQgY29tcG91bmQga2V5cyxcbiAgICAgICAgLy8gd2hpY2ggSUUgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQuIEhvd2V2ZXIsIHRoZXkgc3RpbGwgaGF2ZSBpbmRleGVkREJcbiAgICAgICAgLy8gZGVmaW5lZCBvbiB0aGUgd2luZG93LCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciB0aGVtIGhlcmUgYW5kIG1ha2Ugc3VyZVxuICAgICAgICAvLyB0byByZXR1cm4gdGhhdCBwZXJzaXN0ZW5jZSBpcyBub3QgZW5hYmxlZCBmb3IgdGhvc2UgYnJvd3NlcnMuXG4gICAgICAgIC8vIEZvciB0cmFja2luZyBzdXBwb3J0IG9mIHRoaXMgZmVhdHVyZSwgc2VlIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vc3RhdHVzL2luZGV4ZWRkYmFycmF5c2FuZG11bHRpZW50cnlzdXBwb3J0L1xuICAgICAgICAvLyBDaGVjayB0aGUgVUEgc3RyaW5nIHRvIGZpbmQgb3V0IHRoZSBicm93c2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBnZXRVQSgpLCBlID0gYnQuUyh0KSwgbiA9IDAgPCBlICYmIGUgPCAxMCwgcyA9IGJ0Lk4odCksIGkgPSAwIDwgcyAmJiBzIDwgNC41O1xuICAgICAgICAvLyBJRSAxMFxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcbiAgICAgICAgLy8gSUUgMTFcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7XG4gICAgICAgIC8vIEVkZ2VcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsXG4gICAgICAgIC8vIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnO1xuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXG4gICAgICAgICAgICAgICAgcmV0dXJuICEodC5pbmRleE9mKFwiTVNJRSBcIikgPiAwIHx8IHQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gMCB8fCB0LmluZGV4T2YoXCJFZGdlL1wiKSA+IDAgfHwgbiB8fCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNraW5nIEluZGV4ZWREQiBzdG9yZSBpcyB0aGUgTm9kZSBJbmRleGVkREJTaGltXG4gICAgICogKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0pLlxuICAgICAqLyAgICBzdGF0aWMgQygpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBwcm9jZXNzICYmIFwiWUVTXCIgPT09IChudWxsID09PSAodCA9IHByb2Nlc3MuZW52KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmspO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZnJvbSBhIHRyYW5zYWN0aW9uLiAqLyAgICBzdGF0aWMgTSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgUyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9pKD86cGhvbmV8cGFkfHBvZCkgb3MgKFtcXGRfXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCJfXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIEFuZHJvaWQgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIE4odCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvQW5kcm9pZCAoW1xcZC5dKykvaSksIG4gPSBlID8gZVsxXS5zcGxpdChcIi5cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UsIGNyZWF0aW5nIG9yIHVwZ3JhZGluZyBpdCBpZiBuZWNlc3NhcnkuXG4gICAgICovICAgIGFzeW5jICQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYiB8fCAoTihcIlNpbXBsZURiXCIsIFwiT3BlbmluZyBkYXRhYmFzZTpcIiwgdGhpcy5uYW1lKSwgdGhpcy5kYiA9IGF3YWl0IG5ldyBQcm9taXNlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxuICAgICAgICAgICAgY29uc3QgcyA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgICAgIHMub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBlKG4pO1xuICAgICAgICAgICAgfSwgcy5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbihuZXcgU3QodCwgXCJDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uIENsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLlwiKSk7XG4gICAgICAgICAgICB9LCBzLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQuZXJyb3I7XG4gICAgICAgICAgICAgICAgXCJWZXJzaW9uRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgcmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCIGRhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLlwiKSkgOiBcIkludmFsaWRTdGF0ZUVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyBzKSkgOiBuKG5ldyBTdCh0LCBzKSk7XG4gICAgICAgICAgICB9LCBzLm9udXBncmFkZW5lZWRlZCA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIE4oXCJTaW1wbGVEYlwiLCAnRGF0YWJhc2UgXCInICsgdGhpcy5uYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIHQub2xkVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLlYuTyhlLCBzLnRyYW5zYWN0aW9uLCB0Lm9sZFZlcnNpb24sIHRoaXMudmVyc2lvbikubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBOKFwiU2ltcGxlRGJcIiwgXCJEYXRhYmFzZSB1cGdyYWRlIHRvIHZlcnNpb24gXCIgKyB0aGlzLnZlcnNpb24gKyBcIiBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkpLCB0aGlzLkYgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gdCA9PiB0aGlzLkYodCkpLCB0aGlzLmRiO1xuICAgIH1cbiAgICBCKHQpIHtcbiAgICAgICAgdGhpcy5GID0gdCwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSBlID0+IHQoZSkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IGU7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy4kKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBQdC5vcGVuKHRoaXMuZGIsIHQsIGkgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBuKSwgciA9IHMoZSkubmV4dCgodCA9PiAoZS5QKCksIFxuICAgICAgICAgICAgICAgIHQpKSkuY2F0Y2goKHQgPT4gKFxuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSB0cmFuc2FjdGlvbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gICAgICAgICAgICAgICAgZS5hYm9ydCh0KSwgUnQucmVqZWN0KHQpKSkpLnRvUHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIC8vIEFzIG5vdGVkIGFib3ZlLCBlcnJvcnMgYXJlIHByb3BhZ2F0ZWQgYnkgYWJvcnRpbmcgdGhlIHRyYW5zYWN0aW9uLiBTb1xuICAgICAgICAgICAgICAgIC8vIHdlIHN3YWxsb3cgYW55IGVycm9yIGhlcmUgdG8gYXZvaWQgdGhlIGJyb3dzZXIgbG9nZ2luZyBpdCBhcyB1bmhhbmRsZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuY2F0Y2goKCgpID0+IHt9KSksIFxuICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSB0cmFuc2FjdGlvbiB0byBjb21wbGV0ZSAoaS5lLiBJbmRleGVkRGIncyBvbnN1Y2Nlc3MgZXZlbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBmaXJlKSwgYnV0IHN0aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgdHJhbnNhY3Rpb25GblJlc3VsdCBiYWNrIHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNhbGxlci5cbiAgICAgICAgICAgICAgICBhd2FpdCBlLlIsIHI7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQsIG4gPSBcIkZpcmViYXNlRXJyb3JcIiAhPT0gZS5uYW1lICYmIHIgPCAzO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oc2NobWlkdC1zZWJhc3RpYW4pOiBXZSBjb3VsZCBwcm9iYWJseSBiZSBzbWFydGVyIGFib3V0IHRoaXMgYW5kXG4gICAgICAgICAgICAgICAgLy8gbm90IHJldHJ5IGV4Y2VwdGlvbnMgdGhhdCBhcmUgbGlrZWx5IHVucmVjb3ZlcmFibGUgKHN1Y2ggYXMgcXVvdGFcbiAgICAgICAgICAgICAgICAvLyBleGNlZWRlZCBlcnJvcnMpLlxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbm5vdCB1c2UgYW4gaW5zdGFuY2VvZiBjaGVjayBmb3IgRmlyZXN0b3JlRXhjZXB0aW9uLCBzaW5jZSB0aGVcbiAgICAgICAgICAgICAgICAvLyBleGNlcHRpb24gaXMgd3JhcHBlZCBpbiBhIGdlbmVyaWMgZXJyb3IgYnkgb3VyIGFzeW5jL2F3YWl0IGhhbmRsaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTihcIlNpbXBsZURiXCIsIFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsIGUubWVzc2FnZSwgXCJSZXRyeWluZzpcIiwgbiksIFxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSwgIW4pIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYiAmJiB0aGlzLmRiLmNsb3NlKCksIHRoaXMuZGIgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY29udHJvbGxlciBmb3IgaXRlcmF0aW5nIG92ZXIgYSBrZXkgcmFuZ2Ugb3IgaW5kZXguIEl0IGFsbG93cyBhbiBpdGVyYXRlXG4gKiBjYWxsYmFjayB0byBkZWxldGUgdGhlIGN1cnJlbnRseS1yZWZlcmVuY2VkIG9iamVjdCwgb3IganVtcCB0byBhIG5ldyBrZXlcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxuICovIGNsYXNzIFZ0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTCA9IHQsIHRoaXMucSA9ICExLCB0aGlzLlUgPSBudWxsO1xuICAgIH1cbiAgICBnZXQgaXNEb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xO1xuICAgIH1cbiAgICBnZXQgSygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVTtcbiAgICB9XG4gICAgc2V0IGN1cnNvcih0KSB7XG4gICAgICAgIHRoaXMuTCA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBzdG9wIGl0ZXJhdGlvbiBhdCBhbnkgcG9pbnQuXG4gICAgICovICAgIGRvbmUoKSB7XG4gICAgICAgIHRoaXMucSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc2tpcCB0byB0aGF0IG5leHQga2V5LCB3aGljaCBjb3VsZCBiZVxuICAgICAqIGFuIGluZGV4IG9yIGEgcHJpbWFyeSBrZXkuXG4gICAgICovICAgIEcodCkge1xuICAgICAgICB0aGlzLlUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgdGhlIGN1cnJlbnQgY3Vyc29yIHZhbHVlIGZyb20gdGhlIG9iamVjdCBzdG9yZS5cbiAgICAgKlxuICAgICAqIE5PVEU6IFlvdSBDQU5OT1QgZG8gdGhpcyB3aXRoIGEga2V5c09ubHkgcXVlcnkuXG4gICAgICovICAgIGRlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHh0KHRoaXMuTC5kZWxldGUoKSk7XG4gICAgfVxufVxuXG4vKiogQW4gZXJyb3IgdGhhdCB3cmFwcyBleGNlcHRpb25zIHRoYXQgdGhyb3duIGR1cmluZyBJbmRleGVkREIgZXhlY3V0aW9uLiAqLyBjbGFzcyBTdCBleHRlbmRzIFUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIocS5VTkFWQUlMQUJMRSwgYEluZGV4ZWREQiB0cmFuc2FjdGlvbiAnJHt0fScgZmFpbGVkOiAke2V9YCksIHRoaXMubmFtZSA9IFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiO1xuICAgIH1cbn1cblxuLyoqIFZlcmlmaWVzIHdoZXRoZXIgYGVgIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuICovIGZ1bmN0aW9uIER0KHQpIHtcbiAgICAvLyBVc2UgbmFtZSBlcXVhbGl0eSwgYXMgaW5zdGFuY2VvZiBjaGVja3Mgb24gZXJyb3JzIGRvbid0IHdvcmsgd2l0aCBlcnJvcnNcbiAgICAvLyB0aGF0IHdyYXAgb3RoZXIgZXJyb3JzLlxuICAgIHJldHVybiBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIiA9PT0gdC5uYW1lO1xufVxuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gSURCT2JqZWN0U3RvcmUgcHJvdmlkaW5nIGFuIEFQSSB0aGF0OlxuICpcbiAqIDEpIEhhcyBnZW5lcmljIEtleVR5cGUgLyBWYWx1ZVR5cGUgcGFyYW1ldGVycyB0byBwcm92aWRlIHN0cm9uZ2x5LXR5cGVkXG4gKiBtZXRob2RzIGZvciBhY3RpbmcgYWdhaW5zdCB0aGUgb2JqZWN0IHN0b3JlLlxuICogMikgRGVhbHMgd2l0aCBJbmRleGVkREIncyBvbnN1Y2Nlc3MgLyBvbmVycm9yIGV2ZW50IGNhbGxiYWNrcywgbWFraW5nIGV2ZXJ5XG4gKiBtZXRob2QgcmV0dXJuIGEgUGVyc2lzdGVuY2VQcm9taXNlIGluc3RlYWQuXG4gKiAzKSBQcm92aWRlcyBhIGhpZ2hlci1sZXZlbCBBUEkgdG8gYXZvaWQgbmVlZGluZyB0byBkbyBleGNlc3NpdmUgd3JhcHBpbmcgb2ZcbiAqIGludGVybWVkaWF0ZSBJbmRleGVkREIgdHlwZXMgKElEQkN1cnNvcldpdGhWYWx1ZSwgZXRjLilcbiAqLyBjbGFzcyBDdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnN0b3JlID0gdDtcbiAgICB9XG4gICAgcHV0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgPyAoTihcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgZSksIG4gPSB0aGlzLnN0b3JlLnB1dChlLCB0KSkgOiAoTihcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgXCI8YXV0by1rZXk+XCIsIHQpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KHQpKSwgeHQobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgdmFsdWUgaW50byBhbiBPYmplY3QgU3RvcmUgYW5kIHJldHVybnMgdGhlIG5ldyBrZXkuIFNpbWlsYXIgdG9cbiAgICAgKiBJbmRleGVkRGIncyBgYWRkKClgLCB0aGlzIG1ldGhvZCB3aWxsIGZhaWwgb24gcHJpbWFyeSBrZXkgY29sbGlzaW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBvYmplY3QgdG8gd3JpdGUuXG4gICAgICogQHJldHVybnMgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gYWRkLlxuICAgICAqLyAgICBhZGQodCkge1xuICAgICAgICBOKFwiU2ltcGxlRGJcIiwgXCJBRERcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCB0KTtcbiAgICAgICAgcmV0dXJuIHh0KHRoaXMuc3RvcmUuYWRkKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgZnJvbSB0aGUgc3BlY2lmaWVkIHN0b3JlLCBvciBudWxsXG4gICAgICogaWYgbm8gb2JqZWN0IGV4aXN0cyB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LlxuICAgICAqXG4gICAgICogQGtleSBUaGUga2V5IG9mIHRoZSBvYmplY3QgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIFRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBvciBudWxsIGlmIG5vIG9iamVjdCBleGlzdHMuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIC8vIFdlJ3JlIGRvaW5nIGFuIHVuc2FmZSBjYXN0IHRvIFZhbHVlVHlwZS5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHh0KHRoaXMuc3RvcmUuZ2V0KHQpKS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBudWxsKSwgTihcIlNpbXBsZURiXCIsIFwiR0VUXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgZSksIGUpKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIE4oXCJTaW1wbGVEYlwiLCBcIkRFTEVURVwiLCB0aGlzLnN0b3JlLm5hbWUsIHQpO1xuICAgICAgICByZXR1cm4geHQodGhpcy5zdG9yZS5kZWxldGUodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxuICAgICAqIGFsbCB3ZSBuZWVkIGlzIHRvIGNvdW50IGV2ZXJ5dGhpbmcgaW4gYSBzdG9yZS5cbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cbiAgICAgKi8gICAgY291bnQoKSB7XG4gICAgICAgIE4oXCJTaW1wbGVEYlwiLCBcIkNPVU5UXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIHJldHVybiB4dCh0aGlzLnN0b3JlLmNvdW50KCkpO1xuICAgIH1cbiAgICBqKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyh0LCBlKTtcbiAgICAgICAgLy8gVXNlIGBnZXRBbGwoKWAgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgSW5kZXhlZERCIHYzLCBhcyBpdCBpcyByb3VnaGx5XG4gICAgICAgIC8vIDIwJSBmYXN0ZXIuIFVuZm9ydHVuYXRlbHksIGdldEFsbCgpIGRvZXMgbm90IHN1cHBvcnQgY3VzdG9tIGluZGljZXMuXG4gICAgICAgICAgICAgICAgaWYgKG4uaW5kZXggfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0aGlzLnN0b3JlLmdldEFsbCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuY3Vyc29yKG4pLCBlID0gW107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5XKHQsICgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGUucHVzaChuKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuc3RvcmUuZ2V0QWxsKG4ucmFuZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0Lm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbih0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZSh0LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhlIGZpcnN0IGBjb3VudGAgZWxlbWVudHMgZnJvbSB0aGUgcHJvdmlkZWQgaW5kZXggcmFuZ2UuIExvYWRzIGFsbFxuICAgICAqIGVsZW1lbnRzIGlmIG5vIGxpbWl0IGlzIHByb3ZpZGVkLlxuICAgICAqLyAgICBIKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuZ2V0QWxsKHQsIG51bGwgPT09IGUgPyB2b2lkIDAgOiBlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIG4ub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGUodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgbi5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0KGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEoodCwgZSkge1xuICAgICAgICBOKFwiU2ltcGxlRGJcIiwgXCJERUxFVEUgQUxMXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnModCwgZSk7XG4gICAgICAgIG4uWSA9ICExO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLlcocywgKCh0LCBlLCBuKSA9PiBuLmRlbGV0ZSgpKSk7XG4gICAgfVxuICAgIFgodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZSA/IG4gPSB0IDogKG4gPSB7fSwgZSA9IHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLlcocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzdG9yZSwgYnV0IHdhaXRzIGZvciB0aGUgZ2l2ZW4gY2FsbGJhY2sgdG8gY29tcGxldGUgZm9yXG4gICAgICogZWFjaCBlbnRyeSBiZWZvcmUgaXRlcmF0aW5nIHRoZSBuZXh0IGVudHJ5LiBUaGlzIGFsbG93cyB0aGUgY2FsbGJhY2sgdG8gZG9cbiAgICAgKiBhc3luY2hyb25vdXMgd29yayB0byBkZXRlcm1pbmUgaWYgdGhpcyBpdGVyYXRpb24gc2hvdWxkIGNvbnRpbnVlLlxuICAgICAqXG4gICAgICogVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHNob3VsZCByZXR1cm4gYHRydWVgIHRvIGNvbnRpbnVlIGl0ZXJhdGlvbiwgYW5kXG4gICAgICogYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovICAgIFoodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3Ioe30pO1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgobiwgcykgPT4ge1xuICAgICAgICAgICAgZS5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGt0KHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBzKGUpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHMgPyB0KHMucHJpbWFyeUtleSwgcy52YWx1ZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQgPyBzLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBXKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgocywgaSkgPT4ge1xuICAgICAgICAgICAgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgaSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gdm9pZCBzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBWdChpKSwgbyA9IGUoaS5wcmltYXJ5S2V5LCBpLnZhbHVlLCByKTtcbiAgICAgICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIFJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBvLmNhdGNoKCh0ID0+IChyLmRvbmUoKSwgUnQucmVqZWN0KHQpKSkpO1xuICAgICAgICAgICAgICAgICAgICBuLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHIuaXNEb25lID8gcygpIDogbnVsbCA9PT0gci5LID8gaS5jb250aW51ZSgpIDogaS5jb250aW51ZShyLkspO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFJ0LndhaXRGb3IobikpKTtcbiAgICB9XG4gICAgb3B0aW9ucyh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ICYmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gbiA9IHQgOiBlID0gdCksIHtcbiAgICAgICAgICAgIGluZGV4OiBuLFxuICAgICAgICAgICAgcmFuZ2U6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3Vyc29yKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5leHRcIjtcbiAgICAgICAgaWYgKHQucmV2ZXJzZSAmJiAoZSA9IFwicHJldlwiKSwgdC5pbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuaW5kZXgodC5pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdC5ZID8gbi5vcGVuS2V5Q3Vyc29yKHQucmFuZ2UsIGUpIDogbi5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlLm9wZW5DdXJzb3IodC5yYW5nZSwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBzIGFuIElEQlJlcXVlc3QgaW4gYSBQZXJzaXN0ZW5jZVByb21pc2UsIHVzaW5nIHRoZSBvbnN1Y2Nlc3MgLyBvbmVycm9yXG4gKiBoYW5kbGVycyB0byByZXNvbHZlIC8gcmVqZWN0IHRoZSBQZXJzaXN0ZW5jZVByb21pc2UgYXMgYXBwcm9wcmlhdGUuXG4gKi8gZnVuY3Rpb24geHQodCkge1xuICAgIHJldHVybiBuZXcgUnQoKChlLCBuKSA9PiB7XG4gICAgICAgIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgZShuKTtcbiAgICAgICAgfSwgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0ga3QodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgbihlKTtcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8vIEd1YXJkIHNvIHdlIG9ubHkgcmVwb3J0IHRoZSBlcnJvciBvbmNlLlxubGV0IE50ID0gITE7XG5cbmZ1bmN0aW9uIGt0KHQpIHtcbiAgICBjb25zdCBlID0gYnQuUyhnZXRVQSgpKTtcbiAgICBpZiAoZSA+PSAxMi4yICYmIGUgPCAxMykge1xuICAgICAgICBjb25zdCBlID0gXCJBbiBpbnRlcm5hbCBlcnJvciB3YXMgZW5jb3VudGVyZWQgaW4gdGhlIEluZGV4ZWQgRGF0YWJhc2Ugc2VydmVyXCI7XG4gICAgICAgIGlmICh0Lm1lc3NhZ2UuaW5kZXhPZihlKSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBXcmFwIGVycm9yIGluIGEgbW9yZSBkZXNjcmlwdGl2ZSBvbmUuXG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IFUoXCJpbnRlcm5hbFwiLCBgSU9TX0lOREVYRUREQl9CVUcxOiBJbmRleGVkRGIgaGFzIHRocm93biAnJHtlfScuIFRoaXMgaXMgbGlrZWx5IGR1ZSB0byBhbiB1bmF2b2lkYWJsZSBidWcgaW4gaU9TLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5gKTtcbiAgICAgICAgICAgIHJldHVybiBOdCB8fCAoTnQgPSAhMCwgXG4gICAgICAgICAgICAvLyBUaHJvdyBhIGdsb2JhbCBleGNlcHRpb24gb3V0c2lkZSBvZiB0aGlzIHByb21pc2UgY2hhaW4sIGZvciB0aGUgdXNlciB0b1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgY2F0Y2guXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgIH0pLCAwKSksIHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBJbmRleCBCYWNrZmlsbGVyLiAqL1xuY2xhc3MgTXQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy50dCA9IGUsIHRoaXMudGFzayA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLmV0KDE1ZTMpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnRhc2sgJiYgKHRoaXMudGFzay5jYW5jZWwoKSwgdGhpcy50YXNrID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy50YXNrO1xuICAgIH1cbiAgICBldCh0KSB7XG4gICAgICAgIE4oXCJJbmRleEJhY2tpbGxlclwiLCBgU2NoZWR1bGVkIGluICR7dH1tc2ApLCB0aGlzLnRhc2sgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJpbmRleF9iYWNrZmlsbFwiIC8qIFRpbWVySWQuSW5kZXhCYWNrZmlsbCAqLyAsIHQsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBOKFwiSW5kZXhCYWNraWxsZXJcIiwgYERvY3VtZW50cyB3cml0dGVuOiAke2F3YWl0IHRoaXMudHQubnQoKX1gKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBEdCh0KSA/IE4oXCJJbmRleEJhY2tpbGxlclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgaW5kZXggYmFja2ZpbGw6IFwiLCB0KSA6IGF3YWl0IHZ0KHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ldCg2ZTQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIGJhY2tmaWxsaW5nIGluZGV4ZXMuICovIGNsYXNzICR0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBMb2NhbFN0b3JlIHByb3ZpZGVzIGFjY2VzcyB0byBJbmRleE1hbmFnZXIgYW5kIExvY2FsRG9jdW1lbnRWaWV3LlxuICAgICAqIFRoZXNlIHByb3BlcnRpZXMgd2lsbCB1cGRhdGUgd2hlbiB0aGUgdXNlciBjaGFuZ2VzLiBDb25zZXF1ZW50bHksXG4gICAgICogbWFraW5nIGEgbG9jYWwgY29weSBvZiBJbmRleE1hbmFnZXIgYW5kIExvY2FsRG9jdW1lbnRWaWV3IHdpbGwgcmVxdWlyZVxuICAgICAqIHVwZGF0ZXMgb3ZlciB0aW1lLiBUaGUgc2ltcGxlciBzb2x1dGlvbiBpcyB0byByZWx5IG9uIExvY2FsU3RvcmUgdG8gaGF2ZVxuICAgICAqIGFuIHVwLXRvLWRhdGUgcmVmZXJlbmNlcyB0byBJbmRleE1hbmFnZXIgYW5kIExvY2FsRG9jdW1lbnRTdG9yZS5cbiAgICAgKi9cbiAgICB0LCBlKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMucGVyc2lzdGVuY2UgPSBlO1xuICAgIH1cbiAgICBhc3luYyBudCh0ID0gNTApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJCYWNrZmlsbCBJbmRleGVzXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4gdGhpcy5zdChlLCB0KSkpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIGluZGV4IGVudHJpZXMgdW50aWwgdGhlIGNhcCBpcyByZWFjaGVkLiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHByb2Nlc3NlZC4gKi8gICAgc3QodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFNldDtcbiAgICAgICAgbGV0IHMgPSBlLCBpID0gITA7XG4gICAgICAgIHJldHVybiBSdC5kb1doaWxlKCgoKSA9PiAhMCA9PT0gaSAmJiBzID4gMCksICgoKSA9PiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLmdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlICYmICFuLmhhcyhlKSkgcmV0dXJuIE4oXCJJbmRleEJhY2tpbGxlclwiLCBgUHJvY2Vzc2luZyBjb2xsZWN0aW9uOiAke2V9YCksIFxuICAgICAgICAgICAgdGhpcy5pdCh0LCBlLCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBzIC09IHQsIG4uYWRkKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaSA9ICExO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBlIC0gcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgZW50cmllcyBmb3IgdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuIFJldHVybnMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcHJvY2Vzc2VkLlxuICAgICAqLyAgICBpdCh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZWFybGllc3Qgb2Zmc2V0IG9mIGFsbCBmaWVsZCBpbmRleGVzIHRvIHF1ZXJ5IHRoZSBsb2NhbCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIuZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlKS5uZXh0KChzID0+IHRoaXMubG9jYWxTdG9yZS5sb2NhbERvY3VtZW50cy5nZXROZXh0RG9jdW1lbnRzKHQsIGUsIHMsIG4pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uY2hhbmdlcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUluZGV4RW50cmllcyh0LCBpKS5uZXh0KCgoKSA9PiB0aGlzLnJ0KHMsIG4pKSkubmV4dCgobiA9PiAoTihcIkluZGV4QmFja2lsbGVyXCIsIGBVcGRhdGluZyBvZmZzZXQ6ICR7bn1gKSwgXG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuKSkpKS5uZXh0KCgoKSA9PiBpLnNpemUpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBuZXh0IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAqLyAgICBydCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdDtcbiAgICAgICAgcmV0dXJuIGUuY2hhbmdlcy5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHB0KGUpO1xuICAgICAgICAgICAgVHQocywgbikgPiAwICYmIChuID0gcyk7XG4gICAgICAgIH0pKSwgbmV3IEl0KG4ucmVhZFRpbWUsIG4uZG9jdW1lbnRLZXksIE1hdGgubWF4KGUuYmF0Y2hJZCwgdC5sYXJnZXN0QmF0Y2hJZCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogYExpc3RlblNlcXVlbmNlYCBpcyBhIG1vbm90b25pYyBzZXF1ZW5jZS4gSXQgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhIG1pbmltdW0gdmFsdWUgdG9cbiAqIGV4Y2VlZC4gQWxsIHN1YnNlcXVlbnQgY2FsbHMgdG8gbmV4dCB3aWxsIHJldHVybiBpbmNyZWFzaW5nIHZhbHVlcy4gSWYgcHJvdmlkZWQgd2l0aCBhXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcbiAqIHdlbGwgYXMgd3JpdGUgb3V0IHNlcXVlbmNlIG51bWJlcnMgdGhhdCBpdCBwcm9kdWNlcyB2aWEgYG5leHQoKWAuXG4gKi8gY2xhc3MgT3Qge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gdCwgZSAmJiAoZS5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSB0ID0+IHRoaXMub3QodCksIHRoaXMudXQgPSB0ID0+IGUud3JpdGVTZXF1ZW5jZU51bWJlcih0KSk7XG4gICAgfVxuICAgIG90KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA9IE1hdGgubWF4KHQsIHRoaXMucHJldmlvdXNWYWx1ZSksIHRoaXMucHJldmlvdXNWYWx1ZTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgY29uc3QgdCA9ICsrdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcy51dCAmJiB0aGlzLnV0KHQpLCB0O1xuICAgIH1cbn1cblxuT3QuY3QgPSAtMTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YXJpYWJsZSBpcyBlaXRoZXIgdW5kZWZpbmVkIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIEZ0KHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PSB0O1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIHRoZSB2YWx1ZSByZXByZXNlbnRzIC0wLiAqLyBmdW5jdGlvbiBCdCh0KSB7XG4gICAgLy8gRGV0ZWN0IGlmIHRoZSB2YWx1ZSBpcyAtMC4wLiBCYXNlZCBvbiBwb2x5ZmlsbCBmcm9tXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gICAgcmV0dXJuIDAgPT09IHQgJiYgMSAvIHQgPT0gLTEgLyAwO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhbHVlIGlzIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIGludGVnZXIgcmFuZ2VcbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byB0ZXN0IGZvciBiZWluZyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSByYW5nZVxuICovIGZ1bmN0aW9uIEx0KHQpIHtcbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCAmJiBOdW1iZXIuaXNJbnRlZ2VyKHQpICYmICFCdCh0KSAmJiB0IDw9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSICYmIHQgPj0gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSByZXNvdXJjZSBwYXRoIGludG8gYSBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybS5cbiAqL1xuZnVuY3Rpb24gcXQodCkge1xuICAgIGxldCBlID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGUubGVuZ3RoID4gMCAmJiAoZSA9IEt0KGUpKSwgZSA9IFV0KHQuZ2V0KG4pLCBlKTtcbiAgICByZXR1cm4gS3QoZSk7XG59XG5cbi8qKiBFbmNvZGVzIGEgc2luZ2xlIHNlZ21lbnQgb2YgYSByZXNvdXJjZSBwYXRoIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBVdCh0LCBlKSB7XG4gICAgbGV0IG4gPSBlO1xuICAgIGNvbnN0IHMgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHM7IGUrKykge1xuICAgICAgICBjb25zdCBzID0gdC5jaGFyQXQoZSk7XG4gICAgICAgIHN3aXRjaCAocykge1xuICAgICAgICAgIGNhc2UgXCJcXDBcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMVwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbiArPSBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG4vKiogRW5jb2RlcyBhIHBhdGggc2VwYXJhdG9yIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBLdCh0KSB7XG4gICAgcmV0dXJuIHQgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gR3QodCkge1xuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgaWYgKEYoZSA+PSAyKSwgMiA9PT0gZSkgcmV0dXJuIEYoXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMCkgJiYgXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMSkpLCB1dC5lbXB0eVBhdGgoKTtcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXG4gICAgLy8gc291cmNlIHZhbHVlLlxuICAgICAgICBjb25zdCBfX1BSSVZBVEVfbGFzdFJlYXNvbmFibGVFc2NhcGVJbmRleCA9IGUgLSAyLCBuID0gW107XG4gICAgbGV0IHMgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZTsgKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHR3byBjaGFyYWN0ZXJzIG9mIGEgdmFsaWQgZW5jb2RlZCBwYXRoIG11c3QgYmUgYSBzZXBhcmF0b3IsIHNvXG4gICAgICAgIC8vIHRoZXJlIG11c3QgYmUgYW4gZW5kIHRvIHRoaXMgc2VnbWVudC5cbiAgICAgICAgY29uc3QgZSA9IHQuaW5kZXhPZihcIlx1MDAwMVwiLCBpKTtcbiAgICAgICAgKGUgPCAwIHx8IGUgPiBfX1BSSVZBVEVfbGFzdFJlYXNvbmFibGVFc2NhcGVJbmRleCkgJiYgTygpO1xuICAgICAgICBzd2l0Y2ggKHQuY2hhckF0KGUgKyAxKSkge1xuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LnN1YnN0cmluZyhpLCBlKTtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgMCA9PT0gcy5sZW5ndGggPyBcbiAgICAgICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgZm9yIHRoZSBjb21tb24gY2FzZSBvZiBhIHNlZ21lbnQgdGhhdCBleGNsdWRlcyBcXDBcbiAgICAgICAgICAgIC8vIGFuZCBcXDAwMVxuICAgICAgICAgICAgbyA9IHIgOiAocyArPSByLCBvID0gcywgcyA9IFwiXCIpLCBuLnB1c2gobyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTBcIjpcbiAgICAgICAgICAgIHMgKz0gdC5zdWJzdHJpbmcoaSwgZSksIHMgKz0gXCJcXDBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMVwiOlxuICAgICAgICAgICAgLy8gVGhlIGVzY2FwZSBjaGFyYWN0ZXIgY2FuIGJlIHVzZWQgaW4gdGhlIG91dHB1dCB0byBlbmNvZGUgaXRzZWxmLlxuICAgICAgICAgICAgcyArPSB0LnN1YnN0cmluZyhpLCBlICsgMSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBPKCk7XG4gICAgICAgIH1cbiAgICAgICAgaSA9IGUgKyAyO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IHV0KG4pO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBRdCA9IFsgXCJ1c2VySWRcIiwgXCJiYXRjaElkXCIgXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcbiAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcbiAqIGxheWVyLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSBbdXNlcklkLCBlbmNvZGVkUGF0aF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnNcbiAqIGluZGV4IHRvIGl0ZXJhdGUgb3ZlciBhbGwgYXQgZG9jdW1lbnQgbXV0YXRpb25zIGZvciBhIGdpdmVuIHBhdGggb3IgbG93ZXIuXG4gKi9cbmZ1bmN0aW9uIGp0KHQsIGUpIHtcbiAgICByZXR1cm4gWyB0LCBxdChlKSBdO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdWxsIGluZGV4IGtleSBvZiBbdXNlcklkLCBlbmNvZGVkUGF0aCwgYmF0Y2hJZF0gZm9yIGluc2VydGluZ1xuICogYW5kIGRlbGV0aW5nIGludG8gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXguXG4gKi8gZnVuY3Rpb24genQodCwgZSwgbikge1xuICAgIHJldHVybiBbIHQsIHF0KGUpLCBuIF07XG59XG5cbi8qKlxuICogQmVjYXVzZSB3ZSBzdG9yZSBhbGwgdGhlIHVzZWZ1bCBpbmZvcm1hdGlvbiBmb3IgdGhpcyBzdG9yZSBpbiB0aGUga2V5LFxuICogdGhlcmUgaXMgbm8gdXNlZnVsIGluZm9ybWF0aW9uIHRvIHN0b3JlIGFzIHRoZSB2YWx1ZS4gVGhlIHJhdyAodW5lbmNvZGVkKVxuICogcGF0aCBjYW5ub3QgYmUgc3RvcmVkIGJlY2F1c2UgSW5kZXhlZERiIGRvZXNuJ3Qgc3RvcmUgcHJvdG90eXBlXG4gKiBpbmZvcm1hdGlvbi5cbiAqLyBjb25zdCBXdCA9IHt9LCBIdCA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJkb2N1bWVudElkXCIgXSwgSnQgPSBbIFwicHJlZml4UGF0aFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImRvY3VtZW50SWRcIiBdLCBZdCA9IFsgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJyZWFkVGltZVwiLCBcInByZWZpeFBhdGhcIiwgXCJkb2N1bWVudElkXCIgXSwgWHQgPSBbIFwiY2Fub25pY2FsSWRcIiwgXCJ0YXJnZXRJZFwiIF0sIFp0ID0gWyBcInRhcmdldElkXCIsIFwicGF0aFwiIF0sIHRlID0gWyBcInBhdGhcIiwgXCJ0YXJnZXRJZFwiIF0sIGVlID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF0sIG5lID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiBdLCBzZSA9IFsgXCJ1aWRcIiwgXCJzZXF1ZW5jZU51bWJlclwiIF0sIGllID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiwgXCJhcnJheVZhbHVlXCIsIFwiZGlyZWN0aW9uYWxWYWx1ZVwiLCBcIm9yZGVyZWREb2N1bWVudEtleVwiLCBcImRvY3VtZW50S2V5XCIgXSwgcmUgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiLCBcIm9yZGVyZWREb2N1bWVudEtleVwiIF0sIG9lID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25QYXRoXCIsIFwiZG9jdW1lbnRJZFwiIF0sIHVlID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25QYXRoXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBjZSA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJsYXJnZXN0QmF0Y2hJZFwiIF0sIGFlID0gWyAuLi5bIC4uLlsgLi4uWyAuLi5bIFwibXV0YXRpb25RdWV1ZXNcIiwgXCJtdXRhdGlvbnNcIiwgXCJkb2N1bWVudE11dGF0aW9uc1wiLCBcInJlbW90ZURvY3VtZW50c1wiLCBcInRhcmdldHNcIiwgXCJvd25lclwiLCBcInRhcmdldEdsb2JhbFwiLCBcInRhcmdldERvY3VtZW50c1wiIF0sIFwiY2xpZW50TWV0YWRhdGFcIiBdLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIgXSwgXCJjb2xsZWN0aW9uUGFyZW50c1wiIF0sIFwiYnVuZGxlc1wiLCBcIm5hbWVkUXVlcmllc1wiIF0sIGhlID0gWyAuLi5hZSwgXCJkb2N1bWVudE92ZXJsYXlzXCIgXSwgbGUgPSBbIFwibXV0YXRpb25RdWV1ZXNcIiwgXCJtdXRhdGlvbnNcIiwgXCJkb2N1bWVudE11dGF0aW9uc1wiLCBcInJlbW90ZURvY3VtZW50c1YxNFwiLCBcInRhcmdldHNcIiwgXCJvd25lclwiLCBcInRhcmdldEdsb2JhbFwiLCBcInRhcmdldERvY3VtZW50c1wiLCBcImNsaWVudE1ldGFkYXRhXCIsIFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiwgXCJjb2xsZWN0aW9uUGFyZW50c1wiLCBcImJ1bmRsZXNcIiwgXCJuYW1lZFF1ZXJpZXNcIiwgXCJkb2N1bWVudE92ZXJsYXlzXCIgXSwgZmUgPSBsZSwgZGUgPSBbIC4uLmZlLCBcImluZGV4Q29uZmlndXJhdGlvblwiLCBcImluZGV4U3RhdGVcIiwgXCJpbmRleEVudHJpZXNcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3Mgd2UgZXh0ZW5kcyBBdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmh0ID0gdCwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX2UodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHJldHVybiBidC5NKG4uaHQsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBtZSh0KSB7XG4gICAgbGV0IGUgPSAwO1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZSsrO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBnZSh0LCBlKSB7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKG4sIHRbbl0pO1xufVxuXG5mdW5jdGlvbiB5ZSh0KSB7XG4gICAgZm9yIChjb25zdCBlIGluIHQpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgZSkpIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXG4vLyB0cmVlLlxuY2xhc3MgcGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5yb290ID0gZSB8fCBUZS5FTVBUWTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICBpbnNlcnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IHBlKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290Lmluc2VydCh0LCBlLCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgVGUuQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcGUodGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QucmVtb3ZlKHQsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBUZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXG4gICAgZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFlLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5jb21wYXJhdG9yKHQsIGUua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSByZXR1cm4gZS52YWx1ZTtcbiAgICAgICAgICAgIG4gPCAwID8gZSA9IGUubGVmdCA6IG4gPiAwICYmIChlID0gZS5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxuICAgIC8vIGV4aXN0LlxuICAgIGluZGV4T2YodCkge1xuICAgICAgICAvLyBOdW1iZXIgb2Ygbm9kZXMgdGhhdCB3ZXJlIHBydW5lZCB3aGVuIGRlc2NlbmRpbmcgcmlnaHRcbiAgICAgICAgbGV0IGUgPSAwLCBuID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshbi5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuY29tcGFyYXRvcih0LCBuLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGUgKyBuLmxlZnQuc2l6ZTtcbiAgICAgICAgICAgIHMgPCAwID8gbiA9IG4ubGVmdCA6IChcbiAgICAgICAgICAgIC8vIENvdW50IGFsbCBub2RlcyBsZWZ0IG9mIHRoZSBub2RlIHBsdXMgdGhlIG5vZGUgaXRzZWxmXG4gICAgICAgICAgICBlICs9IG4ubGVmdC5zaXplICsgMSwgbiA9IG4ucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vZGUgbm90IGZvdW5kXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3Quc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWluS2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSwgbiksICExKSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQucHVzaChgJHtlfToke259YCksICExKSkpLCBgeyR7dC5qb2luKFwiLCBcIil9fWA7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXNcbiAgICAvLyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJZSh0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IEllKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJZSh0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJZSh0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBcbi8vIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXG5jbGFzcyBJZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmlzUmV2ZXJzZSA9IHMsIHRoaXMubm9kZVN0YWNrID0gW107XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgZm9yICg7IXQuaXNFbXB0eSgpOyApIGlmIChpID0gZSA/IG4odC5rZXksIGUpIDogMSwgXG4gICAgICAgIC8vIGZsaXAgdGhlIGNvbXBhcmlzb24gaWYgd2UncmUgZ29pbmcgaW4gcmV2ZXJzZVxuICAgICAgICBlICYmIHMgJiYgKGkgKj0gLTEpLCBpIDwgMCkgXG4gICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XG4gICAgICAgIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQubGVmdCA6IHQucmlnaHQ7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKDAgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjayxcbiAgICAgICAgICAgICAgICAvLyBidXQgc3RvcCBpdGVyYXRpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBncmVhdGVyIHRoYW4gb3VyIHN0YXJ0IGtleSwgYWRkIGl0IHRvIHRoZSBzdGFjayBhbmQgbW92ZVxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgb25lXG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LnJpZ2h0IDogdC5sZWZ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5ub2RlU3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSBmb3IgKHQgPSB0LmxlZnQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdC5yaWdodDsgZWxzZSBmb3IgKHQgPSB0LnJpZ2h0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgXG4gICAgICAgIHQgPSB0LmxlZnQ7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubm9kZVN0YWNrLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxuLy8gUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXG5jbGFzcyBUZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLmNvbG9yID0gbnVsbCAhPSBuID8gbiA6IFRlLlJFRCwgdGhpcy5sZWZ0ID0gbnVsbCAhPSBzID8gcyA6IFRlLkVNUFRZLCBcbiAgICAgICAgdGhpcy5yaWdodCA9IG51bGwgIT0gaSA/IGkgOiBUZS5FTVBUWSwgdGhpcy5zaXplID0gdGhpcy5sZWZ0LnNpemUgKyAxICsgdGhpcy5yaWdodC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGUobnVsbCAhPSB0ID8gdCA6IHRoaXMua2V5LCBudWxsICE9IGUgPyBlIDogdGhpcy52YWx1ZSwgbnVsbCAhPSBuID8gbiA6IHRoaXMuY29sb3IsIG51bGwgIT0gcyA/IHMgOiB0aGlzLmxlZnQsIG51bGwgIT0gaSA/IGkgOiB0aGlzLnJpZ2h0KTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxuICAgIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pc0VtcHR5KCkgPyB0aGlzIDogdGhpcy5sZWZ0Lm1pbigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigpLmtleTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5pc0VtcHR5KCkgPyB0aGlzLmtleSA6IHRoaXMucmlnaHQubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGkgPSBuKHQsIHMua2V5KTtcbiAgICAgICAgcmV0dXJuIHMgPSBpIDwgMCA/IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQuaW5zZXJ0KHQsIGUsIG4pLCBudWxsKSA6IDAgPT09IGkgPyBzLmNvcHkobnVsbCwgZSwgbnVsbCwgbnVsbCwgbnVsbCkgOiBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5pbnNlcnQodCwgZSwgbikpLCBcbiAgICAgICAgcy5maXhVcCgpO1xuICAgIH1cbiAgICByZW1vdmVNaW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSByZXR1cm4gVGUuRU1QVFk7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQubGVmdC5pc1JlZCgpIHx8IHQubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHQgPSB0Lm1vdmVSZWRMZWZ0KCkpLCB0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIHQubGVmdC5yZW1vdmVNaW4oKSwgbnVsbCksIFxuICAgICAgICB0LmZpeFVwKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMgPSB0aGlzO1xuICAgICAgICBpZiAoZSh0LCBzLmtleSkgPCAwKSBzLmxlZnQuaXNFbXB0eSgpIHx8IHMubGVmdC5pc1JlZCgpIHx8IHMubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRMZWZ0KCkpLCBcbiAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQucmVtb3ZlKHQsIGUpLCBudWxsKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAocy5sZWZ0LmlzUmVkKCkgJiYgKHMgPSBzLnJvdGF0ZVJpZ2h0KCkpLCBzLnJpZ2h0LmlzRW1wdHkoKSB8fCBzLnJpZ2h0LmlzUmVkKCkgfHwgcy5yaWdodC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRSaWdodCgpKSwgXG4gICAgICAgICAgICAwID09PSBlKHQsIHMua2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChzLnJpZ2h0LmlzRW1wdHkoKSkgcmV0dXJuIFRlLkVNUFRZO1xuICAgICAgICAgICAgICAgIG4gPSBzLnJpZ2h0Lm1pbigpLCBzID0gcy5jb3B5KG4ua2V5LCBuLnZhbHVlLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZU1pbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmUodCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzLmZpeFVwKCk7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxuICAgIGZpeFVwKCkge1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmlzUmVkKCkgJiYgIXQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVMZWZ0KCkpLCB0LmxlZnQuaXNSZWQoKSAmJiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQubGVmdC5pc1JlZCgpICYmIHQucmlnaHQuaXNSZWQoKSAmJiAodCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkTGVmdCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgdC5yaWdodC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQgPSB0LnJvdGF0ZUxlZnQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkUmlnaHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgcm90YXRlTGVmdCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBUZS5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgdCwgbnVsbCk7XG4gICAgfVxuICAgIHJvdGF0ZVJpZ2h0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIFRlLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIHQpO1xuICAgIH1cbiAgICBjb2xvckZsaXAoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCAhdGhpcy5sZWZ0LmNvbG9yLCBudWxsLCBudWxsKSwgZSA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIHQsIGUpO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMiwgdCkgPD0gdGhpcy5zaXplICsgMTtcbiAgICB9XG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXG4gICAgLy8gbGVhdmVzIGlzIGVxdWFsIG9uIGJvdGggc2lkZXMuICBUaGlzIGZ1bmN0aW9uIHZlcmlmaWVzIHRoYXQgb3IgYXNzZXJ0cy5cbiAgICBjaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWQoKSAmJiB0aGlzLmxlZnQuaXNSZWQoKSkgdGhyb3cgTygpO1xuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZCgpKSB0aHJvdyBPKCk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY2hlY2soKTtcbiAgICAgICAgaWYgKHQgIT09IHRoaXMucmlnaHQuY2hlY2soKSkgdGhyb3cgTygpO1xuICAgICAgICByZXR1cm4gdCArICh0aGlzLmlzUmVkKCkgPyAwIDogMSk7XG4gICAgfVxufVxuXG4gLy8gZW5kIExMUkJOb2RlXG4vLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcblRlLkVNUFRZID0gbnVsbCwgVGUuUkVEID0gITAsIFRlLkJMQUNLID0gITE7XG5cbi8vIGVuZCBMTFJCRW1wdHlOb2RlXG5UZS5FTVBUWSA9IG5ldyBcbi8vIFJlcHJlc2VudHMgYW4gZW1wdHkgbm9kZSAoYSBsZWFmIG5vZGUgaW4gdGhlIFJlZC1CbGFjayBUcmVlKS5cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgdGhyb3cgTygpO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG4gICAgZ2V0IGNvbG9yKCkge1xuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxuICAgIGdldCBsZWZ0KCkge1xuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxuICAgIGdldCByaWdodCgpIHtcbiAgICAgICAgdGhyb3cgTygpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUZSh0LCBlKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGNoZWNrKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTb3J0ZWRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZWxlbWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci5cbiAqXG4gKiBOT1RFOiBpZiBwcm92aWRlZCBjb21wYXJhdG9yIHJldHVybnMgMCBmb3IgdHdvIGVsZW1lbnRzLCB3ZSBjb25zaWRlciB0aGVtIHRvXG4gKiBiZSBlcXVhbCFcbiAqL1xuY2xhc3MgRWUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5kYXRhID0gbmV3IHBlKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmRhdGEuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcbiAgICB9XG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZih0KTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gJmx0Oz0gZWxlbSAmbHQ7IHJhbmdlWzFdLiAqLyAgICBmb3JFYWNoSW5SYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHRbMF0pO1xuICAgICAgICBmb3IgKDtuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHMua2V5LCB0WzFdKSA+PSAwKSByZXR1cm47XG4gICAgICAgICAgICBlKHMua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCAmbHQ7PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmb3JFYWNoV2hpbGUodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuID0gdm9pZCAwICE9PSBlID8gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKSA6IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpOyBuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoIXQobi5nZXROZXh0KCkua2V5KSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqLyAgICBmaXJzdEFmdGVyT3JFcXVhbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpO1xuICAgICAgICByZXR1cm4gZS5oYXNOZXh0KCkgPyBlLmdldE5leHQoKS5rZXkgOiBudWxsO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZSh0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQWUodGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqLyAgICBhZGQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkuaW5zZXJ0KHQsICEwKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKHQpID8gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIHVuaW9uV2l0aCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIGByZXN1bHRgIGFsd2F5cyByZWZlcnMgdG8gdGhlIGxhcmdlciBvbmUgb2YgdGhlIHR3byBzZXRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBlLnNpemUgPCB0LnNpemUgJiYgKGUgPSB0LCB0ID0gdGhpcyksIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlID0gZS5hZGQodCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBFZSkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuZGF0YS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKDAgIT09IHRoaXMuY29tcGFyYXRvcih0LCBzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCBcIlNvcnRlZFNldChcIiArIHQudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICBjb3B5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBFZSh0aGlzLmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gZS5kYXRhID0gdCwgZTtcbiAgICB9XG59XG5cbmNsYXNzIEFlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaXRlciA9IHQ7XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5oYXNOZXh0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byBzb3J0ZWQgc2V0cyBmb3IgZXF1YWxpdHkgdXNpbmcgdGhlaXIgbmF0dXJhbCBvcmRlcmluZy4gVGhlXG4gKiBtZXRob2QgY29tcHV0ZXMgdGhlIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXRcbiAqIGlzIGluIGBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluXG4gKiBgYmVmb3JlYCBidXQgbWlzc2luZyBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBzZXQuXG4gKiBAcGFyYW0gYWZ0ZXIgLSBUaGUgZWxlbWVudHMgdG8gZGlmZiBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBzZXQuXG4gKiBAcGFyYW0gY29tcGFyYXRvciAtIFRoZSBjb21wYXJhdG9yIGZvciB0aGUgZWxlbWVudHMgaW4gYmVmb3JlIGFuZCBhZnRlci5cbiAqIEBwYXJhbSBvbkFkZCAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZiBgXG4gKiBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC5cbiAqIEBwYXJhbSBvblJlbW92ZSAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZlxuICogYGJlZm9yZWAgYnV0IG5vdCBgYWZ0ZXJgLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIG5leHQgZWxlbWVudCBmcm9tIHRoZSBpdGVyYXRvciBvciBgdW5kZWZpbmVkYCBpZiBub25lIGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gdmUodCkge1xuICAgIHJldHVybiB0Lmhhc05leHQoKSA/IHQuZ2V0TmV4dCgpIDogdm9pZCAwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhIHNldCBvZiBmaWVsZHMgdGhhdCBjYW4gYmUgdXNlZCB0byBwYXJ0aWFsbHkgcGF0Y2ggYSBkb2N1bWVudC5cbiAqIEZpZWxkTWFzayBpcyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggT2JqZWN0VmFsdWUuXG4gKiBFeGFtcGxlczpcbiAqICAgZm9vIC0gT3ZlcndyaXRlcyBmb28gZW50aXJlbHkgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWUuIElmIGZvbyBpcyBub3RcbiAqICAgICAgICAgcHJlc2VudCBpbiB0aGUgY29tcGFuaW9uIE9iamVjdFZhbHVlLCB0aGUgZmllbGQgaXMgZGVsZXRlZC5cbiAqICAgZm9vLmJhciAtIE92ZXJ3cml0ZXMgb25seSB0aGUgZmllbGQgYmFyIG9mIHRoZSBvYmplY3QgZm9vLlxuICogICAgICAgICAgICAgSWYgZm9vIGlzIG5vdCBhbiBvYmplY3QsIGZvbyBpcyByZXBsYWNlZCB3aXRoIGFuIG9iamVjdFxuICogICAgICAgICAgICAgY29udGFpbmluZyBmb29cbiAqLyBjbGFzcyBSZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmZpZWxkcyA9IHQsIFxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRpb24gb2YgRmllbGRNYXNrXG4gICAgICAgIC8vIFNvcnQgdGhlIGZpZWxkIG1hc2sgdG8gc3VwcG9ydCBgRmllbGRNYXNrLmlzRXF1YWwoKWAgYW5kIGFzc2VydCBiZWxvdy5cbiAgICAgICAgdC5zb3J0KGF0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmUoW10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IEZpZWxkTWFzayBvYmplY3QgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGFkZGluZyBhbGwgdGhlIGdpdmVuXG4gICAgICogZmllbGRzIHBhdGhzIHRvIHRoaXMgZmllbGQgbWFzay5cbiAgICAgKi8gICAgdW5pb25XaXRoKHQpIHtcbiAgICAgICAgbGV0IGUgPSBuZXcgRWUoYXQuY29tcGFyYXRvcik7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmZpZWxkcykgZSA9IGUuYWRkKHQpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUuYWRkKG4pO1xuICAgICAgICByZXR1cm4gbmV3IFJlKGUudG9BcnJheSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCBgZmllbGRQYXRoYCBpcyBpbmNsdWRlZCBieSBhdCBsZWFzdCBvbmUgZmllbGQgaW4gdGhpcyBmaWVsZFxuICAgICAqIG1hc2suXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGFuIE8obikgb3BlcmF0aW9uLCB3aGVyZSBgbmAgaXMgdGhlIHNpemUgb2YgdGhlIGZpZWxkIG1hc2suXG4gICAgICovICAgIGNvdmVycyh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmZpZWxkcykgaWYgKGUuaXNQcmVmaXhPZih0KSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnQodGhpcy5maWVsZHMsIHQuZmllbGRzLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cbiAqLyBjbGFzcyBQZSBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy5uYW1lID0gXCJCYXNlNjREZWNvZGVFcnJvclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBDb252ZXJ0cyBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZyB0byBhIGJpbmFyeSBzdHJpbmcuICovXG4vKiogVHJ1ZSBpZiBhbmQgb25seSBpZiB0aGUgQmFzZTY0IGNvbnZlcnNpb24gZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBiZSgpIHtcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgYXRvYjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1tdXRhYmxlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIFwicHJvdG9cIiBieXRlIHN0cmluZy5cbiAqXG4gKiBQcm90byBieXRlIHN0cmluZ3MgY2FuIGVpdGhlciBiZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmdzIG9yIFVpbnQ4QXJyYXlzIHdoZW5cbiAqIHNlbnQgb24gdGhlIHdpcmUuIFRoaXMgY2xhc3MgYWJzdHJhY3RzIGF3YXkgdGhpcyBkaWZmZXJlbnRpYXRpb24gYnkgaG9sZGluZ1xuICogdGhlIHByb3RvIGJ5dGUgc3RyaW5nIGluIGEgY29tbW9uIGNsYXNzIHRoYXQgbXVzdCBiZSBjb252ZXJ0ZWQgaW50byBhIHN0cmluZ1xuICogYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBwcm90by5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIFZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYmluYXJ5U3RyaW5nID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcodCkge1xuICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXRvYih0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IGBET01FeGNlcHRpb25gIGlzIGRlZmluZWQgYmVmb3JlIHVzaW5nIGl0IHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gXCJSZWZlcmVuY2VFcnJvcjogUHJvcGVydHkgJ0RPTUV4Y2VwdGlvbicgZG9lc24ndCBleGlzdFwiIGluIHJlYWN0LW5hdGl2ZS5cbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNzExNSlcbiAgICAgICAgICAgICAgICB0aHJvdyBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiA/IG5ldyBQZShcIkludmFsaWQgYmFzZTY0IHN0cmluZzogXCIgKyB0KSA6IHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqIENvbnZlcnRzIGEgYmluYXJ5IHN0cmluZyB0byBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZy4gKi8gKHQpO1xuICAgICAgICByZXR1cm4gbmV3IFZlKGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkodCkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTsgUmVtb3ZlIHRoZSBjb3B5IG9mIHRoZSBieXRlIHN0cmluZyBoZXJlIGFzIHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGlzIGZyZXF1ZW50bHkgY2FsbGVkIGR1cmluZyBpbmRleGluZy5cbiAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGFuIFVpbnQ4YXJyYXkgdG8gYSBiaW5hcnkgc3RyaW5nLlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGxldCBlID0gXCJcIjtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikgZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gVWludDhBcnJheS5cbiAqLyAodCk7XG4gICAgICAgIHJldHVybiBuZXcgVmUoZSk7XG4gICAgfVxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXh0OiAoKSA9PiB0IDwgdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KHQrKyksXG4gICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB0aGlzLmJpbmFyeVN0cmluZywgYnRvYSh0KTtcbiAgICAgICAgdmFyIHQ7XG4gICAgfVxuICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0Lmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGVbbl0gPSB0LmNoYXJDb2RlQXQobik7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvLyBBIFJlZ0V4cCBtYXRjaGluZyBJU08gODYwMSBVVEMgdGltZXN0YW1wcyB3aXRoIG9wdGlvbmFsIGZyYWN0aW9uLlxuICAgICAgICAodGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBhcHByb3hpbWF0ZUJ5dGVTaXplKCkge1xuICAgICAgICByZXR1cm4gMiAqIHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIGV0KHRoaXMuYmluYXJ5U3RyaW5nLCB0LmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTdHJpbmcgPT09IHQuYmluYXJ5U3RyaW5nO1xuICAgIH1cbn1cblxuVmUuRU1QVFlfQllURV9TVFJJTkcgPSBuZXcgVmUoXCJcIik7XG5cbmNvbnN0IFNlID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB2YWx1ZXMgZm9yIGEgdGltZXN0YW1wIHZhbHVlIGludG8gYSBcInNlY29uZHMgYW5kXG4gKiBuYW5vc1wiIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIERlKHQpIHtcbiAgICAvLyBUaGUganNvbiBpbnRlcmZhY2UgKGZvciB0aGUgYnJvd3Nlcikgd2lsbCByZXR1cm4gYW4gaXNvIHRpbWVzdGFtcCBzdHJpbmcsXG4gICAgLy8gd2hpbGUgdGhlIHByb3RvIGpzIGxpYnJhcnkgKGZvciBub2RlKSB3aWxsIHJldHVybiBhXG4gICAgLy8gZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBpbnN0YW5jZS5cbiAgICBpZiAoRighIXQpLCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIC8vIFRoZSBkYXRlIHN0cmluZyBjYW4gaGF2ZSBoaWdoZXIgcHJlY2lzaW9uIChuYW5vcykgdGhhbiB0aGUgRGF0ZSBjbGFzc1xuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxuICAgICAgICAvLyBQYXJzZSB0aGUgbmFub3MgcmlnaHQgb3V0IG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgY29uc3QgbiA9IFNlLmV4ZWModCk7XG4gICAgICAgIGlmIChGKCEhbiksIG5bMV0pIHtcbiAgICAgICAgICAgIC8vIFBhZCB0aGUgZnJhY3Rpb24gb3V0IHRvIDkgZGlnaXRzIChuYW5vcykuXG4gICAgICAgICAgICBsZXQgdCA9IG5bMV07XG4gICAgICAgICAgICB0ID0gKHQgKyBcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMCwgOSksIGUgPSBOdW1iZXIodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFyc2UgdGhlIGRhdGUgdG8gZ2V0IHRoZSBzZWNvbmRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgRGF0ZSh0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IE1hdGguZmxvb3Iocy5nZXRUaW1lKCkgLyAxZTMpLFxuICAgICAgICAgICAgbmFub3M6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogQ2UodC5zZWNvbmRzKSxcbiAgICAgICAgbmFub3M6IENlKHQubmFub3MpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIG51bWJlcnMgaW50byBhIEphdmFTY3JpcHQgbnVtYmVyLlxuICogUmV0dXJucyAwIGlmIHRoZSB2YWx1ZSBpcyBub3QgbnVtZXJpYy5cbiAqLyBmdW5jdGlvbiBDZSh0KSB7XG4gICAgLy8gVE9ETyhiam9ybmljayk6IEhhbmRsZSBpbnQ2NCBncmVhdGVyIHRoYW4gNTMgYml0cy5cbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCA/IHQgOiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gTnVtYmVyKHQpIDogMDtcbn1cblxuLyoqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgQmxvYnMgaW50byBhIEJ5dGVTdHJpbmcuICovIGZ1bmN0aW9uIHhlKHQpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IFZlLmZyb21CYXNlNjRTdHJpbmcodCkgOiBWZS5mcm9tVWludDhBcnJheSh0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsbHktYXBwbGllZCBTZXJ2ZXJUaW1lc3RhbXAuXG4gKlxuICogU2VydmVyIFRpbWVzdGFtcHMgYXJlIGJhY2tlZCBieSBNYXBWYWx1ZXMgdGhhdCBjb250YWluIGFuIGludGVybmFsIGZpZWxkXG4gKiBgX190eXBlX19gIHdpdGggYSB2YWx1ZSBvZiBgc2VydmVyX3RpbWVzdGFtcGAuIFRoZSBwcmV2aW91cyB2YWx1ZSBhbmQgbG9jYWxcbiAqIHdyaXRlIHRpbWUgYXJlIHN0b3JlZCBpbiBpdHMgYF9fcHJldmlvdXNfdmFsdWVfX2AgYW5kIGBfX2xvY2FsX3dyaXRlX3RpbWVfX2BcbiAqIGZpZWxkcyByZXNwZWN0aXZlbHkuXG4gKlxuICogTm90ZXM6XG4gKiAtIFNlcnZlclRpbWVzdGFtcFZhbHVlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFcbiAqICAgdHJhbnNmb3JtLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIFRoZXJlZm9yZVxuICogICB0aGV5IGRvIG5vdCBuZWVkIHRvIGJlIHBhcnNlZCBvciBzZXJpYWxpemVkLlxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcbiAqICAgZXZhbHVhdGUgdG8gYG51bGxgLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IHBhc3NpbmcgY3VzdG9tXG4gKiAgIEZpZWxkVmFsdWVPcHRpb25zIHRvIHZhbHVlKCkuXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxuICogICBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBOZSh0KSB7XG4gICAgdmFyIGUsIG47XG4gICAgcmV0dXJuIFwic2VydmVyX3RpbWVzdGFtcFwiID09PSAobnVsbCA9PT0gKG4gPSAoKG51bGwgPT09IChlID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5tYXBWYWx1ZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5maWVsZHMpIHx8IHt9KS5fX3R5cGVfXykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdHJpbmdWYWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTZXJ2ZXJUaW1lc3RhbXAgcHJvdG8gdmFsdWUgKHVzaW5nIHRoZSBpbnRlcm5hbCBmb3JtYXQpLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBiZWZvcmUgdGhpcyBTZXJ2ZXJUaW1lc3RhbXAgd2FzIHNldC5cbiAqXG4gKiBQcmVzZXJ2aW5nIHRoZSBwcmV2aW91cyB2YWx1ZXMgYWxsb3dzIHRoZSB1c2VyIHRvIGRpc3BsYXkgdGhlIGxhc3QgcmVzb2xlZFxuICogdmFsdWUgdW50aWwgdGhlIGJhY2tlbmQgcmVzcG9uZHMgd2l0aCB0aGUgdGltZXN0YW1wLlxuICovXG5mdW5jdGlvbiBrZSh0KSB7XG4gICAgY29uc3QgZSA9IHQubWFwVmFsdWUuZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXztcbiAgICByZXR1cm4gTmUoZSkgPyBrZShlKSA6IGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbG9jYWwgdGltZSBhdCB3aGljaCB0aGlzIHRpbWVzdGFtcCB3YXMgZmlyc3Qgc2V0LlxuICovIGZ1bmN0aW9uIE1lKHQpIHtcbiAgICBjb25zdCBlID0gRGUodC5tYXBWYWx1ZS5maWVsZHMuX19sb2NhbF93cml0ZV90aW1lX18udGltZXN0YW1wVmFsdWUpO1xuICAgIHJldHVybiBuZXcgaXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgJGUge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBEYXRhYmFzZUluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIGhvc3QsIGRhdGFiYXNlSWQgYW5kXG4gICAgICogcGVyc2lzdGVuY2VLZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSB0byB1c2UuXG4gICAgICogQHBhcmFtIGFwcElkIC0gVGhlIEZpcmViYXNlIEFwcCBJZC5cbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VLZXkgLSBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIEZpcmVzdG9yZSdzIGxvY2FsXG4gICAgICogc3RvcmFnZSAodXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBkYXRhYmFzZUlkKS5cbiAgICAgKiBAcGFyYW0gaG9zdCAtIFRoZSBGaXJlc3RvcmUgYmFja2VuZCBob3N0IHRvIGNvbm5lY3QgdG8uXG4gICAgICogQHBhcmFtIHNzbCAtIFdoZXRoZXIgdG8gdXNlIFNTTCB3aGVuIGNvbm5lY3RpbmcuXG4gICAgICogQHBhcmFtIGZvcmNlTG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZm9yY2VMb25nUG9sbGluZyBvcHRpb25cbiAgICAgKiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSBhdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZGV0ZWN0QnVmZmVyaW5nUHJveHlcbiAgICAgKiBvcHRpb24gd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gbG9uZ1BvbGxpbmdPcHRpb25zIE9wdGlvbnMgdGhhdCBjb25maWd1cmUgbG9uZy1wb2xsaW5nLlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCB1LCBjKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuYXBwSWQgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gcywgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gciwgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLmxvbmdQb2xsaW5nT3B0aW9ucyA9IHUsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGM7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIE9lIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gdCwgdGhpcy5kYXRhYmFzZSA9IGUgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IE9lKFwiXCIsIFwiXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEZWZhdWx0RGF0YWJhc2UoKSB7XG4gICAgICAgIHJldHVybiBcIihkZWZhdWx0KVwiID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBPZSAmJiB0LnByb2plY3RJZCA9PT0gdGhpcy5wcm9qZWN0SWQgJiYgdC5kYXRhYmFzZSA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBGZSA9IHtcbiAgICBtYXBWYWx1ZToge1xuICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwiX19tYXhfX1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCBCZSA9IHtcbiAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG59O1xuXG4vKiogRXh0cmFjdHMgdGhlIGJhY2tlbmQncyB0eXBlIG9yZGVyIGZvciB0aGUgcHJvdmlkZWQgdmFsdWUuICovXG5mdW5jdGlvbiBMZSh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCB8fCBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IE5lKHQpID8gNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOiBlbih0KSA/IDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDogMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDogTygpO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIHFlKHQsIGUpIHtcbiAgICBpZiAodCA9PT0gZSkgcmV0dXJuICEwO1xuICAgIGNvbnN0IG4gPSBMZSh0KTtcbiAgICBpZiAobiAhPT0gTGUoZSkpIHJldHVybiAhMTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgOTAwNzE5OTI1NDc0MDk5MSAvKiBUeXBlT3JkZXIuTWF4VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlID09PSBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBNZSh0KS5pc0VxdWFsKE1lKGUpKTtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLnRpbWVzdGFtcFZhbHVlICYmIHQudGltZXN0YW1wVmFsdWUubGVuZ3RoID09PSBlLnRpbWVzdGFtcFZhbHVlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGVxdWFsaXR5IGZvciBJU08gODYwMSB0aW1lc3RhbXBzXG4gICAgICAgICAgICByZXR1cm4gdC50aW1lc3RhbXBWYWx1ZSA9PT0gZS50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBEZSh0LnRpbWVzdGFtcFZhbHVlKSwgcyA9IERlKGUudGltZXN0YW1wVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uc2Vjb25kcyA9PT0gcy5zZWNvbmRzICYmIG4ubmFub3MgPT09IHMubmFub3M7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZSA9PT0gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHhlKHQuYnl0ZXNWYWx1ZSkuaXNFcXVhbCh4ZShlLmJ5dGVzVmFsdWUpKTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnJlZmVyZW5jZVZhbHVlID09PSBlLnJlZmVyZW5jZVZhbHVlO1xuXG4gICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIENlKHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgPT09IENlKGUuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgQ2UodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IENlKGUuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmIChcImludGVnZXJWYWx1ZVwiIGluIHQgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiBlKSByZXR1cm4gQ2UodC5pbnRlZ2VyVmFsdWUpID09PSBDZShlLmludGVnZXJWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gQ2UodC5kb3VibGVWYWx1ZSksIHMgPSBDZShlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gcyA/IEJ0KG4pID09PSBCdChzKSA6IGlzTmFOKG4pICYmIGlzTmFOKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gbnQodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgcWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHMgPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChtZShuKSAhPT0gbWUocykpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eSh0KSAmJiAodm9pZCAwID09PSBzW3RdIHx8ICFxZShuW3RdLCBzW3RdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKHQsIGUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTygpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVWUodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09ICh0LnZhbHVlcyB8fCBbXSkuZmluZCgodCA9PiBxZSh0LCBlKSkpO1xufVxuXG5mdW5jdGlvbiBLZSh0LCBlKSB7XG4gICAgaWYgKHQgPT09IGUpIHJldHVybiAwO1xuICAgIGNvbnN0IG4gPSBMZSh0KSwgcyA9IExlKGUpO1xuICAgIGlmIChuICE9PSBzKSByZXR1cm4gZXQobiwgcyk7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGV0KHQuYm9vbGVhblZhbHVlLCBlLmJvb2xlYW5WYWx1ZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IENlKHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpLCBzID0gQ2UoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbiA8IHMgPyAtMSA6IG4gPiBzID8gMSA6IG4gPT09IHMgPyAwIDogXG4gICAgICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxuICAgICAgICAgICAgaXNOYU4obikgPyBpc05hTihzKSA/IDAgOiAtMSA6IDE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gR2UodC50aW1lc3RhbXBWYWx1ZSwgZS50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gR2UoTWUodCksIE1lKGUpKTtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBldCh0LnN0cmluZ1ZhbHVlLCBlLnN0cmluZ1ZhbHVlKTtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHhlKHQpLCBzID0geGUoZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5jb21wYXJlVG8ocyk7XG4gICAgICAgIH0odC5ieXRlc1ZhbHVlLCBlLmJ5dGVzVmFsdWUpO1xuXG4gICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnNwbGl0KFwiL1wiKSwgcyA9IGUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBldChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LnJlZmVyZW5jZVZhbHVlLCBlLnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBldChDZSh0LmxhdGl0dWRlKSwgQ2UoZS5sYXRpdHVkZSkpO1xuICAgICAgICAgICAgaWYgKDAgIT09IG4pIHJldHVybiBuO1xuICAgICAgICAgICAgcmV0dXJuIGV0KENlKHQubG9uZ2l0dWRlKSwgQ2UoZS5sb25naXR1ZGUpKTtcbiAgICAgICAgfSh0Lmdlb1BvaW50VmFsdWUsIGUuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC52YWx1ZXMgfHwgW10sIHMgPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gS2Uoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5hcnJheVZhbHVlLCBlLmFycmF5VmFsdWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCA9PT0gRmUubWFwVmFsdWUgJiYgZSA9PT0gRmUubWFwVmFsdWUpIHJldHVybiAwO1xuICAgICAgICAgICAgaWYgKHQgPT09IEZlLm1hcFZhbHVlKSByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmIChlID09PSBGZS5tYXBWYWx1ZSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmllbGRzIHx8IHt9LCBzID0gT2JqZWN0LmtleXMobiksIGkgPSBlLmZpZWxkcyB8fCB7fSwgciA9IE9iamVjdC5rZXlzKGkpO1xuICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggTWFwVmFsdWVzIGFyZSBsaWtlbHkgc29ydGVkIGNvcnJlY3RseSBiYXNlZCBvbiB0aGVpciBpbnNlcnRpb25cbiAgICAgICAgICAgIC8vIG9yZGVyIChlLmcuIHdoZW4gcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCksIGxvY2FsIG1vZGlmaWNhdGlvbnMgY2FuIGJyaW5nXG4gICAgICAgICAgICAvLyBlbGVtZW50cyBvdXQgb2Ygb3JkZXIuIFdlIG5lZWQgdG8gcmUtc29ydCB0aGUgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgICAgIC8vIGNhbm9uaWNhbCBJRHMgYXJlIGluZGVwZW5kZW50IG9mIGluc2VydGlvbiBvcmRlci5cbiAgICAgICAgICAgIHMuc29ydCgpLCByLnNvcnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcy5sZW5ndGggJiYgdCA8IHIubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZXQoc1t0XSwgclt0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBLZShuW3NbdF1dLCBpW3JbdF1dKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gbykgcmV0dXJuIG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXQocy5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEdlbmVyYXRlcyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGUgcHJvdmlkZWQgZmllbGQgdmFsdWUgKGFzIHVzZWQgaW4gVGFyZ2V0XG4gKiBzZXJpYWxpemF0aW9uKS5cbiAqLyAodC5tYXBWYWx1ZSwgZS5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEdlKHQsIGUpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIHQubGVuZ3RoID09PSBlLmxlbmd0aCkgcmV0dXJuIGV0KHQsIGUpO1xuICAgIGNvbnN0IG4gPSBEZSh0KSwgcyA9IERlKGUpLCBpID0gZXQobi5zZWNvbmRzLCBzLnNlY29uZHMpO1xuICAgIHJldHVybiAwICE9PSBpID8gaSA6IGV0KG4ubmFub3MsIHMubmFub3MpO1xufVxuXG5mdW5jdGlvbiBRZSh0KSB7XG4gICAgcmV0dXJuIGplKHQpO1xufVxuXG5mdW5jdGlvbiBqZSh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IFwibnVsbFwiIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuYm9vbGVhblZhbHVlIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuaW50ZWdlclZhbHVlIDogXCJkb3VibGVWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5kb3VibGVWYWx1ZSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gRGUodCk7XG4gICAgICAgIHJldHVybiBgdGltZSgke2Uuc2Vjb25kc30sJHtlLm5hbm9zfSlgO1xuICAgIH0odC50aW1lc3RhbXBWYWx1ZSkgOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHQuc3RyaW5nVmFsdWUgOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8geGUodC5ieXRlc1ZhbHVlKS50b0Jhc2U2NCgpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyAobiA9IHQucmVmZXJlbmNlVmFsdWUsIFxuICAgIGh0LmZyb21OYW1lKG4pLnRvU3RyaW5nKCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IGBnZW8oJHsoZSA9IHQuZ2VvUG9pbnRWYWx1ZSkubGF0aXR1ZGV9LCR7ZS5sb25naXR1ZGV9KWAgOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IFwiW1wiLCBuID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0LnZhbHVlcyB8fCBbXSkgbiA/IG4gPSAhMSA6IGUgKz0gXCIsXCIsIGUgKz0gamUocyk7XG4gICAgICAgIHJldHVybiBlICsgXCJdXCI7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSAoYW5kIHdpbGRseSBpbmFjY3VyYXRlKSBpbi1tZW1vcnkgc2l6ZSBmb3IgdGhlIGZpZWxkXG4gKiB2YWx1ZS5cbiAqXG4gKiBUaGUgbWVtb3J5IHNpemUgdGFrZXMgaW50byBhY2NvdW50IG9ubHkgdGhlIGFjdHVhbCB1c2VyIGRhdGEgYXMgaXQgcmVzaWRlc1xuICogaW4gbWVtb3J5IGFuZCBpZ25vcmVzIG9iamVjdCBvdmVyaGVhZC5cbiAqLyAodC5hcnJheVZhbHVlKSA6IFwibWFwVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdGVyYXRpb24gb3JkZXIgaW4gSmF2YVNjcmlwdCBpcyBub3QgZ3VhcmFudGVlZC4gVG8gZW5zdXJlIHRoYXQgd2UgZ2VuZXJhdGVcbiAgICAgICAgLy8gbWF0Y2hpbmcgY2Fub25pY2FsIElEcyBmb3IgaWRlbnRpY2FsIG1hcHMsIHdlIG5lZWQgdG8gc29ydCB0aGUga2V5cy5cbiAgICAgICAgY29uc3QgZSA9IE9iamVjdC5rZXlzKHQuZmllbGRzIHx8IHt9KS5zb3J0KCk7XG4gICAgICAgIGxldCBuID0gXCJ7XCIsIHMgPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHMgPyBzID0gITEgOiBuICs9IFwiLFwiLCBuICs9IGAke2l9OiR7amUodC5maWVsZHNbaV0pfWA7XG4gICAgICAgIHJldHVybiBuICsgXCJ9XCI7XG4gICAgfSh0Lm1hcFZhbHVlKSA6IE8oKTtcbiAgICB2YXIgZSwgbjtcbn1cblxuZnVuY3Rpb24gemUodCkge1xuICAgIHN3aXRjaCAoTGUodCkpIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDQ7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gODtcblxuICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAvLyBHZW9Qb2ludHMgYXJlIG1hZGUgdXAgb2YgdHdvIGRpc3RpbmN0IG51bWJlcnMgKGxhdGl0dWRlICsgbG9uZ2l0dWRlKVxuICAgICAgICByZXR1cm4gMTY7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICBjb25zdCBlID0ga2UodCk7XG4gICAgICAgIHJldHVybiBlID8gMTYgKyB6ZShlKSA6IDE2O1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvRGF0YV9zdHJ1Y3R1cmVzOlxuICAgICAgICAvLyBcIkphdmFTY3JpcHQncyBTdHJpbmcgdHlwZSBpcyBbLi4uXSBhIHNldCBvZiBlbGVtZW50cyBvZiAxNi1iaXQgdW5zaWduZWRcbiAgICAgICAgLy8gaW50ZWdlciB2YWx1ZXNcIlxuICAgICAgICByZXR1cm4gMiAqIHQuc3RyaW5nVmFsdWUubGVuZ3RoO1xuXG4gICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB4ZSh0LmJ5dGVzVmFsdWUpLmFwcHJveGltYXRlQnl0ZVNpemUoKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnJlZmVyZW5jZVZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKS5yZWR1Y2UoKCh0LCBlKSA9PiB0ICsgemUoZSkpLCAwKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgcmV0dXJuIGdlKHQuZmllbGRzLCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlICs9IHQubGVuZ3RoICsgemUobik7XG4gICAgICAgICAgICB9KSksIGU7XG4gICAgICAgIH0odC5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZGF0YWJhc2UgYW5kIGtleS4gKi9cbmZ1bmN0aW9uIFdlKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZlcmVuY2VWYWx1ZTogYHByb2plY3RzLyR7dC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3QuZGF0YWJhc2V9L2RvY3VtZW50cy8ke2UucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEludGVnZXJWYWx1ZSAuICovIGZ1bmN0aW9uIEhlKHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgRG91YmxlVmFsdWUuICovXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gQXJyYXlWYWx1ZS4gKi9cbmZ1bmN0aW9uIEplKHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiYXJyYXlWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE51bGxWYWx1ZS4gKi8gZnVuY3Rpb24gWWUodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJudWxsVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgTmFOLiAqLyBmdW5jdGlvbiBYZSh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBpc05hTihOdW1iZXIodC5kb3VibGVWYWx1ZSkpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBNYXBWYWx1ZS4gKi8gZnVuY3Rpb24gWmUodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJtYXBWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLiAqLyBmdW5jdGlvbiB0bih0KSB7XG4gICAgaWYgKHQuZ2VvUG9pbnRWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC5nZW9Qb2ludFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQudGltZXN0YW1wVmFsdWUgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQudGltZXN0YW1wVmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC5tYXBWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBnZSh0Lm1hcFZhbHVlLmZpZWxkcywgKCh0LCBuKSA9PiBlLm1hcFZhbHVlLmZpZWxkc1t0XSA9IHRuKG4pKSksIGU7XG4gICAgfVxuICAgIGlmICh0LmFycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgKHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pLmxlbmd0aDsgKytuKSBlLmFycmF5VmFsdWUudmFsdWVzW25dID0gdG4odC5hcnJheVZhbHVlLnZhbHVlc1tuXSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIFZhbHVlIHJlcHJlc2VudHMgdGhlIGNhbm9uaWNhbCB7QGxpbmsgI01BWF9WQUxVRX0gLiAqLyBmdW5jdGlvbiBlbih0KSB7XG4gICAgcmV0dXJuIFwiX19tYXhfX1wiID09PSAoKCh0Lm1hcFZhbHVlIHx8IHt9KS5maWVsZHMgfHwge30pLl9fdHlwZV9fIHx8IHt9KS5zdHJpbmdWYWx1ZTtcbn1cblxuLyoqIFJldHVybnMgdGhlIGxvd2VzdCB2YWx1ZSBmb3IgdGhlIGdpdmVuIHZhbHVlIHR5cGUgKGluY2x1c2l2ZSkuICovIGZ1bmN0aW9uIG5uKHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gQmUgOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGJvb2xlYW5WYWx1ZTogITFcbiAgICB9IDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0IHx8IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgc2Vjb25kczogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcbiAgICAgICAgfVxuICAgIH0gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgc3RyaW5nVmFsdWU6IFwiXCJcbiAgICB9IDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgYnl0ZXNWYWx1ZTogXCJcIlxuICAgIH0gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IFdlKE9lLmVtcHR5KCksIGh0LmVtcHR5KCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IC05MCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICB9XG4gICAgfSA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgfSA6IFwibWFwVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBtYXBWYWx1ZToge31cbiAgICB9IDogTygpO1xufVxuXG4vKiogUmV0dXJucyB0aGUgbGFyZ2VzdCB2YWx1ZSBmb3IgdGhlIGdpdmVuIHZhbHVlIHR5cGUgKGV4Y2x1c2l2ZSkuICovIGZ1bmN0aW9uIHNuKHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBib29sZWFuVmFsdWU6ICExXG4gICAgfSA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgIH0gOiBcImludGVnZXJWYWx1ZVwiIGluIHQgfHwgXCJkb3VibGVWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxuICAgICAgICB9XG4gICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBzdHJpbmdWYWx1ZTogXCJcIlxuICAgIH0gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgYnl0ZXNWYWx1ZTogXCJcIlxuICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gV2UoT2UuZW1wdHkoKSwgaHQuZW1wdHkoKSkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IC05MCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICB9XG4gICAgfSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgfSA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIG1hcFZhbHVlOiB7fVxuICAgIH0gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IEZlIDogTygpO1xufVxuXG5mdW5jdGlvbiBybih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEtlKHQudmFsdWUsIGUudmFsdWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IHQuaW5jbHVzaXZlICYmICFlLmluY2x1c2l2ZSA/IC0xIDogIXQuaW5jbHVzaXZlICYmIGUuaW5jbHVzaXZlID8gMSA6IDA7XG59XG5cbmZ1bmN0aW9uIG9uKHQsIGUpIHtcbiAgICBjb25zdCBuID0gS2UodC52YWx1ZSwgZS52YWx1ZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogdC5pbmNsdXNpdmUgJiYgIWUuaW5jbHVzaXZlID8gMSA6ICF0LmluY2x1c2l2ZSAmJiBlLmluY2x1c2l2ZSA/IC0xIDogMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gT2JqZWN0VmFsdWUgcmVwcmVzZW50cyBhIE1hcFZhbHVlIGluIHRoZSBGaXJlc3RvcmUgUHJvdG8gYW5kIG9mZmVycyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgZmllbGRzICh2aWEgdGhlIE9iamVjdFZhbHVlQnVpbGRlcikuXG4gKi8gY2xhc3MgdW4ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1bih7XG4gICAgICAgICAgICBtYXBWYWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoIG9yIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIHRoZSBwYXRoIHRvIHNlYXJjaFxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBhdCB0aGUgcGF0aCBvciBudWxsIGlmIHRoZSBwYXRoIGlzIG5vdCBzZXQuXG4gICAgICovICAgIGZpZWxkKHQpIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aCAtIDE7ICsrbikgaWYgKGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QuZ2V0KG4pXSwgXG4gICAgICAgICAgICAhWmUoZSkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QubGFzdFNlZ21lbnQoKV0sIGUgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmaWVsZCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHNldC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLmdldEZpZWxkc01hcCh0LnBvcExhc3QoKSlbdC5sYXN0U2VnbWVudCgpXSA9IHRuKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbCh0KSB7XG4gICAgICAgIGxldCBlID0gYXQuZW1wdHlQYXRoKCksIG4gPSB7fSwgcyA9IFtdO1xuICAgICAgICB0LmZvckVhY2goKCh0LCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyh0LCBuLCBzKSwgbiA9IHt9LCBzID0gW10sIGUgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSB0bih0KSA6IHMucHVzaChpLmxhc3RTZWdtZW50KCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoaSwgbiwgcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgbm8gZmllbGQgYXQgdGhlXG4gICAgICogc3BlY2lmaWVkIHBhdGgsIG5vdGhpbmcgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gcmVtb3ZlLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5maWVsZCh0LnBvcExhc3QoKSk7XG4gICAgICAgIFplKGUpICYmIGUubWFwVmFsdWUuZmllbGRzICYmIGRlbGV0ZSBlLm1hcFZhbHVlLmZpZWxkc1t0Lmxhc3RTZWdtZW50KCldO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHFlKHRoaXMudmFsdWUsIHQudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGUubWFwVmFsdWUuZmllbGRzIHx8IChlLm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IGUubWFwVmFsdWUuZmllbGRzW3QuZ2V0KG4pXTtcbiAgICAgICAgICAgIFplKHMpICYmIHMubWFwVmFsdWUuZmllbGRzIHx8IChzID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV0gPSBzKSwgZSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgZ2UoZSwgKChlLCBuKSA9PiB0W2VdID0gbikpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZGVsZXRlIHRbZV07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IHVuKHRuKHRoaXMudmFsdWUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBmaWVsZHMgaW4gYSBNYXBWYWx1ZS5cbiAqLyBmdW5jdGlvbiBjbih0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiBnZSh0LmZpZWxkcywgKCh0LCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgYXQoWyB0IF0pO1xuICAgICAgICBpZiAoWmUobikpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBjbihuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIGUucHVzaChzKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlLnB1c2gocy5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIGUucHVzaChzKTtcbiAgICB9KSksIG5ldyBSZShlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IGluIEZpcmVzdG9yZSB3aXRoIGEga2V5LCB2ZXJzaW9uLCBkYXRhIGFuZCB3aGV0aGVyIGl0XG4gKiBoYXMgbG9jYWwgbXV0YXRpb25zIGFwcGxpZWQgdG8gaXQuXG4gKlxuICogRG9jdW1lbnRzIGNhbiB0cmFuc2l0aW9uIGJldHdlZW4gc3RhdGVzIHZpYSBgY29udmVydFRvRm91bmREb2N1bWVudCgpYCxcbiAqIGBjb252ZXJ0VG9Ob0RvY3VtZW50KClgIGFuZCBgY29udmVydFRvVW5rbm93bkRvY3VtZW50KClgLiBJZiBhIGRvY3VtZW50IGRvZXNcbiAqIG5vdCB0cmFuc2l0aW9uIHRvIG9uZSBvZiB0aGVzZSBzdGF0ZXMgZXZlbiBhZnRlciBhbGwgbXV0YXRpb25zIGhhdmUgYmVlblxuICogYXBwbGllZCwgYGlzVmFsaWREb2N1bWVudCgpYCByZXR1cm5zIGZhbHNlIGFuZCB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIHJlbW92ZWRcbiAqIGZyb20gYWxsIHZpZXdzLlxuICovIGNsYXNzIGFuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSBlLCB0aGlzLnZlcnNpb24gPSBuLCB0aGlzLnJlYWRUaW1lID0gcywgdGhpcy5jcmVhdGVUaW1lID0gaSwgXG4gICAgICAgIHRoaXMuZGF0YSA9IHIsIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCB3aXRoIG5vIGtub3duIHZlcnNpb24gb3IgZGF0YSwgYnV0IHdoaWNoIGNhbiBzZXJ2ZSBhc1xuICAgICAqIGJhc2UgZG9jdW1lbnQgZm9yIG11dGF0aW9ucy5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ludmFsaWREb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odCwgMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHJ0Lm1pbigpLCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gcnQubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIHJ0Lm1pbigpLCB1bi5lbXB0eSgpLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IHdpdGggdGhlIGdpdmVuIGRhdGEgYXQgdGhlXG4gICAgICogZ2l2ZW4gdmVyc2lvbi5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ZvdW5kRG9jdW1lbnQodCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3IGFuKHQsIDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gZSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIHJ0Lm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBuLCBzLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBub3QgZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24uICovICAgIHN0YXRpYyBuZXdOb0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhbih0LCAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIGUsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBydC5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gcnQubWluKCksIHVuLmVtcHR5KCksIDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogd2hvc2UgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBzdGF0aWMgbmV3VW5rbm93bkRvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhbih0LCAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gZSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIHJ0Lm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBydC5taW4oKSwgdW4uZW1wdHkoKSwgMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhbmQgdGhhdCBpdHMgdmVyc2lvblxuICAgICAqIGFuZCBkYXRhIGFyZSBrbm93bi5cbiAgICAgKi8gICAgY29udmVydFRvRm91bmREb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgaXMgc3dpdGNoaW5nIHN0YXRlIGZyb20gYmVpbmcgYW4gaW52YWxpZCBvciBkZWxldGVkXG4gICAgICAgIC8vIGRvY3VtZW50IHRvIGEgdmFsaWQgKEZPVU5EX0RPQ1VNRU5UKSBkb2N1bWVudCwgZWl0aGVyIGR1ZSB0byByZWNlaXZpbmcgYW5cbiAgICAgICAgLy8gdXBkYXRlIGZyb20gV2F0Y2ggb3IgZHVlIHRvIGFwcGx5aW5nIGEgbG9jYWwgc2V0IG11dGF0aW9uIG9uIHRvcFxuICAgICAgICAvLyBvZiBhIGRlbGV0ZWQgZG9jdW1lbnQsIG91ciBiZXN0IGd1ZXNzIGFib3V0IGl0cyBjcmVhdGVUaW1lIHdvdWxkIGJlIHRoZVxuICAgICAgICAvLyB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBkb2N1bWVudCB0cmFuc2l0aW9uZWQgdG8gYSBGT1VORF9ET0NVTUVOVC5cbiAgICAgICAgcmV0dXJuICF0aGlzLmNyZWF0ZVRpbWUuaXNFcXVhbChydC5taW4oKSkgfHwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlICYmIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlIHx8ICh0aGlzLmNyZWF0ZVRpbWUgPSB0KSwgXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBlLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSB1bi5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhdCBhIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogdGhhdCBpdHMgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovICwgXG4gICAgICAgIHRoaXMuZGF0YSA9IHVuLmVtcHR5KCksIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDEgLyogRG9jdW1lbnRTdGF0ZS5IQVNfTE9DQUxfTVVUQVRJT05TICovICwgdGhpcy52ZXJzaW9uID0gcnQubWluKCksIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICBzZXRSZWFkVGltZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRUaW1lID0gdCwgdGhpcztcbiAgICB9XG4gICAgZ2V0IGhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBEb2N1bWVudFN0YXRlLkhBU19MT0NBTF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgfVxuICAgIGlzVmFsaWREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0ZvdW5kRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzTm9Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNVbmtub3duRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgYW4gJiYgdGhpcy5rZXkuaXNFcXVhbCh0LmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwodC52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gdC5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSB0LmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwodC5kYXRhKTtcbiAgICB9XG4gICAgbXV0YWJsZUNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odGhpcy5rZXksIHRoaXMuZG9jdW1lbnRUeXBlLCB0aGlzLnZlcnNpb24sIHRoaXMucmVhZFRpbWUsIHRoaXMuY3JlYXRlVGltZSwgdGhpcy5kYXRhLmNsb25lKCksIHRoaXMuZG9jdW1lbnRTdGF0ZSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYERvY3VtZW50KCR7dGhpcy5rZXl9LCAke3RoaXMudmVyc2lvbn0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhLnZhbHVlKX0sIHtjcmVhdGVUaW1lOiAke3RoaXMuY3JlYXRlVGltZX19KSwge2RvY3VtZW50VHlwZTogJHt0aGlzLmRvY3VtZW50VHlwZX19KSwge2RvY3VtZW50U3RhdGU6ICR7dGhpcy5kb2N1bWVudFN0YXRlfX0pYDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdGhlIHZhbHVlIGZvciBmaWVsZCBgZmllbGRgIGluIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuIFRocm93cyBpZlxuICogdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIGJvdGggZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgYm91bmQgb2YgYSBxdWVyeS5cbiAqXG4gKiBUaGUgYm91bmQgaXMgc3BlY2lmaWVkIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudHMgcmVwcmVzZW50aW5nIGEgcG9zaXRpb24gYW5kXG4gKiB3aGV0aGVyIGl0J3MganVzdCBiZWZvcmUgb3IganVzdCBhZnRlciB0aGUgcG9zaXRpb24gKHJlbGF0aXZlIHRvIHdoYXRldmVyIHRoZVxuICogcXVlcnkgb3JkZXIgaXMpLlxuICpcbiAqIFRoZSBwb3NpdGlvbiByZXByZXNlbnRzIGEgbG9naWNhbCBpbmRleCBwb3NpdGlvbiBmb3IgYSBxdWVyeS4gSXQncyBhIHByZWZpeFxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXG4gKlxuICogQm91bmQgcHJvdmlkZXMgYSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciBhIGRvY3VtZW50IGNvbWVzIGJlZm9yZSBvclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXG4gKiBqdXN0IGFmdGVyIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gKi9cbmNsYXNzIGhuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0LCB0aGlzLmluY2x1c2l2ZSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBsbih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gZVtpXSwgbyA9IHQucG9zaXRpb25baV07XG4gICAgICAgIGlmIChyLmZpZWxkLmlzS2V5RmllbGQoKSkgcyA9IGh0LmNvbXBhcmF0b3IoaHQuZnJvbU5hbWUoby5yZWZlcmVuY2VWYWx1ZSksIG4ua2V5KTsgZWxzZSB7XG4gICAgICAgICAgICBzID0gS2Uobywgbi5kYXRhLmZpZWxkKHIuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IHIuZGlyICYmIChzICo9IC0xKSwgMCAhPT0gcykgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGFmdGVyIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIGZuKHQsIGUpIHtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIG51bGwgPT09IGU7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiAhMTtcbiAgICBpZiAodC5pbmNsdXNpdmUgIT09IGUuaW5jbHVzaXZlIHx8IHQucG9zaXRpb24ubGVuZ3RoICE9PSBlLnBvc2l0aW9uLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5wb3NpdGlvbi5sZW5ndGg7IG4rKykge1xuICAgICAgICBpZiAoIXFlKHQucG9zaXRpb25bbl0sIGUucG9zaXRpb25bbl0pKSByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXG4gKi8gY2xhc3MgZG4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8pIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHQsIHRoaXMuZGlyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHduKHQsIGUpIHtcbiAgICByZXR1cm4gdC5kaXIgPT09IGUuZGlyICYmIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX24ge31cblxuY2xhc3MgbW4gZXh0ZW5kcyBfbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpZWxkID0gdCwgdGhpcy5vcCA9IGUsIHRoaXMudmFsdWUgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdC5pc0tleUZpZWxkKCkgPyBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IGUgPyB0aGlzLmNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIodCwgZSwgbikgOiBuZXcgUG4odCwgZSwgbikgOiBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IGUgPyBuZXcgRG4odCwgbikgOiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUgPyBuZXcgQ24odCwgbikgOiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gZSA/IG5ldyB4bih0LCBuKSA6IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlID8gbmV3IE5uKHQsIG4pIDogbmV3IG1uKHQsIGUsIG4pO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlS2V5RmllbGRJbkZpbHRlcih0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUgPyBuZXcgYm4odCwgbikgOiBuZXcgVm4odCwgbik7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICAvLyBUeXBlcyBkbyBub3QgaGF2ZSB0byBtYXRjaCBpbiBOT1RfRVFVQUwgZmlsdGVycy5cbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA9PT0gdGhpcy5vcCA/IG51bGwgIT09IGUgJiYgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihLZShlLCB0aGlzLnZhbHVlKSkgOiBudWxsICE9PSBlICYmIExlKHRoaXMudmFsdWUpID09PSBMZShlKSAmJiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKEtlKGUsIHRoaXMudmFsdWUpKTtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXG4gICAgICAgIH1cbiAgICBtYXRjaGVzQ29tcGFyaXNvbih0KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiB0IDwgMDtcblxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8PSAwO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQ7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgIT09IHQ7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA+IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPj0gMDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzSW5lcXVhbGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIFsgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovICwgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyAsIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyAsIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXS5pbmRleE9mKHRoaXMub3ApID49IDA7XG4gICAgfVxuICAgIGdldEZsYXR0ZW5lZEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBbIHRoaXMgXTtcbiAgICB9XG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFsgdGhpcyBdO1xuICAgIH1cbiAgICBnZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJbmVxdWFsaXR5KCkgPyB0aGlzLmZpZWxkIDogbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIGduIGV4dGVuZHMgX24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWx0ZXJzID0gdCwgdGhpcy5vcCA9IGUsIHRoaXMubHQgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGduKHQsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIHluKHRoaXMpID8gdm9pZCAwID09PSB0aGlzLmZpbHRlcnMuZmluZCgoZSA9PiAhZS5tYXRjaGVzKHQpKSkgOiB2b2lkIDAgIT09IHRoaXMuZmlsdGVycy5maW5kKChlID0+IGUubWF0Y2hlcyh0KSkpO1xuICAgIH1cbiAgICBnZXRGbGF0dGVuZWRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5sdCB8fCAodGhpcy5sdCA9IHRoaXMuZmlsdGVycy5yZWR1Y2UoKCh0LCBlKSA9PiB0LmNvbmNhdChlLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkpLCBbXSkpLCBcbiAgICAgICAgdGhpcy5sdDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIG11dGFibGUgY29weSBvZiBgdGhpcy5maWx0ZXJzYFxuICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFtdLCB0aGlzLmZpbHRlcnMpO1xuICAgIH1cbiAgICBnZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZnQoKHQgPT4gdC5pc0luZXF1YWxpdHkoKSkpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCA/IHQuZmllbGQgOiBudWxsO1xuICAgIH1cbiAgICAvLyBQZXJmb3JtcyBhIGRlcHRoLWZpcnN0IHNlYXJjaCB0byBmaW5kIGFuZCByZXR1cm4gdGhlIGZpcnN0IEZpZWxkRmlsdGVyIGluIHRoZSBjb21wb3NpdGUgZmlsdGVyXG4gICAgLy8gdGhhdCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZS4gUmV0dXJucyBgbnVsbGAgaWYgbm9uZSBvZiB0aGUgRmllbGRGaWx0ZXJzIHNhdGlzZnkgdGhlXG4gICAgLy8gcHJlZGljYXRlLlxuICAgIGZ0KHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBpZiAodChlKSkgcmV0dXJuIGU7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geW4odCkge1xuICAgIHJldHVybiBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyA9PT0gdC5vcDtcbn1cblxuZnVuY3Rpb24gcG4odCkge1xuICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8gPT09IHQub3A7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmlsdGVyIGlzIGEgY29uanVuY3Rpb24gb2YgZmllbGQgZmlsdGVycyBvbmx5LiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBJbih0KSB7XG4gICAgcmV0dXJuIFRuKHQpICYmIHluKHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpbHRlciBkb2VzIG5vdCBjb250YWluIGFueSBjb21wb3NpdGUgZmlsdGVycy4gUmV0dXJucyBmYWxzZSBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gVG4odCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIGlmIChlIGluc3RhbmNlb2YgZ24pIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbmZ1bmN0aW9uIEVuKHQpIHtcbiAgICBpZiAodCBpbnN0YW5jZW9mIG1uKSBcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXG4gICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcbiAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxuICAgIHJldHVybiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdC5vcC50b1N0cmluZygpICsgUWUodC52YWx1ZSk7XG4gICAgaWYgKEluKHQpKSBcbiAgICAvLyBPbGRlciBTREsgdmVyc2lvbnMgdXNlIGFuIGltcGxpY2l0IEFORCBvcGVyYXRpb24gYmV0d2VlbiB0aGVpciBmaWx0ZXJzLlxuICAgIC8vIEluIHRoZSBuZXcgU0RLIHZlcnNpb25zLCB0aGUgZGV2ZWxvcGVyIG1heSB1c2UgYW4gZXhwbGljaXQgQU5EIGZpbHRlci5cbiAgICAvLyBUbyBzdGF5IGNvbnNpc3RlbnQgd2l0aCB0aGUgb2xkIHVzYWdlcywgd2UgYWRkIGEgc3BlY2lhbCBjYXNlIHRvIGVuc3VyZVxuICAgIC8vIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZXNlIHR3byBhcmUgdGhlIHNhbWUuIEZvciBleGFtcGxlOlxuICAgIC8vIGBjb2wud2hlcmVFcXVhbHMoXCJhXCIsIDEpLndoZXJlRXF1YWxzKFwiYlwiLCAyKWAgc2hvdWxkIGhhdmUgdGhlIHNhbWVcbiAgICAvLyBjYW5vbmljYWwgSUQgYXMgYGNvbC53aGVyZShhbmQoZXF1YWxzKFwiYVwiLDEpLCBlcXVhbHMoXCJiXCIsMikpKWAuXG4gICAgcmV0dXJuIHQuZmlsdGVycy5tYXAoKHQgPT4gRW4odCkpKS5qb2luKFwiLFwiKTtcbiAgICB7XG4gICAgICAgIC8vIGZpbHRlciBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlclxuICAgICAgICBjb25zdCBlID0gdC5maWx0ZXJzLm1hcCgodCA9PiBFbih0KSkpLmpvaW4oXCIsXCIpO1xuICAgICAgICByZXR1cm4gYCR7dC5vcH0oJHtlfSlgO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQW4odCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgbW4gPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgbW4gJiYgdC5vcCA9PT0gZS5vcCAmJiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCkgJiYgcWUodC52YWx1ZSwgZS52YWx1ZSk7XG4gICAgfSh0LCBlKSA6IHQgaW5zdGFuY2VvZiBnbiA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBnbiAmJiB0Lm9wID09PSBlLm9wICYmIHQuZmlsdGVycy5sZW5ndGggPT09IGUuZmlsdGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0LmZpbHRlcnMucmVkdWNlKCgodCwgbiwgcykgPT4gdCAmJiBBbihuLCBlLmZpbHRlcnNbc10pKSwgITApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdCBjb250YWlucyBhbGwgZmlsdGVyIGZyb21cbiAqIGBjb21wb3NpdGVGaWx0ZXJgIHBsdXMgYWxsIHRoZSBnaXZlbiBmaWx0ZXJzIGluIGBvdGhlckZpbHRlcnNgLlxuICovICh0LCBlKSA6IHZvaWQgTygpO1xufVxuXG5mdW5jdGlvbiB2bih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHQuZmlsdGVycy5jb25jYXQoZSk7XG4gICAgcmV0dXJuIGduLmNyZWF0ZShuLCB0Lm9wKTtcbn1cblxuLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovIGZ1bmN0aW9uIFJuKHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG1uID8gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gYCR7dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHt0Lm9wfSAke1FlKHQudmFsdWUpfWA7XG4gICAgfVxuICAgIC8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgKGkuZS4gJ19fbmFtZV9fJykuICovICh0KSA6IHQgaW5zdGFuY2VvZiBnbiA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHQub3AudG9TdHJpbmcoKSArIFwiIHtcIiArIHQuZ2V0RmlsdGVycygpLm1hcChSbikuam9pbihcIiAsXCIpICsgXCJ9XCI7XG4gICAgfSh0KSA6IFwiRmlsdGVyXCI7XG59XG5cbmNsYXNzIFBuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiksIHRoaXMua2V5ID0gaHQuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gaHQuY29tcGFyYXRvcih0LmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihlKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBibiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBTbihcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIG5vdCBwcmVzZW50IHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3MgVm4gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBTbihcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBTbih0LCBlKSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuICgobnVsbCA9PT0gKG4gPSBlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmFsdWVzKSB8fCBbXSkubWFwKCh0ID0+IGh0LmZyb21OYW1lKHQucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyBEbiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIEplKGUpICYmIFVlKGUuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3MgQ24gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIFVlKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIHhuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGlmIChVZSh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgIVVlKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovIGNsYXNzIE5uIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiAhKCFKZShlKSB8fCAhZS5hcnJheVZhbHVlLnZhbHVlcykgJiYgZS5hcnJheVZhbHVlLnZhbHVlcy5zb21lKCh0ID0+IFVlKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBrbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSByLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5kdCA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIE1uKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgIHJldHVybiBuZXcga24odCwgZSwgbiwgcywgaSwgciwgbyk7XG59XG5cbmZ1bmN0aW9uICRuKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5kdCkge1xuICAgICAgICBsZXQgdCA9IGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKHQgKz0gXCJ8Y2c6XCIgKyBlLmNvbGxlY3Rpb25Hcm91cCksIHQgKz0gXCJ8ZjpcIiwgdCArPSBlLmZpbHRlcnMubWFwKCh0ID0+IEVuKHQpKSkuam9pbihcIixcIiksIFxuICAgICAgICB0ICs9IFwifG9iOlwiLCB0ICs9IGUub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQuZGlyO1xuICAgICAgICB9KHQpKSkuam9pbihcIixcIiksIEZ0KGUubGltaXQpIHx8ICh0ICs9IFwifGw6XCIsIHQgKz0gZS5saW1pdCksIGUuc3RhcnRBdCAmJiAodCArPSBcInxsYjpcIiwgXG4gICAgICAgIHQgKz0gZS5zdGFydEF0LmluY2x1c2l2ZSA/IFwiYjpcIiA6IFwiYTpcIiwgdCArPSBlLnN0YXJ0QXQucG9zaXRpb24ubWFwKCh0ID0+IFFlKHQpKSkuam9pbihcIixcIikpLCBcbiAgICAgICAgZS5lbmRBdCAmJiAodCArPSBcInx1YjpcIiwgdCArPSBlLmVuZEF0LmluY2x1c2l2ZSA/IFwiYTpcIiA6IFwiYjpcIiwgdCArPSBlLmVuZEF0LnBvc2l0aW9uLm1hcCgodCA9PiBRZSh0KSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGUuZHQgPSB0O1xuICAgIH1cbiAgICByZXR1cm4gZS5kdDtcbn1cblxuZnVuY3Rpb24gT24odCwgZSkge1xuICAgIGlmICh0LmxpbWl0ICE9PSBlLmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKHQub3JkZXJCeS5sZW5ndGggIT09IGUub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCF3bih0Lm9yZGVyQnlbbl0sIGUub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAodC5maWx0ZXJzLmxlbmd0aCAhPT0gZS5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5maWx0ZXJzLmxlbmd0aDsgbisrKSBpZiAoIUFuKHQuZmlsdGVyc1tuXSwgZS5maWx0ZXJzW25dKSkgcmV0dXJuICExO1xuICAgIHJldHVybiB0LmNvbGxlY3Rpb25Hcm91cCA9PT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKCEhdC5wYXRoLmlzRXF1YWwoZS5wYXRoKSAmJiAoISFmbih0LnN0YXJ0QXQsIGUuc3RhcnRBdCkgJiYgZm4odC5lbmRBdCwgZS5lbmRBdCkpKTtcbn1cblxuZnVuY3Rpb24gRm4odCkge1xuICAgIHJldHVybiBodC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbn1cblxuLyoqIFJldHVybnMgdGhlIGZpZWxkIGZpbHRlcnMgdGhhdCB0YXJnZXQgdGhlIGdpdmVuIGZpZWxkIHBhdGguICovIGZ1bmN0aW9uIEJuKHQsIGUpIHtcbiAgICByZXR1cm4gdC5maWx0ZXJzLmZpbHRlcigodCA9PiB0IGluc3RhbmNlb2YgbW4gJiYgdC5maWVsZC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWVzIHRoYXQgYXJlIHVzZWQgaW4gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZXG4gKiBmaWx0ZXJzLiBSZXR1cm5zIGBudWxsYCBpZiB0aGVyZSBhcmUgbm8gc3VjaCBmaWx0ZXJzLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIHRvIHVzZSBhcyB0aGUgbG93ZXIgYm91bmQgZm9yIGFzY2VuZGluZyBpbmRleCBzZWdtZW50IGF0XG4gKiB0aGUgcHJvdmlkZWQgYGZpZWxkUGF0aGAgKG9yIHRoZSB1cHBlciBib3VuZCBmb3IgYW4gZGVzY2VuZGluZyBzZWdtZW50KS5cbiAqL1xuZnVuY3Rpb24gTG4odCwgZSwgbikge1xuICAgIGxldCBzID0gQmUsIGkgPSAhMDtcbiAgICAvLyBQcm9jZXNzIGFsbCBmaWx0ZXJzIHRvIGZpbmQgYSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgZmllbGQgc2VnbWVudFxuICAgIGZvciAoY29uc3QgbiBvZiBCbih0LCBlKSkge1xuICAgICAgICBsZXQgdCA9IEJlLCBlID0gITA7XG4gICAgICAgIHN3aXRjaCAobi5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgdCA9IG5uKG4udmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICB0ID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgdCA9IG4udmFsdWUsIGUgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIHQgPSBCZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBsb3dlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBybih7XG4gICAgICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB2YWx1ZTogdCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZVxuICAgICAgICB9KSA8IDAgJiYgKHMgPSB0LCBpID0gZSk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGFkZGl0aW9uYWwgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgIC8vIHJhbmdlIHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgaWYgKG51bGwgIT09IG4pIGZvciAobGV0IHIgPSAwOyByIDwgdC5vcmRlckJ5Lmxlbmd0aDsgKytyKSB7XG4gICAgICAgIGlmICh0Lm9yZGVyQnlbcl0uZmllbGQuaXNFcXVhbChlKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4ucG9zaXRpb25bcl07XG4gICAgICAgICAgICBybih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHMsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBuLmluY2x1c2l2ZVxuICAgICAgICAgICAgfSkgPCAwICYmIChzID0gdCwgaSA9IG4uaW5jbHVzaXZlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBzLFxuICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIHRvIHVzZSBhcyB0aGUgdXBwZXIgYm91bmQgZm9yIGFzY2VuZGluZyBpbmRleCBzZWdtZW50IGF0XG4gKiB0aGUgcHJvdmlkZWQgYGZpZWxkUGF0aGAgKG9yIHRoZSBsb3dlciBib3VuZCBmb3IgYSBkZXNjZW5kaW5nIHNlZ21lbnQpLlxuICovIGZ1bmN0aW9uIHFuKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IEZlLCBpID0gITA7XG4gICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICBmb3IgKGNvbnN0IG4gb2YgQm4odCwgZSkpIHtcbiAgICAgICAgbGV0IHQgPSBGZSwgZSA9ICEwO1xuICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHQgPSBzbihuLnZhbHVlKSwgZSA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICB0ID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgdCA9IG4udmFsdWUsIGUgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIHQgPSBGZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyB1cHBlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBvbih7XG4gICAgICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB2YWx1ZTogdCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZVxuICAgICAgICB9KSA+IDAgJiYgKHMgPSB0LCBpID0gZSk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGFkZGl0aW9uYWwgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgIC8vIHJhbmdlIHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgaWYgKG51bGwgIT09IG4pIGZvciAobGV0IHIgPSAwOyByIDwgdC5vcmRlckJ5Lmxlbmd0aDsgKytyKSB7XG4gICAgICAgIGlmICh0Lm9yZGVyQnlbcl0uZmllbGQuaXNFcXVhbChlKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4ucG9zaXRpb25bcl07XG4gICAgICAgICAgICBvbih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHMsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBuLmluY2x1c2l2ZVxuICAgICAgICAgICAgfSkgPiAwICYmIChzID0gdCwgaSA9IG4uaW5jbHVzaXZlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBzLFxuICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHNlZ21lbnRzIG9mIGEgcGVyZmVjdCBpbmRleCBmb3IgdGhpcyB0YXJnZXQuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuY2xhc3MgVW4ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUXVlcnkgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgbyA9IG51bGwsIHUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5leHBsaWNpdE9yZGVyQnkgPSBuLCB0aGlzLmZpbHRlcnMgPSBzLCBcbiAgICAgICAgdGhpcy5saW1pdCA9IGksIHRoaXMubGltaXRUeXBlID0gciwgdGhpcy5zdGFydEF0ID0gbywgdGhpcy5lbmRBdCA9IHUsIHRoaXMud3QgPSBudWxsLCBcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLlxuICAgICAgICB0aGlzLl90ID0gbnVsbCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0O1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgaW5zdGFuY2Ugd2l0aCB0aGUgb3B0aW9ucyBwcm92aWRlZC4gKi8gZnVuY3Rpb24gS24odCwgZSwgbiwgcywgaSwgciwgbywgdSkge1xuICAgIHJldHVybiBuZXcgVW4odCwgZSwgbiwgcywgaSwgciwgbywgdSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIGF0IGBwYXRoYCAqLyBmdW5jdGlvbiBHbih0KSB7XG4gICAgcmV0dXJuIG5ldyBVbih0KTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxuICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcbiAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXG4gKiBwYXRocy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBxdWVyeSBkb2VzIG5vdCBzcGVjaWZ5IGFueSBxdWVyeSBjb25zdHJhaW50cyB0aGF0XG4gKiBjb3VsZCByZW1vdmUgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gUW4odCkge1xuICAgIHJldHVybiAwID09PSB0LmZpbHRlcnMubGVuZ3RoICYmIG51bGwgPT09IHQubGltaXQgJiYgbnVsbCA9PSB0LnN0YXJ0QXQgJiYgbnVsbCA9PSB0LmVuZEF0ICYmICgwID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggfHwgMSA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoICYmIHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkLmlzS2V5RmllbGQoKSk7XG59XG5cbmZ1bmN0aW9uIGpuKHQpIHtcbiAgICByZXR1cm4gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gem4odCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHQpIHJldHVybiB0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHNcbiAqIHdpdGhpbiB0aGUgcHJvdmlkZWQgY29sbGVjdGlvbiBncm91cC5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBjb2xsZWN0aW9uIGdyb3VwIHJhdGhlciB0aGFuIGEgc3BlY2lmaWNcbiAqIGNvbGxlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIFduKHQpIHtcbiAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1wbGljaXQgb3JkZXIgYnkgY29uc3RyYWludCB0aGF0IGlzIHVzZWQgdG8gZXhlY3V0ZSB0aGUgUXVlcnksXG4gKiB3aGljaCBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yZGVyIGJ5IGNvbnN0cmFpbnRzIHRoZSB1c2VyIHByb3ZpZGVkIChlLmcuXG4gKiB0aGUgU0RLIGFuZCBiYWNrZW5kIGFsd2F5cyBvcmRlcnMgYnkgYF9fbmFtZV9fYCkuXG4gKi8gZnVuY3Rpb24gSG4odCkge1xuICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgIGlmIChudWxsID09PSBlLnd0KSB7XG4gICAgICAgIGUud3QgPSBbXTtcbiAgICAgICAgY29uc3QgdCA9IHpuKGUpLCBuID0gam4oZSk7XG4gICAgICAgIGlmIChudWxsICE9PSB0ICYmIG51bGwgPT09IG4pIFxuICAgICAgICAvLyBJbiBvcmRlciB0byBpbXBsaWNpdGx5IGFkZCBrZXkgb3JkZXJpbmcsIHdlIG11c3QgYWxzbyBhZGQgdGhlXG4gICAgICAgIC8vIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkIGZvciBpdCB0byBiZSBhIHZhbGlkIHF1ZXJ5LlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIGRlZmF1bHQgaW5lcXVhbGl0eSBmaWVsZCBhbmQga2V5IG9yZGVyaW5nIGlzIGFzY2VuZGluZy5cbiAgICAgICAgdC5pc0tleUZpZWxkKCkgfHwgZS53dC5wdXNoKG5ldyBkbih0KSksIGUud3QucHVzaChuZXcgZG4oYXQua2V5RmllbGQoKSwgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovKSk7IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmV4cGxpY2l0T3JkZXJCeSkgZS53dC5wdXNoKG4pLCBuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiAodCA9ICEwKTtcbiAgICAgICAgICAgIGlmICghdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQga2V5IG9yZGVyaW5nIGFsd2F5cyBtYXRjaGVzIHRoZSBsYXN0XG4gICAgICAgICAgICAgICAgLy8gZXhwbGljaXQgb3JkZXIgYnlcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IGUuZXhwbGljaXRPcmRlckJ5W2UuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLztcbiAgICAgICAgICAgICAgICBlLnd0LnB1c2gobmV3IGRuKGF0LmtleUZpZWxkKCksIHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZS53dDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXQncyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIEpuKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICBpZiAoIWUuX3QpIGlmIChcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IGUubGltaXRUeXBlKSBlLl90ID0gTW4oZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgSG4oZSksIGUuZmlsdGVycywgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KTsgZWxzZSB7XG4gICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgSG4oZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gbi5kaXIgPyBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gOiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIHQucHVzaChuZXcgZG4obi5maWVsZCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gc3dhcCB0aGUgY3Vyc29ycyB0byBtYXRjaCB0aGUgbm93LWZsaXBwZWQgcXVlcnkgb3JkZXJpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUuZW5kQXQgPyBuZXcgaG4oZS5lbmRBdC5wb3NpdGlvbiwgZS5lbmRBdC5pbmNsdXNpdmUpIDogbnVsbCwgcyA9IGUuc3RhcnRBdCA/IG5ldyBobihlLnN0YXJ0QXQucG9zaXRpb24sIGUuc3RhcnRBdC5pbmNsdXNpdmUpIDogbnVsbDtcbiAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cbiAgICAgICAgZS5fdCA9IE1uKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIHQsIGUuZmlsdGVycywgZS5saW1pdCwgbiwgcyk7XG4gICAgfVxuICAgIHJldHVybiBlLl90O1xufVxuXG5mdW5jdGlvbiBZbih0LCBlKSB7XG4gICAgZS5nZXRGaXJzdEluZXF1YWxpdHlGaWVsZCgpLCB6bih0KTtcbiAgICBjb25zdCBuID0gdC5maWx0ZXJzLmNvbmNhdChbIGUgXSk7XG4gICAgcmV0dXJuIG5ldyBVbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gWG4odCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgVW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIGUsIG4sIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIFpuKHQsIGUpIHtcbiAgICByZXR1cm4gT24oSm4odCksIEpuKGUpKSAmJiB0LmxpbWl0VHlwZSA9PT0gZS5saW1pdFR5cGU7XG59XG5cbi8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXG4vLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXG4vLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxuZnVuY3Rpb24gdHModCkge1xuICAgIHJldHVybiBgJHskbihKbih0KSl9fGx0OiR7dC5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gZXModCkge1xuICAgIHJldHVybiBgUXVlcnkodGFyZ2V0PSR7ZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwICYmIChlICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIHQuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgICAgIHQuZmlsdGVycy5sZW5ndGggPiAwICYmIChlICs9IGAsIGZpbHRlcnM6IFske3QuZmlsdGVycy5tYXAoKHQgPT4gUm4odCkpKS5qb2luKFwiLCBcIil9XWApLCBcbiAgICAgICAgRnQodC5saW1pdCkgfHwgKGUgKz0gXCIsIGxpbWl0OiBcIiArIHQubGltaXQpLCB0Lm9yZGVyQnkubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBvcmRlckJ5OiBbJHt0Lm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHt0LmRpcn0pYDtcbiAgICAgICAgfSh0KSkpLmpvaW4oXCIsIFwiKX1dYCksIHQuc3RhcnRBdCAmJiAoZSArPSBcIiwgc3RhcnRBdDogXCIsIGUgKz0gdC5zdGFydEF0LmluY2x1c2l2ZSA/IFwiYjpcIiA6IFwiYTpcIiwgXG4gICAgICAgIGUgKz0gdC5zdGFydEF0LnBvc2l0aW9uLm1hcCgodCA9PiBRZSh0KSkpLmpvaW4oXCIsXCIpKSwgdC5lbmRBdCAmJiAoZSArPSBcIiwgZW5kQXQ6IFwiLCBcbiAgICAgICAgZSArPSB0LmVuZEF0LmluY2x1c2l2ZSA/IFwiYTpcIiA6IFwiYjpcIiwgZSArPSB0LmVuZEF0LnBvc2l0aW9uLm1hcCgodCA9PiBRZSh0KSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGBUYXJnZXQoJHtlfSlgO1xuICAgIH0oSm4odCkpfTsgbGltaXRUeXBlPSR7dC5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gbnModCwgZSkge1xuICAgIHJldHVybiBlLmlzRm91bmREb2N1bWVudCgpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUua2V5LnBhdGg7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IGUua2V5Lmhhc0NvbGxlY3Rpb25JZCh0LmNvbGxlY3Rpb25Hcm91cCkgJiYgdC5wYXRoLmlzUHJlZml4T2YobikgOiBodC5pc0RvY3VtZW50S2V5KHQucGF0aCkgPyB0LnBhdGguaXNFcXVhbChuKSA6IHQucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXG4gKiBpbiB0aGUgcmVzdWx0cy5cbiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBXZSBtdXN0IHVzZSBgcXVlcnlPcmRlckJ5KClgIHRvIGdldCB0aGUgbGlzdCBvZiBhbGwgb3JkZXJCeXMgKGJvdGggaW1wbGljaXQgYW5kIGV4cGxpY2l0KS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGZvciBPUiBxdWVyaWVzLCBvcmRlckJ5IGFwcGxpZXMgdG8gYWxsIGRpc2p1bmN0aW9uIHRlcm1zIGFuZCBpbXBsaWNpdCBvcmRlckJ5cyBtdXN0XG4gICAgICAgIC8vIGJlIHRha2VuIGludG8gYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBxdWVyeSBcImEgPiAxIHx8IGI9PTFcIiBoYXMgYW4gaW1wbGljaXQgXCJvcmRlckJ5IGFcIiBkdWVcbiAgICAgICAgLy8gdG8gdGhlIGluZXF1YWxpdHksIGFuZCBpcyBldmFsdWF0ZWQgYXMgXCJhID4gMSBvcmRlckJ5IGEgfHwgYj09MSBvcmRlckJ5IGFcIi5cbiAgICAgICAgLy8gQSBkb2N1bWVudCB3aXRoIGNvbnRlbnQgb2Yge2I6MX0gbWF0Y2hlcyB0aGUgZmlsdGVycywgYnV0IGRvZXMgbm90IG1hdGNoIHRoZSBvcmRlckJ5IGJlY2F1c2VcbiAgICAgICAgLy8gaXQncyBtaXNzaW5nIHRoZSBmaWVsZCAnYScuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBIbih0KSkgXG4gICAgICAgIC8vIG9yZGVyIGJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IGUuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfSh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmICh0LnN0YXJ0QXQgJiYgIVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbG4odCwgZSwgbik7XG4gICAgICAgICAgICByZXR1cm4gdC5pbmNsdXNpdmUgPyBzIDw9IDAgOiBzIDwgMDtcbiAgICAgICAgfSh0LnN0YXJ0QXQsIEhuKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodC5lbmRBdCAmJiAhZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IGxuKHQsIGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIHQuaW5jbHVzaXZlID8gcyA+PSAwIDogcyA+IDA7XG4gICAgICAgIH0odC5lbmRBdCwgSG4odCksIGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIGdyb3VwIHRoYXQgdGhpcyBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIFdlYiBTREsgdG8gZmFjaWxpdGF0ZSBtdWx0aS10YWJcbiAqIHN5bmNocm9uaXphdGlvbiBmb3IgcXVlcnkgcmVzdWx0cy5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIHNzKHQpIHtcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgfHwgKHQucGF0aC5sZW5ndGggJSAyID09IDEgPyB0LnBhdGgubGFzdFNlZ21lbnQoKSA6IHQucGF0aC5nZXQodC5wYXRoLmxlbmd0aCAtIDIpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gZnVuY3Rpb24gaXModCkge1xuICAgIHJldHVybiAoZSwgbikgPT4ge1xuICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgSG4odCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBycyhpLCBlLCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIHMgPSBzIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHJzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5maWVsZC5pc0tleUZpZWxkKCkgPyBodC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQodCksIGkgPSBuLmRhdGEuZmllbGQodCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBzICYmIG51bGwgIT09IGkgPyBLZShzLCBpKSA6IE8oKTtcbiAgICB9KHQuZmllbGQsIGUsIG4pO1xuICAgIHN3aXRjaCAodC5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIHM7XG5cbiAgICAgIGNhc2UgXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gLTEgKiBzO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTygpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtYXAgaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIG9iamVjdHMgYXMga2V5cy4gT2JqZWN0cyBtdXN0IGhhdmUgYW5cbiAqIGFzc29jaWF0ZWQgZXF1YWxzIGZ1bmN0aW9uIGFuZCBtdXN0IGJlIGltbXV0YWJsZS4gRW50cmllcyBpbiB0aGUgbWFwIGFyZVxuICogc3RvcmVkIHRvZ2V0aGVyIHdpdGggdGhlIGtleSBiZWluZyBwcm9kdWNlZCBmcm9tIHRoZSBtYXBLZXlGbi4gVGhpcyBtYXBcbiAqIGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBjb2xsaXNpb25zIG9mIGtleXMuXG4gKi8gY2xhc3Mgb3Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tYXBLZXlGbiA9IHQsIHRoaXMuZXF1YWxzRm4gPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbm5lciBtYXAgZm9yIGEga2V5L3ZhbHVlIHBhaXIuIER1ZSB0byB0aGUgcG9zc2liaWxpdHkgb2YgY29sbGlzaW9ucyB3ZVxuICAgICAgICAgKiBrZWVwIGEgbGlzdCBvZiBlbnRyaWVzIHRoYXQgd2UgZG8gYSBsaW5lYXIgc2VhcmNoIHRocm91Z2ggdG8gZmluZCBhbiBhY3R1YWxcbiAgICAgICAgICogbWF0Y2guIE5vdGUgdGhhdCBjb2xsaXNpb25zIHNob3VsZCBiZSByYXJlLCBzbyB3ZSBzdGlsbCBleHBlY3QgbmVhclxuICAgICAgICAgKiBjb25zdGFudCB0aW1lIGxvb2t1cHMgaW4gcHJhY3RpY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlubmVyID0ge30sIFxuICAgICAgICAvKiogVGhlIG51bWJlciBvZiBlbnRyaWVzIHN0b3JlZCBpbiB0aGUgbWFwICovXG4gICAgICAgIHRoaXMuaW5uZXJTaXplID0gMDtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKGUsIHQpKSByZXR1cm4gcztcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQodCk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKHQpLCBzID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgcmV0dXJuIHRoaXMuaW5uZXJbbl0gPSBbIFsgdCwgZSBdIF0sIHZvaWQgdGhpcy5pbm5lclNpemUrKztcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihzW25dWzBdLCB0KSkgXG4gICAgICAgIC8vIFRoaXMgaXMgdXBkYXRpbmcgYW4gZXhpc3RpbmcgZW50cnkgYW5kIGRvZXMgbm90IGluY3JlYXNlIGBpbm5lclNpemVgLlxuICAgICAgICByZXR1cm4gdm9pZCAoc1tuXSA9IFsgdCwgZSBdKTtcbiAgICAgICAgcy5wdXNoKFsgdCwgZSBdKSwgdGhpcy5pbm5lclNpemUrKztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bc11bMF0sIHQpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lcltlXSA6IG4uc3BsaWNlKHMsIDEpLCBcbiAgICAgICAgdGhpcy5pbm5lclNpemUtLSwgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGdlKHRoaXMuaW5uZXIsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgc10gb2YgbikgdChlLCBzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4geWUodGhpcy5pbm5lcik7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyU2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHVzID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBjcygpIHtcbiAgICByZXR1cm4gdXM7XG59XG5cbmNvbnN0IGFzID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBocyguLi50KSB7XG4gICAgbGV0IGUgPSBhcztcbiAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUuaW5zZXJ0KG4ua2V5LCBuKTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gbHModCkge1xuICAgIGxldCBlID0gYXM7XG4gICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIG4pID0+IGUgPSBlLmluc2VydCh0LCBuLm92ZXJsYXllZERvY3VtZW50KSkpLCBlO1xufVxuXG5mdW5jdGlvbiBmcygpIHtcbiAgICByZXR1cm4gd3MoKTtcbn1cblxuZnVuY3Rpb24gZHMoKSB7XG4gICAgcmV0dXJuIHdzKCk7XG59XG5cbmZ1bmN0aW9uIHdzKCkge1xuICAgIHJldHVybiBuZXcgb3MoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbn1cblxuY29uc3QgX3MgPSBuZXcgcGUoaHQuY29tcGFyYXRvcik7XG5cbmNvbnN0IG1zID0gbmV3IEVlKGh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBncyguLi50KSB7XG4gICAgbGV0IGUgPSBtcztcbiAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUuYWRkKG4pO1xuICAgIHJldHVybiBlO1xufVxuXG5jb25zdCB5cyA9IG5ldyBFZShldCk7XG5cbmZ1bmN0aW9uIHBzKCkge1xuICAgIHJldHVybiB5cztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhbiBEb3VibGVWYWx1ZSBmb3IgYHZhbHVlYCB0aGF0IGlzIGVuY29kZWQgYmFzZWQgdGhlIHNlcmlhbGl6ZXInc1xuICogYHVzZVByb3RvM0pzb25gIHNldHRpbmcuXG4gKi8gZnVuY3Rpb24gSXModCwgZSkge1xuICAgIGlmICh0LnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgaWYgKGlzTmFOKGUpKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiTmFOXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IDEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSA9PT0gLTEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiLUluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG91YmxlVmFsdWU6IEJ0KGUpID8gXCItMFwiIDogZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBJbnRlZ2VyVmFsdWUgZm9yIGB2YWx1ZWAuXG4gKi8gZnVuY3Rpb24gVHModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogXCJcIiArIHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIEludGVnZXJWYWx1ZSBpZiBpdCBjYW4gc2FmZWx5IHJlcHJlc2VudCB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgYSBEb3VibGVWYWx1ZSBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBFcyh0LCBlKSB7XG4gICAgcmV0dXJuIEx0KGUpID8gVHMoZSkgOiBJcyh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBVc2VkIHRvIHJlcHJlc2VudCBhIGZpZWxkIHRyYW5zZm9ybSBvbiBhIG11dGF0aW9uLiAqLyBjbGFzcyBBcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBzdHJ1Y3R1cmFsIHR5cGUgb2YgYFRyYW5zZm9ybU9wZXJhdGlvbmAgaXMgdW5pcXVlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy81NDUxXG4gICAgICAgIHRoaXMuXyA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxvY2FsIHRyYW5zZm9ybSByZXN1bHQgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHByZXZpb3VzVmFsdWVgLFxuICogb3B0aW9uYWxseSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gdnModCwgZSwgbikge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgYnMgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogXCJzZXJ2ZXJfdGltZXN0YW1wXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9fbG9jYWxfd3JpdGVfdGltZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiB0LnNlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW5vczogdC5uYW5vc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBXZSBzaG91bGQgYXZvaWQgc3RvcmluZyBkZWVwbHkgbmVzdGVkIHNlcnZlciB0aW1lc3RhbXAgbWFwIHZhbHVlc1xuICAgICAgICAvLyBiZWNhdXNlIHdlIG5ldmVyIHVzZSB0aGUgaW50ZXJtZWRpYXRlIFwicHJldmlvdXMgdmFsdWVzXCIuXG4gICAgICAgIC8vIEZvciBleGFtcGxlOlxuICAgICAgICAvLyBwcmV2aW91czogNDJMLCBhZGQ6IHQxLCByZXN1bHQ6IHQxIC0+IDQyTFxuICAgICAgICAvLyBwcmV2aW91czogdDEsICBhZGQ6IHQyLCByZXN1bHQ6IHQyIC0+IDQyTCAoTk9UIHQyIC0+IHQxIC0+IDQyTClcbiAgICAgICAgLy8gcHJldmlvdXM6IHQyLCAgYWRkOiB0MywgcmVzdWx0OiB0MyAtPiA0MkwgKE5PVCB0MyAtPiB0MiAtPiB0MSAtPiA0MkwpXG4gICAgICAgIC8vIGBnZXRQcmV2aW91c1ZhbHVlYCByZWN1cnNpdmVseSB0cmF2ZXJzZXMgc2VydmVyIHRpbWVzdGFtcHMgdG8gZmluZCB0aGVcbiAgICAgICAgLy8gbGVhc3QgcmVjZW50IFZhbHVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBlICYmIE5lKGUpICYmIChlID0ga2UoZSkpLCBlICYmIChuLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX18gPSBlKSwgXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiBuXG4gICAgICAgIH07XG4gICAgfShuLCBlKSA6IHQgaW5zdGFuY2VvZiBWcyA/IFNzKHQsIGUpIDogdCBpbnN0YW5jZW9mIERzID8gQ3ModCwgZSkgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxuICAgICAgICAvLyBwcmVjaXNpb24gYW5kIHJlc29sdmVzIG92ZXJmbG93cyBieSByZWR1Y2luZyBwcmVjaXNpb24sIHdlIGRvIG5vdFxuICAgICAgICAvLyBtYW51YWxseSBjYXAgb3ZlcmZsb3dzIGF0IDJeNjMuXG4gICAgICAgIGNvbnN0IG4gPSBQcyh0LCBlKSwgcyA9IE5zKG4pICsgTnModC5ndCk7XG4gICAgICAgIHJldHVybiBIZShuKSAmJiBIZSh0Lmd0KSA/IFRzKHMpIDogSXModC5zZXJpYWxpemVyLCBzKTtcbiAgICB9KHQsIGUpO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIGEgZmluYWwgdHJhbnNmb3JtIHJlc3VsdCBhZnRlciB0aGUgdHJhbnNmb3JtIGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICogYnkgdGhlIHNlcnZlciwgcG90ZW50aWFsbHkgdXNpbmcgdGhlIHNlcnZlci1wcm92aWRlZCB0cmFuc2Zvcm1SZXN1bHQuXG4gKi8gZnVuY3Rpb24gUnModCwgZSwgbikge1xuICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxuICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxuICAgIC8vIGFwcGxpY2F0aW9ucy5cbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFZzID8gU3ModCwgZSkgOiB0IGluc3RhbmNlb2YgRHMgPyBDcyh0LCBlKSA6IG47XG59XG5cbi8qKlxuICogSWYgdGhpcyB0cmFuc2Zvcm0gb3BlcmF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvXG4gKiBwZXJzaXN0IGZvciB0aGlzIHRyYW5zZm9ybS4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgdHJhbnNmb3JtXG4gKiBvcGVyYXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhc1xuICogYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogQmFzZSB2YWx1ZXMgcHJvdmlkZSBjb25zaXN0ZW50IGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZFxuICogYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZFxuICogaGFzIGFscmVhZHkgYXBwbGllZCB0aGUgdHJhbnNmb3JtIG9wZXJhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3JtcywgYXMgdGhleSBjYW4gYmUgcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzXG4gKiBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMuXG4gKi8gZnVuY3Rpb24gUHModCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgeHMgPyBIZShuID0gZSkgfHwgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZWl0aGVyIGFuIEludGVnZXJWYWx1ZSBvciBhIERvdWJsZVZhbHVlLiAqLyAobikgPyBlIDoge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IDBcbiAgICB9IDogbnVsbDtcbiAgICB2YXIgbjtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYSB2YWx1ZSBpbnRvIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAuICovXG5jbGFzcyBicyBleHRlbmRzIEFzIHt9XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHVuaW9uIG9wZXJhdGlvbi4gKi8gY2xhc3MgVnMgZXh0ZW5kcyBBcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFNzKHQsIGUpIHtcbiAgICBjb25zdCBuID0ga3MoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4uc29tZSgodCA9PiBxZSh0LCBlKSkpIHx8IG4ucHVzaChlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovIGNsYXNzIERzIGV4dGVuZHMgQXMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBDcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBrcyhlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbiA9IG4uZmlsdGVyKCh0ID0+ICFxZSh0LCBlKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBiYWNrZW5kIHNlbWFudGljcyBmb3IgbG9jYWxseSBjb21wdXRlZCBOVU1FUklDX0FERCAoaW5jcmVtZW50KVxuICogdHJhbnNmb3Jtcy4gQ29udmVydHMgYWxsIGZpZWxkIHZhbHVlcyB0byBpbnRlZ2VycyBvciBkb3VibGVzLCBidXQgdW5saWtlIHRoZVxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcbiAqIGFyaXRobWV0aWMgaXMgdXNlZCBhbmQgcHJlY2lzaW9uIGxvc3MgY2FuIG9jY3VyIGZvciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDJeNTMuXG4gKi8gY2xhc3MgeHMgZXh0ZW5kcyBBcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnNlcmlhbGl6ZXIgPSB0LCB0aGlzLmd0ID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE5zKHQpIHtcbiAgICByZXR1cm4gQ2UodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGtzKHQpIHtcbiAgICByZXR1cm4gSmUodCkgJiYgdC5hcnJheVZhbHVlLnZhbHVlcyA/IHQuYXJyYXlWYWx1ZS52YWx1ZXMuc2xpY2UoKSA6IFtdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgZmllbGQgcGF0aCBhbmQgdGhlIFRyYW5zZm9ybU9wZXJhdGlvbiB0byBwZXJmb3JtIHVwb24gaXQuICovIGNsYXNzIE1zIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLnRyYW5zZm9ybSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiAkcyh0LCBlKSB7XG4gICAgcmV0dXJuIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgVnMgJiYgZSBpbnN0YW5jZW9mIFZzIHx8IHQgaW5zdGFuY2VvZiBEcyAmJiBlIGluc3RhbmNlb2YgRHMgPyBudCh0LmVsZW1lbnRzLCBlLmVsZW1lbnRzLCBxZSkgOiB0IGluc3RhbmNlb2YgeHMgJiYgZSBpbnN0YW5jZW9mIHhzID8gcWUodC5ndCwgZS5ndCkgOiB0IGluc3RhbmNlb2YgYnMgJiYgZSBpbnN0YW5jZW9mIGJzO1xuICAgIH0odC50cmFuc2Zvcm0sIGUudHJhbnNmb3JtKTtcbn1cblxuLyoqIFRoZSByZXN1bHQgb2Ygc3VjY2Vzc2Z1bGx5IGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gdGhlIGJhY2tlbmQuICovXG5jbGFzcyBPcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XG4gICAgICpcbiAgICAgKiAtIEZvciBtb3N0IG9wZXJhdGlvbnMsIHRoaXMgaXMgdGhlIHVwZGF0ZVRpbWUgaW4gdGhlIFdyaXRlUmVzdWx0LlxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXG4gICAgICogICBub3Qgc3RvcmVkIGFuZCBoYXZlIG5vIHVwZGF0ZVRpbWUpLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcbiAgICAgKiB0aGUgdXBkYXRlVGltZSBldmVuIHRob3VnaCB0aGUgY29tbWl0VGltZSBhZHZhbmNlcy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0aW5nIGZpZWxkcyByZXR1cm5lZCBmcm9tIHRoZSBiYWNrZW5kIGFmdGVyIGEgbXV0YXRpb25cbiAgICAgKiBjb250YWluaW5nIGZpZWxkIHRyYW5zZm9ybXMgaGFzIGJlZW4gY29tbWl0dGVkLiBDb250YWlucyBvbmUgRmllbGRWYWx1ZVxuICAgICAqIGZvciBlYWNoIEZpZWxkVHJhbnNmb3JtIHRoYXQgd2FzIGluIHRoZSBtdXRhdGlvbi5cbiAgICAgKlxuICAgICAqIFdpbGwgYmUgZW1wdHkgaWYgdGhlIG11dGF0aW9uIGRpZCBub3QgY29udGFpbiBhbnkgZmllbGQgdHJhbnNmb3Jtcy5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuY29kZXMgYSBwcmVjb25kaXRpb24gZm9yIGEgbXV0YXRpb24uIFRoaXMgZm9sbG93cyB0aGUgbW9kZWwgdGhhdCB0aGVcbiAqIGJhY2tlbmQgYWNjZXB0cyB3aXRoIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYW4gZXhwbGljaXQgXCJlbXB0eVwiIHByZWNvbmRpdGlvblxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cbiAqLyBjbGFzcyBGcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWUgPSB0LCB0aGlzLmV4aXN0cyA9IGU7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGVtcHR5IFByZWNvbmRpdGlvbi4gKi8gICAgc3RhdGljIG5vbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnM7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiB3aXRoIGFuIGV4aXN0cyBmbGFnLiAqLyAgICBzdGF0aWMgZXhpc3RzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGcyh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gYmFzZWQgb24gYSB2ZXJzaW9uIGEgZG9jdW1lbnQgZXhpc3RzIGF0LiAqLyAgICBzdGF0aWMgdXBkYXRlVGltZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRnModCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBQcmVjb25kaXRpb24gaXMgZW1wdHkuICovICAgIGdldCBpc05vbmUoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMudXBkYXRlVGltZSAmJiB2b2lkIDAgPT09IHRoaXMuZXhpc3RzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzID09PSB0LmV4aXN0cyAmJiAodGhpcy51cGRhdGVUaW1lID8gISF0LnVwZGF0ZVRpbWUgJiYgdGhpcy51cGRhdGVUaW1lLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6ICF0LnVwZGF0ZVRpbWUpO1xuICAgIH1cbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlY29uZGl0aW9ucyBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBCcyh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBlLnZlcnNpb24uaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogdm9pZCAwID09PSB0LmV4aXN0cyB8fCB0LmV4aXN0cyA9PT0gZS5pc0ZvdW5kRG9jdW1lbnQoKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIGRlc2NyaWJlcyBhIHNlbGYtY29udGFpbmVkIGNoYW5nZSB0byBhIGRvY3VtZW50LiBNdXRhdGlvbnMgY2FuXG4gKiBjcmVhdGUsIHJlcGxhY2UsIGRlbGV0ZSwgYW5kIHVwZGF0ZSBzdWJzZXRzIG9mIGRvY3VtZW50cy5cbiAqXG4gKiBNdXRhdGlvbnMgbm90IG9ubHkgYWN0IG9uIHRoZSB2YWx1ZSBvZiB0aGUgZG9jdW1lbnQgYnV0IGFsc28gaXRzIHZlcnNpb24uXG4gKlxuICogRm9yIGxvY2FsIG11dGF0aW9ucyAobXV0YXRpb25zIHRoYXQgaGF2ZW4ndCBiZWVuIGNvbW1pdHRlZCB5ZXQpLCB3ZSBwcmVzZXJ2ZVxuICogdGhlIGV4aXN0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBGb3IgRGVsZXRlIG11dGF0aW9ucywgd2VcbiAqIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXG4gKlxuICogSGVyZSdzIHRoZSBleHBlY3RlZCB0cmFuc2l0aW9uIHRhYmxlLlxuICpcbiAqIE1VVEFUSU9OICAgICAgICAgICBBUFBMSUVEIFRPICAgICAgICAgICAgUkVTVUxUUyBJTlxuICpcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIERvY3VtZW50KHYwKVxuICogU2V0TXV0YXRpb24gICAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBEb2N1bWVudCh2MClcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIFVua25vd25Eb2N1bWVudCh2MylcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgTm9Eb2N1bWVudCh2MClcbiAqXG4gKiBGb3IgYWNrbm93bGVkZ2VkIG11dGF0aW9ucywgd2UgdXNlIHRoZSB1cGRhdGVUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGFzXG4gKiB0aGUgcmVzdWx0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBBcyBkZWxldGVzIGhhdmUgbm9cbiAqIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXG4gKiBEZWxldGUgbXV0YXRpb25zLlxuICpcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXG4gKiBsb2NhbGx5LCB3ZSB0cmFuc2l0aW9uIHRvIGFuIGBVbmtub3duRG9jdW1lbnRgIGFuZCByZWx5IG9uIFdhdGNoIHRvIHNlbmQgdXNcbiAqIHRoZSB1cGRhdGVkIHZlcnNpb24uXG4gKlxuICogRmllbGQgdHJhbnNmb3JtcyBhcmUgdXNlZCBvbmx5IHdpdGggUGF0Y2ggYW5kIFNldCBNdXRhdGlvbnMuIFdlIHVzZSB0aGVcbiAqIGB1cGRhdGVUcmFuc2Zvcm1zYCBtZXNzYWdlIHRvIHN0b3JlIHRyYW5zZm9ybXMsIHJhdGhlciB0aGFuIHRoZSBgdHJhbnNmb3Jtc2BzXG4gKiBtZXNzYWdlcy5cbiAqXG4gKiAjIyBTdWJjbGFzc2luZyBOb3Rlc1xuICpcbiAqIEV2ZXJ5IHR5cGUgb2YgbXV0YXRpb24gbmVlZHMgdG8gaW1wbGVtZW50IGl0cyBvd24gYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXG4gKiBhcHBseVRvTG9jYWxWaWV3KCkgdG8gaW1wbGVtZW50IHRoZSBhY3R1YWwgYmVoYXZpb3Igb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uXG4gKiB0byBzb21lIHNvdXJjZSBkb2N1bWVudCAoc2VlIGBzZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudCgpYCBmb3IgYW5cbiAqIGV4YW1wbGUpLlxuICovIGNsYXNzIExzIHt9XG5cbi8qKlxuICogQSB1dGlsaXR5IG1ldGhvZCB0byBjYWxjdWxhdGUgYSBgTXV0YXRpb25gIHJlcHJlc2VudGluZyB0aGUgb3ZlcmxheSBmcm9tIHRoZVxuICogZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50LCBhbmQgYSBgRmllbGRNYXNrYCByZXByZXNlbnRpbmcgdGhlIGZpZWxkcyB0aGF0XG4gKiBhcmUgbXV0YXRlZCBieSB0aGUgbG9jYWwgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIHFzKHQsIGUpIHtcbiAgICBpZiAoIXQuaGFzTG9jYWxNdXRhdGlvbnMgfHwgZSAmJiAwID09PSBlLmZpZWxkcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIC8vIG1hc2sgaXMgbnVsbCB3aGVuIHNldHMgb3IgZGVsZXRlcyBhcmUgYXBwbGllZCB0byB0aGUgY3VycmVudCBkb2N1bWVudC5cbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiB0LmlzTm9Eb2N1bWVudCgpID8gbmV3IFlzKHQua2V5LCBGcy5ub25lKCkpIDogbmV3IGpzKHQua2V5LCB0LmRhdGEsIEZzLm5vbmUoKSk7XG4gICAge1xuICAgICAgICBjb25zdCBuID0gdC5kYXRhLCBzID0gdW4uZW1wdHkoKTtcbiAgICAgICAgbGV0IGkgPSBuZXcgRWUoYXQuY29tcGFyYXRvcik7XG4gICAgICAgIGZvciAobGV0IHQgb2YgZS5maWVsZHMpIGlmICghaS5oYXModCkpIHtcbiAgICAgICAgICAgIGxldCBlID0gbi5maWVsZCh0KTtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBkZWxldGluZyBhIG5lc3RlZCBmaWVsZCwgd2UgdGFrZSB0aGUgaW1tZWRpYXRlIHBhcmVudCBhc1xuICAgICAgICAgICAgLy8gdGhlIG1hc2sgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHJlc3VsdGluZyBtdXRhdGlvbi5cbiAgICAgICAgICAgIC8vIEp1c3RpZmljYXRpb246IE5lc3RlZCBmaWVsZHMgY2FuIGNyZWF0ZSBwYXJlbnQgZmllbGRzIGltcGxpY2l0bHkuIElmXG4gICAgICAgICAgICAvLyBvbmx5IGEgbGVhZiBlbnRyeSBpcyBkZWxldGVkIGluIGxhdGVyIG11dGF0aW9ucywgdGhlIHBhcmVudCBmaWVsZFxuICAgICAgICAgICAgLy8gc2hvdWxkIHN0aWxsIHJlbWFpbiwgYnV0IHdlIG1heSBoYXZlIGxvc3QgdGhpcyBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIC8vIENvbnNpZGVyIG11dGF0aW9uIChmb28uYmFyIDEpLCB0aGVuIG11dGF0aW9uIChmb28uYmFyIGRlbGV0ZSgpKS5cbiAgICAgICAgICAgIC8vIFRoaXMgbGVhdmVzIHRoZSBmaW5hbCByZXN1bHQgKGZvbywge30pLiBEZXNwaXRlIHRoZSBmYWN0IHRoYXQgYGRvY2BcbiAgICAgICAgICAgIC8vIGhhcyB0aGUgY29ycmVjdCByZXN1bHQsIGBmb29gIGlzIG5vdCBpbiBgbWFza2AsIGFuZCB0aGUgcmVzdWx0aW5nXG4gICAgICAgICAgICAvLyBtdXRhdGlvbiB3b3VsZCBtaXNzIGBmb29gLlxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gZSAmJiB0Lmxlbmd0aCA+IDEgJiYgKHQgPSB0LnBvcExhc3QoKSwgZSA9IG4uZmllbGQodCkpLCBudWxsID09PSBlID8gcy5kZWxldGUodCkgOiBzLnNldCh0LCBlKSwgXG4gICAgICAgICAgICBpID0gaS5hZGQodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB6cyh0LmtleSwgcywgbmV3IFJlKGkudG9BcnJheSgpKSwgRnMubm9uZSgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZyBhXG4gKiBuZXcgcmVtb3RlIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGUgZXhwZWN0ZWQgc3RhdGVcbiAqIChlLmcuIGl0IGlzIGludmFsaWQgb3Igb3V0ZGF0ZWQpLCB0aGUgZG9jdW1lbnQgdHlwZSBtYXkgdHJhbnNpdGlvbiB0b1xuICogdW5rbm93bi5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBtdXRhdGlvblJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uIGZyb20gdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gVXModCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiBqcyA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIHNldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhXG4gICAgICAgIC8vIHJlbW90ZSBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtdXN0IGhhdmUgaGVsZC5cbiAgICAgICAgY29uc3QgcyA9IHQudmFsdWUuY2xvbmUoKSwgaSA9IEhzKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgcykuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiB6cyA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFCcyh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgY29udmVydCB0byBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCBhXG4gICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXG4gICAgICAgIHJldHVybiB2b2lkIGUuY29udmVydFRvVW5rbm93bkRvY3VtZW50KG4udmVyc2lvbik7XG4gICAgICAgIGNvbnN0IHMgPSBIcyh0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoV3ModCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgaSkuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxuICAgICAgICAvLyBoYXZlIGhlbGQuXG4gICAgICAgIGUuY29udmVydFRvTm9Eb2N1bWVudChuLnZlcnNpb24pLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oMCwgZSwgbik7XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZ1xuICogdGhlIG5ldyBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZVxuICogZXhwZWN0ZWQgc3RhdGUsIHRoZSBkb2N1bWVudCBpcyBub3QgbW9kaWZpZWQuXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gcHJldmlvdXNNYXNrIC0gVGhlIGZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gQSB0aW1lc3RhbXAgaW5kaWNhdGluZyB0aGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGVcbiAqICAgICBiYXRjaCB0aGlzIG11dGF0aW9uIGlzIGEgcGFydCBvZi5cbiAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIHRoZSBmaWVsZHMgdGhhdCBhcmUgY2hhbmdlZCBieSBhcHBseWluZyB0aGlzIG11dGF0aW9uLlxuICovIGZ1bmN0aW9uIEtzKHQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGpzID8gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBpZiAoIUJzKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFRoZSBtdXRhdGlvbiBmYWlsZWQgdG8gYXBwbHkgKGUuZy4gYSBkb2N1bWVudCBJRCBjcmVhdGVkIHdpdGggYWRkKClcbiAgICAgICAgLy8gY2F1c2VkIGEgbmFtZSBjb2xsaXNpb24pLlxuICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IHQudmFsdWUuY2xvbmUoKSwgciA9IEpzKHQuZmllbGRUcmFuc2Zvcm1zLCBzLCBlKTtcbiAgICAgICAgcmV0dXJuIGkuc2V0QWxsKHIpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoZS52ZXJzaW9uLCBpKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbDtcbiAvLyBTZXRNdXRhdGlvbiBvdmVyd3JpdGVzIGFsbCBmaWVsZHMuXG4gICAgICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcbiAqXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIHVwZGF0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgZGVsZXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXG4gKiAgICBpZ25vcmVkLlxuICovICh0LCBlLCBuLCBzKSA6IHQgaW5zdGFuY2VvZiB6cyA/IGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgaWYgKCFCcyh0LnByZWNvbmRpdGlvbiwgZSkpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gSnModC5maWVsZFRyYW5zZm9ybXMsIHMsIGUpLCByID0gZS5kYXRhO1xuICAgICAgICBpZiAoci5zZXRBbGwoV3ModCkpLCByLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KGUudmVyc2lvbiwgcikuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGwgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbi51bmlvbldpdGgodC5maWVsZE1hc2suZmllbGRzKS51bmlvbldpdGgodC5maWVsZFRyYW5zZm9ybXMubWFwKCh0ID0+IHQuZmllbGQpKSk7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIEZpZWxkUGF0aC9WYWx1ZSBtYXAgd2l0aCB0aGUgY29udGVudCBvZiB0aGUgUGF0Y2hNdXRhdGlvbi5cbiAqLyAodCwgZSwgbiwgcykgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmIChCcyh0LnByZWNvbmRpdGlvbiwgZSkpIHJldHVybiBlLmNvbnZlcnRUb05vRG9jdW1lbnQoZS52ZXJzaW9uKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbDtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IHZlcmlmaWVzIHRoZSBleGlzdGVuY2Ugb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aFxuICogdGhlIHByb3ZpZGVkIHByZWNvbmRpdGlvbi5cbiAqXG4gKiBUaGUgYHZlcmlmeWAgb3BlcmF0aW9uIGlzIG9ubHkgdXNlZCBpbiBUcmFuc2FjdGlvbnMsIGFuZCB0aGlzIGNsYXNzIHNlcnZlc1xuICogcHJpbWFyaWx5IHRvIGZhY2lsaXRhdGUgc2VyaWFsaXphdGlvbiBpbnRvIHByb3Rvcy5cbiAqLyAodCwgZSwgbik7XG59XG5cbi8qKlxuICogSWYgdGhpcyBtdXRhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0byBwZXJzaXN0IHdpdGhcbiAqIHRoaXMgbXV0YXRpb24uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIG11dGF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkXG4gKiB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIFRoZSBiYXNlIHZhbHVlIGlzIGEgc3BhcnNlIG9iamVjdCB0aGF0IGNvbnNpc3RzIG9mIG9ubHkgdGhlIGRvY3VtZW50XG4gKiBmaWVsZHMgZm9yIHdoaWNoIHRoaXMgbXV0YXRpb24gY29udGFpbnMgYSBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1hdGlvblxuICogKGUuZy4gYSBudW1lcmljIGluY3JlbWVudCkuIFRoZSBwcm92aWRlZCB2YWx1ZSBndWFyYW50ZWVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZCBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWVcbiAqIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZVxuICogbXV0YXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yIGlkZW1wb3RlbnQgbXV0YXRpb25zLCBhcyB0aGV5IGNhbiBiZVxuICogcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIEdzKHQsIGUpIHtcbiAgICBsZXQgbiA9IG51bGw7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuZmllbGRUcmFuc2Zvcm1zKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQocy5maWVsZCksIGkgPSBQcyhzLnRyYW5zZm9ybSwgdCB8fCBudWxsKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChudWxsID09PSBuICYmIChuID0gdW4uZW1wdHkoKSksIG4uc2V0KHMuZmllbGQsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gUXModCwgZSkge1xuICAgIHJldHVybiB0LnR5cGUgPT09IGUudHlwZSAmJiAoISF0LmtleS5pc0VxdWFsKGUua2V5KSAmJiAoISF0LnByZWNvbmRpdGlvbi5pc0VxdWFsKGUucHJlY29uZGl0aW9uKSAmJiAoISFmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgdm9pZCAwID09PSBlIHx8ICEoIXQgfHwgIWUpICYmIG50KHQsIGUsICgodCwgZSkgPT4gJHModCwgZSkpKTtcbiAgICB9KHQuZmllbGRUcmFuc2Zvcm1zLCBlLmZpZWxkVHJhbnNmb3JtcykgJiYgKDAgLyogTXV0YXRpb25UeXBlLlNldCAqLyA9PT0gdC50eXBlID8gdC52YWx1ZS5pc0VxdWFsKGUudmFsdWUpIDogMSAvKiBNdXRhdGlvblR5cGUuUGF0Y2ggKi8gIT09IHQudHlwZSB8fCB0LmRhdGEuaXNFcXVhbChlLmRhdGEpICYmIHQuZmllbGRNYXNrLmlzRXF1YWwoZS5maWVsZE1hc2spKSkpKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxuICovIGNsYXNzIGpzIGV4dGVuZHMgTHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IG4sIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gcywgXG4gICAgICAgIHRoaXMudHlwZSA9IDAgLyogTXV0YXRpb25UeXBlLlNldCAqLztcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIHpzIGV4dGVuZHMgTHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMuZGF0YSA9IGUsIHRoaXMuZmllbGRNYXNrID0gbiwgdGhpcy5wcmVjb25kaXRpb24gPSBzLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpLCB0aGlzLnR5cGUgPSAxIC8qIE11dGF0aW9uVHlwZS5QYXRjaCAqLztcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZE1hc2s7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBXcyh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgcmV0dXJuIHQuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgaWYgKCFuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuZGF0YS5maWVsZChuKTtcbiAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICB9XG4gICAgfSkpLCBlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGEgbXV0YXRpb25cbiAqIGNvbnRhaW5pbmcgdHJhbnNmb3JtcyBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyAtIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gSHModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIEYodC5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IHRbaV0sIG8gPSByLnRyYW5zZm9ybSwgdSA9IGUuZGF0YS5maWVsZChyLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoci5maWVsZCwgUnMobywgdSwgbltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSB3aGVuIGFwcGx5aW5nIGFcbiAqIHRyYW5zZm9ybSBsb2NhbGx5LlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIGxvY2FsIHRpbWUgb2YgdGhlIG11dGF0aW9uICh1c2VkIHRvXG4gKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgdHJhbnNmb3JtcyBvbi5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIEpzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICBjb25zdCB0ID0gaS50cmFuc2Zvcm0sIHIgPSBuLmRhdGEuZmllbGQoaS5maWVsZCk7XG4gICAgICAgIHMuc2V0KGkuZmllbGQsIHZzKHQsIHIsIGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKiBBIG11dGF0aW9uIHRoYXQgZGVsZXRlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleS4gKi8gY2xhc3MgWXMgZXh0ZW5kcyBMcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMiAvKiBNdXRhdGlvblR5cGUuRGVsZXRlICovICwgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBYcyBleHRlbmRzIExzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAzIC8qIE11dGF0aW9uVHlwZS5WZXJpZnkgKi8gLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxuICovIGNsYXNzIFpzIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSB1bmlxdWUgSUQgb2YgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgb3JpZ2luYWwgd3JpdGUgdGltZSBvZiB0aGlzIG11dGF0aW9uLlxuICAgICAqIEBwYXJhbSBiYXNlTXV0YXRpb25zIC0gTXV0YXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGJhc2VcbiAgICAgKiB2YWx1ZXMgd2hlbiB0aGlzIG11dGF0aW9uIGlzIGFwcGxpZWQgbG9jYWxseS4gVGhpcyBjYW4gYmUgdXNlZCB0byBsb2NhbGx5XG4gICAgICogb3ZlcndyaXRlIHZhbHVlcyB0aGF0IGFyZSBwZXJzaXN0ZWQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gQmFzZVxuICAgICAqIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cbiAgICAgKiBAcGFyYW0gbXV0YXRpb25zIC0gVGhlIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGluIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogVXNlci1wcm92aWRlZCBtdXRhdGlvbnMgYXJlIGFwcGxpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseSBvbiB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaElkID0gdCwgdGhpcy5sb2NhbFdyaXRlVGltZSA9IGUsIHRoaXMuYmFzZU11dGF0aW9ucyA9IG4sIHRoaXMubXV0YXRpb25zID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzIE11dGF0aW9uQmF0Y2ggdG8gdGhlIHNwZWNpZmllZCBkb2N1bWVudFxuICAgICAqIHRvIGNvbXB1dGUgdGhlIHN0YXRlIG9mIHRoZSByZW1vdGUgZG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIGJhdGNoUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgTXV0YXRpb25CYXRjaCB0byB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqLyAgICBhcHBseVRvUmVtb3RlRG9jdW1lbnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5tdXRhdGlvblJlc3VsdHM7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLm11dGF0aW9uc1tlXTtcbiAgICAgICAgICAgIGlmIChzLmtleS5pc0VxdWFsKHQua2V5KSkge1xuICAgICAgICAgICAgICAgIFVzKHMsIHQsIG5bZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xuICAgICAqIGJhdGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gbXV0YXRlZEZpZWxkcyAtIEZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIGFsbCB0aGUgZmllbGRzIHRoYXQgYXJlIG11dGF0ZWQuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbFZpZXcodCwgZSkge1xuICAgICAgICAvLyBGaXJzdCwgYXBwbHkgdGhlIGJhc2Ugc3RhdGUuIFRoaXMgYWxsb3dzIHVzIHRvIGFwcGx5IG5vbi1pZGVtcG90ZW50XG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5iYXNlTXV0YXRpb25zKSBuLmtleS5pc0VxdWFsKHQua2V5KSAmJiAoZSA9IEtzKG4sIHQsIGUsIHRoaXMubG9jYWxXcml0ZVRpbWUpKTtcbiAgICAgICAgLy8gU2Vjb25kLCBhcHBseSBhbGwgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMubXV0YXRpb25zKSBuLmtleS5pc0VxdWFsKHQua2V5KSAmJiAoZSA9IEtzKG4sIHQsIGUsIHRoaXMubG9jYWxXcml0ZVRpbWUpKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLiBSZXR1cm5zIGEgYERvY3VtZW50S2V5YCB0byBgTXV0YXRpb25gIG1hcCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlcGxhY2UgYWxsIHRoZSBtdXRhdGlvbiBhcHBsaWNhdGlvbnMuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHQsIGUpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIE8obl4yKS4gSWYgd2UgYXBwbHkgdGhlIG11dGF0aW9uc1xuICAgICAgICAvLyBkaXJlY3RseSAoYXMgZG9uZSBpbiBgYXBwbHlUb0xvY2FsVmlldygpYCksIHdlIGNhbiByZWR1Y2UgdGhlIGNvbXBsZXhpdHlcbiAgICAgICAgLy8gdG8gTyhuKS5cbiAgICAgICAgY29uc3QgbiA9IGRzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0LmdldChzLmtleSksIHIgPSBpLm92ZXJsYXllZERvY3VtZW50O1xuICAgICAgICAgICAgLy8gVE9ETyhtdXRhYmxlZG9jdW1lbnRzKTogVGhpcyBtZXRob2Qgc2hvdWxkIHRha2UgYSBNdXRhYmxlRG9jdW1lbnRNYXBcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBzaG91bGQgcmVtb3ZlIHRoaXMgY2FzdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvID0gdGhpcy5hcHBseVRvTG9jYWxWaWV3KHIsIGkubXV0YXRlZEZpZWxkcyk7XG4gICAgICAgICAgICAvLyBTZXQgbXV0YXRlZEZpZWxkcyB0byBudWxsIGlmIHRoZSBkb2N1bWVudCBpcyBvbmx5IGZyb20gbG9jYWwgbXV0YXRpb25zLlxuICAgICAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGEgU2V0IG9yIERlbGV0ZSBtdXRhdGlvbiwgaW5zdGVhZCBvZiB0cnlpbmcgdG8gY3JlYXRlIGFcbiAgICAgICAgICAgIC8vIHBhdGNoIG11dGF0aW9uIGFzIHRoZSBvdmVybGF5LlxuICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUuaGFzKHMua2V5KSA/IG51bGwgOiBvO1xuICAgICAgICAgICAgY29uc3QgdSA9IHFzKHIsIG8pO1xuICAgICAgICAgICAgbnVsbCAhPT0gdSAmJiBuLnNldChzLmtleSwgdSksIHIuaXNWYWxpZERvY3VtZW50KCkgfHwgci5jb252ZXJ0VG9Ob0RvY3VtZW50KHJ0Lm1pbigpKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMucmVkdWNlKCgodCwgZSkgPT4gdC5hZGQoZS5rZXkpKSwgZ3MoKSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaElkID09PSB0LmJhdGNoSWQgJiYgbnQodGhpcy5tdXRhdGlvbnMsIHQubXV0YXRpb25zLCAoKHQsIGUpID0+IFFzKHQsIGUpKSkgJiYgbnQodGhpcy5iYXNlTXV0YXRpb25zLCB0LmJhc2VNdXRhdGlvbnMsICgodCwgZSkgPT4gUXModCwgZSkpKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgbXV0YXRpb24gYmF0Y2ggdG8gdGhlIGJhY2tlbmQuICovIGNsYXNzIHRpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBcbiAgICAvKipcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaCA9IHQsIHRoaXMuY29tbWl0VmVyc2lvbiA9IGUsIHRoaXMubXV0YXRpb25SZXN1bHRzID0gbiwgdGhpcy5kb2NWZXJzaW9ucyA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdCBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCByZXN1bHRzLiBUaGVyZVxuICAgICAqIG11c3QgYmUgb25lIHJlc3VsdCBmb3IgZWFjaCBtdXRhdGlvbiBpbiB0aGUgYmF0Y2guIFRoaXMgc3RhdGljIGZhY3RvcnlcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0mZ3Q7dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXG4gICAgICovICAgIHN0YXRpYyBmcm9tKHQsIGUsIG4pIHtcbiAgICAgICAgRih0Lm11dGF0aW9ucy5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICAgICAgbGV0IHMgPSBfcztcbiAgICAgICAgY29uc3QgaSA9IHQubXV0YXRpb25zO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGkubGVuZ3RoOyB0KyspIHMgPSBzLmluc2VydChpW3RdLmtleSwgblt0XS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyB0aSh0LCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGFuIG92ZXJsYXkgY29tcHV0ZWQgYnkgRmlyZXN0b3JlLlxuICpcbiAqIEhvbGRzIGluZm9ybWF0aW9uIGFib3V0IGEgbXV0YXRpb24gYW5kIHRoZSBsYXJnZXN0IGJhdGNoIGlkIGluIEZpcmVzdG9yZSB3aGVuXG4gKiB0aGUgbXV0YXRpb24gd2FzIGNyZWF0ZWQuXG4gKi8gY2xhc3MgZWkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IHQsIHRoaXMubXV0YXRpb24gPSBlO1xuICAgIH1cbiAgICBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uLmtleTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIHRoaXMubXV0YXRpb24gPT09IHQubXV0YXRpb247XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYE92ZXJsYXl7XFxuICAgICAgbGFyZ2VzdEJhdGNoSWQ6ICR7dGhpcy5sYXJnZXN0QmF0Y2hJZH0sXFxuICAgICAgbXV0YXRpb246ICR7dGhpcy5tdXRhdGlvbi50b1N0cmluZygpfVxcbiAgICB9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbmNyZXRlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBBZ2dyZWdhdGUgdHlwZS5cbiAqLyBjbGFzcyBuaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmFsaWFzID0gdCwgdGhpcy55dCA9IGUsIHRoaXMuZmllbGRQYXRoID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHNpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY291bnQgPSB0LCB0aGlzLnVuY2hhbmdlZE5hbWVzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgaWksIHJpO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gb2kodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE8oKTtcblxuICAgICAgY2FzZSBxLkNBTkNFTExFRDpcbiAgICAgIGNhc2UgcS5VTktOT1dOOlxuICAgICAgY2FzZSBxLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgY2FzZSBxLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgIGNhc2UgcS5JTlRFUk5BTDpcbiAgICAgIGNhc2UgcS5VTkFWQUlMQUJMRTpcbiAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgY2FzZSBxLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBjYXNlIHEuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgIGNhc2UgcS5OT1RfRk9VTkQ6XG4gICAgICBjYXNlIHEuQUxSRUFEWV9FWElTVFM6XG4gICAgICBjYXNlIHEuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICBjYXNlIHEuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICAgICAgICAgICAgICBjYXNlIHEuQUJPUlRFRDpcbiAgICAgIGNhc2UgcS5PVVRfT0ZfUkFOR0U6XG4gICAgICBjYXNlIHEuVU5JTVBMRU1FTlRFRDpcbiAgICAgIGNhc2UgcS5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cbiAqXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXG4gKi9cbi8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXG4gKiAgICAgaXMgbm8gbWF0Y2guXG4gKi9cbmZ1bmN0aW9uIHVpKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSBcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBub3JtYWxseSBoYXBwZW4sIGJ1dCBpbiBjZXJ0YWluIGVycm9yIGNhc2VzIChsaWtlIHRyeWluZ1xuICAgIC8vIHRvIHNlbmQgaW52YWxpZCBwcm90byBtZXNzYWdlcykgd2UgbWF5IGdldCBhbiBlcnJvciB3aXRoIG5vIEdSUEMgY29kZS5cbiAgICByZXR1cm4gayhcIkdSUEMgZXJyb3IgaGFzIG5vIC5jb2RlXCIpLCBxLlVOS05PV047XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIGlpLk9LOlxuICAgICAgICByZXR1cm4gcS5PSztcblxuICAgICAgY2FzZSBpaS5DQU5DRUxMRUQ6XG4gICAgICAgIHJldHVybiBxLkNBTkNFTExFRDtcblxuICAgICAgY2FzZSBpaS5VTktOT1dOOlxuICAgICAgICByZXR1cm4gcS5VTktOT1dOO1xuXG4gICAgICBjYXNlIGlpLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgICByZXR1cm4gcS5ERUFETElORV9FWENFRURFRDtcblxuICAgICAgY2FzZSBpaS5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICAgIHJldHVybiBxLlJFU09VUkNFX0VYSEFVU1RFRDtcblxuICAgICAgY2FzZSBpaS5JTlRFUk5BTDpcbiAgICAgICAgcmV0dXJuIHEuSU5URVJOQUw7XG5cbiAgICAgIGNhc2UgaWkuVU5BVkFJTEFCTEU6XG4gICAgICAgIHJldHVybiBxLlVOQVZBSUxBQkxFO1xuXG4gICAgICBjYXNlIGlpLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuIHEuVU5BVVRIRU5USUNBVEVEO1xuXG4gICAgICBjYXNlIGlpLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICAgIHJldHVybiBxLklOVkFMSURfQVJHVU1FTlQ7XG5cbiAgICAgIGNhc2UgaWkuTk9UX0ZPVU5EOlxuICAgICAgICByZXR1cm4gcS5OT1RfRk9VTkQ7XG5cbiAgICAgIGNhc2UgaWkuQUxSRUFEWV9FWElTVFM6XG4gICAgICAgIHJldHVybiBxLkFMUkVBRFlfRVhJU1RTO1xuXG4gICAgICBjYXNlIGlpLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgICByZXR1cm4gcS5QRVJNSVNTSU9OX0RFTklFRDtcblxuICAgICAgY2FzZSBpaS5GQUlMRURfUFJFQ09ORElUSU9OOlxuICAgICAgICByZXR1cm4gcS5GQUlMRURfUFJFQ09ORElUSU9OO1xuXG4gICAgICBjYXNlIGlpLkFCT1JURUQ6XG4gICAgICAgIHJldHVybiBxLkFCT1JURUQ7XG5cbiAgICAgIGNhc2UgaWkuT1VUX09GX1JBTkdFOlxuICAgICAgICByZXR1cm4gcS5PVVRfT0ZfUkFOR0U7XG5cbiAgICAgIGNhc2UgaWkuVU5JTVBMRU1FTlRFRDpcbiAgICAgICAgcmV0dXJuIHEuVU5JTVBMRU1FTlRFRDtcblxuICAgICAgY2FzZSBpaS5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiBxLkRBVEFfTE9TUztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE8oKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gSFRUUCByZXNwb25zZSdzIGVycm9yIHN0YXR1cyB0byB0aGUgZXF1aXZhbGVudCBlcnJvciBjb2RlLlxuICpcbiAqIEBwYXJhbSBzdGF0dXMgLSBBbiBIVFRQIGVycm9yIHJlc3BvbnNlIHN0YXR1cyAoXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsXG4gKiBcIlVOS05PV05cIiwgZXRjLilcbiAqIEByZXR1cm5zIFRoZSBlcXVpdmFsZW50IENvZGUuIE5vbi1tYXRjaGluZyByZXNwb25zZXMgYXJlIG1hcHBlZCB0b1xuICogICAgIENvZGUuVU5LTk9XTi5cbiAqLyAocmkgPSBpaSB8fCAoaWkgPSB7fSkpW3JpLk9LID0gMF0gPSBcIk9LXCIsIHJpW3JpLkNBTkNFTExFRCA9IDFdID0gXCJDQU5DRUxMRURcIiwgXG5yaVtyaS5VTktOT1dOID0gMl0gPSBcIlVOS05PV05cIiwgcmlbcmkuSU5WQUxJRF9BUkdVTUVOVCA9IDNdID0gXCJJTlZBTElEX0FSR1VNRU5UXCIsIFxucmlbcmkuREVBRExJTkVfRVhDRUVERUQgPSA0XSA9IFwiREVBRExJTkVfRVhDRUVERURcIiwgcmlbcmkuTk9UX0ZPVU5EID0gNV0gPSBcIk5PVF9GT1VORFwiLCBcbnJpW3JpLkFMUkVBRFlfRVhJU1RTID0gNl0gPSBcIkFMUkVBRFlfRVhJU1RTXCIsIHJpW3JpLlBFUk1JU1NJT05fREVOSUVEID0gN10gPSBcIlBFUk1JU1NJT05fREVOSUVEXCIsIFxucmlbcmkuVU5BVVRIRU5USUNBVEVEID0gMTZdID0gXCJVTkFVVEhFTlRJQ0FURURcIiwgcmlbcmkuUkVTT1VSQ0VfRVhIQVVTVEVEID0gOF0gPSBcIlJFU09VUkNFX0VYSEFVU1RFRFwiLCBcbnJpW3JpLkZBSUxFRF9QUkVDT05ESVRJT04gPSA5XSA9IFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLCByaVtyaS5BQk9SVEVEID0gMTBdID0gXCJBQk9SVEVEXCIsIFxucmlbcmkuT1VUX09GX1JBTkdFID0gMTFdID0gXCJPVVRfT0ZfUkFOR0VcIiwgcmlbcmkuVU5JTVBMRU1FTlRFRCA9IDEyXSA9IFwiVU5JTVBMRU1FTlRFRFwiLCBcbnJpW3JpLklOVEVSTkFMID0gMTNdID0gXCJJTlRFUk5BTFwiLCByaVtyaS5VTkFWQUlMQUJMRSA9IDE0XSA9IFwiVU5BVkFJTEFCTEVcIiwgcmlbcmkuREFUQV9MT1NTID0gMTVdID0gXCJEQVRBX0xPU1NcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTWFuYWdlcyBcInRlc3RpbmcgaG9va3NcIiwgaG9va3MgaW50byB0aGUgaW50ZXJuYWxzIG9mIHRoZSBTREsgdG8gdmVyaWZ5XG4gKiBpbnRlcm5hbCBzdGF0ZSBhbmQgZXZlbnRzIGR1cmluZyBpbnRlZ3JhdGlvbiB0ZXN0cy4gRG8gbm90IHVzZSB0aGlzIGNsYXNzXG4gKiBleGNlcHQgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gKlxuICogVGhlcmUgYXJlIHR3byB3YXlzIHRvIHJldHJpZXZlIHRoZSBnbG9iYWwgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoaXMgY2xhc3M6XG4gKiAxLiBUaGUgYGluc3RhbmNlYCBwcm9wZXJ0eSwgd2hpY2ggcmV0dXJucyBudWxsIGlmIHRoZSBnbG9iYWwgc2luZ2xldG9uXG4gKiAgICAgIGluc3RhbmNlIGhhcyBub3QgYmVlbiBjcmVhdGVkLiBVc2UgdGhpcyBwcm9wZXJ0eSBpZiB0aGUgY2FsbGVyIHNob3VsZFxuICogICAgICBcImRvIG5vdGhpbmdcIiBpZiB0aGVyZSBhcmUgbm8gdGVzdGluZyBob29rcyByZWdpc3RlcmVkLCBzdWNoIGFzIHdoZW5cbiAqICAgICAgZGVsaXZlcmluZyBhbiBldmVudCB0byBub3RpZnkgcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gKiAyLiBUaGUgYGdldE9yQ3JlYXRlSW5zdGFuY2UoKWAgbWV0aG9kLCB3aGljaCBjcmVhdGVzIHRoZSBnbG9iYWwgc2luZ2xldG9uXG4gKiAgICAgIGluc3RhbmNlIGlmIGl0IGhhcyBub3QgYmVlbiBjcmVhdGVkLiBVc2UgdGhpcyBtZXRob2QgaWYgdGhlIGluc3RhbmNlIGlzXG4gKiAgICAgIG5lZWRlZCB0bywgZm9yIGV4YW1wbGUsIHJlZ2lzdGVyIGEgY2FsbGJhY2suXG4gKlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIGNpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzID0gbmV3IE1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MsIG9yIG51bGwgaWYgaXQgaGFzIG5vdCBiZWVuXG4gICAgICogaW5pdGlhbGl6ZWQuXG4gICAgICovICAgIHN0YXRpYyBnZXQgaW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBhaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MsIGNyZWF0aW5nIGl0IGlmIGlzIGhhcyBuZXZlclxuICAgICAqIGJlZW4gY3JlYXRlZCBiZWZvcmUuXG4gICAgICovICAgIHN0YXRpYyBnZXRPckNyZWF0ZUluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gYWkgJiYgKGFpID0gbmV3IGNpKSwgYWk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIG5vdGlmaWVkIHdoZW4gYW4gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaFxuICAgICAqIG9jY3VycyBpbiB0aGUgV2F0Y2ggbGlzdGVuIHN0cmVhbS5cbiAgICAgKlxuICAgICAqIFRoZSByZWxhdGl2ZSBvcmRlciBpbiB3aGljaCBjYWxsYmFja3MgYXJlIG5vdGlmaWVkIGlzIHVuc3BlY2lmaWVkOyBkbyBub3RcbiAgICAgKiByZWx5IG9uIGFueSBwYXJ0aWN1bGFyIG9yZGVyaW5nLiBJZiBhIGdpdmVuIGNhbGxiYWNrIGlzIHJlZ2lzdGVyZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aGVuIGl0IHdpbGwgYmUgbm90aWZpZWQgbXVsdGlwbGUgdGltZXMsIG9uY2UgcGVyIHJlZ2lzdHJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gaW52b2tlIHVwb24gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgdW5yZWdpc3RlcnMgdGhlIGdpdmVuIGNhbGxiYWNrOyBvbmx5XG4gICAgICogdGhlIGZpcnN0IGludm9jYXRpb24gb2YgdGhlIHJldHVybmVkIGZ1bmN0aW9uIGRvZXMgYW55dGhpbmc7IGFsbCBzdWJzZXF1ZW50XG4gICAgICogaW52b2NhdGlvbnMgZG8gbm90aGluZy5cbiAgICAgKi8gICAgb25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBTeW1ib2woKTtcbiAgICAgICAgcmV0dXJuIHRoaXMub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaENhbGxiYWNrcy5zZXQoZSwgdCksICgpID0+IHRoaXMub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaENhbGxiYWNrcy5kZWxldGUoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZXMgYWxsIGN1cnJlbnRseS1yZWdpc3RlcmVkIGBvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoYCBjYWxsYmFja3MuXG4gICAgICogQHBhcmFtIGluZm8gSW5mb3JtYXRpb24gYWJvdXQgdGhlIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guXG4gICAgICovICAgIG5vdGlmeU9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2godCkge1xuICAgICAgICB0aGlzLm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3MuZm9yRWFjaCgoZSA9PiBlKHQpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIGdsb2JhbCBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgYFRlc3RpbmdIb29rc2AuICovIGxldCBhaSA9IG51bGw7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluc3RhbmNlIG9mIHRoZSBQbGF0Zm9ybSdzICdUZXh0RW5jb2RlcicgaW1wbGVtZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gaGkoKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2Rlcjtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dERlY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgbGkgPSBuZXcgSW50ZWdlcihbIDQyOTQ5NjcyOTUsIDQyOTQ5NjcyOTUgXSwgMCk7XG5cbi8vIEhhc2ggYSBzdHJpbmcgdXNpbmcgbWQ1IGhhc2hpbmcgYWxnb3JpdGhtLlxuZnVuY3Rpb24gZmkodCkge1xuICAgIGNvbnN0IGUgPSBoaSgpLmVuY29kZSh0KSwgbiA9IG5ldyBNZDU7XG4gICAgcmV0dXJuIG4udXBkYXRlKGUpLCBuZXcgVWludDhBcnJheShuLmRpZ2VzdCgpKTtcbn1cblxuLy8gSW50ZXJwcmV0IHRoZSAxNiBieXRlcyBhcnJheSBhcyB0d28gNjQtYml0IHVuc2lnbmVkIGludGVnZXJzLCBlbmNvZGVkIHVzaW5nXG4vLyAy4oCZcyBjb21wbGVtZW50IHVzaW5nIGxpdHRsZSBlbmRpYW4uXG5mdW5jdGlvbiBkaSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBEYXRhVmlldyh0LmJ1ZmZlciksIG4gPSBlLmdldFVpbnQzMigwLCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgcyA9IGUuZ2V0VWludDMyKDQsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCBpID0gZS5nZXRVaW50MzIoOCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHIgPSBlLmdldFVpbnQzMigxMiwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCk7XG4gICAgcmV0dXJuIFsgbmV3IEludGVnZXIoWyBuLCBzIF0sIDApLCBuZXcgSW50ZWdlcihbIGksIHIgXSwgMCkgXTtcbn1cblxuY2xhc3Mgd2kge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKHRoaXMuYml0bWFwID0gdCwgdGhpcy5wYWRkaW5nID0gZSwgdGhpcy5oYXNoQ291bnQgPSBuLCBlIDwgMCB8fCBlID49IDgpIHRocm93IG5ldyBfaShgSW52YWxpZCBwYWRkaW5nOiAke2V9YCk7XG4gICAgICAgIGlmIChuIDwgMCkgdGhyb3cgbmV3IF9pKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKHQubGVuZ3RoID4gMCAmJiAwID09PSB0aGlzLmhhc2hDb3VudCkgXG4gICAgICAgIC8vIE9ubHkgZW1wdHkgYmxvb20gZmlsdGVyIGNhbiBoYXZlIDAgaGFzaCBjb3VudC5cbiAgICAgICAgdGhyb3cgbmV3IF9pKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoICYmIDAgIT09IGUpIFxuICAgICAgICAvLyBFbXB0eSBibG9vbSBmaWx0ZXIgc2hvdWxkIGhhdmUgMCBwYWRkaW5nLlxuICAgICAgICB0aHJvdyBuZXcgX2koYEludmFsaWQgcGFkZGluZyB3aGVuIGJpdG1hcCBsZW5ndGggaXMgMDogJHtlfWApO1xuICAgICAgICB0aGlzLkl0ID0gOCAqIHQubGVuZ3RoIC0gZSwgXG4gICAgICAgIC8vIFNldCB0aGUgYml0IGNvdW50IGluIEludGVnZXIgdG8gYXZvaWQgcmVwZXRpdGlvbiBpbiBtaWdodENvbnRhaW4oKS5cbiAgICAgICAgdGhpcy5UdCA9IEludGVnZXIuZnJvbU51bWJlcih0aGlzLkl0KTtcbiAgICB9XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBpdGggaGFzaCB2YWx1ZSBiYXNlZCBvbiB0aGUgaGFzaGVkIDY0Yml0IGludGVnZXJzLFxuICAgIC8vIGFuZCBjYWxjdWxhdGUgaXRzIGNvcnJlc3BvbmRpbmcgYml0IGluZGV4IGluIHRoZSBiaXRtYXAgdG8gYmUgY2hlY2tlZC5cbiAgICBFdCh0LCBlLCBuKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBoYXNoZWQgdmFsdWUgaChpKSA9IGgxICsgKGkgKiBoMikuXG4gICAgICAgIGxldCBzID0gdC5hZGQoZS5tdWx0aXBseShJbnRlZ2VyLmZyb21OdW1iZXIobikpKTtcbiAgICAgICAgLy8gV3JhcCBpZiBoYXNoIHZhbHVlIG92ZXJmbG93IDY0Yml0LlxuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSBzLmNvbXBhcmUobGkpICYmIChzID0gbmV3IEludGVnZXIoWyBzLmdldEJpdHMoMCksIHMuZ2V0Qml0cygxKSBdLCAwKSksIFxuICAgICAgICBzLm1vZHVsbyh0aGlzLlR0KS50b051bWJlcigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gd2hldGhlciB0aGUgYml0IG9uIHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgYml0bWFwIGlzIHNldCB0byAxLlxuICAgIEF0KHQpIHtcbiAgICAgICAgcmV0dXJuIDAgIT0gKHRoaXMuYml0bWFwW01hdGguZmxvb3IodCAvIDgpXSAmIDEgPDwgdCAlIDgpO1xuICAgIH1cbiAgICB2dCh0KSB7XG4gICAgICAgIC8vIEVtcHR5IGJpdG1hcCBzaG91bGQgYWx3YXlzIHJldHVybiBmYWxzZSBvbiBtZW1iZXJzaGlwIGNoZWNrLlxuICAgICAgICBpZiAoMCA9PT0gdGhpcy5JdCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gZmkodCksIFtuLCBzXSA9IGRpKGUpO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMuaGFzaENvdW50OyB0KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkV0KG4sIHMsIHQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLkF0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlIGJsb29tIGZpbHRlciBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LiAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHQgJSA4ID09IDAgPyAwIDogOCAtIHQgJSA4LCBpID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKHQgLyA4KSksIHIgPSBuZXcgd2koaSwgcywgZSk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4gci5pbnNlcnQodCkpKSwgcjtcbiAgICB9XG4gICAgaW5zZXJ0KHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuSXQpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IGZpKHQpLCBbbiwgc10gPSBkaShlKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLmhhc2hDb3VudDsgdCsrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5FdChuLCBzLCB0KTtcbiAgICAgICAgICAgIHRoaXMuUnQoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUnQodCkge1xuICAgICAgICBjb25zdCBlID0gTWF0aC5mbG9vcih0IC8gOCksIG4gPSB0ICUgODtcbiAgICAgICAgdGhpcy5iaXRtYXBbZV0gfD0gMSA8PCBuO1xuICAgIH1cbn1cblxuY2xhc3MgX2kgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmxvb21GaWx0ZXJFcnJvclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXZlbnQgZnJvbSB0aGUgUmVtb3RlU3RvcmUuIEl0IGlzIHNwbGl0IGludG8gdGFyZ2V0Q2hhbmdlcyAoY2hhbmdlcyB0byB0aGVcbiAqIHN0YXRlIG9yIHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIG91ciB3YXRjaGVkIHRhcmdldHMpIGFuZCBkb2N1bWVudFVwZGF0ZXNcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cbiAqLyBjbGFzcyBtaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHNuYXBzaG90IHZlcnNpb24gdGhpcyBldmVudCBicmluZ3MgdXMgdXAgdG8sIG9yIE1JTiBpZiBub3Qgc2V0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0YXJnZXRzIHRoYXQgaXMga25vd24gdG8gYmUgaW5jb25zaXN0ZW50LCBhbmQgdGhlIHB1cnBvc2UgZm9yXG4gICAgICogcmUtbGlzdGVuaW5nLiBMaXN0ZW5zIGZvciB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0XG4gICAgICogcmVzdW1lIHRva2Vucy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcbiAgICAgKiBkb2MncyBuZXcgdmFsdWVzIChpZiBub3QgZGVsZXRlZCkuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSB0LCB0aGlzLnRhcmdldENoYW5nZXMgPSBlLCB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSBuLCB0aGlzLmRvY3VtZW50VXBkYXRlcyA9IHMsIFxuICAgICAgICB0aGlzLnJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIQUNLOiBWaWV3cyByZXF1aXJlIFJlbW90ZUV2ZW50cyBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdmlldyBpc1xuICAgICAqIENVUlJFTlQsIGJ1dCBzZWNvbmRhcnkgdGFicyBkb24ndCByZWNlaXZlIHJlbW90ZSBldmVudHMuIFNvIHRoaXMgbWV0aG9kIGlzXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcbiAgICAgKiBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3LCBmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudCB0YWIuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gcy5zZXQodCwgZ2kuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUsIG4pKSwgbmV3IG1pKHJ0Lm1pbigpLCBzLCBuZXcgcGUoZXQpLCBjcygpLCBncygpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyBnaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSBxdWVyeSB0byBiZSByZXN1bWVkXG4gICAgICogYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0IG1hdGNoZXMgdGhlXG4gICAgICogcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaFxuICAgICAqIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIFwiY3VycmVudFwiIChzeW5jZWQpIHN0YXR1cyBvZiB0aGlzIHRhcmdldC4gTm90ZSB0aGF0IFwiY3VycmVudFwiXG4gICAgICogaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sIHRoYXQgaW1wbGllcyB0aGF0IGEgdGFyZ2V0IGlzXG4gICAgICogYm90aCB1cC10by1kYXRlIGFuZCBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoIHN0cmVhbS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgbmV3bHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYXMgcGFydCBvZlxuICAgICAqIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGJ1dCByZWNlaXZlZFxuICAgICAqIGFuIHVwZGF0ZSBkdXJpbmcgdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mIHRoaXNcbiAgICAgKiByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gdCwgdGhpcy5jdXJyZW50ID0gZSwgdGhpcy5hZGRlZERvY3VtZW50cyA9IG4sIHRoaXMubW9kaWZpZWREb2N1bWVudHMgPSBzLCBcbiAgICAgICAgdGhpcy5yZW1vdmVkRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBUYXJnZXRDaGFuZ2VzIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiBhcHBseSBhIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcgKGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50XG4gICAgICogdGFiKSBvciBmb3IgbmV3IHF1ZXJpZXMgKHRvIHJhaXNlIHNuYXBzaG90cyB3aXRoIGNvcnJlY3QgQ1VSUkVOVCBzdGF0dXMpLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBnaShuLCBlLCBncygpLCBncygpLCBncygpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGFuZ2VkIGRvY3VtZW50IGFuZCBhIGxpc3Qgb2YgdGFyZ2V0IGlkcyB0byB3aGljaCB0aGlzIGNoYW5nZVxuICogYXBwbGllcy5cbiAqXG4gKiBJZiBkb2N1bWVudCBoYXMgYmVlbiBkZWxldGVkIE5vRG9jdW1lbnQgd2lsbCBiZSBwcm92aWRlZC5cbiAqLyBjbGFzcyB5aSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgYXBwbGllcyB0byBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBpcyByZW1vdmVkIGZyb20gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBrZXkgb2YgdGhlIGRvY3VtZW50IGZvciB0aGlzIGNoYW5nZS4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGRvY3VtZW50IG9yIE5vRG9jdW1lbnQgaWYgaXQgd2FzIGRlbGV0ZWQuIElzIG51bGwgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgd2VudCBvdXQgb2YgdmlldyB3aXRob3V0IHRoZSBzZXJ2ZXIgc2VuZGluZyBhIG5ldyBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuUHQgPSB0LCB0aGlzLnJlbW92ZWRUYXJnZXRJZHMgPSBlLCB0aGlzLmtleSA9IG4sIHRoaXMuYnQgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgcGkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuVnQgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgSWkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBXaGF0IGtpbmQgb2YgY2hhbmdlIG9jY3VycmVkIHRvIHRoZSB3YXRjaCB0YXJnZXQuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSB0YXJnZXQgSURzIHRoYXQgd2VyZSBhZGRlZC9yZW1vdmVkL3NldC4gKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIG4gPSBWZS5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKiBBbiBSUEMgZXJyb3IgaW5kaWNhdGluZyB3aHkgdGhlIHdhdGNoIGZhaWxlZC4gKi8gLCBzID0gbnVsbCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gdCwgdGhpcy50YXJnZXRJZHMgPSBlLCB0aGlzLnJlc3VtZVRva2VuID0gbiwgdGhpcy5jYXVzZSA9IHM7XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIHRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldC4gKi8gY2xhc3MgVGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyAoYWRkcyBvciByZW1vdmVzKSB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLlxuICAgICAgICAgKiBXZSBvbmx5IGNvbnNpZGVyIHRhcmdldHMgYWN0aXZlIHRoYXQgaGF2ZSBubyBwZW5kaW5nIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuU3QgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAgICAgKiBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcyBhZ2FpbnN0IHRoZSBsYXN0IGlzc3VlZCBzbmFwc2hvdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRHQgPSB2aSgpLCBcbiAgICAgICAgLyoqIFNlZSBwdWJsaWMgZ2V0dGVycyBmb3IgZXhwbGFuYXRpb25zIG9mIHRoZXNlIGZpZWxkcy4gKi9cbiAgICAgICAgdGhpcy5DdCA9IFZlLkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLnh0ID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5OdCA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy54dDtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5DdDtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCBrdCgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMuU3Q7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IE10KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5OdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICAkdCh0KSB7XG4gICAgICAgIHQuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy5OdCA9ICEwLCB0aGlzLkN0ID0gdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgT3QoKSB7XG4gICAgICAgIGxldCB0ID0gZ3MoKSwgZSA9IGdzKCksIG4gPSBncygpO1xuICAgICAgICByZXR1cm4gdGhpcy5EdC5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICB0ID0gdC5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIGUgPSBlLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBPKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgbmV3IGdpKHRoaXMuQ3QsIHRoaXMueHQsIHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGRvY3VtZW50IGNoYW5nZXMgYW5kIHNldHMgYGhhc1BlbmRpbmdDaGFuZ2VzYCB0byBmYWxzZS5cbiAgICAgKi8gICAgRnQoKSB7XG4gICAgICAgIHRoaXMuTnQgPSAhMSwgdGhpcy5EdCA9IHZpKCk7XG4gICAgfVxuICAgIEJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5OdCA9ICEwLCB0aGlzLkR0ID0gdGhpcy5EdC5pbnNlcnQodCwgZSk7XG4gICAgfVxuICAgIEx0KHQpIHtcbiAgICAgICAgdGhpcy5OdCA9ICEwLCB0aGlzLkR0ID0gdGhpcy5EdC5yZW1vdmUodCk7XG4gICAgfVxuICAgIHF0KCkge1xuICAgICAgICB0aGlzLlN0ICs9IDE7XG4gICAgfVxuICAgIFV0KCkge1xuICAgICAgICB0aGlzLlN0IC09IDE7XG4gICAgfVxuICAgIEt0KCkge1xuICAgICAgICB0aGlzLk50ID0gITAsIHRoaXMueHQgPSAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cbiAqL1xuY2xhc3MgRWkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5HdCA9IHQsIFxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXG4gICAgICAgIHRoaXMuUXQgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC4gKi9cbiAgICAgICAgdGhpcy5qdCA9IGNzKCksIFxuICAgICAgICAvKiogQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleXMgdG8gdGhlaXIgc2V0IG9mIHRhcmdldCBJRHMuICovXG4gICAgICAgIHRoaXMuenQgPSBBaSgpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwIG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuV3QgPSBuZXcgcGUoZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgIEh0KHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuUHQpIHQuYnQgJiYgdC5idC5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMuSnQoZSwgdC5idCkgOiB0aGlzLll0KGUsIHQua2V5LCB0LmJ0KTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQucmVtb3ZlZFRhcmdldElkcykgdGhpcy5ZdChlLCB0LmtleSwgdC5idCk7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICBYdCh0KSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldCh0LCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5adChlKTtcbiAgICAgICAgICAgIHN3aXRjaCAodC5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy50ZShlKSAmJiBuLiR0KHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uVXQoKSwgbi5rdCB8fCBcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBoYWQgcHJldmlvdXNseS4gVGhpcyBjYW4gaGFwcGVuIGUuZy4gd2hlbiByZW1vdmUgYW5kIGFkZFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgYSB0YXJnZXQgZm9yIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICBuLkZ0KCksIG4uJHQodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uVXQoKSwgbi5rdCB8fCB0aGlzLnJlbW92ZVRhcmdldChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLnRlKGUpICYmIChuLkt0KCksIG4uJHQodC5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLnRlKGUpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLmVlKGUpLCBuLiR0KHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIE8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGFsbCB0YXJnZXRJZHMgdGhhdCB0aGUgd2F0Y2ggY2hhbmdlIGFwcGxpZXMgdG86IGVpdGhlciB0aGVcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcbiAgICAgKiBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHQudGFyZ2V0SWRzLmxlbmd0aCA+IDAgPyB0LnRhcmdldElkcy5mb3JFYWNoKGUpIDogdGhpcy5RdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy50ZShuKSAmJiBlKG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZXhpc3RlbmNlIGZpbHRlcnMgYW5kIHN5bnRoZXNpemVzIGRlbGV0ZXMgZm9yIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXG4gICAgICogYHBlbmRpbmdUYXJnZXRSZXNldHNgLlxuICAgICAqLyAgICBuZSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gdC50YXJnZXRJZCwgcyA9IHQuVnQuY291bnQsIGkgPSB0aGlzLnNlKG4pO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgY29uc3QgciA9IGkudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKEZuKHIpKSBpZiAoMCA9PT0gcykge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBodChyLnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuWXQobiwgdCwgYW4ubmV3Tm9Eb2N1bWVudCh0LCBydC5taW4oKSkpO1xuICAgICAgICAgICAgfSBlbHNlIEYoMSA9PT0gcyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmllKG4pO1xuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guIE1hcmsgdGhlIGRvY3VtZW50cyBhcyBiZWluZyBpbiBsaW1ibywgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmFpc2UgYSBzbmFwc2hvdCB3aXRoIGBpc0Zyb21DYWNoZTp0cnVlYC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgYmxvb20gZmlsdGVyIHRvIGlkZW50aWZ5IGFuZCBtYXJrIHJlbW92ZWQgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5yZSh0LCBpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovICE9PSBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBibG9vbSBmaWx0ZXIgYXBwbGljYXRpb24gZmFpbHMsIHdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciByZS1ydW4gb2YgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZShuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLyA9PT0gcyA/IFwiVGFyZ2V0UHVycG9zZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb21cIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb20gKi8gOiBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi87XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLld0ID0gdGhpcy5XdC5pbnNlcnQobiwgdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gKGUgPSBjaS5pbnN0YW5jZSkgfHwgdm9pZCAwID09PSBlIHx8IGUubm90aWZ5T25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaChmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcywgaSwgciwgbywgdSwgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxDYWNoZUNvdW50OiBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0ZW5jZUZpbHRlckNvdW50OiBuLmNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBoID0gbi51bmNoYW5nZWROYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGggJiYgKGEuYmxvb21GaWx0ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGllZDogMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gPT09IHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaENvdW50OiBudWxsICE9PSAocyA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguaGFzaENvdW50KSAmJiB2b2lkIDAgIT09IHMgPyBzIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRtYXBMZW5ndGg6IG51bGwgIT09IChvID0gbnVsbCA9PT0gKHIgPSBudWxsID09PSAoaSA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguYml0cykgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaXRtYXApIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIubGVuZ3RoKSAmJiB2b2lkIDAgIT09IG8gPyBvIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBudWxsICE9PSAoYyA9IG51bGwgPT09ICh1ID0gbnVsbCA9PSBoID8gdm9pZCAwIDogaC5iaXRzKSB8fCB2b2lkIDAgPT09IHUgPyB2b2lkIDAgOiB1LnBhZGRpbmcpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChzLCBpLCB0LlZ0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGx5IGJsb29tIGZpbHRlciB0byByZW1vdmUgdGhlIGRlbGV0ZWQgZG9jdW1lbnRzLCBhbmQgcmV0dXJuIHRoZVxuICAgICAqIGFwcGxpY2F0aW9uIHN0YXR1cy5cbiAgICAgKi8gICAgcmUodCwgZSkge1xuICAgICAgICBjb25zdCB7dW5jaGFuZ2VkTmFtZXM6IG4sIGNvdW50OiBzfSA9IHQuVnQ7XG4gICAgICAgIGlmICghbiB8fCAhbi5iaXRzKSByZXR1cm4gMSAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlNraXBwZWQgKi87XG4gICAgICAgIGNvbnN0IHtiaXRzOiB7Yml0bWFwOiBpID0gXCJcIiwgcGFkZGluZzogciA9IDB9LCBoYXNoQ291bnQ6IG8gPSAwfSA9IG47XG4gICAgICAgIGxldCB1LCBjO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdSA9IHhlKGkpLnRvVWludDhBcnJheSgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFBlKSByZXR1cm4gTShcIkRlY29kaW5nIHRoZSBiYXNlNjQgYmxvb20gZmlsdGVyIGluIGV4aXN0ZW5jZSBmaWx0ZXIgZmFpbGVkIChcIiArIHQubWVzc2FnZSArIFwiKTsgaWdub3JpbmcgdGhlIGJsb29tIGZpbHRlciBhbmQgZmFsbGluZyBiYWNrIHRvIGZ1bGwgcmUtcXVlcnkuXCIpLCBcbiAgICAgICAgICAgIDEgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovO1xuICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQmxvb21GaWx0ZXIgdGhyb3dzIGVycm9yIGlmIHRoZSBpbnB1dHMgYXJlIGludmFsaWQuXG4gICAgICAgICAgICBjID0gbmV3IHdpKHUsIHIsIG8pO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gTSh0IGluc3RhbmNlb2YgX2kgPyBcIkJsb29tRmlsdGVyIGVycm9yOiBcIiA6IFwiQXBwbHlpbmcgYmxvb20gZmlsdGVyIGZhaWxlZDogXCIsIHQpLCBcbiAgICAgICAgICAgIDEgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICgwID09PSBjLkl0KSByZXR1cm4gMSAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlNraXBwZWQgKi87XG4gICAgICAgIHJldHVybiBzICE9PSBlIC0gdGhpcy5vZSh0LnRhcmdldElkLCBjKSA/IDIgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5GYWxzZVBvc2l0aXZlICovIDogMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbHRlciBvdXQgcmVtb3ZlZCBkb2N1bWVudHMgYmFzZWQgb24gYmxvb20gZmlsdGVyIG1lbWJlcnNoaXAgcmVzdWx0IGFuZFxuICAgICAqIHJldHVybiBudW1iZXIgb2YgZG9jdW1lbnRzIHJlbW92ZWQuXG4gICAgICovICAgIG9lKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuR3QuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KTtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLkd0LnVlKCksIHIgPSBgcHJvamVjdHMvJHtpLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7aS5kYXRhYmFzZX0vZG9jdW1lbnRzLyR7bi5wYXRoLmNhbm9uaWNhbFN0cmluZygpfWA7XG4gICAgICAgICAgICBlLnZ0KHIpIHx8ICh0aGlzLll0KHQsIG4sIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpLCBzKyspO1xuICAgICAgICB9KSksIHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50bHkgYWNjdW11bGF0ZWQgc3RhdGUgaW50byBhIHJlbW90ZSBldmVudCBhdCB0aGVcbiAgICAgKiBwcm92aWRlZCBzbmFwc2hvdCB2ZXJzaW9uLiBSZXNldHMgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYmVmb3JlIHJldHVybmluZy5cbiAgICAgKi8gICAgY2UodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5RdC5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuc2Uocyk7XG4gICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgIGlmIChuLmN1cnJlbnQgJiYgRm4oaS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50IHF1ZXJpZXMgZm9yIGRvY3VtZW50IHRoYXQgZG9uJ3QgZXhpc3QgY2FuIHByb2R1Y2UgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IHNldC4gVG8gdXBkYXRlIG91ciBsb2NhbCBjYWNoZSwgd2Ugc3ludGhlc2l6ZSBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudC4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgbGltYm8gc3RhdGUgb2YgdGhlIGRvY3VtZW50LCByZW1vdmluZyBpdCBmcm9tXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpbWJvRG9jdW1lbnRSZWZzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElkZWFsbHkgd2Ugd291bGQgaGF2ZSBhbiBleHBsaWNpdCBsb29rdXAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgcmVzdWx0aW5nIGluIGFuIGV4cGxpY2l0IGRlbGV0ZSBtZXNzYWdlIGFuZCB3ZSBjb3VsZFxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBzcGVjaWFsIGxvZ2ljLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IGh0KGkudGFyZ2V0LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLmp0LmdldChlKSB8fCB0aGlzLmFlKHMsIGUpIHx8IHRoaXMuWXQocywgZSwgYW4ubmV3Tm9Eb2N1bWVudChlLCB0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG4uTXQgJiYgKGUuc2V0KHMsIG4uT3QoKSksIG4uRnQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IG4gPSBncygpO1xuICAgICAgICAvLyBXZSBleHRyYWN0IHRoZSBzZXQgb2YgbGltYm8tb25seSBkb2N1bWVudCB1cGRhdGVzIGFzIHRoZSBHQyBsb2dpY1xuICAgICAgICAvLyBzcGVjaWFsLWNhc2VzIGRvY3VtZW50cyB0aGF0IGRvIG5vdCBhcHBlYXIgaW4gdGhlIHRhcmdldCBjYWNoZS5cbiAgICAgICAgXG4gICAgICAgIC8vIFRPRE8oZ3NvbHRpcyk6IEV4cGFuZCBvbiB0aGlzIGNvbW1lbnQgb25jZSBHQyBpcyBhdmFpbGFibGUgaW4gdGhlIEpTXG4gICAgICAgIC8vIGNsaWVudC5cbiAgICAgICAgICAgICAgICB0aGlzLnp0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgZS5mb3JFYWNoV2hpbGUoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnNlKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZSB8fCBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyA9PT0gZS5wdXJwb3NlIHx8IChzID0gITEsIFxuICAgICAgICAgICAgICAgICExKTtcbiAgICAgICAgICAgIH0pKSwgcyAmJiAobiA9IG4uYWRkKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLmp0LmZvckVhY2goKChlLCBuKSA9PiBuLnNldFJlYWRUaW1lKHQpKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgbWkodCwgZSwgdGhpcy5XdCwgdGhpcy5qdCwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLmp0ID0gY3MoKSwgdGhpcy56dCA9IEFpKCksIHRoaXMuV3QgPSBuZXcgcGUoZXQpLCBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBKdCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy50ZSh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5hZSh0LCBlLmtleSkgPyAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi87XG4gICAgICAgIHRoaXMuWnQodCkuQnQoZS5rZXksIG4pLCB0aGlzLmp0ID0gdGhpcy5qdC5pbnNlcnQoZS5rZXksIGUpLCB0aGlzLnp0ID0gdGhpcy56dC5pbnNlcnQoZS5rZXksIHRoaXMuaGUoZS5rZXkpLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIFl0KHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRlKHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLlp0KHQpO1xuICAgICAgICB0aGlzLmFlKHQsIGUpID8gcy5CdChlLCAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICBzLkx0KGUpLCB0aGlzLnp0ID0gdGhpcy56dC5pbnNlcnQoZSwgdGhpcy5oZShlKS5kZWxldGUodCkpLCBuICYmICh0aGlzLmp0ID0gdGhpcy5qdC5pbnNlcnQoZSwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCkge1xuICAgICAgICB0aGlzLlF0LmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgaWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5adCh0KS5PdCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5HdC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLnNpemUgKyBlLmFkZGVkRG9jdW1lbnRzLnNpemUgLSBlLnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxuICAgICAqIHNlcnZlciB0byBiZSAnaW4tc3luYycgd2l0aCB0aGUgY2xpZW50J3MgYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIHF0KHQpIHtcbiAgICAgICAgdGhpcy5adCh0KS5xdCgpO1xuICAgIH1cbiAgICBadCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5RdC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IFRpLCB0aGlzLlF0LnNldCh0LCBlKSksIGU7XG4gICAgfVxuICAgIGhlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnp0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgRWUoZXQpLCB0aGlzLnp0ID0gdGhpcy56dC5pbnNlcnQodCwgZSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICB0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsICE9PSB0aGlzLnNlKHQpO1xuICAgICAgICByZXR1cm4gZSB8fCBOKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsIFwiRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0XCIsIHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICBzZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlF0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgJiYgZS5rdCA/IG51bGwgOiB0aGlzLkd0LmxlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0IHRvIGl0cyBpbml0aWFsIHN0YXRlIChlLmcuIHNldHNcbiAgICAgKiAnY3VycmVudCcgdG8gZmFsc2UsIGNsZWFycyB0aGUgcmVzdW1lIHRva2VuIGFuZCByZW1vdmVzIGl0cyB0YXJnZXQgbWFwcGluZ1xuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXG4gICAgICovICAgIGVlKHQpIHtcbiAgICAgICAgdGhpcy5RdC5zZXQodCwgbmV3IFRpKTtcbiAgICAgICAgdGhpcy5HdC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5ZdCh0LCBlLCAvKnVwZGF0ZWREb2N1bWVudD0qLyBudWxsKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRoZSBkb2N1bWVudCB0byBiZSBwYXJ0IG9mIHRoZVxuICAgICAqIHNwZWNpZmllZCB0YXJnZXQuXG4gICAgICovICAgIGFlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuR3QuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5oYXMoZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBBaSgpIHtcbiAgICByZXR1cm4gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xufVxuXG5mdW5jdGlvbiB2aSgpIHtcbiAgICByZXR1cm4gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xufVxuXG5jb25zdCBSaSA9ICgoKSA9PiB7XG4gICAgY29uc3QgdCA9IHtcbiAgICAgICAgYXNjOiBcIkFTQ0VORElOR1wiLFxuICAgICAgICBkZXNjOiBcIkRFU0NFTkRJTkdcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpLCBQaSA9ICgoKSA9PiB7XG4gICAgY29uc3QgdCA9IHtcbiAgICAgICAgXCI8XCI6IFwiTEVTU19USEFOXCIsXG4gICAgICAgIFwiPD1cIjogXCJMRVNTX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI+XCI6IFwiR1JFQVRFUl9USEFOXCIsXG4gICAgICAgIFwiPj1cIjogXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI9PVwiOiBcIkVRVUFMXCIsXG4gICAgICAgIFwiIT1cIjogXCJOT1RfRVFVQUxcIixcbiAgICAgICAgXCJhcnJheS1jb250YWluc1wiOiBcIkFSUkFZX0NPTlRBSU5TXCIsXG4gICAgICAgIGluOiBcIklOXCIsXG4gICAgICAgIFwibm90LWluXCI6IFwiTk9UX0lOXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnMtYW55XCI6IFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgYmkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFuZDogXCJBTkRcIixcbiAgICAgICAgb3I6IFwiT1JcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgVmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy51c2VQcm90bzNKc29uID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovXG5mdW5jdGlvbiBTaSh0LCBlKSB7XG4gICAgcmV0dXJuIHQudXNlUHJvdG8zSnNvbiB8fCBGdChlKSA/IGUgOiB7XG4gICAgICAgIHZhbHVlOiBlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKi9cbmZ1bmN0aW9uIERpKHQsIGUpIHtcbiAgICBpZiAodC51c2VQcm90bzNKc29uKSB7XG4gICAgICAgIHJldHVybiBgJHtuZXcgRGF0ZSgxZTMgKiBlLnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sIFwiXCIpLnJlcGxhY2UoXCJaXCIsIFwiXCIpfS4keyhcIjAwMDAwMDAwMFwiICsgZS5uYW5vc2Vjb25kcykuc2xpY2UoLTkpfVpgO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBcIlwiICsgZS5zZWNvbmRzLFxuICAgICAgICBuYW5vczogZS5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gQ2kodCwgZSkge1xuICAgIHJldHVybiB0LnVzZVByb3RvM0pzb24gPyBlLnRvQmFzZTY0KCkgOiBlLnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24geGkodCwgZSkge1xuICAgIHJldHVybiBEaSh0LCBlLnRvVGltZXN0YW1wKCkpO1xufVxuXG5mdW5jdGlvbiBOaSh0KSB7XG4gICAgcmV0dXJuIEYoISF0KSwgcnQuZnJvbVRpbWVzdGFtcChmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBpdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiBraSh0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1dChbIFwicHJvamVjdHNcIiwgdC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2UgXSk7XG4gICAgfSh0KS5jaGlsZChcImRvY3VtZW50c1wiKS5jaGlsZChlKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gTWkodCkge1xuICAgIGNvbnN0IGUgPSB1dC5mcm9tU3RyaW5nKHQpO1xuICAgIHJldHVybiBGKHVyKGUpKSwgZTtcbn1cblxuZnVuY3Rpb24gJGkodCwgZSkge1xuICAgIHJldHVybiBraSh0LmRhdGFiYXNlSWQsIGUucGF0aCk7XG59XG5cbmZ1bmN0aW9uIE9pKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTWkoZSk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSB0LmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IHByb2plY3Q6IFwiICsgbi5nZXQoMSkgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpO1xuICAgIGlmIChuLmdldCgzKSAhPT0gdC5kYXRhYmFzZUlkLmRhdGFiYXNlKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgaHQocWkobikpO1xufVxuXG5mdW5jdGlvbiBGaSh0LCBlKSB7XG4gICAgcmV0dXJuIGtpKHQuZGF0YWJhc2VJZCwgZSk7XG59XG5cbmZ1bmN0aW9uIEJpKHQpIHtcbiAgICBjb25zdCBlID0gTWkodCk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSBlLmxlbmd0aCA/IHV0LmVtcHR5UGF0aCgpIDogcWkoZSk7XG59XG5cbmZ1bmN0aW9uIExpKHQpIHtcbiAgICByZXR1cm4gbmV3IHV0KFsgXCJwcm9qZWN0c1wiLCB0LmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIHFpKHQpIHtcbiAgICByZXR1cm4gRih0Lmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gdC5nZXQoNCkpLCB0LnBvcEZpcnN0KDUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIERvY3VtZW50IHByb3RvIGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovIGZ1bmN0aW9uIFVpKHQsIGUsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiAkaSh0LCBlKSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIEtpKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gT2kodCwgZS5uYW1lKSwgaSA9IE5pKGUudXBkYXRlVGltZSksIHIgPSBlLmNyZWF0ZVRpbWUgPyBOaShlLmNyZWF0ZVRpbWUpIDogcnQubWluKCksIG8gPSBuZXcgdW4oe1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBlLmZpZWxkc1xuICAgICAgICB9XG4gICAgfSksIHUgPSBhbi5uZXdGb3VuZERvY3VtZW50KHMsIGksIHIsIG8pO1xuICAgIHJldHVybiBuICYmIHUuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyB1LnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogdTtcbn1cblxuZnVuY3Rpb24gR2kodCwgZSkge1xuICAgIHJldHVybiBcImZvdW5kXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgRighIWUuZm91bmQpLCBlLmZvdW5kLm5hbWUsIGUuZm91bmQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgbiA9IE9pKHQsIGUuZm91bmQubmFtZSksIHMgPSBOaShlLmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gZS5mb3VuZC5jcmVhdGVUaW1lID8gTmkoZS5mb3VuZC5jcmVhdGVUaW1lKSA6IHJ0Lm1pbigpLCByID0gbmV3IHVuKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmZvdW5kLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFuLm5ld0ZvdW5kRG9jdW1lbnQobiwgcywgaSwgcik7XG4gICAgfSh0LCBlKSA6IFwibWlzc2luZ1wiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEYoISFlLm1pc3NpbmcpLCBGKCEhZS5yZWFkVGltZSk7XG4gICAgICAgIGNvbnN0IG4gPSBPaSh0LCBlLm1pc3NpbmcpLCBzID0gTmkoZS5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiBhbi5uZXdOb0RvY3VtZW50KG4sIHMpO1xuICAgIH0odCwgZSkgOiBPKCk7XG59XG5cbmZ1bmN0aW9uIFFpKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk5PX0NIQU5HRVwiID09PSB0ID8gMCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLk5vQ2hhbmdlICovIDogXCJBRERcIiA9PT0gdCA/IDEgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZCAqLyA6IFwiUkVNT1ZFXCIgPT09IHQgPyAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA6IFwiQ1VSUkVOVFwiID09PSB0ID8gMyAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkN1cnJlbnQgKi8gOiBcIlJFU0VUXCIgPT09IHQgPyA0IC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVzZXQgKi8gOiBPKCk7XG4gICAgICAgIH0oZS50YXJnZXRDaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZSB8fCBcIk5PX0NIQU5HRVwiKSwgaSA9IGUudGFyZ2V0Q2hhbmdlLnRhcmdldElkcyB8fCBbXSwgciA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0LnVzZVByb3RvM0pzb24gPyAoRih2b2lkIDAgPT09IGUgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSksIFZlLmZyb21CYXNlNjRTdHJpbmcoZSB8fCBcIlwiKSkgOiAoRih2b2lkIDAgPT09IGUgfHwgZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpLCBcbiAgICAgICAgICAgIFZlLmZyb21VaW50OEFycmF5KGUgfHwgbmV3IFVpbnQ4QXJyYXkpKTtcbiAgICAgICAgfSh0LCBlLnRhcmdldENoYW5nZS5yZXN1bWVUb2tlbiksIG8gPSBlLnRhcmdldENoYW5nZS5jYXVzZSwgdSA9IG8gJiYgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHZvaWQgMCA9PT0gdC5jb2RlID8gcS5VTktOT1dOIDogdWkodC5jb2RlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVShlLCB0Lm1lc3NhZ2UgfHwgXCJcIik7XG4gICAgICAgIH0obyk7XG4gICAgICAgIG4gPSBuZXcgSWkocywgaSwgciwgdSB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBzLmRvY3VtZW50LCBzLmRvY3VtZW50Lm5hbWUsIHMuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IE9pKHQsIHMuZG9jdW1lbnQubmFtZSksIHIgPSBOaShzLmRvY3VtZW50LnVwZGF0ZVRpbWUpLCBvID0gcy5kb2N1bWVudC5jcmVhdGVUaW1lID8gTmkocy5kb2N1bWVudC5jcmVhdGVUaW1lKSA6IHJ0Lm1pbigpLCB1ID0gbmV3IHVuKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBzLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYyA9IGFuLm5ld0ZvdW5kRG9jdW1lbnQoaSwgciwgbywgdSksIGEgPSBzLnRhcmdldElkcyB8fCBbXSwgaCA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB5aShhLCBoLCBjLmtleSwgYyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50RGVsZXRlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IE9pKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZWFkVGltZSA/IE5pKHMucmVhZFRpbWUpIDogcnQubWluKCksIG8gPSBhbi5uZXdOb0RvY3VtZW50KGksIHIpLCB1ID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IHlpKFtdLCB1LCBvLmtleSwgbyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50UmVtb3ZlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IE9pKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IHlpKFtdLCByLCBpLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIShcImZpbHRlclwiIGluIGUpKSByZXR1cm4gTygpO1xuICAgICAgICB7XG4gICAgICAgICAgICBlLmZpbHRlcjtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcjtcbiAgICAgICAgICAgIHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBjb25zdCB7Y291bnQ6IHMgPSAwLCB1bmNoYW5nZWROYW1lczogaX0gPSB0LCByID0gbmV3IHNpKHMsIGkpLCBvID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIG4gPSBuZXcgcGkobywgcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIGppKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIGpzKSBuID0ge1xuICAgICAgICB1cGRhdGU6IFVpKHQsIGUua2V5LCBlLnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBZcykgbiA9IHtcbiAgICAgICAgZGVsZXRlOiAkaSh0LCBlLmtleSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2YgenMpIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogVWkodCwgZS5rZXksIGUuZGF0YSksXG4gICAgICAgIHVwZGF0ZU1hc2s6IG9yKGUuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgWHMpKSByZXR1cm4gTygpO1xuICAgICAgICBuID0ge1xuICAgICAgICAgICAgdmVyaWZ5OiAkaSh0LCBlLmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGUuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IGUuZmllbGRUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBicykgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6IFwiUkVRVUVTVF9USU1FXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBWcykgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIERzKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgeHMpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4uZ3RcbiAgICAgICAgfTtcbiAgICAgICAgdGhyb3cgTygpO1xuICAgIH0oMCwgdCkpKSksIGUucHJlY29uZGl0aW9uLmlzTm9uZSB8fCAobi5jdXJyZW50RG9jdW1lbnQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IHtcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHhpKHQsIGUudXBkYXRlVGltZSlcbiAgICAgICAgfSA6IHZvaWQgMCAhPT0gZS5leGlzdHMgPyB7XG4gICAgICAgICAgICBleGlzdHM6IGUuZXhpc3RzXG4gICAgICAgIH0gOiBPKCk7XG4gICAgfSh0LCBlLnByZWNvbmRpdGlvbikpLCBuO1xufVxuXG5mdW5jdGlvbiB6aSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUuY3VycmVudERvY3VtZW50ID8gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyBGcy51cGRhdGVUaW1lKE5pKHQudXBkYXRlVGltZSkpIDogdm9pZCAwICE9PSB0LmV4aXN0cyA/IEZzLmV4aXN0cyh0LmV4aXN0cykgOiBGcy5ub25lKCk7XG4gICAgfShlLmN1cnJlbnREb2N1bWVudCkgOiBGcy5ub25lKCksIHMgPSBlLnVwZGF0ZVRyYW5zZm9ybXMgPyBlLnVwZGF0ZVRyYW5zZm9ybXMubWFwKChlID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICBpZiAoXCJzZXRUb1NlcnZlclZhbHVlXCIgaW4gZSkgRihcIlJFUVVFU1RfVElNRVwiID09PSBlLnNldFRvU2VydmVyVmFsdWUpLCBuID0gbmV3IGJzOyBlbHNlIGlmIChcImFwcGVuZE1pc3NpbmdFbGVtZW50c1wiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmFwcGVuZE1pc3NpbmdFbGVtZW50cy52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IFZzKHQpO1xuICAgICAgICB9IGVsc2UgaWYgKFwicmVtb3ZlQWxsRnJvbUFycmF5XCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUucmVtb3ZlQWxsRnJvbUFycmF5LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgRHModCk7XG4gICAgICAgIH0gZWxzZSBcImluY3JlbWVudFwiIGluIGUgPyBuID0gbmV3IHhzKHQsIGUuaW5jcmVtZW50KSA6IE8oKTtcbiAgICAgICAgY29uc3QgcyA9IGF0LmZyb21TZXJ2ZXJGb3JtYXQoZS5maWVsZFBhdGgpO1xuICAgICAgICByZXR1cm4gbmV3IE1zKHMsIG4pO1xuICAgIH0odCwgZSkpKSA6IFtdO1xuICAgIGlmIChlLnVwZGF0ZSkge1xuICAgICAgICBlLnVwZGF0ZS5uYW1lO1xuICAgICAgICBjb25zdCBpID0gT2kodCwgZS51cGRhdGUubmFtZSksIHIgPSBuZXcgdW4oe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUudXBkYXRlLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGUudXBkYXRlTWFzaykge1xuICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5maWVsZFBhdGhzIHx8IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmUoZS5tYXAoKHQgPT4gYXQuZnJvbVNlcnZlckZvcm1hdCh0KSkpKTtcbiAgICAgICAgICAgIH0oZS51cGRhdGVNYXNrKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgenMoaSwgciwgdCwgbiwgcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBqcyhpLCByLCBuLCBzKTtcbiAgICB9XG4gICAgaWYgKGUuZGVsZXRlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBPaSh0LCBlLmRlbGV0ZSk7XG4gICAgICAgIHJldHVybiBuZXcgWXMocywgbik7XG4gICAgfVxuICAgIGlmIChlLnZlcmlmeSkge1xuICAgICAgICBjb25zdCBzID0gT2kodCwgZS52ZXJpZnkpO1xuICAgICAgICByZXR1cm4gbmV3IFhzKHMsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gTygpO1xufVxuXG5mdW5jdGlvbiBXaSh0LCBlKSB7XG4gICAgcmV0dXJuIHQgJiYgdC5sZW5ndGggPiAwID8gKEYodm9pZCAwICE9PSBlKSwgdC5tYXAoKHQgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cbiAgICAgICAgbGV0IG4gPSB0LnVwZGF0ZVRpbWUgPyBOaSh0LnVwZGF0ZVRpbWUpIDogTmkoZSk7XG4gICAgICAgIHJldHVybiBuLmlzRXF1YWwocnQubWluKCkpICYmIChcbiAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxuICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcbiAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcbiAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXG4gICAgICAgIG4gPSBOaShlKSksIG5ldyBPcyhuLCB0LnRyYW5zZm9ybVJlc3VsdHMgfHwgW10pO1xuICAgIH0odCwgZSkpKSkgOiBbXTtcbn1cblxuZnVuY3Rpb24gSGkodCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvY3VtZW50czogWyBGaSh0LCBlLnBhdGgpIF1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBKaSh0LCBlKSB7XG4gICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cbiAgICBjb25zdCBuID0ge1xuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHt9XG4gICAgfSwgcyA9IGUucGF0aDtcbiAgICBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCA/IChuLnBhcmVudCA9IEZpKHQsIHMpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogZS5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgIGFsbERlc2NlbmRhbnRzOiAhMFxuICAgIH0gXSkgOiAobi5wYXJlbnQgPSBGaSh0LCBzLnBvcExhc3QoKSksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiBzLmxhc3RTZWdtZW50KClcbiAgICB9IF0pO1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gcnIoZ24uY3JlYXRlKHQsIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKSk7XG4gICAgfShlLmZpbHRlcnMpO1xuICAgIGkgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LndoZXJlID0gaSk7XG4gICAgY29uc3QgciA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiB0Lm1hcCgodCA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHRyKHQuZGlyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSkpO1xuICAgIH0oZS5vcmRlckJ5KTtcbiAgICByICYmIChuLnN0cnVjdHVyZWRRdWVyeS5vcmRlckJ5ID0gcik7XG4gICAgY29uc3QgbyA9IFNpKHQsIGUubGltaXQpO1xuICAgIHZhciB1O1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCBlLnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSB7XG4gICAgICAgIGJlZm9yZTogKHUgPSBlLnN0YXJ0QXQpLmluY2x1c2l2ZSxcbiAgICAgICAgdmFsdWVzOiB1LnBvc2l0aW9uXG4gICAgfSksIGUuZW5kQXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LmVuZEF0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmVmb3JlOiAhdC5pbmNsdXNpdmUsXG4gICAgICAgICAgICB2YWx1ZXM6IHQucG9zaXRpb25cbiAgICAgICAgfTtcbiAgICB9KGUuZW5kQXQpKSwgbjtcbn1cblxuZnVuY3Rpb24gWWkodCkge1xuICAgIGxldCBlID0gQmkodC5wYXJlbnQpO1xuICAgIGNvbnN0IG4gPSB0LnN0cnVjdHVyZWRRdWVyeSwgcyA9IG4uZnJvbSA/IG4uZnJvbS5sZW5ndGggOiAwO1xuICAgIGxldCBpID0gbnVsbDtcbiAgICBpZiAocyA+IDApIHtcbiAgICAgICAgRigxID09PSBzKTtcbiAgICAgICAgY29uc3QgdCA9IG4uZnJvbVswXTtcbiAgICAgICAgdC5hbGxEZXNjZW5kYW50cyA/IGkgPSB0LmNvbGxlY3Rpb25JZCA6IGUgPSBlLmNoaWxkKHQuY29sbGVjdGlvbklkKTtcbiAgICB9XG4gICAgbGV0IHIgPSBbXTtcbiAgICBuLndoZXJlICYmIChyID0gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gWmkodCk7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgZ24gJiYgSW4oZSkpIHJldHVybiBlLmdldEZpbHRlcnMoKTtcbiAgICAgICAgcmV0dXJuIFsgZSBdO1xuICAgIH0obi53aGVyZSkpO1xuICAgIGxldCBvID0gW107XG4gICAgbi5vcmRlckJ5ICYmIChvID0gbi5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZG4oaXIodC5maWVsZCksIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICBjYXNlIFwiQVNDRU5ESU5HXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICh0LmRpcmVjdGlvbikpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgKHQpKSkpO1xuICAgIGxldCB1ID0gbnVsbDtcbiAgICBuLmxpbWl0ICYmICh1ID0gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgcmV0dXJuIGUgPSBcIm9iamVjdFwiID09IHR5cGVvZiB0ID8gdC52YWx1ZSA6IHQsIEZ0KGUpID8gbnVsbCA6IGU7XG4gICAgfShuLmxpbWl0KSk7XG4gICAgbGV0IGMgPSBudWxsO1xuICAgIG4uc3RhcnRBdCAmJiAoYyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBobihuLCBlKTtcbiAgICB9KG4uc3RhcnRBdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICByZXR1cm4gbi5lbmRBdCAmJiAoYSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9ICF0LmJlZm9yZSwgbiA9IHQudmFsdWVzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbmV3IGhuKG4sIGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgKG4uZW5kQXQpKSwgS24oZSwgaSwgbywgciwgdSwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgYywgYSk7XG59XG5cbmZ1bmN0aW9uIFhpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwiZXhpc3RlbmNlLWZpbHRlci1taXNtYXRjaFwiO1xuXG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2gtYmxvb21cIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwibGltYm8tZG9jdW1lbnRcIjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTygpO1xuICAgICAgICB9XG4gICAgfShlLnB1cnBvc2UpO1xuICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDoge1xuICAgICAgICBcImdvb2ctbGlzdGVuLXRhZ3NcIjogblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIFppKHQpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVuYXJ5RmlsdGVyID8gZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCBlID0gaXIodC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKGUsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gaXIodC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKG4sIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OT1RfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCBzID0gaXIodC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKHMsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgICAgIGNvbnN0IGkgPSBpcih0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBtbi5jcmVhdGUoaSwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTygpO1xuICAgICAgICB9XG4gICAgfSh0KSA6IHZvaWQgMCAhPT0gdC5maWVsZEZpbHRlciA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShpcih0LmZpZWxkRmlsdGVyLmZpZWxkKSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJFUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIk5PVF9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTEVTU19USEFOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTEVTU19USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiSU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpblwiIC8qIE9wZXJhdG9yLklOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJOT1RfSU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBPKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odC5maWVsZEZpbHRlci5vcCksIHQuZmllbGRGaWx0ZXIudmFsdWUpO1xuICAgIH0odCkgOiB2b2lkIDAgIT09IHQuY29tcG9zaXRlRmlsdGVyID8gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gZ24uY3JlYXRlKHQuY29tcG9zaXRlRmlsdGVyLmZpbHRlcnMubWFwKCh0ID0+IFppKHQpKSksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICBjYXNlIFwiQU5EXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJPUlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuY29tcG9zaXRlRmlsdGVyLm9wKSk7XG4gICAgfSh0KSA6IE8oKTtcbn1cblxuZnVuY3Rpb24gdHIodCkge1xuICAgIHJldHVybiBSaVt0XTtcbn1cblxuZnVuY3Rpb24gZXIodCkge1xuICAgIHJldHVybiBQaVt0XTtcbn1cblxuZnVuY3Rpb24gbnIodCkge1xuICAgIHJldHVybiBiaVt0XTtcbn1cblxuZnVuY3Rpb24gc3IodCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZpZWxkUGF0aDogdC5jYW5vbmljYWxTdHJpbmcoKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGlyKHQpIHtcbiAgICByZXR1cm4gYXQuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG59XG5cbmZ1bmN0aW9uIHJyKHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG1uID8gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICBpZiAoWGUodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OQU5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoWWUodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgIGlmIChYZSh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogc3IodC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OQU5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoWWUodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogc3IodC5maWVsZCksXG4gICAgICAgICAgICAgICAgb3A6IGVyKHQub3ApLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSh0KSA6IHQgaW5zdGFuY2VvZiBnbiA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZ2V0RmlsdGVycygpLm1hcCgodCA9PiBycih0KSkpO1xuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBlWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9zaXRlRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgb3A6IG5yKHQub3ApLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KHQpIDogTygpO1xufVxuXG5mdW5jdGlvbiBvcih0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiB0LmZpZWxkcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0LmNhbm9uaWNhbFN0cmluZygpKSkpLCB7XG4gICAgICAgIGZpZWxkUGF0aHM6IGVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB1cih0KSB7XG4gICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxuICAgIHJldHVybiB0Lmxlbmd0aCA+PSA0ICYmIFwicHJvamVjdHNcIiA9PT0gdC5nZXQoMCkgJiYgXCJkYXRhYmFzZXNcIiA9PT0gdC5nZXQoMik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cbiAqLyBjbGFzcyBjciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gcnQubWluKClcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxuICAgICAqLyAsIHIgPSBydC5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IFZlLkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCBsYXN0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSByZXN1bWUgdG9rZW4gb3JcbiAgICAgKiByZWFkIHRpbWUuIERvY3VtZW50cyBhcmUgY291bnRlZCBvbmx5IHdoZW4gbWFraW5nIGEgbGlzdGVuIHJlcXVlc3Qgd2l0aFxuICAgICAqIHJlc3VtZSB0b2tlbiBvciByZWFkIHRpbWUsIG90aGVyd2lzZSwga2VlcCBpdCBudWxsLlxuICAgICAqLyAsIHUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMucHVycG9zZSA9IG4sIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzLCB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGksIFxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnJlc3VtZVRva2VuID0gbywgdGhpcy5leHBlY3RlZENvdW50ID0gdTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi8gICAgd2l0aFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0LCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuLCB0aGlzLmV4cGVjdGVkQ291bnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCByZXN1bWUgdG9rZW4gYW5kXG4gICAgICogc25hcHNob3QgdmVyc2lvbi5cbiAgICAgKi8gICAgd2l0aFJlc3VtZVRva2VuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCBlLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHQsIFxuICAgICAgICAvKiBleHBlY3RlZENvdW50PSAqLyBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgZXhwZWN0ZWQgY291bnQuXG4gICAgICovICAgIHdpdGhFeHBlY3RlZENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXG4gICAgICovICAgIHdpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdCwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogU2VyaWFsaXplciBmb3IgdmFsdWVzIHN0b3JlZCBpbiB0aGUgTG9jYWxTdG9yZS4gKi8gY2xhc3MgYXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5mZSA9IHQ7XG4gICAgfVxufVxuXG4vKiogRGVjb2RlcyBhIHJlbW90ZSBkb2N1bWVudCBmcm9tIHN0b3JhZ2UgbG9jYWxseSB0byBhIERvY3VtZW50LiAqLyBmdW5jdGlvbiBocih0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgaWYgKGUuZG9jdW1lbnQpIG4gPSBLaSh0LmZlLCBlLmRvY3VtZW50LCAhIWUuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTsgZWxzZSBpZiAoZS5ub0RvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHQgPSBodC5mcm9tU2VnbWVudHMoZS5ub0RvY3VtZW50LnBhdGgpLCBzID0gd3IoZS5ub0RvY3VtZW50LnJlYWRUaW1lKTtcbiAgICAgICAgbiA9IGFuLm5ld05vRG9jdW1lbnQodCwgcyksIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmIG4uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFlLnVua25vd25Eb2N1bWVudCkgcmV0dXJuIE8oKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IGh0LmZyb21TZWdtZW50cyhlLnVua25vd25Eb2N1bWVudC5wYXRoKSwgcyA9IHdyKGUudW5rbm93bkRvY3VtZW50LnZlcnNpb24pO1xuICAgICAgICAgICAgbiA9IGFuLm5ld1Vua25vd25Eb2N1bWVudCh0LCBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZS5yZWFkVGltZSAmJiBuLnNldFJlYWRUaW1lKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBpdCh0WzBdLCB0WzFdKTtcbiAgICAgICAgcmV0dXJuIHJ0LmZyb21UaW1lc3RhbXAoZSk7XG4gICAgfShlLnJlYWRUaW1lKSksIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gbHIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmtleSwgcyA9IHtcbiAgICAgICAgcHJlZml4UGF0aDogbi5nZXRDb2xsZWN0aW9uUGF0aCgpLnBvcExhc3QoKS50b0FycmF5KCksXG4gICAgICAgIGNvbGxlY3Rpb25Hcm91cDogbi5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgIGRvY3VtZW50SWQ6IG4ucGF0aC5sYXN0U2VnbWVudCgpLFxuICAgICAgICByZWFkVGltZTogZnIoZS5yZWFkVGltZSksXG4gICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogZS5oYXNDb21taXR0ZWRNdXRhdGlvbnNcbiAgICB9O1xuICAgIGlmIChlLmlzRm91bmREb2N1bWVudCgpKSBzLmRvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogJGkodCwgZS5rZXkpLFxuICAgICAgICAgICAgZmllbGRzOiBlLmRhdGEudmFsdWUubWFwVmFsdWUuZmllbGRzLFxuICAgICAgICAgICAgdXBkYXRlVGltZTogRGkodCwgZS52ZXJzaW9uLnRvVGltZXN0YW1wKCkpLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogRGkodCwgZS5jcmVhdGVUaW1lLnRvVGltZXN0YW1wKCkpXG4gICAgICAgIH07XG4gICAgfSh0LmZlLCBlKTsgZWxzZSBpZiAoZS5pc05vRG9jdW1lbnQoKSkgcy5ub0RvY3VtZW50ID0ge1xuICAgICAgICBwYXRoOiBuLnBhdGgudG9BcnJheSgpLFxuICAgICAgICByZWFkVGltZTogZHIoZS52ZXJzaW9uKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIWUuaXNVbmtub3duRG9jdW1lbnQoKSkgcmV0dXJuIE8oKTtcbiAgICAgICAgcy51bmtub3duRG9jdW1lbnQgPSB7XG4gICAgICAgICAgICBwYXRoOiBuLnBhdGgudG9BcnJheSgpLFxuICAgICAgICAgICAgdmVyc2lvbjogZHIoZS52ZXJzaW9uKVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gZnIodCkge1xuICAgIGNvbnN0IGUgPSB0LnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIFsgZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzIF07XG59XG5cbmZ1bmN0aW9uIGRyKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IGUuc2Vjb25kcyxcbiAgICAgICAgbmFub3NlY29uZHM6IGUubmFub3NlY29uZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB3cih0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBpdCh0LnNlY29uZHMsIHQubmFub3NlY29uZHMpO1xuICAgIHJldHVybiBydC5mcm9tVGltZXN0YW1wKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIGJhdGNoIG9mIG11dGF0aW9ucyBpbnRvIGEgRGJNdXRhdGlvbkJhdGNoIGZvciBsb2NhbCBzdG9yYWdlLiAqL1xuLyoqIERlY29kZXMgYSBEYk11dGF0aW9uQmF0Y2ggaW50byBhIE11dGF0aW9uQmF0Y2ggKi9cbmZ1bmN0aW9uIF9yKHQsIGUpIHtcbiAgICBjb25zdCBuID0gKGUuYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKChlID0+IHppKHQuZmUsIGUpKSk7XG4gICAgLy8gU3F1YXNoIG9sZCB0cmFuc2Zvcm0gbXV0YXRpb25zIGludG8gZXhpc3RpbmcgcGF0Y2ggb3Igc2V0IG11dGF0aW9ucy5cbiAgICAvLyBUaGUgcmVwbGFjZW1lbnQgb2YgcmVwcmVzZW50aW5nIGB0cmFuc2Zvcm1zYCB3aXRoIGB1cGRhdGVfdHJhbnNmb3Jtc2BcbiAgICAvLyBvbiB0aGUgU0RLIG1lYW5zIHRoYXQgb2xkIGB0cmFuc2Zvcm1gIG11dGF0aW9ucyBzdG9yZWQgaW4gSW5kZXhlZERCIG5lZWRcbiAgICAvLyB0byBiZSB1cGRhdGVkIHRvIGB1cGRhdGVfdHJhbnNmb3Jtc2AuXG4gICAgLy8gVE9ETyhiLzE3NDYwODM3NCk6IFJlbW92ZSB0aGlzIGNvZGUgb25jZSB3ZSBwZXJmb3JtIGEgc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLm11dGF0aW9ucy5sZW5ndGggLSAxOyArK3QpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25zW3RdO1xuICAgICAgICBpZiAodCArIDEgPCBlLm11dGF0aW9ucy5sZW5ndGggJiYgdm9pZCAwICE9PSBlLm11dGF0aW9uc1t0ICsgMV0udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5tdXRhdGlvbnNbdCArIDFdO1xuICAgICAgICAgICAgbi51cGRhdGVUcmFuc2Zvcm1zID0gcy50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLCBlLm11dGF0aW9ucy5zcGxpY2UodCArIDEsIDEpLCBcbiAgICAgICAgICAgICsrdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzID0gZS5tdXRhdGlvbnMubWFwKChlID0+IHppKHQuZmUsIGUpKSksIGkgPSBpdC5mcm9tTWlsbGlzKGUubG9jYWxXcml0ZVRpbWVNcyk7XG4gICAgcmV0dXJuIG5ldyBacyhlLmJhdGNoSWQsIGksIG4sIHMpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBtcih0KSB7XG4gICAgY29uc3QgZSA9IHdyKHQucmVhZFRpbWUpLCBuID0gdm9pZCAwICE9PSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPyB3cih0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogcnQubWluKCk7XG4gICAgbGV0IHM7XG4gICAgdmFyIGk7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC5xdWVyeS5kb2N1bWVudHMgPyAoRigxID09PSAoaSA9IHQucXVlcnkpLmRvY3VtZW50cy5sZW5ndGgpLCBcbiAgICBzID0gSm4oR24oQmkoaS5kb2N1bWVudHNbMF0pKSkpIDogcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIEpuKFlpKHQpKTtcbiAgICB9KHQucXVlcnkpLCBuZXcgY3IocywgdC50YXJnZXRJZCwgXCJUYXJnZXRQdXJwb3NlTGlzdGVuXCIgLyogVGFyZ2V0UHVycG9zZS5MaXN0ZW4gKi8gLCB0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgZSwgbiwgVmUuZnJvbUJhc2U2NFN0cmluZyh0LnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIGdyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZHIoZS5zbmFwc2hvdFZlcnNpb24pLCBzID0gZHIoZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gRm4oZS50YXJnZXQpID8gSGkodC5mZSwgZS50YXJnZXQpIDogSmkodC5mZSwgZS50YXJnZXQpO1xuICAgIC8vIFdlIGNhbid0IHN0b3JlIHRoZSByZXN1bWVUb2tlbiBhcyBhIEJ5dGVTdHJpbmcgaW4gSW5kZXhlZERiLCBzbyB3ZVxuICAgIC8vIGNvbnZlcnQgaXQgdG8gYSBiYXNlNjQgc3RyaW5nIGZvciBzdG9yYWdlLlxuICAgICAgICBjb25zdCByID0gZS5yZXN1bWVUb2tlbi50b0Jhc2U2NCgpO1xuICAgIC8vIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyBhbHdheXMgMCB1bnRpbCB3ZSBkbyByZWFsIEdDLlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICB0YXJnZXRJZDogZS50YXJnZXRJZCxcbiAgICAgICAgY2Fub25pY2FsSWQ6ICRuKGUudGFyZ2V0KSxcbiAgICAgICAgcmVhZFRpbWU6IG4sXG4gICAgICAgIHJlc3VtZVRva2VuOiByLFxuICAgICAgICBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI6IGUuc2VxdWVuY2VOdW1iZXIsXG4gICAgICAgIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb246IHMsXG4gICAgICAgIHF1ZXJ5OiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZmlndXJpbmcgb3V0IHdoYXQga2luZCBvZiBxdWVyeSBoYXMgYmVlbiBzdG9yZWQuXG4gKi9cbi8qKlxuICogRW5jb2RlcyBhIGBCdW5kbGVkUXVlcnlgIGZyb20gYnVuZGxlIHByb3RvIHRvIGEgUXVlcnkgb2JqZWN0LlxuICpcbiAqIFRoaXMgcmVjb25zdHJ1Y3RzIHRoZSBvcmlnaW5hbCBxdWVyeSB1c2VkIHRvIGJ1aWxkIHRoZSBidW5kbGUgYmVpbmcgbG9hZGVkLFxuICogaW5jbHVkaW5nIGZlYXR1cmVzIGV4aXN0cyBvbmx5IGluIFNES3MgKGZvciBleGFtcGxlOiBsaW1pdC10by1sYXN0KS5cbiAqL1xuZnVuY3Rpb24geXIodCkge1xuICAgIGNvbnN0IGUgPSBZaSh7XG4gICAgICAgIHBhcmVudDogdC5wYXJlbnQsXG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeTogdC5zdHJ1Y3R1cmVkUXVlcnlcbiAgICB9KTtcbiAgICByZXR1cm4gXCJMQVNUXCIgPT09IHQubGltaXRUeXBlID8gWG4oZSwgZS5saW1pdCwgXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8pIDogZTtcbn1cblxuLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IHByb3RvIG9iamVjdCB0byBhIE5hbWVkUXVlcnkgbW9kZWwgb2JqZWN0LiAqL1xuLyoqIEVuY29kZXMgYSBEYkRvY3VtZW50T3ZlcmxheSBvYmplY3QgdG8gYW4gT3ZlcmxheSBtb2RlbCBvYmplY3QuICovXG5mdW5jdGlvbiBwcih0LCBlKSB7XG4gICAgcmV0dXJuIG5ldyBlaShlLmxhcmdlc3RCYXRjaElkLCB6aSh0LmZlLCBlLm92ZXJsYXlNdXRhdGlvbikpO1xufVxuXG4vKiogRGVjb2RlcyBhbiBPdmVybGF5IG1vZGVsIG9iamVjdCBpbnRvIGEgRGJEb2N1bWVudE92ZXJsYXkgb2JqZWN0LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBEYkRvY3VtZW50T3ZlcmxheUtleSBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiB1c2VyIGFuZFxuICogZG9jdW1lbnQga2V5LlxuICovXG5mdW5jdGlvbiBJcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIHJldHVybiBbIHQsIHF0KGUucGF0aC5wb3BMYXN0KCkpLCBuIF07XG59XG5cbmZ1bmN0aW9uIFRyKHQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbmRleElkOiB0LFxuICAgICAgICB1aWQ6IGUudWlkIHx8IFwiXCIsXG4gICAgICAgIHNlcXVlbmNlTnVtYmVyOiBuLFxuICAgICAgICByZWFkVGltZTogZHIocy5yZWFkVGltZSksXG4gICAgICAgIGRvY3VtZW50S2V5OiBxdChzLmRvY3VtZW50S2V5LnBhdGgpLFxuICAgICAgICBsYXJnZXN0QmF0Y2hJZDogcy5sYXJnZXN0QmF0Y2hJZFxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEVyIHtcbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBBcih0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogKGUgPSB0KS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiB3cihlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgdG8gYSBEYkJ1bmRsZS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEFyKHQpLnB1dCh7XG4gICAgICAgICAgICBidW5kbGVJZDogKG4gPSBlKS5pZCxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IGRyKE5pKG4uY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgLyoqIEVuY29kZXMgYSBEYk5hbWVkUXVlcnkgdG8gYSBOYW1lZFF1ZXJ5LiAqLyAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB2cih0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoZSA9IHQpLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHlyKGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogd3IoZS5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBmcm9tIGEgYnVuZGxlIHByb3RvIHRvIGEgRGJOYW1lZFF1ZXJ5LiAqLyAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB2cih0KS5wdXQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGRyKE5pKHQucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IHQuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBBcih0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiYnVuZGxlc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gdnIodCkge1xuICAgIHJldHVybiBfZSh0LCBcIm5hbWVkUXVlcmllc1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUgdXNpbmcgSW5kZXhlZERiLlxuICovIGNsYXNzIFJyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICAgICAqIEBwYXJhbSB1c2VySWQgLSBUaGUgdXNlcklkIGZvciB3aGljaCB3ZSBhcmUgYWNjZXNzaW5nIG92ZXJsYXlzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gdCwgdGhpcy51c2VySWQgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZGUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS51aWQgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBScih0LCBuKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBQcih0KS5nZXQoSXIodGhpcy51c2VySWQsIGUpKS5uZXh0KCh0ID0+IHQgPyBwcih0aGlzLnNlcmlhbGl6ZXIsIHQpIDogbnVsbCkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmcygpO1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChlLCAoZSA9PiB0aGlzLmdldE92ZXJsYXkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBudWxsICE9PSB0ICYmIG4uc2V0KGUsIHQpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgZWkoZSwgaSk7XG4gICAgICAgICAgICBzLnB1c2godGhpcy53ZSh0LCByKSk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihzKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTZXQ7XG4gICAgICAgIC8vIEdldCB0aGUgc2V0IG9mIHVuaXF1ZSBjb2xsZWN0aW9uIHBhdGhzLlxuICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgodCA9PiBzLmFkZChxdCh0LmdldENvbGxlY3Rpb25QYXRoKCkpKSkpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGUsIG4gXSwgWyB0aGlzLnVzZXJJZCwgZSwgbiArIDEgXSwgXG4gICAgICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgICAgICBpLnB1c2goUHIodCkuSihcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHMpKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZnMoKSwgaSA9IHF0KGUpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgaSwgbiBdLCBbIHRoaXMudXNlcklkLCBpLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIFByKHQpLmooXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCByKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHByKHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgICAgICAgICAgICAgcy5zZXQodC5nZXRLZXkoKSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBmcygpO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgLy8gV2Ugd2FudCBiYXRjaCBJRHMgbGFyZ2VyIHRoYW4gYHNpbmNlQmF0Y2hJZGAsIGFuZCBzbyB0aGUgbG93ZXIgYm91bmRcbiAgICAgICAgLy8gaXMgbm90IGluY2x1c2l2ZS5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgZSwgbiBdLCBbIHRoaXMudXNlcklkLCBlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIFByKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogb1xuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIHJldHVybiBwYXJ0aWFsIGJhdGNoIG92ZXJsYXlzLCBldmVuIGlmIHRoZSBzaXplXG4gICAgICAgICAgICAvLyBvZiB0aGUgcmVzdWx0IHNldCBleGNlZWRzIHRoZSBnaXZlbiBgY291bnRgIGFyZ3VtZW50LiBUaGVyZWZvcmUsIHdlXG4gICAgICAgICAgICAvLyBjb250aW51ZSB0byBhZ2dyZWdhdGUgcmVzdWx0cyBldmVuIGFmdGVyIHRoZSByZXN1bHQgc2l6ZSBleGNlZWRzXG4gICAgICAgICAgICAvLyBgY291bnRgIGlmIHRoZXJlIGFyZSBtb3JlIG92ZXJsYXlzIGZyb20gdGhlIGBjdXJyZW50QmF0Y2hJZGAuXG4gICAgICAgICAgICBjb25zdCBvID0gcHIodGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgICAgIGkuc2l6ZSgpIDwgcyB8fCBvLmxhcmdlc3RCYXRjaElkID09PSByID8gKGkuc2V0KG8uZ2V0S2V5KCksIG8pLCByID0gby5sYXJnZXN0QmF0Y2hJZCkgOiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgd2UodCwgZSkge1xuICAgICAgICByZXR1cm4gUHIodCkucHV0KGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IFtzLCBpLCByXSA9IElyKGUsIG4ubXV0YXRpb24ua2V5KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiBlLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXRoOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHIsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLm11dGF0aW9uLmtleS5nZXRDb2xsZWN0aW9uR3JvdXAoKSxcbiAgICAgICAgICAgICAgICBsYXJnZXN0QmF0Y2hJZDogbi5sYXJnZXN0QmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBvdmVybGF5TXV0YXRpb246IGppKHQuZmUsIG4ubXV0YXRpb24pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgdGhpcy51c2VySWQsIGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCBvdmVybGF5IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBQcih0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiZG9jdW1lbnRPdmVybGF5c1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIE5vdGU6IFRoaXMgY29kZSBpcyBjb3BpZWQgZnJvbSB0aGUgYmFja2VuZC4gQ29kZSB0aGF0IGlzIG5vdCB1c2VkIGJ5XG4vLyBGaXJlc3RvcmUgd2FzIHJlbW92ZWQuXG4vKiogRmlyZXN0b3JlIGluZGV4IHZhbHVlIHdyaXRlci4gICovXG5jbGFzcyBiciB7XG4gICAgY29uc3RydWN0b3IoKSB7fVxuICAgIC8vIFRoZSB3cml0ZSBtZXRob2RzIGJlbG93IHNob3J0LWNpcmN1aXQgd3JpdGluZyB0ZXJtaW5hdG9ycyBmb3IgdmFsdWVzXG4gICAgLy8gY29udGFpbmluZyBhICh0ZXJtaW5hdGluZykgdHJ1bmNhdGVkIHZhbHVlLlxuICAgIC8vIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSByZXN1bHRpbmcgZW5jb2RpbmcgZm9yOlxuICAgIC8vIFtcImJhclwiLCBbMiwgXCJmb29cIl1dIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLCBOVU1CRVIsIDIsIFNUUklORywgXCJmb29cIiwgVEVSTSwgVEVSTSwgVEVSTSlcbiAgICAvLyBbXCJiYXJcIiwgWzIsIHRydW5jYXRlZChcImZvb1wiKV1dIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLCBOVU1CRVIsIDIsIFNUUklORywgXCJmb29cIiwgVFJVTkMpXG4gICAgLy8gW1wiYmFyXCIsIHRydW5jYXRlZChbXCJmb29cIl0pXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWS4gU1RSSU5HLCBcImZvb1wiLCBURVJNLCBUUlVOQylcbiAgICAvKiogV3JpdGVzIGFuIGluZGV4IHZhbHVlLiAgKi9cbiAgICBfZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubWUodCwgZSksIFxuICAgICAgICAvLyBXcml0ZSBzZXBhcmF0b3IgdG8gc3BsaXQgaW5kZXggdmFsdWVzXG4gICAgICAgIC8vIChzZWUgZ28vZmlyZXN0b3JlLXN0b3JhZ2UtZm9ybWF0I2VuY29kaW5ncykuXG4gICAgICAgIGUuZ2UoKTtcbiAgICB9XG4gICAgbWUodCwgZSkge1xuICAgICAgICBpZiAoXCJudWxsVmFsdWVcIiBpbiB0KSB0aGlzLnllKGUsIDUpOyBlbHNlIGlmIChcImJvb2xlYW5WYWx1ZVwiIGluIHQpIHRoaXMueWUoZSwgMTApLCBcbiAgICAgICAgZS5wZSh0LmJvb2xlYW5WYWx1ZSA/IDEgOiAwKTsgZWxzZSBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiB0KSB0aGlzLnllKGUsIDE1KSwgZS5wZShDZSh0LmludGVnZXJWYWx1ZSkpOyBlbHNlIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IENlKHQuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgaXNOYU4obikgPyB0aGlzLnllKGUsIDEzKSA6ICh0aGlzLnllKGUsIDE1KSwgQnQobikgPyBcbiAgICAgICAgICAgIC8vIC0wLjAsIDAgYW5kIDAuMCBhcmUgYWxsIGNvbnNpZGVyZWQgdGhlIHNhbWVcbiAgICAgICAgICAgIGUucGUoMCkgOiBlLnBlKG4pKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICB0aGlzLnllKGUsIDIwKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiA/IGUuSWUobikgOiAoZS5JZShgJHtuLnNlY29uZHMgfHwgXCJcIn1gKSwgZS5wZShuLm5hbm9zIHx8IDApKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInN0cmluZ1ZhbHVlXCIgaW4gdCkgdGhpcy5UZSh0LnN0cmluZ1ZhbHVlLCBlKSwgdGhpcy5FZShlKTsgZWxzZSBpZiAoXCJieXRlc1ZhbHVlXCIgaW4gdCkgdGhpcy55ZShlLCAzMCksIFxuICAgICAgICBlLkFlKHhlKHQuYnl0ZXNWYWx1ZSkpLCB0aGlzLkVlKGUpOyBlbHNlIGlmIChcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCkgdGhpcy52ZSh0LnJlZmVyZW5jZVZhbHVlLCBlKTsgZWxzZSBpZiAoXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2VvUG9pbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMueWUoZSwgNDUpLCBlLnBlKG4ubGF0aXR1ZGUgfHwgMCksIGUucGUobi5sb25naXR1ZGUgfHwgMCk7XG4gICAgICAgIH0gZWxzZSBcIm1hcFZhbHVlXCIgaW4gdCA/IGVuKHQpID8gdGhpcy55ZShlLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgOiAodGhpcy5SZSh0Lm1hcFZhbHVlLCBlKSwgXG4gICAgICAgIHRoaXMuRWUoZSkpIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/ICh0aGlzLlBlKHQuYXJyYXlWYWx1ZSwgZSksIHRoaXMuRWUoZSkpIDogTygpO1xuICAgIH1cbiAgICBUZSh0LCBlKSB7XG4gICAgICAgIHRoaXMueWUoZSwgMjUpLCB0aGlzLmJlKHQsIGUpO1xuICAgIH1cbiAgICBiZSh0LCBlKSB7XG4gICAgICAgIGUuSWUodCk7XG4gICAgfVxuICAgIFJlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuZmllbGRzIHx8IHt9O1xuICAgICAgICB0aGlzLnllKGUsIDU1KTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIE9iamVjdC5rZXlzKG4pKSB0aGlzLlRlKHQsIGUpLCB0aGlzLm1lKG5bdF0sIGUpO1xuICAgIH1cbiAgICBQZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgdGhpcy55ZShlLCA1MCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSB0aGlzLm1lKHQsIGUpO1xuICAgIH1cbiAgICB2ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMueWUoZSwgMzcpO1xuICAgICAgICBodC5mcm9tTmFtZSh0KS5wYXRoLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy55ZShlLCA2MCksIHRoaXMuYmUodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgeWUodCwgZSkge1xuICAgICAgICB0LnBlKGUpO1xuICAgIH1cbiAgICBFZSh0KSB7XG4gICAgICAgIC8vIFdoaWxlIHRoZSBTREsgZG9lcyBub3QgaW1wbGVtZW50IHRydW5jYXRpb24sIHRoZSB0cnVuY2F0aW9uIG1hcmtlciBpc1xuICAgICAgICAvLyB1c2VkIHRvIHRlcm1pbmF0ZSBhbGwgdmFyaWFibGUgbGVuZ3RoIHZhbHVlcyAod2hpY2ggYXJlIHN0cmluZ3MsIGJ5dGVzLFxuICAgICAgICAvLyByZWZlcmVuY2VzLCBhcnJheXMgYW5kIG1hcHMpLlxuICAgICAgICB0LnBlKDIpO1xuICAgIH1cbn1cblxuYnIuVmUgPSBuZXcgYnI7XG5cbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgemVyb3MgaW4gYSBieXRlLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIFZyKHQpIHtcbiAgICBpZiAoMCA9PT0gdCkgcmV0dXJuIDg7XG4gICAgbGV0IGUgPSAwO1xuICAgIHJldHVybiB0ID4+IDQgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgZm91ciBiaXRzIGFyZSB6ZXJvLlxuICAgIGUgKz0gNCwgdCA8PD0gNCksIHQgPj4gNiA9PSAwICYmIChcbiAgICAvLyBUZXN0IGlmIHRoZSBmaXJzdCB0d28gKG9yIG5leHQgdHdvKSBiaXRzIGFyZSB6ZXJvLlxuICAgIGUgKz0gMiwgdCA8PD0gMiksIHQgPj4gNyA9PSAwICYmIChcbiAgICAvLyBUZXN0IGlmIHRoZSByZW1haW5pbmcgYml0IGlzIHplcm8uXG4gICAgZSArPSAxKSwgZTtcbn1cblxuLyoqIENvdW50cyB0aGUgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MgaW4gdGhlIGdpdmVuIGJ5dGUgYXJyYXkuICovXG4vKipcbiAqIFJldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyByZXF1aXJlZCB0byBzdG9yZSBcInZhbHVlXCIuIExlYWRpbmcgemVybyBieXRlc1xuICogYXJlIHNraXBwZWQuXG4gKi9cbmZ1bmN0aW9uIFNyKHQpIHtcbiAgICAvLyBUaGlzIGlzIGp1c3QgdGhlIG51bWJlciBvZiBieXRlcyBmb3IgdGhlIHVuc2lnbmVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIuXG4gICAgY29uc3QgZSA9IDY0IC0gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgODsgKytuKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gVnIoMjU1ICYgdFtuXSk7XG4gICAgICAgICAgICBpZiAoZSArPSBzLCA4ICE9PSBzKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9KHQpO1xuICAgIHJldHVybiBNYXRoLmNlaWwoZSAvIDgpO1xufVxuXG4vKipcbiAqIE9yZGVyZWRDb2RlV3JpdGVyIGlzIGEgbWluaW1hbC1hbGxvY2F0aW9uIGltcGxlbWVudGF0aW9uIG9mIHRoZSB3cml0aW5nXG4gKiBiZWhhdmlvciBkZWZpbmVkIGJ5IHRoZSBiYWNrZW5kLlxuICpcbiAqIFRoZSBjb2RlIGlzIHBvcnRlZCBmcm9tIGl0cyBKYXZhIGNvdW50ZXJwYXJ0LlxuICovIGNsYXNzIERyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSgxMDI0KSwgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgfVxuICAgIFNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IGUubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuRGUobi52YWx1ZSksIG4gPSBlLm5leHQoKTtcbiAgICAgICAgdGhpcy5DZSgpO1xuICAgIH1cbiAgICB4ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0W1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICAgICAgbGV0IG4gPSBlLm5leHQoKTtcbiAgICAgICAgZm9yICg7IW4uZG9uZTsgKSB0aGlzLk5lKG4udmFsdWUpLCBuID0gZS5uZXh0KCk7XG4gICAgICAgIHRoaXMua2UoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBhc2NlbmRpbmcuICovICAgIE1lKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAodCA8IDEyOCkgdGhpcy5EZSh0KTsgZWxzZSBpZiAodCA8IDIwNDgpIHRoaXMuRGUoOTYwIHwgdCA+Pj4gNiksIHRoaXMuRGUoMTI4IHwgNjMgJiB0KTsgZWxzZSBpZiAoZSA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgZSkgdGhpcy5EZSg0ODAgfCB0ID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5EZSgxMjggfCA2MyAmIHQgPj4+IDYpLCB0aGlzLkRlKDEyOCB8IDYzICYgdCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuRGUoMjQwIHwgdCA+Pj4gMTgpLCB0aGlzLkRlKDEyOCB8IDYzICYgdCA+Pj4gMTIpLCB0aGlzLkRlKDEyOCB8IDYzICYgdCA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuRGUoMTI4IHwgNjMgJiB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLkNlKCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgdXRmOCBieXRlcyBpbnRvIHRoaXMgYnl0ZSBzZXF1ZW5jZSwgZGVzY2VuZGluZyAqLyAgICAkZSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgaWYgKHQgPCAxMjgpIHRoaXMuTmUodCk7IGVsc2UgaWYgKHQgPCAyMDQ4KSB0aGlzLk5lKDk2MCB8IHQgPj4+IDYpLCB0aGlzLk5lKDEyOCB8IDYzICYgdCk7IGVsc2UgaWYgKGUgPCBcIlxcdWQ4MDBcIiB8fCBcIlxcdWRiZmZcIiA8IGUpIHRoaXMuTmUoNDgwIHwgdCA+Pj4gMTIpLCBcbiAgICAgICAgICAgIHRoaXMuTmUoMTI4IHwgNjMgJiB0ID4+PiA2KSwgdGhpcy5OZSgxMjggfCA2MyAmIHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlUG9pbnRBdCgwKTtcbiAgICAgICAgICAgICAgICB0aGlzLk5lKDI0MCB8IHQgPj4+IDE4KSwgdGhpcy5OZSgxMjggfCA2MyAmIHQgPj4+IDEyKSwgdGhpcy5OZSgxMjggfCA2MyAmIHQgPj4+IDYpLCBcbiAgICAgICAgICAgICAgICB0aGlzLk5lKDEyOCB8IDYzICYgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5rZSgpO1xuICAgIH1cbiAgICBPZSh0KSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGFjdHVhbCB2YWx1ZSBpbiBiaWctZW5kaWFuIGZvcm1hdCB3aXRoIGxlYWRpbmcgMCBieXRlcyBkcm9wcGVkLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5GZSh0KSwgbiA9IFNyKGUpO1xuICAgICAgICB0aGlzLkJlKDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIG47XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgdCA9IGUubGVuZ3RoIC0gbjsgdCA8IGUubGVuZ3RoOyArK3QpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiBlW3RdO1xuICAgIH1cbiAgICBMZSh0KSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGludmVydGVkIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkZlKHQpLCBuID0gU3IoZSk7XG4gICAgICAgIHRoaXMuQmUoMSArIG4pLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfigyNTUgJiBuKTtcbiAgICAgICAgLy8gV3JpdGUgdGhlIGxlbmd0aFxuICAgICAgICBmb3IgKGxldCB0ID0gZS5sZW5ndGggLSBuOyB0IDwgZS5sZW5ndGg7ICsrdCkgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgZVt0XSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyB0aGUgXCJpbmZpbml0eVwiIGJ5dGUgc2VxdWVuY2UgdGhhdCBzb3J0cyBhZnRlciBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGFzY2VuZGluZyBvcmRlci5cbiAgICAgKi8gICAgcWUoKSB7XG4gICAgICAgIHRoaXMuVWUoMjU1KSwgdGhpcy5VZSgyNTUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYmVmb3JlIGFsbCBvdGhlciBieXRlXG4gICAgICogc2VxdWVuY2VzIHdyaXR0ZW4gaW4gZGVzY2VuZGluZyBvcmRlci5cbiAgICAgKi8gICAgS2UoKSB7XG4gICAgICAgIHRoaXMuR2UoMjU1KSwgdGhpcy5HZSgyNTUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJ1ZmZlciBzdWNoIHRoYXQgaXQgaXMgdGhlIHNhbWUgYXMgd2hlbiBpdCB3YXMgbmV3bHlcbiAgICAgKiBjb25zdHJ1Y3RlZC5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSAwO1xuICAgIH1cbiAgICBzZWVkKHQpIHtcbiAgICAgICAgdGhpcy5CZSh0Lmxlbmd0aCksIHRoaXMuYnVmZmVyLnNldCh0LCB0aGlzLnBvc2l0aW9uKSwgdGhpcy5wb3NpdGlvbiArPSB0Lmxlbmd0aDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIGEgY29weSBvZiB0aGUgZW5jb2RlZCBieXRlcyBpbiB0aGlzIGJ1ZmZlci4gICovICAgIFFlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgYHZhbGAgaW50byBhbiBlbmNvZGluZyBzbyB0aGF0IHRoZSBvcmRlciBtYXRjaGVzIHRoZSBJRUVFIDc1NFxuICAgICAqIGZsb2F0aW5nLXBvaW50IGNvbXBhcmlzb24gcmVzdWx0cyB3aXRoIHRoZSBmb2xsb3dpbmcgZXhjZXB0aW9uczpcbiAgICAgKiAgIC0wLjAgPCAwLjBcbiAgICAgKiAgIGFsbCBub24tTmFOIDwgTmFOXG4gICAgICogICBOYU4gPSBOYU5cbiAgICAgKi8gICAgRmUodCkge1xuICAgICAgICBjb25zdCBlID0gXG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIEphdmFTY3JpcHQgbnVtYmVyIHRvIGEgYnl0ZSBhcnJheSAodXNpbmcgYmlnIGVuZGlhbiBlbmNvZGluZykuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDgpKTtcbiAgICAgICAgICAgIHJldHVybiBlLnNldEZsb2F0NjQoMCwgdCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMSksIG5ldyBVaW50OEFycmF5KGUuYnVmZmVyKTtcbiAgICAgICAgfSh0KSwgbiA9IDAgIT0gKDEyOCAmIGVbMF0pO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlyc3QgYml0IGlzIHNldC4gV2UgdXNlIGEgYml0IG1hc2sgc2luY2UgdmFsdWVbMF0gaXNcbiAgICAgICAgLy8gZW5jb2RlZCBhcyBhIG51bWJlciBmcm9tIDAgdG8gMjU1LlxuICAgICAgICAgICAgICAgIC8vIFJldmVydCB0aGUgdHdvIGNvbXBsZW1lbnQgdG8gZ2V0IG5hdHVyYWwgb3JkZXJpbmdcbiAgICAgICAgZVswXSBePSBuID8gMjU1IDogMTI4O1xuICAgICAgICBmb3IgKGxldCB0ID0gMTsgdCA8IGUubGVuZ3RoOyArK3QpIGVbdF0gXj0gbiA/IDI1NSA6IDA7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIGEgc2luZ2xlIGJ5dGUgYXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICovICAgIERlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IDI1NSAmIHQ7XG4gICAgICAgIDAgPT09IGUgPyAodGhpcy5VZSgwKSwgdGhpcy5VZSgyNTUpKSA6IDI1NSA9PT0gZSA/ICh0aGlzLlVlKDI1NSksIHRoaXMuVWUoMCkpIDogdGhpcy5VZShlKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGRlc2NlbmRpbmcgdG8gdGhlIGJ1ZmZlci4gICovICAgIE5lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IDI1NSAmIHQ7XG4gICAgICAgIDAgPT09IGUgPyAodGhpcy5HZSgwKSwgdGhpcy5HZSgyNTUpKSA6IDI1NSA9PT0gZSA/ICh0aGlzLkdlKDI1NSksIHRoaXMuR2UoMCkpIDogdGhpcy5HZSh0KTtcbiAgICB9XG4gICAgQ2UoKSB7XG4gICAgICAgIHRoaXMuVWUoMCksIHRoaXMuVWUoMSk7XG4gICAgfVxuICAgIGtlKCkge1xuICAgICAgICB0aGlzLkdlKDApLCB0aGlzLkdlKDEpO1xuICAgIH1cbiAgICBVZSh0KSB7XG4gICAgICAgIHRoaXMuQmUoMSksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB0O1xuICAgIH1cbiAgICBHZSh0KSB7XG4gICAgICAgIHRoaXMuQmUoMSksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+dDtcbiAgICB9XG4gICAgQmUodCkge1xuICAgICAgICBjb25zdCBlID0gdCArIHRoaXMucG9zaXRpb247XG4gICAgICAgIGlmIChlIDw9IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAvLyBUcnkgZG91YmxpbmcuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSAyICogdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICAvLyBTdGlsbCBub3QgYmlnIGVub3VnaD8gSnVzdCBhbGxvY2F0ZSB0aGUgcmlnaHQgc2l6ZS5cbiAgICAgICAgICAgICAgICBuIDwgZSAmJiAobiA9IGUpO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIG5ldyBidWZmZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBVaW50OEFycmF5KG4pO1xuICAgICAgICBzLnNldCh0aGlzLmJ1ZmZlciksIC8vIGNvcHkgb2xkIGRhdGFcbiAgICAgICAgdGhpcy5idWZmZXIgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgQ3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5qZSA9IHQ7XG4gICAgfVxuICAgIEFlKHQpIHtcbiAgICAgICAgdGhpcy5qZS5TZSh0KTtcbiAgICB9XG4gICAgSWUodCkge1xuICAgICAgICB0aGlzLmplLk1lKHQpO1xuICAgIH1cbiAgICBwZSh0KSB7XG4gICAgICAgIHRoaXMuamUuT2UodCk7XG4gICAgfVxuICAgIGdlKCkge1xuICAgICAgICB0aGlzLmplLnFlKCk7XG4gICAgfVxufVxuXG5jbGFzcyB4ciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmplID0gdDtcbiAgICB9XG4gICAgQWUodCkge1xuICAgICAgICB0aGlzLmplLnhlKHQpO1xuICAgIH1cbiAgICBJZSh0KSB7XG4gICAgICAgIHRoaXMuamUuJGUodCk7XG4gICAgfVxuICAgIHBlKHQpIHtcbiAgICAgICAgdGhpcy5qZS5MZSh0KTtcbiAgICB9XG4gICAgZ2UoKSB7XG4gICAgICAgIHRoaXMuamUuS2UoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBgRGlyZWN0aW9uYWxJbmRleEJ5dGVFbmNvZGVyYCB1c2luZyBgT3JkZXJlZENvZGVXcml0ZXJgIGZvciB0aGVcbiAqIGFjdHVhbCBlbmNvZGluZy5cbiAqLyBjbGFzcyBOciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuamUgPSBuZXcgRHIsIHRoaXMuemUgPSBuZXcgQ3IodGhpcy5qZSksIHRoaXMuV2UgPSBuZXcgeHIodGhpcy5qZSk7XG4gICAgfVxuICAgIHNlZWQodCkge1xuICAgICAgICB0aGlzLmplLnNlZWQodCk7XG4gICAgfVxuICAgIEhlKHQpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gdCA/IHRoaXMuemUgOiB0aGlzLldlO1xuICAgIH1cbiAgICBRZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuamUuUWUoKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuamUucmVzZXQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUmVwcmVzZW50cyBhbiBpbmRleCBlbnRyeSBzYXZlZCBieSB0aGUgU0RLIGluIHBlcnNpc3RlZCBzdG9yYWdlLiAqLyBjbGFzcyBrciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmluZGV4SWQgPSB0LCB0aGlzLmRvY3VtZW50S2V5ID0gZSwgdGhpcy5hcnJheVZhbHVlID0gbiwgdGhpcy5kaXJlY3Rpb25hbFZhbHVlID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBJbmRleEVudHJ5IGVudHJ5IHRoYXQgc29ydHMgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGN1cnJlbnRcbiAgICAgKiBkaXJlY3Rpb25hbCB2YWx1ZS5cbiAgICAgKi8gICAgSmUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRpcmVjdGlvbmFsVmFsdWUubGVuZ3RoLCBlID0gMCA9PT0gdCB8fCAyNTUgPT09IHRoaXMuZGlyZWN0aW9uYWxWYWx1ZVt0IC0gMV0gPyB0ICsgMSA6IHQsIG4gPSBuZXcgVWludDhBcnJheShlKTtcbiAgICAgICAgcmV0dXJuIG4uc2V0KHRoaXMuZGlyZWN0aW9uYWxWYWx1ZSwgMCksIGUgIT09IHQgPyBuLnNldChbIDAgXSwgdGhpcy5kaXJlY3Rpb25hbFZhbHVlLmxlbmd0aCkgOiArK25bbi5sZW5ndGggLSAxXSwgXG4gICAgICAgIG5ldyBrcih0aGlzLmluZGV4SWQsIHRoaXMuZG9jdW1lbnRLZXksIHRoaXMuYXJyYXlWYWx1ZSwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBNcih0LCBlKSB7XG4gICAgbGV0IG4gPSB0LmluZGV4SWQgLSBlLmluZGV4SWQ7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSAkcih0LmFycmF5VmFsdWUsIGUuYXJyYXlWYWx1ZSksIDAgIT09IG4gPyBuIDogKG4gPSAkcih0LmRpcmVjdGlvbmFsVmFsdWUsIGUuZGlyZWN0aW9uYWxWYWx1ZSksIFxuICAgIDAgIT09IG4gPyBuIDogaHQuY29tcGFyYXRvcih0LmRvY3VtZW50S2V5LCBlLmRvY3VtZW50S2V5KSkpO1xufVxuXG5mdW5jdGlvbiAkcih0LCBlKSB7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aCAmJiBuIDwgZS5sZW5ndGg7ICsrbikge1xuICAgICAgICBjb25zdCBzID0gdFtuXSAtIGVbbl07XG4gICAgICAgIGlmICgwICE9PSBzKSByZXR1cm4gcztcbiAgICB9XG4gICAgcmV0dXJuIHQubGVuZ3RoIC0gZS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbGlnaHQgcXVlcnkgcGxhbm5lciBmb3IgRmlyZXN0b3JlLlxuICpcbiAqIFRoaXMgY2xhc3MgbWF0Y2hlcyBhIGBGaWVsZEluZGV4YCBhZ2FpbnN0IGEgRmlyZXN0b3JlIFF1ZXJ5IGBUYXJnZXRgLiBJdFxuICogZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIHNwZWNpZmllZCB0YXJnZXQuXG4gKlxuICogVGhlIGZvbGxvd2luZyB0YWJsZSBzaG93Y2FzZXMgc29tZSBwb3NzaWJsZSBpbmRleCBjb25maWd1cmF0aW9uczpcbiAqXG4gKiBRdWVyeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJbmRleFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDLCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykgICAgICAgICAgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScsICdkZXNjJykgICAgICAgICAgfCBhIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDLCBiIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKS5vcmRlckJ5KCdiJykgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJ2FycmF5LWNvbnRhaW5zJywgJ2EnKS5vcmRlckJ5KCdiJykgICAgICB8IGEgQ09OVEFJTlMsIGIgQVNDRU5ESU5HXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TXG4gKi8gY2xhc3MgT3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uSWQgPSBudWxsICE9IHQuY29sbGVjdGlvbkdyb3VwID8gdC5jb2xsZWN0aW9uR3JvdXAgOiB0LnBhdGgubGFzdFNlZ21lbnQoKSwgXG4gICAgICAgIHRoaXMuWWUgPSB0Lm9yZGVyQnksIHRoaXMuWGUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuZmlsdGVycykge1xuICAgICAgICAgICAgY29uc3QgdCA9IGU7XG4gICAgICAgICAgICB0LmlzSW5lcXVhbGl0eSgpID8gdGhpcy5aZSA9IHQgOiB0aGlzLlhlLnB1c2godCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBpbmRleCBjYW4gYmUgdXNlZCB0byBzZXJ2ZSB0aGUgVGFyZ2V0SW5kZXhNYXRjaGVyJ3NcbiAgICAgKiB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBBbiBpbmRleCBpcyBjb25zaWRlcmVkIGNhcGFibGUgb2Ygc2VydmluZyB0aGUgdGFyZ2V0IHdoZW46XG4gICAgICogLSBUaGUgdGFyZ2V0IHVzZXMgYWxsIGluZGV4IHNlZ21lbnRzIGZvciBpdHMgZmlsdGVycyBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAqICAgVGhlIHRhcmdldCBjYW4gaGF2ZSBhZGRpdGlvbmFsIGZpbHRlciBhbmQgb3JkZXJCeSBjbGF1c2VzLCBidXQgbm90XG4gICAgICogICBmZXdlci5cbiAgICAgKiAtIElmIGFuIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueWZpbHRlciBpcyB1c2VkLCB0aGUgaW5kZXggbXVzdCBhbHNvXG4gICAgICogICBoYXZlIGEgY29ycmVzcG9uZGluZyBgQ09OVEFJTlNgIHNlZ21lbnQuXG4gICAgICogLSBBbGwgZGlyZWN0aW9uYWwgaW5kZXggc2VnbWVudHMgY2FuIGJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0IGFzIGEgc2VyaWVzIG9mXG4gICAgICogICBlcXVhbGl0eSBmaWx0ZXJzLCBhIHNpbmdsZSBpbmVxdWFsaXR5IGZpbHRlciBhbmQgYSBzZXJpZXMgb2Ygb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGUgZXF1YWxpdHkgZmlsdGVycyBtYXkgYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgKiAtIFRoZSBvcHRpb25hbCBzZWdtZW50IGZvciB0aGUgaW5lcXVhbGl0eSBmaWx0ZXIgbXVzdCBhcHBlYXIgYWZ0ZXIgYWxsXG4gICAgICogICBlcXVhbGl0eSBzZWdtZW50cy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGF0IG9yZGVyQnkgY2xhdXNlIG9mIHRoZSB0YXJnZXQgbXVzdCBhcHBlYXJcbiAgICAgKiAgIGluIG9yZGVyIGFmdGVyIGFsbCBlcXVhbGl0eSBhbmQgaW5lcXVhbGl0eSBzZWdtZW50cy4gU2luZ2xlIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMgY2Fubm90IGJlIHNraXBwZWQsIGJ1dCBhIGNvbnRpbnVvdXMgb3JkZXJCeSBzdWZmaXggbWF5IGJlXG4gICAgICogICBvbWl0dGVkLlxuICAgICAqLyAgICB0bih0KSB7XG4gICAgICAgIEYodC5jb2xsZWN0aW9uR3JvdXAgPT09IHRoaXMuY29sbGVjdGlvbklkKTtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gYXJyYXkgZWxlbWVudCwgZmluZCBhIG1hdGNoaW5nIGZpbHRlci5cbiAgICAgICAgY29uc3QgZSA9IGZ0KHQpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBlICYmICF0aGlzLmVuKGUpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBkdCh0KTtcbiAgICAgICAgbGV0IHMgPSBuZXcgU2V0LCBpID0gMCwgciA9IDA7XG4gICAgICAgIC8vIFByb2Nlc3MgYWxsIGVxdWFsaXRpZXMgZmlyc3QuIEVxdWFsaXRpZXMgY2FuIGFwcGVhciBvdXQgb2Ygb3JkZXIuXG4gICAgICAgIGZvciAoO2kgPCBuLmxlbmd0aCAmJiB0aGlzLmVuKG5baV0pOyArK2kpIHMgPSBzLmFkZChuW2ldLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgICAgIC8vIElmIHdlIGFscmVhZHkgaGF2ZSBwcm9jZXNzZWQgYWxsIHNlZ21lbnRzLCBhbGwgc2VnbWVudHMgYXJlIHVzZWQgdG8gc2VydmVcbiAgICAgICAgLy8gdGhlIGVxdWFsaXR5IGZpbHRlcnMgYW5kIHdlIGRvIG5vdCBuZWVkIHRvIG1hcCBhbnkgc2VnbWVudHMgdG8gdGhlXG4gICAgICAgIC8vIHRhcmdldCdzIGluZXF1YWxpdHkgYW5kIG9yZGVyQnkgY2xhdXNlcy5cbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbi5sZW5ndGgpIHJldHVybiAhMDtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5aZSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gaW5lcXVhbGl0eSBmaWx0ZXIgYW5kIHRoZSBmaWVsZCB3YXMgbm90IGluIG9uZSBvZiB0aGVcbiAgICAgICAgICAgIC8vIGVxdWFsaXR5IGZpbHRlcnMgYWJvdmUsIHRoZSBuZXh0IHNlZ21lbnQgbXVzdCBtYXRjaCBib3RoIHRoZSBmaWx0ZXJcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgZmlyc3Qgb3JkZXJCeSBjbGF1c2UuXG4gICAgICAgICAgICBpZiAoIXMuaGFzKHRoaXMuWmUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5baV07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm5uKHRoaXMuWmUsIHQpIHx8ICF0aGlzLnNuKHRoaXMuWWVbcisrXSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbGwgcmVtYWluaW5nIHNlZ21lbnRzIG5lZWQgdG8gcmVwcmVzZW50IHRoZSBwcmVmaXggb2YgdGhlIHRhcmdldCdzXG4gICAgICAgIC8vIG9yZGVyQnkuXG4gICAgICAgICAgICAgICAgZm9yICg7aSA8IG4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuW2ldO1xuICAgICAgICAgICAgaWYgKHIgPj0gdGhpcy5ZZS5sZW5ndGggfHwgIXRoaXMuc24odGhpcy5ZZVtyKytdLCB0KSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgZW4odCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5YZSkgaWYgKHRoaXMubm4oZSwgdCkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBubih0LCBlKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQgfHwgIXQuZmllbGQuaXNFcXVhbChlLmZpZWxkUGF0aCkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gdC5vcCB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gdC5vcDtcbiAgICAgICAgcmV0dXJuIDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovID09PSBlLmtpbmQgPT09IG47XG4gICAgfVxuICAgIHNuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuICEhdC5maWVsZC5pc0VxdWFsKGUuZmllbGRQYXRoKSAmJiAoMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBlLmtpbmQgJiYgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovID09PSB0LmRpciB8fCAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovID09PSBlLmtpbmQgJiYgXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IHQuZGlyKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIHV0aWxpdHkgZnVuY3Rpb25zIHRoYXQgaGVscCB3aXRoIGJvb2xlYW4gbG9naWMgdHJhbnNmb3JtYXRpb25zIG5lZWRlZCBmb3IgaGFuZGxpbmdcbiAqIGNvbXBsZXggZmlsdGVycyB1c2VkIGluIHF1ZXJpZXMuXG4gKi9cbi8qKlxuICogVGhlIGBpbmAgZmlsdGVyIGlzIG9ubHkgYSBzeW50YWN0aWMgc3VnYXIgb3ZlciBhIGRpc2p1bmN0aW9uIG9mIGVxdWFsaXRpZXMuIEZvciBpbnN0YW5jZTogYGEgaW5cbiAqIFsxLDIsM11gIGlzIGluIGZhY3QgYGE9PTEgfHwgYT09MiB8fCBhPT0zYC4gVGhpcyBtZXRob2QgZXhwYW5kcyBhbnkgYGluYCBmaWx0ZXIgaW4gdGhlIGdpdmVuXG4gKiBpbnB1dCBpbnRvIGEgZGlzanVuY3Rpb24gb2YgZXF1YWxpdHkgZmlsdGVycyBhbmQgcmV0dXJucyB0aGUgZXhwYW5kZWQgZmlsdGVyLlxuICovIGZ1bmN0aW9uIEZyKHQpIHtcbiAgICB2YXIgZSwgbjtcbiAgICBpZiAoRih0IGluc3RhbmNlb2YgbW4gfHwgdCBpbnN0YW5jZW9mIGduKSwgdCBpbnN0YW5jZW9mIG1uKSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ24pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSAobnVsbCA9PT0gKG4gPSBudWxsID09PSAoZSA9IHQudmFsdWUuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS52YWx1ZXMpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4ubWFwKChlID0+IG1uLmNyZWF0ZSh0LmZpZWxkLCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCBlKSkpKSB8fCBbXTtcbiAgICAgICAgICAgIHJldHVybiBnbi5jcmVhdGUocywgXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBoYXZlIHJlYWNoZWQgb3RoZXIga2luZHMgb2YgZmllbGQgZmlsdGVycy5cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8vIFdlIGhhdmUgYSBjb21wb3NpdGUgZmlsdGVyLlxuICAgICAgICBjb25zdCBzID0gdC5maWx0ZXJzLm1hcCgodCA9PiBGcih0KSkpO1xuICAgIHJldHVybiBnbi5jcmVhdGUocywgdC5vcCk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBjb21wb3NpdGUgZmlsdGVyLCByZXR1cm5zIHRoZSBsaXN0IG9mIHRlcm1zIGluIGl0cyBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybS5cbiAqXG4gKiA8cD5FYWNoIGVsZW1lbnQgaW4gdGhlIHJldHVybiB2YWx1ZSBpcyBvbmUgdGVybSBvZiB0aGUgcmVzdWx0aW5nIERORi4gRm9yIGluc3RhbmNlOiBGb3IgdGhlXG4gKiBpbnB1dDogKEEgfHwgQikgJiYgQywgdGhlIERORiBmb3JtIGlzOiAoQSAmJiBDKSB8fCAoQiAmJiBDKSwgYW5kIHRoZSByZXR1cm4gdmFsdWUgaXMgYSBsaXN0XG4gKiB3aXRoIHR3byBlbGVtZW50czogYSBjb21wb3NpdGUgZmlsdGVyIHRoYXQgcGVyZm9ybXMgKEEgJiYgQyksIGFuZCBhIGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdFxuICogcGVyZm9ybXMgKEIgJiYgQykuXG4gKlxuICogQHBhcmFtIGZpbHRlciB0aGUgY29tcG9zaXRlIGZpbHRlciB0byBjYWxjdWxhdGUgRE5GIHRyYW5zZm9ybSBmb3IuXG4gKiBAcmV0dXJuIHRoZSB0ZXJtcyBpbiB0aGUgRE5GIHRyYW5zZm9ybS5cbiAqLyBmdW5jdGlvbiBCcih0KSB7XG4gICAgaWYgKDAgPT09IHQuZ2V0RmlsdGVycygpLmxlbmd0aCkgcmV0dXJuIFtdO1xuICAgIGNvbnN0IGUgPSBLcihGcih0KSk7XG4gICAgcmV0dXJuIEYoVXIoZSkpLCBMcihlKSB8fCBxcihlKSA/IFsgZSBdIDogZS5nZXRGaWx0ZXJzKCk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyBhIHNpbmdsZSBmaWVsZCBmaWx0ZXIuIGUuZy4gKGEgPT0gMTApLiAqLyBmdW5jdGlvbiBMcih0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBtbjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyB0aGUgY29uanVuY3Rpb24gb2Ygb25lIG9yIG1vcmUgZmllbGQgZmlsdGVycy4gZS5nLiAoYSA9PSAxMFxuICogJiYgYiA9PSAyMClcbiAqLyBmdW5jdGlvbiBxcih0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBnbiAmJiBJbih0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBnaXZlbiBmaWx0ZXIgaXMgaW4gZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikuXG4gKlxuICogPHA+SW4gYm9vbGVhbiBsb2dpYywgYSBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKSBpcyBhIGNhbm9uaWNhbCBub3JtYWwgZm9ybSBvZiBhIGxvZ2ljYWxcbiAqIGZvcm11bGEgY29uc2lzdGluZyBvZiBhIGRpc2p1bmN0aW9uIG9mIGNvbmp1bmN0aW9uczsgaXQgY2FuIGFsc28gYmUgZGVzY3JpYmVkIGFzIGFuIE9SIG9mIEFORHMuXG4gKlxuICogPHA+Rm9yIG1vcmUgaW5mbywgdmlzaXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Rpc2p1bmN0aXZlX25vcm1hbF9mb3JtXG4gKi8gZnVuY3Rpb24gVXIodCkge1xuICAgIHJldHVybiBMcih0KSB8fCBxcih0KSB8fCBcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIHRoZSBkaXNqdW5jdGlvbiBvZiBvbmUgb3IgbW9yZSBcImZsYXQgY29uanVuY3Rpb25zXCIgYW5kXG4gKiBmaWVsZCBmaWx0ZXJzLiBlLmcuIChhID09IDEwKSB8fCAoYj09MjAgJiYgYz09MzApXG4gKi9cbiAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgZ24gJiYgcG4odCkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0LmdldEZpbHRlcnMoKSkgaWYgKCFMcihlKSAmJiAhcXIoZSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfSh0KTtcbn1cblxuZnVuY3Rpb24gS3IodCkge1xuICAgIGlmIChGKHQgaW5zdGFuY2VvZiBtbiB8fCB0IGluc3RhbmNlb2YgZ24pLCB0IGluc3RhbmNlb2YgbW4pIHJldHVybiB0O1xuICAgIGlmICgxID09PSB0LmZpbHRlcnMubGVuZ3RoKSByZXR1cm4gS3IodC5maWx0ZXJzWzBdKTtcbiAgICAvLyBDb21wdXRlIERORiBmb3IgZWFjaCBvZiB0aGUgc3ViZmlsdGVycyBmaXJzdFxuICAgICAgICBjb25zdCBlID0gdC5maWx0ZXJzLm1hcCgodCA9PiBLcih0KSkpO1xuICAgIGxldCBuID0gZ24uY3JlYXRlKGUsIHQub3ApO1xuICAgIHJldHVybiBuID0ganIobiksIFVyKG4pID8gbiA6IChGKG4gaW5zdGFuY2VvZiBnbiksIEYoeW4obikpLCBGKG4uZmlsdGVycy5sZW5ndGggPiAxKSwgXG4gICAgbi5maWx0ZXJzLnJlZHVjZSgoKHQsIGUpID0+IEdyKHQsIGUpKSkpO1xufVxuXG5mdW5jdGlvbiBHcih0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgcmV0dXJuIEYodCBpbnN0YW5jZW9mIG1uIHx8IHQgaW5zdGFuY2VvZiBnbiksIEYoZSBpbnN0YW5jZW9mIG1uIHx8IGUgaW5zdGFuY2VvZiBnbiksIFxuICAgIC8vIEZpZWxkRmlsdGVyIEZpZWxkRmlsdGVyXG4gICAgbiA9IHQgaW5zdGFuY2VvZiBtbiA/IGUgaW5zdGFuY2VvZiBtbiA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gQ29uanVuY3Rpb24gZGlzdHJpYnV0aW9uIGZvciB0d28gZmllbGQgZmlsdGVycyBpcyB0aGUgY29uanVuY3Rpb24gb2YgdGhlbS5cbiAgICAgICAgcmV0dXJuIGduLmNyZWF0ZShbIHQsIGUgXSwgXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8pO1xuICAgIH0odCwgZSkgOiBRcih0LCBlKSA6IGUgaW5zdGFuY2VvZiBtbiA/IFFyKGUsIHQpIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBUaGVyZSBhcmUgZm91ciBjYXNlczpcbiAgICAgICAgLy8gKEEgJiBCKSAmIChDICYgRCkgLS0+IChBICYgQiAmIEMgJiBEKVxuICAgICAgICAvLyAoQSAmIEIpICYgKEMgfCBEKSAtLT4gKEEgJiBCICYgQykgfCAoQSAmIEIgJiBEKVxuICAgICAgICAvLyAoQSB8IEIpICYgKEMgJiBEKSAtLT4gKEMgJiBEICYgQSkgfCAoQyAmIEQgJiBCKVxuICAgICAgICAvLyAoQSB8IEIpICYgKEMgfCBEKSAtLT4gKEEgJiBDKSB8IChBICYgRCkgfCAoQiAmIEMpIHwgKEIgJiBEKVxuICAgICAgICAvLyBDYXNlIDEgaXMgYSBtZXJnZS5cbiAgICAgICAgaWYgKEYodC5maWx0ZXJzLmxlbmd0aCA+IDAgJiYgZS5maWx0ZXJzLmxlbmd0aCA+IDApLCB5bih0KSAmJiB5bihlKSkgcmV0dXJuIHZuKHQsIGUuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgLy8gQ2FzZSAyLDMsNCBhbGwgaGF2ZSBhdCBsZWFzdCBvbmUgc2lkZSAobGhzIG9yIHJocykgdGhhdCBpcyBhIGRpc2p1bmN0aW9uLiBJbiBhbGwgdGhyZWUgY2FzZXNcbiAgICAgICAgLy8gd2Ugc2hvdWxkIHRha2UgZWFjaCBlbGVtZW50IG9mIHRoZSBkaXNqdW5jdGlvbiBhbmQgZGlzdHJpYnV0ZSBpdCBvdmVyIHRoZSBvdGhlciBzaWRlLCBhbmRcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBkaXNqdW5jdGlvbiBvZiB0aGUgZGlzdHJpYnV0aW9uIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHBuKHQpID8gdCA6IGUsIHMgPSBwbih0KSA/IGUgOiB0LCBpID0gbi5maWx0ZXJzLm1hcCgodCA9PiBHcih0LCBzKSkpO1xuICAgICAgICByZXR1cm4gZ24uY3JlYXRlKGksIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgfSh0LCBlKSwganIobik7XG59XG5cbmZ1bmN0aW9uIFFyKHQsIGUpIHtcbiAgICAvLyBUaGVyZSBhcmUgdHdvIGNhc2VzOlxuICAgIC8vIEEgJiAoQiAmIEMpIC0tPiAoQSAmIEIgJiBDKVxuICAgIC8vIEEgJiAoQiB8IEMpIC0tPiAoQSAmIEIpIHwgKEEgJiBDKVxuICAgIGlmICh5bihlKSkgXG4gICAgLy8gQ2FzZSAxXG4gICAgcmV0dXJuIHZuKGUsIHQuZ2V0RmlsdGVycygpKTtcbiAgICB7XG4gICAgICAgIC8vIENhc2UgMlxuICAgICAgICBjb25zdCBuID0gZS5maWx0ZXJzLm1hcCgoZSA9PiBHcih0LCBlKSkpO1xuICAgICAgICByZXR1cm4gZ24uY3JlYXRlKG4sIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhlIGFzc29jaWF0aXZpdHkgcHJvcGVydHkgdG8gdGhlIGdpdmVuIGZpbHRlciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIGZpbHRlci5cbiAqXG4gKiA8dWw+XG4gKiAgIDxsaT5BIHwgKEIgfCBDKSA9PSAoQSB8IEIpIHwgQyA9PSAoQSB8IEIgfCBDKVxuICogICA8bGk+QSAmIChCICYgQykgPT0gKEEgJiBCKSAmIEMgPT0gKEEgJiBCICYgQylcbiAqIDwvdWw+XG4gKlxuICogPHA+Rm9yIG1vcmUgaW5mbywgdmlzaXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Fzc29jaWF0aXZlX3Byb3BlcnR5I1Byb3Bvc2l0aW9uYWxfbG9naWNcbiAqLyBmdW5jdGlvbiBqcih0KSB7XG4gICAgaWYgKEYodCBpbnN0YW5jZW9mIG1uIHx8IHQgaW5zdGFuY2VvZiBnbiksIHQgaW5zdGFuY2VvZiBtbikgcmV0dXJuIHQ7XG4gICAgY29uc3QgZSA9IHQuZ2V0RmlsdGVycygpO1xuICAgIC8vIElmIHRoZSBjb21wb3NpdGUgZmlsdGVyIG9ubHkgY29udGFpbnMgMSBmaWx0ZXIsIGFwcGx5IGFzc29jaWF0aXZpdHkgdG8gaXQuXG4gICAgICAgIGlmICgxID09PSBlLmxlbmd0aCkgcmV0dXJuIGpyKGVbMF0pO1xuICAgIC8vIEFzc29jaWF0aXZpdHkgYXBwbGllZCB0byBhIGZsYXQgY29tcG9zaXRlIGZpbHRlciByZXN1bHRzIGlzIGl0c2VsZi5cbiAgICAgICAgaWYgKFRuKHQpKSByZXR1cm4gdDtcbiAgICAvLyBGaXJzdCBhcHBseSBhc3NvY2lhdGl2aXR5IHRvIGFsbCBzdWJmaWx0ZXJzLiBUaGlzIHdpbGwgaW4gdHVybiByZWN1cnNpdmVseSBhcHBseVxuICAgIC8vIGFzc29jaWF0aXZpdHkgdG8gYWxsIG5lc3RlZCBjb21wb3NpdGUgZmlsdGVycyBhbmQgZmllbGQgZmlsdGVycy5cbiAgICAgICAgY29uc3QgbiA9IGUubWFwKCh0ID0+IGpyKHQpKSksIHMgPSBbXTtcbiAgICAvLyBGb3IgY29tcG9zaXRlIHN1YmZpbHRlcnMgdGhhdCBwZXJmb3JtIHRoZSBzYW1lIGtpbmQgb2YgbG9naWNhbCBvcGVyYXRpb24gYXMgYGNvbXBvc2l0ZUZpbHRlcmBcbiAgICAvLyB0YWtlIG91dCB0aGVpciBmaWx0ZXJzIGFuZCBhZGQgdGhlbSB0byBgY29tcG9zaXRlRmlsdGVyYC4gRm9yIGV4YW1wbGU6XG4gICAgLy8gY29tcG9zaXRlRmlsdGVyID0gKEEgfCAoQiB8IEMgfCBEKSlcbiAgICAvLyBjb21wb3NpdGVTdWJmaWx0ZXIgPSAoQiB8IEMgfCBEKVxuICAgIC8vIFJlc3VsdDogKEEgfCBCIHwgQyB8IEQpXG4gICAgLy8gTm90ZSB0aGF0IHRoZSBgY29tcG9zaXRlU3ViZmlsdGVyYCBoYXMgYmVlbiBlbGltaW5hdGVkLCBhbmQgaXRzIGZpbHRlcnMgKEIsIEMsIEQpIGhhdmUgYmVlblxuICAgIC8vIGFkZGVkIHRvIHRoZSB0b3AtbGV2ZWwgXCJjb21wb3NpdGVGaWx0ZXJcIi5cbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgIGUgaW5zdGFuY2VvZiBtbiA/IHMucHVzaChlKSA6IGUgaW5zdGFuY2VvZiBnbiAmJiAoZS5vcCA9PT0gdC5vcCA/IFxuICAgICAgICAvLyBjb21wb3NpdGVGaWx0ZXI6IChBIHwgKEIgfCBDKSlcbiAgICAgICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyOiAoQiB8IEMpXG4gICAgICAgIC8vIFJlc3VsdDogKEEgfCBCIHwgQylcbiAgICAgICAgcy5wdXNoKC4uLmUuZmlsdGVycykgOiBcbiAgICAgICAgLy8gY29tcG9zaXRlRmlsdGVyOiAoQSB8IChCICYgQykpXG4gICAgICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlcjogKEIgJiBDKVxuICAgICAgICAvLyBSZXN1bHQ6IChBIHwgKEIgJiBDKSlcbiAgICAgICAgcy5wdXNoKGUpKTtcbiAgICB9KSksIDEgPT09IHMubGVuZ3RoID8gc1swXSA6IGduLmNyZWF0ZShzLCB0Lm9wKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqLyBjbGFzcyB6ciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucm4gPSBuZXcgV3I7XG4gICAgfVxuICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm4uYWRkKGUpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5ybi5nZXRFbnRyaWVzKGUpKTtcbiAgICB9XG4gICAgYWRkRmllbGRJbmRleCh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGRlbGV0ZUZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBnZXRJbmRleFR5cGUodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSgwIC8qIEluZGV4VHlwZS5OT05FICovKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleGVzKHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoW10pO1xuICAgIH1cbiAgICBnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUodCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoSXQubWluKCkpO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoSXQubWluKCkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAodCwgZSwgbikge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVJbmRleEVudHJpZXModCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZXhwb3NlZCBieSBNZW1vcnlJbmRleE1hbmFnZXIuXG4gKiBBbHNvIHVzZWQgZm9yIGluLW1lbW9yeSBjYWNoaW5nIGJ5IEluZGV4ZWREYkluZGV4TWFuYWdlciBhbmQgaW5pdGlhbCBpbmRleCBwb3B1bGF0aW9uXG4gKiBpbiBpbmRleGVkZGJfc2NoZW1hLnRzXG4gKi8gY2xhc3MgV3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluZGV4ID0ge307XG4gICAgfVxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cbiAgICBhZGQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdIHx8IG5ldyBFZSh1dC5jb21wYXJhdG9yKSwgaSA9ICFzLmhhcyhuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhbZV0gPSBzLmFkZChuKSwgaTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgcy5oYXMobik7XG4gICAgfVxuICAgIGdldEVudHJpZXModCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaW5kZXhbdF0gfHwgbmV3IEVlKHV0LmNvbXBhcmF0b3IpKS50b0FycmF5KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBIciA9IG5ldyBVaW50OEFycmF5KDApO1xuXG4vKipcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFVubGlrZSBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXZWIgU0RLIGRvZXMgbm90IG1lbW9pemUgaW5kZXhcbiAqIGRhdGEgYXMgaXQgc3VwcG9ydHMgbXVsdGktdGFiIGFjY2Vzcy5cbiAqL1xuY2xhc3MgSnIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZVxuICAgICAgICAgKiB1c2VkIHRvIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uID0gbmV3IFdyLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgZnJvbSBhIHRhcmdldCB0byBpdHMgZXF1aXZhbGVudCBsaXN0IG9mIHN1Yi10YXJnZXRzLiBFYWNoIHN1Yi10YXJnZXRcbiAgICAgICAgICogY29udGFpbnMgb25seSBvbmUgdGVybSBmcm9tIHRoZSB0YXJnZXQncyBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudW4gPSBuZXcgb3MoKHQgPT4gJG4odCkpLCAoKHQsIGUpID0+IE9uKHQsIGUpKSksIHRoaXMudWlkID0gdC51aWQgfHwgXCJcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBlbnRyeSB0byB0aGUgY29sbGVjdGlvbiBwYXJlbnQgaW5kZXguXG4gICAgICpcbiAgICAgKiBSZXBlYXRlZCBjYWxscyBmb3IgdGhlIHNhbWUgY29sbGVjdGlvblBhdGggc2hvdWxkIGJlIGF2b2lkZWQgd2l0aGluIGFcbiAgICAgKiB0cmFuc2FjdGlvbiBhcyBJbmRleGVkRGJJbmRleE1hbmFnZXIgb25seSBjYWNoZXMgd3JpdGVzIG9uY2UgYSB0cmFuc2FjdGlvblxuICAgICAqIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgKi8gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICBpZiAoIXRoaXMub24uaGFzKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5sYXN0U2VnbWVudCgpLCBzID0gZS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNvbGxlY3Rpb24gdG8gdGhlIGluIG1lbW9yeSBjYWNoZSBvbmx5IGlmIHRoZSB0cmFuc2FjdGlvbiB3YXNcbiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzZnVsbHkgY29tbWl0dGVkLlxuICAgICAgICAgICAgICAgIHRoaXMub24uYWRkKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IG4sXG4gICAgICAgICAgICAgICAgcGFyZW50OiBxdChzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBZcih0KS5wdXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUsIFwiXCIgXSwgWyBzdChlKSwgXCJcIiBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBZcih0KS5qKHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcbiAgICAgICAgICAgICAgICBpZiAocy5jb2xsZWN0aW9uSWQgIT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgICAgIG4ucHVzaChHdChzLnBhcmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYWRkRmllbGRJbmRleCh0LCBlKSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBWZXJpZnkgdGhhdCB0aGUgYXV0by1pbmNyZW1lbnRpbmcgaW5kZXggSUQgd29ya3MgaW5cbiAgICAgICAgLy8gU2FmYXJpICYgRmlyZWZveC5cbiAgICAgICAgY29uc3QgbiA9IFpyKHQpLCBzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbmRleElkOiB0LmluZGV4SWQsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiB0LmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHQuZmllbGRzLm1hcCgodCA9PiBbIHQuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCB0LmtpbmQgXSkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpO1xuICAgICAgICBkZWxldGUgcy5pbmRleElkO1xuICAgICAgICAvLyBgaW5kZXhJZGAgaXMgYXV0by1wb3B1bGF0ZWQgYnkgSW5kZXhlZERiXG4gICAgICAgIGNvbnN0IGkgPSBuLmFkZChzKTtcbiAgICAgICAgaWYgKGUuaW5kZXhTdGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRvKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgbi5wdXQoVHIodCwgdGhpcy51c2VyLCBlLmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXIsIGUuaW5kZXhTdGF0ZS5vZmZzZXQpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaS5uZXh0KCk7XG4gICAgfVxuICAgIGRlbGV0ZUZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gWnIodCksIHMgPSB0byh0KSwgaSA9IFhyKHQpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUoZS5pbmRleElkKS5uZXh0KCgoKSA9PiBzLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChbIGUuaW5kZXhJZCBdLCBbIGUuaW5kZXhJZCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApKSkpLm5leHQoKCgpID0+IGkuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKFsgZS5pbmRleElkIF0sIFsgZS5pbmRleElkICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCkpKSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFhyKHQpO1xuICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICBjb25zdCBpID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2godGhpcy5jbihlKSwgKGUgPT4gdGhpcy5hbih0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHMgJiYgKHMgPSAhIXQpLCBpLnNldChlLCB0KTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGdzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBSdC5mb3JFYWNoKGksICgoaSwgcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgICAgICAgICAgTihcIkluZGV4ZWREYkluZGV4TWFuYWdlclwiLCBgVXNpbmcgaW5kZXggJHtvID0gaSwgYGlkPSR7by5pbmRleElkfXxjZz0ke28uY29sbGVjdGlvbkdyb3VwfXxmPSR7by5maWVsZHMubWFwKCh0ID0+IGAke3QuZmllbGRQYXRofToke3Qua2luZH1gKSkuam9pbihcIixcIil9YH0gdG8gZXhlY3V0ZSAkeyRuKGUpfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGZ0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgQm4odCwgbi5maWVsZFBhdGgpKSBzd2l0Y2ggKGUub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUudmFsdWUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIGUudmFsdWUgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgZmlsdGVycyBhcmUgbm90IGFycmF5IGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIGxpc3Qgb2YgdmFsdWVzIHRoYXQgYXJlIHVzZWQgaW4gIT0gb3IgTk9UX0lOIGZpbHRlcnMuIFJldHVybnNcbiAqIGBudWxsYCBpZiB0aGVyZSBhcmUgbm8gc3VjaCBmaWx0ZXJzLlxuICovIChyLCBpKSwgYyA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGR0KGUpKSBmb3IgKGNvbnN0IGUgb2YgQm4odCwgcy5maWVsZFBhdGgpKSBzd2l0Y2ggKGUub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5jb2RlIGVxdWFsaXR5IHByZWZpeCwgd2hpY2ggaXMgZW5jb2RlZCBpbiB0aGUgaW5kZXggdmFsdWUgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGluZXF1YWxpdHkgKGUuZy4gYGEgPT0gJ2EnICYmIGIgIT0gJ2InYCBpcyBlbmNvZGVkIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYHZhbHVlICE9ICdhYidgKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnNldChzLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90SW4vTm90RXF1YWwgaXMgYWx3YXlzIGEgc3VmZml4LiBUaGVyZSBjYW5ub3QgYmUgYW55IHJlbWFpbmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZ21lbnRzIGFuZCBoZW5jZSB3ZSBjYW4gcmV0dXJuIGVhcmx5IGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc2V0KHMuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCBlLnZhbHVlKSwgQXJyYXkuZnJvbShuLnZhbHVlcygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBub3RJbiBib3VuZHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBsb3dlciBib3VuZCBvZiBmaWVsZCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHN0YXJ0aW5nIHBvaW50IHRvXG4gKiBzY2FuIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgTUlOX1ZBTFVFYCBpZiBubyBsb3dlciBib3VuZFxuICogZXhpc3RzLlxuICovIChyLCBpKSwgYSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhIGxvd2VyIGJvdW5kIGlmIHRoZXJlIGlzIGEgc3VpdGFibGUgZmlsdGVyIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGR0KGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gaS5raW5kID8gTG4odCwgaS5maWVsZFBhdGgsIHQuc3RhcnRBdCkgOiBxbih0LCBpLmZpZWxkUGF0aCwgdC5zdGFydEF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goZS52YWx1ZSksIHMgJiYgKHMgPSBlLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGhuKG4sIHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhbiB1cHBlciBib3VuZCBvZiBmaWVsZCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCBhcyBhbiBlbmRpbmcgcG9pbnRcbiAqIHdoZW4gc2Nhbm5pbmcgdGhlIGluZGV4IGRlZmluZWQgYnkgYGZpZWxkSW5kZXhgLiBSZXR1cm5zIGBNQVhfVkFMVUVgIGlmIG5vXG4gKiB1cHBlciBib3VuZCBleGlzdHMuXG4gKi8gKHIsIGkpLCBoID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBlYWNoIHNlZ21lbnQsIHJldHJpZXZlIGFuIHVwcGVyIGJvdW5kIGlmIHRoZXJlIGlzIGEgc3VpdGFibGUgZmlsdGVyIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmRBdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBkdChlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGkua2luZCA/IHFuKHQsIGkuZmllbGRQYXRoLCB0LmVuZEF0KSA6IExuKHQsIGkuZmllbGRQYXRoLCB0LmVuZEF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goZS52YWx1ZSksIHMgJiYgKHMgPSBlLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGhuKG4sIHMpO1xuICAgICAgICAgICAgICAgICAgICB9KHIsIGkpLCBsID0gdGhpcy5obihpLCByLCBhKSwgZiA9IHRoaXMuaG4oaSwgciwgaCksIGQgPSB0aGlzLmxuKGksIHIsIGMpLCB3ID0gdGhpcy5mbihpLmluZGV4SWQsIHUsIGwsIGEuaW5jbHVzaXZlLCBmLCBoLmluY2x1c2l2ZSwgZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBSdC5mb3JFYWNoKHcsIChpID0+IG4uSChpLCBlLmxpbWl0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGh0LmZyb21TZWdtZW50cyhlLmRvY3VtZW50S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmhhcyhuKSB8fCAodCA9IHQuYWRkKG4pLCBzLnB1c2gobikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY24odCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMudW4uZ2V0KHQpO1xuICAgICAgICBpZiAoZSkgcmV0dXJuIGU7XG4gICAgICAgIGlmICgwID09PSB0LmZpbHRlcnMubGVuZ3RoKSBlID0gWyB0IF07IGVsc2Uge1xuICAgICAgICAgICAgZSA9IEJyKGduLmNyZWF0ZSh0LmZpbHRlcnMsIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKSkubWFwKChlID0+IE1uKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQub3JkZXJCeSwgZS5nZXRGaWx0ZXJzKCksIHQubGltaXQsIHQuc3RhcnRBdCwgdC5lbmRBdCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy51bi5zZXQodCwgZSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBrZXkgcmFuZ2UgcXVlcnkgb24gYERiSW5kZXhFbnRyeVN0b3JlYCB0aGF0IHVuaW9ucyBhbGxcbiAgICAgKiBib3VuZHMuXG4gICAgICovICAgIGZuKHQsIGUsIG4sIHMsIGksIHIsIG8pIHtcbiAgICAgICAgLy8gVGhlIG51bWJlciBvZiB0b3RhbCBpbmRleCBzY2FucyB3ZSB1bmlvbiB0b2dldGhlci4gVGhpcyBpcyBzaW1pbGFyIHRvIGFcbiAgICAgICAgLy8gZGlzdHJpYnV0ZWQgbm9ybWFsIGZvcm0sIGJ1dCBhZGFwdGVkIGZvciBhcnJheSB2YWx1ZXMuIFdlIGNyZWF0ZSBhIHNpbmdsZVxuICAgICAgICAvLyBpbmRleCByYW5nZSBwZXIgdmFsdWUgaW4gYW4gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlclxuICAgICAgICAvLyBjb21iaW5lZCB3aXRoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgcXVlcnkgYm91bmRzLlxuICAgICAgICBjb25zdCB1ID0gKG51bGwgIT0gZSA/IGUubGVuZ3RoIDogMSkgKiBNYXRoLm1heChuLmxlbmd0aCwgaS5sZW5ndGgpLCBjID0gdSAvIChudWxsICE9IGUgPyBlLmxlbmd0aCA6IDEpLCBhID0gW107XG4gICAgICAgIGZvciAobGV0IGggPSAwOyBoIDwgdTsgKytoKSB7XG4gICAgICAgICAgICBjb25zdCB1ID0gZSA/IHRoaXMuZG4oZVtoIC8gY10pIDogSHIsIGwgPSB0aGlzLnduKHQsIHUsIG5baCAlIGNdLCBzKSwgZiA9IHRoaXMuX24odCwgdSwgaVtoICUgY10sIHIpLCBkID0gby5tYXAoKGUgPT4gdGhpcy53bih0LCB1LCBlLCBcbiAgICAgICAgICAgIC8qIGluY2x1c2l2ZT0gKi8gITApKSk7XG4gICAgICAgICAgICBhLnB1c2goLi4udGhpcy5jcmVhdGVSYW5nZShsLCBmLCBkKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIGxvd2VyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgd24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IGtyKHQsIGh0LmVtcHR5KCksIGUsIG4pO1xuICAgICAgICByZXR1cm4gcyA/IGkgOiBpLkplKCk7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIHVwcGVyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgX24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IGtyKHQsIGh0LmVtcHR5KCksIGUsIG4pO1xuICAgICAgICByZXR1cm4gcyA/IGkuSmUoKSA6IGk7XG4gICAgfVxuICAgIGFuKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBPcihlKSwgcyA9IG51bGwgIT0gZS5jb2xsZWN0aW9uR3JvdXAgPyBlLmNvbGxlY3Rpb25Hcm91cCA6IGUucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXModCwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGluZGV4IHdpdGggdGhlIG1vc3QgbnVtYmVyIG9mIHNlZ21lbnRzLlxuICAgICAgICAgICAgbGV0IGUgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBuLnRuKHMpICYmICghZSB8fCBzLmZpZWxkcy5sZW5ndGggPiBlLmZpZWxkcy5sZW5ndGgpICYmIChlID0gcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRJbmRleFR5cGUodCwgZSkge1xuICAgICAgICBsZXQgbiA9IDIgLyogSW5kZXhUeXBlLkZVTEwgKi87XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmNuKGUpO1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChzLCAoZSA9PiB0aGlzLmFuKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCA/IDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gIT09IG4gJiYgdC5maWVsZHMubGVuZ3RoIDwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IEVlKGF0LmNvbXBhcmF0b3IpLCBuID0gITE7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHQuZmlsdGVycykgZm9yIChjb25zdCB0IG9mIHMuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBcbiAgICAgICAgICAgICAgICAvLyBfX25hbWVfXyBpcyBub3QgYW4gZXhwbGljaXQgc2VnbWVudCBvZiBhbnkgaW5kZXgsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb3VudCBpdC5cbiAgICAgICAgICAgICAgICB0LmZpZWxkLmlzS2V5RmllbGQoKSB8fCAoXG4gICAgICAgICAgICAgICAgLy8gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlcnMgbXVzdCBiZSBjb3VudGVkIHNlcGFyYXRlbHkuXG4gICAgICAgICAgICAgICAgLy8gRm9yIGluc3RhbmNlLCBpdCBpcyBwb3NzaWJsZSB0byBoYXZlIGFuIGluZGV4IGZvciBcImEgQVJSQVkgYSBBU0NcIi4gRXZlblxuICAgICAgICAgICAgICAgIC8vIHRob3VnaCB0aGVzZSBhcmUgb24gdGhlIHNhbWUgZmllbGQsIHRoZXkgc2hvdWxkIGJlIGNvdW50ZWQgYXMgdHdvXG4gICAgICAgICAgICAgICAgLy8gc2VwYXJhdGUgc2VnbWVudHMgaW4gYW4gaW5kZXguXG4gICAgICAgICAgICAgICAgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSB0Lm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSB0Lm9wID8gbiA9ICEwIDogZSA9IGUuYWRkKHQuZmllbGQpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5vcmRlckJ5KSBcbiAgICAgICAgICAgICAgICAvLyBfX25hbWVfXyBpcyBub3QgYW4gZXhwbGljaXQgc2VnbWVudCBvZiBhbnkgaW5kZXgsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb3VudCBpdC5cbiAgICAgICAgICAgICAgICBuLmZpZWxkLmlzS2V5RmllbGQoKSB8fCAoZSA9IGUuYWRkKG4uZmllbGQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5zaXplICsgKG4gPyAxIDogMCk7XG4gICAgICAgICAgICB9KGUpICYmIChuID0gMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLykgOiBuID0gMCAvKiBJbmRleFR5cGUuTk9ORSAqLztcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gXG4gICAgICAgIC8vIE9SIHF1ZXJpZXMgaGF2ZSBtb3JlIHRoYW4gb25lIHN1Yi10YXJnZXQgKG9uZSBzdWItdGFyZ2V0IHBlciBETkYgdGVybSkuIFdlIGN1cnJlbnRseSBjb25zaWRlclxuICAgICAgICAvLyBPUiBxdWVyaWVzIHRoYXQgaGF2ZSBhIGBsaW1pdGAgdG8gaGF2ZSBhIHBhcnRpYWwgaW5kZXguIEZvciBzdWNoIHF1ZXJpZXMgd2UgcGVyZm9ybSBzb3J0aW5nXG4gICAgICAgIC8vIGFuZCBhcHBseSB0aGUgbGltaXQgaW4gbWVtb3J5IGFzIGEgcG9zdC1wcm9jZXNzaW5nIHN0ZXAuXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSB0LmxpbWl0O1xuICAgICAgICB9KGUpICYmIHMubGVuZ3RoID4gMSAmJiAyIC8qIEluZGV4VHlwZS5GVUxMICovID09PSBuID8gMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA6IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYnl0ZSBlbmNvZGVkIGZvcm0gb2YgdGhlIGRpcmVjdGlvbmFsIHZhbHVlcyBpbiB0aGUgZmllbGQgaW5kZXguXG4gICAgICogUmV0dXJucyBgbnVsbGAgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGhhdmUgYWxsIGZpZWxkcyBzcGVjaWZpZWQgaW4gdGhlXG4gICAgICogaW5kZXguXG4gICAgICovICAgIG1uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBOcjtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIGR0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHMuZmllbGRQYXRoKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uSGUocy5raW5kKTtcbiAgICAgICAgICAgIGJyLlZlLl9lKHQsIGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuLlFlKCk7XG4gICAgfVxuICAgIC8qKiBFbmNvZGVzIGEgc2luZ2xlIHZhbHVlIHRvIHRoZSBhc2NlbmRpbmcgaW5kZXggZm9ybWF0LiAqLyAgICBkbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTnI7XG4gICAgICAgIHJldHVybiBici5WZS5fZSh0LCBlLkhlKDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLykpLCBlLlFlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW5jb2RlZCBmb3JtIG9mIHRoZSBkb2N1bWVudCBrZXkgdGhhdCBzb3J0cyBiYXNlZCBvbiB0aGUga2V5XG4gICAgICogb3JkZXJpbmcgb2YgdGhlIGZpZWxkIGluZGV4LlxuICAgICAqLyAgICBnbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTnI7XG4gICAgICAgIHJldHVybiBici5WZS5fZShXZSh0aGlzLmRhdGFiYXNlSWQsIGUpLCBuLkhlKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBkdCh0KTtcbiAgICAgICAgICAgIHJldHVybiAwID09PSBlLmxlbmd0aCA/IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA6IGVbZS5sZW5ndGggLSAxXS5raW5kO1xuICAgICAgICB9KHQpKSksIG4uUWUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gZmllbGQgdmFsdWVzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBpbiBgdGFyZ2V0YC5cbiAgICAgKiBGb3IgSU4gcXVlcmllcywgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgbG4odCwgZSwgbikge1xuICAgICAgICBpZiAobnVsbCA9PT0gbikgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgcyA9IFtdO1xuICAgICAgICBzLnB1c2gobmV3IE5yKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZHQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuW2krK107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgcykgaWYgKHRoaXMueW4oZSwgci5maWVsZFBhdGgpICYmIEplKHQpKSBzID0gdGhpcy5wbihzLCByLCB0KTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG4uSGUoci5raW5kKTtcbiAgICAgICAgICAgICAgICBici5WZS5fZSh0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5JbihzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gYm91bmRzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBpbiBgdGFyZ2V0YC4gRm9yIElOXG4gICAgICogcXVlcmllcywgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgaG4odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5sbih0LCBlLCBuLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGJ5dGUgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBwcm92aWRlZCBlbmNvZGVycy4gKi8gICAgSW4odCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikgZVtuXSA9IHRbbl0uUWUoKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZXBhcmF0ZSBlbmNvZGVyIGZvciBlYWNoIGVsZW1lbnQgb2YgYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgbWV0aG9kIGFwcGVuZHMgZWFjaCB2YWx1ZSB0byBhbGwgZXhpc3RpbmcgZW5jb2RlcnMgKGUuZy4gZmlsdGVyKFwiYVwiLFxuICAgICAqIFwiPT1cIiwgXCJhMVwiKS5maWx0ZXIoXCJiXCIsIFwiaW5cIiwgW1wiYjFcIiwgXCJiMlwiXSkgYmVjb21lcyBbXCJhMSxiMVwiLCBcImExLGIyXCJdKS4gQVxuICAgICAqIGxpc3Qgb2YgbmV3IGVuY29kZXJzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBwbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbIC4uLnQgXSwgaSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbi5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkgZm9yIChjb25zdCBuIG9mIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgTnI7XG4gICAgICAgICAgICBzLnNlZWQobi5RZSgpKSwgYnIuVmUuX2UodCwgcy5IZShlLmtpbmQpKSwgaS5wdXNoKHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICB5bih0LCBlKSB7XG4gICAgICAgIHJldHVybiAhIXQuZmlsdGVycy5maW5kKCh0ID0+IHQgaW5zdGFuY2VvZiBtbiAmJiB0LmZpZWxkLmlzRXF1YWwoZSkgJiYgKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gdC5vcCB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gdC5vcCkpKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleGVzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFpyKHQpLCBzID0gdG8odCk7XG4gICAgICAgIHJldHVybiAoZSA/IG4uaihcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIElEQktleVJhbmdlLmJvdW5kKGUsIGUpKSA6IG4uaigpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBSdC5mb3JFYWNoKHQsICh0ID0+IHMuZ2V0KFsgdC5pbmRleElkLCB0aGlzLnVpZCBdKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICBlLnB1c2goZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZSA/IG5ldyBndChlLnNlcXVlbmNlTnVtYmVyLCBuZXcgSXQod3IoZS5yZWFkVGltZSksIG5ldyBodChHdChlLmRvY3VtZW50S2V5KSksIGUubGFyZ2VzdEJhdGNoSWQpKSA6IGd0LmVtcHR5KCksIHMgPSB0LmZpZWxkcy5tYXAoKChbdCwgZV0pID0+IG5ldyBfdChhdC5mcm9tU2VydmVyRm9ybWF0KHQpLCBlKSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGx0KHQuaW5kZXhJZCwgdC5jb2xsZWN0aW9uR3JvdXAsIHMsIG4pO1xuICAgICAgICAgICAgICAgIH0odCwgbikpO1xuICAgICAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gZSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyh0KS5uZXh0KCh0ID0+IDAgPT09IHQubGVuZ3RoID8gbnVsbCA6ICh0LnNvcnQoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyIC0gZS5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyO1xuICAgICAgICAgICAgcmV0dXJuIDAgIT09IG4gPyBuIDogZXQodC5jb2xsZWN0aW9uR3JvdXAsIGUuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgfSkpLCB0WzBdLmNvbGxlY3Rpb25Hcm91cCkpKTtcbiAgICB9XG4gICAgdXBkYXRlQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFpyKHQpLCBpID0gdG8odCk7XG4gICAgICAgIHJldHVybiB0aGlzLlRuKHQpLm5leHQoKHQgPT4gcy5qKFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgSURCS2V5UmFuZ2UuYm91bmQoZSwgZSkpLm5leHQoKGUgPT4gUnQuZm9yRWFjaChlLCAoZSA9PiBpLnB1dChUcihlLmluZGV4SWQsIHRoaXMudXNlciwgdCwgbikpKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVJbmRleEVudHJpZXModCwgZSkge1xuICAgICAgICAvLyBQb3J0aW5nIE5vdGU6IGBnZXRGaWVsZEluZGV4ZXMoKWAgb24gV2ViIGRvZXMgbm90IGNhY2hlIGluZGV4IGxvb2t1cHMgYXNcbiAgICAgICAgLy8gaXQgY291bGQgYmUgdXNlZCBhY3Jvc3MgZGlmZmVyZW50IEluZGV4ZWREQiB0cmFuc2FjdGlvbnMuIEFzIGFueSBjYWNoZWRcbiAgICAgICAgLy8gZGF0YSBtaWdodCBiZSBpbnZhbGlkYXRlZCBieSBvdGhlciBtdWx0aS10YWIgY2xpZW50cywgd2UgY2FuIG9ubHkgdHJ1c3RcbiAgICAgICAgLy8gZGF0YSB3aXRoaW4gYSBzaW5nbGUgSW5kZXhlZERCIHRyYW5zYWN0aW9uLiBXZSB0aGVyZWZvcmUgYWRkIGEgY2FjaGVcbiAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKGUsICgoZSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uZ2V0KGUuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgICAgIHJldHVybiAoaSA/IFJ0LnJlc29sdmUoaSkgOiB0aGlzLmdldEZpZWxkSW5kZXhlcyh0LCBlLmNvbGxlY3Rpb25Hcm91cCkpLm5leHQoKGkgPT4gKG4uc2V0KGUuY29sbGVjdGlvbkdyb3VwLCBpKSwgXG4gICAgICAgICAgICBSdC5mb3JFYWNoKGksIChuID0+IHRoaXMuRW4odCwgZSwgbikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuQW4ocywgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuaXNFcXVhbChpKSA/IFJ0LnJlc29sdmUoKSA6IHRoaXMudm4odCwgcywgbiwgZSwgaSk7XG4gICAgICAgICAgICB9KSkpKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBSbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBYcih0KS5wdXQoe1xuICAgICAgICAgICAgaW5kZXhJZDogcy5pbmRleElkLFxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHMuYXJyYXlWYWx1ZSxcbiAgICAgICAgICAgIGRpcmVjdGlvbmFsVmFsdWU6IHMuZGlyZWN0aW9uYWxWYWx1ZSxcbiAgICAgICAgICAgIG9yZGVyZWREb2N1bWVudEtleTogdGhpcy5nbihuLCBlLmtleSksXG4gICAgICAgICAgICBkb2N1bWVudEtleTogZS5rZXkucGF0aC50b0FycmF5KClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFBuKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIFhyKHQpLmRlbGV0ZShbIHMuaW5kZXhJZCwgdGhpcy51aWQsIHMuYXJyYXlWYWx1ZSwgcy5kaXJlY3Rpb25hbFZhbHVlLCB0aGlzLmduKG4sIGUua2V5KSwgZS5rZXkucGF0aC50b0FycmF5KCkgXSk7XG4gICAgfVxuICAgIEVuKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFhyKHQpO1xuICAgICAgICBsZXQgaSA9IG5ldyBFZShNcik7XG4gICAgICAgIHJldHVybiBzLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoWyBuLmluZGV4SWQsIHRoaXMudWlkLCB0aGlzLmduKG4sIGUpIF0pXG4gICAgICAgIH0sICgodCwgcykgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKG5ldyBrcihuLmluZGV4SWQsIGUsIHMuYXJyYXlWYWx1ZSwgcy5kaXJlY3Rpb25hbFZhbHVlKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIHRoZSBpbmRleCBlbnRyaWVzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovICAgIEFuKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgRWUoTXIpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5tbihlLCB0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gcykgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSBmdChlKTtcbiAgICAgICAgaWYgKG51bGwgIT0gaSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZGF0YS5maWVsZChpLmZpZWxkUGF0aCk7XG4gICAgICAgICAgICBpZiAoSmUocikpIGZvciAoY29uc3QgaSBvZiByLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKSBuID0gbi5hZGQobmV3IGtyKGUuaW5kZXhJZCwgdC5rZXksIHRoaXMuZG4oaSksIHMpKTtcbiAgICAgICAgfSBlbHNlIG4gPSBuLmFkZChuZXcga3IoZS5pbmRleElkLCB0LmtleSwgSHIsIHMpKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBkb2N1bWVudCBieSBkZWxldGluZyBlbnRyaWVzXG4gICAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlZmVyZW5jZWQgaW4gYG5ld0VudHJpZXNgIGFuZCBhZGRpbmcgYWxsIG5ld2x5IGFkZGVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgdm4odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBOKFwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyXCIsIFwiVXBkYXRpbmcgaW5kZXggZW50cmllcyBmb3IgZG9jdW1lbnQgJyVzJ1wiLCBlLmtleSk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LmdldEl0ZXJhdG9yKCksIG8gPSBlLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgICAgICBsZXQgdSA9IHZlKHIpLCBjID0gdmUobyk7XG4gICAgICAgICAgICAvLyBXYWxrIHRocm91Z2ggdGhlIHR3byBzZXRzIGF0IHRoZSBzYW1lIHRpbWUsIHVzaW5nIHRoZSBvcmRlcmluZyBkZWZpbmVkIGJ5XG4gICAgICAgICAgICAvLyBgY29tcGFyYXRvcmAuXG4gICAgICAgICAgICBmb3IgKDt1IHx8IGM7ICkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gITEsIGUgPSAhMTtcbiAgICAgICAgICAgICAgICBpZiAodSAmJiBjKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuKHUsIGMpO1xuICAgICAgICAgICAgICAgICAgICBzIDwgMCA/IFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhbGt0aHJvdWdoIGlzIG9ubHkgaW4gYGJlZm9yZWAuXG4gICAgICAgICAgICAgICAgICAgIGUgPSAhMCA6IHMgPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWQgd2Fsa3Rocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgICAgICB0ID0gITApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBudWxsICE9IHUgPyBlID0gITAgOiB0ID0gITA7XG4gICAgICAgICAgICAgICAgdCA/IChzKGMpLCBjID0gdmUobykpIDogZSA/IChpKHUpLCB1ID0gdmUocikpIDogKHUgPSB2ZShyKSwgYyA9IHZlKG8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShzLCBpLCBNciwgKFxuICAgICAgICAvKiBvbkFkZD0gKi8gcyA9PiB7XG4gICAgICAgICAgICByLnB1c2godGhpcy5Sbih0LCBlLCBuLCBzKSk7XG4gICAgICAgIH0pLCAoXG4gICAgICAgIC8qIG9uUmVtb3ZlPSAqLyBzID0+IHtcbiAgICAgICAgICAgIHIucHVzaCh0aGlzLlBuKHQsIGUsIG4sIHMpKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKHIpO1xuICAgIH1cbiAgICBUbih0KSB7XG4gICAgICAgIGxldCBlID0gMTtcbiAgICAgICAgcmV0dXJuIHRvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLFxuICAgICAgICAgICAgcmV2ZXJzZTogITAsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudWlkLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBdKVxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuZG9uZSgpLCBlID0gbi5zZXF1ZW5jZU51bWJlciArIDE7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgc2V0IG9mIElEQiByYW5nZXMgdGhhdCBzcGxpdHMgdGhlIGV4aXN0aW5nIHJhbmdlIGFuZCBleGNsdWRlc1xuICAgICAqIGFueSB2YWx1ZXMgdGhhdCBtYXRjaCB0aGUgYG5vdEluVmFsdWVgIGZyb20gdGhlc2UgcmFuZ2VzLiBBcyBhbiBleGFtcGxlLFxuICAgICAqICdbZm9vID4gMiAmJiBmb28gIT0gM11gIGJlY29tZXMgIGBbZm9vID4gMiAmJiA8IDMsIGZvbyA+IDNdYC5cbiAgICAgKi8gICAgY3JlYXRlUmFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBUaGUgbm90SW4gdmFsdWVzIG5lZWQgdG8gYmUgc29ydGVkIGFuZCB1bmlxdWUgc28gdGhhdCB3ZSBjYW4gcmV0dXJuIGFcbiAgICAgICAgLy8gc29ydGVkIHNldCBvZiBub24tb3ZlcmxhcHBpbmcgcmFuZ2VzLlxuICAgICAgICBuID0gbi5zb3J0KCgodCwgZSkgPT4gTXIodCwgZSkpKS5maWx0ZXIoKCh0LCBlLCBuKSA9PiAhZSB8fCAwICE9PSBNcih0LCBuW2UgLSAxXSkpKTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICBzLnB1c2godCk7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBuKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gTXIoaSwgdCksIHIgPSBNcihpLCBlKTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCBpcyB0aGUgbG93ZXIgYm91bmQuIFdlIHRoZXJlZm9yZSBuZWVkIHRvIHJhaXNlIHRoZSBib3VuZFxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgdmFsdWUuXG4gICAgICAgICAgICBzWzBdID0gdC5KZSgpOyBlbHNlIGlmIChuID4gMCAmJiByIDwgMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgaW4gdGhlIG1pZGRsZSBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIHMucHVzaChpKSwgcy5wdXNoKGkuSmUoKSk7IGVsc2UgaWYgKHIgPiAwKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCAoYW5kIGFsbCBmb2xsb3dpbmcgdmFsdWVzKSBhcmUgb3V0IG9mIHRoZSByYW5nZVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcy5sZW5ndGg7IHQgKz0gMikge1xuICAgICAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyIHR3byBib3VuZHMgdGhhdCB3aWxsIGNyZWF0ZSBhbiB1bm1hdGNoYWJsZSBrZXkgcmFuZ2UsXG4gICAgICAgICAgICAvLyB0aGVuIHdlIHJldHVybiBhbiBlbXB0eSBzZXQgb2Yga2V5IHJhbmdlcy5cbiAgICAgICAgICAgIGlmICh0aGlzLmJuKHNbdF0sIHNbdCArIDFdKSkgcmV0dXJuIFtdO1xuICAgICAgICAgICAgY29uc3QgZSA9IFsgc1t0XS5pbmRleElkLCB0aGlzLnVpZCwgc1t0XS5hcnJheVZhbHVlLCBzW3RdLmRpcmVjdGlvbmFsVmFsdWUsIEhyLCBbXSBdLCBuID0gWyBzW3QgKyAxXS5pbmRleElkLCB0aGlzLnVpZCwgc1t0ICsgMV0uYXJyYXlWYWx1ZSwgc1t0ICsgMV0uZGlyZWN0aW9uYWxWYWx1ZSwgSHIsIFtdIF07XG4gICAgICAgICAgICBpLnB1c2goSURCS2V5UmFuZ2UuYm91bmQoZSwgbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBibih0LCBlKSB7XG4gICAgICAgIC8vIElmIGxvd2VyIGJvdW5kIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdXBwZXIgYm91bmQsIHRoZW4gdGhlIGtleVxuICAgICAgICAvLyByYW5nZSBjYW4gbmV2ZXIgYmUgbWF0Y2hlZC5cbiAgICAgICAgcmV0dXJuIE1yKHQsIGUpID4gMDtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyh0LCBlKS5uZXh0KGVvKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0Lm1hcEFycmF5KHRoaXMuY24oZSksIChlID0+IHRoaXMuYW4odCwgZSkubmV4dCgodCA9PiB0IHx8IE8oKSkpKSkubmV4dChlbyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY29sbGVjdGlvblBhcmVudHNcbiAqIGRvY3VtZW50IHN0b3JlLlxuICovIGZ1bmN0aW9uIFlyKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJjb2xsZWN0aW9uUGFyZW50c1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IGVudHJ5IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBYcih0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiaW5kZXhFbnRyaWVzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggY29uZmlndXJhdGlvbiBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWnIodCkge1xuICAgIHJldHVybiBfZSh0LCBcImluZGV4Q29uZmlndXJhdGlvblwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IHN0YXRlIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiB0byh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiaW5kZXhTdGF0ZVwiKTtcbn1cblxuZnVuY3Rpb24gZW8odCkge1xuICAgIEYoMCAhPT0gdC5sZW5ndGgpO1xuICAgIGxldCBlID0gdFswXS5pbmRleFN0YXRlLm9mZnNldCwgbiA9IGUubGFyZ2VzdEJhdGNoSWQ7XG4gICAgZm9yIChsZXQgcyA9IDE7IHMgPCB0Lmxlbmd0aDsgcysrKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0W3NdLmluZGV4U3RhdGUub2Zmc2V0O1xuICAgICAgICBUdChpLCBlKSA8IDAgJiYgKGUgPSBpKSwgbiA8IGkubGFyZ2VzdEJhdGNoSWQgJiYgKG4gPSBpLmxhcmdlc3RCYXRjaElkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJdChlLnJlYWRUaW1lLCBlLmRvY3VtZW50S2V5LCBuKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3Qgbm8gPSB7XG4gICAgZGlkUnVuOiAhMSxcbiAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IDAsXG4gICAgdGFyZ2V0c1JlbW92ZWQ6IDAsXG4gICAgZG9jdW1lbnRzUmVtb3ZlZDogMFxufTtcblxuY2xhc3Mgc28ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFdoZW4gd2UgYXR0ZW1wdCB0byBjb2xsZWN0LCB3ZSB3aWxsIG9ubHkgZG8gc28gaWYgdGhlIGNhY2hlIHNpemUgaXMgZ3JlYXRlciB0aGFuIHRoaXNcbiAgICAvLyB0aHJlc2hvbGQuIFBhc3NpbmcgYENPTExFQ1RJT05fRElTQUJMRURgIGhlcmUgd2lsbCBjYXVzZSBjb2xsZWN0aW9uIHRvIGFsd2F5cyBiZSBza2lwcGVkLlxuICAgIHQsIFxuICAgIC8vIFRoZSBwZXJjZW50YWdlIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3ZSB3aWxsIGF0dGVtcHQgdG8gY29sbGVjdFxuICAgIGUsIFxuICAgIC8vIEEgY2FwIG9uIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdpbGwgYmUgY29sbGVjdGVkLiBUaGlzIHByZXZlbnRzXG4gICAgLy8gdXMgZnJvbSBjb2xsZWN0aW5nIGEgaHVnZSBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyBpZiB0aGUgY2FjaGUgaGFzIGdyb3duIHZlcnkgbGFyZ2UuXG4gICAgbikge1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPSB0LCB0aGlzLnBlcmNlbnRpbGVUb0NvbGxlY3QgPSBlLCB0aGlzLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgd2l0aENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgc28odCwgc28uREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIHNvLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEZWxldGUgYSBtdXRhdGlvbiBiYXRjaCBhbmQgdGhlIGFzc29jaWF0ZWQgZG9jdW1lbnQgbXV0YXRpb25zLlxuICogQHJldHVybnMgQSBQZXJzaXN0ZW5jZVByb21pc2Ugb2YgdGhlIGRvY3VtZW50IG11dGF0aW9ucyB0aGF0IHdlcmUgcmVtb3ZlZC5cbiAqL1xuZnVuY3Rpb24gaW8odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LnN0b3JlKFwibXV0YXRpb25zXCIpLCBpID0gdC5zdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpLCByID0gW10sIG8gPSBJREJLZXlSYW5nZS5vbmx5KG4uYmF0Y2hJZCk7XG4gICAgbGV0IHUgPSAwO1xuICAgIGNvbnN0IGMgPSBzLlgoe1xuICAgICAgICByYW5nZTogb1xuICAgIH0sICgodCwgZSwgbikgPT4gKHUrKywgbi5kZWxldGUoKSkpKTtcbiAgICByLnB1c2goYy5uZXh0KCgoKSA9PiB7XG4gICAgICAgIEYoMSA9PT0gdSk7XG4gICAgfSkpKTtcbiAgICBjb25zdCBhID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIG4ubXV0YXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHMgPSB6dChlLCB0LmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICByLnB1c2goaS5kZWxldGUocykpLCBhLnB1c2godC5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4gUnQud2FpdEZvcihyKS5uZXh0KCgoKSA9PiBhKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSBzaXplIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKi8gZnVuY3Rpb24gcm8odCkge1xuICAgIGlmICghdCkgcmV0dXJuIDA7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQuZG9jdW1lbnQpIGUgPSB0LmRvY3VtZW50OyBlbHNlIGlmICh0LnVua25vd25Eb2N1bWVudCkgZSA9IHQudW5rbm93bkRvY3VtZW50OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0Lm5vRG9jdW1lbnQpIHRocm93IE8oKTtcbiAgICAgICAgZSA9IHQubm9Eb2N1bWVudDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovIHNvLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTAsIFxuc28uREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMWUzLCBzby5ERUZBVUxUID0gbmV3IHNvKDQxOTQzMDQwLCBzby5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgc28uREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKSwgXG5zby5ESVNBQkxFRCA9IG5ldyBzbygtMSwgMCwgMCk7XG5cbmNsYXNzIG9vIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy5pbmRleE1hbmFnZXIgPSBuLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcy4gSWYgdGhlIG11dGF0aW9uXG4gICAgICAgICAqIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBJbmRleGVkRGIsIHRoZSBjYWNoZWQgdmFsdWUgbWF5IGNvbnRpbnVlIHRvXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXG4gICAgICAgICAqIGxvY2FsbHksIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgc2hvdWxkIGJlIGludm9rZWQgZWl0aGVyIGRpcmVjdGx5XG4gICAgICAgICAqIG9yIHRocm91Z2ggYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2l0aCBtdWx0aS10YWIsIHdoZW4gdGhlIHByaW1hcnkgY2xpZW50IGFja25vd2xlZGdlcyBvciByZWplY3RzIGEgbXV0YXRpb24sXG4gICAgICAgICAqIHRoaXMgY2FjaGUgaXMgdXNlZCBieSBzZWNvbmRhcnkgY2xpZW50cyB0byBpbnZhbGlkYXRlIHRoZSBsb2NhbFxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgdGhpcy5WbiA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlci5cbiAgICAgKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0byBjcmVhdGUgYSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB3aGVuIHBlcnNpc3RpbmcgdG8gSW5kZXhlZERiLlxuICAgICAqLyAgICBzdGF0aWMgZGUodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xuICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBhcmUgdGhlcmUgYW55IHJlc2VydmVkIGNoYXJhY3RlcnM/IGFyZSBlbXB0eSBpZHMgYWxsb3dlZD9cbiAgICAgICAgLy8gRm9yIHRoZSBtb21lbnQgc3RvcmUgdGhlc2UgdG9nZXRoZXIgaW4gdGhlIHNhbWUgbXV0YXRpb25zIHRhYmxlIGFzc3VtaW5nXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cbiAgICAgICAgRihcIlwiICE9PSB0LnVpZCk7XG4gICAgICAgIGNvbnN0IGkgPSB0LmlzQXV0aGVudGljYXRlZCgpID8gdC51aWQgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IG9vKGksIGUsIG4sIHMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMDtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBjbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBlID0gITEsIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IGFvKHQpLCByID0gY28odCk7XG4gICAgICAgIC8vIFRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gaW4gQ2hyb21lIChhbmQgRmlyZWZveCkgZG9lcyBub3QgaGFuZGxlXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcbiAgICAgICAgLy8gdGhhdCB0aGUgaW5kZXggZW50cnkgaXMgYWRkZWQgY29ycmVjdGx5IGluIGFsbCBicm93c2Vycywgd2UgcGVyZm9ybSB0d29cbiAgICAgICAgLy8gd3JpdGVzOiBUaGUgZmlyc3Qgd3JpdGUgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgbmV4dCBhdXRvLWdlbmVyYXRlZCBCYXRjaFxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2guXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzAxOTcyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiByLmFkZCh7fSkubmV4dCgobyA9PiB7XG4gICAgICAgICAgICBGKFwibnVtYmVyXCIgPT0gdHlwZW9mIG8pO1xuICAgICAgICAgICAgY29uc3QgdSA9IG5ldyBacyhvLCBlLCBuLCBzKSwgYyA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbi5iYXNlTXV0YXRpb25zLm1hcCgoZSA9PiBqaSh0LmZlLCBlKSkpLCBpID0gbi5tdXRhdGlvbnMubWFwKChlID0+IGppKHQuZmUsIGUpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBlLFxuICAgICAgICAgICAgICAgICAgICBiYXRjaElkOiBuLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsV3JpdGVUaW1lTXM6IG4ubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSxcbiAgICAgICAgICAgICAgICAgICAgYmFzZU11dGF0aW9uczogcyxcbiAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zOiBpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0aGlzLnVzZXJJZCwgdSksIGEgPSBbXTtcbiAgICAgICAgICAgIGxldCBoID0gbmV3IEVlKCgodCwgZSkgPT4gZXQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHp0KHRoaXMudXNlcklkLCB0LmtleS5wYXRoLCBvKTtcbiAgICAgICAgICAgICAgICBoID0gaC5hZGQodC5rZXkucGF0aC5wb3BMYXN0KCkpLCBhLnB1c2goci5wdXQoYykpLCBhLnB1c2goaS5wdXQoZSwgV3QpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGEucHVzaCh0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSk7XG4gICAgICAgICAgICB9KSksIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuVm5bb10gPSB1LmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwgUnQud2FpdEZvcihhKS5uZXh0KCgoKSA9PiB1KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBjbyh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gKEYodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgX3IodGhpcy5zZXJpYWxpemVyLCB0KSkgOiBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHRoZSBtdXRhdGlvbiBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLlxuICAgICAqIEZvciBwcmltYXJ5IGNsaWVudHMsIHRoaXMgbWV0aG9kIHJldHVybnMgYG51bGxgIGFmdGVyXG4gICAgICogYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYCBoYXMgYmVlbiBjYWxsZWQuIFNlY29uZGFyeSBjbGllbnRzIHJldHVybiBhXG4gICAgICogY2FjaGVkIHJlc3VsdCB1bnRpbCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIGlzIGludm9rZWQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBTbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZuW2VdID8gUnQucmVzb2x2ZSh0aGlzLlZuW2VdKSA6IHRoaXMubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQua2V5cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLlZuW2VdID0gbiwgbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkLCBuIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBjbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQgJiYgKEYoZS5iYXRjaElkID49IG4pLCBpID0gX3IodGhpcy5zZXJpYWxpemVyLCBlKSksIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgbiA9IC0xO1xuICAgICAgICByZXR1cm4gY28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBlLFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gZS5iYXRjaElkLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIC0xIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIGNvKHQpLmooXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgZSkubmV4dCgodCA9PiB0Lm1hcCgodCA9PiBfcih0aGlzLnNlcmlhbGl6ZXIsIHQpKSkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcbiAgICAgICAgLy8gdGhlIGdpdmVuIGRvY3VtZW50S2V5LlxuICAgICAgICBjb25zdCBuID0ganQodGhpcy51c2VySWQsIGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKG4pLCBpID0gW107XG4gICAgICAgIHJldHVybiBhbyh0KS5YKHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgobiwgcywgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgW28sIHUsIGNdID0gbiwgYSA9IEd0KHUpO1xuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwoYSkpIFxuICAgICAgICAgICAgLy8gTG9vayB1cCB0aGUgbXV0YXRpb24gYmF0Y2ggaW4gdGhlIHN0b3JlLlxuICAgICAgICAgICAgcmV0dXJuIGNvKHQpLmdldChjKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXQpIHRocm93IE8oKTtcbiAgICAgICAgICAgICAgICBGKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIGkucHVzaChfcih0aGlzLnNlcmlhbGl6ZXIsIHQpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBFZShldCk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0ganQodGhpcy51c2VySWQsIGUucGF0aCksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpLCBvID0gYW8odCkuWCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgICAgIH0sICgodCwgcywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtyLCBvLCB1XSA9IHQsIGMgPSBHdChvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwoYykgPyBuID0gbi5hZGQodSkgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHMucHVzaChvKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKHMpLm5leHQoKCgpID0+IHRoaXMuRG4odCwgbikpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxLCBpID0ganQodGhpcy51c2VySWQsIG4pLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKTtcbiAgICAgICAgLy8gQ29sbGVjdCB1cCB1bmlxdWUgYmF0Y2hJRHMgZW5jb3VudGVyZWQgZHVyaW5nIGEgc2NhbiBvZiB0aGUgaW5kZXguIFVzZSBhXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxuICAgICAgICAvLyBzY2FuIG9mIHRoZSBtYWluIHRhYmxlLlxuICAgICAgICBsZXQgbyA9IG5ldyBFZShldCk7XG4gICAgICAgIHJldHVybiBhbyh0KS5YKHtcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgodCwgZSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3IsIHUsIGNdID0gdCwgYSA9IEd0KHUpO1xuICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgbi5pc1ByZWZpeE9mKGEpID8gXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgYS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZChjKSkgOiBpLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuRG4odCwgbykpKTtcbiAgICB9XG4gICAgRG4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBbXTtcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKGNvKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkgdGhyb3cgTygpO1xuICAgICAgICAgICAgICAgIEYodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbi5wdXNoKF9yKHRoaXMuc2VyaWFsaXplciwgdCkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKHMpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBpbyh0Lmh0LCB0aGlzLnVzZXJJZCwgZSkubmV4dCgobiA9PiAodC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkNuKGUuYmF0Y2hJZCk7XG4gICAgICAgIH0pKSwgUnQuZm9yRWFjaChuLCAoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2FjaGVkIGtleXMgZm9yIGEgbXV0YXRpb24gYmF0Y2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSBzZWNvbmRhcnkgY2xpZW50cyBhZnRlciB0aGV5IHByb2Nlc3MgbXV0YXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBoYXZlIHRvIGJlIGNhbGxlZCBmcm9tIHByaW1hcnkgY2xpZW50cyBhc1xuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIGVudHJpZXMgYXJlIGNsZWFyZWQgd2hlbiBhbiBhY2tub3dsZWRnZWQgb3JcbiAgICAgKiByZWplY3RlZCBiYXRjaCBpcyByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBDbih0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLlZuW3RdO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiBSdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFsgdGhpcy51c2VySWQgXSk7XG4gICAgICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgICAgICByZXR1cm4gYW8odCkuWCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0WzBdID09PSB0aGlzLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gR3QodFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbi5kb25lKCk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIEYoMCA9PT0gcy5sZW5ndGgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHVvKHQsIHRoaXMudXNlcklkLCBlKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seSAoc3RhdGUgaXMgaGVsZCBpbiBtZW1vcnkgaW4gb3RoZXIgY2xpZW50cykuXG4gICAgLyoqIFJldHVybnMgdGhlIG11dGF0aW9uIHF1ZXVlJ3MgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuICovXG4gICAgeG4odCkge1xuICAgICAgICByZXR1cm4gaG8odCkuZ2V0KHRoaXMudXNlcklkKS5uZXh0KCh0ID0+IHQgfHwge1xuICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgICAgICAgIGxhc3RBY2tub3dsZWRnZWRCYXRjaElkOiAtMSxcbiAgICAgICAgICAgIGxhc3RTdHJlYW1Ub2tlbjogXCJcIlxuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcbiAqICAgICAgICAgbXV0YXRpb24gZm9yIHRoZSBnaXZlbiBrZXkuXG4gKi8gZnVuY3Rpb24gdW8odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBqdChlLCBuLnBhdGgpLCBpID0gc1sxXSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQocyk7XG4gICAgbGV0IG8gPSAhMTtcbiAgICByZXR1cm4gYW8odCkuWCh7XG4gICAgICAgIHJhbmdlOiByLFxuICAgICAgICBZOiAhMFxuICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICBjb25zdCBbciwgdSwgLypiYXRjaElEKi8gY10gPSB0O1xuICAgICAgICByID09PSBlICYmIHUgPT09IGkgJiYgKG8gPSAhMCksIHMuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBjbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwibXV0YXRpb25zXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGFvKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJkb2N1bWVudE11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBobyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwibXV0YXRpb25RdWV1ZXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogT2Zmc2V0IHRvIGVuc3VyZSBub24tb3ZlcmxhcHBpbmcgdGFyZ2V0IGlkcy4gKi9cbi8qKlxuICogR2VuZXJhdGVzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyB0YXJnZXQgSURzIGZvciBzZW5kaW5nIHRhcmdldHMgdG8gdGhlXG4gKiB3YXRjaCBzdHJlYW0uXG4gKlxuICogVGhlIGNsaWVudCBjb25zdHJ1Y3RzIHR3byBnZW5lcmF0b3JzLCBvbmUgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIGFuZCBvbmUgZm9yXG4gKiBmb3IgdGhlIHN5bmMgZW5naW5lICh0byBnZW5lcmF0ZSBsaW1ibyBkb2N1bWVudHMgdGFyZ2V0cykuIFRoZXNlXG4gKiBnZW5lcmF0b3JzIHByb2R1Y2Ugbm9uLW92ZXJsYXBwaW5nIElEcyAoYnkgdXNpbmcgZXZlbiBhbmQgb2RkIElEc1xuICogcmVzcGVjdGl2ZWx5KS5cbiAqXG4gKiBCeSBzZXBhcmF0aW5nIHRoZSB0YXJnZXQgSUQgc3BhY2UsIHRoZSBxdWVyeSBjYWNoZSBjYW4gZ2VuZXJhdGUgdGFyZ2V0IElEc1xuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XG4gKiBnZW5lcmF0ZSBpbi1tZW1vcnkgdGFyZ2V0IElEcyB0aGF0IGFyZSB0cmFuc2llbnQgYW5kIGNhbiBiZSByZXVzZWQgYWZ0ZXIgYVxuICogcmVzdGFydC5cbiAqL1xuY2xhc3MgbG8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ObiA9IHQ7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5uICs9IDIsIHRoaXMuTm47XG4gICAgfVxuICAgIHN0YXRpYyBrbigpIHtcbiAgICAgICAgLy8gVGhlIHRhcmdldCBjYWNoZSBnZW5lcmF0b3IgbXVzdCByZXR1cm4gJzInIGluIGl0cyBmaXJzdCBjYWxsIHRvIGBuZXh0KClgXG4gICAgICAgIC8vIGFzIHRoZXJlIGlzIG5vIGRpZmZlcmVudGlhdGlvbiBpbiB0aGUgcHJvdG9jb2wgbGF5ZXIgYmV0d2VlbiBhbiB1bnNldFxuICAgICAgICAvLyBudW1iZXIgYW5kIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSURcbiAgICAgICAgLy8gJzAnLCB0aGUgYmFja2VuZCB3b3VsZCBjb25zaWRlciBpdCB1bnNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIGl0cyBvd24gSUQuXG4gICAgICAgIHJldHVybiBuZXcgbG8oMCk7XG4gICAgfVxuICAgIHN0YXRpYyBNbigpIHtcbiAgICAgICAgLy8gU3luYyBlbmdpbmUgYXNzaWducyB0YXJnZXQgSURzIGZvciBsaW1ibyBkb2N1bWVudCBkZXRlY3Rpb24uXG4gICAgICAgIHJldHVybiBuZXcgbG8oLTEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgZm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQsIHRoaXMuc2VyaWFsaXplciA9IGU7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgY2FjaGUgZ2xvYmFsIG1ldGFkYXRhIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBzaW5jZVxuICAgIC8vIHNvbWUgb2YgaXQgKGluIHBhcnRpY3VsYXIgYGhpZ2hlc3RUYXJnZXRJZGApIGNhbiBiZSBtb2RpZmllZCBieSBzZWNvbmRhcnlcbiAgICAvLyB0YWJzLiBXZSBjb3VsZCBwZXJoYXBzIGJlIG1vcmUgZ3JhbnVsYXIgKGFuZCBlLmcuIHN0aWxsIGNhY2hlXG4gICAgLy8gYGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb25gIGluIG1lbW9yeSkgYnV0IGZvciBzaW1wbGljaXR5IHdlIGN1cnJlbnRseSBnb1xuICAgIC8vIHRvIEluZGV4ZWREYiB3aGVuZXZlciB3ZSBuZWVkIHRvIHJlYWQgbWV0YWRhdGEuIFdlIGNhbiByZXZpc2l0IGlmIGl0IHR1cm5zXG4gICAgLy8gb3V0IHRvIGhhdmUgYSBtZWFuaW5nZnVsIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICBhbGxvY2F0ZVRhcmdldElkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJG4odCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IGxvKGUuaGlnaGVzdFRhcmdldElkKTtcbiAgICAgICAgICAgIHJldHVybiBlLmhpZ2hlc3RUYXJnZXRJZCA9IG4ubmV4dCgpLCB0aGlzLk9uKHQsIGUpLm5leHQoKCgpID0+IGUuaGlnaGVzdFRhcmdldElkKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQpLm5leHQoKHQgPT4gcnQuZnJvbVRpbWVzdGFtcChuZXcgaXQodC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5uYW5vc2Vjb25kcykpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQpLm5leHQoKHQgPT4gdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJG4odCkubmV4dCgocyA9PiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLCBuICYmIChzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLnRvVGltZXN0YW1wKCkpLCBcbiAgICAgICAgZSA+IHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUpLCB0aGlzLk9uKHQsIHMpKSkpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRm4odCwgZSkubmV4dCgoKCkgPT4gdGhpcy4kbih0KS5uZXh0KChuID0+IChuLnRhcmdldENvdW50ICs9IDEsIHRoaXMuQm4oZSwgbiksIFxuICAgICAgICB0aGlzLk9uKHQsIG4pKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Gbih0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKCgpID0+IHdvKHQpLmRlbGV0ZShlLnRhcmdldElkKSkpLm5leHQoKCgpID0+IHRoaXMuJG4odCkpKS5uZXh0KChlID0+IChGKGUudGFyZ2V0Q291bnQgPiAwKSwgXG4gICAgICAgIGUudGFyZ2V0Q291bnQgLT0gMSwgdGhpcy5Pbih0LCBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXG4gICAgICogcHJlc2VudCBpbiBgYWN0aXZlVGFyZ2V0SWRzYC4gRG9jdW1lbnQgYXNzb2NpYXRpb25zIGZvciB0aGUgcmVtb3ZlZCB0YXJnZXRzIGFyZSBhbHNvIHJlbW92ZWQuXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gd28odCkuWCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBtcihvKTtcbiAgICAgICAgICAgIHUuc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldCh1LnRhcmdldElkKSAmJiAocysrLCBpLnB1c2godGhpcy5yZW1vdmVUYXJnZXREYXRhKHQsIHUpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBSdC53YWl0Rm9yKGkpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3byh0KS5YKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG1yKG4pO1xuICAgICAgICAgICAgZShzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAkbih0KSB7XG4gICAgICAgIHJldHVybiBfbyh0KS5nZXQoXCJ0YXJnZXRHbG9iYWxLZXlcIikubmV4dCgodCA9PiAoRihudWxsICE9PSB0KSwgdCkpKTtcbiAgICB9XG4gICAgT24odCwgZSkge1xuICAgICAgICByZXR1cm4gX28odCkucHV0KFwidGFyZ2V0R2xvYmFsS2V5XCIsIGUpO1xuICAgIH1cbiAgICBGbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB3byh0KS5wdXQoZ3IodGhpcy5zZXJpYWxpemVyLCBlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluLXBsYWNlIHVwZGF0ZXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIHRvIGFjY291bnQgZm9yIHZhbHVlcyBpbiB0aGUgZ2l2ZW5cbiAgICAgKiBUYXJnZXREYXRhLiBTYXZpbmcgaXMgZG9uZSBzZXBhcmF0ZWx5LiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgd2VyZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSBtZXRhZGF0YS5cbiAgICAgKi8gICAgQm4odCwgZSkge1xuICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICByZXR1cm4gdC50YXJnZXRJZCA+IGUuaGlnaGVzdFRhcmdldElkICYmIChlLmhpZ2hlc3RUYXJnZXRJZCA9IHQudGFyZ2V0SWQsIG4gPSAhMCksIFxuICAgICAgICB0LnNlcXVlbmNlTnVtYmVyID4gZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdC5zZXF1ZW5jZU51bWJlciwgXG4gICAgICAgIG4gPSAhMCksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJG4odCkubmV4dCgodCA9PiB0LnRhcmdldENvdW50KSk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICAvLyBJdGVyYXRpbmcgYnkgdGhlIGNhbm9uaWNhbElkIG1heSB5aWVsZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBiZWNhdXNlXG4gICAgICAgIC8vIGNhbm9uaWNhbElkIHZhbHVlcyBhcmUgbm90IHJlcXVpcmVkIHRvIGJlIHVuaXF1ZSBwZXIgdGFyZ2V0LiBUaGlzIHF1ZXJ5XG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleCB0byBiZSBlZmZpY2llbnQuXG4gICAgICAgIGNvbnN0IG4gPSAkbihlKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiB3byh0KS5YKHtcbiAgICAgICAgICAgIHJhbmdlOiBzLFxuICAgICAgICAgICAgaW5kZXg6IFwicXVlcnlUYXJnZXRzSW5kZXhcIlxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBtcihuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBPbihlLCByLnRhcmdldCkgJiYgKGkgPSByLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gW10sIGkgPSBtbyh0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gcXQoZS5wYXRoKTtcbiAgICAgICAgICAgIHMucHVzaChpLnB1dCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG4sXG4gICAgICAgICAgICAgICAgcGF0aDogclxuICAgICAgICAgICAgfSkpLCBzLnB1c2godGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgbiwgZSkpO1xuICAgICAgICB9KSksIFJ0LndhaXRGb3Iocyk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gbW8odCk7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKGUsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBxdChlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIFJ0LndhaXRGb3IoWyBzLmRlbGV0ZShbIG4sIGkgXSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIG4sIGUpIF0pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG1vKHQpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlIF0sIFsgZSArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocyk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSwgcyA9IG1vKHQpO1xuICAgICAgICBsZXQgaSA9IGdzKCk7XG4gICAgICAgIHJldHVybiBzLlgoe1xuICAgICAgICAgICAgcmFuZ2U6IG4sXG4gICAgICAgICAgICBZOiAhMFxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBHdCh0WzFdKSwgciA9IG5ldyBodChzKTtcbiAgICAgICAgICAgIGkgPSBpLmFkZChyKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcXQoZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIHN0KG4pIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gbW8odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLFxuICAgICAgICAgICAgWTogITAsXG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKFt0LCBlXSwgbiwgcykgPT4ge1xuICAgICAgICAgICAgLy8gSGF2aW5nIGEgc2VudGluZWwgcm93IGZvciBhIGRvY3VtZW50IGRvZXMgbm90IGNvdW50IGFzIGNvbnRhaW5pbmcgdGhhdCBkb2N1bWVudDtcbiAgICAgICAgICAgIC8vIEZvciB0aGUgdGFyZ2V0IGNhY2hlLCBjb250YWluaW5nIHRoZSBkb2N1bWVudCBtZWFucyB0aGUgZG9jdW1lbnQgaXMgcGFydCBvZiBzb21lXG4gICAgICAgICAgICAvLyB0YXJnZXQuXG4gICAgICAgICAgICAwICE9PSB0ICYmIChpKyssIHMuZG9uZSgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkgPiAwKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGEgVGFyZ2V0RGF0YSBlbnRyeSBieSB0YXJnZXQgSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0IElEIG9mIHRoZSBUYXJnZXREYXRhIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBUYXJnZXREYXRhIGVudHJ5LCBvciBudWxsIGlmIHRoZSBjYWNoZSBoYXMgbm8gZW50cnkgZm9yXG4gICAgICogdGhlIHRhcmdldC5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIGxlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHdvKHQpLmdldChlKS5uZXh0KCh0ID0+IHQgPyBtcih0KSA6IG51bGwpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBxdWVyaWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiB3byh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwidGFyZ2V0c1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHRhcmdldCBnbG9iYWxzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwidGFyZ2V0R2xvYmFsXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgdGFyZ2V0IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBtbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwidGFyZ2V0RG9jdW1lbnRzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBnbyhbdCwgZV0sIFtuLCBzXSkge1xuICAgIGNvbnN0IGkgPSBldCh0LCBuKTtcbiAgICByZXR1cm4gMCA9PT0gaSA/IGV0KGUsIHMpIDogaTtcbn1cblxuLyoqXG4gKiBVc2VkIHRvIGNhbGN1bGF0ZSB0aGUgbnRoIHNlcXVlbmNlIG51bWJlci4gS2VlcHMgYSByb2xsaW5nIGJ1ZmZlciBvZiB0aGVcbiAqIGxvd2VzdCBuIHZhbHVlcyBwYXNzZWQgdG8gYGFkZEVsZW1lbnRgLCBhbmQgZmluYWxseSByZXBvcnRzIHRoZSBsYXJnZXN0IG9mXG4gKiB0aGVtIGluIGBtYXhWYWx1ZWAuXG4gKi8gY2xhc3MgeW8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5MbiA9IHQsIHRoaXMuYnVmZmVyID0gbmV3IEVlKGdvKSwgdGhpcy5xbiA9IDA7XG4gICAgfVxuICAgIFVuKCkge1xuICAgICAgICByZXR1cm4gKyt0aGlzLnFuO1xuICAgIH1cbiAgICBLbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbIHQsIHRoaXMuVW4oKSBdO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIuc2l6ZSA8IHRoaXMuTG4pIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuYWRkKGUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmJ1ZmZlci5sYXN0KCk7XG4gICAgICAgICAgICBnbyhlLCB0KSA8IDAgJiYgKHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuZGVsZXRlKHQpLmFkZChlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICAvLyBHdWFyYW50ZWVkIHRvIGJlIG5vbi1lbXB0eS4gSWYgd2UgZGVjaWRlIHdlIGFyZSBub3QgY29sbGVjdGluZyBhbnlcbiAgICAgICAgLy8gc2VxdWVuY2UgbnVtYmVycywgbnRoU2VxdWVuY2VOdW1iZXIgYmVsb3cgc2hvcnQtY2lyY3VpdHMuIElmIHdlIGhhdmVcbiAgICAgICAgLy8gZGVjaWRlZCB0aGF0IHdlIGFyZSBjb2xsZWN0aW5nIG4gc2VxdWVuY2UgbnVtYmVycywgaXQncyBiZWNhdXNlIG4gaXMgc29tZVxuICAgICAgICAvLyBwZXJjZW50YWdlIG9mIHRoZSBleGlzdGluZyBzZXF1ZW5jZSBudW1iZXJzLiBUaGF0IG1lYW5zIHdlIHNob3VsZCBuZXZlclxuICAgICAgICAvLyBiZSBpbiBhIHNpdHVhdGlvbiB3aGVyZSB3ZSBhcmUgY29sbGVjdGluZyBzZXF1ZW5jZSBudW1iZXJzIGJ1dCBkb24ndFxuICAgICAgICAvLyBhY3R1YWxseSBoYXZlIGFueS5cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxhc3QoKVswXTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gSXQgaGFuZGxlcyBjaGVja2luZ1xuICogd2hldGhlciBvciBub3QgR0MgaXMgZW5hYmxlZCwgYXMgd2VsbCBhcyB3aGljaCBkZWxheSB0byB1c2UgYmVmb3JlIHRoZSBuZXh0IHJ1bi5cbiAqLyBjbGFzcyBwbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSB0LCB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmxvY2FsU3RvcmUgPSBuLCB0aGlzLkduID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIC0xICE9PSB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgJiYgdGhpcy5Rbig2ZTQpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLkduICYmICh0aGlzLkduLmNhbmNlbCgpLCB0aGlzLkduID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5HbjtcbiAgICB9XG4gICAgUW4odCkge1xuICAgICAgICBOKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiAke3R9bXNgKSwgdGhpcy5HbiA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIiAvKiBUaW1lcklkLkxydUdhcmJhZ2VDb2xsZWN0aW9uICovICwgdCwgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuR24gPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvY2FsU3RvcmUuY29sbGVjdEdhcmJhZ2UodGhpcy5nYXJiYWdlQ29sbGVjdG9yKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBEdCh0KSA/IE4oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb246IFwiLCB0KSA6IGF3YWl0IHZ0KHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5RbigzZTUpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIHN0ZXBzIGZvciBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovIGNsYXNzIElvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuam4gPSB0LCB0aGlzLnBhcmFtcyA9IGU7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVRhcmdldENvdW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4uem4odCkubmV4dCgodCA9PiBNYXRoLmZsb29yKGUgLyAxMDAgKiB0KSkpO1xuICAgIH1cbiAgICBudGhTZXF1ZW5jZU51bWJlcih0LCBlKSB7XG4gICAgICAgIGlmICgwID09PSBlKSByZXR1cm4gUnQucmVzb2x2ZShPdC5jdCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgeW8oZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmpuLmZvckVhY2hUYXJnZXQodCwgKHQgPT4gbi5Lbih0LnNlcXVlbmNlTnVtYmVyKSkpLm5leHQoKCgpID0+IHRoaXMuam4uV24odCwgKHQgPT4gbi5Lbih0KSkpKSkubmV4dCgoKCkgPT4gbi5tYXhWYWx1ZSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4ucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qbi5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKTtcbiAgICB9XG4gICAgY29sbGVjdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiAtMSA9PT0gdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/IChOKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZFwiKSwgXG4gICAgICAgIFJ0LnJlc29sdmUobm8pKSA6IHRoaXMuZ2V0Q2FjaGVTaXplKHQpLm5leHQoKG4gPT4gbiA8IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplICR7bn0gaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgJHt0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkfWApLCBcbiAgICAgICAgbm8pIDogdGhpcy5Ibih0LCBlKSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qbi5nZXRDYWNoZVNpemUodCk7XG4gICAgfVxuICAgIEhuKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMsIGksIHIsIG8sIGMsIGE7XG4gICAgICAgIGNvbnN0IGggPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudCh0LCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxuICAgICAgICBlID4gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA/IChOKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgQ2FwcGluZyBzZXF1ZW5jZSBudW1iZXJzIHRvIGNvbGxlY3QgZG93biB0byB0aGUgbWF4aW11bSBvZiAke3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3R9IGZyb20gJHtlfWApLCBcbiAgICAgICAgcyA9IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIDogcyA9IGUsIHIgPSBEYXRlLm5vdygpLCB0aGlzLm50aFNlcXVlbmNlTnVtYmVyKHQsIHMpKSkpLm5leHQoKHMgPT4gKG4gPSBzLCBcbiAgICAgICAgbyA9IERhdGUubm93KCksIHRoaXMucmVtb3ZlVGFyZ2V0cyh0LCBuLCBlKSkpKS5uZXh0KChlID0+IChpID0gZSwgYyA9IERhdGUubm93KCksIFxuICAgICAgICB0aGlzLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIG4pKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKGEgPSBEYXRlLm5vdygpLCBDKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgICAgICAgICBOKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3IgLSBofW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7c30gaW4gYCArIChvIC0gcikgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChjIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke3R9IGRvY3VtZW50cyBpbiBgICsgKGEgLSBjKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHthIC0gaH1tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRpZFJ1bjogITAsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiBzLFxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBUbyh0LCBlKSB7XG4gICAgcmV0dXJuIG5ldyBJbyh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQcm92aWRlcyBMUlUgZnVuY3Rpb25hbGl0eSBmb3IgSW5kZXhlZERCIHBlcnNpc3RlbmNlLiAqLyBjbGFzcyBFbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRiID0gdCwgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gVG8odGhpcywgZSk7XG4gICAgfVxuICAgIHpuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuSm4odCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQodCkubmV4dCgodCA9PiBlLm5leHQoKGUgPT4gdCArIGUpKSkpO1xuICAgIH1cbiAgICBKbih0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuV24odCwgKHQgPT4ge1xuICAgICAgICAgICAgZSsrO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KHQsIGUpO1xuICAgIH1cbiAgICBXbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlluKHQsICgodCwgbikgPT4gZShuKSkpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gQW8odCwgbik7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBBbyh0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkge1xuICAgICAgICByZXR1cm4gQW8odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnl0aGluZyB3b3VsZCBwcmV2ZW50IHRoaXMgZG9jdW1lbnQgZnJvbSBiZWluZyBnYXJiYWdlXG4gICAgICogY29sbGVjdGVkLCBnaXZlbiB0aGF0IHRoZSBkb2N1bWVudCBpbiBxdWVzdGlvbiBpcyBub3QgcHJlc2VudCBpbiBhbnlcbiAgICAgKiB0YXJnZXRzIGFuZCBoYXMgYSBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCBmb3JcbiAgICAgKiB0aGUgY29sbGVjdGlvbiBydW4uXG4gICAgICovICAgIFhuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuID0gITE7XG4gICAgICAgICAgICByZXR1cm4gaG8odCkuWigocyA9PiB1byh0LCBzLCBlKS5uZXh0KCh0ID0+ICh0ICYmIChuID0gITApLCBSdC5yZXNvbHZlKCF0KSkpKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCksIHMgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5Zbih0LCAoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGlmIChvIDw9IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Ybih0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpKyssIG4uZ2V0RW50cnkodCwgcikubmV4dCgoKCkgPT4gKG4ucmVtb3ZlRW50cnkociwgcnQubWluKCkpLCBtbyh0KS5kZWxldGUoWyAwLCBxdChyLnBhdGgpIF0pKSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBSdC53YWl0Rm9yKHMpKSkubmV4dCgoKCkgPT4gbi5hcHBseSh0KSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKHQsIG4pO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEFvKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBjYWNoZSB0aGF0IGlzICdvcnBoYW5lZCcuIE9ycGhhbmVkXG4gICAgICogbWVhbnMgbm90IGEgcGFydCBvZiBhbnkgdGFyZ2V0LCBzbyB0aGUgb25seSBlbnRyeSBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50IGluZGV4IGZvclxuICAgICAqIHRoYXQgZG9jdW1lbnQgd2lsbCBiZSB0aGUgc2VudGluZWwgcm93ICh0YXJnZXRJZCAwKSwgd2hpY2ggd2lsbCBhbHNvIGhhdmUgdGhlIHNlcXVlbmNlXG4gICAgICogbnVtYmVyIGZvciB0aGUgbGFzdCB0aW1lIHRoZSBkb2N1bWVudCB3YXMgYWNjZXNzZWQuXG4gICAgICovICAgIFluKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG1vKHQpO1xuICAgICAgICBsZXQgcywgaSA9IE90LmN0O1xuICAgICAgICByZXR1cm4gbi5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50VGFyZ2V0c0luZGV4XCJcbiAgICAgICAgfSwgKChbdCwgbl0sIHtwYXRoOiByLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IHQgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IE90LmN0ICYmIGUobmV3IGh0KEd0KHMpKSwgaSksIFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSB0aGlzIHNlcXVlbmNlIG51bWJlci4gSXQncyB0aGUgbmV4dCBvbmUgd2VcbiAgICAgICAgICAgIC8vIG1pZ2h0IHJlcG9ydCwgaWYgd2UgZG9uJ3QgZmluZCBhbnkgdGFyZ2V0cyBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgc2VxdWVuY2UgbnVtYmVyIG11c3QgYmUgZGVmaW5lZCB3aGVuIHRoZSB0YXJnZXRJZFxuICAgICAgICAgICAgLy8gaXMgMC5cbiAgICAgICAgICAgIGkgPSBvLCBzID0gcikgOiBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgaW52YWxpZCwgd2Uga25vdyB3ZSBkb24ndCBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgLy8gdGhpcyBvbmUgc2luY2Ugd2UgZm91bmQgYSB0YXJnZXQgZm9yIGl0LlxuICAgICAgICAgICAgaSA9IE90LmN0O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmVwb3J0IHNlcXVlbmNlIG51bWJlcnMgYWZ0ZXIgZ2V0dGluZyB0byB0aGUgbmV4dCBrZXksIHdlXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBsYXN0IGtleSB3ZSBpdGVyYXRlZCBvdmVyIHdhcyBhbiBvcnBoYW5lZFxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgYW5kIHJlcG9ydCBpdC5cbiAgICAgICAgICAgIGkgIT09IE90LmN0ICYmIGUobmV3IGh0KEd0KHMpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBBbyh0LCBlKSB7XG4gICAgcmV0dXJuIG1vKHQpLnB1dChcbiAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi9cbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0YXJnZXRJZDogMCxcbiAgICAgICAgICAgIHBhdGg6IHF0KHQucGF0aCksXG4gICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogZVxuICAgICAgICB9O1xuICAgIH0oZSwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGJ1ZmZlciBvZiBlbnRyaWVzIHRvIGJlIHdyaXR0ZW4gdG8gYSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICogSXQgY2FuIGJlIHVzZWQgdG8gYmF0Y2ggdXAgYSBzZXQgb2YgY2hhbmdlcyB0byBiZSB3cml0dGVuIHRvIHRoZSBjYWNoZSwgYnV0XG4gKiBhZGRpdGlvbmFsbHkgc3VwcG9ydHMgcmVhZGluZyBlbnRyaWVzIGJhY2sgd2l0aCB0aGUgYGdldEVudHJ5KClgIG1ldGhvZCxcbiAqIGZhbGxpbmcgYmFjayB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlIGlmIG5vIGVudHJ5IGlzXG4gKiBidWZmZXJlZC5cbiAqXG4gKiBFbnRyaWVzIGFkZGVkIHRvIHRoZSBjYWNoZSAqbXVzdCogYmUgcmVhZCBmaXJzdC4gVGhpcyBpcyB0byBmYWNpbGl0YXRlXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZSBkZWx0YSBvZiB0aGUgcGVuZGluZyBjaGFuZ2VzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBjbGFzcyB3YXMgaW1wbGVtZW50ZWQgdGhlbiByZW1vdmVkIGZyb20gb3RoZXIgcGxhdGZvcm1zLlxuICogSWYgYnl0ZS1jb3VudGluZyBlbmRzIHVwIGJlaW5nIG5lZWRlZCBvbiB0aGUgb3RoZXIgcGxhdGZvcm1zLCBjb25zaWRlclxuICogcG9ydGluZyB0aGlzIGNsYXNzIGFzIHBhcnQgb2YgdGhhdCBpbXBsZW1lbnRhdGlvbiB3b3JrLlxuICovIGNsYXNzIHZvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleSB0byB0aGUgbmV3IGNhY2hlIGVudHJ5IHRoYXQgc2hvdWxkIGJlIHdyaXR0ZW4uXG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IG5ldyBvcygodCA9PiB0LnRvU3RyaW5nKCkpLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5hZGRFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IG1vZGlmeSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgYWRkRW50cnkodCkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldCh0LmtleSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IHJlbW92ZSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCwgZSkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldCh0LCBhbi5uZXdJbnZhbGlkRG9jdW1lbnQodCkuc2V0UmVhZFRpbWUoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuIFRoZSBidWZmZXJlZCBjaGFuZ2VzIHdpbGwgZmlyc3QgYmUgY2hlY2tlZCxcbiAgICAgKiBhbmQgaWYgbm8gYnVmZmVyZWQgY2hhbmdlIGFwcGxpZXMsIHRoaXMgd2lsbCBmb3J3YXJkIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgb3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZiB3ZSBoYXZlIG5vdGhpbmdcbiAgICAgKiBjYWNoZWQuXG4gICAgICovICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmNoYW5nZXMuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBuID8gUnQucmVzb2x2ZShuKSA6IHRoaXMuZ2V0RnJvbUNhY2hlKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBmb3J3YXJkaW5nIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBjYWNoZWQgZG9jdW1lbnRzLCBpbmRleGVkIGJ5IGtleS4gSWYgYW4gZW50cnkgY2Fubm90IGJlXG4gICAgICogICAgIGZvdW5kLCB0aGUgY29ycmVzcG9uZGluZyBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gYW4gaW52YWxpZCBkb2N1bWVudC5cbiAgICAgKi8gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBidWZmZXJlZCBjaGFuZ2VzIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUsIHVzaW5nXG4gICAgICogdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uLlxuICAgICAqLyAgICBhcHBseSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICEwLCB0aGlzLmFwcGx5Q2hhbmdlcyh0KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBhc3NlcnQgdGhpcy5jaGFuZ2VzIGlzIG5vdCBudWxsICAqLyAgICBhc3NlcnROb3RBcHBsaWVkKCkge31cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovIGNsYXNzIFJvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHQ7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcih0KSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gU28odCkucHV0KG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFNvKHQpLmRlbGV0ZShcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgdmlhIHRoZSBwcmltYXJ5IGtleSBvZlxuICogdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlLlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGgudG9BcnJheSgpO1xuICAgICAgICAgICAgcmV0dXJuIFsgXG4gICAgICAgICAgICAvKiBwcmVmaXggcGF0aCAqLyBuLnNsaWNlKDAsIG4ubGVuZ3RoIC0gMiksIFxuICAgICAgICAgICAgLyogY29sbGVjdGlvbiBpZCAqLyBuW24ubGVuZ3RoIC0gMl0sIGZyKGUpLCBcbiAgICAgICAgICAgIC8qIGRvY3VtZW50IGlkICovIG5bbi5sZW5ndGggLSAxXSBdO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIG9uIHRoZVxuICogYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudENvbGxlY3Rpb25Hcm91cEluZGV4YCBpbmRleC5cbiAqLyAoZSwgbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjdXJyZW50IGNhY2hlIHNpemUuXG4gICAgICpcbiAgICAgKiBDYWxsZXJzIHRvIGBhZGRFbnRyeSgpYCBhbmQgYHJlbW92ZUVudHJ5KClgICptdXN0KiBjYWxsIHRoaXMgYWZ0ZXJ3YXJkcyB0byB1cGRhdGUgdGhlXG4gICAgICogY2FjaGUncyBtZXRhZGF0YS5cbiAgICAgKi8gICAgdXBkYXRlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0KS5uZXh0KChuID0+IChuLmJ5dGVTaXplICs9IGUsIHRoaXMuWm4odCwgbikpKSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBhbi5uZXdJbnZhbGlkRG9jdW1lbnQoZSk7XG4gICAgICAgIHJldHVybiBTbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KERvKGUpKVxuICAgICAgICB9LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4gPSB0aGlzLnRzKGUsIHMpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgZW50cnkgYW5kIGl0cyBzaXplLlxuICAgICAqLyAgICBlcyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0ge1xuICAgICAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgICAgIGRvY3VtZW50OiBhbi5uZXdJbnZhbGlkRG9jdW1lbnQoZSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoRG8oZSkpXG4gICAgICAgIH0sICgodCwgcykgPT4ge1xuICAgICAgICAgICAgbiA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogdGhpcy50cyhlLCBzKSxcbiAgICAgICAgICAgICAgICBzaXplOiBybyhzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gY3MoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnModCwgZSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy50cyh0LCBlKTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUgc2V0IG9mIGtleXMgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGRvY3VtZW50cyBpbmRleGVkIGJ5IGtleSBhbmQgYSBtYXAgb2Ygc2l6ZXMgaW5kZXhlZCBieVxuICAgICAqICAgICBrZXkgKHplcm8gaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0KS5cbiAgICAgKi8gICAgc3ModCwgZSkge1xuICAgICAgICBsZXQgbiA9IGNzKCksIHMgPSBuZXcgcGUoaHQuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLm5zKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMudHModCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgaSksIHMgPSBzLmluc2VydCh0LCBybyhlKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgZG9jdW1lbnRzOiBuLFxuICAgICAgICAgICAgcnM6IHNcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgbnModCwgZSwgbikge1xuICAgICAgICBpZiAoZS5pc0VtcHR5KCkpIHJldHVybiBSdC5yZXNvbHZlKCk7XG4gICAgICAgIGxldCBzID0gbmV3IEVlKHhvKTtcbiAgICAgICAgZS5mb3JFYWNoKCh0ID0+IHMgPSBzLmFkZCh0KSkpO1xuICAgICAgICBjb25zdCBpID0gSURCS2V5UmFuZ2UuYm91bmQoRG8ocy5maXJzdCgpKSwgRG8ocy5sYXN0KCkpKSwgciA9IHMuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgbGV0IG8gPSByLmdldE5leHQoKTtcbiAgICAgICAgcmV0dXJuIFNvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IGlcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gaHQuZnJvbVNlZ21lbnRzKFsgLi4uZS5wcmVmaXhQYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5kb2N1bWVudElkIF0pO1xuICAgICAgICAgICAgLy8gR28gdGhyb3VnaCBrZXlzIG5vdCBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO28gJiYgeG8obywgaSkgPCAwOyApIG4obywgbnVsbCksIG8gPSByLmdldE5leHQoKTtcbiAgICAgICAgICAgIG8gJiYgby5pc0VxdWFsKGkpICYmIChcbiAgICAgICAgICAgIC8vIEtleSBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgIG4obywgZSksIG8gPSByLmhhc05leHQoKSA/IHIuZ2V0TmV4dCgpIDogbnVsbCksIFxuICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgbmV4dCBrZXkgKGlmIHRoZXJlIGlzIG9uZSkuXG4gICAgICAgICAgICBvID8gcy5HKERvKG8pKSA6IHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGtleXMgYXJlIG5vdCBpbiB0aGUgY2FjaGUuIE9uZSBjYXNlIHdoZXJlIGBpdGVyYXRlYFxuICAgICAgICAgICAgLy8gYWJvdmUgd29uJ3QgZ28gdGhyb3VnaCB0aGVtIGlzIHdoZW4gdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgICAgICAgICAgZm9yICg7bzsgKSBuKG8sIG51bGwpLCBvID0gci5oYXNOZXh0KCkgPyByLmdldE5leHQoKSA6IG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBlLnBhdGgsIHIgPSBbIGkucG9wTGFzdCgpLnRvQXJyYXkoKSwgaS5sYXN0U2VnbWVudCgpLCBmcihuLnJlYWRUaW1lKSwgbi5kb2N1bWVudEtleS5wYXRoLmlzRW1wdHkoKSA/IFwiXCIgOiBuLmRvY3VtZW50S2V5LnBhdGgubGFzdFNlZ21lbnQoKSBdLCBvID0gWyBpLnBvcExhc3QoKS50b0FycmF5KCksIGkubGFzdFNlZ21lbnQoKSwgWyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgXSwgXCJcIiBdO1xuICAgICAgICByZXR1cm4gU28odCkuaihJREJLZXlSYW5nZS5ib3VuZChyLCBvLCAhMCkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbGV0IG4gPSBjcygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50cyhodC5mcm9tU2VnbWVudHMoaS5wcmVmaXhQYXRoLmNvbmNhdChpLmNvbGxlY3Rpb25Hcm91cCwgaS5kb2N1bWVudElkKSksIGkpO1xuICAgICAgICAgICAgICAgIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgKG5zKGUsIHQpIHx8IHMuaGFzKHQua2V5KSkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEVpdGhlciB0aGUgZG9jdW1lbnQgbWF0Y2hlcyB0aGUgZ2l2ZW4gcXVlcnksIG9yIGl0IGlzIG11dGF0ZWQuXG4gICAgICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQua2V5LCB0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBjcygpO1xuICAgICAgICBjb25zdCByID0gQ28oZSwgbiksIG8gPSBDbyhlLCBJdC5tYXgoKSk7XG4gICAgICAgIHJldHVybiBTbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2UuYm91bmQociwgbywgITApXG4gICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMudHMoaHQuZnJvbVNlZ21lbnRzKGUucHJlZml4UGF0aC5jb25jYXQoZS5jb2xsZWN0aW9uR3JvdXAsIGUuZG9jdW1lbnRJZCkpLCBlKTtcbiAgICAgICAgICAgIGkgPSBpLmluc2VydChyLmtleSwgciksIGkuc2l6ZSA9PT0gcyAmJiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBibyh0aGlzLCAhIXQgJiYgdC50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKHQgPT4gdC5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YSh0KSB7XG4gICAgICAgIHJldHVybiBWbyh0KS5nZXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiKS5uZXh0KCh0ID0+IChGKCEhdCksIHQpKSk7XG4gICAgfVxuICAgIFpuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFZvKHQpLnB1dChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGBkYlJlbW90ZURvY2AgYW5kIHJldHVybnMgdGhlIGRvY3VtZW50IChvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmXG4gICAgICogdGhlIGRvY3VtZW50IGNvcnJlc3BvbmRzIHRvIHRoZSBmb3JtYXQgdXNlZCBmb3Igc2VudGluZWwgZGVsZXRlcykuXG4gICAgICovICAgIHRzKHQsIGUpIHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBocih0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICAgICAgLy8gV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgYSBzZW50aW5lbCByZW1vdmFsIGFuZCBzaG91bGQgb25seSBiZSB1c2VkIGluIHRoZVxuICAgICAgICAgICAgLy8gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodC5pc05vRG9jdW1lbnQoKSAmJiB0LnZlcnNpb24uaXNFcXVhbChydC5taW4oKSkpKSByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYW4ubmV3SW52YWxpZERvY3VtZW50KHQpO1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS4gKi8gZnVuY3Rpb24gUG8odCkge1xuICAgIHJldHVybiBuZXcgUm8odCk7XG59XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBVbmxpa2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLCB0aGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGNvbXB1dGVzIHRoZSBzaXplXG4gKiBkZWx0YSBmb3IgYWxsIHN1Ym1pdHRlZCBjaGFuZ2VzLiBUaGlzIGF2b2lkcyBoYXZpbmcgdG8gcmUtcmVhZCBhbGwgZG9jdW1lbnRzIGZyb20gSW5kZXhlZERiXG4gKiB3aGVuIHdlIGFwcGx5IHRoZSBjaGFuZ2VzLlxuICovIGNsYXNzIGJvIGV4dGVuZHMgdm8ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudENhY2hlIC0gVGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUgdG8gYXBwbHkgdGhlIGNoYW5nZXMgdG8uXG4gICAgICogQHBhcmFtIHRyYWNrUmVtb3ZhbHMgLSBXaGV0aGVyIHRvIGNyZWF0ZSBzZW50aW5lbCBkZWxldGVzIHRoYXQgY2FuIGJlIHRyYWNrZWQgYnlcbiAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5vcyA9IHQsIHRoaXMudHJhY2tSZW1vdmFscyA9IGUsIFxuICAgICAgICAvLyBBIG1hcCBvZiBkb2N1bWVudCBzaXplcyBhbmQgcmVhZCB0aW1lcyBwcmlvciB0byBhcHBseWluZyB0aGUgY2hhbmdlcyBpblxuICAgICAgICAvLyB0aGlzIGJ1ZmZlci5cbiAgICAgICAgdGhpcy51cyA9IG5ldyBvcygodCA9PiB0LnRvU3RyaW5nKCkpLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpO1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXModCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCBuID0gMCwgcyA9IG5ldyBFZSgoKHQsIGUpID0+IGV0KHQuY2Fub25pY2FsU3RyaW5nKCksIGUuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKGksIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLnVzLmdldChpKTtcbiAgICAgICAgICAgIGlmIChlLnB1c2godGhpcy5vcy5yZW1vdmVFbnRyeSh0LCBpLCBvLnJlYWRUaW1lKSksIHIuaXNWYWxpZERvY3VtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1ID0gbHIodGhpcy5vcy5zZXJpYWxpemVyLCByKTtcbiAgICAgICAgICAgICAgICBzID0gcy5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IHJvKHUpO1xuICAgICAgICAgICAgICAgIG4gKz0gYyAtIG8uc2l6ZSwgZS5wdXNoKHRoaXMub3MuYWRkRW50cnkodCwgaSwgdSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuIC09IG8uc2l6ZSwgdGhpcy50cmFja1JlbW92YWxzKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gdHJhY2sgcmVtb3ZhbHMsIHdlIHN0b3JlIGEgXCJzZW50aW5lbCBkZWxldGVcIiBpbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGVudHJ5IGlzIHJlcHJlc2VudGVkIGJ5IGEgTm9Eb2N1bWVudFxuICAgICAgICAgICAgICAgIC8vIHdpdGggYSB2ZXJzaW9uIG9mIDAgYW5kIGlnbm9yZWQgYnkgYG1heWJlRGVjb2RlRG9jdW1lbnQoKWAgYnV0XG4gICAgICAgICAgICAgICAgLy8gcHJlc2VydmVkIGluIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGxyKHRoaXMub3Muc2VyaWFsaXplciwgci5jb252ZXJ0VG9Ob0RvY3VtZW50KHJ0Lm1pbigpKSk7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMub3MuYWRkRW50cnkodCwgaSwgbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLnB1c2godGhpcy5vcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgbikpO1xuICAgICAgICB9KSksIGUucHVzaCh0aGlzLm9zLnVwZGF0ZU1ldGFkYXRhKHQsIG4pKSwgUnQud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZSBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy5vcy5lcyh0LCBlKS5uZXh0KCh0ID0+ICh0aGlzLnVzLnNldChlLCB7XG4gICAgICAgICAgICBzaXplOiB0LnNpemUsXG4gICAgICAgICAgICByZWFkVGltZTogdC5kb2N1bWVudC5yZWFkVGltZVxuICAgICAgICB9KSwgdC5kb2N1bWVudCkpKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZVxuICAgICAgICAvLyBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy5vcy5zcyh0LCBlKS5uZXh0KCgoe2RvY3VtZW50czogdCwgcnM6IGV9KSA9PiAoXG4gICAgICAgIC8vIE5vdGU6IGBnZXRBbGxGcm9tQ2FjaGVgIHJldHVybnMgdHdvIG1hcHMgaW5zdGVhZCBvZiBhIHNpbmdsZSBtYXAgZnJvbVxuICAgICAgICAvLyBrZXlzIHRvIGBEb2N1bWVudFNpemVFbnRyeWBzLiBUaGlzIGlzIHRvIGFsbG93IHJldHVybmluZyB0aGVcbiAgICAgICAgLy8gYE11dGFibGVEb2N1bWVudE1hcGAgZGlyZWN0bHksIHdpdGhvdXQgYSBjb252ZXJzaW9uLlxuICAgICAgICBlLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVzLnNldChlLCB7XG4gICAgICAgICAgICAgICAgc2l6ZTogbixcbiAgICAgICAgICAgICAgICByZWFkVGltZTogdC5nZXQoZSkucmVhZFRpbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIHQpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBWbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSByZW1vdGVEb2N1bWVudHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFNvKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJyZW1vdGVEb2N1bWVudHNWMTRcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIG9uIHRoZVxuICogYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudEtleUluZGV4YCBpbmRleC5cbiAqLyBmdW5jdGlvbiBEbyh0KSB7XG4gICAgY29uc3QgZSA9IHQucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogcHJlZml4IHBhdGggKi8gZS5zbGljZSgwLCBlLmxlbmd0aCAtIDIpLCBcbiAgICAvKiBjb2xsZWN0aW9uIGlkICovIGVbZS5sZW5ndGggLSAyXSwgXG4gICAgLyogZG9jdW1lbnQgaWQgKi8gZVtlLmxlbmd0aCAtIDFdIF07XG59XG5cbmZ1bmN0aW9uIENvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5kb2N1bWVudEtleS5wYXRoLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gWyBcbiAgICAvKiBjb2xsZWN0aW9uIGlkICovIHQsIGZyKGUucmVhZFRpbWUpLCBcbiAgICAvKiBwcmVmaXggcGF0aCAqLyBuLnNsaWNlKDAsIG4ubGVuZ3RoIC0gMiksIFxuICAgIC8qIGRvY3VtZW50IGlkICovIG4ubGVuZ3RoID4gMCA/IG5bbi5sZW5ndGggLSAxXSA6IFwiXCIgXTtcbn1cblxuLyoqXG4gKiBDb21wYXJhdG9yIHRoYXQgY29tcGFyZXMgZG9jdW1lbnQga2V5cyBhY2NvcmRpbmcgdG8gdGhlIHByaW1hcnkga2V5IHNvcnRpbmdcbiAqIHVzZWQgYnkgdGhlIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRgIHN0b3JlIChieSBwcmVmaXggcGF0aCwgY29sbGVjdGlvbiBpZFxuICogYW5kIHRoZW4gZG9jdW1lbnQgSUQpLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi8gZnVuY3Rpb24geG8odCwgZSkge1xuICAgIGNvbnN0IG4gPSB0LnBhdGgudG9BcnJheSgpLCBzID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICAvLyBUaGUgb3JkZXJpbmcgaXMgYmFzZWQgb24gaHR0cHM6Ly9jaHJvbWl1bS5nb29nbGVzb3VyY2UuY29tL2Nocm9taXVtL2JsaW5rLysvZmU1YzIxZmVmOTRkYWU3MWMxYzMzNDQ3NzViOGQ4YTdmN2U2ZDllYy9Tb3VyY2UvbW9kdWxlcy9pbmRleGVkZGIvSURCS2V5LmNwcCM3NFxuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoIC0gMiAmJiB0IDwgcy5sZW5ndGggLSAyOyArK3QpIGlmIChpID0gZXQoblt0XSwgc1t0XSksIFxuICAgIGkpIHJldHVybiBpO1xuICAgIHJldHVybiBpID0gZXQobi5sZW5ndGgsIHMubGVuZ3RoKSwgaSB8fCAoaSA9IGV0KG5bbi5sZW5ndGggLSAyXSwgc1tzLmxlbmd0aCAtIDJdKSwgXG4gICAgaSB8fCBldChuW24ubGVuZ3RoIC0gMV0sIHNbcy5sZW5ndGggLSAxXSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTY2hlbWEgVmVyc2lvbiBmb3IgdGhlIFdlYiBjbGllbnQ6XG4gKiAxLiAgSW5pdGlhbCB2ZXJzaW9uIGluY2x1ZGluZyBNdXRhdGlvbiBRdWV1ZSwgUXVlcnkgQ2FjaGUsIGFuZCBSZW1vdGVcbiAqICAgICBEb2N1bWVudCBDYWNoZVxuICogMi4gIFVzZWQgdG8gZW5zdXJlIGEgdGFyZ2V0R2xvYmFsIG9iamVjdCBleGlzdHMgYW5kIGFkZCB0YXJnZXRDb3VudCB0byBpdC4gTm9cbiAqICAgICBsb25nZXIgcmVxdWlyZWQgYmVjYXVzZSBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICogMy4gIERyb3BwZWQgYW5kIHJlLWNyZWF0ZWQgUXVlcnkgQ2FjaGUgdG8gZGVhbCB3aXRoIGNhY2hlIGNvcnJ1cHRpb24gcmVsYXRlZFxuICogICAgIHRvIGxpbWJvIHJlc29sdXRpb24uIEFkZHJlc3Nlc1xuICogICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1pb3Mtc2RrL2lzc3Vlcy8xNTQ4XG4gKiA0LiAgTXVsdGktVGFiIFN1cHBvcnQuXG4gKiA1LiAgUmVtb3ZhbCBvZiBoZWxkIHdyaXRlIGFja3MuXG4gKiA2LiAgQ3JlYXRlIGRvY3VtZW50IGdsb2JhbCBmb3IgdHJhY2tpbmcgZG9jdW1lbnQgY2FjaGUgc2l6ZS5cbiAqIDcuICBFbnN1cmUgZXZlcnkgY2FjaGVkIGRvY3VtZW50IGhhcyBhIHNlbnRpbmVsIHJvdyB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLlxuICogOC4gIEFkZCBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBmb3IgQ29sbGVjdGlvbiBHcm91cCBxdWVyaWVzLlxuICogOS4gIENoYW5nZSBSZW1vdGVEb2N1bWVudENoYW5nZXMgc3RvcmUgdG8gYmUga2V5ZWQgYnkgcmVhZFRpbWUgcmF0aGVyIHRoYW5cbiAqICAgICBhbiBhdXRvLWluY3JlbWVudGluZyBJRC4gVGhpcyBpcyByZXF1aXJlZCBmb3IgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICogMTAuIFJld3JpdGUgdGhlIGNhbm9uaWNhbCBJRHMgdG8gdGhlIGV4cGxpY2l0IFByb3RvYnVmLWJhc2VkIGZvcm1hdC5cbiAqIDExLiBBZGQgYnVuZGxlcyBhbmQgbmFtZWRfcXVlcmllcyBmb3IgYnVuZGxlIHN1cHBvcnQuXG4gKiAxMi4gQWRkIGRvY3VtZW50IG92ZXJsYXlzLlxuICogMTMuIFJld3JpdGUgdGhlIGtleXMgb2YgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSB0byBhbGxvdyBmb3IgZWZmaWNpZW50XG4gKiAgICAgZG9jdW1lbnQgbG9va3VwIHZpYSBgZ2V0QWxsKClgLlxuICogMTQuIEFkZCBvdmVybGF5cy5cbiAqIDE1LiBBZGQgaW5kZXhpbmcgc3VwcG9ydC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsIHZpZXcgKG92ZXJsYXkpIG9mIGEgZG9jdW1lbnQsIGFuZCB0aGUgZmllbGRzIHRoYXQgYXJlXG4gKiBsb2NhbGx5IG11dGF0ZWQuXG4gKi9cbmNsYXNzIE5vIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGRzIHRoYXQgYXJlIGxvY2FsbHkgbXV0YXRlZCBieSBwYXRjaCBtdXRhdGlvbnMuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgb3ZlcmxheWVkXHRkb2N1bWVudCBpcyBmcm9tIHNldCBvciBkZWxldGUgbXV0YXRpb25zLCB0aGlzIGlzIGBudWxsYC5cbiAgICAgKiBJZiB0aGVyZSBpcyBubyBvdmVybGF5IChtdXRhdGlvbikgZm9yIHRoZSBkb2N1bWVudCwgdGhpcyBpcyBhbiBlbXB0eSBgRmllbGRNYXNrYC5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMub3ZlcmxheWVkRG9jdW1lbnQgPSB0LCB0aGlzLm11dGF0ZWRGaWVsZHMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqLyBjbGFzcyBrbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSB0LCB0aGlzLm11dGF0aW9uUXVldWUgPSBlLCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlID0gbiwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBpZGVudGlmaWVkIGJ5IGBrZXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgb3IgbnVsbCBpZiB3ZSBkb24ndCBoYXZlIGFueSBjYWNoZWRcbiAgICAgKiBzdGF0ZSBmb3IgaXQuXG4gICAgICovICAgIGdldERvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5KHQsIGUpLm5leHQoKHMgPT4gKG4gPSBzLCB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkodCwgZSkpKSkubmV4dCgodCA9PiAobnVsbCAhPT0gbiAmJiBLcyhuLm11dGF0aW9uLCB0LCBSZS5lbXB0eSgpLCBpdC5ub3coKSksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgaWRlbnRpZmllZCBieSBga2V5c2AuXG4gICAgICpcbiAgICAgKiBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzdGF0ZSBmb3IgYSBkb2N1bWVudCBpbiBga2V5c2AsIGEgTm9Eb2N1bWVudCB3aWxsXG4gICAgICogYmUgc3RvcmVkIGZvciB0aGF0IGtleSBpbiB0aGUgcmVzdWx0aW5nIHNldC5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyaWVzKHQsIGUpLm5leHQoKGUgPT4gdGhpcy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyh0LCBlLCBncygpKS5uZXh0KCgoKSA9PiBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byBgZ2V0RG9jdW1lbnRzYCwgYnV0IGNyZWF0ZXMgdGhlIGxvY2FsIHZpZXcgZnJvbSB0aGUgZ2l2ZW5cbiAgICAgKiBgYmFzZURvY3NgIHdpdGhvdXQgcmV0cmlldmluZyBkb2N1bWVudHMgZnJvbSB0aGUgbG9jYWwgc3RvcmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gdGhpcyBvcGVyYXRpb24gaXMgc2NvcGVkIHRvLlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBhcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gZ2V0IHRoZSBsb2NhbCB2aWV3cy5cbiAgICAgKiBAcGFyYW0gZXhpc3RlbmNlU3RhdGVDaGFuZ2VkIC0gVGhlIHNldCBvZiBkb2N1bWVudCBrZXlzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZVxuICAgICAqICAgaXMgY2hhbmdlZC4gVGhpcyBpcyB1c2VmdWwgdG8gZGV0ZXJtaW5lIGlmIHNvbWUgZG9jdW1lbnRzIG92ZXJsYXkgbmVlZHNcbiAgICAgKiAgIHRvIGJlIHJlY2FsY3VsYXRlZC5cbiAgICAgKi8gICAgZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHModCwgZSwgbiA9IGdzKCkpIHtcbiAgICAgICAgY29uc3QgcyA9IGZzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRlT3ZlcmxheXModCwgcywgZSkubmV4dCgoKCkgPT4gdGhpcy5jb21wdXRlVmlld3ModCwgZSwgcywgbikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgZSA9IGhzKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGUgPSBlLmluc2VydCh0LCBuLm92ZXJsYXllZERvY3VtZW50KTtcbiAgICAgICAgICAgIH0pKSwgZTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG92ZXJsYXllZCBkb2N1bWVudHMgZm9yIHRoZSBnaXZlbiBkb2N1bWVudCBtYXAsIHdoaWNoIHdpbGwgaW5jbHVkZVxuICAgICAqIHRoZSBsb2NhbCB2aWV3IG9mIHRob3NlIGRvY3VtZW50cyBhbmQgYSBgRmllbGRNYXNrYCBpbmRpY2F0aW5nIHdoaWNoIGZpZWxkc1xuICAgICAqIGFyZSBtdXRhdGVkIGxvY2FsbHksIGBudWxsYCBpZiBvdmVybGF5IGlzIGEgU2V0IG9yIERlbGV0ZSBtdXRhdGlvbi5cbiAgICAgKi8gICAgZ2V0T3ZlcmxheWVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGZzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRlT3ZlcmxheXModCwgbiwgZSkubmV4dCgoKCkgPT4gdGhpcy5jb21wdXRlVmlld3ModCwgZSwgbiwgZ3MoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgb3ZlcmxheXMgZm9yIHtAY29kZSBkb2NzfSBhbmQgYWRkcyB0aGVtIHRvIHByb3ZpZGVkIG92ZXJsYXkgbWFwXG4gICAgICogaWYgdGhlIG1hcCBkb2VzIG5vdCBhbHJlYWR5IGNvbnRhaW4gYW4gZW50cnkgZm9yIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkuXG4gICAgICovICAgIHBvcHVsYXRlT3ZlcmxheXModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5oYXModCkgfHwgcy5wdXNoKHQpO1xuICAgICAgICB9KSksIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheXModCwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5zZXQodCwgbik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgZm9yIHRoZSBnaXZlbiBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jcyAtIFRoZSBkb2N1bWVudHMgdG8gY29tcHV0ZSB2aWV3cyBmb3IuIEl0IGFsc28gaGFzIHRoZSBiYXNlXG4gICAgICogICB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIG92ZXJsYXlzIC0gVGhlIG92ZXJsYXlzIHRoYXQgbmVlZCB0byBiZSBhcHBsaWVkIHRvIHRoZSBnaXZlbiBiYXNlXG4gICAgICogICB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIGV4aXN0ZW5jZVN0YXRlQ2hhbmdlZCAtIEEgc2V0IG9mIGRvY3VtZW50cyB3aG9zZSBleGlzdGVuY2Ugc3RhdGVzXG4gICAgICogICBtaWdodCBoYXZlIGNoYW5nZWQuIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgd2UgbmVlZCB0byByZS1jYWxjdWxhdGVcbiAgICAgKiAgIG92ZXJsYXlzIGZyb20gbXV0YXRpb24gcXVldWVzLlxuICAgICAqIEByZXR1cm4gQSBtYXAgcmVwcmVzZW50cyB0aGUgbG9jYWwgZG9jdW1lbnRzIHZpZXcuXG4gICAgICovICAgIGNvbXB1dGVWaWV3cyh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gY3MoKTtcbiAgICAgICAgY29uc3QgciA9IHdzKCksIG8gPSB3cygpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG4uZ2V0KGUua2V5KTtcbiAgICAgICAgICAgIC8vIFJlY2FsY3VsYXRlIGFuIG92ZXJsYXkgaWYgdGhlIGRvY3VtZW50J3MgZXhpc3RlbmNlIHN0YXRlIGNoYW5nZWQgZHVlIHRvXG4gICAgICAgICAgICAvLyBhIHJlbW90ZSBldmVudCAqYW5kKiB0aGUgb3ZlcmxheSBpcyBhIFBhdGNoTXV0YXRpb24uIFRoaXMgaXMgYmVjYXVzZVxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgZXhpc3RlbmNlIHN0YXRlIGNhbiBjaGFuZ2UgaWYgc29tZSBwYXRjaCBtdXRhdGlvbidzXG4gICAgICAgICAgICAvLyBwcmVjb25kaXRpb25zIGFyZSBtZXQuXG4gICAgICAgICAgICAvLyBOT1RFOiB3ZSByZWNhbGN1bGF0ZSB3aGVuIGBvdmVybGF5YCBpcyB1bmRlZmluZWQgYXMgd2VsbCwgYmVjYXVzZSB0aGVyZVxuICAgICAgICAgICAgLy8gbWlnaHQgYmUgYSBwYXRjaCBtdXRhdGlvbiB3aG9zZSBwcmVjb25kaXRpb24gZG9lcyBub3QgbWF0Y2ggYmVmb3JlIHRoZVxuICAgICAgICAgICAgLy8gY2hhbmdlIChoZW5jZSBvdmVybGF5IGlzIHVuZGVmaW5lZCksIGJ1dCB3b3VsZCBub3cgbWF0Y2guXG4gICAgICAgICAgICAgICAgICAgICAgICBzLmhhcyhlLmtleSkgJiYgKHZvaWQgMCA9PT0gbyB8fCBvLm11dGF0aW9uIGluc3RhbmNlb2YgenMpID8gaSA9IGkuaW5zZXJ0KGUua2V5LCBlKSA6IHZvaWQgMCAhPT0gbyA/IChyLnNldChlLmtleSwgby5tdXRhdGlvbi5nZXRGaWVsZE1hc2soKSksIFxuICAgICAgICAgICAgS3Moby5tdXRhdGlvbiwgZSwgby5tdXRhdGlvbi5nZXRGaWVsZE1hc2soKSwgaXQubm93KCkpKSA6IFxuICAgICAgICAgICAgLy8gbm8gb3ZlcmxheSBleGlzdHNcbiAgICAgICAgICAgIC8vIFVzaW5nIEVNUFRZIHRvIGluZGljYXRlIHRoZXJlIGlzIG5vIG92ZXJsYXkgZm9yIHRoZSBkb2N1bWVudC5cbiAgICAgICAgICAgIHIuc2V0KGUua2V5LCBSZS5lbXB0eSgpKTtcbiAgICAgICAgfSkpLCB0aGlzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKHQsIGkpLm5leHQoKHQgPT4gKHQuZm9yRWFjaCgoKHQsIGUpID0+IHIuc2V0KHQsIGUpKSksIFxuICAgICAgICBlLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB2YXIgbjtcbiAgICAgICAgICAgIHJldHVybiBvLnNldCh0LCBuZXcgTm8oZSwgbnVsbCAhPT0gKG4gPSByLmdldCh0KSkgJiYgdm9pZCAwICE9PSBuID8gbiA6IG51bGwpKTtcbiAgICAgICAgfSkpLCBvKSkpO1xuICAgIH1cbiAgICByZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB3cygpO1xuICAgICAgICAvLyBBIHJldmVyc2UgbG9va3VwIG1hcCBmcm9tIGJhdGNoIGlkIHRvIHRoZSBkb2N1bWVudHMgd2l0aGluIHRoYXQgYmF0Y2guXG4gICAgICAgICAgICAgICAgbGV0IHMgPSBuZXcgcGUoKCh0LCBlKSA9PiB0IC0gZSkpLCBpID0gZ3MoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkgaS5rZXlzKCkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGUuZ2V0KHQpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSByKSByZXR1cm47XG4gICAgICAgICAgICAgICAgbGV0IG8gPSBuLmdldCh0KSB8fCBSZS5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIG8gPSBpLmFwcGx5VG9Mb2NhbFZpZXcociwgbyksIG4uc2V0KHQsIG8pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHUgPSAocy5nZXQoaS5iYXRjaElkKSB8fCBncygpKS5hZGQodCk7XG4gICAgICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGkuYmF0Y2hJZCwgdSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gW10sIG8gPSBzLmdldFJldmVyc2VJdGVyYXRvcigpO1xuICAgICAgICAgICAgLy8gSXRlcmF0ZSBpbiBkZXNjZW5kaW5nIG9yZGVyIG9mIGJhdGNoIElEcywgYW5kIHNraXAgZG9jdW1lbnRzIHRoYXQgYXJlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IHNhdmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7by5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBvLmdldE5leHQoKSwgdSA9IHMua2V5LCBjID0gcy52YWx1ZSwgYSA9IGRzKCk7XG4gICAgICAgICAgICAgICAgYy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpLmhhcyh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHFzKGUuZ2V0KHQpLCBuLmdldCh0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBzICYmIGEuc2V0KHQsIHMpLCBpID0gaS5hZGQodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSksIHIucHVzaCh0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLnNhdmVPdmVybGF5cyh0LCB1LCBhKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUnQud2FpdEZvcihyKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjYWxjdWxhdGVzIG92ZXJsYXlzIGJ5IHJlYWRpbmcgdGhlIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZVxuICAgICAqIGZpcnN0LCBhbmQgc2F2ZXMgdGhlbSBhZnRlciB0aGV5IGFyZSBjYWxjdWxhdGVkLlxuICAgICAqLyAgICByZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyh0LCBlKS5uZXh0KChlID0+IHRoaXMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXModCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIG1hdGNoIGRvY3VtZW50cyBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSBSZWFkIHRpbWUgYW5kIGtleSB0byBzdGFydCBzY2FubmluZyBieSAoZXhjbHVzaXZlKS5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgc2luZ2xlIGRvY3VtZW50IGJ5IHBhdGggKHJhdGhlciB0aGFuIGFcbiAqIGNvbGxlY3Rpb24pLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gaHQuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG4gICAgICAgIH0oZSkgPyB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeSh0LCBlLnBhdGgpIDogV24oZSkgPyB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkodCwgZSwgbikgOiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGNvbGxlY3Rpb24gZ3JvdXAsIHJldHVybnMgdGhlIG5leHQgZG9jdW1lbnRzIHRoYXQgZm9sbG93IHRoZSBwcm92aWRlZCBvZmZzZXQsIGFsb25nXG4gICAgICogd2l0aCBhbiB1cGRhdGVkIGJhdGNoIElELlxuICAgICAqXG4gICAgICogPHA+VGhlIGRvY3VtZW50cyByZXR1cm5lZCBieSB0aGlzIG1ldGhvZCBhcmUgb3JkZXJlZCBieSByZW1vdGUgdmVyc2lvbiBmcm9tIHRoZSBwcm92aWRlZFxuICAgICAqIG9mZnNldC4gSWYgdGhlcmUgYXJlIG5vIG1vcmUgcmVtb3RlIGRvY3VtZW50cyBhZnRlciB0aGUgcHJvdmlkZWQgb2Zmc2V0LCBkb2N1bWVudHMgd2l0aFxuICAgICAqIG11dGF0aW9ucyBpbiBvcmRlciBvZiBiYXRjaCBpZCBmcm9tIHRoZSBvZmZzZXQgYXJlIHJldHVybmVkLiBTaW5jZSBhbGwgZG9jdW1lbnRzIGluIGEgYmF0Y2ggYXJlXG4gICAgICogcmV0dXJuZWQgdG9nZXRoZXIsIHRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzIHJldHVybmVkIGNhbiBleGNlZWQge0Bjb2RlIGNvdW50fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvblxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uR3JvdXAgVGhlIGNvbGxlY3Rpb24gZ3JvdXAgZm9yIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IHRvIGluZGV4IGludG8uXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRvIHJldHVyblxuICAgICAqIEByZXR1cm4gQSBMb2NhbFdyaXRlUmVzdWx0IHdpdGggdGhlIGRvY3VtZW50cyB0aGF0IGZvbGxvdyB0aGUgcHJvdmlkZWQgb2Zmc2V0IGFuZCB0aGUgbGFzdCBwcm9jZXNzZWQgYmF0Y2ggaWQuXG4gICAgICovICAgIGdldE5leHREb2N1bWVudHModCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gcyAtIGkuc2l6ZSA+IDAgPyB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4ubGFyZ2VzdEJhdGNoSWQsIHMgLSBpLnNpemUpIDogUnQucmVzb2x2ZShmcygpKTtcbiAgICAgICAgICAgIC8vIFRoZSBjYWxsc2l0ZSB3aWxsIHVzZSB0aGUgbGFyZ2VzdCBiYXRjaCBJRCB0b2dldGhlciB3aXRoIHRoZSBsYXRlc3QgcmVhZCB0aW1lIHRvIGNyZWF0ZVxuICAgICAgICAgICAgLy8gYSBuZXcgaW5kZXggb2Zmc2V0LiBTaW5jZSB3ZSBvbmx5IHByb2Nlc3MgYmF0Y2ggSURzIGlmIGFsbCByZW1vdGUgZG9jdW1lbnRzIGhhdmUgYmVlbiByZWFkLFxuICAgICAgICAgICAgLy8gbm8gb3ZlcmxheSB3aWxsIGluY3JlYXNlIHRoZSBvdmVyYWxsIHJlYWQgdGltZS4gVGhpcyBpcyB3aHkgd2Ugb25seSBuZWVkIHRvIHNwZWNpYWwgY2FzZVxuICAgICAgICAgICAgLy8gdGhlIGJhdGNoIGlkLlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG8gPSAtMSwgdSA9IGk7XG4gICAgICAgICAgICByZXR1cm4gci5uZXh0KChlID0+IFJ0LmZvckVhY2goZSwgKChlLCBuKSA9PiAobyA8IG4ubGFyZ2VzdEJhdGNoSWQgJiYgKG8gPSBuLmxhcmdlc3RCYXRjaElkKSwgXG4gICAgICAgICAgICBpLmdldChlKSA/IFJ0LnJlc29sdmUoKSA6IHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB1ID0gdS5pbnNlcnQoZSwgdCk7XG4gICAgICAgICAgICB9KSkpKSkubmV4dCgoKCkgPT4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKHQsIGUsIGkpKSkubmV4dCgoKCkgPT4gdGhpcy5jb21wdXRlVmlld3ModCwgdSwgZSwgZ3MoKSkpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogbyxcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiBscyh0KVxuICAgICAgICAgICAgfSkpKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeSh0LCBlKSB7XG4gICAgICAgIC8vIEp1c3QgZG8gYSBzaW1wbGUgZG9jdW1lbnQgbG9va3VwLlxuICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudCh0LCBuZXcgaHQoZSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbGV0IGUgPSBocygpO1xuICAgICAgICAgICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgKGUgPSBlLmluc2VydCh0LmtleSwgdCkpLCBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5jb2xsZWN0aW9uR3JvdXA7XG4gICAgICAgIGxldCBpID0gaHMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmdldENvbGxlY3Rpb25QYXJlbnRzKHQsIHMpLm5leHQoKHIgPT4gUnQuZm9yRWFjaChyLCAociA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVW4oZSwgXG4gICAgICAgICAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICAgICAgfShlLCByLmNoaWxkKHMpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KHQsIG8sIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbih0LCBlLnBhdGgsIG4ubGFyZ2VzdEJhdGNoSWQpLm5leHQoKGkgPT4gKHMgPSBpLCBcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiwgcykpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAvLyBBcyBkb2N1bWVudHMgbWlnaHQgbWF0Y2ggdGhlIHF1ZXJ5IGJlY2F1c2Ugb2YgdGhlaXIgb3ZlcmxheSB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBpbmNsdWRlIGRvY3VtZW50cyBmb3IgYWxsIG92ZXJsYXlzIGluIHRoZSBpbml0aWFsIGRvY3VtZW50IHNldC5cbiAgICAgICAgICAgIHMuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbi5nZXRLZXkoKTtcbiAgICAgICAgICAgICAgICBudWxsID09PSB0LmdldChzKSAmJiAodCA9IHQuaW5zZXJ0KHMsIGFuLm5ld0ludmFsaWREb2N1bWVudChzKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgLy8gQXBwbHkgdGhlIG92ZXJsYXlzIGFuZCBtYXRjaCBhZ2FpbnN0IHRoZSBxdWVyeS5cbiAgICAgICAgICAgIGxldCBuID0gaHMoKTtcbiAgICAgICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gciAmJiBLcyhyLm11dGF0aW9uLCBpLCBSZS5lbXB0eSgpLCBpdC5ub3coKSksIFxuICAgICAgICAgICAgICAgIC8vIEZpbmFsbHksIGluc2VydCB0aGUgZG9jdW1lbnRzIHRoYXQgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5XG4gICAgICAgICAgICAgICAgbnMoZSwgaSkgJiYgKG4gPSBuLmluc2VydCh0LCBpKSk7XG4gICAgICAgICAgICB9KSksIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIE1vIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHQsIHRoaXMuY3MgPSBuZXcgTWFwLCB0aGlzLmhzID0gbmV3IE1hcDtcbiAgICB9XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLmNzLmdldChlKSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIC8qKiBEZWNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgcHJvdG8gaW50byBhIEJ1bmRsZU1ldGFkYXRhIG9iamVjdC4gKi9cbiAgICAgICAgdmFyIG47XG4gICAgICAgIHJldHVybiB0aGlzLmNzLnNldChlLmlkLCB7XG4gICAgICAgICAgICBpZDogKG4gPSBlKS5pZCxcbiAgICAgICAgICAgIHZlcnNpb246IG4udmVyc2lvbixcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IE5pKG4uY3JlYXRlVGltZSlcbiAgICAgICAgfSksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMuaHMuZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ocy5zZXQoZS5uYW1lLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHQubmFtZSxcbiAgICAgICAgICAgICAgICBxdWVyeTogeXIodC5idW5kbGVkUXVlcnkpLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBOaSh0LnJlYWRUaW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKSksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBEb2N1bWVudE92ZXJsYXlDYWNoZS5cbiAqLyBjbGFzcyAkbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgbWFwIHNvcnRlZCBieSBEb2N1bWVudEtleSwgd2hvc2UgdmFsdWUgaXMgYSBwYWlyIG9mIHRoZSBsYXJnZXN0IGJhdGNoIGlkXG4gICAgICAgIC8vIGZvciB0aGUgb3ZlcmxheSBhbmQgdGhlIG92ZXJsYXkgaXRzZWxmLlxuICAgICAgICB0aGlzLm92ZXJsYXlzID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpLCB0aGlzLmxzID0gbmV3IE1hcDtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMub3ZlcmxheXMuZ2V0KGUpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZnMoKTtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2goZSwgKGUgPT4gdGhpcy5nZXRPdmVybGF5KHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPT0gdCAmJiBuLnNldChlLCB0KTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBzYXZlT3ZlcmxheXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgdGhpcy53ZSh0LCBlLCBzKTtcbiAgICAgICAgfSkpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmxzLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gcyAmJiAocy5mb3JFYWNoKCh0ID0+IHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLnJlbW92ZSh0KSkpLCBcbiAgICAgICAgdGhpcy5scy5kZWxldGUobikpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBmcygpLCBpID0gZS5sZW5ndGggKyAxLCByID0gbmV3IGh0KGUuY2hpbGQoXCJcIikpLCBvID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvckZyb20ocik7XG4gICAgICAgIGZvciAoO28uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBvLmdldE5leHQoKS52YWx1ZSwgciA9IHQuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAoIWUuaXNQcmVmaXhPZihyLnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIC8vIERvY3VtZW50cyBmcm9tIHN1Yi1jb2xsZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgci5wYXRoLmxlbmd0aCA9PT0gaSAmJiAodC5sYXJnZXN0QmF0Y2hJZCA+IG4gJiYgcy5zZXQodC5nZXRLZXkoKSwgdCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHMpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gbmV3IHBlKCgodCwgZSkgPT4gdCAtIGUpKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMub3ZlcmxheXMuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ci5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHIuZ2V0TmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHQuZ2V0S2V5KCkuZ2V0Q29sbGVjdGlvbkdyb3VwKCkgPT09IGUgJiYgdC5sYXJnZXN0QmF0Y2hJZCA+IG4pIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IGkuZ2V0KHQubGFyZ2VzdEJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIG51bGwgPT09IGUgJiYgKGUgPSBmcygpLCBpID0gaS5pbnNlcnQodC5sYXJnZXN0QmF0Y2hJZCwgZSkpLCBlLnNldCh0LmdldEtleSgpLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gZnMoKSwgdSA9IGkuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7dS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKHUuZ2V0TmV4dCgpLnZhbHVlLmZvckVhY2goKCh0LCBlKSA9PiBvLnNldCh0LCBlKSkpLCBvLnNpemUoKSA+PSBzKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShvKTtcbiAgICB9XG4gICAgd2UodCwgZSwgbikge1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGFzc29jaWF0aW9uIG9mIHRoZSBvdmVybGF5IHRvIGl0cyBiYXRjaCBpZC5cbiAgICAgICAgY29uc3QgcyA9IHRoaXMub3ZlcmxheXMuZ2V0KG4ua2V5KTtcbiAgICAgICAgaWYgKG51bGwgIT09IHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmxzLmdldChzLmxhcmdlc3RCYXRjaElkKS5kZWxldGUobi5rZXkpO1xuICAgICAgICAgICAgdGhpcy5scy5zZXQocy5sYXJnZXN0QmF0Y2hJZCwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMuaW5zZXJ0KG4ua2V5LCBuZXcgZWkoZSwgbikpO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGFzc29jaWF0aW9uIG9mIHRoaXMgb3ZlcmxheSB0byB0aGUgZ2l2ZW4gbGFyZ2VzdEJhdGNoSWQuXG4gICAgICAgIGxldCBpID0gdGhpcy5scy5nZXQoZSk7XG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiAoaSA9IGdzKCksIHRoaXMubHMuc2V0KGUsIGkpKSwgdGhpcy5scy5zZXQoZSwgaS5hZGQobi5rZXkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29sbGVjdGlvbiBvZiByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgZnJvbSBzb21lIGtpbmQgb2YgbnVtYmVyZWQgZW50aXR5XG4gKiAoZWl0aGVyIGEgdGFyZ2V0IElEIG9yIGJhdGNoIElEKS4gQXMgcmVmZXJlbmNlcyBhcmUgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tXG4gKiB0aGUgc2V0IGNvcnJlc3BvbmRpbmcgZXZlbnRzIGFyZSBlbWl0dGVkIHRvIGEgcmVnaXN0ZXJlZCBnYXJiYWdlIGNvbGxlY3Rvci5cbiAqXG4gKiBFYWNoIHJlZmVyZW5jZSBpcyByZXByZXNlbnRlZCBieSBhIERvY3VtZW50UmVmZXJlbmNlIG9iamVjdC4gRWFjaCBvZiB0aGVtXG4gKiBjb250YWlucyBlbm91Z2ggaW5mb3JtYXRpb24gdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhlIHJlZmVyZW5jZS4gVGhleSBhcmUgYWxsXG4gKiBzdG9yZWQgcHJpbWFyaWx5IGluIGEgc2V0IHNvcnRlZCBieSBrZXkuIEEgZG9jdW1lbnQgaXMgY29uc2lkZXJlZCBnYXJiYWdlIGlmXG4gKiB0aGVyZSdzIG5vIHJlZmVyZW5jZXMgaW4gdGhhdCBzZXQgKHRoaXMgY2FuIGJlIGVmZmljaWVudGx5IGNoZWNrZWQgdGhhbmtzIHRvXG4gKiBzb3J0aW5nIGJ5IGtleSkuXG4gKlxuICogUmVmZXJlbmNlU2V0IGFsc28ga2VlcHMgYSBzZWNvbmRhcnkgc2V0IHRoYXQgY29udGFpbnMgcmVmZXJlbmNlcyBzb3J0ZWQgYnlcbiAqIElEcy4gVGhpcyBvbmUgaXMgdXNlZCB0byBlZmZpY2llbnRseSBpbXBsZW1lbnQgcmVtb3ZhbCBvZiBhbGwgcmVmZXJlbmNlcyBieVxuICogc29tZSB0YXJnZXQgSUQuXG4gKi8gY2xhc3MgT28ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IGtleS5cbiAgICAgICAgdGhpcy5mcyA9IG5ldyBFZShGby5kcyksIFxuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IHRhcmdldCBpZC5cbiAgICAgICAgdGhpcy53cyA9IG5ldyBFZShGby5fcyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZSBzZXQgY29udGFpbnMgbm8gcmVmZXJlbmNlcy4gKi8gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKiogQWRkcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIGFkZFJlZmVyZW5jZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRm8odCwgZSk7XG4gICAgICAgIHRoaXMuZnMgPSB0aGlzLmZzLmFkZChuKSwgdGhpcy53cyA9IHRoaXMud3MuYWRkKG4pO1xuICAgIH1cbiAgICAvKiogQWRkIHJlZmVyZW5jZXMgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleXMgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgZ3ModCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy5hZGRSZWZlcmVuY2UodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW5cbiAgICAgKiBJRC5cbiAgICAgKi8gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgdGhpcy55cyhuZXcgRm8odCwgZSkpO1xuICAgIH1cbiAgICBwcyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLnJlbW92ZVJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgYWxsIHJlZmVyZW5jZXMgd2l0aCBhIGdpdmVuIElELiBDYWxscyByZW1vdmVSZWYoKSBmb3IgZWFjaCBrZXlcbiAgICAgKiByZW1vdmVkLlxuICAgICAqLyAgICBJcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgaHQobmV3IHV0KFtdKSksIG4gPSBuZXcgRm8oZSwgdCksIHMgPSBuZXcgRm8oZSwgdCArIDEpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLndzLmZvckVhY2hJblJhbmdlKFsgbiwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnlzKHQpLCBpLnB1c2godC5rZXkpO1xuICAgICAgICB9KSksIGk7XG4gICAgfVxuICAgIFRzKCkge1xuICAgICAgICB0aGlzLmZzLmZvckVhY2goKHQgPT4gdGhpcy55cyh0KSkpO1xuICAgIH1cbiAgICB5cyh0KSB7XG4gICAgICAgIHRoaXMuZnMgPSB0aGlzLmZzLmRlbGV0ZSh0KSwgdGhpcy53cyA9IHRoaXMud3MuZGVsZXRlKHQpO1xuICAgIH1cbiAgICBFcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgaHQobmV3IHV0KFtdKSksIG4gPSBuZXcgRm8oZSwgdCksIHMgPSBuZXcgRm8oZSwgdCArIDEpO1xuICAgICAgICBsZXQgaSA9IGdzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLndzLmZvckVhY2hJblJhbmdlKFsgbiwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICBpID0gaS5hZGQodC5rZXkpO1xuICAgICAgICB9KSksIGk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBGbyh0LCAwKSwgbiA9IHRoaXMuZnMuZmlyc3RBZnRlck9yRXF1YWwoZSk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBuICYmIHQuaXNFcXVhbChuLmtleSk7XG4gICAgfVxufVxuXG5jbGFzcyBGbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMuQXMgPSBlO1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBrZXkgdGhlbiBieSBJRCAqLyAgICBzdGF0aWMgZHModCwgZSkge1xuICAgICAgICByZXR1cm4gaHQuY29tcGFyYXRvcih0LmtleSwgZS5rZXkpIHx8IGV0KHQuQXMsIGUuQXMpO1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBJRCB0aGVuIGJ5IGtleSAqLyAgICBzdGF0aWMgX3ModCwgZSkge1xuICAgICAgICByZXR1cm4gZXQodC5BcywgZS5BcykgfHwgaHQuY29tcGFyYXRvcih0LmtleSwgZS5rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgQm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSB0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2V0IG9mIGFsbCBtdXRhdGlvbnMgdGhhdCBoYXZlIGJlZW4gc2VudCBidXQgbm90IHlldCBiZWVuIGFwcGxpZWQgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBbXSwgXG4gICAgICAgIC8qKiBOZXh0IHZhbHVlIHRvIHVzZSB3aGVuIGFzc2lnbmluZyBzZXF1ZW50aWFsIElEcyB0byBlYWNoIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICB0aGlzLnZzID0gMSwgXG4gICAgICAgIC8qKiBBbiBvcmRlcmVkIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSBtdXRhdGlvbnMgYmF0Y2ggSURzLiAqL1xuICAgICAgICB0aGlzLlJzID0gbmV3IEVlKEZvLmRzKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eSh0KSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudnM7XG4gICAgICAgIHRoaXMudnMrKywgdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IDAgJiYgdGhpcy5tdXRhdGlvblF1ZXVlW3RoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBacyhpLCBlLCBuLCBzKTtcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLnB1c2gocik7XG4gICAgICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgYnkgZG9jdW1lbnQga2V5IGFuZCBpbmRleCBjb2xsZWN0aW9uIHBhcmVudHMuXG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB0aGlzLlJzID0gdGhpcy5Scy5hZGQobmV3IEZvKGUua2V5LCBpKSksIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUocik7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLlBzKGUpKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSArIDEsIHMgPSB0aGlzLmJzKG4pLCBpID0gcyA8IDAgPyAwIDogcztcbiAgICAgICAgLy8gVGhlIHJlcXVlc3RlZCBiYXRjaElkIG1heSBzdGlsbCBiZSBvdXQgb2YgcmFuZ2Ugc28gbm9ybWFsaXplIGl0IHRvIHRoZVxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IGkgPyB0aGlzLm11dGF0aW9uUXVldWVbaV0gOiBudWxsKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCgpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA/IC0xIDogdGhpcy52cyAtIDEpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUuc2xpY2UoKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBGbyhlLCAwKSwgcyA9IG5ldyBGbyhlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLlJzLmZvckVhY2hJblJhbmdlKFsgbiwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Qcyh0LkFzKTtcbiAgICAgICAgICAgIGkucHVzaChlKTtcbiAgICAgICAgfSkpLCBSdC5yZXNvbHZlKGkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBFZShldCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBGbyh0LCAwKSwgcyA9IG5ldyBGbyh0LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICAgICAgdGhpcy5Scy5mb3JFYWNoSW5SYW5nZShbIGUsIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIG4gPSBuLmFkZCh0LkFzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCBSdC5yZXNvbHZlKHRoaXMuVnMobikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgcXVlcnkgcGF0aCBhcyBhIHByZWZpeCBmb3IgdGVzdGluZyBpZiBhIGRvY3VtZW50IG1hdGNoZXMgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxO1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBkb2N1bWVudCByZWZlcmVuY2UgZm9yIGFjdHVhbGx5IHNjYW5uaW5nIHRoZSBpbmRleC4gVW5saWtlXG4gICAgICAgIC8vIHRoZSBwcmVmaXggdGhlIGRvY3VtZW50IGtleSBpbiB0aGlzIHJlZmVyZW5jZSBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2ZcbiAgICAgICAgLy8gc2VnbWVudHMuIFRoZSBlbXB0eSBzZWdtZW50IGNhbiBiZSB1c2VkIGEgc3VmZml4IG9mIHRoZSBxdWVyeSBwYXRoXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgcHJlY2VkZXMgYWxsIG90aGVyIHNlZ21lbnRzIGluIGFuIG9yZGVyZWQgdHJhdmVyc2FsLlxuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIGh0LmlzRG9jdW1lbnRLZXkoaSkgfHwgKGkgPSBpLmNoaWxkKFwiXCIpKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBGbyhuZXcgaHQoaSksIDApO1xuICAgICAgICAvLyBGaW5kIHVuaXF1ZSBiYXRjaElEcyByZWZlcmVuY2VkIGJ5IGFsbCBkb2N1bWVudHMgcG90ZW50aWFsbHkgbWF0Y2hpbmcgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGxldCBvID0gbmV3IEVlKGV0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUnMuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmtleS5wYXRoO1xuICAgICAgICAgICAgcmV0dXJuICEhbi5pc1ByZWZpeE9mKGUpICYmIChcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnlcbiAgICAgICAgICAgIC8vIHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyBjYW4ndCBtYXRjaFxuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICBlLmxlbmd0aCA9PT0gcyAmJiAobyA9IG8uYWRkKHQuQXMpKSwgITApO1xuICAgICAgICB9KSwgciksIFJ0LnJlc29sdmUodGhpcy5WcyhvKSk7XG4gICAgfVxuICAgIFZzKHQpIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IGFuIGFycmF5IG9mIG1hdGNoaW5nIGJhdGNoZXMsIHNvcnRlZCBieSBiYXRjaElEIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgIC8vIG11bHRpcGxlIG11dGF0aW9ucyBhZmZlY3RpbmcgdGhlIHNhbWUgZG9jdW1lbnQga2V5IGFyZSBhcHBsaWVkIGluIG9yZGVyLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuUHModCk7XG4gICAgICAgICAgICBudWxsICE9PSBuICYmIGUucHVzaChuKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgRigwID09PSB0aGlzLlNzKGUuYmF0Y2hJZCwgXCJyZW1vdmVkXCIpKSwgdGhpcy5tdXRhdGlvblF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGxldCBuID0gdGhpcy5ScztcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2goZS5tdXRhdGlvbnMsIChzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgRm8ocy5rZXksIGUuYmF0Y2hJZCk7XG4gICAgICAgICAgICByZXR1cm4gbiA9IG4uZGVsZXRlKGkpLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIHMua2V5KTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuUnMgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIENuKHQpIHtcbiAgICAgICAgLy8gTm8tb3Agc2luY2UgdGhlIG1lbW9yeSBtdXRhdGlvbiBxdWV1ZSBkb2VzIG5vdCBtYWludGFpbiBhIHNlcGFyYXRlIGNhY2hlLlxuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRm8oZSwgMCksIHMgPSB0aGlzLlJzLmZpcnN0QWZ0ZXJPckVxdWFsKG4pO1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShlLmlzRXF1YWwocyAmJiBzLmtleSkpO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxuICAgICAqLyAgICBTcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJzKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxuICAgICAqIGlzIE8oMSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxuICAgICAqLyAgICBicyh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKSBcbiAgICAgICAgLy8gQXMgYW4gaW5kZXggdGhpcyBpcyBwYXN0IHRoZSBlbmQgb2YgdGhlIHF1ZXVlXG4gICAgICAgIHJldHVybiAwO1xuICAgICAgICAvLyBFeGFtaW5lIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgdG8gZmlndXJlIG91dCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZVxuICAgICAgICAvLyBiYXRjaElkIGFuZCBpbmRleGVzIGluIHRoZSBhcnJheS4gTm90ZSB0aGF0IHNpbmNlIHRoZSBxdWV1ZSBpcyBvcmRlcmVkXG4gICAgICAgIC8vIGJ5IGJhdGNoSWQsIGlmIHRoZSBmaXJzdCBiYXRjaCBoYXMgYSBsYXJnZXIgYmF0Y2hJZCB0aGVuIHRoZSByZXF1ZXN0ZWRcbiAgICAgICAgLy8gYmF0Y2hJZCBkb2Vzbid0IGV4aXN0IGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdCAtIHRoaXMubXV0YXRpb25RdWV1ZVswXS5iYXRjaElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHZlcnNpb24gb2YgbG9va3VwTXV0YXRpb25CYXRjaCB0aGF0IGRvZXNuJ3QgcmV0dXJuIGEgcHJvbWlzZSwgdGhpcyBtYWtlc1xuICAgICAqIG90aGVyIGZ1bmN0aW9ucyB0aGF0IHVzZXMgdGhpcyBjb2RlIGVhc2llciB0byByZWFkIGFuZCBtb3JlIGVmZmljZW50LlxuICAgICAqLyAgICBQcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJzKHQpO1xuICAgICAgICBpZiAoZSA8IDAgfHwgZSA+PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZVtlXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3TWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqL1xuY2xhc3MgTG8ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICAgICAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICAgICAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5EcyA9IHQsIFxuICAgICAgICAvKiogVW5kZXJseWluZyBjYWNoZSBvZiBkb2N1bWVudHMgYW5kIHRoZWlyIHJlYWQgdGltZXMuICovXG4gICAgICAgIHRoaXMuZG9jcyA9IG5ldyBwZShodC5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKiBTaXplIG9mIGFsbCBjYWNoZWQgZG9jdW1lbnRzLiAqL1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBzZXRJbmRleE1hbmFnZXIodCkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmtleSwgcyA9IHRoaXMuZG9jcy5nZXQobiksIGkgPSBzID8gcy5zaXplIDogMCwgciA9IHRoaXMuRHMoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KG4sIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBlLm11dGFibGVDb3B5KCksXG4gICAgICAgICAgICBzaXplOiByXG4gICAgICAgIH0pLCB0aGlzLnNpemUgKz0gciAtIGksIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIG4ucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgZW50cnkgZnJvbSB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICBlICYmICh0aGlzLmRvY3MgPSB0aGlzLmRvY3MucmVtb3ZlKHQpLCB0aGlzLnNpemUgLT0gZS5zaXplKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kb2NzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobiA/IG4uZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IGFuLm5ld0ludmFsaWREb2N1bWVudChlKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IGNzKCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jcy5nZXQodCk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgZSA/IGUuZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IGFuLm5ld0ludmFsaWREb2N1bWVudCh0KSk7XG4gICAgICAgIH0pKSwgUnQucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gY3MoKTtcbiAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvdyBkb3duXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cbiAgICAgICAgICAgICAgICBjb25zdCByID0gZS5wYXRoLCBvID0gbmV3IGh0KHIuY2hpbGQoXCJcIikpLCB1ID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShvKTtcbiAgICAgICAgZm9yICg7dS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3Qge2tleTogdCwgdmFsdWU6IHtkb2N1bWVudDogb319ID0gdS5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAoIXIuaXNQcmVmaXhPZih0LnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIHQucGF0aC5sZW5ndGggPiByLmxlbmd0aCArIDEgfHwgKFR0KHB0KG8pLCBuKSA8PSAwIHx8IChzLmhhcyhvLmtleSkgfHwgbnMoZSwgbykpICYmIChpID0gaS5pbnNlcnQoby5rZXksIG8ubXV0YWJsZUNvcHkoKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tIHRoZSBJbmRleEJhY2tmaWxsZXIgaWYgcGVyc2lzdGVuY2VcbiAgICAgICAgLy8gaXMgZW5hYmxlZC5cbiAgICAgICAgTygpO1xuICAgIH1cbiAgICBDcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKHRoaXMuZG9jcywgKHQgPT4gZSh0KSkpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIodCkge1xuICAgICAgICAvLyBgdHJhY2tSZW1vdmFsc2AgaXMgaWdub3JlcyBzaW5jZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSBrZWVwc1xuICAgICAgICAvLyBhIHNlcGFyYXRlIGNoYW5nZWxvZyBhbmQgZG9lcyBub3QgbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciByZW1vdmFscy5cbiAgICAgICAgcmV0dXJuIG5ldyBxbyh0aGlzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMuc2l6ZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3MgcW8gZXh0ZW5kcyB2byB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLm9zID0gdDtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmlzVmFsaWREb2N1bWVudCgpID8gZS5wdXNoKHRoaXMub3MuYWRkRW50cnkodCwgcykpIDogdGhpcy5vcy5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcy5nZXRFbnRyeSh0LCBlKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3MuZ2V0RW50cmllcyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFVvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueHMgPSBuZXcgb3MoKHQgPT4gJG4odCkpLCBPbiksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gcnQubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLk5zID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtzID0gbmV3IE9vLCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5NcyA9IGxvLmtuKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy54cy5mb3JFYWNoKCgodCwgbikgPT4gZShuKSkpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLk5zKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuTXMubmV4dCgpLCBSdC5yZXNvbHZlKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4gJiYgKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4pLCBlID4gdGhpcy5OcyAmJiAodGhpcy5OcyA9IGUpLCBcbiAgICAgICAgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBGbih0KSB7XG4gICAgICAgIHRoaXMueHMuc2V0KHQudGFyZ2V0LCB0KTtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgIGUgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5NcyA9IG5ldyBsbyhlKSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBlKSwgdC5zZXF1ZW5jZU51bWJlciA+IHRoaXMuTnMgJiYgKHRoaXMuTnMgPSB0LnNlcXVlbmNlTnVtYmVyKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZuKGUpLCB0aGlzLnRhcmdldENvdW50ICs9IDEsIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZuKGUpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy54cy5kZWxldGUoZS50YXJnZXQpLCB0aGlzLmtzLklzKGUudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuZm9yRWFjaCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIG8uc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChvLnRhcmdldElkKSAmJiAodGhpcy54cy5kZWxldGUociksIGkucHVzaCh0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIG8udGFyZ2V0SWQpKSwgXG4gICAgICAgICAgICBzKyspO1xuICAgICAgICB9KSksIFJ0LndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMueHMuZ2V0KGUpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5rcy5ncyhlLCBuKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICB0aGlzLmtzLnBzKGUsIG4pO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcyAmJiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpO1xuICAgICAgICB9KSksIFJ0LndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua3MuSXMoZSksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5rcy5FcyhlKTtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5rcy5jb250YWluc0tleShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIEtvIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy4kcyA9IHt9LCB0aGlzLm92ZXJsYXlzID0ge30sIHRoaXMuT3MgPSBuZXcgT3QoMCksIHRoaXMuRnMgPSAhMSwgdGhpcy5GcyA9ICEwLCBcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQodGhpcyksIHRoaXMuQnMgPSBuZXcgVW8odGhpcyk7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gbmV3IHpyLCB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IExvKHQpO1xuICAgICAgICB9KCh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuTHModCkpKSwgdGhpcy5zZXJpYWxpemVyID0gbmV3IGFyKGUpLCB0aGlzLnFzID0gbmV3IE1vKHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBObyBkdXJhYmxlIHN0YXRlIHRvIGVuc3VyZSBpcyBjbG9zZWQgb24gc2h1dGRvd24uXG4gICAgICAgIHJldHVybiB0aGlzLkZzID0gITEsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnM7XG4gICAgfVxuICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0TmV0d29ya0VuYWJsZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIodCkge1xuICAgICAgICAvLyBXZSBkbyBub3QgY3VycmVudGx5IHN1cHBvcnQgaW5kaWNlcyBmb3IgbWVtb3J5IHBlcnNpc3RlbmNlLCBzbyB3ZSBjYW5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBzYW1lIHNoYXJlZCBpbnN0YW5jZSBvZiB0aGUgbWVtb3J5IGluZGV4IG1hbmFnZXIuXG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlcjtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMub3ZlcmxheXNbdC50b0tleSgpXTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgJG8sIHRoaXMub3ZlcmxheXNbdC50b0tleSgpXSA9IGUpLCBlO1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLiRzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBuIHx8IChuID0gbmV3IEJvKGUsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLiRzW3QudG9LZXkoKV0gPSBuKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJzO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXM7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgTihcIk1lbW9yeVBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQpO1xuICAgICAgICBjb25zdCBzID0gbmV3IEdvKHRoaXMuT3MubmV4dCgpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuVXMoKSwgbihzKS5uZXh0KCh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuS3MocykubmV4dCgoKCkgPT4gdCkpKSkudG9Qcm9taXNlKCkudGhlbigodCA9PiAocy5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIEdzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0Lm9yKE9iamVjdC52YWx1ZXModGhpcy4kcykubWFwKChuID0+ICgpID0+IG4uY29udGFpbnNLZXkodCwgZSkpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1lbW9yeSBwZXJzaXN0ZW5jZSBpcyBub3QgYWN0dWFsbHkgdHJhbnNhY3Rpb25hbCwgYnV0IGZ1dHVyZSBpbXBsZW1lbnRhdGlvbnNcbiAqIG1heSBoYXZlIHRyYW5zYWN0aW9uLXNjb3BlZCBzdGF0ZS5cbiAqLyBjbGFzcyBHbyBleHRlbmRzIEF0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIFFvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyBhbGwgZG9jdW1lbnRzIHRoYXQgYXJlIGFjdGl2ZSBpbiBRdWVyeSB2aWV3cy4gKi9cbiAgICAgICAgdGhpcy5RcyA9IG5ldyBPbywgXG4gICAgICAgIC8qKiBUaGUgbGlzdCBvZiBkb2N1bWVudHMgdGhhdCBhcmUgcG90ZW50aWFsbHkgR0NlZCBhZnRlciBlYWNoIHRyYW5zYWN0aW9uLiAqL1xuICAgICAgICB0aGlzLmpzID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIHpzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRbyh0KTtcbiAgICB9XG4gICAgZ2V0IFdzKCkge1xuICAgICAgICBpZiAodGhpcy5qcykgcmV0dXJuIHRoaXMuanM7XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUXMuYWRkUmVmZXJlbmNlKG4sIGUpLCB0aGlzLldzLmRlbGV0ZShuLnRvU3RyaW5nKCkpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFzLnJlbW92ZVJlZmVyZW5jZShuLCBlKSwgdGhpcy5Xcy5hZGQobi50b1N0cmluZygpKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLldzLmFkZChlLnRvU3RyaW5nKCkpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIHRoaXMuUXMuSXMoZS50YXJnZXRJZCkuZm9yRWFjaCgodCA9PiB0aGlzLldzLmFkZCh0LnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCk7XG4gICAgICAgIHJldHVybiBuLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMuV3MuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4ucmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSkpO1xuICAgIH1cbiAgICBVcygpIHtcbiAgICAgICAgdGhpcy5qcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIEtzKHQpIHtcbiAgICAgICAgLy8gUmVtb3ZlIG5ld2x5IG9ycGhhbmVkIGRvY3VtZW50cy5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaCh0aGlzLldzLCAobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gaHQuZnJvbVBhdGgobik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5Icyh0LCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0IHx8IGUucmVtb3ZlRW50cnkocywgcnQubWluKCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHRoaXMuanMgPSBudWxsLCBlLmFwcGx5KHQpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHModCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0ID8gdGhpcy5Xcy5kZWxldGUoZS50b1N0cmluZygpKSA6IHRoaXMuV3MuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgTHModCkge1xuICAgICAgICAvLyBGb3IgZWFnZXIgR0MsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRvY3VtZW50IHNpemUsIHRoZXJlIGFyZSBubyBzaXplIHRocmVzaG9sZHMuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBIcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5vcihbICgpID0+IFJ0LnJlc29sdmUodGhpcy5Rcy5jb250YWluc0tleShlKSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleSh0LCBlKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5Hcyh0LCBlKSBdKTtcbiAgICB9XG59XG5cbmNsYXNzIGpvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLkpzID0gbmV3IG9zKCh0ID0+IHF0KHQucGF0aCkpLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpLCBcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gVG8odGhpcywgZSk7XG4gICAgfVxuICAgIHN0YXRpYyB6cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgam8odCwgZSk7XG4gICAgfVxuICAgIC8vIE5vLW9wcywgcHJlc2VudCBzbyBtZW1vcnkgcGVyc2lzdGVuY2UgZG9lc24ndCBoYXZlIHRvIGNhcmUgd2hpY2ggZGVsZWdhdGVcbiAgICAvLyBpdCBoYXMuXG4gICAgVXMoKSB7fVxuICAgIEtzKHQpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0LCBlKTtcbiAgICB9XG4gICAgem4odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Kbih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudCh0KS5uZXh0KCh0ID0+IGUubmV4dCgoZSA9PiB0ICsgZSkpKSk7XG4gICAgfVxuICAgIEpuKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5Xbih0LCAodCA9PiB7XG4gICAgICAgICAgICBlKys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIFduKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2godGhpcy5KcywgKChuLCBzKSA9PiB0aGlzLlhuKHQsIG4sIHMpLm5leHQoKHQgPT4gdCA/IFJ0LnJlc29sdmUoKSA6IGUocykpKSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLCBpID0gcy5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIHMuQ3ModCwgKHMgPT4gdGhpcy5Ybih0LCBzLCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQgfHwgKG4rKywgaS5yZW1vdmVFbnRyeShzLCBydC5taW4oKSkpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkpzLnNldChlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKHQsIG4pO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Kcy5zZXQobiwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkpzLnNldChuLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkpzLnNldChlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgTHModCkge1xuICAgICAgICBsZXQgZSA9IHQua2V5LnRvU3RyaW5nKCkubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoZSArPSB6ZSh0LmRhdGEudmFsdWUpKSwgZTtcbiAgICB9XG4gICAgWG4odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gUnQub3IoWyAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLkdzKHQsIGUpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCwgZSksICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkpzLmdldChlKTtcbiAgICAgICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHZvaWQgMCAhPT0gdCAmJiB0ID4gbik7XG4gICAgICAgIH0gXSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqLyBjbGFzcyB6byB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXG4gICAgICovICAgIE8odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IFB0KFwiY3JlYXRlT3JVcGdyYWRlXCIsIGUpO1xuICAgICAgICBuIDwgMSAmJiBzID49IDEgJiYgKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJvd25lclwiKTtcbiAgICAgICAgfSh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm11dGF0aW9uUXVldWVzXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcInVzZXJJZFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvbnNcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYmF0Y2hJZFwiLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBRdCwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgIH0pLCB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBVcGdyYWRlIGZ1bmN0aW9uIHRvIG1pZ3JhdGUgdGhlICdtdXRhdGlvbnMnIHN0b3JlIGZyb20gVjEgdG8gVjMuIExvYWRzXG4gKiBhbmQgcmV3cml0ZXMgYWxsIGRhdGEuXG4gKi8gKHQpLCBXbyh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKTtcbiAgICAgICAgfSh0KSk7XG4gICAgICAgIC8vIE1pZ3JhdGlvbiAyIHRvIHBvcHVsYXRlIHRoZSB0YXJnZXRHbG9iYWwgb2JqZWN0IG5vIGxvbmdlciBuZWVkZWQgc2luY2VcbiAgICAgICAgLy8gbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAgICAgICAgICAgICAgICBsZXQgciA9IFJ0LnJlc29sdmUoKTtcbiAgICAgICAgcmV0dXJuIG4gPCAzICYmIHMgPj0gMyAmJiAoXG4gICAgICAgIC8vIEJyYW5kIG5ldyBjbGllbnRzIGRvbid0IG5lZWQgdG8gZHJvcCBhbmQgcmVjcmVhdGUtLW9ubHkgY2xpZW50cyB0aGF0XG4gICAgICAgIC8vIHBvdGVudGlhbGx5IGhhdmUgY29ycnVwdCBkYXRhLlxuICAgICAgICAwICE9PSBuICYmICghZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldERvY3VtZW50c1wiKSwgdC5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldHNcIiksIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRHbG9iYWxcIik7XG4gICAgICAgIH0odCksIFdvKHQpKSwgciA9IHIubmV4dCgoKCkgPT4gXG4gICAgICAgIC8qKlxuICogQ3JlYXRlcyB0aGUgdGFyZ2V0IGdsb2JhbCBzaW5nbGV0b24gcm93LlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUaGUgdmVyc2lvbiB1cGdyYWRlIHRyYW5zYWN0aW9uIGZvciBpbmRleGVkZGJcbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5zdG9yZShcInRhcmdldEdsb2JhbFwiKSwgbiA9IHtcbiAgICAgICAgICAgICAgICBoaWdoZXN0VGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICAgICAgaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyOiAwLFxuICAgICAgICAgICAgICAgIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb246IHJ0Lm1pbigpLnRvVGltZXN0YW1wKCksXG4gICAgICAgICAgICAgICAgdGFyZ2V0Q291bnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoXCJ0YXJnZXRHbG9iYWxLZXlcIiwgbik7XG4gICAgICAgIH0oaSkpKSksIG4gPCA0ICYmIHMgPj0gNCAmJiAoMCAhPT0gbiAmJiAoXG4gICAgICAgIC8vIFNjaGVtYSB2ZXJzaW9uIDMgdXNlcyBhdXRvLWdlbmVyYXRlZCBrZXlzIHRvIGdlbmVyYXRlIGdsb2JhbGx5IHVuaXF1ZVxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaCBJRHMgKHRoaXMgd2FzIHByZXZpb3VzbHkgZW5zdXJlZCBpbnRlcm5hbGx5IGJ5IHRoZVxuICAgICAgICAvLyBjbGllbnQpLiBUbyBtaWdyYXRlIHRvIHRoZSBuZXcgc2NoZW1hLCB3ZSBoYXZlIHRvIHJlYWQgYWxsIG11dGF0aW9uc1xuICAgICAgICAvLyBhbmQgd3JpdGUgdGhlbSBiYWNrIG91dC4gV2UgcHJlc2VydmUgdGhlIGV4aXN0aW5nIGJhdGNoIElEcyB0byBndWFyYW50ZWVcbiAgICAgICAgLy8gY29uc2lzdGVuY3kgd2l0aCBvdGhlciBvYmplY3Qgc3RvcmVzLiBBbnkgZnVydGhlciBtdXRhdGlvbiBiYXRjaCBJRHMgd2lsbFxuICAgICAgICAvLyBiZSBhdXRvLWdlbmVyYXRlZC5cbiAgICAgICAgciA9IHIubmV4dCgoKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUuc3RvcmUoXCJtdXRhdGlvbnNcIikuaigpLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvbnNcIik7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYmF0Y2hJZFwiLFxuICAgICAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwidXNlck11dGF0aW9uc0luZGV4XCIsIFF0LCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS5zdG9yZShcIm11dGF0aW9uc1wiKSwgaSA9IG4ubWFwKCh0ID0+IHMucHV0KHQpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJ0LndhaXRGb3IoaSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0odCwgaSkpKSksIHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImNsaWVudE1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJjbGllbnRJZFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICB9KSkpLCBuIDwgNSAmJiBzID49IDUgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuWXMoaSkpKSksIG4gPCA2ICYmIHMgPj0gNiAmJiAociA9IHIubmV4dCgoKCkgPT4gKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKTtcbiAgICAgICAgfSh0KSwgdGhpcy5YcyhpKSkpKSksIG4gPCA3ICYmIHMgPj0gNyAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5acyhpKSkpKSwgbiA8IDggJiYgcyA+PSA4ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLnRpKHQsIGkpKSkpLCBcbiAgICAgICAgbiA8IDkgJiYgcyA+PSA5ICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBNdWx0aS1UYWIgdXNlZCB0byBtYW5hZ2UgaXRzIG93biBjaGFuZ2Vsb2csIGJ1dCB0aGlzIGhhcyBiZWVuIG1vdmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUgaXRzZWxmLiBTaW5jZSB0aGUgcHJldmlvdXMgY2hhbmdlXG4gICAgICAgICAgICAvLyBsb2cgb25seSBjb250YWluZWQgdHJhbnNpZW50IGRhdGEsIHdlIGNhbiBkcm9wIGl0cyBvYmplY3Qgc3RvcmUuXG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKSAmJiB0LmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgICAgIC8vIE5vdGU6IFNjaGVtYSB2ZXJzaW9uIDkgdXNlZCB0byBjcmVhdGUgYSByZWFkIHRpbWUgaW5kZXggZm9yIHRoZVxuICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBpcyBub3cgZG9uZSB3aXRoIHNjaGVtYSB2ZXJzaW9uIDEzLlxuICAgICAgICAgICAgICAgIH0pKSksIG4gPCAxMCAmJiBzID49IDEwICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLmVpKGkpKSkpLCBuIDwgMTEgJiYgcyA+PSAxMSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiYnVuZGxlc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYnVuZGxlSWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJuYW1lZFF1ZXJpZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcIm5hbWVcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgbiA8IDEyICYmIHMgPj0gMTIgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJkb2N1bWVudE92ZXJsYXlzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogb2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgdWUsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pLCBlLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsIGNlLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCAxMyAmJiBzID49IDEzICYmIChyID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1YxNFwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogSHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5jcmVhdGVJbmRleChcImRvY3VtZW50S2V5SW5kZXhcIiwgSnQpLCBlLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgWXQpO1xuICAgICAgICB9KHQpKSkubmV4dCgoKCkgPT4gdGhpcy5uaSh0LCBpKSkpLm5leHQoKCgpID0+IHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikpKSksIFxuICAgICAgICBuIDwgMTQgJiYgcyA+PSAxNCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5zaSh0LCBpKSkpKSwgbiA8IDE1ICYmIHMgPj0gMTUgJiYgKHIgPSByLm5leHQoKCgpID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleENvbmZpZ3VyYXRpb25cIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiaW5kZXhJZFwiLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleFN0YXRlXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBuZVxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJzZXF1ZW5jZU51bWJlckluZGV4XCIsIHNlLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhFbnRyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBpZVxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJkb2N1bWVudEtleUluZGV4XCIsIHJlLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0odCkpKSksIHI7XG4gICAgfVxuICAgIFhzKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdC5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKS5YKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZSArPSBybyhuKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICAgICAgYnl0ZVNpemU6IGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdC5zdG9yZShcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpLnB1dChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIsIG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFlzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiKSwgbiA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIik7XG4gICAgICAgIHJldHVybiBlLmooKS5uZXh0KChlID0+IFJ0LmZvckVhY2goZSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZS51c2VySWQsIC0xIF0sIFsgZS51c2VySWQsIGUubGFzdEFja25vd2xlZGdlZEJhdGNoSWQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbi5qKFwidXNlck11dGF0aW9uc0luZGV4XCIsIHMpLm5leHQoKG4gPT4gUnQuZm9yRWFjaChuLCAobiA9PiB7XG4gICAgICAgICAgICAgICAgRihuLnVzZXJJZCA9PT0gZS51c2VySWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBfcih0aGlzLnNlcmlhbGl6ZXIsIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbyh0LCBlLnVzZXJJZCwgcykubmV4dCgoKCkgPT4ge30pKTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGF0IGV2ZXJ5IGRvY3VtZW50IGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgaGFzIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3dcbiAgICAgKiB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLiBNaXNzaW5nIHJvd3MgYXJlIGdpdmVuIHRoZSBtb3N0IHJlY2VudGx5IHVzZWQgc2VxdWVuY2UgbnVtYmVyLlxuICAgICAqLyAgICBacyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIpLCBuID0gdC5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKTtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoXCJ0YXJnZXRHbG9iYWxcIikuZ2V0KFwidGFyZ2V0R2xvYmFsS2V5XCIpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIG4uWCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IHV0KG4pLCBvID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyAwLCBxdCh0KSBdO1xuICAgICAgICAgICAgICAgIH0ocik7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUuZ2V0KG8pLm5leHQoKG4gPT4gbiA/IFJ0LnJlc29sdmUoKSA6IChuID0+IGUucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHF0KG4pLFxuICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSkocikpKSk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gUnQud2FpdEZvcihzKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRpKHQsIGUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbmRleC5cbiAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImNvbGxlY3Rpb25QYXJlbnRzXCIsIHtcbiAgICAgICAgICAgIGtleVBhdGg6IGVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShcImNvbGxlY3Rpb25QYXJlbnRzXCIpLCBzID0gbmV3IFdyLCBpID0gdCA9PiB7XG4gICAgICAgICAgICBpZiAocy5hZGQodCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBzID0gdC5wb3BMYXN0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBlLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IHF0KHMpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIEhlbHBlciB0byBhZGQgYW4gaW5kZXggZW50cnkgaWZmIHdlIGhhdmVuJ3QgYWxyZWFkeSB3cml0dGVuIGl0LlxuICAgICAgICAgICAgICAgIC8vIEluZGV4IGV4aXN0aW5nIHJlbW90ZSBkb2N1bWVudHMuXG4gICAgICAgIHJldHVybiBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpLlgoe1xuICAgICAgICAgICAgWTogITBcbiAgICAgICAgfSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IHV0KHQpO1xuICAgICAgICAgICAgcmV0dXJuIGkobi5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZS5zdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpLlgoe1xuICAgICAgICAgICAgWTogITBcbiAgICAgICAgfSwgKChbdCwgZSwgbl0sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBHdChlKTtcbiAgICAgICAgICAgIHJldHVybiBpKHIucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIGVpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJ0YXJnZXRzXCIpO1xuICAgICAgICByZXR1cm4gZS5YKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG1yKG4pLCBpID0gZ3IodGhpcy5zZXJpYWxpemVyLCBzKTtcbiAgICAgICAgICAgIHJldHVybiBlLnB1dChpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBuaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpLCBzID0gW107XG4gICAgICAgIHJldHVybiBuLlgoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1YxNFwiKSwgciA9IChvID0gbiwgby5kb2N1bWVudCA/IG5ldyBodCh1dC5mcm9tU3RyaW5nKG8uZG9jdW1lbnQubmFtZSkucG9wRmlyc3QoNSkpIDogby5ub0RvY3VtZW50ID8gaHQuZnJvbVNlZ21lbnRzKG8ubm9Eb2N1bWVudC5wYXRoKSA6IG8udW5rbm93bkRvY3VtZW50ID8gaHQuZnJvbVNlZ21lbnRzKG8udW5rbm93bkRvY3VtZW50LnBhdGgpIDogTygpKS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gICAgICAgICAgICBjb25zdCB1ID0ge1xuICAgICAgICAgICAgICAgIHByZWZpeFBhdGg6IHIuc2xpY2UoMCwgci5sZW5ndGggLSAyKSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IHJbci5sZW5ndGggLSAyXSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiByW3IubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IG4ucmVhZFRpbWUgfHwgWyAwLCAwIF0sXG4gICAgICAgICAgICAgICAgdW5rbm93bkRvY3VtZW50OiBuLnVua25vd25Eb2N1bWVudCxcbiAgICAgICAgICAgICAgICBub0RvY3VtZW50OiBuLm5vRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IG4uZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiAhIW4uaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcy5wdXNoKGkucHV0KHUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFJ0LndhaXRGb3IocykpKTtcbiAgICB9XG4gICAgc2kodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShcIm11dGF0aW9uc1wiKSwgcyA9IFBvKHRoaXMuc2VyaWFsaXplciksIGkgPSBuZXcgS28oUW8uenMsIHRoaXMuc2VyaWFsaXplci5mZSk7XG4gICAgICAgIHJldHVybiBuLmooKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAgICAgbGV0IHMgPSBudWxsICE9PSAoZSA9IG4uZ2V0KHQudXNlcklkKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IGdzKCk7XG4gICAgICAgICAgICAgICAgX3IodGhpcy5zZXJpYWxpemVyLCB0KS5rZXlzKCkuZm9yRWFjaCgodCA9PiBzID0gcy5hZGQodCkpKSwgbi5zZXQodC51c2VySWQsIHMpO1xuICAgICAgICAgICAgfSkpLCBSdC5mb3JFYWNoKG4sICgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgVihuKSwgbyA9IFJyLmRlKHRoaXMuc2VyaWFsaXplciwgciksIHUgPSBpLmdldEluZGV4TWFuYWdlcihyKSwgYyA9IG9vLmRlKHIsIHRoaXMuc2VyaWFsaXplciwgdSwgaS5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBrbyhzLCBjLCBvLCB1KS5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhuZXcgd2UoZSwgT3QuY3QpLCB0KS5uZXh0KCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFdvKHQpIHtcbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIsIHtcbiAgICAgICAga2V5UGF0aDogWnRcbiAgICB9KS5jcmVhdGVJbmRleChcImRvY3VtZW50VGFyZ2V0c0luZGV4XCIsIHRlLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KTtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXG4gICAgdC5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBcInRhcmdldElkXCJcbiAgICB9KS5jcmVhdGVJbmRleChcInF1ZXJ5VGFyZ2V0c0luZGV4XCIsIFh0LCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldEdsb2JhbFwiKTtcbn1cblxuY29uc3QgSG8gPSBcIkZhaWxlZCB0byBvYnRhaW4gZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2UgbGF5ZXIuIFRvIGFsbG93IHNoYXJlZCBhY2Nlc3MsIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24gaGFzIHRvIGJlIGVuYWJsZWQgaW4gYWxsIHRhYnMuIElmIHlvdSBhcmUgdXNpbmcgYGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiOnRydWVgLCBtYWtlIHN1cmUgdGhhdCBvbmx5IG9uZSB0YWIgaGFzIHBlcnNpc3RlbmNlIGVuYWJsZWQgYXQgYW55IGdpdmVuIHRpbWUuXCI7XG5cbi8qKlxuICogT2xkZXN0IGFjY2VwdGFibGUgYWdlIGluIG1pbGxpc2Vjb25kcyBmb3IgY2xpZW50IG1ldGFkYXRhIGJlZm9yZSB0aGUgY2xpZW50XG4gKiBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCBpdHMgYXNzb2NpYXRlZCBkYXRhIGlzIGdhcmJhZ2UgY29sbGVjdGVkLlxuICovXG4vKipcbiAqIEFuIEluZGV4ZWREQi1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIHBlcnNpc3RlbnRseVxuICogYWNyb3NzIHNlc3Npb25zLlxuICpcbiAqIE9uIFdlYiBvbmx5LCB0aGUgRmlyZXN0b3JlIFNES3Mgc3VwcG9ydCBzaGFyZWQgYWNjZXNzIHRvIGl0cyBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuIFRoaXMgYWxsb3dzIG11bHRpcGxlIGJyb3dzZXIgdGFicyB0byByZWFkIGFuZCB3cml0ZSB0byBJbmRleGVkRGIgYW5kXG4gKiB0byBzeW5jaHJvbml6ZSBzdGF0ZSBldmVuIHdpdGhvdXQgbmV0d29yayBjb25uZWN0aXZpdHkuIFNoYXJlZCBhY2Nlc3MgaXNcbiAqIGN1cnJlbnRseSBvcHRpb25hbCBhbmQgbm90IGVuYWJsZWQgdW5sZXNzIGFsbCBjbGllbnRzIGludm9rZVxuICogYGVuYWJsZVBlcnNpc3RlbmNlKClgIHdpdGggYHtzeW5jaHJvbml6ZVRhYnM6dHJ1ZX1gLlxuICpcbiAqIEluIG11bHRpLXRhYiBtb2RlLCBpZiBtdWx0aXBsZSBjbGllbnRzIGFyZSBhY3RpdmUgYXQgdGhlIHNhbWUgdGltZSwgdGhlIFNES1xuICogd2lsbCBkZXNpZ25hdGUgb25lIGNsaWVudCBhcyB0aGUg4oCccHJpbWFyeSBjbGllbnTigJ0uIEFuIGVmZm9ydCBpcyBtYWRlIHRvIHBpY2tcbiAqIGEgdmlzaWJsZSwgbmV0d29yay1jb25uZWN0ZWQgYW5kIGFjdGl2ZSBjbGllbnQsIGFuZCB0aGlzIGNsaWVudCBpc1xuICogcmVzcG9uc2libGUgZm9yIGxldHRpbmcgb3RoZXIgY2xpZW50cyBrbm93IGFib3V0IGl0cyBwcmVzZW5jZS4gVGhlIHByaW1hcnlcbiAqIGNsaWVudCB3cml0ZXMgYSB1bmlxdWUgY2xpZW50LWdlbmVyYXRlZCBpZGVudGlmaWVyICh0aGUgY2xpZW50IElEKSB0b1xuICogSW5kZXhlZERi4oCZcyDigJxvd25lcuKAnSBzdG9yZSBldmVyeSA0IHNlY29uZHMuIElmIHRoZSBwcmltYXJ5IGNsaWVudCBmYWlscyB0b1xuICogdXBkYXRlIHRoaXMgZW50cnksIGFub3RoZXIgY2xpZW50IGNhbiBhY3F1aXJlIHRoZSBsZWFzZSBhbmQgdGFrZSBvdmVyIGFzXG4gKiBwcmltYXJ5LlxuICpcbiAqIFNvbWUgcGVyc2lzdGVuY2Ugb3BlcmF0aW9ucyBpbiB0aGUgU0RLIGFyZSBkZXNpZ25hdGVkIGFzIHByaW1hcnktY2xpZW50IG9ubHlcbiAqIG9wZXJhdGlvbnMuIFRoaXMgaW5jbHVkZXMgdGhlIGFja25vd2xlZGdtZW50IG9mIG11dGF0aW9ucyBhbmQgYWxsIHVwZGF0ZXMgb2ZcbiAqIHJlbW90ZSBkb2N1bWVudHMuIFRoZSBlZmZlY3RzIG9mIHRoZXNlIG9wZXJhdGlvbnMgYXJlIHdyaXR0ZW4gdG8gcGVyc2lzdGVuY2VcbiAqIGFuZCB0aGVuIGJyb2FkY2FzdCB0byBvdGhlciB0YWJzIHZpYSBMb2NhbFN0b3JhZ2UgKHNlZVxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWApLCB3aGljaCB0aGVuIHJlZnJlc2ggdGhlaXIgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogU2ltaWxhcmx5LCB0aGUgcHJpbWFyeSBjbGllbnQgbGlzdGVucyB0byBub3RpZmljYXRpb25zIHNlbnQgYnkgc2Vjb25kYXJ5XG4gKiBjbGllbnRzIHRvIGRpc2NvdmVyIHBlcnNpc3RlbmNlIGNoYW5nZXMgd3JpdHRlbiBieSBzZWNvbmRhcnkgY2xpZW50cywgc3VjaCBhc1xuICogdGhlIGFkZGl0aW9uIG9mIG5ldyBtdXRhdGlvbnMgYW5kIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogSWYgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkIGFuZCBhbm90aGVyIHRhYiBhbHJlYWR5IG9idGFpbmVkIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSwgSW5kZXhlZERiUGVyc2lzdGVuY2UgZW50ZXJzIGEgZmFpbGVkIHN0YXRlIGFuZCBhbGwgc3Vic2VxdWVudFxuICogb3BlcmF0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgZmFpbC5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHRoZXJlIGlzIGFuIG9wdGltaXphdGlvbiBzbyB0aGF0IHdoZW4gYSB0YWIgaXMgY2xvc2VkLCB0aGVcbiAqIHByaW1hcnkgbGVhc2UgaXMgcmVsZWFzZWQgaW1tZWRpYXRlbHkgKHRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgdG8gbWFrZVxuICogc3VyZSB0aGF0IGEgcmVmcmVzaGVkIHRhYiBpcyBhYmxlIHRvIGltbWVkaWF0ZWx5IHJlLWFjcXVpcmUgdGhlIHByaW1hcnlcbiAqIGxlYXNlKS4gVW5mb3J0dW5hdGVseSwgSW5kZXhlZERCIGNhbm5vdCBiZSByZWxpYWJseSB1c2VkIGluIHdpbmRvdy51bmxvYWRcbiAqIHNpbmNlIGl0IGlzIGFuIGFzeW5jaHJvbm91cyBBUEkuIFNvIGluIGFkZGl0aW9uIHRvIGF0dGVtcHRpbmcgdG8gZ2l2ZSB1cCB0aGVcbiAqIGxlYXNlLCB0aGUgbGVhc2Vob2xkZXIgd3JpdGVzIGl0cyBjbGllbnQgSUQgdG8gYSBcInpvbWJpZWRDbGllbnRcIiBlbnRyeSBpblxuICogTG9jYWxTdG9yYWdlIHdoaWNoIGFjdHMgYXMgYW4gaW5kaWNhdG9yIHRoYXQgYW5vdGhlciB0YWIgc2hvdWxkIGdvIGFoZWFkIGFuZFxuICogdGFrZSB0aGUgcHJpbWFyeSBsZWFzZSBpbW1lZGlhdGVseSByZWdhcmRsZXNzIG9mIHRoZSBjdXJyZW50IGxlYXNlIHRpbWVzdGFtcC5cbiAqXG4gKiBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIGBzeW5jaHJvbml6ZVRhYnNgIHNlY3Rpb24gd2hlbiBtdWx0aS10YWIgaXMgbm9cbiAqIGxvbmdlciBvcHRpb25hbC5cbiAqL1xuY2xhc3MgSm8ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc3luY2hyb25pemUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiBtdWx0aXBsZSB0YWJzIGFuZCBzaGFyZVxuICAgICAqIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzLCBpLCByLCBvLCB1LCBjLCBcbiAgICAvKipcbiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgZm9yY2VmdWxseSBvYnRhaW5zIGRhdGFiYXNlIGFjY2Vzcy4gRXhpc3RpbmcgdGFicyB3aWxsXG4gICAgICogbm8gbG9uZ2VyIGJlIGFibGUgdG8gYWNjZXNzIEluZGV4ZWREQi5cbiAgICAgKi9cbiAgICBhLCBoID0gMTUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gZSwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLmlpID0gaSwgdGhpcy53aW5kb3cgPSByLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5yaSA9IGMsIHRoaXMub2kgPSBhLCB0aGlzLnVpID0gaCwgXG4gICAgICAgIHRoaXMuT3MgPSBudWxsLCB0aGlzLkZzID0gITEsIHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMubmV0d29ya0VuYWJsZWQgPSAhMCwgXG4gICAgICAgIC8qKiBPdXIgd2luZG93LnVubG9hZCBoYW5kbGVyLCBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLmNpID0gbnVsbCwgdGhpcy5pbkZvcmVncm91bmQgPSAhMSwgXG4gICAgICAgIC8qKiBPdXIgJ3Zpc2liaWxpdHljaGFuZ2UnIGxpc3RlbmVyIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMuYWkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBjbGllbnQgbWV0YWRhdGEgcmVmcmVzaCB0YXNrLiAqL1xuICAgICAgICB0aGlzLmhpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCB0aW1lIHdlIGdhcmJhZ2UgY29sbGVjdGVkIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLiAqL1xuICAgICAgICB0aGlzLmxpID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBcbiAgICAgICAgLyoqIEEgbGlzdGVuZXIgdG8gbm90aWZ5IG9uIHByaW1hcnkgc3RhdGUgY2hhbmdlcy4gKi9cbiAgICAgICAgdGhpcy5maSA9IHQgPT4gUHJvbWlzZS5yZXNvbHZlKCksICFKby5EKCkpIHRocm93IG5ldyBVKHEuVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IEVvKHRoaXMsIHMpLCB0aGlzLmRpID0gZSArIFwibWFpblwiLCB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgYXIodSksIFxuICAgICAgICB0aGlzLndpID0gbmV3IGJ0KHRoaXMuZGksIHRoaXMudWksIG5ldyB6byh0aGlzLnNlcmlhbGl6ZXIpKSwgdGhpcy5CcyA9IG5ldyBmbyh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLCB0aGlzLnNlcmlhbGl6ZXIpLCBcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gUG8odGhpcy5zZXJpYWxpemVyKSwgdGhpcy5xcyA9IG5ldyBFciwgdGhpcy53aW5kb3cgJiYgdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlID8gdGhpcy5faSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA6ICh0aGlzLl9pID0gbnVsbCwgXG4gICAgICAgICExID09PSBhICYmIGsoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZS4gQXMgYSByZXN1bHQsIHBlcnNpc3RlbmNlIG1heSBub3Qgd29yayByZWxpYWJseS4gSW4gcGFydGljdWxhciBlbmFibGVQZXJzaXN0ZW5jZSgpIGNvdWxkIGZhaWwgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVmcmVzaGluZyB0aGUgcGFnZS5cIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IEluZGV4ZWREYiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgc29tZXRpbWVzIChpbiB0aGUgY2FzZSBvZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBhbHJlYWR5IGhhdmluZyB0aGUgcGVyc2lzdGVuY2UgbG9jayksIHNvIGl0J3MgdGhlIGZpcnN0IHRoaW5nIHdlIHNob3VsZFxuICAgICAgICAvLyBkby5cbiAgICAgICAgcmV0dXJuIHRoaXMubWkoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgIC8vIEZhaWwgYHN0YXJ0KClgIGlmIGBzeW5jaHJvbml6ZVRhYnNgIGlzIGRpc2FibGVkIGFuZCB3ZSBjYW5ub3RcbiAgICAgICAgICAgIC8vIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgICAgIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgSG8pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2koKSwgdGhpcy55aSgpLCB0aGlzLnBpKCksIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcIiwgXCJyZWFkb25seVwiLCAodCA9PiB0aGlzLkJzLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSkpO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLk9zID0gbmV3IE90KHQsIHRoaXMucmkpO1xuICAgICAgICB9KSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5GcyA9ICEwO1xuICAgICAgICB9KSkuY2F0Y2goKHQgPT4gKHRoaXMud2kgJiYgdGhpcy53aS5jbG9zZSgpLCBQcm9taXNlLnJlamVjdCh0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwcmltYXJ5IHN0YXRlIG9mIHRoZVxuICAgICAqIGluc3RhbmNlIGNoYW5nZXMuIFVwb24gcmVnaXN0ZXJpbmcsIHRoaXMgbGlzdGVuZXIgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxuICAgICAqIHdpdGggdGhlIGN1cnJlbnQgcHJpbWFyeSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIElpKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmkgPSBhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVybiB0KGUpO1xuICAgICAgICB9LCB0KHRoaXMuaXNQcmltYXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBkYXRhYmFzZSByZWNlaXZlcyBhXG4gICAgICogdmVyc2lvbiBjaGFuZ2UgZXZlbnQgaW5kaWNhdGluZyB0aGF0IGl0IGhhcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLndpLkIoKGFzeW5jIGUgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIGRlbGV0ZSBJbmRleGVkREIuXG4gICAgICAgICAgICBudWxsID09PSBlLm5ld1ZlcnNpb24gJiYgYXdhaXQgdCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkanVzdHMgdGhlIGN1cnJlbnQgbmV0d29yayBzdGF0ZSBpbiB0aGUgY2xpZW50J3MgbWV0YWRhdGEsIHBvdGVudGlhbGx5XG4gICAgICogYWZmZWN0aW5nIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0TmV0d29ya0VuYWJsZWQodCkge1xuICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkICE9PSB0ICYmICh0aGlzLm5ldHdvcmtFbmFibGVkID0gdCwgXG4gICAgICAgIC8vIFNjaGVkdWxlIGEgcHJpbWFyeSBsZWFzZSByZWZyZXNoIGZvciBpbW1lZGlhdGUgZXhlY3V0aW9uLiBUaGUgZXZlbnR1YWxcbiAgICAgICAgLy8gbGVhc2UgdXBkYXRlIHdpbGwgYmUgcHJvcGFnYXRlZCB2aWEgYHByaW1hcnlTdGF0ZUxpc3RlbmVyYC5cbiAgICAgICAgdGhpcy5paS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgYXdhaXQgdGhpcy5taSgpO1xuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjbGllbnQgbWV0YWRhdGEgaW4gSW5kZXhlZERiIGFuZCBhdHRlbXB0cyB0byBlaXRoZXIgb2J0YWluIG9yXG4gICAgICogZXh0ZW5kIHRoZSBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBBc3luY2hyb25vdXNseSBub3RpZmllcyB0aGVcbiAgICAgKiBwcmltYXJ5IHN0YXRlIGxpc3RlbmVyIGlmIHRoZSBjbGllbnQgZWl0aGVyIG5ld2x5IG9idGFpbmVkIG9yIHJlbGVhc2VkIGl0c1xuICAgICAqIHByaW1hcnkgbGVhc2UuXG4gICAgICovICAgIG1pKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcInVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBYbyh0KS5wdXQoe1xuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KCksXG4gICAgICAgICAgICBuZXR3b3JrRW5hYmxlZDogdGhpcy5uZXR3b3JrRW5hYmxlZCxcbiAgICAgICAgICAgIGluRm9yZWdyb3VuZDogdGhpcy5pbkZvcmVncm91bmRcbiAgICAgICAgfSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSByZXR1cm4gdGhpcy5UaSh0KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0IHx8ICh0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLmlpLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuZmkoITEpKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdGhpcy5FaSh0KSkpLm5leHQoKGUgPT4gdGhpcy5pc1ByaW1hcnkgJiYgIWUgPyB0aGlzLkFpKHQpLm5leHQoKCgpID0+ICExKSkgOiAhIWUgJiYgdGhpcy52aSh0KS5uZXh0KCgoKSA9PiAhMCkpKSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICBpZiAoRHQodCkpIFxuICAgICAgICAgICAgLy8gUHJvY2VlZCB3aXRoIHRoZSBleGlzdGluZyBzdGF0ZS4gQW55IHN1YnNlcXVlbnQgYWNjZXNzIHRvXG4gICAgICAgICAgICAvLyBJbmRleGVkREIgd2lsbCB2ZXJpZnkgdGhlIGxlYXNlLlxuICAgICAgICAgICAgcmV0dXJuIE4oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBleHRlbmQgb3duZXIgbGVhc2U6IFwiLCB0KSwgdGhpcy5pc1ByaW1hcnk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIHRocm93IHQ7XG4gICAgICAgICAgICByZXR1cm4gTihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiUmVsZWFzaW5nIG93bmVyIGxlYXNlIGFmdGVyIGVycm9yIGR1cmluZyBsZWFzZSByZWZyZXNoXCIsIHQpLCBcbiAgICAgICAgICAgIC8qIGlzUHJpbWFyeT0gKi8gITE7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5ICE9PSB0ICYmIHRoaXMuaWkuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5maSh0KSkpLCB0aGlzLmlzUHJpbWFyeSA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVGkodCkge1xuICAgICAgICByZXR1cm4gWW8odCkuZ2V0KFwib3duZXJcIikubmV4dCgodCA9PiBSdC5yZXNvbHZlKHRoaXMuUmkodCkpKSk7XG4gICAgfVxuICAgIFBpKHQpIHtcbiAgICAgICAgcmV0dXJuIFhvKHQpLmRlbGV0ZSh0aGlzLmNsaWVudElkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGdhcmJhZ2UgY29sbGVjdGlvbiB0aHJlc2hvbGQgaGFzIHBhc3NlZCwgcHJ1bmVzIHRoZVxuICAgICAqIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBhbmQgdGhlIENsaWVudE1ldGFkYXRhIHN0b3JlIGJhc2VkIG9uIHRoZSBsYXN0IHVwZGF0ZVxuICAgICAqIHRpbWUgb2YgYWxsIGNsaWVudHMuXG4gICAgICovICAgIGFzeW5jIGJpKCkge1xuICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkgJiYgIXRoaXMuVmkodGhpcy5saSwgMThlNSkpIHtcbiAgICAgICAgICAgIHRoaXMubGkgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMucnVuVHJhbnNhY3Rpb24oXCJtYXliZUdhcmJhZ2VDb2xsZWN0TXVsdGlDbGllbnRTdGF0ZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gX2UodCwgXCJjbGllbnRNZXRhZGF0YVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5qKCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLlNpKHQsIDE4ZTUpLCBzID0gdC5maWx0ZXIoKHQgPT4gLTEgPT09IG4uaW5kZXhPZih0KSkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgbWV0YWRhdGEgZm9yIGNsaWVudHMgdGhhdCBhcmUgbm8gbG9uZ2VyIGNvbnNpZGVyZWQgYWN0aXZlLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChzLCAodCA9PiBlLmRlbGV0ZSh0LmNsaWVudElkKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKCgpID0+IFtdKSk7XG4gICAgICAgICAgICAvLyBEZWxldGUgcG90ZW50aWFsIGxlZnRvdmVyIGVudHJpZXMgdGhhdCBtYXkgY29udGludWUgdG8gbWFyayB0aGVcbiAgICAgICAgICAgIC8vIGluYWN0aXZlIGNsaWVudHMgYXMgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2UuXG4gICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcbiAgICAgICAgICAgIC8vIHRoZSBjbGllbnQgYXRvbWljYWxseSwgYnV0IHdlIGNhbid0LiBTbyB3ZSBvcHQgdG8gZGVsZXRlIHRoZSBJbmRleGVkRGJcbiAgICAgICAgICAgIC8vIGVudHJpZXMgZmlyc3QgdG8gYXZvaWQgcG90ZW50aWFsbHkgcmV2aXZpbmcgYSB6b21iaWVkIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pKSBmb3IgKGNvbnN0IGUgb2YgdCkgdGhpcy5faS5yZW1vdmVJdGVtKHRoaXMuRGkoZS5jbGllbnRJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHJlY3VycmluZyB0aW1lciB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBhbmQgdG8gZWl0aGVyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cbiAgICAgKi8gICAgcGkoKSB7XG4gICAgICAgIHRoaXMuaGkgPSB0aGlzLmlpLmVucXVldWVBZnRlckRlbGF5KFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIiAvKiBUaW1lcklkLkNsaWVudE1ldGFkYXRhUmVmcmVzaCAqLyAsIDRlMywgKCgpID0+IHRoaXMubWkoKS50aGVuKCgoKSA9PiB0aGlzLmJpKCkpKS50aGVuKCgoKSA9PiB0aGlzLnBpKCkpKSkpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi8gICAgUmkodCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIHQub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cbiAgICAgKi8gICAgRWkodCkge1xuICAgICAgICBpZiAodGhpcy5vaSkgcmV0dXJuIFJ0LnJlc29sdmUoITApO1xuICAgICAgICByZXR1cm4gWW8odCkuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBBIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIHByaW1hcnkgbGVhc2UgaWY6XG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpblxuICAgICAgICAgICAgLy8gICB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gdGhlIGBmb3JjZU93bmluZ1RhYmAgc2V0dGluZyB3YXMgcGFzc2VkIGluLlxuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgdGhpcy5WaShlLmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuQ2koZS5vd25lcklkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLlJpKGUpICYmIHRoaXMubmV0d29ya0VuYWJsZWQpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuUmkoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxuICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIEhvKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKCF0aGlzLm5ldHdvcmtFbmFibGVkIHx8ICF0aGlzLmluRm9yZWdyb3VuZCkgfHwgWG8odCkuaigpLm5leHQoKHQgPT4gdm9pZCAwID09PSB0aGlzLlNpKHQsIDVlMykuZmluZCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50SWQgIT09IHQuY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICF0aGlzLm5ldHdvcmtFbmFibGVkICYmIHQubmV0d29ya0VuYWJsZWQsIG4gPSAhdGhpcy5pbkZvcmVncm91bmQgJiYgdC5pbkZvcmVncm91bmQsIHMgPSB0aGlzLm5ldHdvcmtFbmFibGVkID09PSB0Lm5ldHdvcmtFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSB8fCBuICYmIHMpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+ICh0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiBOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke3QgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5GcyA9ICExLCB0aGlzLnhpKCksIHRoaXMuaGkgJiYgKHRoaXMuaGkuY2FuY2VsKCksIHRoaXMuaGkgPSBudWxsKSwgdGhpcy5OaSgpLCBcbiAgICAgICAgdGhpcy5raSgpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMud2kucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIFwib3duZXJcIiwgXCJjbGllbnRNZXRhZGF0YVwiIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgd2UodCwgT3QuY3QpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQWkoZSkubmV4dCgoKCkgPT4gdGhpcy5QaShlKSkpO1xuICAgICAgICB9KSksIHRoaXMud2kuY2xvc2UoKSwgXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZW50cnkgbWFya2luZyB0aGUgY2xpZW50IGFzIHpvbWJpZWQgZnJvbSBMb2NhbFN0b3JhZ2Ugc2luY2VcbiAgICAgICAgLy8gd2Ugc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgaXRzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLlxuICAgICAgICB0aGlzLk1pKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY2xpZW50cyB0aGF0IGFyZSBub3Qgem9tYmllZCBhbmQgaGF2ZSBhbiB1cGRhdGVUaW1lIHdpdGhpbiB0aGVcbiAgICAgKiBwcm92aWRlZCB0aHJlc2hvbGQuXG4gICAgICovICAgIFNpKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuZmlsdGVyKCh0ID0+IHRoaXMuVmkodC51cGRhdGVUaW1lTXMsIGUpICYmICF0aGlzLkNpKHQuY2xpZW50SWQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiBJZiBtdWx0aS10YWJcbiAgICAgKiBpcyBub3Qgc3VwcG9ydGVkLCByZXR1cm5zIGFuIGFycmF5IHRoYXQgb25seSBjb250YWlucyB0aGUgbG9jYWwgY2xpZW50J3NcbiAgICAgKiBJRC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgICRpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEFjdGl2ZUNsaWVudHNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBYbyh0KS5qKCkubmV4dCgodCA9PiB0aGlzLlNpKHQsIDE4ZTUpLm1hcCgodCA9PiB0LmNsaWVudElkKSkpKSkpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnM7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUodCwgZSkge1xuICAgICAgICByZXR1cm4gb28uZGUodCwgdGhpcy5zZXJpYWxpemVyLCBlLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJzO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlO1xuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IEpyKHQsIHRoaXMuc2VyaWFsaXplci5mZS5kYXRhYmFzZUlkKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUodCkge1xuICAgICAgICByZXR1cm4gUnIuZGUodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFzO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIE4oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCB0KTtcbiAgICAgICAgY29uc3QgcyA9IFwicmVhZG9ubHlcIiA9PT0gZSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCIsIGkgPSAxNSA9PT0gKHIgPSB0aGlzLnVpKSA/IGRlIDogMTQgPT09IHIgPyBmZSA6IDEzID09PSByID8gbGUgOiAxMiA9PT0gciA/IGhlIDogMTEgPT09IHIgPyBhZSA6IHZvaWQgTygpO1xuICAgICAgICAvKiogUmV0dXJucyB0aGUgb2JqZWN0IHN0b3JlcyBmb3IgdGhlIHByb3ZpZGVkIHNjaGVtYS4gKi9cbiAgICAgICAgdmFyIHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aS5ydW5UcmFuc2FjdGlvbih0LCBzLCBpLCAocyA9PiAobyA9IG5ldyB3ZShzLCB0aGlzLk9zID8gdGhpcy5Pcy5uZXh0KCkgOiBPdC5jdCksIFxuICAgICAgICBcInJlYWR3cml0ZS1wcmltYXJ5XCIgPT09IGUgPyB0aGlzLlRpKG8pLm5leHQoKHQgPT4gISF0IHx8IHRoaXMuRWkobykpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmICghZSkgdGhyb3cgayhgRmFpbGVkIHRvIG9idGFpbiBwcmltYXJ5IGxlYXNlIGZvciBhY3Rpb24gJyR7dH0nLmApLCB0aGlzLmlzUHJpbWFyeSA9ICExLCBcbiAgICAgICAgICAgIHRoaXMuaWkuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5maSghMSkpKSwgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBFdCk7XG4gICAgICAgICAgICByZXR1cm4gbihvKTtcbiAgICAgICAgfSkpLm5leHQoKHQgPT4gdGhpcy52aShvKS5uZXh0KCgoKSA9PiB0KSkpKSA6IHRoaXMuT2kobykubmV4dCgoKCkgPT4gbihvKSkpKSkpLnRoZW4oKHQgPT4gKG8ucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSBjdXJyZW50IHRhYiBpcyB0aGUgcHJpbWFyeSBsZWFzZWhvbGRlciBvciBhbHRlcm5hdGl2ZWx5XG4gICAgICogdGhhdCB0aGUgbGVhc2Vob2xkZXIgaGFzIG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW4gbm8gbG9uZ2VyXG4gICAgLy8gYmUgdHVybmVkIG9mZi5cbiAgICBPaSh0KSB7XG4gICAgICAgIHJldHVybiBZbyh0KS5nZXQoXCJvd25lclwiKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0ICYmIHRoaXMuVmkodC5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLkNpKHQub3duZXJJZCkgJiYgIXRoaXMuUmkodCkgJiYgISh0aGlzLm9pIHx8IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gJiYgdC5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgSG8pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9idGFpbnMgb3IgZXh0ZW5kcyB0aGUgbmV3IHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIFRoaXNcbiAgICAgKiBtZXRob2QgZG9lcyBub3QgdmVyaWZ5IHRoYXQgdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhpcyBsZWFzZS5cbiAgICAgKi8gICAgdmkodCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgb3duZXJJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGFsbG93VGFiU3luY2hyb25pemF0aW9uOiB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uLFxuICAgICAgICAgICAgbGVhc2VUaW1lc3RhbXBNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gWW8odCkucHV0KFwib3duZXJcIiwgZSk7XG4gICAgfVxuICAgIHN0YXRpYyBEKCkge1xuICAgICAgICByZXR1cm4gYnQuRCgpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHRoZSBwcmltYXJ5IGxlYXNlIGFuZCByZW1vdmVzIGl0IGlmIHdlIGFyZSB0aGUgY3VycmVudCBwcmltYXJ5LiAqLyAgICBBaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBZbyh0KTtcbiAgICAgICAgcmV0dXJuIGUuZ2V0KFwib3duZXJcIikubmV4dCgodCA9PiB0aGlzLlJpKHQpID8gKE4oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBwcmltYXJ5IGxlYXNlLlwiKSwgXG4gICAgICAgIGUuZGVsZXRlKFwib3duZXJcIikpIDogUnQucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIC8qKiBWZXJpZmllcyB0aGF0IGB1cGRhdGVUaW1lTXNgIGlzIHdpdGhpbiBgbWF4QWdlTXNgLiAqLyAgICBWaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gISh0IDwgbiAtIGUpICYmICghKHQgPiBuKSB8fCAoayhgRGV0ZWN0ZWQgYW4gdXBkYXRlIHRpbWUgdGhhdCBpcyBpbiB0aGUgZnV0dXJlOiAke3R9ID4gJHtufWApLCBcbiAgICAgICAgITEpKTtcbiAgICB9XG4gICAgZ2koKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuZG9jdW1lbnQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgKHRoaXMuYWkgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlpLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSwgXG4gICAgICAgICAgICB0aGlzLm1pKCkpKSk7XG4gICAgICAgIH0sIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5haSksIHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcbiAgICB9XG4gICAgTmkoKSB7XG4gICAgICAgIHRoaXMuYWkgJiYgKHRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5haSksIHRoaXMuYWkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0YWNoZXMgYSB3aW5kb3cudW5sb2FkIGhhbmRsZXIgdGhhdCB3aWxsIHN5bmNocm9ub3VzbHkgd3JpdGUgb3VyXG4gICAgICogY2xpZW50SWQgdG8gYSBcInpvbWJpZSBjbGllbnQgaWRcIiBsb2NhdGlvbiBpbiBMb2NhbFN0b3JhZ2UuIFRoaXMgY2FuIGJlIHVzZWRcbiAgICAgKiBieSB0YWJzIHRyeWluZyB0byBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIHRvIGRldGVybWluZSB0aGF0IHRoZSBsZWFzZVxuICAgICAqIGlzIG5vIGxvbmdlciB2YWxpZCBldmVuIGlmIHRoZSB0aW1lc3RhbXAgaXMgcmVjZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseVxuICAgICAqIGltcG9ydGFudCBmb3IgdGhlIHJlZnJlc2ggY2FzZSAoc28gdGhlIHRhYiBjb3JyZWN0bHkgcmUtYWNxdWlyZXMgdGhlXG4gICAgICogcHJpbWFyeSBsZWFzZSkuIExvY2FsU3RvcmFnZSBpcyB1c2VkIGZvciB0aGlzIHJhdGhlciB0aGFuIEluZGV4ZWREYiBiZWNhdXNlXG4gICAgICogaXQgaXMgYSBzeW5jaHJvbm91cyBBUEkgYW5kIHNvIGNhbiBiZSB1c2VkIHJlbGlhYmx5IGZyb20gIGFuIHVubG9hZFxuICAgICAqIGhhbmRsZXIuXG4gICAgICovICAgIHlpKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiAobnVsbCA9PT0gKHQgPSB0aGlzLndpbmRvdykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5hZGRFdmVudExpc3RlbmVyKSAmJiAodGhpcy5jaSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIE5vdGU6IEluIHRoZW9yeSwgdGhpcyBzaG91bGQgYmUgc2NoZWR1bGVkIG9uIHRoZSBBc3luY1F1ZXVlIHNpbmNlIGl0XG4gICAgICAgICAgICAvLyBhY2Nlc3NlcyBpbnRlcm5hbCBzdGF0ZS4gV2UgZXhlY3V0ZSB0aGlzIGNvZGUgZGlyZWN0bHkgZHVyaW5nIHNodXRkb3duXG4gICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBhIGNoYW5jZSB0byBydW4uXG4gICAgICAgICAgICB0aGlzLnhpKCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gLyg/OlZlcnNpb258TW9iaWxlKVxcLzFbNDU2XS87XG4gICAgICAgICAgICBpc1NhZmFyaSgpICYmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCh0KSB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKHQpKSAmJiBcbiAgICAgICAgICAgIC8vIE9uIFNhZmFyaSAxNCwgMTUsIGFuZCAxNiwgd2UgZG8gbm90IHJ1biBhbnkgY2xlYW51cCBhY3Rpb25zIGFzIGl0IG1pZ2h0XG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGEgYnVnIHRoYXQgcHJldmVudHMgU2FmYXJpIGZyb20gcmUtb3BlbmluZyBJbmRleGVkREIgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGUgbmV4dCBwYWdlIGxvYWQuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIyNjU0N1xuICAgICAgICAgICAgdGhpcy5paS5lbnRlclJlc3RyaWN0ZWRNb2RlKC8qIHB1cmdlRXhpc3RpbmdUYXNrcz0gKi8gITApLCB0aGlzLmlpLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpO1xuICAgICAgICB9LCB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5jaSkpO1xuICAgIH1cbiAgICBraSgpIHtcbiAgICAgICAgdGhpcy5jaSAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMuY2kpLCB0aGlzLmNpID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhIGNsaWVudCBpcyBcInpvbWJpZWRcIiBiYXNlZCBvbiBpdHMgTG9jYWxTdG9yYWdlIGVudHJ5LlxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXG4gICAgICogY2xlYW51cCBsb2dpYyBpbiBgc2h1dGRvd24oKWAuXG4gICAgICovICAgIENpKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKG51bGwgPT09IChlID0gdGhpcy5faSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5nZXRJdGVtKHRoaXMuRGkodCkpKTtcbiAgICAgICAgICAgIHJldHVybiBOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAnJHt0fScgJHtuID8gXCJpc1wiIDogXCJpcyBub3RcIn0gem9tYmllZCBpbiBMb2NhbFN0b3JhZ2VgKSwgXG4gICAgICAgICAgICBuO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgIHJldHVybiBrKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLlwiLCB0KSwgITE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkIGNsaWVudCBhcyB6b21iaWVkIChhIGNsaWVudCB0aGF0IGhhZCBpdHMgdGFiIGNsb3NlZCkuIFpvbWJpZWRcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXG4gICAgICovICAgIHhpKCkge1xuICAgICAgICBpZiAodGhpcy5faSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX2kuc2V0SXRlbSh0aGlzLkRpKHRoaXMuY2xpZW50SWQpLCBTdHJpbmcoRGF0ZS5ub3coKSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlIC8gd29ya2luZy5cbiAgICAgICAgICAgIGsoXCJGYWlsZWQgdG8gc2V0IHpvbWJpZSBjbGllbnQgaWQuXCIsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBSZW1vdmVzIHRoZSB6b21iaWVkIGNsaWVudCBlbnRyeSBpZiBpdCBleGlzdHMuICovICAgIE1pKCkge1xuICAgICAgICBpZiAodGhpcy5faSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX2kucmVtb3ZlSXRlbSh0aGlzLkRpKHRoaXMuY2xpZW50SWQpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgIH1cbiAgICB9XG4gICAgRGkodCkge1xuICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV96b21iaWVfJHt0aGlzLnBlcnNpc3RlbmNlS2V5fV8ke3R9YDtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBwcmltYXJ5IGNsaWVudCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWW8odCkge1xuICAgIHJldHVybiBfZSh0LCBcIm93bmVyXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBYbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiY2xpZW50TWV0YWRhdGFcIik7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHVzZWQgYXMgYSBwcmVmaXggd2hlbiBzdG9yaW5nIGRhdGEgaW4gSW5kZXhlZERCIGFuZFxuICogTG9jYWxTdG9yYWdlLlxuICovIGZ1bmN0aW9uIFpvKHQsIGUpIHtcbiAgICAvLyBVc2UgdHdvIGRpZmZlcmVudCBwcmVmaXggZm9ybWF0czpcbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLiBkYXRhYmFzZUlEIC8gLi4uXG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC8gLi4uXG4gICAgLy8gcHJvamVjdElEcyBhcmUgRE5TLWNvbXBhdGlibGUgbmFtZXMgYW5kIGNhbm5vdCBjb250YWluIGRvdHNcbiAgICAvLyBzbyB0aGVyZSdzIG5vIGRhbmdlciBvZiBjb2xsaXNpb25zLlxuICAgIGxldCBuID0gdC5wcm9qZWN0SWQ7XG4gICAgcmV0dXJuIHQuaXNEZWZhdWx0RGF0YWJhc2UgfHwgKG4gKz0gXCIuXCIgKyB0LmRhdGFiYXNlKSwgXCJmaXJlc3RvcmUvXCIgKyBlICsgXCIvXCIgKyBuICsgXCIvXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgc2V0IG9mIGNoYW5nZXMgdG8gd2hhdCBkb2N1bWVudHMgYXJlIGN1cnJlbnRseSBpbiB2aWV3IGFuZCBvdXQgb2YgdmlldyBmb3JcbiAqIGEgZ2l2ZW4gcXVlcnkuIFRoZXNlIGNoYW5nZXMgYXJlIHNlbnQgdG8gdGhlIExvY2FsU3RvcmUgYnkgdGhlIFZpZXcgKHZpYVxuICogdGhlIFN5bmNFbmdpbmUpIGFuZCBhcmUgdXNlZCB0byBwaW4gLyB1bnBpbiBkb2N1bWVudHMgYXMgYXBwcm9wcmlhdGUuXG4gKi9cbmNsYXNzIHR1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGUsIHRoaXMuRmkgPSBuLCB0aGlzLkJpID0gcztcbiAgICB9XG4gICAgc3RhdGljIExpKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBncygpLCBzID0gZ3MoKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZG9jQ2hhbmdlcykgc3dpdGNoICh0LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICBuID0gbi5hZGQodC5kb2Mua2V5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICBzID0gcy5hZGQodC5kb2Mua2V5KTtcbiAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHR1KHQsIGUuZnJvbUNhY2hlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBGaXJlc3RvcmUgcXVlcnkgZW5naW5lLlxuICpcbiAqIEZpcmVzdG9yZSBxdWVyaWVzIGNhbiBiZSBleGVjdXRlZCBpbiB0aHJlZSBtb2Rlcy4gVGhlIFF1ZXJ5IEVuZ2luZSBkZXRlcm1pbmVzXG4gKiB3aGF0IG1vZGUgdG8gdXNlIGJhc2VkIG9uIHdoYXQgZGF0YSBpcyBwZXJzaXN0ZWQuIFRoZSBtb2RlIG9ubHkgZGV0ZXJtaW5lc1xuICogdGhlIHJ1bnRpbWUgY29tcGxleGl0eSBvZiB0aGUgcXVlcnkgLSB0aGUgcmVzdWx0IHNldCBpcyBlcXVpdmFsZW50IGFjcm9zcyBhbGxcbiAqIGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiBUaGUgUXVlcnkgZW5naW5lIHdpbGwgdXNlIGluZGV4ZWQtYmFzZWQgZXhlY3V0aW9uIGlmIGEgdXNlciBoYXMgY29uZmlndXJlZFxuICogYW55IGluZGV4IHRoYXQgY2FuIGJlIHVzZWQgdG8gZXhlY3V0ZSBxdWVyeSAodmlhIGBzZXRJbmRleENvbmZpZ3VyYXRpb24oKWApLlxuICogT3RoZXJ3aXNlLCB0aGUgZW5naW5lIHdpbGwgdHJ5IHRvIG9wdGltaXplIHRoZSBxdWVyeSBieSByZS11c2luZyBhIHByZXZpb3VzbHlcbiAqIHBlcnNpc3RlZCBxdWVyeSByZXN1bHQuIElmIHRoYXQgaXMgbm90IHBvc3NpYmxlLCB0aGUgcXVlcnkgd2lsbCBiZSBleGVjdXRlZFxuICogdmlhIGEgZnVsbCBjb2xsZWN0aW9uIHNjYW4uXG4gKlxuICogSW5kZXgtYmFzZWQgZXhlY3V0aW9uIGlzIHRoZSBkZWZhdWx0IHdoZW4gYXZhaWxhYmxlLiBUaGUgcXVlcnkgZW5naW5lXG4gKiBzdXBwb3J0cyBwYXJ0aWFsIGluZGV4ZWQgZXhlY3V0aW9uIGFuZCBtZXJnZXMgdGhlIHJlc3VsdCBmcm9tIHRoZSBpbmRleFxuICogbG9va3VwIHdpdGggZG9jdW1lbnRzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gaW5kZXhlZC4gVGhlIGluZGV4IGV2YWx1YXRpb25cbiAqIG1hdGNoZXMgdGhlIGJhY2tlbmQncyBmb3JtYXQgYW5kIGFzIHN1Y2gsIHRoZSBTREsgY2FuIHVzZSBpbmRleGluZyBmb3IgYWxsXG4gKiBxdWVyaWVzIHRoYXQgdGhlIGJhY2tlbmQgc3VwcG9ydHMuXG4gKlxuICogSWYgbm8gaW5kZXggZXhpc3RzLCB0aGUgcXVlcnkgZW5naW5lIHRyaWVzIHRvIHRha2UgYWR2YW50YWdlIG9mIHRoZSB0YXJnZXRcbiAqIGRvY3VtZW50IG1hcHBpbmcgaW4gdGhlIFRhcmdldENhY2hlLiBUaGVzZSBtYXBwaW5ncyBleGlzdHMgZm9yIGFsbCBxdWVyaWVzXG4gKiB0aGF0IGhhdmUgYmVlbiBzeW5jZWQgd2l0aCB0aGUgYmFja2VuZCBhdCBsZWFzdCBvbmNlIGFuZCBhbGxvdyB0aGUgcXVlcnlcbiAqIGVuZ2luZSB0byBvbmx5IHJlYWQgZG9jdW1lbnRzIHRoYXQgcHJldmlvdXNseSBtYXRjaGVkIGEgcXVlcnkgcGx1cyBhbnlcbiAqIGRvY3VtZW50cyB0aGF0IHdlcmUgZWRpdGVkIGFmdGVyIHRoZSBxdWVyeSB3YXMgbGFzdCBsaXN0ZW5lZCB0by5cbiAqXG4gKiBUaGVyZSBhcmUgc29tZSBjYXNlcyB3aGVuIHRoaXMgb3B0aW1pemF0aW9uIGlzIG5vdCBndWFyYW50ZWVkIHRvIHByb2R1Y2VcbiAqIHRoZSBzYW1lIHJlc3VsdHMgYXMgZnVsbCBjb2xsZWN0aW9uIHNjYW5zLiBJbiB0aGVzZSBjYXNlcywgcXVlcnlcbiAqIHByb2Nlc3NpbmcgZmFsbHMgYmFjayB0byBmdWxsIHNjYW5zLiBUaGVzZSBjYXNlcyBhcmU6XG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBwcmV2aW91c2x5IG5vIGxvbmdlclxuICogICBtYXRjaGVzIHRoZSBxdWVyeS5cbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCBlZGl0IG1heSBjYXVzZSB0aGUgZG9jdW1lbnQgdG8gc29ydCBiZWxvd1xuICogICBhbm90aGVyIGRvY3VtZW50IHRoYXQgaXMgaW4gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIC0gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgYmVlbiBDVVJSRU5UIG9yIGZyZWUgb2YgbGltYm8gZG9jdW1lbnRzLlxuICovIGNsYXNzIGV1IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xaSA9ICExO1xuICAgIH1cbiAgICAvKiogU2V0cyB0aGUgZG9jdW1lbnQgdmlldyB0byBxdWVyeSBhZ2FpbnN0LiAqLyAgICBpbml0aWFsaXplKHQsIGUpIHtcbiAgICAgICAgdGhpcy5VaSA9IHQsIHRoaXMuaW5kZXhNYW5hZ2VyID0gZSwgdGhpcy5xaSA9ICEwO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbGwgbG9jYWwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgcXVlcnkuICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gdGhpcy5LaSh0LCBlKS5uZXh0KChpID0+IGkgfHwgdGhpcy5HaSh0LCBlLCBzLCBuKSkpLm5leHQoKG4gPT4gbiB8fCB0aGlzLlFpKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGFuIGluZGV4ZWQgcXVlcnkgdGhhdCBldmFsdWF0ZXMgdGhlIHF1ZXJ5IGJhc2VkIG9uIGEgY29sbGVjdGlvbidzXG4gICAgICogcGVyc2lzdGVkIGluZGV4IHZhbHVlcy4gUmV0dXJucyBgbnVsbGAgaWYgYW4gaW5kZXggaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgKi8gICAgS2kodCwgZSkge1xuICAgICAgICBpZiAoUW4oZSkpIFxuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgbWF0Y2ggYWxsIGRvY3VtZW50cyBkb24ndCBiZW5lZml0IGZyb20gdXNpbmdcbiAgICAgICAgLy8ga2V5LWJhc2VkIGxvb2t1cHMuIEl0IGlzIG1vcmUgZWZmaWNpZW50IHRvIHNjYW4gYWxsIGRvY3VtZW50cyBpbiBhXG4gICAgICAgIC8vIGNvbGxlY3Rpb24sIHJhdGhlciB0aGFuIHRvIHBlcmZvcm0gaW5kaXZpZHVhbCBsb29rdXBzLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShudWxsKTtcbiAgICAgICAgbGV0IG4gPSBKbihlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmdldEluZGV4VHlwZSh0LCBuKS5uZXh0KChzID0+IDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gPT09IHMgPyBudWxsIDogKG51bGwgIT09IGUubGltaXQgJiYgMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA9PT0gcyAmJiAoXG4gICAgICAgIC8vIFdlIGNhbm5vdCBhcHBseSBhIGxpbWl0IGZvciB0YXJnZXRzIHRoYXQgYXJlIHNlcnZlZCB1c2luZyBhIHBhcnRpYWxcbiAgICAgICAgLy8gaW5kZXguIElmIGEgcGFydGlhbCBpbmRleCB3aWxsIGJlIHVzZWQgdG8gc2VydmUgdGhlIHRhcmdldCwgdGhlXG4gICAgICAgIC8vIHF1ZXJ5IG1heSByZXR1cm4gYSBzdXBlcnNldCBvZiBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgdGFyZ2V0XG4gICAgICAgIC8vIChlLmcuIGlmIHRoZSBpbmRleCBkb2Vzbid0IGluY2x1ZGUgYWxsIHRoZSB0YXJnZXQncyBmaWx0ZXJzKSwgb3JcbiAgICAgICAgLy8gbWF5IHJldHVybiB0aGUgY29ycmVjdCBzZXQgb2YgZG9jdW1lbnRzIGluIHRoZSB3cm9uZyBvcmRlciAoZS5nLiBpZlxuICAgICAgICAvLyB0aGUgaW5kZXggZG9lc24ndCBpbmNsdWRlIGEgc2VnbWVudCBmb3Igb25lIG9mIHRoZSBvcmRlckJ5cykuXG4gICAgICAgIC8vIFRoZXJlZm9yZSwgYSBsaW1pdCBzaG91bGQgbm90IGJlIGFwcGxpZWQgaW4gc3VjaCBjYXNlcy5cbiAgICAgICAgZSA9IFhuKGUsIG51bGwsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyksIG4gPSBKbihlKSksIHRoaXMuaW5kZXhNYW5hZ2VyLmdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KHQsIG4pLm5leHQoKHMgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGdzKC4uLnMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuVWkuZ2V0RG9jdW1lbnRzKHQsIGkpLm5leHQoKHMgPT4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0TWluT2Zmc2V0KHQsIG4pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmppKGUsIHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnppKGUsIHIsIGksIG4ucmVhZFRpbWUpID8gdGhpcy5LaSh0LCBYbihlLCBudWxsLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pKSA6IHRoaXMuV2kodCwgciwgZSwgbik7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGJhc2VkIG9uIHRoZSB0YXJnZXQncyBwZXJzaXN0ZWQgcXVlcnkgbWFwcGluZy4gUmV0dXJuc1xuICAgICAqIGBudWxsYCBpZiB0aGUgbWFwcGluZyBpcyBub3QgYXZhaWxhYmxlIG9yIGNhbm5vdCBiZSB1c2VkLlxuICAgICAqLyAgICBHaSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBRbihlKSB8fCBzLmlzRXF1YWwocnQubWluKCkpID8gdGhpcy5RaSh0LCBlKSA6IHRoaXMuVWkuZ2V0RG9jdW1lbnRzKHQsIG4pLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuamkoZSwgaSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy56aShlLCByLCBuLCBzKSA/IHRoaXMuUWkodCwgZSkgOiAoQygpIDw9IExvZ0xldmVsLkRFQlVHICYmIE4oXCJRdWVyeUVuZ2luZVwiLCBcIlJlLXVzaW5nIHByZXZpb3VzIHJlc3VsdCBmcm9tICVzIHRvIGV4ZWN1dGUgcXVlcnk6ICVzXCIsIHMudG9TdHJpbmcoKSwgZXMoZSkpLCBcbiAgICAgICAgICAgIHRoaXMuV2kodCwgciwgZSwgeXQocywgLTEpKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgc2VlbiBhIHNuYXBzaG90IHdpdGhvdXQgbGltYm8gZnJlZSBkb2N1bWVudHNcbiAgICAgICAgLy8gc2hvdWxkIGFsc28gYmUgcnVuIGFzIGEgZnVsbCBjb2xsZWN0aW9uIHNjYW4uXG4gICAgICAgIH1cbiAgICAvKiogQXBwbGllcyB0aGUgcXVlcnkgZmlsdGVyIGFuZCBzb3J0aW5nIHRvIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuICAqLyAgICBqaSh0LCBlKSB7XG4gICAgICAgIC8vIFNvcnQgdGhlIGRvY3VtZW50cyBhbmQgcmUtYXBwbHkgdGhlIHF1ZXJ5IGZpbHRlciBzaW5jZSBwcmV2aW91c2x5XG4gICAgICAgIC8vIG1hdGNoaW5nIGRvY3VtZW50cyBkbyBub3QgbmVjZXNzYXJpbHkgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5LlxuICAgICAgICBsZXQgbiA9IG5ldyBFZShpcyh0KSk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKChlLCBzKSA9PiB7XG4gICAgICAgICAgICBucyh0LCBzKSAmJiAobiA9IG4uYWRkKHMpKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgbGltaXQgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgZnJvbSBjYWNoZSwgbWFraW5nIGl0XG4gICAgICogaW5lbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkuXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyAtIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcbiAgICAgKiBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlXG4gICAgICogcXVlcnkgd2FzIGxhc3Qgc3luY2hyb25pemVkLlxuICAgICAqLyAgICB6aSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGlmIChudWxsID09PSB0LmxpbWl0KSBcbiAgICAgICAgLy8gUXVlcmllcyB3aXRob3V0IGxpbWl0cyBkbyBub3QgbmVlZCB0byBiZSByZWZpbGxlZC5cbiAgICAgICAgcmV0dXJuICExO1xuICAgICAgICBpZiAobi5zaXplICE9PSBlLnNpemUpIFxuICAgICAgICAvLyBUaGUgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgaWYgYSBwcmV2aW91c2x5IG1hdGNoaW5nIGRvY3VtZW50IG5vXG4gICAgICAgIC8vIGxvbmdlciBtYXRjaGVzLlxuICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIC8vIExpbWl0IHF1ZXJpZXMgYXJlIG5vdCBlbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBxdWVyeSBleGVjdXRpb24gaWYgdGhlcmUgaXNcbiAgICAgICAgLy8gYSBwb3RlbnRpYWwgdGhhdCBhbiBvbGRlciBkb2N1bWVudCBmcm9tIGNhY2hlIG5vdyBzb3J0cyBiZWZvcmUgYSBkb2N1bWVudFxuICAgICAgICAvLyB0aGF0IHdhcyBwcmV2aW91c2x5IHBhcnQgb2YgdGhlIGxpbWl0LiBUaGlzLCBob3dldmVyLCBjYW4gb25seSBoYXBwZW4gaWZcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50IGF0IHRoZSBlZGdlIG9mIHRoZSBsaW1pdCBnb2VzIG91dCBvZiBsaW1pdC5cbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCB0aGF0IGlzIG5vdCB0aGUgbGltaXQgYm91bmRhcnkgc29ydHMgZGlmZmVyZW50bHksXG4gICAgICAgIC8vIHRoZSBib3VuZGFyeSBvZiB0aGUgbGltaXQgaXRzZWxmIGRpZCBub3QgY2hhbmdlIGFuZCBkb2N1bWVudHMgZnJvbSBjYWNoZVxuICAgICAgICAvLyB3aWxsIGNvbnRpbnVlIHRvIGJlIFwicmVqZWN0ZWRcIiBieSB0aGlzIGJvdW5kYXJ5LiBUaGVyZWZvcmUsIHdlIGNhbiBpZ25vcmVcbiAgICAgICAgLy8gYW55IG1vZGlmaWNhdGlvbnMgdGhhdCBkb24ndCBhZmZlY3QgdGhlIGxhc3QgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gdC5saW1pdFR5cGUgPyBlLmxhc3QoKSA6IGUuZmlyc3QoKTtcbiAgICAgICAgcmV0dXJuICEhaSAmJiAoaS5oYXNQZW5kaW5nV3JpdGVzIHx8IGkudmVyc2lvbi5jb21wYXJlVG8ocykgPiAwKTtcbiAgICB9XG4gICAgUWkodCwgZSkge1xuICAgICAgICByZXR1cm4gQygpIDw9IExvZ0xldmVsLkRFQlVHICYmIE4oXCJRdWVyeUVuZ2luZVwiLCBcIlVzaW5nIGZ1bGwgY29sbGVjdGlvbiBzY2FuIHRvIGV4ZWN1dGUgcXVlcnk6XCIsIGVzKGUpKSwgXG4gICAgICAgIHRoaXMuVWkuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBJdC5taW4oKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIHRoZSByZXN1bHRzIGZyb20gYW4gaW5kZXhlZCBleGVjdXRpb24gd2l0aCB0aGUgcmVtYWluaW5nIGRvY3VtZW50c1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gaW5kZXhlZC5cbiAgICAgKi8gICAgV2kodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBSZXRyaWV2ZSBhbGwgcmVzdWx0cyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSB1cGRhdGVkIHNpbmNlIHRoZSBvZmZzZXQuXG4gICAgICAgIHJldHVybiB0aGlzLlVpLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgbiwgcykubmV4dCgodCA9PiAoXG4gICAgICAgIC8vIE1lcmdlIHdpdGggZXhpc3RpbmcgcmVzdWx0c1xuICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdCA9IHQuaW5zZXJ0KGUua2V5LCBlKTtcbiAgICAgICAgfSkpLCB0KSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1wbGVtZW50cyBgTG9jYWxTdG9yZWAgaW50ZXJmYWNlLlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovXG5jbGFzcyBudSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xuICAgIHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIHRoaXMuSGkgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXRJRCB0byBkYXRhIGFib3V0IGl0cyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogV2UgYXJlIHVzaW5nIGFuIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZSBvbiBXZWIgdG8gbWFrZSByZS1ydW5zXG4gICAgICAgICAqIG9mIGBhcHBseVJlbW90ZUV2ZW50KClgIGlkZW1wb3RlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkppID0gbmV3IHBlKGV0KSwgXG4gICAgICAgIC8qKiBNYXBzIGEgdGFyZ2V0IHRvIGl0cyB0YXJnZXRJRC4gKi9cbiAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBFdmFsdWF0ZSBpZiBUYXJnZXRJZCBjYW4gYmUgcGFydCBvZiBUYXJnZXQuXG4gICAgICAgIHRoaXMuWWkgPSBuZXcgb3MoKHQgPT4gJG4odCkpLCBPbiksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBwZXIgY29sbGVjdGlvbiBncm91cCBpbmRleCBvZiB0aGUgbGFzdCByZWFkIHRpbWUgcHJvY2Vzc2VkIGJ5XG4gICAgICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlhpID0gbmV3IE1hcCwgdGhpcy5aaSA9IHQuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLCB0aGlzLkJzID0gdC5nZXRUYXJnZXRDYWNoZSgpLCBcbiAgICAgICAgdGhpcy5xcyA9IHQuZ2V0QnVuZGxlQ2FjaGUoKSwgdGhpcy50cihuKTtcbiAgICB9XG4gICAgdHIodCkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTogQWRkIHNwZWMgdGVzdHMgdGhhdCB0ZXN0IHRoZXNlIGNvbXBvbmVudHMgY2hhbmdlIGFmdGVyIGFcbiAgICAgICAgLy8gdXNlciBjaGFuZ2VcbiAgICAgICAgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUodCksIHRoaXMuaW5kZXhNYW5hZ2VyID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIodCksIFxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUodCwgdGhpcy5pbmRleE1hbmFnZXIpLCB0aGlzLmxvY2FsRG9jdW1lbnRzID0gbmV3IGtvKHRoaXMuWmksIHRoaXMubXV0YXRpb25RdWV1ZSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSwgdGhpcy5pbmRleE1hbmFnZXIpLCBcbiAgICAgICAgdGhpcy5aaS5zZXRJbmRleE1hbmFnZXIodGhpcy5pbmRleE1hbmFnZXIpLCB0aGlzLkhpLmluaXRpYWxpemUodGhpcy5sb2NhbERvY3VtZW50cywgdGhpcy5pbmRleE1hbmFnZXIpO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4gdC5jb2xsZWN0KGUsIHRoaXMuSmkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzdShcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbnQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gbmV3IG51KHQsIGUsIG4sIHMpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIGl1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkhhbmRsZSB1c2VyIGNoYW5nZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHtcbiAgICAgICAgLy8gU3dhcCBvdXQgdGhlIG11dGF0aW9uIHF1ZXVlLCBncmFiYmluZyB0aGUgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzXG4gICAgICAgIC8vIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gbi5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KS5uZXh0KChpID0+IChzID0gaSwgbi50cihlKSwgbi5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBbXSwgciA9IFtdO1xuICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxuICAgICAgICAgICAgbGV0IG8gPSBncygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHMpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgIHIucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxuICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModCwgbykubmV4dCgodCA9PiAoe1xuICAgICAgICAgICAgICAgIGVyOiB0LFxuICAgICAgICAgICAgICAgIHJlbW92ZWRCYXRjaElkczogaSxcbiAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzOiByXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSk7XG4gICAgfSkpO1xufVxuXG4vKiBBY2NlcHRzIGxvY2FsbHkgZ2VuZXJhdGVkIE11dGF0aW9ucyBhbmQgY29tbWl0IHRoZW0gdG8gc3RvcmFnZS4gKi9cbi8qKlxuICogQWNrbm93bGVkZ2VzIHRoZSBnaXZlbiBiYXRjaC5cbiAqXG4gKiBPbiB0aGUgaGFwcHkgcGF0aCB3aGVuIGEgYmF0Y2ggaXMgYWNrbm93bGVkZ2VkLCB0aGUgbG9jYWwgc3RvcmUgd2lsbFxuICpcbiAqICArIHJlbW92ZSB0aGUgYmF0Y2ggZnJvbSB0aGUgbXV0YXRpb24gcXVldWU7XG4gKiAgKyBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlO1xuICogICsgcmVjYWxjdWxhdGUgdGhlIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBpbXBsaWVkIGJ5IHRob3NlIGNoYW5nZXMgKHRoZXJlXG4gKiAgICBtYXkgYmUgbXV0YXRpb25zIGluIHRoZSBxdWV1ZSB0aGF0IGFmZmVjdCB0aGUgZG9jdW1lbnRzIGJ1dCBoYXZlbid0IGJlZW5cbiAqICAgIGFja25vd2xlZGdlZCB5ZXQpOyBhbmRcbiAqICArIGdpdmUgdGhlIGNoYW5nZWQgZG9jdW1lbnRzIGJhY2sgdGhlIHN5bmMgZW5naW5lXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyAobW9kaWZpZWQpIGRvY3VtZW50cy5cbiAqL1xuZnVuY3Rpb24gcnUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWNrbm93bGVkZ2UgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmJhdGNoLmtleXMoKSwgaSA9IG4uWmkubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uYmF0Y2gsIHIgPSBpLmtleXMoKTtcbiAgICAgICAgICAgIGxldCBvID0gUnQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgbyA9IG8ubmV4dCgoKCkgPT4gcy5nZXRFbnRyeShlLCB0KSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gbi5kb2NWZXJzaW9ucy5nZXQodCk7XG4gICAgICAgICAgICAgICAgICAgIEYobnVsbCAhPT0gciksIGUudmVyc2lvbi5jb21wYXJlVG8ocikgPCAwICYmIChpLmFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCBuKSwgZS5pc1ZhbGlkRG9jdW1lbnQoKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICBlLnNldFJlYWRUaW1lKG4uY29tbWl0VmVyc2lvbiksIHMuYWRkRW50cnkoZSkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIG8ubmV4dCgoKCkgPT4gdC5tdXRhdGlvblF1ZXVlLnJlbW92ZU11dGF0aW9uQmF0Y2goZSwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuLCB0LCBlLCBpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5tdXRhdGlvblF1ZXVlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpKSkubmV4dCgoKCkgPT4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5yZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQodCwgcywgZS5iYXRjaC5iYXRjaElkKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXModCwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgbGV0IGUgPSBncygpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lm11dGF0aW9uUmVzdWx0cy5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgICAgIHQubXV0YXRpb25SZXN1bHRzW25dLnRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoID4gMCAmJiAoZSA9IGUuYWRkKHQuYmF0Y2gubXV0YXRpb25zW25dLmtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIG11dGF0aW9ucyBmcm9tIHRoZSBNdXRhdGlvblF1ZXVlIGZvciB0aGUgc3BlY2lmaWVkIGJhdGNoO1xuICogTG9jYWxEb2N1bWVudHMgd2lsbCBiZSByZWNhbGN1bGF0ZWQuXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyBtb2RpZmllZCBkb2N1bWVudHMuXG4gKi8gKGUpKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHQsIHMpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXG4gKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxuICovXG5mdW5jdGlvbiBvdSh0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuQnMuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gdXUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gZS5zbmFwc2hvdFZlcnNpb247XG4gICAgbGV0IGkgPSBuLkppO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgcmVtb3RlIGV2ZW50XCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gbi5aaS5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlc2V0IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCBpbiBjYXNlIHRoaXMgdHJhbnNhY3Rpb24gZ2V0cyByZS1ydW4uXG4gICAgICAgICAgICAgICAgaSA9IG4uSmk7XG4gICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChyLCB1KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjID0gaS5nZXQodSk7XG4gICAgICAgICAgICBpZiAoIWMpIHJldHVybjtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSByZW1vdGUga2V5cyBpZiB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZS4gVGhpc1xuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0IHdlIGNhbiBwZXJzaXN0IHRoZSB1cGRhdGVkIHRhcmdldCBkYXRhIGFsb25nIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSB1cGRhdGVkIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobi5Ccy5yZW1vdmVNYXRjaGluZ0tleXModCwgci5yZW1vdmVkRG9jdW1lbnRzLCB1KS5uZXh0KCgoKSA9PiBuLkJzLmFkZE1hdGNoaW5nS2V5cyh0LCByLmFkZGVkRG9jdW1lbnRzLCB1KSkpKTtcbiAgICAgICAgICAgIGxldCBhID0gYy53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgbnVsbCAhPT0gZS50YXJnZXRNaXNtYXRjaGVzLmdldCh1KSA/IGEgPSBhLndpdGhSZXN1bWVUb2tlbihWZS5FTVBUWV9CWVRFX1NUUklORywgcnQubWluKCkpLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHJ0Lm1pbigpKSA6IHIucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAoYSA9IGEud2l0aFJlc3VtZVRva2VuKHIucmVzdW1lVG9rZW4sIHMpKSwgXG4gICAgICAgICAgICBpID0gaS5pbnNlcnQodSwgYSksIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXJnZXQgZGF0YSBpZiB0aGVyZSBhcmUgdGFyZ2V0IGNoYW5nZXMgKG9yIGlmXG4gICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG5ld1RhcmdldERhdGEgc2hvdWxkIGJlIHBlcnNpc3RlZCBkdXJpbmcgYW4gdXBkYXRlIG9mXG4gKiBhbiBhY3RpdmUgdGFyZ2V0LiBUYXJnZXREYXRhIHNob3VsZCBhbHdheXMgYmUgcGVyc2lzdGVkIHdoZW4gYSB0YXJnZXQgaXNcbiAqIGJlaW5nIHJlbGVhc2VkIGFuZCBzaG91bGQgbm90IGNhbGwgdGhpcyBmdW5jdGlvbi5cbiAqXG4gKiBXaGlsZSB0aGUgdGFyZ2V0IGlzIGFjdGl2ZSwgVGFyZ2V0RGF0YSB1cGRhdGVzIGNhbiBiZSBvbWl0dGVkIHdoZW4gbm90aGluZ1xuICogYWJvdXQgdGhlIHRhcmdldCBoYXMgY2hhbmdlZCBleGNlcHQgbWV0YWRhdGEgbGlrZSB0aGUgcmVzdW1lIHRva2VuIG9yXG4gKiBzbmFwc2hvdCB2ZXJzaW9uLiBPY2Nhc2lvbmFsbHkgaXQncyB3b3J0aCB0aGUgZXh0cmEgd3JpdGUgdG8gcHJldmVudCB0aGVzZVxuICogdmFsdWVzIGZyb20gZ2V0dGluZyB0b28gc3RhbGUgYWZ0ZXIgYSBjcmFzaCwgYnV0IHRoaXMgZG9lc24ndCBoYXZlIHRvIGJlXG4gKiB0b28gZnJlcXVlbnQuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHQucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgcmVzdW1lIHRva2VuIGNoYW5nZXMgdG8gYmUgYnVmZmVyZWQgaW5kZWZpbml0ZWx5LiBUaGlzXG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGJlIHJlYXNvbmFibHkgdXAtdG8tZGF0ZSBhZnRlciBhIGNyYXNoIGFuZCBhdm9pZHMgbmVlZGluZ1xuICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAvLyB3ZSBtYXkgbm90IGdldCB0aW1lIHRvIGRvIGFueXRoaW5nIGludGVyZXN0aW5nIHdoaWxlIHRoZSBjdXJyZW50IHRhYiBpc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpIC0gdC5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSA+PSAzZTgpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgaWYgdGhlIG9ubHkgdGhpbmcgdGhhdCBoYXMgY2hhbmdlZCBhYm91dCBhIHRhcmdldCBpcyBpdHMgcmVzdW1lXG4gICAgICAgICAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxuICAgICAgICAgICAgICAgIC8vIGluLW1lbW9yeSB2aWV3IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRhcmdldHMgd2hpY2ggaW5jbHVkZXMgdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAvLyByZXN1bWUgdG9rZW4sIHNvIHN0cmVhbSBmYWlsdXJlIG9yIHVzZXIgY2hhbmdlcyB3aWxsIHN0aWxsIHVzZSBhblxuICAgICAgICAgICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5hZGRlZERvY3VtZW50cy5zaXplICsgbi5tb2RpZmllZERvY3VtZW50cy5zaXplICsgbi5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBOb3RpZmllcyBsb2NhbCBzdG9yZSBvZiB0aGUgY2hhbmdlZCB2aWV3cyB0byBsb2NhbGx5IHBpbiBkb2N1bWVudHMuXG4gKi8gKGMsIGEsIHIpICYmIG8ucHVzaChuLkJzLnVwZGF0ZVRhcmdldERhdGEodCwgYSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGxldCB1ID0gY3MoKSwgYyA9IGdzKCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmIChlLmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKChzID0+IHtcbiAgICAgICAgICAgIGUucmVzb2x2ZWRMaW1ib0RvY3VtZW50cy5oYXMocykgJiYgby5wdXNoKG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUudXBkYXRlTGltYm9Eb2N1bWVudCh0LCBzKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEVhY2ggbG9vcCBpdGVyYXRpb24gb25seSBhZmZlY3RzIGl0cyBcIm93blwiIGRvYywgc28gaXQncyBzYWZlIHRvIGdldCBhbGxcbiAgICAgICAgLy8gdGhlIHJlbW90ZSBkb2N1bWVudHMgaW4gYWR2YW5jZSBpbiBhIHNpbmdsZSBjYWxsLlxuICAgICAgICBvLnB1c2goY3UodCwgciwgZS5kb2N1bWVudFVwZGF0ZXMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdSA9IHQubnIsIGMgPSB0LnNyO1xuICAgICAgICB9KSkpLCAhcy5pc0VxdWFsKHJ0Lm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4uQnMuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KS5uZXh0KChlID0+IG4uQnMuc2V0VGFyZ2V0c01ldGFkYXRhKHQsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyLCBzKSkpO1xuICAgICAgICAgICAgby5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSdC53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHIuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKHQsIHUsIGMpKSkubmV4dCgoKCkgPT4gdSkpO1xuICAgIH0pKS50aGVuKCh0ID0+IChuLkppID0gaSwgdCkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cywgYW5kXG4gKiBhbHNvIGEgc2V0IG9mIGRvY3VtZW50cyB3aG9zZSBleGlzdGVuY2Ugc3RhdGUgYXJlIGNoYW5nZWQgYXMgYSByZXN1bHQuXG4gKlxuICogQHBhcmFtIHR4biAtIFRyYW5zYWN0aW9uIHRvIHVzZSB0byByZWFkIGV4aXN0aW5nIGRvY3VtZW50cyBmcm9tIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRCdWZmZXIgLSBEb2N1bWVudCBidWZmZXIgdG8gY29sbGVjdCB0aGUgcmVzdWx0ZWQgY2hhbmdlcyB0byBiZVxuICogICAgICAgIGFwcGxpZWQgdG8gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudHMgLSBEb2N1bWVudHMgdG8gYmUgYXBwbGllZC5cbiAqLyBmdW5jdGlvbiBjdSh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBncygpLCBpID0gZ3MoKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHMgPSBzLmFkZCh0KSkpLCBlLmdldEVudHJpZXModCwgcykubmV4dCgodCA9PiB7XG4gICAgICAgIGxldCBzID0gY3MoKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmdldChuKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHNlZSBpZiB0aGVyZSBpcyBhIGV4aXN0ZW5jZSBzdGF0ZSBjaGFuZ2UgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICByLmlzRm91bmREb2N1bWVudCgpICE9PSBvLmlzRm91bmREb2N1bWVudCgpICYmIChpID0gaS5hZGQobikpLCBcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICByLmlzTm9Eb2N1bWVudCgpICYmIHIudmVyc2lvbi5pc0VxdWFsKHJ0Lm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgZS5yZW1vdmVFbnRyeShuLCByLnJlYWRUaW1lKSwgcyA9IHMuaW5zZXJ0KG4sIHIpKSA6ICFvLmlzVmFsaWREb2N1bWVudCgpIHx8IHIudmVyc2lvbi5jb21wYXJlVG8oby52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gci52ZXJzaW9uLmNvbXBhcmVUbyhvLnZlcnNpb24pICYmIG8uaGFzUGVuZGluZ1dyaXRlcyA/IChlLmFkZEVudHJ5KHIpLCBcbiAgICAgICAgICAgIHMgPSBzLmluc2VydChuLCByKSkgOiBOKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIG8udmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgci52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICBucjogcyxcbiAgICAgICAgICAgIHNyOiBpXG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG11dGF0aW9uIGJhdGNoIGFmdGVyIHRoZSBwYXNzZWQgaW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWVcbiAqIG9yIG51bGwgaWYgZW1wdHkuXG4gKiBAcGFyYW0gYWZ0ZXJCYXRjaElkIC0gSWYgcHJvdmlkZWQsIHRoZSBiYXRjaCB0byBzZWFyY2ggYWZ0ZXIuXG4gKiBAcmV0dXJucyBUaGUgbmV4dCBtdXRhdGlvbiBvciBudWxsIGlmIHRoZXJlIHdhc24ndCBvbmUuXG4gKi9cbmZ1bmN0aW9uIGF1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXh0IG11dGF0aW9uIGJhdGNoXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gKHZvaWQgMCA9PT0gZSAmJiAoZSA9IC0xKSwgXG4gICAgbi5tdXRhdGlvblF1ZXVlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGEgRG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSBvciBudWxsIGlmIG5vdFxuICogZm91bmQgLSB1c2VkIGZvciB0ZXN0aW5nLlxuICovXG4vKipcbiAqIEFzc2lnbnMgdGhlIGdpdmVuIHRhcmdldCBhbiBpbnRlcm5hbCBJRCBzbyB0aGF0IGl0cyByZXN1bHRzIGNhbiBiZSBwaW5uZWQgc29cbiAqIHRoZXkgZG9uJ3QgZ2V0IEdDJ2QuIEEgdGFyZ2V0IG11c3QgYmUgYWxsb2NhdGVkIGluIHRoZSBsb2NhbCBzdG9yZSBiZWZvcmVcbiAqIHRoZSBzdG9yZSBjYW4gYmUgdXNlZCB0byBtYW5hZ2UgaXRzIHZpZXcuXG4gKlxuICogQWxsb2NhdGluZyBhbiBhbHJlYWR5IGFsbG9jYXRlZCBgVGFyZ2V0YCB3aWxsIHJldHVybiB0aGUgZXhpc3RpbmcgYFRhcmdldERhdGFgXG4gKiBmb3IgdGhhdCBgVGFyZ2V0YC5cbiAqL1xuZnVuY3Rpb24gaHUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWxsb2NhdGUgdGFyZ2V0XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHJldHVybiBuLkJzLmdldFRhcmdldERhdGEodCwgZSkubmV4dCgoaSA9PiBpID8gKFxuICAgICAgICAvLyBUaGlzIHRhcmdldCBoYXMgYmVlbiBsaXN0ZW5lZCB0byBwcmV2aW91c2x5LCBzbyByZXVzZSB0aGVcbiAgICAgICAgLy8gcHJldmlvdXMgdGFyZ2V0SUQuXG4gICAgICAgIC8vIFRPRE8obWNnKTogZnJlc2hlbiBsYXN0IGFjY2Vzc2VkIGRhdGU/XG4gICAgICAgIHMgPSBpLCBSdC5yZXNvbHZlKHMpKSA6IG4uQnMuYWxsb2NhdGVUYXJnZXRJZCh0KS5uZXh0KChpID0+IChzID0gbmV3IGNyKGUsIGksIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovICwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBcbiAgICAgICAgbi5Ccy5hZGRUYXJnZXREYXRhKHQsIHMpLm5leHQoKCgpID0+IHMpKSkpKSkpO1xuICAgIH0pKS50aGVuKCh0ID0+IHtcbiAgICAgICAgLy8gSWYgTXVsdGktVGFiIGlzIGVuYWJsZWQsIHRoZSBleGlzdGluZyB0YXJnZXQgZGF0YSBtYXkgYmUgbmV3ZXIgdGhhblxuICAgICAgICAvLyB0aGUgaW4tbWVtb3J5IGRhdGFcbiAgICAgICAgY29uc3QgcyA9IG4uSmkuZ2V0KHQudGFyZ2V0SWQpO1xuICAgICAgICByZXR1cm4gKG51bGwgPT09IHMgfHwgdC5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHMuc25hcHNob3RWZXJzaW9uKSA+IDApICYmIChuLkppID0gbi5KaS5pbnNlcnQodC50YXJnZXRJZCwgdCksIFxuICAgICAgICBuLllpLnNldChlLCB0LnRhcmdldElkKSksIHQ7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgYXMgc2VlbiBieSB0aGUgTG9jYWxTdG9yZSwgaW5jbHVkaW5nIHVwZGF0ZXMgdGhhdCBtYXlcbiAqIGhhdmUgbm90IHlldCBiZWVuIHBlcnNpc3RlZCB0byB0aGUgVGFyZ2V0Q2FjaGUuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4vKipcbiAqIFVucGlucyBhbGwgdGhlIGRvY3VtZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHRhcmdldC4gSWZcbiAqIGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgc2V0IHRvIGZhbHNlIGFuZCBFYWdlciBHQyBlbmFibGVkLCB0aGUgbWV0aG9kXG4gKiBkaXJlY3RseSByZW1vdmVzIHRoZSBhc3NvY2lhdGVkIHRhcmdldCBkYXRhIGZyb20gdGhlIHRhcmdldCBjYWNoZS5cbiAqXG4gKiBSZWxlYXNpbmcgYSBub24tZXhpc3RpbmcgYFRhcmdldGAgaXMgYSBuby1vcC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIG11bHRpLXRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gbHUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpLCBpID0gcy5KaS5nZXQoZSksIHIgPSBuID8gXCJyZWFkd3JpdGVcIiA6IFwicmVhZHdyaXRlLXByaW1hcnlcIjtcbiAgICB0cnkge1xuICAgICAgICBuIHx8IGF3YWl0IHMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWxlYXNlIHRhcmdldFwiLCByLCAodCA9PiBzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVRhcmdldCh0LCBpKSkpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgaWYgKCFEdCh0KSkgdGhyb3cgdDtcbiAgICAgICAgLy8gQWxsIGByZWxlYXNlVGFyZ2V0YCBkb2VzIGlzIHJlY29yZCB0aGUgZmluYWwgbWV0YWRhdGEgc3RhdGUgZm9yIHRoZVxuICAgICAgICAvLyB0YXJnZXQsIGJ1dCB3ZSd2ZSBiZWVuIHJlY29yZGluZyB0aGlzIHBlcmlvZGljYWxseSBkdXJpbmcgdGFyZ2V0XG4gICAgICAgIC8vIGFjdGl2aXR5LiBJZiB3ZSBsb3NlIHRoaXMgd3JpdGUgdGhpcyBjb3VsZCBjYXVzZSBhIHZlcnkgc2xpZ2h0XG4gICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIG9yZGVyIG9mIHRhcmdldCBkZWxldGlvbiBkdXJpbmcgR0MsIGJ1dCB3ZVxuICAgICAgICAvLyBkb24ndCBkZWZpbmUgZXhhY3QgTFJVIHNlbWFudGljcyBzbyB0aGlzIGlzIGFjY2VwdGFibGUuXG4gICAgICAgIE4oXCJMb2NhbFN0b3JlXCIsIGBGYWlsZWQgdG8gdXBkYXRlIHNlcXVlbmNlIG51bWJlcnMgZm9yIHRhcmdldCAke2V9OiAke3R9YCk7XG4gICAgfVxuICAgIHMuSmkgPSBzLkppLnJlbW92ZShlKSwgcy5ZaS5kZWxldGUoaS50YXJnZXQpO1xufVxuXG4vKipcbiAqIFJ1bnMgdGhlIHNwZWNpZmllZCBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyxcbiAqIHBvdGVudGlhbGx5IHRha2luZyBhZHZhbnRhZ2Ugb2YgcXVlcnkgZGF0YSBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgKHN1Y2hcbiAqIGFzIHRoZSBzZXQgb2YgcmVtb3RlIGtleXMpLlxuICpcbiAqIEBwYXJhbSB1c2VQcmV2aW91c1Jlc3VsdHMgLSBXaGV0aGVyIHJlc3VsdHMgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIGNhblxuICogYmUgdXNlZCB0byBvcHRpbWl6ZSB0aGlzIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqLyBmdW5jdGlvbiBmdSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCk7XG4gICAgbGV0IGkgPSBydC5taW4oKSwgciA9IGdzKCk7XG4gICAgcmV0dXJuIHMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJFeGVjdXRlIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gTCh0KSwgaSA9IHMuWWkuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBpID8gUnQucmVzb2x2ZShzLkppLmdldChpKSkgOiBzLkJzLmdldFRhcmdldERhdGEoZSwgbik7XG4gICAgfShzLCB0LCBKbihlKSkubmV4dCgoZSA9PiB7XG4gICAgICAgIGlmIChlKSByZXR1cm4gaSA9IGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgcy5Ccy5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHIgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfSkpLm5leHQoKCgpID0+IHMuSGkuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuID8gaSA6IHJ0Lm1pbigpLCBuID8gciA6IGdzKCkpKSkubmV4dCgodCA9PiAoX3Uocywgc3MoZSksIHQpLCBcbiAgICB7XG4gICAgICAgIGRvY3VtZW50czogdCxcbiAgICAgICAgaXI6IHJcbiAgICB9KSkpKSk7XG59XG5cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBkdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBMKG4uQnMpLCBpID0gbi5KaS5nZXQoZSk7XG4gICAgcmV0dXJuIGkgPyBQcm9taXNlLnJlc29sdmUoaS50YXJnZXQpIDogbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMubGUodCwgZSkubmV4dCgodCA9PiB0ID8gdC50YXJnZXQgOiBudWxsKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cbiAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxuICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgdGhhdCBoYXZlIGNoYW5nZWRcbiAqIHNpbmNlIHRoZSBwcmlvciBjYWxsLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gd3UodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gbi5YaS5nZXQoZSkgfHwgcnQubWluKCk7XG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IG1heGltdW0gcmVhZCB0aW1lIGZvciB0aGUgY29sbGVjdGlvbi4gVGhpcyBzaG91bGQgYWx3YXlzXG4gICAgLy8gZXhpc3QsIGJ1dCB0byByZWR1Y2UgdGhlIGNoYW5jZSBmb3IgcmVncmVzc2lvbnMgd2UgZGVmYXVsdCB0b1xuICAgIC8vIFNuYXBzaG90VmVyc2lvbi5NaW4oKVxuICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBDb25zaWRlciByZW1vdmluZyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlppLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSwgeXQocywgLTEpLCBcbiAgICAvKiBsaW1pdD0gKi8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpKSkudGhlbigodCA9PiAoX3UobiwgZSwgdCksIHQpKSk7XG59XG5cbi8qKiBTZXRzIHRoZSBjb2xsZWN0aW9uIGdyb3VwJ3MgbWF4aW11bSByZWFkIHRpbWUgZnJvbSB0aGUgZ2l2ZW4gZG9jdW1lbnRzLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF91KHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IHQuWGkuZ2V0KGUpIHx8IHJ0Lm1pbigpO1xuICAgIG4uZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgZS5yZWFkVGltZS5jb21wYXJlVG8ocykgPiAwICYmIChzID0gZS5yZWFkVGltZSk7XG4gICAgfSkpLCB0LlhpLnNldChlLCBzKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBtdSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IEwodCk7XG4gICAgbGV0IHIgPSBncygpLCBvID0gY3MoKTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICBjb25zdCBuID0gZS5ycih0Lm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICB0LmRvY3VtZW50ICYmIChyID0gci5hZGQobikpO1xuICAgICAgICBjb25zdCBzID0gZS51cih0KTtcbiAgICAgICAgcy5zZXRSZWFkVGltZShlLmNyKHQubWV0YWRhdGEucmVhZFRpbWUpKSwgbyA9IG8uaW5zZXJ0KG4sIHMpO1xuICAgIH1cbiAgICBjb25zdCB1ID0gaS5aaS5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgIH0pLCBjID0gYXdhaXQgaHUoaSwgZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdCBpcyBPSyB0aGF0IHRoZSBwYXRoIHVzZWQgZm9yIHRoZSBxdWVyeSBpcyBub3QgdmFsaWQsIGJlY2F1c2UgdGhpcyB3aWxsXG4gICAgICAgIC8vIG5vdCBiZSByZWFkIGFuZCBxdWVyaWVkLlxuICAgICAgICByZXR1cm4gSm4oR24odXQuZnJvbVN0cmluZyhgX19idW5kbGVfXy9kb2NzLyR7dH1gKSkpO1xuICAgIH0ocykpO1xuICAgIC8vIEFsbG9jYXRlcyBhIHRhcmdldCB0byBob2xkIGFsbCBkb2N1bWVudCBrZXlzIGZyb20gdGhlIGJ1bmRsZSwgc3VjaCB0aGF0XG4gICAgLy8gdGhleSB3aWxsIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWQgcmlnaHQgYXdheS5cbiAgICAgICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSBidW5kbGUgZG9jdW1lbnRzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IGN1KHQsIHUsIG8pLm5leHQoKGUgPT4gKHUuYXBwbHkodCksIFxuICAgIGUpKSkubmV4dCgoZSA9PiBpLkJzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGMudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkuQnMuYWRkTWF0Y2hpbmdLZXlzKHQsIHIsIGMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyh0LCBlLm5yLCBlLnNyKSkpLm5leHQoKCgpID0+IGUubnIpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBndSh0LCBlLCBuID0gZ3MoKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgcyA9IGF3YWl0IGh1KHQsIEpuKHlyKGUuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gTCh0KTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gTmkoZS5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHMuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyKSA+PSAwKSByZXR1cm4gaS5xcy5zYXZlTmFtZWRRdWVyeSh0LCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gcy53aXRoUmVzdW1lVG9rZW4oVmUuRU1QVFlfQllURV9TVFJJTkcsIHIpO1xuICAgICAgICByZXR1cm4gaS5KaSA9IGkuSmkuaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLkJzLnVwZGF0ZVRhcmdldERhdGEodCwgbykubmV4dCgoKCkgPT4gaS5Ccy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuQnMuYWRkTWF0Y2hpbmdLZXlzKHQsIG4sIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5xcy5zYXZlTmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiB5dSh0LCBlKSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfY2xpZW50c18ke3R9XyR7ZX1gO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgbXV0YXRpb24gc3RhdGUgaXM6XG4vLyAgICAgZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+XG4vLyAgICAgKGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMpXG4vLyBvcjogZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+Xzx1c2VyX3VpZD5cblxuLy8gJ3VzZXJfdWlkJyBpcyBsYXN0IHRvIGF2b2lkIG5lZWRpbmcgdG8gZXNjYXBlICdfJyBjaGFyYWN0ZXJzIHRoYXQgaXQgbWlnaHRcbi8vIGNvbnRhaW4uXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgbXV0YXRpb24gYmF0Y2ggaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gcHUodCwgZSwgbikge1xuICAgIGxldCBzID0gYGZpcmVzdG9yZV9tdXRhdGlvbnNfJHt0fV8ke259YDtcbiAgICByZXR1cm4gZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiAocyArPSBgXyR7ZS51aWR9YCksIHM7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIGEgcXVlcnkgdGFyZ2V0J3MgbWV0YWRhdGEgaXM6XG4vLyAgICAgZmlyZXN0b3JlX3RhcmdldHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPHRhcmdldF9pZD5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBxdWVyeSBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBJdSh0LCBlKSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfdGFyZ2V0c18ke3R9XyR7ZX1gO1xufVxuXG4vLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBzdG9yZXMgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlLiBUaGVcbi8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuLy8gICAgIGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfPHBlcnNpc3RlbmNlX3ByZWZpeD5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgbXV0YXRpb24gYmF0Y2gsIGluY2x1ZGluZyBpdHMgdXNlciBJRCwgYmF0Y2ggSUQgYW5kXG4gKiB3aGV0aGVyIHRoZSBiYXRjaCBpcyAncGVuZGluZycsICdhY2tub3dsZWRnZWQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIFR1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIHRoaXMuYmF0Y2hJZCA9IGUsIHRoaXMuc3RhdGUgPSBuLCB0aGlzLmVycm9yID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgTXV0YXRpb25NZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIGFyKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEpTT04ucGFyc2Uobik7XG4gICAgICAgIGxldCBpLCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgcyAmJiAtMSAhPT0gWyBcInBlbmRpbmdcIiwgXCJhY2tub3dsZWRnZWRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihzLnN0YXRlKSAmJiAodm9pZCAwID09PSBzLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIHMuZXJyb3IpO1xuICAgICAgICByZXR1cm4gciAmJiBzLmVycm9yICYmIChyID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHMuZXJyb3IuY29kZSwgXG4gICAgICAgIHIgJiYgKGkgPSBuZXcgVShzLmVycm9yLmNvZGUsIHMuZXJyb3IubWVzc2FnZSkpKSwgciA/IG5ldyBUdSh0LCBlLCBzLnN0YXRlLCBpKSA6IChrKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBtdXRhdGlvbiBzdGF0ZSBmb3IgSUQgJyR7ZX0nOiAke259YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgaHIoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIHF1ZXJ5IHRhcmdldCwgaW5jbHVkaW5nIGl0cyB0YXJnZXQgSUQgYW5kIHdoZXRoZXIgdGhlXG4gKiB0YXJnZXQgaXMgJ25vdC1jdXJyZW50JywgJ2N1cnJlbnQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIEV1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnN0YXRlID0gZSwgdGhpcy5lcnJvciA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBhcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcywgaSA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgLTEgIT09IFsgXCJub3QtY3VycmVudFwiLCBcImN1cnJlbnRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihuLnN0YXRlKSAmJiAodm9pZCAwID09PSBuLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4uZXJyb3IpO1xuICAgICAgICByZXR1cm4gaSAmJiBuLmVycm9yICYmIChpID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IuY29kZSwgXG4gICAgICAgIGkgJiYgKHMgPSBuZXcgVShuLmVycm9yLmNvZGUsIG4uZXJyb3IubWVzc2FnZSkpKSwgaSA/IG5ldyBFdSh0LCBuLnN0YXRlLCBzKSA6IChrKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSB0YXJnZXQgc3RhdGUgZm9yIElEICcke3R9JzogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIGhyKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKHQuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGltbXV0YWJsZSBDbGllbnRTdGF0ZSBmb3IgYSBjbGllbnQgcmVhZCBmcm9tXG4gKiBXZWJTdG9yYWdlLCBjb250YWluaW5nIHRoZSBsaXN0IG9mIGFjdGl2ZSBxdWVyeSB0YXJnZXRzLlxuICovIGNsYXNzIEF1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFJlbW90ZUNsaWVudFN0YXRlIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgYXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgbGV0IHMgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIG4uYWN0aXZlVGFyZ2V0SWRzIGluc3RhbmNlb2YgQXJyYXksIGkgPSBwcygpO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgcyAmJiB0IDwgbi5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOyArK3QpIHMgPSBMdChuLmFjdGl2ZVRhcmdldElkc1t0XSksIFxuICAgICAgICBpID0gaS5hZGQobi5hY3RpdmVUYXJnZXRJZHNbdF0pO1xuICAgICAgICByZXR1cm4gcyA/IG5ldyBBdSh0LCBpKSA6IChrKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBjbGllbnQgZGF0YSBmb3IgaW5zdGFuY2UgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvbmxpbmUgc3RhdGUgZm9yIGFsbCBjbGllbnRzIHBhcnRpY2lwYXRpbmcgaW5cbiAqIG11bHRpLXRhYi4gVGhlIG9ubGluZSBzdGF0ZSBpcyBvbmx5IHdyaXR0ZW4gdG8gYnkgdGhlIHByaW1hcnkgY2xpZW50LCBhbmRcbiAqIHVzZWQgaW4gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzLlxuICovIGNsYXNzIHZ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLm9ubGluZVN0YXRlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgU2hhcmVkT25saW5lU3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBhcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSAmJiAtMSAhPT0gWyBcIlVua25vd25cIiwgXCJPbmxpbmVcIiwgXCJPZmZsaW5lXCIgXS5pbmRleE9mKGUub25saW5lU3RhdGUpICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuY2xpZW50SWQgPyBuZXcgdnUoZS5jbGllbnRJZCwgZS5vbmxpbmVTdGF0ZSkgOiAoayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiAke3R9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXG4gKiByZW1vdmVkLlxuICpcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuY2xhc3MgUnUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHBzKCk7XG4gICAgfVxuICAgIGxyKHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5hZGQodCk7XG4gICAgfVxuICAgIGRyKHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5kZWxldGUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgZW50cnkgaW50byBhIEpTT04tZW5jb2RlZCBmb3JtYXQgd2UgY2FuIHVzZSBmb3IgV2ViU3RvcmFnZS5cbiAgICAgKiBEb2VzIG5vdCBlbmNvZGUgYGNsaWVudElkYCBhcyBpdCBpcyBwYXJ0IG9mIHRoZSBrZXkgaW4gV2ViU3RvcmFnZS5cbiAgICAgKi8gICAgaHIoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHM6IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIHVzZXMgV2ViU3RvcmFnZSAod2luZG93LmxvY2FsU3RvcmFnZSkgYXMgdGhlXG4gKiBiYWNraW5nIHN0b3JlIGZvciB0aGUgU2hhcmVkQ2xpZW50U3RhdGUuIEl0IGtlZXBzIHRyYWNrIG9mIGFsbCBhY3RpdmVcbiAqIGNsaWVudHMgYW5kIHN1cHBvcnRzIG1vZGlmaWNhdGlvbnMgb2YgdGhlIGxvY2FsIGNsaWVudCdzIGRhdGEuXG4gKi8gY2xhc3MgUHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB0LCB0aGlzLmlpID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMud3IgPSBzLCB0aGlzLnN5bmNFbmdpbmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGwsIHRoaXMuX3IgPSB0aGlzLm1yLmJpbmQodGhpcyksIFxuICAgICAgICB0aGlzLmdyID0gbmV3IHBlKGV0KSwgdGhpcy5zdGFydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FwdHVyZXMgV2ViU3RvcmFnZSBldmVudHMgdGhhdCBvY2N1ciBiZWZvcmUgYHN0YXJ0KClgIGlzIGNhbGxlZC4gVGhlc2VcbiAgICAgICAgICogZXZlbnRzIGFyZSByZXBsYXllZCBvbmNlIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIGlzIHN0YXJ0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnlyID0gW107XG4gICAgICAgIC8vIEVzY2FwZSB0aGUgc3BlY2lhbCBjaGFyYWN0ZXJzIG1lbnRpb25lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnNcbiAgICAgICAgY29uc3QgciA9IG4ucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UsIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLnByID0geXUodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy53ciksIFxuICAgICAgICB0aGlzLklyID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIGN1cnJlbnQgc2VxdWVuY2UgbnVtYmVyLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLmdyID0gdGhpcy5nci5pbnNlcnQodGhpcy53ciwgbmV3IFJ1KSwgdGhpcy5UciA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfY2xpZW50c18ke3J9XyhbXl9dKikkYCksIFxuICAgICAgICB0aGlzLkVyID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9tdXRhdGlvbnNfJHtyfV8oXFxcXGQrKSg/Ol8oLiopKT8kYCksIHRoaXMuQXIgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX3RhcmdldHNfJHtyfV8oXFxcXGQrKSRgKSwgXG4gICAgICAgIHRoaXMudnIgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfb25saW5lX3N0YXRlXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHBsYXlzIGFzIGEgZXZlbnQgdG8gaW5kaWNhdGUgdGhlIHJlbW90ZSBkb2N1bWVudHNcbiAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkIGR1ZSB0byBzb21lIHNlY29uZGFyeSB0YWJzIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICAgIC8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuICAgICAgICAvLyAgICAgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfdjJfPHBlcnNpc3RlbmNlS2V5PlxuICAgICAgICAvLyBUaGUgdmVyc2lvbiBlbmRpbmcgd2l0aCBcInYyXCIgc3RvcmVzIHRoZSBsaXN0IG9mIG1vZGlmaWVkIGNvbGxlY3Rpb24gZ3JvdXBzLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMuUnIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIGtleSBwcmVmaXggZm9yIHRoZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGFsbG9jYXRlZC4gVGhlIGtleVxuICAgICAgICAvLyBsb29rcyBsaWtlICdmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Jy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCBcbiAgICAgICAgLy8gUmF0aGVyIHRoYW4gYWRkaW5nIHRoZSBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBzdGFydCgpLCB3ZSBhZGQgdGhlXG4gICAgICAgIC8vIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIGluaXRpYWxpemF0aW9uLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBjb2xsZWN0XG4gICAgICAgIC8vIGV2ZW50cyBiZWZvcmUgb3RoZXIgY29tcG9uZW50cyBwb3B1bGF0ZSB0aGVpciBpbml0aWFsIHN0YXRlIChkdXJpbmcgdGhlaXJcbiAgICAgICAgLy8gcmVzcGVjdGl2ZSBzdGFydCgpIGNhbGxzKS4gT3RoZXJ3aXNlLCB3ZSBtaWdodCBmb3IgZXhhbXBsZSBtaXNzIGFcbiAgICAgICAgLy8gbXV0YXRpb24gdGhhdCBpcyBhZGRlZCBhZnRlciBMb2NhbFN0b3JlJ3Mgc3RhcnQoKSBwcm9jZXNzZWQgdGhlIGV4aXN0aW5nXG4gICAgICAgIC8vIG11dGF0aW9ucyBidXQgYmVmb3JlIHdlIG9ic2VydmUgV2ViU3RvcmFnZSBldmVudHMuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuX3IpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgV2ViU3RvcmFnZSBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBEKHQpIHtcbiAgICAgICAgcmV0dXJuICEoIXQgfHwgIXQubG9jYWxTdG9yYWdlKTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNsaWVudHMgdG8gYmFja2ZpbGwgdGhlIGRhdGEgaW5cbiAgICAgICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnN5bmNFbmdpbmUuJGkoKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB0aGlzLndyKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEl0ZW0oeXUodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gQXUuYXIoZSwgdCk7XG4gICAgICAgICAgICAgICAgbiAmJiAodGhpcy5nciA9IHRoaXMuZ3IuaW5zZXJ0KG4uY2xpZW50SWQsIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLlByKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIG9ubGluZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgaGFuZGxlclxuICAgICAgICAvLyBpZiBhcHBsaWNhYmxlLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy52cik7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5icihlKTtcbiAgICAgICAgICAgIHQgJiYgdGhpcy5Wcih0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy55cikgdGhpcy5tcih0KTtcbiAgICAgICAgdGhpcy55ciA9IFtdLCBcbiAgICAgICAgLy8gUmVnaXN0ZXIgYSB3aW5kb3cgdW5sb2FkIGhvb2sgdG8gcmVtb3ZlIHRoZSBjbGllbnQgbWV0YWRhdGEgZW50cnkgZnJvbVxuICAgICAgICAvLyBXZWJTdG9yYWdlIGV2ZW4gaWYgYHNodXRkb3duKClgIHdhcyBub3QgY2FsbGVkLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpLCB0aGlzLnN0YXJ0ZWQgPSAhMDtcbiAgICB9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLklyLCBKU09OLnN0cmluZ2lmeSh0KSk7XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuU3IodGhpcy5ncik7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5nci5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpICYmIChlID0gITApO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIHRoaXMuRHIodCwgXCJwZW5kaW5nXCIpO1xuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5Ecih0LCBlLCBuKSwgXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcbiAgICAgICAgLy8gYWNjZXNzIHRoZSBtdXRhdGlvbidzIG1ldGFkYXRhIGVudHJ5LiBTaW5jZSBXZWJTdG9yYWdlIHJlcGxheXMgZXZlbnRzXG4gICAgICAgIC8vIGluIG9yZGVyLCBpdCBpcyBzYWZlIHRvIGRlbGV0ZSB0aGUgZW50cnkgcmlnaHQgYWZ0ZXIgdXBkYXRpbmcgaXQuXG4gICAgICAgIHRoaXMuQ3IodCk7XG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9IFwibm90LWN1cnJlbnRcIjtcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShJdSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBFdS5hcih0LCBuKTtcbiAgICAgICAgICAgICAgICBzICYmIChlID0gcy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuTnIubHIodCksIHRoaXMuUHIoKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuTnIuZHIodCksIHRoaXMuUHIoKTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTnIuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKEl1KHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMua3IodCwgZSwgbik7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5Dcih0KTtcbiAgICAgICAgfSkpLCB0aGlzLmN1cnJlbnRVc2VyID0gdCwgbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkUGVuZGluZ011dGF0aW9uKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5Ncih0KTtcbiAgICB9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKHQpIHtcbiAgICAgICAgdGhpcy4kcih0KTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuc3RhcnRlZCAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5fciksIHRoaXMucmVtb3ZlSXRlbSh0aGlzLnByKSwgXG4gICAgICAgIHRoaXMuc3RhcnRlZCA9ICExKTtcbiAgICB9XG4gICAgZ2V0SXRlbSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0KTtcbiAgICAgICAgcmV0dXJuIE4oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFQURcIiwgdCwgZSksIGU7XG4gICAgfVxuICAgIHNldEl0ZW0odCwgZSkge1xuICAgICAgICBOKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJTRVRcIiwgdCwgZSksIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVJdGVtKHQpIHtcbiAgICAgICAgTihcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiUkVNT1ZFXCIsIHQpLCB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbSh0KTtcbiAgICB9XG4gICAgbXIodCkge1xuICAgICAgICAvLyBOb3RlOiBUaGUgZnVuY3Rpb24gaXMgdHlwZWQgdG8gdGFrZSBFdmVudCB0byBiZSBpbnRlcmZhY2UtY29tcGF0aWJsZSB3aXRoXG4gICAgICAgIC8vIGBXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcmAuXG4gICAgICAgIGNvbnN0IGUgPSB0O1xuICAgICAgICBpZiAoZS5zdG9yYWdlQXJlYSA9PT0gdGhpcy5zdG9yYWdlKSB7XG4gICAgICAgICAgICBpZiAoTihcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRVZFTlRcIiwgZS5rZXksIGUubmV3VmFsdWUpLCBlLmtleSA9PT0gdGhpcy5wcikgcmV0dXJuIHZvaWQgayhcIlJlY2VpdmVkIFdlYlN0b3JhZ2Ugbm90aWZpY2F0aW9uIGZvciBsb2NhbCBjaGFuZ2UuIEFub3RoZXIgY2xpZW50IG1pZ2h0IGhhdmUgZ2FyYmFnZS1jb2xsZWN0ZWQgb3VyIHN0YXRlXCIpO1xuICAgICAgICAgICAgdGhpcy5paS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5rZXkpIGlmICh0aGlzLlRyLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuT3IoZS5rZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkZyKHQsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkJyKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuRnIodC5jbGllbnRJZCwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5Fci50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5McihlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLnFyKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuQXIudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuVXIoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5Lcih0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy52cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5icihlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuVnIodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuSXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSBPdC5jdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0KSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRihcIm51bWJlclwiID09IHR5cGVvZiBuKSwgZSA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlXCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqLyAoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ICE9PSBPdC5jdCAmJiB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcih0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5Scikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuR3IoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgodCA9PiB0aGlzLnN5bmNFbmdpbmUuUXIodCkpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy55ci5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBOcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3IuZ2V0KHRoaXMud3IpO1xuICAgIH1cbiAgICBQcigpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMucHIsIHRoaXMuTnIuaHIoKSk7XG4gICAgfVxuICAgIERyKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBUdSh0aGlzLmN1cnJlbnRVc2VyLCB0LCBlLCBuKSwgaSA9IHB1KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIHQpO1xuICAgICAgICB0aGlzLnNldEl0ZW0oaSwgcy5ocigpKTtcbiAgICB9XG4gICAgQ3IodCkge1xuICAgICAgICBjb25zdCBlID0gcHUodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShlKTtcbiAgICB9XG4gICAgTXIodCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMud3IsXG4gICAgICAgICAgICBvbmxpbmVTdGF0ZTogdFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnZyLCBKU09OLnN0cmluZ2lmeShlKSk7XG4gICAgfVxuICAgIGtyKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEl1KHRoaXMucGVyc2lzdGVuY2VLZXksIHQpLCBpID0gbmV3IEV1KHQsIGUsIG4pO1xuICAgICAgICB0aGlzLnNldEl0ZW0ocywgaS5ocigpKTtcbiAgICB9XG4gICAgJHIodCkge1xuICAgICAgICBjb25zdCBlID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0KSk7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLlJyLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGtleSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zIG51bGwgaWYgdGhlIGtleSBkb2VzIG5vdFxuICAgICAqIG1hdGNoIHRoZSBleHBlY3RlZCBrZXkgZm9ybWF0LlxuICAgICAqLyAgICBPcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlRyLmV4ZWModCk7XG4gICAgICAgIHJldHVybiBlID8gZVsxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWUgY291bGQgbm90XG4gICAgICogYmUgcGFyc2VkLlxuICAgICAqLyAgICBCcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLk9yKHQpO1xuICAgICAgICByZXR1cm4gQXUuYXIobiwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIG11dGF0aW9uIGJhdGNoIHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIExyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuRXIuZXhlYyh0KSwgcyA9IE51bWJlcihuWzFdKSwgaSA9IHZvaWQgMCAhPT0gblsyXSA/IG5bMl0gOiBudWxsO1xuICAgICAgICByZXR1cm4gVHUuYXIobmV3IFYoaSksIHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBxdWVyeSB0YXJnZXQgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBVcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkFyLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSk7XG4gICAgICAgIHJldHVybiBFdS5hcihzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGFuIG9ubGluZSBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIGJyKHQpIHtcbiAgICAgICAgcmV0dXJuIHZ1LmFyKHQpO1xuICAgIH1cbiAgICBHcih0KSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHQpO1xuICAgIH1cbiAgICBhc3luYyBxcih0KSB7XG4gICAgICAgIGlmICh0LnVzZXIudWlkID09PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5qcih0LmJhdGNoSWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgICAgICBOKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYElnbm9yaW5nIG11dGF0aW9uIGZvciBub24tYWN0aXZlIHVzZXIgJHt0LnVzZXIudWlkfWApO1xuICAgIH1cbiAgICBLcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuenIodC50YXJnZXRJZCwgdC5zdGF0ZSwgdC5lcnJvcik7XG4gICAgfVxuICAgIEZyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyB0aGlzLmdyLmluc2VydCh0LCBlKSA6IHRoaXMuZ3IucmVtb3ZlKHQpLCBzID0gdGhpcy5Tcih0aGlzLmdyKSwgaSA9IHRoaXMuU3IobiksIHIgPSBbXSwgbyA9IFtdO1xuICAgICAgICByZXR1cm4gaS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHMuaGFzKHQpIHx8IHIucHVzaCh0KTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5oYXModCkgfHwgby5wdXNoKHQpO1xuICAgICAgICB9KSksIHRoaXMuc3luY0VuZ2luZS5XcihyLCBvKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdyID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBWcih0KSB7XG4gICAgICAgIC8vIFdlIGNoZWNrIHdoZXRoZXIgdGhlIGNsaWVudCB0aGF0IHdyb3RlIHRoaXMgb25saW5lIHN0YXRlIGlzIHN0aWxsIGFjdGl2ZVxuICAgICAgICAvLyBieSBjb21wYXJpbmcgaXRzIGNsaWVudCBJRCB0byB0aGUgbGlzdCBvZiBjbGllbnRzIGtlcHQgYWN0aXZlIGluXG4gICAgICAgIC8vIEluZGV4ZWREYi4gSWYgYSBjbGllbnQgZG9lcyBub3QgdXBkYXRlIHRoZWlyIEluZGV4ZWREYiBjbGllbnQgc3RhdGVcbiAgICAgICAgLy8gd2l0aGluIDUgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgd2UgZG9uJ3QgZW1pdCBhbiBvbmxpbmVcbiAgICAgICAgLy8gc3RhdGUgZXZlbnQuXG4gICAgICAgIHRoaXMuZ3IuZ2V0KHQuY2xpZW50SWQpICYmIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQub25saW5lU3RhdGUpO1xuICAgIH1cbiAgICBTcih0KSB7XG4gICAgICAgIGxldCBlID0gcHMoKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUgPSBlLnVuaW9uV2l0aChuLmFjdGl2ZVRhcmdldElkcyk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG59XG5cbmNsYXNzIGJ1IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5IciA9IG5ldyBSdSwgdGhpcy5KciA9IHt9LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhyLmxyKHQpLCB0aGlzLkpyW3RdIHx8IFwibm90LWN1cnJlbnRcIjtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuSnJbdF0gPSBlO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5Ici5kcih0KTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHIuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuSnJbdF07XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHIuYWN0aXZlVGFyZ2V0SWRzO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHIuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhyID0gbmV3IFJ1LCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7fVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCh0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgVnUge1xuICAgIFlyKHQpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIFN1IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5YciA9ICgpID0+IHRoaXMuWnIoKSwgdGhpcy5lbyA9ICgpID0+IHRoaXMubm8oKSwgdGhpcy5zbyA9IFtdLCB0aGlzLmlvKCk7XG4gICAgfVxuICAgIFlyKHQpIHtcbiAgICAgICAgdGhpcy5zby5wdXNoKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5YciksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLmVvKTtcbiAgICB9XG4gICAgaW8oKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuWHIpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5lbyk7XG4gICAgfVxuICAgIFpyKCkge1xuICAgICAgICBOKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuc28pIHQoMCAvKiBOZXR3b3JrU3RhdHVzLkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIG5vKCkge1xuICAgICAgICBOKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IFVOQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5zbykgdCgxIC8qIE5ldHdvcmtTdGF0dXMuVU5BVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICAvLyBUT0RPKGNoZW5icmlhbik6IENvbnNpZGVyIHBhc3NpbmcgaW4gd2luZG93IGVpdGhlciBpbnRvIHRoaXMgY29tcG9uZW50IG9yXG4gICAgLy8gaGVyZSBmb3IgdGVzdGluZyB2aWEgRmFrZVdpbmRvdy5cbiAgICAvKiogQ2hlY2tzIHRoYXQgYWxsIHVzZWQgYXR0cmlidXRlcyBvZiB3aW5kb3cgYXJlIGF2YWlsYWJsZS4gKi9cbiAgICBzdGF0aWMgRCgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgbW9zdCByZWNlbnQgaW52b2NhdGlvbiBvZlxuICogYGdlbmVyYXRlVW5pcXVlRGVidWdJZCgpYCwgb3IgbnVsbCBpZiBpdCBoYXMgbmV2ZXIgYmVlbiBpbnZva2VkLlxuICovIGxldCBEdSA9IG51bGw7XG5cbi8qKlxuICogR2VuZXJhdGVzIGFuZCByZXR1cm5zIGFuIGluaXRpYWwgdmFsdWUgZm9yIGBsYXN0VW5pcXVlRGVidWdJZGAuXG4gKlxuICogVGhlIHJldHVybmVkIHZhbHVlIGlzIHJhbmRvbWx5IHNlbGVjdGVkIGZyb20gYSByYW5nZSBvZiBpbnRlZ2VycyB0aGF0IGFyZVxuICogcmVwcmVzZW50ZWQgYXMgOCBoZXhhZGVjaW1hbCBkaWdpdHMuIFRoaXMgbWVhbnMgdGhhdCAod2l0aGluIHJlYXNvbikgYW55XG4gKiBudW1iZXJzIGdlbmVyYXRlZCBieSBpbmNyZW1lbnRpbmcgdGhlIHJldHVybmVkIG51bWJlciBieSAxIHdpbGwgYWxzbyBiZVxuICogcmVwcmVzZW50ZWQgYnkgOCBoZXhhZGVjaW1hbCBkaWdpdHMuIFRoaXMgbGVhZHMgdG8gYWxsIFwiSURzXCIgaGF2aW5nIHRoZSBzYW1lXG4gKiBsZW5ndGggd2hlbiBjb252ZXJ0ZWQgdG8gYSBoZXhhZGVjaW1hbCBzdHJpbmcsIG1ha2luZyByZWFkaW5nIGxvZ3MgY29udGFpbmluZ1xuICogdGhlc2UgSURzIGVhc2llciB0byBmb2xsb3cuIEFuZCBzaW5jZSB0aGUgcmV0dXJuIHZhbHVlIGlzIHJhbmRvbWx5IHNlbGVjdGVkXG4gKiBpdCB3aWxsIGhlbHAgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIGxvZ3MgZnJvbSBkaWZmZXJlbnQgZXhlY3V0aW9ucy5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYSB1bmlxdWUgSUQgYXMgYSBoZXhhZGVjaW1hbCBzdHJpbmcuXG4gKlxuICogVGhlIHJldHVybmVkIElEIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gZGVidWcgbG9nZ2luZyBtZXNzYWdlcyB0byBoZWxwXG4gKiBjb3JyZWxhdGUgbG9nIG1lc3NhZ2VzIHRoYXQgbWF5IGJlIHNwYXRpYWxseSBzZXBhcmF0ZWQgaW4gdGhlIGxvZ3MsIGJ1dFxuICogbG9naWNhbGx5IHJlbGF0ZWQuIEZvciBleGFtcGxlLCBhIG5ldHdvcmsgY29ubmVjdGlvbiBjb3VsZCBpbmNsdWRlIHRoZSBzYW1lXG4gKiBcImRlYnVnIElEXCIgc3RyaW5nIGluIGFsbCBvZiBpdHMgbG9nIG1lc3NhZ2VzIHRvIGhlbHAgdHJhY2UgYSBzcGVjaWZpY1xuICogY29ubmVjdGlvbiBvdmVyIHRpbWUuXG4gKlxuICogQHJldHVybiB0aGUgMTAtY2hhcmFjdGVyIGdlbmVyYXRlZCBJRCAoZS5nLiBcIjB4YTFiMmMzZDRcIikuXG4gKi9cbmZ1bmN0aW9uIEN1KCkge1xuICAgIHJldHVybiBudWxsID09PSBEdSA/IER1ID0gMjY4NDM1NDU2ICsgTWF0aC5yb3VuZCgyMTQ3NDgzNjQ4ICogTWF0aC5yYW5kb20oKSkgOiBEdSsrLCBcbiAgICBcIjB4XCIgKyBEdS50b1N0cmluZygxNik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHh1ID0ge1xuICAgIEJhdGNoR2V0RG9jdW1lbnRzOiBcImJhdGNoR2V0XCIsXG4gICAgQ29tbWl0OiBcImNvbW1pdFwiLFxuICAgIFJ1blF1ZXJ5OiBcInJ1blF1ZXJ5XCIsXG4gICAgUnVuQWdncmVnYXRpb25RdWVyeTogXCJydW5BZ2dyZWdhdGlvblF1ZXJ5XCJcbn07XG5cbi8qKlxuICogTWFwcyBSUEMgbmFtZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgUkVTVCBlbmRwb2ludCBuYW1lLlxuICpcbiAqIFdlIHVzZSBhcnJheSBub3RhdGlvbiB0byBhdm9pZCBtYW5nbGluZy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzaW1wbGUgaGVscGVyIGNsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgU3RyZWFtIGludGVyZmFjZSB0b1xuICogYnJpZGdlIHRvIG90aGVyIGltcGxlbWVudGF0aW9ucyB0aGF0IGFyZSBzdHJlYW1zIGJ1dCBkbyBub3QgaW1wbGVtZW50IHRoZVxuICogaW50ZXJmYWNlLiBUaGUgc3RyZWFtIGNhbGxiYWNrcyBhcmUgaW52b2tlZCB3aXRoIHRoZSBjYWxsT24uLi4gbWV0aG9kcy5cbiAqL1xuY2xhc3MgTnUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ybyA9IHQucm8sIHRoaXMub28gPSB0Lm9vO1xuICAgIH1cbiAgICB1byh0KSB7XG4gICAgICAgIHRoaXMuY28gPSB0O1xuICAgIH1cbiAgICBhbyh0KSB7XG4gICAgICAgIHRoaXMuaG8gPSB0O1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICB0aGlzLmxvID0gdDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMub28oKTtcbiAgICB9XG4gICAgc2VuZCh0KSB7XG4gICAgICAgIHRoaXMucm8odCk7XG4gICAgfVxuICAgIGZvKCkge1xuICAgICAgICB0aGlzLmNvKCk7XG4gICAgfVxuICAgIHdvKHQpIHtcbiAgICAgICAgdGhpcy5obyh0KTtcbiAgICB9XG4gICAgX28odCkge1xuICAgICAgICB0aGlzLmxvKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3Qga3UgPSBcIldlYkNoYW5uZWxDb25uZWN0aW9uXCI7XG5cbmNsYXNzIE11IGV4dGVuZHMgXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBSZXN0LWJhc2VkIGNvbm5lY3Rpb25zIHRvIHRoZSBiYWNrZW5kIChXZWJDaGFubmVsIGFuZFxuICogSFRUUCkuXG4gKi9cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gdC5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBlID0gdC5zc2wgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcbiAgICAgICAgdGhpcy5tbyA9IGUgKyBcIjovL1wiICsgdC5ob3N0LCB0aGlzLnlvID0gXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgKyBcIi9kb2N1bWVudHNcIjtcbiAgICB9XG4gICAgZ2V0IHBvKCkge1xuICAgICAgICAvLyBCb3RoIGBpbnZva2VSUEMoKWAgYW5kIGBpbnZva2VTdHJlYW1pbmdSUEMoKWAgdXNlIHRoZWlyIGBwYXRoYCBhcmd1bWVudHMgdG8gZGV0ZXJtaW5lXG4gICAgICAgIC8vIHdoZXJlIHRvIHJ1biB0aGUgcXVlcnksIGFuZCBleHBlY3QgdGhlIGByZXF1ZXN0YCB0byBOT1Qgc3BlY2lmeSB0aGUgXCJwYXRoXCIuXG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgSW8odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gQ3UoKSwgbyA9IHRoaXMuVG8odCwgZSk7XG4gICAgICAgIE4oXCJSZXN0Q29ubmVjdGlvblwiLCBgU2VuZGluZyBSUEMgJyR7dH0nICR7cn06YCwgbywgbik7XG4gICAgICAgIGNvbnN0IHUgPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRW8odSwgcywgaSksIHRoaXMuQW8odCwgbywgdSwgbikudGhlbigoZSA9PiAoTihcIlJlc3RDb25uZWN0aW9uXCIsIGBSZWNlaXZlZCBSUEMgJyR7dH0nICR7cn06IGAsIGUpLCBcbiAgICAgICAgZSkpLCAoZSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBNKFwiUmVzdENvbm5lY3Rpb25cIiwgYFJQQyAnJHt0fScgJHtyfSBmYWlsZWQgd2l0aCBlcnJvcjogYCwgZSwgXCJ1cmw6IFwiLCBvLCBcInJlcXVlc3Q6XCIsIG4pLCBcbiAgICAgICAgICAgIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdm8odCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxuICAgICAgICByZXR1cm4gdGhpcy5Jbyh0LCBlLCBuLCBzLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovICAgIEVvKHQsIGUsIG4pIHtcbiAgICAgICAgdFtcIlgtR29vZy1BcGktQ2xpZW50XCJdID0gXCJnbC1qcy8gZmlyZS9cIiArIFMsIFxuICAgICAgICAvLyBDb250ZW50LVR5cGU6IHRleHQvcGxhaW4gd2lsbCBhdm9pZCBwcmVmbGlnaHQgcmVxdWVzdHMgd2hpY2ggbWlnaHRcbiAgICAgICAgLy8gbWVzcyB3aXRoIENPUlMgYW5kIHJlZGlyZWN0cyBieSBwcm94aWVzLiBJZiB3ZSBhZGQgY3VzdG9tIGhlYWRlcnNcbiAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGlzIGNvZGUgdG8gcG90ZW50aWFsbHkgdXNlIHRoZSAkaHR0cE92ZXJ3cml0ZVxuICAgICAgICAvLyBwYXJhbWV0ZXIgc3VwcG9ydGVkIGJ5IEVTRiB0byBhdm9pZCB0cmlnZ2VyaW5nIHByZWZsaWdodCByZXF1ZXN0cy5cbiAgICAgICAgdFtcIkNvbnRlbnQtVHlwZVwiXSA9IFwidGV4dC9wbGFpblwiLCB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCAmJiAodFtcIlgtRmlyZWJhc2UtR01QSURcIl0gPSB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCksIFxuICAgICAgICBlICYmIGUuaGVhZGVycy5mb3JFYWNoKCgoZSwgbikgPT4gdFtuXSA9IGUpKSwgbiAmJiBuLmhlYWRlcnMuZm9yRWFjaCgoKGUsIG4pID0+IHRbbl0gPSBlKSk7XG4gICAgfVxuICAgIFRvKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHh1W3RdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5tb30vdjEvJHtlfToke259YDtcbiAgICB9XG59IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSB0LmZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gdC5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IHQudXNlRmV0Y2hTdHJlYW1zLCB0aGlzLmxvbmdQb2xsaW5nT3B0aW9ucyA9IHQubG9uZ1BvbGxpbmdPcHRpb25zO1xuICAgIH1cbiAgICBBbyh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBDdSgpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1ID0gbmV3IFhocklvO1xuICAgICAgICAgICAgdS5zZXRXaXRoQ3JlZGVudGlhbHMoITApLCB1Lmxpc3Rlbk9uY2UoRXZlbnRUeXBlLkNPTVBMRVRFLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodS5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5OT19FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB1LmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgTihrdSwgYFhIUiBmb3IgUlBDICcke3R9JyAke2l9IHJlY2VpdmVkOmAsIEpTT04uc3RyaW5naWZ5KGUpKSwgcihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuVElNRU9VVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIE4oa3UsIGBSUEMgJyR7dH0nICR7aX0gdGltZWQgb3V0YCksIG8obmV3IFUocS5ERUFETElORV9FWENFRURFRCwgXCJSZXF1ZXN0IHRpbWUgb3V0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuSFRUUF9FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB1LmdldFN0YXR1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE4oa3UsIGBSUEMgJyR7dH0nICR7aX0gZmFpbGVkIHdpdGggc3RhdHVzOmAsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgdS5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IHUuZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh0KSAmJiAodCA9IHRbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBudWxsID09IHQgPyB2b2lkIDAgOiB0LmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlICYmIGUuc3RhdHVzICYmIGUubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIFwiLVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHEpLmluZGV4T2YoZSkgPj0gMCA/IGUgOiBxLlVOS05PV047XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0oZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKG5ldyBVKHQsIGUubWVzc2FnZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBvKG5ldyBVKHEuVU5LTk9XTiwgXCJTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzIFwiICsgdS5nZXRTdGF0dXMoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgcmVjZWl2ZWQgYW4gSFRUUF9FUlJPUiBidXQgdGhlcmUncyBubyBzdGF0dXMgY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgbW9zdCBwcm9iYWJseSBhIGNvbm5lY3Rpb24gaXNzdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG8obmV3IFUocS5VTkFWQUlMQUJMRSwgXCJDb25uZWN0aW9uIGZhaWxlZC5cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgTygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgTihrdSwgYFJQQyAnJHt0fScgJHtpfSBjb21wbGV0ZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYyA9IEpTT04uc3RyaW5naWZ5KHMpO1xuICAgICAgICAgICAgTihrdSwgYFJQQyAnJHt0fScgJHtpfSBzZW5kaW5nIHJlcXVlc3Q6YCwgcyksIHUuc2VuZChlLCBcIlBPU1RcIiwgYywgbiwgMTUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFJvKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEN1KCksIGkgPSBbIHRoaXMubW8sIFwiL1wiLCBcImdvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlXCIsIFwiL1wiLCB0LCBcIi9jaGFubmVsXCIgXSwgciA9IGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQoKSwgbyA9IGdldFN0YXRFdmVudFRhcmdldCgpLCB1ID0ge1xuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGJhY2tlbmQgc3RpY2tpbmVzcywgcm91dGluZyBiZWhhdmlvciBpcyBiYXNlZCBvbiB0aGlzXG4gICAgICAgICAgICAvLyBwYXJhbWV0ZXIuXG4gICAgICAgICAgICBodHRwU2Vzc2lvbklkUGFyYW06IFwiZ3Nlc3Npb25pZFwiLFxuICAgICAgICAgICAgaW5pdE1lc3NhZ2VIZWFkZXJzOiB7fSxcbiAgICAgICAgICAgIG1lc3NhZ2VVcmxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHBhcmFtIGlzIHVzZWQgdG8gaW1wcm92ZSByb3V0aW5nIGFuZCBwcm9qZWN0IGlzb2xhdGlvbiBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBiYWNrZW5kIGFuZCBtdXN0IGJlIGluY2x1ZGVkIGluIGV2ZXJ5IHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IGBwcm9qZWN0cy8ke3RoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3RoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZX1gXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VuZFJhd0pzb246ICEwLFxuICAgICAgICAgICAgc3VwcG9ydHNDcm9zc0RvbWFpblhocjogITAsXG4gICAgICAgICAgICBpbnRlcm5hbENoYW5uZWxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgZGVmYXVsdCB0aW1lb3V0IChyYW5kb21pemVkIGJldHdlZW4gMTAtMjAgc2Vjb25kcykgc2luY2VcbiAgICAgICAgICAgICAgICAvLyBhIGxhcmdlIHdyaXRlIGJhdGNoIG9uIGEgc2xvdyBpbnRlcm5ldCBjb25uZWN0aW9uIG1heSB0YWtlIGEgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIHRpbWUgdG8gc2VuZCB0byB0aGUgYmFja2VuZC4gUmF0aGVyIHRoYW4gaGF2ZSBXZWJDaGFubmVsIGltcG9zZSBhXG4gICAgICAgICAgICAgICAgLy8gdGlnaHQgdGltZW91dCB3aGljaCBjb3VsZCBsZWFkIHRvIGluZmluaXRlIHRpbWVvdXRzIGFuZCByZXRyaWVzLCB3ZVxuICAgICAgICAgICAgICAgIC8vIHNldCBpdCB2ZXJ5IGxhcmdlICg1LTEwIG1pbnV0ZXMpIGFuZCByZWx5IG9uIHRoZSBicm93c2VyJ3MgYnVpbHRpblxuICAgICAgICAgICAgICAgIC8vIHRpbWVvdXRzIHRvIGtpY2sgaW4gaWYgdGhlIHJlcXVlc3QgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgICAgICBmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXM6IDZlNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcmNlTG9uZ1BvbGxpbmc6IHRoaXMuZm9yY2VMb25nUG9sbGluZyxcbiAgICAgICAgICAgIGRldGVjdEJ1ZmZlcmluZ1Byb3h5OiB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZ1xuICAgICAgICB9LCBjID0gdGhpcy5sb25nUG9sbGluZ09wdGlvbnMudGltZW91dFNlY29uZHM7XG4gICAgICAgIHZvaWQgMCAhPT0gYyAmJiAodS5sb25nUG9sbGluZ1RpbWVvdXQgPSBNYXRoLnJvdW5kKDFlMyAqIGMpKSwgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKHUueG1sSHR0cEZhY3RvcnkgPSBuZXcgRmV0Y2hYbWxIdHRwRmFjdG9yeSh7fSkpLCBcbiAgICAgICAgdGhpcy5Fbyh1LmluaXRNZXNzYWdlSGVhZGVycywgZSwgbiksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGVuY29kZUluaXRNZXNzYWdlSGVhZGVycyBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW4gdGhlIHJlcXVlc3QncyBQT1NUIHBheWxvYWQsXG4gICAgICAgIC8vIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC5cbiAgICAgICAgdS5lbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgPSAhMDtcbiAgICAgICAgY29uc3QgYSA9IGkuam9pbihcIlwiKTtcbiAgICAgICAgTihrdSwgYENyZWF0aW5nIFJQQyAnJHt0fScgc3RyZWFtICR7c306ICR7YX1gLCB1KTtcbiAgICAgICAgY29uc3QgaCA9IHIuY3JlYXRlV2ViQ2hhbm5lbChhLCB1KTtcbiAgICAgICAgLy8gV2ViQ2hhbm5lbCBzdXBwb3J0cyBzZW5kaW5nIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIGhhbmRzaGFrZSAtIHNhdmluZ1xuICAgICAgICAvLyBhIG5ldHdvcmsgcm91bmQgdHJpcC4gSG93ZXZlciwgaXQgd2lsbCBoYXZlIHRvIGNhbGwgc2VuZCBpbiB0aGUgc2FtZVxuICAgICAgICAvLyBKUyBldmVudCBsb29wIGFzIG9wZW4uIEluIG9yZGVyIHRvIGVuZm9yY2UgdGhpcywgd2UgZGVsYXkgYWN0dWFsbHlcbiAgICAgICAgLy8gb3BlbmluZyB0aGUgV2ViQ2hhbm5lbCB1bnRpbCBzZW5kIGlzIGNhbGxlZC4gV2hldGhlciB3ZSBoYXZlIGNhbGxlZFxuICAgICAgICAvLyBvcGVuIGlzIHRyYWNrZWQgd2l0aCB0aGlzIHZhcmlhYmxlLlxuICAgICAgICAgICAgICAgIGxldCBsID0gITEsIGYgPSAhMTtcbiAgICAgICAgLy8gQSBmbGFnIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBzdHJlYW0gd2FzIGNsb3NlZCAoYnkgdXMgb3IgdGhyb3VnaCBhblxuICAgICAgICAvLyBlcnJvci9jbG9zZSBldmVudCkgdG8gYXZvaWQgZGVsaXZlcmluZyBtdWx0aXBsZSBjbG9zZSBldmVudHMgb3Igc2VuZGluZ1xuICAgICAgICAvLyBvbiBhIGNsb3NlZCBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBkID0gbmV3IE51KHtcbiAgICAgICAgICAgIHJvOiBlID0+IHtcbiAgICAgICAgICAgICAgICBmID8gTihrdSwgYE5vdCBzZW5kaW5nIGJlY2F1c2UgUlBDICcke3R9JyBzdHJlYW0gJHtzfSBpcyBjbG9zZWQ6YCwgZSkgOiAobCB8fCAoTihrdSwgYE9wZW5pbmcgUlBDICcke3R9JyBzdHJlYW0gJHtzfSB0cmFuc3BvcnQuYCksIFxuICAgICAgICAgICAgICAgIGgub3BlbigpLCBsID0gITApLCBOKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSBzZW5kaW5nOmAsIGUpLCBoLnNlbmQoZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9vOiAoKSA9PiBoLmNsb3NlKClcbiAgICAgICAgfSksIHcgPSAodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBpbXBsZW1lbnQgZ29vZy5ldmVudHMuTGlzdGVuYWJsZVxuICAgICAgICAgICAgdC5saXN0ZW4oZSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG4odCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBDbG9zdXJlIGV2ZW50cyBhcmUgZ3VhcmRlZCBhbmQgZXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLCBzbyBjYXRjaCBhbnlcbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCByZXRocm93IHVzaW5nIGEgc2V0VGltZW91dCBzbyB0aGV5IGJlY29tZSB2aXNpYmxlIGFnYWluLlxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxuICAgICAgICAvLyBlbm91Z2ggdGhlIGNvZGUgaXMgZXhjZXB0aW9uIGZyZWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHcoaCwgV2ViQ2hhbm5lbC5FdmVudFR5cGUuT1BFTiwgKCgpID0+IHtcbiAgICAgICAgICAgIGYgfHwgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gdHJhbnNwb3J0IG9wZW5lZC5gKTtcbiAgICAgICAgfSkpLCB3KGgsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgZiB8fCAoZiA9ICEwLCBOKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSB0cmFuc3BvcnQgY2xvc2VkYCksIGQud28oKSk7XG4gICAgICAgIH0pKSwgdyhoLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgKGUgPT4ge1xuICAgICAgICAgICAgZiB8fCAoZiA9ICEwLCBNKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSB0cmFuc3BvcnQgZXJyb3JlZDpgLCBlKSwgZC53byhuZXcgVShxLlVOQVZBSUxBQkxFLCBcIlRoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZFwiKSkpO1xuICAgICAgICB9KSksIHcoaCwgV2ViQ2hhbm5lbC5FdmVudFR5cGUuTUVTU0FHRSwgKGUgPT4ge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICBpZiAoIWYpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gZS5kYXRhWzBdO1xuICAgICAgICAgICAgICAgIEYoISFpKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzUxNDM4OTEpOiBUaGVyZSBpcyBhIGJ1ZyBpbiBPbmUgUGxhdGZvcm0gdGhhdCBjYXVzZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gKGFuZCBvbmx5IGVycm9ycykgdG8gYmUgd3JhcHBlZCBpbiBhbiBleHRyYSBhcnJheS4gVG8gYmUgZm9yd2FyZFxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgYnVnIHdlIG5lZWQgdG8gY2hlY2sgZWl0aGVyIGNvbmRpdGlvbi4gVGhlIGxhdHRlclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGZpeCBoYXMgYmVlbiByb2xsZWQgb3V0LlxuICAgICAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSBtc2dEYXRhLmVycm9yIGlzIG5vdCB0eXBlZC5cbiAgICAgICAgICAgICAgICBjb25zdCByID0gaSwgbyA9IHIuZXJyb3IgfHwgKG51bGwgPT09IChuID0gclswXSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5lcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gcmVjZWl2ZWQgZXJyb3I6YCwgbyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBpaVt0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiB1aShlKTtcbiAgICAgICAgICAgICAgICAgICAgfShlKSwgaSA9IG8ubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gcS5JTlRFUk5BTCwgaSA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgZSArIFwiIHdpdGggbWVzc2FnZSBcIiArIG8ubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICBmID0gITAsIGQud28obmV3IFUobiwgaSkpLCBoLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIE4oa3UsIGBSUEMgJyR7dH0nIHN0cmVhbSAke3N9IHJlY2VpdmVkOmAsIGkpLCBkLl9vKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHcobywgRXZlbnQuU1RBVF9FVkVOVCwgKGUgPT4ge1xuICAgICAgICAgICAgZS5zdGF0ID09PSBTdGF0LlBST1hZID8gTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gZGV0ZWN0ZWQgYnVmZmVyaW5nIHByb3h5YCkgOiBlLnN0YXQgPT09IFN0YXQuTk9QUk9YWSAmJiBOKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSBkZXRlY3RlZCBubyBidWZmZXJpbmcgcHJveHlgKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIGQuZm8oKTtcbiAgICAgICAgfSksIDApLCBkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiAkdSgpIHtcbiAgICAvLyBgd2luZG93YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IG51bGw7XG59XG5cbi8qKiBUaGUgUGxhdGZvcm0ncyAnZG9jdW1lbnQnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi8gZnVuY3Rpb24gT3UoKSB7XG4gICAgLy8gYGRvY3VtZW50YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBGdSh0KSB7XG4gICAgcmV0dXJuIG5ldyBWaSh0LCAvKiB1c2VQcm90bzNKc29uPSAqLyAhMCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxuICovXG5jbGFzcyBCdSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCBzID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuaWkgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLlBvID0gbiwgdGhpcy5ibyA9IHMsIHRoaXMuVm8gPSBpLCB0aGlzLlNvID0gMCwgXG4gICAgICAgIHRoaXMuRG8gPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLkNvID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5TbyA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICB4bygpIHtcbiAgICAgICAgdGhpcy5TbyA9IHRoaXMuVm87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgTm8odCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodGhpcy5TbyArIHRoaXMua28oKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5DbyksIHMgPSBNYXRoLm1heCgwLCBlIC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHMgPiAwICYmIE4oXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3N9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMuU299IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHtlfSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMuRG8gPSB0aGlzLmlpLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcywgKCgpID0+ICh0aGlzLkNvID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHQoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy5TbyAqPSB0aGlzLmJvLCB0aGlzLlNvIDwgdGhpcy5QbyAmJiAodGhpcy5TbyA9IHRoaXMuUG8pLCB0aGlzLlNvID4gdGhpcy5WbyAmJiAodGhpcy5TbyA9IHRoaXMuVm8pO1xuICAgIH1cbiAgICBNbygpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5EbyAmJiAodGhpcy5Eby5za2lwRGVsYXkoKSwgdGhpcy5EbyA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuRG8gJiYgKHRoaXMuRG8uY2FuY2VsKCksIHRoaXMuRG8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIGtvKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLlNvO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBMdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgdSkge1xuICAgICAgICB0aGlzLmlpID0gdCwgdGhpcy4kbyA9IG4sIHRoaXMuT28gPSBzLCB0aGlzLmNvbm5lY3Rpb24gPSBpLCB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyID0gciwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyID0gbywgdGhpcy5saXN0ZW5lciA9IHUsIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRm8gPSAwLCB0aGlzLkJvID0gbnVsbCwgdGhpcy5MbyA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5xbyA9IG5ldyBCdSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgVW8oKSB7XG4gICAgICAgIHJldHVybiAxIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZyAqLyA9PT0gdGhpcy5zdGF0ZSB8fCA1IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmICovID09PSB0aGlzLnN0YXRlIHx8IHRoaXMuS28oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIFJQQyBpcyBvcGVuICh0aGUgb25PcGVuKCkgbGlzdGVuZXIgaGFzIGJlZW5cbiAgICAgKiBjYWxsZWQpIGFuZCB0aGUgc3RyZWFtIGlzIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgS28oKSB7XG4gICAgICAgIHJldHVybiAyIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8gPT09IHRoaXMuc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgUlBDLiBPbmx5IGFsbG93ZWQgaWYgaXNTdGFydGVkKCkgcmV0dXJucyBmYWxzZS4gVGhlIHN0cmVhbSBpc1xuICAgICAqIG5vdCBpbW1lZGlhdGVseSByZWFkeSBmb3IgdXNlOiBvbk9wZW4oKSB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgUlBDIGlzXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqXG4gICAgICogV2hlbiBzdGFydCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gIT09IHRoaXMuc3RhdGUgPyB0aGlzLmF1dGgoKSA6IHRoaXMuR28oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIFJQQy4gVGhpcyBjYWxsIGlzIGlkZW1wb3RlbnQgYW5kIGFsbG93ZWQgcmVnYXJkbGVzcyBvZiB0aGVcbiAgICAgKiBjdXJyZW50IGlzU3RhcnRlZCgpIHN0YXRlLlxuICAgICAqXG4gICAgICogV2hlbiBzdG9wIHJldHVybnMsIGlzU3RhcnRlZCgpIGFuZCBpc09wZW4oKSB3aWxsIGJvdGggcmV0dXJuIGZhbHNlLlxuICAgICAqLyAgICBhc3luYyBzdG9wKCkge1xuICAgICAgICB0aGlzLlVvKCkgJiYgYXdhaXQgdGhpcy5jbG9zZSgwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxuICAgICAqXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxuICAgICAqLyAgICBRbygpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8gLCB0aGlzLnFvLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoaXMgc3RyZWFtIGFzIGlkbGUuIElmIG5vIGZ1cnRoZXIgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIG9uIHRoZVxuICAgICAqIHN0cmVhbSBmb3Igb25lIG1pbnV0ZSwgdGhlIHN0cmVhbSB3aWxsIGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRzZWxmIGFuZFxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXG4gICAgICogYmUgaW4gYSAhaXNTdGFydGVkKCkgc3RhdGUsIHJlcXVpcmluZyB0aGUgY2FsbGVyIHRvIHN0YXJ0IHRoZSBzdHJlYW0gYWdhaW5cbiAgICAgKiBiZWZvcmUgZnVydGhlciB1c2UuXG4gICAgICpcbiAgICAgKiBPbmx5IHN0cmVhbXMgdGhhdCBhcmUgaW4gc3RhdGUgJ09wZW4nIGNhbiBiZSBtYXJrZWQgaWRsZSwgYXMgYWxsIG90aGVyXG4gICAgICogc3RhdGVzIGltcGx5IHBlbmRpbmcgbmV0d29yayBvcGVyYXRpb25zLlxuICAgICAqLyAgICBqbygpIHtcbiAgICAgICAgLy8gU3RhcnRzIHRoZSBpZGxlIHRpbWUgaWYgd2UgYXJlIGluIHN0YXRlICdPcGVuJyBhbmQgYXJlIG5vdCB5ZXQgYWxyZWFkeVxuICAgICAgICAvLyBydW5uaW5nIGEgdGltZXIgKGluIHdoaWNoIGNhc2UgdGhlIHByZXZpb3VzIGlkbGUgdGltZW91dCBzdGlsbCBhcHBsaWVzKS5cbiAgICAgICAgdGhpcy5LbygpICYmIG51bGwgPT09IHRoaXMuQm8gJiYgKHRoaXMuQm8gPSB0aGlzLmlpLmVucXVldWVBZnRlckRlbGF5KHRoaXMuJG8sIDZlNCwgKCgpID0+IHRoaXMuem8oKSkpKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uICovICAgIFdvKHQpIHtcbiAgICAgICAgdGhpcy5IbygpLCB0aGlzLnN0cmVhbS5zZW5kKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIGJ5IHRoZSBpZGxlIHRpbWVyIHdoZW4gdGhlIHN0cmVhbSBzaG91bGQgY2xvc2UgZHVlIHRvIGluYWN0aXZpdHkuICovICAgIGFzeW5jIHpvKCkge1xuICAgICAgICBpZiAodGhpcy5LbygpKSBcbiAgICAgICAgLy8gV2hlbiB0aW1pbmcgb3V0IGFuIGlkbGUgc3RyZWFtIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGZvcmNlIHRoZSBzdHJlYW0gaW50byBiYWNrb2ZmIHdoZW5cbiAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqIE1hcmtzIHRoZSBzdHJlYW0gYXMgYWN0aXZlIGFnYWluLiAqLyAgICBIbygpIHtcbiAgICAgICAgdGhpcy5CbyAmJiAodGhpcy5Cby5jYW5jZWwoKSwgdGhpcy5CbyA9IG51bGwpO1xuICAgIH1cbiAgICAvKiogQ2FuY2VscyB0aGUgaGVhbHRoIGNoZWNrIGRlbGF5ZWQgb3BlcmF0aW9uLiAqLyAgICBKbygpIHtcbiAgICAgICAgdGhpcy5MbyAmJiAodGhpcy5Mby5jYW5jZWwoKSwgdGhpcy5MbyA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIHN0cmVhbSBhbmQgY2xlYW5zIHVwIGFzIG5lY2Vzc2FyeTpcbiAgICAgKlxuICAgICAqICogY2xvc2VzIHRoZSB1bmRlcmx5aW5nIEdSUEMgc3RyZWFtO1xuICAgICAqICogY2FsbHMgdGhlIG9uQ2xvc2UgaGFuZGxlciB3aXRoIHRoZSBnaXZlbiAnZXJyb3InO1xuICAgICAqICogc2V0cyBpbnRlcm5hbCBzdHJlYW0gc3RhdGUgdG8gJ2ZpbmFsU3RhdGUnO1xuICAgICAqICogYWRqdXN0cyB0aGUgYmFja29mZiB0aW1lciBiYXNlZCBvbiB0aGUgZXJyb3JcbiAgICAgKlxuICAgICAqIEEgbmV3IHN0cmVhbSBjYW4gYmUgb3BlbmVkIGJ5IGNhbGxpbmcgc3RhcnQoKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaW5hbFN0YXRlIC0gdGhlIGludGVuZGVkIHN0YXRlIG9mIHRoZSBzdHJlYW0gYWZ0ZXIgY2xvc2luZy5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSB0aGUgZXJyb3IgdGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCB3aXRoLlxuICAgICAqLyAgICBhc3luYyBjbG9zZSh0LCBlKSB7XG4gICAgICAgIC8vIENhbmNlbCBhbnkgb3V0c3RhbmRpbmcgdGltZXJzICh0aGV5J3JlIGd1YXJhbnRlZWQgbm90IHRvIGV4ZWN1dGUpLlxuICAgICAgICB0aGlzLkhvKCksIHRoaXMuSm8oKSwgdGhpcy5xby5jYW5jZWwoKSwgXG4gICAgICAgIC8vIEludmFsaWRhdGVzIGFueSBzdHJlYW0tcmVsYXRlZCBjYWxsYmFja3MgKGUuZy4gZnJvbSBhdXRoIG9yIHRoZVxuICAgICAgICAvLyB1bmRlcmx5aW5nIHN0cmVhbSksIGd1YXJhbnRlZWluZyB0aGV5IHdvbid0IGV4ZWN1dGUuXG4gICAgICAgIHRoaXMuRm8rKywgNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gIT09IHQgPyBcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxuICAgICAgICB0aGlzLnFvLnJlc2V0KCkgOiBlICYmIGUuY29kZSA9PT0gcS5SRVNPVVJDRV9FWEhBVVNURUQgPyAoXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXG4gICAgICAgIGsoZS50b1N0cmluZygpKSwgayhcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMucW8ueG8oKSkgOiBlICYmIGUuY29kZSA9PT0gcS5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyAhPT0gdGhpcy5zdGF0ZSAmJiAoXG4gICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVGhpcyBzaG91bGQgcmFyZWx5XG4gICAgICAgIC8vIGhhcHBlbiBzaW5jZSBib3RoIEF1dGggYW5kIEFwcENoZWNrIGVuc3VyZSBhIHN1ZmZpY2llbnQgVFRMIHdoZW4gd2VcbiAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuLiBJZiBhIHVzZXIgbWFudWFsbHkgcmVzZXRzIHRoZWlyIHN5c3RlbSBjbG9jayB0aGlzIGNhblxuICAgICAgICAvLyBmYWlsLCBob3dldmVyLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBnZXQgYSBDb2RlLlVOQVVUSEVOVElDQVRFRCBlcnJvclxuICAgICAgICAvLyBiZWZvcmUgd2UgcmVjZWl2ZWQgdGhlIGZpcnN0IG1lc3NhZ2UgYW5kIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgdG9rZW5cbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgd2UgZmV0Y2ggYSBuZXcgdG9rZW4uXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpKSwgXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXG4gICAgICAgIG51bGwgIT09IHRoaXMuc3RyZWFtICYmICh0aGlzLllvKCksIHRoaXMuc3RyZWFtLmNsb3NlKCksIHRoaXMuc3RyZWFtID0gbnVsbCksIFxuICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xuICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIFxuICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXG4gICAgICAgIGF3YWl0IHRoaXMubGlzdGVuZXIuYW8oZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxuICAgICAqLyAgICBZbygpIHt9XG4gICAgYXV0aCgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDEgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nICovO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5Ybyh0aGlzLkZvKSwgZSA9IHRoaXMuRm87XG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpIF0pLnRoZW4oKChbdCwgbl0pID0+IHtcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogV2UgcmVhbGx5IHNob3VsZCBqdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkXG4gICAgICAgICAgICAvLyBhbmQgbGV0IHRoaXMgZGlzcGF0Y2ggb250byB0aGUgcXVldWUsIGJ1dCB0aGF0IG9wZW5lZCBhIHNwZWMgdGVzdCBjYW5cbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxuICAgICAgICAgICAgdGhpcy5GbyA9PT0gZSAmJiBcbiAgICAgICAgICAgIC8vIE5vcm1hbGx5IHdlJ2QgaGF2ZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGNhbGxzIGFyZSBzYWZlIHRvIGJlIGNhbGxlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBzaW5jZSB0aGV5IGRvbid0IGNoYWluIGFzeW5jaHJvbm91cyBjYWxsc1xuICAgICAgICAgICAgdGhpcy5abyh0LCBuKTtcbiAgICAgICAgfSksIChlID0+IHtcbiAgICAgICAgICAgIHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IFUocS5VTktOT1dOLCBcIkZldGNoaW5nIGF1dGggdG9rZW4gZmFpbGVkOiBcIiArIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHUodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWm8odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Ybyh0aGlzLkZvKTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLmV1KHQsIGUpLCB0aGlzLnN0cmVhbS51bygoKCkgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gKHRoaXMuc3RhdGUgPSAyIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuICovICwgdGhpcy5MbyA9IHRoaXMuaWkuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5PbywgMWU0LCAoKCkgPT4gKHRoaXMuS28oKSAmJiAodGhpcy5zdGF0ZSA9IDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLnVvKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uYW8oKHQgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy50dSh0KSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgodCA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLm9uTWVzc2FnZSh0KSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEdvKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyAsIHRoaXMucW8uTm8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RzXG4gICAgdHUodCkge1xuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxuICAgICAgICAvLyB3ZSBuZXZlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVjYXVzZSBpZiB3ZSBzdG9wIGEgc3RyZWFtIG91cnNlbHZlcyxcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIG5ldmVyIGJlIGNhbGxlZC4gVG8gcHJldmVudCBjYXNlcyB3aGVyZSB3ZSByZXRyeVxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cbiAgICAgICAgcmV0dXJuIE4oXCJQZXJzaXN0ZW50U3RyZWFtXCIsIGBjbG9zZSB3aXRoIGVycm9yOiAke3R9YCksIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5jbG9zZSg0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBYbyh0KSB7XG4gICAgICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaWkuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5GbyA9PT0gdCA/IGUoKSA6IChOKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3MgcXUgZXh0ZW5kcyBMdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5MaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwibGlzdGVuX3N0cmVhbV9pZGxlXCIgLyogVGltZXJJZC5MaXN0ZW5TdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgcywgciksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpO1xuICAgIH1cbiAgICBldSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uUm8oXCJMaXN0ZW5cIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcbiAgICAgICAgdGhpcy5xby5yZXNldCgpO1xuICAgICAgICBjb25zdCBlID0gUWkodGhpcy5zZXJpYWxpemVyLCB0KSwgbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gdCkpIHJldHVybiBydC5taW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldENoYW5nZTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldElkcyAmJiBlLnRhcmdldElkcy5sZW5ndGggPyBydC5taW4oKSA6IGUucmVhZFRpbWUgPyBOaShlLnJlYWRUaW1lKSA6IHJ0Lm1pbigpO1xuICAgICAgICB9KHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5udShlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSBnaXZlbiB0YXJnZXQuIElmIHRoZSB0YXJnZXRcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxuICAgICAqIGFmZmVjdCB0aGUgdGFyZ2V0IHdpbGwgYmUgc3RyZWFtZWQgYmFjayBhcyBXYXRjaENoYW5nZSBtZXNzYWdlcyB0aGF0XG4gICAgICogcmVmZXJlbmNlIHRoZSB0YXJnZXRJZC5cbiAgICAgKi8gICAgc3UodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBMaSh0aGlzLnNlcmlhbGl6ZXIpLCBlLmFkZFRhcmdldCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKG4gPSBGbihzKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IEhpKHQsIHMpXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBKaSh0LCBzKVxuICAgICAgICAgICAgfSwgbi50YXJnZXRJZCA9IGUudGFyZ2V0SWQsIGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgIG4ucmVzdW1lVG9rZW4gPSBDaSh0LCBlLnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gU2kodCwgZS5leHBlY3RlZENvdW50KTtcbiAgICAgICAgICAgICAgICBudWxsICE9PSBzICYmIChuLmV4cGVjdGVkQ291bnQgPSBzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHJ0Lm1pbigpKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHd1YW5keSk6IENvbnNpZGVyIHJlbW92aW5nIGFib3ZlIGNoZWNrIGJlY2F1c2UgaXQgaXMgbW9zdCBsaWtlbHkgdHJ1ZS5cbiAgICAgICAgICAgICAgICAvLyBSaWdodCBub3csIG1hbnkgdGVzdHMgZGVwZW5kIG9uIHRoaXMgYmVoYXZpb3VyIHRob3VnaCAobGVhdmluZyBtaW4oKSBvdXRcbiAgICAgICAgICAgICAgICAvLyBvZiBzZXJpYWxpemF0aW9uKS5cbiAgICAgICAgICAgICAgICBuLnJlYWRUaW1lID0gRGkodCwgZS5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IFNpKHQsIGUuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiAobi5leHBlY3RlZENvdW50ID0gcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICBjb25zdCBuID0gWGkodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgbiAmJiAoZS5sYWJlbHMgPSBuKSwgdGhpcy5XbyhlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5yZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAgICogZ2l2ZW4gdGFyZ2V0SWQuXG4gICAgICovICAgIGl1KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gTGkodGhpcy5zZXJpYWxpemVyKSwgZS5yZW1vdmVUYXJnZXQgPSB0LCB0aGlzLldvKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIFdyaXRlIFJQQy5cbiAqXG4gKiBUaGUgV3JpdGUgUlBDIHJlcXVpcmVzIHRoZSBjYWxsZXIgdG8gbWFpbnRhaW4gc3BlY2lhbCBzdHJlYW1Ub2tlblxuICogc3RhdGUgaW4gYmV0d2VlbiBjYWxscywgdG8gaGVscCB0aGUgc2VydmVyIHVuZGVyc3RhbmQgd2hpY2ggcmVzcG9uc2VzIHRoZVxuICogY2xpZW50IGhhcyBwcm9jZXNzZWQgYnkgdGhlIHRpbWUgdGhlIG5leHQgcmVxdWVzdCBpcyBtYWRlLiBFdmVyeSByZXNwb25zZVxuICogd2lsbCBjb250YWluIGEgc3RyZWFtVG9rZW47IHRoaXMgdmFsdWUgbXVzdCBiZSBwYXNzZWQgdG8gdGhlIG5leHRcbiAqIHJlcXVlc3QuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBzdGFydCgpIG9uIHRoaXMgc3RyZWFtLCB0aGUgbmV4dCByZXF1ZXN0IG11c3QgYmUgYSBoYW5kc2hha2UsXG4gKiBjb250YWluaW5nIHdoYXRldmVyIHN0cmVhbVRva2VuIGlzIG9uIGhhbmQuIE9uY2UgYSByZXNwb25zZSB0byB0aGlzXG4gKiByZXF1ZXN0IGlzIHJlY2VpdmVkLCBhbGwgcGVuZGluZyBtdXRhdGlvbnMgbWF5IGJlIHN1Ym1pdHRlZC4gV2hlblxuICogc3VibWl0dGluZyBtdWx0aXBsZSBiYXRjaGVzIG9mIG11dGF0aW9ucyBhdCB0aGUgc2FtZSB0aW1lLCBpdCdzXG4gKiBva2F5IHRvIHVzZSB0aGUgc2FtZSBzdHJlYW1Ub2tlbiBmb3IgdGhlIGNhbGxzIHRvIHdyaXRlTXV0YXRpb25zLlxuICpcbiAqIFRPRE8oYi8zMzI3MTIzNSk6IFVzZSBwcm90byB0eXBlc1xuICovIGNsYXNzIFV1IGV4dGVuZHMgTHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgXCJ3cml0ZV9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5Xcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgcywgciksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpLCB0aGlzLnJ1ID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGV0aGVyIG9yIG5vdCBhIGhhbmRzaGFrZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZXhjaGFuZ2VkIGFuZFxuICAgICAqIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IG11dGF0aW9ucy5cbiAgICAgKi8gICAgZ2V0IG91KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydTtcbiAgICB9XG4gICAgLy8gT3ZlcnJpZGUgb2YgUGVyc2lzdGVudFN0cmVhbS5zdGFydFxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLnJ1ID0gITEsIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdm9pZCAwLCBzdXBlci5zdGFydCgpO1xuICAgIH1cbiAgICBZbygpIHtcbiAgICAgICAgdGhpcy5ydSAmJiB0aGlzLnV1KFtdKTtcbiAgICB9XG4gICAgZXUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLlJvKFwiV3JpdGVcIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBGKCEhdC5zdHJlYW1Ub2tlbiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdC5zdHJlYW1Ub2tlbiwgdGhpcy5ydSkge1xuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cbiAgICAgICAgICAgIHRoaXMucW8ucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBXaSh0LndyaXRlUmVzdWx0cywgdC5jb21taXRUaW1lKSwgbiA9IE5pKHQuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jdShuLCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIEYoIXQud3JpdGVSZXN1bHRzIHx8IDAgPT09IHQud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMucnUgPSAhMCwgdGhpcy5saXN0ZW5lci5hdSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICBodSgpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IExpKHRoaXMuc2VyaWFsaXplciksIHRoaXMuV28odCk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIHV1KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKHQgPT4gamkodGhpcy5zZXJpYWxpemVyLCB0KSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuV28oZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqL1xuY2xhc3MgS3UgZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmF1dGhDcmVkZW50aWFscyA9IHQsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuY29ubmVjdGlvbiA9IG4sIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzLCB0aGlzLmx1ID0gITE7XG4gICAgfVxuICAgIGZ1KCkge1xuICAgICAgICBpZiAodGhpcy5sdSkgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgSW8odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5mdSgpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbcywgaV0pID0+IHRoaXMuY29ubmVjdGlvbi5Jbyh0LCBlLCBuLCBzLCBpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBxLlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgdCkgOiBuZXcgVShxLlVOS05PV04sIHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIHN0cmVhbWVkIHJlc3VsdHMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIHZvKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnUoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW2ksIHJdKSA9PiB0aGlzLmNvbm5lY3Rpb24udm8odCwgZSwgbiwgaSwgciwgcykpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gcS5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IFUocS5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5sdSA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbmFzeW5jIGZ1bmN0aW9uIEd1KHQsIGUsIG4pIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCBpID0gTCh0KSwge3JlcXVlc3Q6IHIsIGR1OiBvfSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEppKHQsIGUpLCBpID0ge30sIHIgPSBbXTtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIC8vIE1hcCBhbGwgY2xpZW50LXNpZGUgYWxpYXNlcyB0byBhIHVuaXF1ZSBzaG9ydC1mb3JtXG4gICAgICAgICAgICAvLyBhbGlhcy4gVGhpcyBhdm9pZHMgaXNzdWVzIHdpdGggY2xpZW50LXNpZGUgYWxpYXNlcyB0aGF0XG4gICAgICAgICAgICAvLyBleGNlZWQgdGhlIDE1MDAtYnl0ZSBzdHJpbmcgc2l6ZSBsaW1pdC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBcImFnZ3JlZ2F0ZV9cIiArIG8rKztcbiAgICAgICAgICAgIGlbZV0gPSB0LmFsaWFzLCBcImNvdW50XCIgPT09IHQueXQgPyByLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiBlLFxuICAgICAgICAgICAgICAgIGNvdW50OiB7fVxuICAgICAgICAgICAgfSkgOiBcImF2Z1wiID09PSB0Lnl0ID8gci5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogZSxcbiAgICAgICAgICAgICAgICBhdmc6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGRQYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pIDogXCJzdW1cIiA9PT0gdC55dCAmJiByLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiBlLFxuICAgICAgICAgICAgICAgIHN1bToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogc3IodC5maWVsZFBhdGgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgcmVxdWVzdDoge1xuICAgICAgICAgICAgICAgIHN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uczogcixcbiAgICAgICAgICAgICAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiBzLnN0cnVjdHVyZWRRdWVyeVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyZW50OiBzLnBhcmVudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGR1OiBpXG4gICAgICAgIH07XG4gICAgfShpLnNlcmlhbGl6ZXIsIEpuKGUpLCBuKSwgdSA9IHIucGFyZW50O1xuICAgIGkuY29ubmVjdGlvbi5wbyB8fCBkZWxldGUgci5wYXJlbnQ7XG4gICAgY29uc3QgYyA9IChhd2FpdCBpLnZvKFwiUnVuQWdncmVnYXRpb25RdWVyeVwiLCB1LCByLCAvKmV4cGVjdGVkUmVzcG9uc2VDb3VudD0qLyAxKSkuZmlsdGVyKCh0ID0+ICEhdC5yZXN1bHQpKTtcbiAgICAvLyBPbWl0IFJ1bkFnZ3JlZ2F0aW9uUXVlcnlSZXNwb25zZSB0aGF0IG9ubHkgY29udGFpbiByZWFkVGltZXMuXG4gICAgICAgIEYoMSA9PT0gYy5sZW5ndGgpO1xuICAgIC8vIFJlbWFwIHRoZSBzaG9ydC1mb3JtIGFsaWFzZXMgdGhhdCB3ZXJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICAgIC8vIHRvIHRoZSBjbGllbnQtc2lkZSBhbGlhc2VzLiBVc2VycyB3aWxsIGFjY2VzcyB0aGUgcmVzdWx0c1xuICAgIC8vIHVzaW5nIHRoZSBjbGllbnQtc2lkZSBhbGlhcy5cbiAgICBjb25zdCBhID0gbnVsbCA9PT0gKHMgPSBjWzBdLnJlc3VsdCkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5hZ2dyZWdhdGVGaWVsZHM7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGEpLnJlZHVjZSgoKHQsIGUpID0+ICh0W29bZV1dID0gYVtlXSwgdCkpLCB7fSk7XG59XG5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIFF1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xuICAgICAgICAgKiBPZmZsaW5lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53dSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdSA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cbiAgICAgKi8gICAgZ3UoKSB7XG4gICAgICAgIDAgPT09IHRoaXMud3UgJiYgKHRoaXMueXUoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIHRoaXMuX3UgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiIC8qIFRpbWVySWQuT25saW5lU3RhdGVUaW1lb3V0ICovICwgMWU0LCAoKCkgPT4gKHRoaXMuX3UgPSBudWxsLCBcbiAgICAgICAgdGhpcy5wdShcIkJhY2tlbmQgZGlkbid0IHJlc3BvbmQgd2l0aGluIDEwIHNlY29uZHMuXCIpLCB0aGlzLnl1KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG91ciBPbmxpbmVTdGF0ZSBhcyBhcHByb3ByaWF0ZSBhZnRlciB0aGUgd2F0Y2ggc3RyZWFtIHJlcG9ydHMgYVxuICAgICAqIGZhaWx1cmUuIFRoZSBmaXJzdCBmYWlsdXJlIG1vdmVzIHVzIHRvIHRoZSAnVW5rbm93bicgc3RhdGUuIFdlIHRoZW4gbWF5XG4gICAgICogYWxsb3cgbXVsdGlwbGUgZmFpbHVyZXMgKGJhc2VkIG9uIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMpIGJlZm9yZSB3ZVxuICAgICAqIGFjdHVhbGx5IHRyYW5zaXRpb24gdG8gdGhlICdPZmZsaW5lJyBzdGF0ZS5cbiAgICAgKi8gICAgSXUodCkge1xuICAgICAgICBcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyA9PT0gdGhpcy5zdGF0ZSA/IHRoaXMueXUoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykgOiAodGhpcy53dSsrLCBcbiAgICAgICAgdGhpcy53dSA+PSAxICYmICh0aGlzLlR1KCksIHRoaXMucHUoYENvbm5lY3Rpb24gZmFpbGVkIDEgdGltZXMuIE1vc3QgcmVjZW50IGVycm9yOiAke3QudG9TdHJpbmcoKX1gKSwgXG4gICAgICAgIHRoaXMueXUoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwbGljaXRseSBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byB0aGUgc3BlY2lmaWVkIHN0YXRlLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmVzZXRzIG91ciB0aW1lcnMgLyBmYWlsdXJlIGNvdW50ZXJzLCBldGMuIHVzZWQgYnkgb3VyXG4gICAgICogT2ZmbGluZSBoZXVyaXN0aWNzLCBzbyBtdXN0IG5vdCBiZSB1c2VkIGluIHBsYWNlIG9mXG4gICAgICogaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCgpIGFuZCBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKS5cbiAgICAgKi8gICAgc2V0KHQpIHtcbiAgICAgICAgdGhpcy5UdSgpLCB0aGlzLnd1ID0gMCwgXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8gPT09IHQgJiYgKFxuICAgICAgICAvLyBXZSd2ZSBjb25uZWN0ZWQgdG8gd2F0Y2ggYXQgbGVhc3Qgb25jZS4gRG9uJ3Qgd2FybiB0aGUgZGV2ZWxvcGVyXG4gICAgICAgIC8vIGFib3V0IGJlaW5nIG9mZmxpbmUgZ29pbmcgZm9yd2FyZC5cbiAgICAgICAgdGhpcy5tdSA9ICExKSwgdGhpcy55dSh0KTtcbiAgICB9XG4gICAgeXUodCkge1xuICAgICAgICB0ICE9PSB0aGlzLnN0YXRlICYmICh0aGlzLnN0YXRlID0gdCwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIodCkpO1xuICAgIH1cbiAgICBwdSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBgQ291bGQgbm90IHJlYWNoIENsb3VkIEZpcmVzdG9yZSBiYWNrZW5kLiAke3R9XFxuVGhpcyB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgeW91ciBkZXZpY2UgZG9lcyBub3QgaGF2ZSBhIGhlYWx0aHkgSW50ZXJuZXQgY29ubmVjdGlvbiBhdCB0aGUgbW9tZW50LiBUaGUgY2xpZW50IHdpbGwgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5gO1xuICAgICAgICB0aGlzLm11ID8gKGsoZSksIHRoaXMubXUgPSAhMSkgOiBOKFwiT25saW5lU3RhdGVUcmFja2VyXCIsIGUpO1xuICAgIH1cbiAgICBUdSgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5fdSAmJiAodGhpcy5fdS5jYW5jZWwoKSwgdGhpcy5fdSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MganUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xuICAgIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5kYXRhc3RvcmUgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLnJlbW90ZVN5bmNlciA9IHt9LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB1cCB0byBNQVhfUEVORElOR19XUklURVMgd3JpdGVzIHRoYXQgd2UgaGF2ZSBmZXRjaGVkIGZyb20gdGhlXG4gICAgICAgICAqIExvY2FsU3RvcmUgdmlhIGZpbGxXcml0ZVBpcGVsaW5lKCkgYW5kIGhhdmUgb3Igd2lsbCBzZW5kIHRvIHRoZSB3cml0ZVxuICAgICAgICAgKiBzdHJlYW0uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW5ldmVyIHdyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCB0aGUgUmVtb3RlU3RvcmUgd2lsbCBhdHRlbXB0IHRvIHN0YXJ0IG9yXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAqIHBpcGVsaW5lIHdpbGwgYmUgc2VudCBpbiBvcmRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxuICAgICAgICAgKiBhbmQgdGh1cyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmUtc2VudCBpZiB0aGUgc3RyZWFtIGlzIGludGVycnVwdGVkIC9cbiAgICAgICAgICogcmVzdGFydGVkIGJlZm9yZSB0aGV5J3JlIGFja25vd2xlZGdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGUgcmVzcG9uc2VzIGZyb20gdGhlIGJhY2tlbmQgYXJlIGxpbmtlZCB0byB0aGVpciBvcmlnaW5hdGluZyByZXF1ZXN0XG4gICAgICAgICAqIHB1cmVseSBiYXNlZCBvbiBvcmRlciwgYW5kIHNvIHdlIGNhbiBqdXN0IHNoaWZ0KCkgd3JpdGVzIGZyb20gdGhlIGZyb250IG9mXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5FdSA9IFtdLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcbiAgICAgICAgICogdXNlciBoYXMgZXhwbGljaXRseSBjYWxsZWQgYSAnbGlzdGVuJyBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxuICAgICAgICAgKiBzZXJ2ZXIuIE9uIHJlLWVzdGFibGlzaGluZyB0aGUgbGlzdGVuIHN0cmVhbSwgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgc2VudFxuICAgICAgICAgKiB0byB0aGUgc2VydmVyLiBUaGUgdGFyZ2V0cyByZW1vdmVkIHdpdGggdW5saXN0ZW5zIGFyZSByZW1vdmVkIGVhZ2VybHlcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQXUgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIHJlYXNvbnMgZm9yIHdoeSB0aGUgUmVtb3RlU3RvcmUgbWF5IGJlIG9mZmxpbmUuIElmIGVtcHR5LCB0aGVcbiAgICAgICAgICogUmVtb3RlU3RvcmUgbWF5IHN0YXJ0IGl0cyBuZXR3b3JrIGNvbm5lY3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52dSA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlcnMgdGhhdCBnZXQgY2FsbGVkIHdoZW4gdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgb3IgZW5hYmxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgb24gdGhlIFdlYiBjbGllbnQgdG8gY3JlYXRlIHRoZVxuICAgICAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbXMgKHRvIHN1cHBvcnQgdHJlZS1zaGFrZWFibGUgc3RyZWFtcykuIE9uIEFuZHJvaWQgYW5kIGlPUyxcbiAgICAgICAgICogdGhlIHN0cmVhbXMgYXJlIGNyZWF0ZWQgZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUnUgPSBbXSwgdGhpcy5QdSA9IGksIHRoaXMuUHUuWXIoKHQgPT4ge1xuICAgICAgICAgICAgbi5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBVbmxpa2UgaU9TLCBgcmVzdGFydE5ldHdvcmsoKWAgaXMgY2FsbGVkIGV2ZW4gd2hlbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIGJlY29tZXMgdW5yZWFjaGFibGUgYXMgd2UgZG9uJ3QgaGF2ZSBhbnkgb3RoZXIgd2F5IHRvIHRlYXJcbiAgICAgICAgICAgICAgICAvLyBkb3duIG91ciBzdHJlYW1zLlxuICAgICAgICAgICAgICAgIGVjKHRoaXMpICYmIChOKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldHdvcmsgcmVhY2hhYmlsaXR5IGNoYW5nZS5cIiksIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEwodCk7XG4gICAgICAgICAgICAgICAgICAgIGUudnUuYWRkKDQgLyogT2ZmbGluZUNhdXNlLkNvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IFd1KGUpLCBlLmJ1LnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGUudnUuZGVsZXRlKDQgLyogT2ZmbGluZUNhdXNlLkNvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IHp1KGUpO1xuICAgICAgICAgICAgICAgIH0odGhpcykpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIHRoaXMuYnUgPSBuZXcgUXUobiwgcyk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB6dSh0KSB7XG4gICAgaWYgKGVjKHQpKSBmb3IgKGNvbnN0IGUgb2YgdC5SdSkgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMCk7XG59XG5cbi8qKlxuICogVGVtcG9yYXJpbHkgZGlzYWJsZXMgdGhlIG5ldHdvcmsuIFRoZSBuZXR3b3JrIGNhbiBiZSByZS1lbmFibGVkIHVzaW5nXG4gKiBlbmFibGVOZXR3b3JrKCkuXG4gKi8gYXN5bmMgZnVuY3Rpb24gV3UodCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LlJ1KSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICExKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbmV3IGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldC4gVXNlcyByZXN1bWUgdG9rZW4gaWYgcHJvdmlkZWQuIEl0XG4gKiBpcyBhIG5vLW9wIGlmIHRoZSB0YXJnZXQgb2YgZ2l2ZW4gYFRhcmdldERhdGFgIGlzIGFscmVhZHkgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi9cbmZ1bmN0aW9uIEh1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBuLkF1LmhhcyhlLnRhcmdldElkKSB8fCAoXG4gICAgLy8gTWFyayB0aGlzIGFzIHNvbWV0aGluZyB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBsaXN0ZW5pbmcgZm9yLlxuICAgIG4uQXUuc2V0KGUudGFyZ2V0SWQsIGUpLCB0YyhuKSA/IFxuICAgIC8vIFRoZSBsaXN0ZW4gd2lsbCBiZSBzZW50IGluIG9uV2F0Y2hTdHJlYW1PcGVuXG4gICAgWnUobikgOiBwYyhuKS5LbygpICYmIFl1KG4sIGUpKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBsaXN0ZW4gZnJvbSBzZXJ2ZXIuIEl0IGlzIGEgbm8tb3AgaWYgdGhlIGdpdmVuIHRhcmdldCBpZCBpc1xuICogbm90IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovIGZ1bmN0aW9uIEp1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IHBjKG4pO1xuICAgIG4uQXUuZGVsZXRlKGUpLCBzLktvKCkgJiYgWHUobiwgZSksIDAgPT09IG4uQXUuc2l6ZSAmJiAocy5LbygpID8gcy5qbygpIDogZWMobikgJiYgXG4gICAgLy8gUmV2ZXJ0IHRvIE9ubGluZVN0YXRlLlVua25vd24gaWYgdGhlIHdhdGNoIHN0cmVhbSBpcyBub3Qgb3BlbiBhbmQgd2VcbiAgICAvLyBoYXZlIG5vIGxpc3RlbmVycywgc2luY2Ugd2l0aG91dCBhbnkgbGlzdGVucyB0byBzZW5kIHdlIGNhbm5vdFxuICAgIC8vIGNvbmZpcm0gaWYgdGhlIHN0cmVhbSBpcyBoZWFsdGh5IGFuZCB1cGdyYWRlIHRvIE9ubGluZVN0YXRlLk9ubGluZS5cbiAgICBuLmJ1LnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSBhY2sgdG8gcHJvY2VzcyBhbnkgbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cbiAqLyBmdW5jdGlvbiBZdSh0LCBlKSB7XG4gICAgaWYgKHQuVnUucXQoZS50YXJnZXRJZCksIGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCB8fCBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocnQubWluKCkpID4gMCkge1xuICAgICAgICBjb25zdCBuID0gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlLnRhcmdldElkKS5zaXplO1xuICAgICAgICBlID0gZS53aXRoRXhwZWN0ZWRDb3VudChuKTtcbiAgICB9XG4gICAgcGModCkuc3UoZSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcbiAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gWHUodCwgZSkge1xuICAgIHQuVnUucXQoZSksIHBjKHQpLml1KGUpO1xufVxuXG5mdW5jdGlvbiBadSh0KSB7XG4gICAgdC5WdSA9IG5ldyBFaSh7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IGUgPT4gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKSxcbiAgICAgICAgbGU6IGUgPT4gdC5BdS5nZXQoZSkgfHwgbnVsbCxcbiAgICAgICAgdWU6ICgpID0+IHQuZGF0YXN0b3JlLnNlcmlhbGl6ZXIuZGF0YWJhc2VJZFxuICAgIH0pLCBwYyh0KS5zdGFydCgpLCB0LmJ1Lmd1KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiB0Yyh0KSB7XG4gICAgcmV0dXJuIGVjKHQpICYmICFwYyh0KS5VbygpICYmIHQuQXUuc2l6ZSA+IDA7XG59XG5cbmZ1bmN0aW9uIGVjKHQpIHtcbiAgICByZXR1cm4gMCA9PT0gTCh0KS52dS5zaXplO1xufVxuXG5mdW5jdGlvbiBuYyh0KSB7XG4gICAgdC5WdSA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2ModCkge1xuICAgIHQuQXUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgWXUodCwgZSk7XG4gICAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpYyh0LCBlKSB7XG4gICAgbmModCksIFxuICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXG4gICAgdGModCkgPyAodC5idS5JdShlKSwgWnUodCkpIDogXG4gICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcbiAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXG4gICAgdC5idS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJjKHQsIGUsIG4pIHtcbiAgICBpZiAoXG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxuICAgIHQuYnUuc2V0KFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovKSwgZSBpbnN0YW5jZW9mIElpICYmIDIgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkICovID09PSBlLnN0YXRlICYmIGUuY2F1c2UpIFxuICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XG4gICAgLy8gdG8gcmFpc2UgZXZlbnRzXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmNhdXNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGUudGFyZ2V0SWRzKSBcbiAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgIHQuQXUuaGFzKHMpICYmIChhd2FpdCB0LnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4ocywgbiksIHQuQXUuZGVsZXRlKHMpLCB0LlZ1LnJlbW92ZVRhcmdldChzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxuICpcbiAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxuICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxuICpcbiAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAqLyAodCwgZSk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBOKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmVtb3ZlIHRhcmdldHMgJXM6ICVzIFwiLCBlLnRhcmdldElkcy5qb2luKFwiLFwiKSwgbiksIFxuICAgICAgICBhd2FpdCBvYyh0LCBuKTtcbiAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiB5aSA/IHQuVnUuSHQoZSkgOiBlIGluc3RhbmNlb2YgcGkgPyB0LlZ1Lm5lKGUpIDogdC5WdS5YdChlKSwgXG4gICAgIW4uaXNFcXVhbChydC5taW4oKSkpIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBvdSh0LmxvY2FsU3RvcmUpO1xuICAgICAgICBuLmNvbXBhcmVUbyhlKSA+PSAwICYmIFxuICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxuICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKipcbiAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXG4gKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxuICogU3luY0VuZ2luZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5WdS5jZShlKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbi1tZW1vcnkgcmVzdW1lIHRva2Vucy4gTG9jYWxTdG9yZSB3aWxsIHVwZGF0ZSB0aGVcbiAgICAgICAgICAgIC8vIHBlcnNpc3RlbnQgdmlldyBvZiB0aGVzZSB3aGVuIGFwcGx5aW5nIHRoZSBjb21wbGV0ZWQgUmVtb3RlRXZlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5BdS5nZXQocyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIHQuQXUuc2V0KHMsIGkud2l0aFJlc3VtZVRva2VuKG4ucmVzdW1lVG9rZW4sIGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSksIFxuICAgICAgICAgICAgLy8gUmUtZXN0YWJsaXNoIGxpc3RlbnMgZm9yIHRoZSB0YXJnZXRzIHRoYXQgaGF2ZSBiZWVuIGludmFsaWRhdGVkIGJ5XG4gICAgICAgICAgICAvLyBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICBuLnRhcmdldE1pc21hdGNoZXMuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5BdS5nZXQoZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzKSBcbiAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSByZXN1bWUgdG9rZW4gZm9yIHRoZSB0YXJnZXQsIHNpbmNlIHdlJ3JlIGluIGEga25vd24gbWlzbWF0Y2hcbiAgICAgICAgICAgICAgICAvLyBzdGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5BdS5zZXQoZSwgcy53aXRoUmVzdW1lVG9rZW4oVmUuRU1QVFlfQllURV9TVFJJTkcsIHMuc25hcHNob3RWZXJzaW9uKSksIFxuICAgICAgICAgICAgICAgIC8vIENhdXNlIGEgaGFyZCByZXNldCBieSB1bndhdGNoaW5nIGFuZCByZXdhdGNoaW5nIGltbWVkaWF0ZWx5LCBidXRcbiAgICAgICAgICAgICAgICAvLyBkZWxpYmVyYXRlbHkgZG9uJ3Qgc2VuZCBhIHJlc3VtZSB0b2tlbiBzbyB0aGF0IHdlIGdldCBhIGZ1bGwgdXBkYXRlLlxuICAgICAgICAgICAgICAgIFh1KHQsIGUpO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIHRhcmdldCB3ZSBzZW5kIGFzIGJlaW5nIG9uIGJlaGFsZiBvZiBhbiBleGlzdGVuY2UgZmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGZsYWcgdGhlIGZpcnN0IHJlLWxpc3RlbiB0aGlzIHdheSB3aXRob3V0IGltcGFjdGluZyBmdXR1cmVcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5zIG9mIHRoaXMgdGFyZ2V0ICh0aGF0IG1pZ2h0IGhhcHBlbiBlLmcuIG9uIHJlY29ubmVjdCkuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBjcihzLnRhcmdldCwgZSwgbiwgcy5zZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgWXUodCwgaSk7XG4gICAgICAgICAgICB9KSksIHQucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQobik7XG4gICAgICAgIH0odCwgbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBOKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIGUpLCBhd2FpdCBvYyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gb2ModCwgZSwgbikge1xuICAgIGlmICghRHQoZSkpIHRocm93IGU7XG4gICAgdC52dS5hZGQoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgLy8gRGlzYWJsZSBuZXR3b3JrIGFuZCByYWlzZSBvZmZsaW5lIHNuYXBzaG90c1xuICAgIGF3YWl0IFd1KHQpLCB0LmJ1LnNldChcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgbiB8fCAoXG4gICAgLy8gVXNlIGEgc2ltcGxlIHJlYWQgb3BlcmF0aW9uIHRvIGRldGVybWluZSBpZiBJbmRleGVkREIgcmVjb3ZlcmVkLlxuICAgIC8vIElkZWFsbHksIHdlIHdvdWxkIGV4cG9zZSBhIGhlYWx0aCBjaGVjayBkaXJlY3RseSBvbiBTaW1wbGVEYiwgYnV0XG4gICAgLy8gUmVtb3RlU3RvcmUgb25seSBoYXMgYWNjZXNzIHRvIHBlcnNpc3RlbmNlIHRocm91Z2ggTG9jYWxTdG9yZS5cbiAgICBuID0gKCkgPT4gb3UodC5sb2NhbFN0b3JlKSksIFxuICAgIC8vIFByb2JlIEluZGV4ZWREQiBwZXJpb2RpY2FsbHkgYW5kIHJlLWVuYWJsZSBuZXR3b3JrXG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgTihcIlJlbW90ZVN0b3JlXCIsIFwiUmV0cnlpbmcgSW5kZXhlZERCIGFjY2Vzc1wiKSwgYXdhaXQgbigpLCB0LnZ1LmRlbGV0ZSgxIC8qIE9mZmxpbmVDYXVzZS5JbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAgICAgYXdhaXQgenUodCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGBvcGAuIElmIGBvcGAgZmFpbHMsIHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWwgYG9wYFxuICogc3VjY2VlZHMuIFJldHVybnMgYWZ0ZXIgdGhlIGZpcnN0IGF0dGVtcHQuXG4gKi8gZnVuY3Rpb24gdWModCwgZSkge1xuICAgIHJldHVybiBlKCkuY2F0Y2goKG4gPT4gb2ModCwgbiwgZSkpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2ModCkge1xuICAgIGNvbnN0IGUgPSBMKHQpLCBuID0gSWMoZSk7XG4gICAgbGV0IHMgPSBlLkV1Lmxlbmd0aCA+IDAgPyBlLkV1W2UuRXUubGVuZ3RoIC0gMV0uYmF0Y2hJZCA6IC0xO1xuICAgIGZvciAoO2FjKGUpOyApIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBhdShlLmxvY2FsU3RvcmUsIHMpO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgMCA9PT0gZS5FdS5sZW5ndGggJiYgbi5qbygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHQuYmF0Y2hJZCwgaGMoZSwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBvYyhlLCB0KTtcbiAgICB9XG4gICAgbGMoZSkgJiYgZmMoZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXG4gKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxuICovIGZ1bmN0aW9uIGFjKHQpIHtcbiAgICByZXR1cm4gZWModCkgJiYgdC5FdS5sZW5ndGggPCAxMDtcbn1cblxuLyoqXG4gKiBRdWV1ZXMgYWRkaXRpb25hbCB3cml0ZXMgdG8gYmUgc2VudCB0byB0aGUgd3JpdGUgc3RyZWFtLCBzZW5kaW5nIHRoZW1cbiAqIGltbWVkaWF0ZWx5IGlmIHRoZSB3cml0ZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gKi8gZnVuY3Rpb24gaGModCwgZSkge1xuICAgIHQuRXUucHVzaChlKTtcbiAgICBjb25zdCBuID0gSWModCk7XG4gICAgbi5LbygpICYmIG4ub3UgJiYgbi51dShlLm11dGF0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIGxjKHQpIHtcbiAgICByZXR1cm4gZWModCkgJiYgIUljKHQpLlVvKCkgJiYgdC5FdS5sZW5ndGggPiAwO1xufVxuXG5mdW5jdGlvbiBmYyh0KSB7XG4gICAgSWModCkuc3RhcnQoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGModCkge1xuICAgIEljKHQpLmh1KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHdjKHQpIHtcbiAgICBjb25zdCBlID0gSWModCk7XG4gICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuRXUpIGUudXUobi5tdXRhdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuRXUuc2hpZnQoKSwgaSA9IHRpLmZyb20ocywgZSwgbik7XG4gICAgYXdhaXQgdWModCwgKCgpID0+IHQucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlKGkpKSksIFxuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb24gYW5vdGhlclxuICAgIC8vIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgIGF3YWl0IGNjKHQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYyh0LCBlKSB7XG4gICAgLy8gSWYgdGhlIHdyaXRlIHN0cmVhbSBjbG9zZWQgYWZ0ZXIgdGhlIHdyaXRlIGhhbmRzaGFrZSBjb21wbGV0ZXMsIGEgd3JpdGVcbiAgICAvLyBvcGVyYXRpb24gZmFpbGVkIGFuZCB3ZSBmYWlsIHRoZSBwZW5kaW5nIG9wZXJhdGlvbi5cbiAgICBlICYmIEljKHQpLm91ICYmIFxuICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxuICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XG4gICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXG4gICAgICAgIGlmIChuID0gZS5jb2RlLCBvaShuKSAmJiBuICE9PSBxLkFCT1JURUQpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGEgcGVybWFuZW50IGVycm9yLCB0aGUgcmVxdWVzdCBpdHNlbGYgd2FzIHRoZSBwcm9ibGVtXG4gICAgICAgICAgICAvLyBzbyBpdCdzIG5vdCBnb2luZyB0byBzdWNjZWVkIGlmIHdlIHJlc2VuZCBpdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LkV1LnNoaWZ0KCk7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgaXQncyBhbHNvIHVubGlrZWx5IHRoYXQgdGhlIHNlcnZlciBpdHNlbGYgaXMgbWVsdGluZ1xuICAgICAgICAgICAgLy8gZG93biAtLSB0aGlzIHdhcyBqdXN0IGEgYmFkIHJlcXVlc3Qgc28gaW5oaWJpdCBiYWNrb2ZmIG9uIHRoZSBuZXh0XG4gICAgICAgICAgICAvLyByZXN0YXJ0LlxuICAgICAgICAgICAgICAgICAgICAgICAgSWModCkuUW8oKSwgYXdhaXQgdWModCwgKCgpID0+IHQucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlKG4uYmF0Y2hJZCwgZSkpKSwgXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXG4gICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgICAgICAgICAgYXdhaXQgY2ModCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG47XG4gICAgfSh0LCBlKSwgXG4gICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXG4gICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcbiAgICBsYyh0KSAmJiBmYyh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIG4uYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIE4oXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKTtcbiAgICBjb25zdCBzID0gZWMobik7XG4gICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgIC8vIGZyZXNoIGF1dGggdG9rZW4gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aFxuICAgIC8vIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZSAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXG4gICAgICAgIG4udnUuYWRkKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBXdShuKSwgcyAmJiBcbiAgICAvLyBEb24ndCBzZXQgdGhlIG5ldHdvcmsgc3RhdHVzIHRvIFVua25vd24gaWYgd2UgYXJlIG9mZmxpbmUuXG4gICAgbi5idS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIGF3YWl0IG4ucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UoZSksIFxuICAgIG4udnUuZGVsZXRlKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCB6dShuKTtcbn1cblxuLyoqXG4gKiBUb2dnbGVzIHRoZSBuZXR3b3JrIHN0YXRlIHdoZW4gdGhlIGNsaWVudCBnYWlucyBvciBsb3NlcyBpdHMgcHJpbWFyeSBsZWFzZS5cbiAqLyBhc3luYyBmdW5jdGlvbiB5Yyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgZSA/IChuLnZ1LmRlbGV0ZSgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIGF3YWl0IHp1KG4pKSA6IGUgfHwgKG4udnUuYWRkKDIgLyogT2ZmbGluZUNhdXNlLklzU2Vjb25kYXJ5ICovKSwgXG4gICAgYXdhaXQgV3UobiksIG4uYnUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdhdGNoU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXYXRjaFN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIHBjKHQpIHtcbiAgICByZXR1cm4gdC5TdSB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQuU3UgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBMKHQpO1xuICAgICAgICByZXR1cm4gcy5mdSgpLCBuZXcgcXUoZSwgcy5jb25uZWN0aW9uLCBzLmF1dGhDcmVkZW50aWFscywgcy5hcHBDaGVja0NyZWRlbnRpYWxzLCBzLnNlcmlhbGl6ZXIsIG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICB1bzogc2MuYmluZChudWxsLCB0KSxcbiAgICAgICAgYW86IGljLmJpbmQobnVsbCwgdCksXG4gICAgICAgIG51OiByYy5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuUnUucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5TdS5RbygpLCB0Yyh0KSA/IFp1KHQpIDogdC5idS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpIDogKGF3YWl0IHQuU3Uuc3RvcCgpLCBcbiAgICAgICAgbmModCkpO1xuICAgIH0pKSksIHQuU3U7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXcml0ZVN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV3JpdGVTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBJYyh0KSB7XG4gICAgcmV0dXJuIHQuRHUgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0LkR1ID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gTCh0KTtcbiAgICAgICAgcmV0dXJuIHMuZnUoKSwgbmV3IFV1KGUsIHMuY29ubmVjdGlvbiwgcy5hdXRoQ3JlZGVudGlhbHMsIHMuYXBwQ2hlY2tDcmVkZW50aWFscywgcy5zZXJpYWxpemVyLCBuKTtcbiAgICB9KHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgdW86IGRjLmJpbmQobnVsbCwgdCksXG4gICAgICAgIGFvOiBtYy5iaW5kKG51bGwsIHQpLFxuICAgICAgICBhdTogd2MuYmluZChudWxsLCB0KSxcbiAgICAgICAgY3U6IF9jLmJpbmQobnVsbCwgdClcbiAgICB9KSwgdC5SdS5wdXNoKChhc3luYyBlID0+IHtcbiAgICAgICAgZSA/ICh0LkR1LlFvKCksIFxuICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gICAgICAgIGF3YWl0IGNjKHQpKSA6IChhd2FpdCB0LkR1LnN0b3AoKSwgdC5FdS5sZW5ndGggPiAwICYmIChOKFwiUmVtb3RlU3RvcmVcIiwgYFN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoICR7dC5FdS5sZW5ndGh9IHBlbmRpbmcgd3JpdGVzYCksIFxuICAgICAgICB0LkV1ID0gW10pKTtcbiAgICB9KSkpLCB0LkR1O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIG9wZXJhdGlvbiBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBmdXR1cmUgb24gYW4gQXN5bmNRdWV1ZS5cbiAqXG4gKiBJdCBpcyBjcmVhdGVkIHZpYSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gKlxuICogU3VwcG9ydHMgY2FuY2VsbGF0aW9uICh2aWEgY2FuY2VsKCkpIGFuZCBlYXJseSBleGVjdXRpb24gKHZpYSBza2lwRGVsYXkoKSkuXG4gKlxuICogTm90ZTogV2UgaW1wbGVtZW50IGBQcm9taXNlTGlrZWAgaW5zdGVhZCBvZiBgUHJvbWlzZWAsIGFzIHRoZSBgUHJvbWlzZWAgdHlwZVxuICogaW4gbmV3ZXIgdmVyc2lvbnMgb2YgVHlwZVNjcmlwdCBkZWZpbmVzIGBmaW5hbGx5YCwgd2hpY2ggaXMgbm90IGF2YWlsYWJsZSBpblxuICogSUUuXG4gKi9cbmNsYXNzIFRjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMudGltZXJJZCA9IGUsIHRoaXMudGFyZ2V0VGltZU1zID0gbiwgdGhpcy5vcCA9IHMsIHRoaXMucmVtb3ZhbENhbGxiYWNrID0gaSwgXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBuZXcgSywgdGhpcy50aGVuID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLnRoZW4uYmluZCh0aGlzLmRlZmVycmVkLnByb21pc2UpLCBcbiAgICAgICAgLy8gSXQncyBub3JtYWwgZm9yIHRoZSBkZWZlcnJlZCBwcm9taXNlIHRvIGJlIGNhbmNlbGVkIChkdWUgdG8gY2FuY2VsbGF0aW9uKVxuICAgICAgICAvLyBhbmQgc28gd2UgYXR0YWNoIGEgZHVtbXkgY2F0Y2ggY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgLy8gJ1VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nJyBsb2cgc3BhbS5cbiAgICAgICAgdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoKCh0ID0+IHt9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBEZWxheWVkT3BlcmF0aW9uIHRoYXQgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIGJlXG4gICAgICogZXhlY3V0ZWQgb24gdGhlIHByb3ZpZGVkIGFzeW5jUXVldWUgYWZ0ZXIgdGhlIHByb3ZpZGVkIGRlbGF5TXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXN5bmNRdWV1ZSAtIFRoZSBxdWV1ZSB0byBzY2hlZHVsZSB0aGUgb3BlcmF0aW9uIG9uLlxuICAgICAqIEBwYXJhbSBpZCAtIEEgVGltZXIgSUQgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2Ygb3BlcmF0aW9uIHRoaXMgaXMuXG4gICAgICogQHBhcmFtIGRlbGF5TXMgLSBUaGUgZGVsYXkgKG1zKSBiZWZvcmUgdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2NoZWR1bGVkLlxuICAgICAqIEBwYXJhbSBvcCAtIFRoZSBvcGVyYXRpb24gdG8gcnVuLlxuICAgICAqIEBwYXJhbSByZW1vdmFsQ2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IG9uY2UgdGhlXG4gICAgICogICBvcGVyYXRpb24gaXMgZXhlY3V0ZWQgb3IgY2FuY2VsZWQsIG5vdGlmeWluZyB0aGUgQXN5bmNRdWV1ZSB0byByZW1vdmUgaXRcbiAgICAgKiAgIGZyb20gaXRzIGRlbGF5ZWRPcGVyYXRpb25zIGxpc3QuXG4gICAgICogICBQT1JUSU5HIE5PVEU6IFRoaXMgZXhpc3RzIHRvIHByZXZlbnQgbWFraW5nIHJlbW92ZURlbGF5ZWRPcGVyYXRpb24oKSBhbmRcbiAgICAgKiAgIHRoZSBEZWxheWVkT3BlcmF0aW9uIGNsYXNzIHB1YmxpYy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZUFuZFNjaGVkdWxlKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IERhdGUubm93KCkgKyBuLCBvID0gbmV3IFRjKHQsIGUsIHIsIHMsIGkpO1xuICAgICAgICByZXR1cm4gby5zdGFydChuKSwgbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0aW1lci4gVGhpcyBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY29uc3RydWN0aW9uIGJ5XG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAgICAgKi8gICAgc3RhcnQodCkge1xuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gc2V0VGltZW91dCgoKCkgPT4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKSksIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZXMgdGhlIG9wZXJhdGlvbiB0byBydW4gaW1tZWRpYXRlbHkgKGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcnVuIG9yXG4gICAgICogY2FuY2VsZWQpLlxuICAgICAqLyAgICBza2lwRGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXG4gICAgICogcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcbiAgICAgKiBndWFyYW50ZWUgdGhhdCB0aGUgb3BlcmF0aW9uIHdpbGwgbm90IGJlIHJ1bi5cbiAgICAgKi8gICAgY2FuY2VsKHQpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5jbGVhclRpbWVvdXQoKSwgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IFUocS5DQU5DRUxMRUQsIFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiICsgKHQgPyBcIjogXCIgKyB0IDogXCJcIikpKSk7XG4gICAgfVxuICAgIGhhbmRsZURlbGF5RWxhcHNlZCgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgPyAodGhpcy5jbGVhclRpbWVvdXQoKSwgXG4gICAgICAgIHRoaXMub3AoKS50aGVuKCh0ID0+IHRoaXMuZGVmZXJyZWQucmVzb2x2ZSh0KSkpKSA6IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5yZW1vdmFsQ2FsbGJhY2sodGhpcyksIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKSwgXG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpcmVzdG9yZUVycm9yIHRoYXQgY2FuIGJlIHN1cmZhY2VkIHRvIHRoZSB1c2VyIGlmIHRoZSBwcm92aWRlZFxuICogZXJyb3IgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gUmUtdGhyb3dzIHRoZSBlcnJvciBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gRWModCwgZSkge1xuICAgIGlmIChrKFwiQXN5bmNRdWV1ZVwiLCBgJHtlfTogJHt0fWApLCBEdCh0KSkgcmV0dXJuIG5ldyBVKHEuVU5BVkFJTEFCTEUsIGAke2V9OiAke3R9YCk7XG4gICAgdGhyb3cgdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuIFdlIGFsd2F5cyBhZGQgYSBkb2N1bWVudCBrZXlcbiAqIGNvbXBhcmF0b3Igb24gdG9wIG9mIHdoYXQgaXMgcHJvdmlkZWQgdG8gZ3VhcmFudGVlIGRvY3VtZW50IGVxdWFsaXR5IGJhc2VkIG9uXG4gKiB0aGUga2V5LlxuICovIGNsYXNzIEFjIHtcbiAgICAvKiogVGhlIGRlZmF1bHQgb3JkZXJpbmcgaXMgYnkga2V5IGlmIHRoZSBjb21wYXJhdG9yIGlzIG9taXR0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgZG9jdW1lbnQga2V5IGNvbXBhcmF0b3IgdG8gdGhlIGVuZCBhcyBpdCdzIHRoZSBvbmx5XG4gICAgICAgIC8vIGd1YXJhbnRlZWQgdW5pcXVlIHByb3BlcnR5IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQgPyAoZSwgbikgPT4gdChlLCBuKSB8fCBodC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiAodCwgZSkgPT4gaHQuY29tcGFyYXRvcih0LmtleSwgZS5rZXkpLCBcbiAgICAgICAgdGhpcy5rZXllZE1hcCA9IGhzKCksIHRoaXMuc29ydGVkU2V0ID0gbmV3IHBlKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW1wdHkgY29weSBvZiB0aGUgZXhpc3RpbmcgRG9jdW1lbnRTZXQsIHVzaW5nIHRoZSBzYW1lXG4gICAgICogY29tcGFyYXRvci5cbiAgICAgKi8gICAgc3RhdGljIGVtcHR5U2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBYyh0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWF4S2V5KCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBwcm92aWRlZCBrZXkgaW4gdGhlIGRvY3VtZW50IHNldCwgb3IgLTEgaWYgdGhlXG4gICAgICogZG9jdW1lbnQga2V5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBzZXQ7XG4gICAgICovICAgIGluZGV4T2YodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5zb3J0ZWRTZXQuaW5kZXhPZihlKSA6IC0xO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LnNpemU7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBkb2N1bWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5zb3J0ZWRTZXQuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5ICovICAgIGFkZCh0KSB7XG4gICAgICAgIC8vIEZpcnN0IHJlbW92ZSB0aGUgZWxlbWVudCBpZiB3ZSBoYXZlIGl0LlxuICAgICAgICBjb25zdCBlID0gdGhpcy5kZWxldGUodC5rZXkpO1xuICAgICAgICByZXR1cm4gZS5jb3B5KGUua2V5ZWRNYXAuaW5zZXJ0KHQua2V5LCB0KSwgZS5zb3J0ZWRTZXQuaW5zZXJ0KHQsIG51bGwpKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYSBkb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLmNvcHkodGhpcy5rZXllZE1hcC5yZW1vdmUodCksIHRoaXMuc29ydGVkU2V0LnJlbW92ZShlKSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIEFjKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSB0LnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCksIG4gPSB0LnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKCF0LmlzRXF1YWwocykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgMCA9PT0gdC5sZW5ndGggPyBcIkRvY3VtZW50U2V0ICgpXCIgOiBcIkRvY3VtZW50U2V0IChcXG4gIFwiICsgdC5qb2luKFwiICBcXG5cIikgKyBcIlxcbilcIjtcbiAgICB9XG4gICAgY29weSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQWM7XG4gICAgICAgIHJldHVybiBuLmNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3IsIG4ua2V5ZWRNYXAgPSB0LCBuLnNvcnRlZFNldCA9IGUsIG47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudENoYW5nZVNldCBrZWVwcyB0cmFjayBvZiBhIHNldCBvZiBjaGFuZ2VzIHRvIGRvY3MgaW4gYSBxdWVyeSwgbWVyZ2luZ1xuICogZHVwbGljYXRlIGV2ZW50cyBmb3IgdGhlIHNhbWUgZG9jLlxuICovIGNsYXNzIHZjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5DdSA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgdHJhY2sodCkge1xuICAgICAgICBjb25zdCBlID0gdC5kb2Mua2V5LCBuID0gdGhpcy5DdS5nZXQoZSk7XG4gICAgICAgIG4gPyBcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyBjaGFuZ2Ugd2l0aCB0aGUgZXhpc3RpbmcgY2hhbmdlLlxuICAgICAgICAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IHQudHlwZSAmJiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gPT09IG4udHlwZSA/IHRoaXMuQ3UgPSB0aGlzLkN1Lmluc2VydChlLCB0KSA6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA9PT0gdC50eXBlICYmIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5DdSA9IHRoaXMuQ3UuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSB0LnR5cGUgJiYgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5DdSA9IHRoaXMuQ3UucmVtb3ZlKGUpIDogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuQ3UgPSB0aGlzLkN1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IG4uZG9jXG4gICAgICAgIH0pIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSB0LnR5cGUgJiYgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuQ3UgPSB0aGlzLkN1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IFxuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHRoZXNlIGNhc2VzLCB3aGljaCBkb24ndCBtYWtlIHNlbnNlOlxuICAgICAgICAvLyBBZGRlZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+UmVtb3ZlZFxuICAgICAgICAvLyBNb2RpZmllZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TW9kaWZpZWRcbiAgICAgICAgLy8gTWV0YWRhdGEtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1ldGFkYXRhXG4gICAgICAgIE8oKSA6IHRoaXMuQ3UgPSB0aGlzLkN1Lmluc2VydChlLCB0KTtcbiAgICB9XG4gICAgeHUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ3UuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQucHVzaChuKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgUmMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUsIGMpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuZG9jcyA9IGUsIHRoaXMub2xkRG9jcyA9IG4sIHRoaXMuZG9jQ2hhbmdlcyA9IHMsIHRoaXMubXV0YXRlZEtleXMgPSBpLCBcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSByLCB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPSBvLCB0aGlzLmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzID0gdSwgXG4gICAgICAgIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyA9IGM7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBzbmFwc2hvdCB3ZXJlIGFkZGVkLiAqLyAgICBzdGF0aWMgZnJvbUluaXRpYWxEb2N1bWVudHModCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgci5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgbmV3IFJjKHQsIGUsIEFjLmVtcHR5U2V0KGUpLCByLCBuLCBzLCBcbiAgICAgICAgLyogc3luY1N0YXRlQ2hhbmdlZD0gKi8gITAsIFxuICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEsIGkpO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm11dGF0ZWRLZXlzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZSAmJiB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPT09IHQuaGFzQ2FjaGVkUmVzdWx0cyAmJiB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPT09IHQuc3luY1N0YXRlQ2hhbmdlZCAmJiB0aGlzLm11dGF0ZWRLZXlzLmlzRXF1YWwodC5tdXRhdGVkS2V5cykgJiYgWm4odGhpcy5xdWVyeSwgdC5xdWVyeSkgJiYgdGhpcy5kb2NzLmlzRXF1YWwodC5kb2NzKSAmJiB0aGlzLm9sZERvY3MuaXNFcXVhbCh0Lm9sZERvY3MpKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NDaGFuZ2VzLCBuID0gdC5kb2NDaGFuZ2VzO1xuICAgICAgICBpZiAoZS5sZW5ndGggIT09IG4ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5sZW5ndGg7IHQrKykgaWYgKGVbdF0udHlwZSAhPT0gblt0XS50eXBlIHx8ICFlW3RdLmRvYy5pc0VxdWFsKG5bdF0uZG9jKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIb2xkcyB0aGUgbGlzdGVuZXJzIGFuZCB0aGUgbGFzdCByZWNlaXZlZCBWaWV3U25hcHNob3QgZm9yIGEgcXVlcnkgYmVpbmdcbiAqIHRyYWNrZWQgYnkgRXZlbnRNYW5hZ2VyLlxuICovIGNsYXNzIFBjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5OdSA9IHZvaWQgMCwgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIGJjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gbmV3IG9zKCh0ID0+IHRzKHQpKSwgWm4pLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLmt1ID0gbmV3IFNldDtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFZjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMSwgciA9IG4ucXVlcmllcy5nZXQocyk7XG4gICAgaWYgKHIgfHwgKGkgPSAhMCwgciA9IG5ldyBQYyksIGkpIHRyeSB7XG4gICAgICAgIHIuTnUgPSBhd2FpdCBuLm9uTGlzdGVuKHMpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgY29uc3QgbiA9IEVjKHQsIGBJbml0aWFsaXphdGlvbiBvZiBxdWVyeSAnJHtlcyhlLnF1ZXJ5KX0nIGZhaWxlZGApO1xuICAgICAgICByZXR1cm4gdm9pZCBlLm9uRXJyb3Iobik7XG4gICAgfVxuICAgIGlmIChuLnF1ZXJpZXMuc2V0KHMsIHIpLCByLmxpc3RlbmVycy5wdXNoKGUpLCBcbiAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICBlLk11KG4ub25saW5lU3RhdGUpLCByLk51KSB7XG4gICAgICAgIGUuJHUoci5OdSkgJiYgeGMobik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBTYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITE7XG4gICAgY29uc3QgciA9IG4ucXVlcmllcy5nZXQocyk7XG4gICAgaWYgKHIpIHtcbiAgICAgICAgY29uc3QgdCA9IHIubGlzdGVuZXJzLmluZGV4T2YoZSk7XG4gICAgICAgIHQgPj0gMCAmJiAoci5saXN0ZW5lcnMuc3BsaWNlKHQsIDEpLCBpID0gMCA9PT0gci5saXN0ZW5lcnMubGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGkpIHJldHVybiBuLnF1ZXJpZXMuZGVsZXRlKHMpLCBuLm9uVW5saXN0ZW4ocyk7XG59XG5cbmZ1bmN0aW9uIERjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBsZXQgcyA9ICExO1xuICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnF1ZXJ5LCBpID0gbi5xdWVyaWVzLmdldChlKTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBpLmxpc3RlbmVycykgZS4kdSh0KSAmJiAocyA9ICEwKTtcbiAgICAgICAgICAgIGkuTnUgPSB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHMgJiYgeGMobik7XG59XG5cbmZ1bmN0aW9uIENjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KSwgaSA9IHMucXVlcmllcy5nZXQoZSk7XG4gICAgaWYgKGkpIGZvciAoY29uc3QgdCBvZiBpLmxpc3RlbmVycykgdC5vbkVycm9yKG4pO1xuICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzLiBOT1RFOiBXZSBkb24ndCBuZWVkIHRvIGNhbGwgc3luY0VuZ2luZS51bmxpc3RlbigpXG4gICAgLy8gYWZ0ZXIgYW4gZXJyb3IuXG4gICAgICAgIHMucXVlcmllcy5kZWxldGUoZSk7XG59XG5cbi8vIENhbGwgYWxsIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgdGhhdCBoYXZlIGJlZW4gc2V0LlxuZnVuY3Rpb24geGModCkge1xuICAgIHQua3UuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQubmV4dCgpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXG4gKiB3aGVuIHRvIHJhaXNlIHRoZSBldmVudC5cbiAqXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cbiAqLyBjbGFzcyBOYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5PdSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbCBzbmFwc2hvdHMgKGUuZy4gZnJvbSBjYWNoZSkgbWF5IG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSB3cmFwcGVkXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkZ1ID0gITEsIHRoaXMuQnUgPSBudWxsLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuIHx8IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxuICAgICAqLyAgICAkdSh0KSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxuICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZG9jQ2hhbmdlcykgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovICE9PSBuLnR5cGUgJiYgZS5wdXNoKG4pO1xuICAgICAgICAgICAgdCA9IG5ldyBSYyh0LnF1ZXJ5LCB0LmRvY3MsIHQub2xkRG9jcywgZSwgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUsIHQuc3luY1N0YXRlQ2hhbmdlZCwgXG4gICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITAsIHQuaGFzQ2FjaGVkUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnUgPyB0aGlzLkx1KHQpICYmICh0aGlzLk91Lm5leHQodCksIGUgPSAhMCkgOiB0aGlzLnF1KHQsIHRoaXMub25saW5lU3RhdGUpICYmICh0aGlzLlV1KHQpLCBcbiAgICAgICAgZSA9ICEwKSwgdGhpcy5CdSA9IHQsIGU7XG4gICAgfVxuICAgIG9uRXJyb3IodCkge1xuICAgICAgICB0aGlzLk91LmVycm9yKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi8gICAgTXUodCkge1xuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnUgJiYgIXRoaXMuRnUgJiYgdGhpcy5xdSh0aGlzLkJ1LCB0KSAmJiAodGhpcy5VdSh0aGlzLkJ1KSwgZSA9ICEwKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIHF1KHQsIGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxuICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovICE9PSBlO1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLkt1IHx8ICFuKSAmJiAoIXQuZG9jcy5pc0VtcHR5KCkgfHwgdC5oYXNDYWNoZWRSZXN1bHRzIHx8IFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IGUpO1xuICAgICAgICAvLyBSYWlzZSBkYXRhIGZyb20gY2FjaGUgaWYgd2UgaGF2ZSBhbnkgZG9jdW1lbnRzLCBoYXZlIGNhY2hlZCByZXN1bHRzIGJlZm9yZSxcbiAgICAgICAgLy8gb3Igd2UgYXJlIG9mZmxpbmUuXG4gICAgICAgIH1cbiAgICBMdSh0KSB7XG4gICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGluY2x1ZGVEb2N1bWVudE1ldGFkYXRhQ2hhbmdlcyBoZXJlIGJlY2F1c2VcbiAgICAgICAgLy8gdGhlIE1ldGFkYXRhIG9ubHkgY2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBzdHJpcHBlZCBvdXQgaWYgbmVlZGVkLlxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSBvbmx5IGNoYW5nZXMgd2Ugd2lsbCBzZWUgYXJlIHRoZSBvbmVzIHdlIHNob3VsZFxuICAgICAgICAvLyBwcm9wYWdhdGUuXG4gICAgICAgIGlmICh0LmRvY0NoYW5nZXMubGVuZ3RoID4gMCkgcmV0dXJuICEwO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5CdSAmJiB0aGlzLkJ1Lmhhc1BlbmRpbmdXcml0ZXMgIT09IHQuaGFzUGVuZGluZ1dyaXRlcztcbiAgICAgICAgcmV0dXJuICEoIXQuc3luY1N0YXRlQ2hhbmdlZCAmJiAhZSkgJiYgITAgPT09IHRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICAvLyBHZW5lcmFsbHkgd2Ugc2hvdWxkIGhhdmUgaGl0IG9uZSBvZiB0aGUgY2FzZXMgYWJvdmUsIGJ1dCBpdCdzIHBvc3NpYmxlXG4gICAgICAgIC8vIHRvIGdldCBoZXJlIGlmIHRoZXJlIHdlcmUgb25seSBtZXRhZGF0YSBkb2NDaGFuZ2VzIGFuZCB0aGV5IGdvdFxuICAgICAgICAvLyBzdHJpcHBlZCBvdXQuXG4gICAgICAgIH1cbiAgICBVdSh0KSB7XG4gICAgICAgIHQgPSBSYy5mcm9tSW5pdGlhbERvY3VtZW50cyh0LnF1ZXJ5LCB0LmRvY3MsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlLCB0Lmhhc0NhY2hlZFJlc3VsdHMpLCBcbiAgICAgICAgdGhpcy5GdSA9ICEwLCB0aGlzLk91Lm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzIGtjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICBlKSB7XG4gICAgICAgIHRoaXMuR3UgPSB0LCB0aGlzLmJ5dGVMZW5ndGggPSBlO1xuICAgIH1cbiAgICBRdSgpIHtcbiAgICAgICAgcmV0dXJuIFwibWV0YWRhdGFcIiBpbiB0aGlzLkd1O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgb2JqZWN0cyBmcm9tIGJ1bmRsZXMgdG8gbW9kZWwgb2JqZWN0cyBpbiB0aGUgU0RLLlxuICovIGNsYXNzIE1jIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHQ7XG4gICAgfVxuICAgIHJyKHQpIHtcbiAgICAgICAgcmV0dXJuIE9pKHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgQnVuZGxlRG9jdW1lbnQgdG8gYSBNdXRhYmxlRG9jdW1lbnQuXG4gICAgICovICAgIHVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWV0YWRhdGEuZXhpc3RzID8gS2kodGhpcy5zZXJpYWxpemVyLCB0LmRvY3VtZW50LCAhMSkgOiBhbi5uZXdOb0RvY3VtZW50KHRoaXMucnIodC5tZXRhZGF0YS5uYW1lKSwgdGhpcy5jcih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIGNyKHQpIHtcbiAgICAgICAgcmV0dXJuIE5pKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRvIHByb2Nlc3MgdGhlIGVsZW1lbnRzIGZyb20gYSBidW5kbGUsIGxvYWQgdGhlbSBpbnRvIGxvY2FsXG4gKiBzdG9yYWdlIGFuZCBwcm92aWRlIHByb2dyZXNzIHVwZGF0ZSB3aGlsZSBsb2FkaW5nLlxuICovIGNsYXNzICRjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuanUgPSB0LCB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSBuLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgcXVlcmllcyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5xdWVyaWVzID0gW10sIFxuICAgICAgICAvKiogQmF0Y2hlZCBkb2N1bWVudHMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gW10sIFxuICAgICAgICAvKiogVGhlIGNvbGxlY3Rpb24gZ3JvdXBzIGFmZmVjdGVkIGJ5IHRoaXMgYnVuZGxlLiAqL1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cHMgPSBuZXcgU2V0LCB0aGlzLnByb2dyZXNzID0gT2ModCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIHp1KHQpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSB0LmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCBlID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIGlmICh0Lkd1Lm5hbWVkUXVlcnkpIHRoaXMucXVlcmllcy5wdXNoKHQuR3UubmFtZWRRdWVyeSk7IGVsc2UgaWYgKHQuR3UuZG9jdW1lbnRNZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHQuR3UuZG9jdW1lbnRNZXRhZGF0YVxuICAgICAgICAgICAgfSksIHQuR3UuZG9jdW1lbnRNZXRhZGF0YS5leGlzdHMgfHwgKytlO1xuICAgICAgICAgICAgY29uc3QgbiA9IHV0LmZyb21TdHJpbmcodC5HdS5kb2N1bWVudE1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzLmFkZChuLmdldChuLmxlbmd0aCAtIDIpKTtcbiAgICAgICAgfSBlbHNlIHQuR3UuZG9jdW1lbnQgJiYgKHRoaXMuZG9jdW1lbnRzW3RoaXMuZG9jdW1lbnRzLmxlbmd0aCAtIDFdLmRvY3VtZW50ID0gdC5HdS5kb2N1bWVudCwgXG4gICAgICAgICsrZSk7XG4gICAgICAgIHJldHVybiBlICE9PSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA/ICh0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA9IGUsIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSkgOiBudWxsO1xuICAgIH1cbiAgICBXdSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwLCBuID0gbmV3IE1jKHRoaXMuc2VyaWFsaXplcik7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSBpZiAocy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi5ycihzLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSAoZS5nZXQobikgfHwgZ3MoKSkuYWRkKHQpO1xuICAgICAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIHRvICdTdWNjZXNzJyBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIHByb2dyZXNzLlxuICAgICAqLyAgICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IG11KHRoaXMubG9jYWxTdG9yZSwgbmV3IE1jKHRoaXMuc2VyaWFsaXplciksIHRoaXMuZG9jdW1lbnRzLCB0aGlzLmp1LmlkKSwgZSA9IHRoaXMuV3UodGhpcy5kb2N1bWVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5xdWVyaWVzKSBhd2FpdCBndSh0aGlzLmxvY2FsU3RvcmUsIHQsIGUuZ2V0KHQubmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcy50YXNrU3RhdGUgPSBcIlN1Y2Nlc3NcIiwge1xuICAgICAgICAgICAgcHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3MsXG4gICAgICAgICAgICBIdTogdGhpcy5jb2xsZWN0aW9uR3JvdXBzLFxuICAgICAgICAgICAgSnU6IHRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIGluaXRpYWwgcHJvZ3Jlc3Mgb2ZcbiAqIGxvYWRpbmcgYSBidW5kbGUuXG4gKi8gZnVuY3Rpb24gT2ModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgIGRvY3VtZW50c0xvYWRlZDogMCxcbiAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0aGF0IHRoZSBsb2FkaW5nXG4gKiBoYXMgc3VjY2VlZGVkLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgRmMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgQmMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxuICovIGNsYXNzIExjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5ZdSA9IGUsIHRoaXMuWHUgPSBudWxsLCB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgd2hldGhlciB0aGUgdmlldyBpcyBjdXJyZW50IHdpdGggdGhlIGJhY2tlbmQuIEEgdmlldyBpcyBjb25zaWRlcmVkXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XG4gICAgICAgICAqIGxvc2UgY29uc2lzdGVuY3kgd2l0aGluIHRoZSB3YXRjaCBzdHJlYW0gKGUuZy4gYmVjYXVzZSBvZiBhbiBleGlzdGVuY2VcbiAgICAgICAgICogZmlsdGVyIG1pc21hdGNoKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCBcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgICAgIHRoaXMuWnUgPSBncygpLCBcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IGdzKCksIHRoaXMudGMgPSBpcyh0KSwgdGhpcy5lYyA9IG5ldyBBYyh0aGlzLnRjKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXG4gICAgICogdGhpcyB2aWV3LlxuICAgICAqLyAgICBnZXQgbmMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLll1O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXG4gICAgICogd2hhdCB0aGUgbmV3IHJlc3VsdHMgc2hvdWxkIGJlLCB3aGF0IHRoZSBjaGFuZ2VzIHdlcmUsIGFuZCB3aGV0aGVyIHdlIG1heVxuICAgICAqIG5lZWQgdG8gZ28gYmFjayB0byB0aGUgbG9jYWwgY2FjaGUgZm9yIG1vcmUgcmVzdWx0cy4gRG9lcyBub3QgbWFrZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDaGFuZ2VzIC0gSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxuICAgICAqICAgICAgICB3aXRoIHRoaXMgc2V0IG9mIGRvY3MgYW5kIGNoYW5nZXMgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2aWV3LlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXG4gICAgICovICAgIHNjKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyBlLmljIDogbmV3IHZjLCBzID0gZSA/IGUuZWMgOiB0aGlzLmVjO1xuICAgICAgICBsZXQgaSA9IGUgPyBlLm11dGF0ZWRLZXlzIDogdGhpcy5tdXRhdGVkS2V5cywgciA9IHMsIG8gPSAhMTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXG4gICAgICAgIC8vIHVwZGF0ZSAoYSBkZWxldGUsIG9yIGFuIHVwZGF0ZSBtb3ZpbmcgYSBkb2MgcGFzdCB0aGUgb2xkIGxpbWl0KSBtaWdodFxuICAgICAgICAvLyBtZWFuIHRoZXJlIGlzIHNvbWUgb3RoZXIgZG9jdW1lbnQgaW4gdGhlIGxvY2FsIGNhY2hlIHRoYXQgZWl0aGVyIHNob3VsZFxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXG4gICAgICAgIC8vIGNhc2Ugb2YgdXBkYXRlcywgb3IgKDIpIGFmdGVyIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlIGNhc2Ugb2ZcbiAgICAgICAgLy8gZGVsZXRlcy4gU28gd2Uga2VlcCB0aGlzIGRvYyBhdCB0aGUgb2xkIGxpbWl0IHRvIGNvbXBhcmUgdGhlIHVwZGF0ZXMgdG8uXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBuZXZlciBnZXQgdXNlZCBpbiBhIHJlZmlsbCAod2hlbiBwcmV2aW91c0NoYW5nZXMgaXNcbiAgICAgICAgLy8gc2V0KSwgYmVjYXVzZSB0aGVyZSB3aWxsIG9ubHkgYmUgYWRkcyAtLSBubyBkZWxldGVzIG9yIHVwZGF0ZXMuXG4gICAgICAgIGNvbnN0IHUgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMubGFzdCgpIDogbnVsbCwgYyA9IFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmZpcnN0KCkgOiBudWxsO1xuICAgICAgICAvLyBEcm9wIGRvY3VtZW50cyBvdXQgdG8gbWVldCBsaW1pdC9saW1pdFRvTGFzdCByZXF1aXJlbWVudC5cbiAgICAgICAgaWYgKHQuaW5vcmRlclRyYXZlcnNhbCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBzLmdldCh0KSwgaCA9IG5zKHRoaXMucXVlcnksIGUpID8gZSA6IG51bGwsIGwgPSAhIWEgJiYgdGhpcy5tdXRhdGVkS2V5cy5oYXMoYS5rZXkpLCBmID0gISFoICYmIChoLmhhc0xvY2FsTXV0YXRpb25zIHx8IFxuICAgICAgICAgICAgLy8gV2Ugb25seSBjb25zaWRlciBjb21taXR0ZWQgbXV0YXRpb25zIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm11dGF0ZWRLZXlzLmhhcyhoLmtleSkgJiYgaC5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgICAgICAgICAgbGV0IGQgPSAhMTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhICYmIGgpIHtcbiAgICAgICAgICAgICAgICBhLmRhdGEuaXNFcXVhbChoLmRhdGEpID8gbCAhPT0gZiAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITApIDogdGhpcy5yYyhhLCBoKSB8fCAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITAsICh1ICYmIHRoaXMudGMoaCwgdSkgPiAwIHx8IGMgJiYgdGhpcy50YyhoLCBjKSA8IDApICYmIChcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGRvYyBtb3ZlZCBmcm9tIGluc2lkZSB0aGUgbGltaXQgdG8gb3V0c2lkZSB0aGUgbGltaXQuXG4gICAgICAgICAgICAgICAgLy8gVGhhdCBtZWFucyB0aGVyZSBtYXkgYmUgc29tZSBvdGhlciBkb2MgaW4gdGhlIGxvY2FsIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIH0gZWxzZSAhYSAmJiBoID8gKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICB9KSwgZCA9ICEwKSA6IGEgJiYgIWggJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGFcbiAgICAgICAgICAgIH0pLCBkID0gITAsICh1IHx8IGMpICYmIChcbiAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXG4gICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcbiAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgZCAmJiAoaCA/IChyID0gci5hZGQoaCksIGkgPSBmID8gaS5hZGQodCkgOiBpLmRlbGV0ZSh0KSkgOiAociA9IHIuZGVsZXRlKHQpLCBpID0gaS5kZWxldGUodCkpKTtcbiAgICAgICAgfSkpLCBudWxsICE9PSB0aGlzLnF1ZXJ5LmxpbWl0KSBmb3IgKDtyLnNpemUgPiB0aGlzLnF1ZXJ5LmxpbWl0OyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlID8gci5sYXN0KCkgOiByLmZpcnN0KCk7XG4gICAgICAgICAgICByID0gci5kZWxldGUodC5rZXkpLCBpID0gaS5kZWxldGUodC5rZXkpLCBuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZWM6IHIsXG4gICAgICAgICAgICBpYzogbixcbiAgICAgICAgICAgIHppOiBvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IGlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmModCwgZSkge1xuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXG4gICAgICAgIHJldHVybiB0Lmhhc0xvY2FsTXV0YXRpb25zICYmIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmICFlLmhhc0xvY2FsTXV0YXRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cbiAgICAgKiBAcGFyYW0gdXBkYXRlTGltYm9Eb2N1bWVudHMgLSBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb25cbiAgICAgKiAgICAgICAgdGhpcyBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHRhcmdldENoYW5nZSAtIEEgdGFyZ2V0IGNoYW5nZSB0byBhcHBseSBmb3IgY29tcHV0aW5nIGxpbWJvIGRvY3MgYW5kXG4gICAgICogICAgICAgIHN5bmMgc3RhdGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgVmlld0NoYW5nZSB3aXRoIHRoZSBnaXZlbiBkb2NzLCBjaGFuZ2VzLCBhbmQgc3luYyBzdGF0ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSBpT1MvQW5kcm9pZCBjbGllbnRzIGFsd2F5cyBjb21wdXRlIGxpbWJvIGRvY3VtZW50IGNoYW5nZXMuXG4gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuZWM7XG4gICAgICAgIHRoaXMuZWMgPSB0LmVjLCB0aGlzLm11dGF0ZWRLZXlzID0gdC5tdXRhdGVkS2V5cztcbiAgICAgICAgLy8gU29ydCBjaGFuZ2VzIGJhc2VkIG9uIHR5cGUgYW5kIHF1ZXJ5IGNvbXBhcmF0b3JcbiAgICAgICAgY29uc3QgaSA9IHQuaWMueHUoKTtcbiAgICAgICAgaS5zb3J0KCgodCwgZSkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbih0KSAtIG4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQudHlwZSwgZS50eXBlKSB8fCB0aGlzLnRjKHQuZG9jLCBlLmRvYykpKSwgdGhpcy5vYyhuKTtcbiAgICAgICAgY29uc3QgciA9IGUgPyB0aGlzLnVjKCkgOiBbXSwgbyA9IDAgPT09IHRoaXMuWnUuc2l6ZSAmJiB0aGlzLmN1cnJlbnQgPyAxIC8qIFN5bmNTdGF0ZS5TeW5jZWQgKi8gOiAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyAsIHUgPSBvICE9PSB0aGlzLlh1O1xuICAgICAgICBpZiAodGhpcy5YdSA9IG8sIDAgIT09IGkubGVuZ3RoIHx8IHUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyBSYyh0aGlzLnF1ZXJ5LCB0LmVjLCBzLCBpLCB0Lm11dGF0ZWRLZXlzLCAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyA9PT0gbywgdSwgXG4gICAgICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExLCAhIW4gJiYgbi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSxcbiAgICAgICAgICAgICAgICBjYzogclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYzogclxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgdmlldywgcG90ZW50aWFsbHkgZ2VuZXJhdGluZyBhXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxuICAgICAqLyAgICBNdSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyA9PT0gdCA/IChcbiAgICAgICAgLy8gSWYgd2UncmUgb2ZmbGluZSwgc2V0IGBjdXJyZW50YCB0byBmYWxzZSBhbmQgdGhlbiBjYWxsIGFwcGx5Q2hhbmdlcygpXG4gICAgICAgIC8vIHRvIHJlZnJlc2ggb3VyIHN5bmNTdGF0ZSBhbmQgZ2VuZXJhdGUgYSBWaWV3Q2hhbmdlIGFzIGFwcHJvcHJpYXRlLiBXZVxuICAgICAgICAvLyBhcmUgZ3VhcmFudGVlZCB0byBnZXQgYSBuZXcgVGFyZ2V0Q2hhbmdlIHRoYXQgc2V0cyBgY3VycmVudGAgYmFjayB0b1xuICAgICAgICAvLyB0cnVlIG9uY2UgdGhlIGNsaWVudCBpcyBiYWNrIG9ubGluZS5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIHRoaXMuYXBwbHlDaGFuZ2VzKHtcbiAgICAgICAgICAgIGVjOiB0aGlzLmVjLFxuICAgICAgICAgICAgaWM6IG5ldyB2YyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiB0aGlzLm11dGF0ZWRLZXlzLFxuICAgICAgICAgICAgemk6ICExXG4gICAgICAgIH0sIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gITEpKSA6IHtcbiAgICAgICAgICAgIGNjOiBbXVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGRvYyBmb3IgdGhlIGdpdmVuIGtleSBzaG91bGQgYmUgaW4gbGltYm8uXG4gICAgICovICAgIGFjKHQpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJlbW90ZSBlbmQgc2F5cyBpdCdzIHBhcnQgb2YgdGhpcyBxdWVyeSwgaXQncyBub3QgaW4gbGltYm8uXG4gICAgICAgIHJldHVybiAhdGhpcy5ZdS5oYXModCkgJiYgKFxuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgZG9lc24ndCB0aGluayBpdCdzIGEgcmVzdWx0LCBzbyBpdCBzaG91bGRuJ3QgYmUgaW4gbGltYm8uXG4gICAgICAgICEhdGhpcy5lYy5oYXModCkgJiYgIXRoaXMuZWMuZ2V0KHQpLmhhc0xvY2FsTXV0YXRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBzeW5jZWREb2N1bWVudHMsIGN1cnJlbnQsIGFuZCBsaW1ibyBkb2NzIGJhc2VkIG9uIHRoZSBnaXZlbiBjaGFuZ2UuXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjaGFuZ2VzIHRvIHdoaWNoIGRvY3MgYXJlIGluIGxpbWJvLlxuICAgICAqLyAgICBvYyh0KSB7XG4gICAgICAgIHQgJiYgKHQuYWRkZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLll1ID0gdGhpcy5ZdS5hZGQodCkpKSwgdC5tb2RpZmllZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHt9KSksIFxuICAgICAgICB0LnJlbW92ZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLll1ID0gdGhpcy5ZdS5kZWxldGUodCkpKSwgdGhpcy5jdXJyZW50ID0gdC5jdXJyZW50KTtcbiAgICB9XG4gICAgdWMoKSB7XG4gICAgICAgIC8vIFdlIGNhbiBvbmx5IGRldGVybWluZSBsaW1ibyBkb2N1bWVudHMgd2hlbiB3ZSdyZSBpbi1zeW5jIHdpdGggdGhlIHNlcnZlci5cbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQpIHJldHVybiBbXTtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IERvIHRoaXMgaW5jcmVtZW50YWxseSBzbyB0aGF0IGl0J3Mgbm90IHF1YWRyYXRpYyB3aGVuXG4gICAgICAgIC8vIHVwZGF0aW5nIG1hbnkgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlp1O1xuICAgICAgICB0aGlzLlp1ID0gZ3MoKSwgdGhpcy5lYy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWModC5rZXkpICYmICh0aGlzLlp1ID0gdGhpcy5adS5hZGQodC5rZXkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuWnUuaGFzKHQpIHx8IGUucHVzaChuZXcgQmModCkpO1xuICAgICAgICB9KSksIHRoaXMuWnUuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmhhcyhuKSB8fCBlLnB1c2gobmV3IEZjKG4pKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3IHdpdGggdGhlIHN0YXRlIHJlYWQgZnJvbVxuICAgICAqIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogV2UgdXBkYXRlIHRoZSBxdWVyeSB2aWV3IHdoZW5ldmVyIGEgY2xpZW50J3MgcHJpbWFyeSBzdGF0dXMgY2hhbmdlczpcbiAgICAgKiAtIFdoZW4gYSBjbGllbnQgdHJhbnNpdGlvbnMgZnJvbSBwcmltYXJ5IHRvIHNlY29uZGFyeSwgaXQgY2FuIG1pc3NcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxuICAgICAqICAgc3luY2hyb25pemVkIHdpdGggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICogLSBGb3Igc2Vjb25kYXJ5IHRvIHByaW1hcnkgdHJhbnNpdGlvbnMsIHRoZSBjbGllbnQgbmVlZHMgdG8gdXBkYXRlIHRoZSBsaXN0XG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcbiAgICAgKiAgIGJhc2VkIHB1cmVseSBvbiBzeW50aGVzaXplZCBSZW1vdGVFdmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgTG9jYWxTdG9yZS5cbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGVcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBoYyh0KSB7XG4gICAgICAgIHRoaXMuWXUgPSB0LmlyLCB0aGlzLlp1ID0gZ3MoKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2ModC5kb2N1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXMoZSwgLyp1cGRhdGVMaW1ib0RvY3VtZW50cz0qLyAhMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIHRoaXMgcXVlcnkgd2FzIGp1c3QgbGlzdGVuZWQgdG8uIENvbnRhaW5zXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXG4gICAgICogYGhhc1BlbmRpbmdXcml0ZXNgIHN0YXR1cyBvZiB0aGUgYWxyZWFkeSBlc3RhYmxpc2hlZCB2aWV3LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgbGMoKSB7XG4gICAgICAgIHJldHVybiBSYy5mcm9tSW5pdGlhbERvY3VtZW50cyh0aGlzLnF1ZXJ5LCB0aGlzLmVjLCB0aGlzLm11dGF0ZWRLZXlzLCAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyA9PT0gdGhpcy5YdSwgdGhpcy5oYXNDYWNoZWRSZXN1bHRzKTtcbiAgICB9XG59XG5cbi8qKlxuICogUXVlcnlWaWV3IGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSB0aGF0IFN5bmNFbmdpbmUgbmVlZHMgdG8ga2VlcCB0cmFjayBvZiBmb3JcbiAqIGEgcGFydGljdWxhciBxdWVyeS5cbiAqL1xuY2xhc3MgcWMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBpdHNlbGYuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBudW1iZXIgY3JlYXRlZCBieSB0aGUgY2xpZW50IHRoYXQgaXMgdXNlZCBpbiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0gdG8gaWRlbnRpZnkgdGhpcyBxdWVyeS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgdmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdFxuICAgICAqIGRvY3MgYXJlIGluIHRoZSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMsXG4gICAgICogYW5kIGFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdFxuICAgICAqIHBvc3NpYmxlIHJlc3VsdHMuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMudmlldyA9IG47XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIGEgbGltYm8gcmVzb2x1dGlvbi4gKi8gY2xhc3MgVWMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0byB0cnVlIG9uY2Ugd2UndmUgcmVjZWl2ZWQgYSBkb2N1bWVudC4gVGhpcyBpcyB1c2VkIGluXG4gICAgICAgICAqIGdldFJlbW90ZUtleXNGb3JUYXJnZXQoKSBhbmQgdWx0aW1hdGVseSB1c2VkIGJ5IFdhdGNoQ2hhbmdlQWdncmVnYXRvciB0b1xuICAgICAgICAgKiBkZWNpZGUgd2hldGhlciBpdCBuZWVkcyB0byBtYW51ZmFjdHVyZSBhIGRlbGV0ZSBldmVudCBmb3IgdGhlIHRhcmdldCBvbmNlXG4gICAgICAgICAqIHRoZSB0YXJnZXQgaXMgQ1VSUkVOVC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmMgPSAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgYFN5bmNFbmdpbmVgIGNvb3JkaW5hdGluZyB3aXRoIG90aGVyIHBhcnRzIG9mIFNESy5cbiAqXG4gKiBUaGUgcGFydHMgb2YgU3luY0VuZ2luZSB0aGF0IGFjdCBhcyBhIGNhbGxiYWNrIHRvIFJlbW90ZVN0b3JlIG5lZWQgdG8gYmVcbiAqIHJlZ2lzdGVyZWQgaW5kaXZpZHVhbGx5LiBUaGlzIGlzIGRvbmUgaW4gYHN5bmNFbmdpbmVXcml0ZSgpYCBhbmRcbiAqIGBzeW5jRW5naW5lTGlzdGVuKClgIChhcyB3ZWxsIGFzIGBhcHBseVByaW1hcnlTdGF0ZSgpYCkgYXMgdGhlc2UgbWV0aG9kc1xuICogc2VydmUgYXMgZW50cnkgcG9pbnRzIHRvIFJlbW90ZVN0b3JlJ3MgZnVuY3Rpb25hbGl0eS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqLyBjbGFzcyBLYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5yZW1vdGVTdG9yZSA9IGUsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHMsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHIsIHRoaXMuZGMgPSB7fSwgdGhpcy53YyA9IG5ldyBvcygodCA9PiB0cyh0KSksIFpuKSwgXG4gICAgICAgIHRoaXMuX2MgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBrZXlzIG9mIGRvY3VtZW50cyB0aGF0IGFyZSBpbiBsaW1ibyBmb3Igd2hpY2ggd2UgaGF2ZW4ndCB5ZXQgc3RhcnRlZCBhXG4gICAgICAgICAqIGxpbWJvIHJlc29sdXRpb24gcXVlcnkuIFRoZSBzdHJpbmdzIGluIHRoaXMgc2V0IGFyZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgICogYGtleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpYCB3aGVyZSBga2V5YCBpcyBhIGBEb2N1bWVudEtleWAgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYFNldGAgdHlwZSB3YXMgY2hvc2VuIGJlY2F1c2UgaXQgcHJvdmlkZXMgZWZmaWNpZW50IGxvb2t1cCBhbmQgcmVtb3ZhbFxuICAgICAgICAgKiBvZiBhcmJpdHJhcnkgZWxlbWVudHMgYW5kIGl0IGFsc28gbWFpbnRhaW5zIGluc2VydGlvbiBvcmRlciwgcHJvdmlkaW5nIHRoZVxuICAgICAgICAgKiBkZXNpcmVkIHF1ZXVlLWxpa2UgRklGTyBzZW1hbnRpY3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1jID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgdGFyZ2V0IElEIGZvciBlYWNoIGRvY3VtZW50IHRoYXQgaXMgaW4gbGltYm8gd2l0aCBhblxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nYyA9IG5ldyBwZShodC5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55YyA9IG5ldyBNYXAsIHRoaXMuSWMgPSBuZXcgT28sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY29tcGxldGlvbiBoYW5kbGVycywgaW5kZXhlZCBieSBVc2VyIGFuZCBCYXRjaElkLiAqL1xuICAgICAgICB0aGlzLlRjID0ge30sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIGFsbCBwZW5kaW5nIHdyaXRlcyB0byBiZSBhY2tub3dsZWRnZWQuICovXG4gICAgICAgIHRoaXMuRWMgPSBuZXcgTWFwLCB0aGlzLkFjID0gbG8uTW4oKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMudmMgPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy52YztcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gR2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBwYSh0KTtcbiAgICBsZXQgcywgaTtcbiAgICBjb25zdCByID0gbi53Yy5nZXQoZSk7XG4gICAgaWYgKHIpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2l0aCBNdWx0aS1UYWIgV2ViLCBpdCBpcyBwb3NzaWJsZSB0aGF0IGEgcXVlcnkgdmlld1xuICAgIC8vIGFscmVhZHkgZXhpc3RzIHdoZW4gRXZlbnRNYW5hZ2VyIGNhbGxzIHVzIGZvciB0aGUgZmlyc3QgdGltZS4gVGhpc1xuICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxuICAgIC8vIGJlaGFsZiBvZiBhbm90aGVyIHRhYiBhbmQgdGhlIHVzZXIgb2YgdGhlIHByaW1hcnkgYWxzbyBzdGFydHMgbGlzdGVuaW5nXG4gICAgLy8gdG8gdGhlIHF1ZXJ5LiBFdmVudE1hbmFnZXIgd2lsbCBub3QgaGF2ZSBhbiBhc3NpZ25lZCB0YXJnZXQgSUQgaW4gdGhpc1xuICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxuICAgIHMgPSByLnRhcmdldElkLCBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQocyksIGkgPSByLnZpZXcubGMoKTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBodShuLmxvY2FsU3RvcmUsIEpuKGUpKSwgciA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcyA9IHQudGFyZ2V0SWQsIGkgPSBhd2FpdCBRYyhuLCBlLCBzLCBcImN1cnJlbnRcIiA9PT0gciwgdC5yZXN1bWVUb2tlbiksIG4uaXNQcmltYXJ5Q2xpZW50ICYmIEh1KG4ucmVtb3RlU3RvcmUsIHQpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcbiAqIHNuYXBzaG90LlxuICovIGFzeW5jIGZ1bmN0aW9uIFFjKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE9uIFdlYiBvbmx5LCB3ZSBpbmplY3QgdGhlIGNvZGUgdGhhdCByZWdpc3RlcnMgbmV3IExpbWJvXG4gICAgLy8gdGFyZ2V0cyBiYXNlZCBvbiB2aWV3IGNoYW5nZXMuIFRoaXMgYWxsb3dzIHVzIHRvIG9ubHkgZGVwZW5kIG9uIExpbWJvXG4gICAgLy8gY2hhbmdlcyB3aGVuIHVzZXIgY29kZSBpbmNsdWRlcyBxdWVyaWVzLlxuICAgIHQuUmMgPSAoZSwgbiwgcykgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGUudmlldy5zYyhuKTtcbiAgICAgICAgaS56aSAmJiAoXG4gICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxuICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXG4gICAgICAgIGkgPSBhd2FpdCBmdSh0LmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICExKS50aGVuKCgoe2RvY3VtZW50czogdH0pID0+IGUudmlldy5zYyh0LCBpKSkpKTtcbiAgICAgICAgY29uc3QgciA9IHMgJiYgcy50YXJnZXRDaGFuZ2VzLmdldChlLnRhcmdldElkKSwgbyA9IGUudmlldy5hcHBseUNoYW5nZXMoaSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgcik7XG4gICAgICAgIHJldHVybiBpYSh0LCBlLnRhcmdldElkLCBvLmNjKSwgby5zbmFwc2hvdDtcbiAgICB9KHQsIGUsIG4sIHMpO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBmdSh0LmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBvID0gbmV3IExjKGUsIHIuaXIpLCB1ID0gby5zYyhyLmRvY3VtZW50cyksIGMgPSBnaS5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UobiwgcyAmJiBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovICE9PSB0Lm9ubGluZVN0YXRlLCBpKSwgYSA9IG8uYXBwbHlDaGFuZ2VzKHUsIFxuICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgYyk7XG4gICAgaWEodCwgbiwgYS5jYyk7XG4gICAgY29uc3QgaCA9IG5ldyBxYyhlLCBuLCBvKTtcbiAgICByZXR1cm4gdC53Yy5zZXQoZSwgaCksIHQuX2MuaGFzKG4pID8gdC5fYy5nZXQobikucHVzaChlKSA6IHQuX2Muc2V0KG4sIFsgZSBdKSwgYS5zbmFwc2hvdDtcbn1cblxuLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovIGFzeW5jIGZ1bmN0aW9uIGpjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IG4ud2MuZ2V0KGUpLCBpID0gbi5fYy5nZXQocy50YXJnZXRJZCk7XG4gICAgaWYgKGkubGVuZ3RoID4gMSkgcmV0dXJuIG4uX2Muc2V0KHMudGFyZ2V0SWQsIGkuZmlsdGVyKCh0ID0+ICFabih0LCBlKSkpKSwgdm9pZCBuLndjLmRlbGV0ZShlKTtcbiAgICAvLyBObyBvdGhlciBxdWVyaWVzIGFyZSBtYXBwZWQgdG8gdGhlIHRhcmdldCwgY2xlYW4gdXAgdGhlIHF1ZXJ5IGFuZCB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAobi5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcbiAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChzLnRhcmdldElkKTtcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpIHx8IGF3YWl0IGx1KG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKHMudGFyZ2V0SWQpLCBKdShuLnJlbW90ZVN0b3JlLCBzLnRhcmdldElkKSwgXG4gICAgICAgICAgICBuYShuLCBzLnRhcmdldElkKTtcbiAgICAgICAgfSkpLmNhdGNoKHZ0KTtcbiAgICB9IGVsc2UgbmEobiwgcy50YXJnZXRJZCksIGF3YWl0IGx1KG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCk7XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXG4gKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcbiAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxuICpcbiAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xuICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXG4gKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxuICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxuICovIGFzeW5jIGZ1bmN0aW9uIHpjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gSWEodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gaXQubm93KCksIGkgPSBlLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIGdzKCkpO1xuICAgICAgICAgICAgbGV0IHIsIG87XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHtcbiAgICAgICAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdoaWNoIGtleXMgZG8gbm90IGhhdmUgYSByZW1vdGUgdmVyc2lvbiBpbiB0aGUgY2FjaGUsIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBpcyBuZWVkZWQgdG8gY3JlYXRlIHRoZSByaWdodCBvdmVybGF5IG11dGF0aW9uOiBpZiBubyByZW1vdGUgdmVyc2lvblxuICAgICAgICAgICAgICAgIC8vIHByZXNlbnRzLCB3ZSBkbyBub3QgbmVlZCB0byBjcmVhdGUgb3ZlcmxheXMgYXMgcGF0Y2ggbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIC8vIFRPRE8oT3ZlcmxheSk6IElzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBkZXRlcm1pbmUgdGhpcz8gVXNpbmcgdGhlXG4gICAgICAgICAgICAgICAgLy8gIGRvY3VtZW50IHZlcnNpb24gZG9lcyBub3Qgd29yayBiZWNhdXNlIGxvY2FsIG11dGF0aW9ucyBzZXQgdGhlbSBiYWNrXG4gICAgICAgICAgICAgICAgLy8gIHRvIDAuXG4gICAgICAgICAgICAgICAgbGV0IHUgPSBjcygpLCBjID0gZ3MoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5aaS5nZXRFbnRyaWVzKHQsIGkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB1ID0gdCwgdS5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5pc1ZhbGlkRG9jdW1lbnQoKSB8fCAoYyA9IGMuYWRkKHQpKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldE92ZXJsYXllZERvY3VtZW50cyh0LCB1KSkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByID0gaTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxuICAgICAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEdzKHQsIHIuZ2V0KHQua2V5KS5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGUgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgenModC5rZXksIGUsIGNuKGUudmFsdWUubWFwVmFsdWUpLCBGcy5leGlzdHMoITApKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5hZGRNdXRhdGlvbkJhdGNoKHQsIHMsIG8sIGUpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbyA9IGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHIsIGMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5zYXZlT3ZlcmxheXModCwgZS5iYXRjaElkLCBzKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkudGhlbigoKCkgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlczogbHMocilcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0ocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24odC5iYXRjaElkKSwgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgbGV0IHMgPSB0LlRjW3QuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgICAgICAgICBzIHx8IChzID0gbmV3IHBlKGV0KSk7XG4gICAgICAgICAgICBzID0gcy5pbnNlcnQoZSwgbiksIHQuVGNbdC5jdXJyZW50VXNlci50b0tleSgpXSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXNvbHZlcyBvciByZWplY3RzIHRoZSB1c2VyIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHRoZW4gZGlzY2FyZHNcbiAqIGl0LlxuICovIChzLCB0LmJhdGNoSWQsIG4pLCBhd2FpdCB1YShzLCB0LmNoYW5nZXMpLCBhd2FpdCBjYyhzLnJlbW90ZVN0b3JlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIC8vIElmIHdlIGNhbid0IHBlcnNpc3QgdGhlIG11dGF0aW9uLCB3ZSByZWplY3QgdGhlIHVzZXIgY2FsbGJhY2sgYW5kXG4gICAgICAgIC8vIGRvbid0IHNlbmQgdGhlIG11dGF0aW9uLiBUaGUgdXNlciBjYW4gdGhlbiByZXRyeSB0aGUgd3JpdGUuXG4gICAgICAgIGNvbnN0IGUgPSBFYyh0LCBcIkZhaWxlZCB0byBwZXJzaXN0IHdyaXRlXCIpO1xuICAgICAgICBuLnJlamVjdChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBvbmUgcmVtb3RlIGV2ZW50IHRvIHRoZSBzeW5jIGVuZ2luZSwgbm90aWZ5aW5nIGFueSB2aWV3cyBvZiB0aGVcbiAqIGNoYW5nZXMsIGFuZCByZWxlYXNpbmcgYW55IHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IHdvdWxkIGJlY29tZVxuICogdmlzaWJsZSBiZWNhdXNlIG9mIHRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoZSByZW1vdGUgZXZlbnQgY29udGFpbnMuXG4gKi8gYXN5bmMgZnVuY3Rpb24gV2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB1dShuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cbiAgICAgICAgICAgICAgICBlLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLnljLmdldChlKTtcbiAgICAgICAgICAgIHMgJiYgKFxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgRih0LmFkZGVkRG9jdW1lbnRzLnNpemUgKyB0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA8PSAxKSwgXG4gICAgICAgICAgICB0LmFkZGVkRG9jdW1lbnRzLnNpemUgPiAwID8gcy5mYyA9ICEwIDogdC5tb2RpZmllZERvY3VtZW50cy5zaXplID4gMCA/IEYocy5mYykgOiB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDAgJiYgKEYocy5mYyksIFxuICAgICAgICAgICAgcy5mYyA9ICExKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgdWEobiwgdCwgZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCB2dCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcbiAqIHRoZSBjaGFuZ2UuXG4gKi8gZnVuY3Rpb24gSGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpO1xuICAgIC8vIElmIHdlIGFyZSB0aGUgc2Vjb25kYXJ5IGNsaWVudCwgd2UgZXhwbGljaXRseSBpZ25vcmUgdGhlIHJlbW90ZSBzdG9yZSdzXG4gICAgLy8gb25saW5lIHN0YXRlICh0aGUgbG9jYWwgY2xpZW50IG1heSBnbyBvZmZsaW5lLCBldmVuIHRob3VnaCB0aGUgcHJpbWFyeVxuICAgIC8vIHRhYiByZW1haW5zIG9ubGluZSkgYW5kIG9ubHkgYXBwbHkgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlIGZyb21cbiAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgaWYgKHMuaXNQcmltYXJ5Q2xpZW50ICYmIDAgLyogT25saW5lU3RhdGVTb3VyY2UuUmVtb3RlU3RvcmUgKi8gPT09IG4gfHwgIXMuaXNQcmltYXJ5Q2xpZW50ICYmIDEgLyogT25saW5lU3RhdGVTb3VyY2UuU2hhcmVkQ2xpZW50U3RhdGUgKi8gPT09IG4pIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBzLndjLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gcy52aWV3Lk11KGUpO1xuICAgICAgICAgICAgaS5zbmFwc2hvdCAmJiB0LnB1c2goaS5zbmFwc2hvdCk7XG4gICAgICAgIH0pKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgICAgICBuLm9ubGluZVN0YXRlID0gZTtcbiAgICAgICAgICAgIGxldCBzID0gITE7XG4gICAgICAgICAgICBuLnF1ZXJpZXMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbi5saXN0ZW5lcnMpIFxuICAgICAgICAgICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgICAgICAgICAgICAgIHQuTXUoZSkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICB9KSksIHMgJiYgeGMobik7XG4gICAgICAgIH0ocy5ldmVudE1hbmFnZXIsIGUpLCB0Lmxlbmd0aCAmJiBzLmRjLm51KHQpLCBzLm9ubGluZVN0YXRlID0gZSwgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVqZWN0cyB0aGUgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0SUQuIFRoaXMgY2FuIGJlIHRyaWdnZXJlZCBieSB0aGVcbiAqIGJhY2tlbmQgZm9yIGFueSBhY3RpdmUgdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldElEIGNvcnJlc3BvbmRzIHRvIG9uZSBwcmV2aW91c2x5IGluaXRpYXRlZCBieSB0aGVcbiAqIHVzZXIgYXMgcGFydCBvZiBUYXJnZXREYXRhIHBhc3NlZCB0byBsaXN0ZW4oKSBvbiBSZW1vdGVTdG9yZS5cbiAqIEBwYXJhbSBlcnIgLSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb25kaXRpb24gdGhhdCBoYXMgZm9yY2VkIHRoZSByZWplY3Rpb24uXG4gKiBOZWFybHkgYWx3YXlzIHRoaXMgd2lsbCBiZSBhbiBpbmRpY2F0aW9uIHRoYXQgdGhlIHVzZXIgaXMgbm8gbG9uZ2VyXG4gKiBhdXRob3JpemVkIHRvIHNlZSB0aGUgZGF0YSBtYXRjaGluZyB0aGUgdGFyZ2V0LlxuICovIGFzeW5jIGZ1bmN0aW9uIEpjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoZSwgXCJyZWplY3RlZFwiLCBuKTtcbiAgICBjb25zdCBpID0gcy55Yy5nZXQoZSksIHIgPSBpICYmIGkua2V5O1xuICAgIGlmIChyKSB7XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBXZSByZWFsbHkgb25seSBzaG91bGQgZG8gdGhlIGZvbGxvd2luZyBvbiBwZXJtaXNzaW9uXG4gICAgICAgIC8vIGRlbmllZCBlcnJvcnMsIGJ1dCB3ZSBkb24ndCBoYXZlIHRoZSBjYXVzZSBjb2RlIGhlcmUuXG4gICAgICAgIC8vIEl0J3MgYSBsaW1ibyBkb2MuIENyZWF0ZSBhIHN5bnRoZXRpYyBldmVudCBzYXlpbmcgaXQgd2FzIGRlbGV0ZWQuXG4gICAgICAgIC8vIFRoaXMgaXMga2luZCBvZiBhIGhhY2suIElkZWFsbHksIHdlIHdvdWxkIGhhdmUgYSBtZXRob2QgaW4gdGhlIGxvY2FsXG4gICAgICAgIC8vIHN0b3JlIHRvIHB1cmdlIGEgZG9jdW1lbnQuIEhvd2V2ZXIsIGl0IHdvdWxkIGJlIHRyaWNreSB0byBrZWVwIGFsbCBvZlxuICAgICAgICAvLyB0aGUgbG9jYWwgc3RvcmUncyBpbnZhcmlhbnRzIHdpdGggYW5vdGhlciBtZXRob2QuXG4gICAgICAgIGxldCB0ID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuICAgICAgICAvLyBUT0RPKGIvMjE3MTg5MjE2KTogVGhpcyBsaW1ibyBkb2N1bWVudCBzaG91bGQgaWRlYWxseSBoYXZlIGEgcmVhZCB0aW1lLFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIHBpY2tlZCB1cCBieSBhbnkgcmVhZC10aW1lIGJhc2VkIHNjYW5zLiBUaGUgYmFja2VuZCxcbiAgICAgICAgLy8gaG93ZXZlciwgZG9lcyBub3Qgc2VuZCBhIHJlYWQgdGltZSBmb3IgdGFyZ2V0IHJlbW92YWxzLlxuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChyLCBhbi5uZXdOb0RvY3VtZW50KHIsIHJ0Lm1pbigpKSk7XG4gICAgICAgIGNvbnN0IG4gPSBncygpLmFkZChyKSwgaSA9IG5ldyBtaShydC5taW4oKSwgXG4gICAgICAgIC8qIHRhcmdldENoYW5nZXM9ICovIG5ldyBNYXAsIFxuICAgICAgICAvKiB0YXJnZXRNaXNtYXRjaGVzPSAqLyBuZXcgcGUoZXQpLCB0LCBuKTtcbiAgICAgICAgYXdhaXQgV2MocywgaSksIFxuICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cbiAgICAgICAgLy8gV2Ugb25seSByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZyBhZnRlciB3ZSBzdWNjZXNzZnVsbHkgYXBwbGllZCB0aGVcbiAgICAgICAgLy8gUmVtb3RlRXZlbnQuIElmIGBhcHBseVJlbW90ZUV2ZW50KClgIHRocm93cywgd2Ugd2FudCB0byByZS1saXN0ZW4gdG9cbiAgICAgICAgLy8gdGhpcyBxdWVyeSB3aGVuIHRoZSBSZW1vdGVTdG9yZSByZXN0YXJ0cyB0aGUgV2F0Y2ggc3RyZWFtLCB3aGljaCBzaG91bGRcbiAgICAgICAgLy8gcmUtdHJpZ2dlciB0aGUgdGFyZ2V0IGZhaWx1cmUuXG4gICAgICAgIHMuZ2MgPSBzLmdjLnJlbW92ZShyKSwgcy55Yy5kZWxldGUoZSksIG9hKHMpO1xuICAgIH0gZWxzZSBhd2FpdCBsdShzLmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiBuYShzLCBlLCBuKSkpLmNhdGNoKHZ0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gWWModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gZS5iYXRjaC5iYXRjaElkO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBydShuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxuICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXG4gICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIGVhKG4sIHMsIC8qZXJyb3I9Ki8gbnVsbCksIHRhKG4sIHMpLCBuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUocywgXCJhY2tub3dsZWRnZWRcIiksIFxuICAgICAgICBhd2FpdCB1YShuLCB0KTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IHZ0KHQpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gWGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gTCh0KTtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVqZWN0IGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KChlID0+IChGKG51bGwgIT09IGUpLCBzID0gZS5rZXlzKCksIFxuICAgICAgICAgICAgICAgIG4ubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpKSkpLm5leHQoKCgpID0+IG4ubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUucmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIHMsIGUpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyh0LCBzKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHQsIHMpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXJnZXN0IChsYXRlc3QpIGJhdGNoIGlkIGluIG11dGF0aW9uIHF1ZXVlIHRoYXQgaXMgcGVuZGluZ1xuICogc2VydmVyIHJlc3BvbnNlLlxuICpcbiAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICovIChzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXG4gICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxuICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIGVhKHMsIGUsIG4pLCB0YShzLCBlKSwgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbiksIFxuICAgICAgICBhd2FpdCB1YShzLCB0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIGF3YWl0IHZ0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB1c2VyIGNhbGxiYWNrIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBtdXRhdGlvbnMgYXQgdGhlIG1vbWVudCBvZiBjYWxsaW5nXG4gKiBhcmUgYWNrbm93bGVkZ2VkIC5cbiAqLyBhc3luYyBmdW5jdGlvbiBaYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgZWMobi5yZW1vdGVTdG9yZSkgfHwgTihcIlN5bmNFbmdpbmVcIiwgXCJUaGUgbmV0d29yayBpcyBkaXNhYmxlZC4gVGhlIHRhc2sgcmV0dXJuZWQgYnkgJ2F3YWl0UGVuZGluZ1dyaXRlcygpJyB3aWxsIG5vdCBjb21wbGV0ZSB1bnRpbCB0aGUgbmV0d29yayBpcyBlbmFibGVkLlwiKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEwodCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZS5tdXRhdGlvblF1ZXVlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodCkpKTtcbiAgICAgICAgfShuLmxvY2FsU3RvcmUpO1xuICAgICAgICBpZiAoLTEgPT09IHQpIFxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXG4gICAgICAgIHJldHVybiB2b2lkIGUucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gbi5FYy5nZXQodCkgfHwgW107XG4gICAgICAgIHMucHVzaChlKSwgbi5FYy5zZXQodCwgcyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0gRWModCwgXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIik7XG4gICAgICAgIGUucmVqZWN0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXG4gKiBpZiB0aGVyZSBhcmUgYW55LlxuICovIGZ1bmN0aW9uIHRhKHQsIGUpIHtcbiAgICAodC5FYy5nZXQoZSkgfHwgW10pLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0LnJlc29sdmUoKTtcbiAgICB9KSksIHQuRWMuZGVsZXRlKGUpO1xufVxuXG4vKiogUmVqZWN0IGFsbCBvdXRzdGFuZGluZyBjYWxsYmFja3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgdG8gY29tcGxldGUuICovIGZ1bmN0aW9uIGVhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICBsZXQgaSA9IHMuVGNbcy5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAvLyBOT1RFOiBNdXRhdGlvbnMgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW5jZSB3b24ndCBoYXZlIGNhbGxiYWNrcywgc28gaXQnc1xuICAgIC8vIG9rYXkgZm9yIHRoZXJlIHRvIGJlIG5vIGNhbGxiYWNrIGZvciB0aGlzIElELlxuICAgICAgICBpZiAoaSkge1xuICAgICAgICBjb25zdCB0ID0gaS5nZXQoZSk7XG4gICAgICAgIHQgJiYgKG4gPyB0LnJlamVjdChuKSA6IHQucmVzb2x2ZSgpLCBpID0gaS5yZW1vdmUoZSkpLCBzLlRjW3MuY3VycmVudFVzZXIudG9LZXkoKV0gPSBpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbmEodCwgZSwgbiA9IG51bGwpIHtcbiAgICB0LnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSk7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuX2MuZ2V0KGUpKSB0LndjLmRlbGV0ZShzKSwgbiAmJiB0LmRjLlBjKHMsIG4pO1xuICAgIGlmICh0Ll9jLmRlbGV0ZShlKSwgdC5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgdC5JYy5JcyhlKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQuSWMuY29udGFpbnNLZXkoZSkgfHwgXG4gICAgICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgICAgIHNhKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzYSh0LCBlKSB7XG4gICAgdC5tYy5kZWxldGUoZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXG4gICAgY29uc3QgbiA9IHQuZ2MuZ2V0KGUpO1xuICAgIG51bGwgIT09IG4gJiYgKEp1KHQucmVtb3RlU3RvcmUsIG4pLCB0LmdjID0gdC5nYy5yZW1vdmUoZSksIHQueWMuZGVsZXRlKG4pLCBvYSh0KSk7XG59XG5cbmZ1bmN0aW9uIGlhKHQsIGUsIG4pIHtcbiAgICBmb3IgKGNvbnN0IHMgb2YgbikgaWYgKHMgaW5zdGFuY2VvZiBGYykgdC5JYy5hZGRSZWZlcmVuY2Uocy5rZXksIGUpLCByYSh0LCBzKTsgZWxzZSBpZiAocyBpbnN0YW5jZW9mIEJjKSB7XG4gICAgICAgIE4oXCJTeW5jRW5naW5lXCIsIFwiRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiBcIiArIHMua2V5KSwgdC5JYy5yZW1vdmVSZWZlcmVuY2Uocy5rZXksIGUpO1xuICAgICAgICB0LkljLmNvbnRhaW5zS2V5KHMua2V5KSB8fCBcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgIHNhKHQsIHMua2V5KTtcbiAgICB9IGVsc2UgTygpO1xufVxuXG5mdW5jdGlvbiByYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUua2V5LCBzID0gbi5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHQuZ2MuZ2V0KG4pIHx8IHQubWMuaGFzKHMpIHx8IChOKFwiU3luY0VuZ2luZVwiLCBcIk5ldyBkb2N1bWVudCBpbiBsaW1ibzogXCIgKyBuKSwgdC5tYy5hZGQocyksIFxuICAgIG9hKHQpKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbGlzdGVucyBmb3IgZG9jdW1lbnRzIGluIGxpbWJvIHRoYXQgYXJlIGVucXVldWVkIGZvciByZXNvbHV0aW9uLFxuICogc3ViamVjdCB0byBhIG1heGltdW0gbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMuXG4gKlxuICogV2l0aG91dCBib3VuZGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMsIHRoZSBzZXJ2ZXIgY2FuIGZhaWxcbiAqIHdpdGggXCJyZXNvdXJjZSBleGhhdXN0ZWRcIiBlcnJvcnMgd2hpY2ggY2FuIGxlYWQgdG8gcGF0aG9sb2dpY2FsIGNsaWVudFxuICogYmVoYXZpb3IgYXMgc2VlbiBpbiBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8yNjgzLlxuICovIGZ1bmN0aW9uIG9hKHQpIHtcbiAgICBmb3IgKDt0Lm1jLnNpemUgPiAwICYmIHQuZ2Muc2l6ZSA8IHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM7ICkge1xuICAgICAgICBjb25zdCBlID0gdC5tYy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgIHQubWMuZGVsZXRlKGUpO1xuICAgICAgICBjb25zdCBuID0gbmV3IGh0KHV0LmZyb21TdHJpbmcoZSkpLCBzID0gdC5BYy5uZXh0KCk7XG4gICAgICAgIHQueWMuc2V0KHMsIG5ldyBVYyhuKSksIHQuZ2MgPSB0LmdjLmluc2VydChuLCBzKSwgSHUodC5yZW1vdGVTdG9yZSwgbmV3IGNyKEpuKEduKG4ucGF0aCkpLCBzLCBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyAsIE90LmN0KSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB1YSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCksIGkgPSBbXSwgciA9IFtdLCBvID0gW107XG4gICAgcy53Yy5pc0VtcHR5KCkgfHwgKHMud2MuZm9yRWFjaCgoKHQsIHUpID0+IHtcbiAgICAgICAgby5wdXNoKHMuUmModSwgZSwgbikudGhlbigodCA9PiB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdmlld3MgaWYgdGhlcmUgYXJlIGFjdHVhbCBjaGFuZ2VzLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGNoYW5nZXMsIG9yIHdlIGFyZSBoYW5kbGluZyBhIGdsb2JhbCBzbmFwc2hvdCwgbm90aWZ5XG4gICAgICAgICAgICAvLyBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgcXVlcnkgc3RhdGUuXG4gICAgICAgICAgICAodCB8fCBuKSAmJiBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUodS50YXJnZXRJZCwgKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuZnJvbUNhY2hlKSA/IFwibm90LWN1cnJlbnRcIiA6IFwiY3VycmVudFwiKSwgXG4gICAgICAgICAgICB0KSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0dS5MaSh1LnRhcmdldElkLCB0KTtcbiAgICAgICAgICAgICAgICByLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgfSkpLCBhd2FpdCBQcm9taXNlLmFsbChvKSwgcy5kYy5udShpKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTCh0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IFJ0LmZvckVhY2goZSwgKGUgPT4gUnQuZm9yRWFjaChlLkZpLCAocyA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBlLnRhcmdldElkLCBzKSkpLm5leHQoKCgpID0+IFJ0LmZvckVhY2goZS5CaSwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCFEdCh0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIC8vIElmIGBub3RpZnlMb2NhbFZpZXdDaGFuZ2VzYCBmYWlscywgd2UgZGlkIG5vdCBhZHZhbmNlIHRoZSBzZXF1ZW5jZVxuICAgICAgICAgICAgLy8gbnVtYmVyIGZvciB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBpbmNsdWRlZCBpbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBtaWdodCB0cmlnZ2VyIHRoZW0gdG8gYmUgZGVsZXRlZCBlYXJsaWVyIHRoYW4gdGhleSBvdGhlcndpc2VcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUsIGJ1dCBpdCBzaG91bGQgbm90IGludmFsaWRhdGUgdGhlIGludGVncml0eSBvZiB0aGUgZGF0YS5cbiAgICAgICAgICAgIE4oXCJMb2NhbFN0b3JlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5KaS5nZXQoZSksIHMgPSB0LnNuYXBzaG90VmVyc2lvbiwgaSA9IHQud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocyk7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5KaSA9IG4uSmkuaW5zZXJ0KGUsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfShzLmxvY2FsU3RvcmUsIHIpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIGlmICghbi5jdXJyZW50VXNlci5pc0VxdWFsKGUpKSB7XG4gICAgICAgIE4oXCJTeW5jRW5naW5lXCIsIFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLCBlLnRvS2V5KCkpO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgaXUobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgbi5jdXJyZW50VXNlciA9IGUsIFxuICAgICAgICAvLyBGYWlscyB0YXNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyByZXF1ZXN0ZWQgYnkgcHJldmlvdXMgdXNlci5cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgdC5FYy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0LnJlamVjdChuZXcgVShxLkNBTkNFTExFRCwgZSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgdC5FYy5jbGVhcigpO1xuICAgICAgICB9KG4sIFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKSwgXG4gICAgICAgIC8vIFRPRE8oYi8xMTQyMjY0MTcpOiBDb25zaWRlciBjYWxsaW5nIHRoaXMgb25seSBpbiB0aGUgcHJpbWFyeSB0YWIuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaGFuZGxlVXNlckNoYW5nZShlLCB0LnJlbW92ZWRCYXRjaElkcywgdC5hZGRlZEJhdGNoSWRzKSwgYXdhaXQgdWEobiwgdC5lcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBuLnljLmdldChlKTtcbiAgICBpZiAocyAmJiBzLmZjKSByZXR1cm4gZ3MoKS5hZGQocy5rZXkpO1xuICAgIHtcbiAgICAgICAgbGV0IHQgPSBncygpO1xuICAgICAgICBjb25zdCBzID0gbi5fYy5nZXQoZSk7XG4gICAgICAgIGlmICghcykgcmV0dXJuIHQ7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi53Yy5nZXQoZSk7XG4gICAgICAgICAgICB0ID0gdC51bmlvbldpdGgocy52aWV3Lm5jKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIGhhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IGF3YWl0IGZ1KG4ubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBlLnZpZXcuaGMocyk7XG4gICAgcmV0dXJuIG4uaXNQcmltYXJ5Q2xpZW50ICYmIGlhKG4sIGUudGFyZ2V0SWQsIGkuY2MpLCBpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBuZXdseSBjaGFuZ2VkIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBhbmQgcmFpc2VzXG4gKiBzbmFwc2hvdHMgaWYgbmVlZGVkLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gbGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIHJldHVybiB3dShuLmxvY2FsU3RvcmUsIGUpLnRoZW4oKHQgPT4gdWEobiwgdCkpKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBtdXRhdGlvbiBzdGF0ZSB0byBhbiBleGlzdGluZyBiYXRjaC4gICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gZmEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBMKHQpLCByID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTCh0KSwgcyA9IEwobi5tdXRhdGlvblF1ZXVlKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcy5Tbih0LCBlKS5uZXh0KChlID0+IGUgPyBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0LCBlKSA6IFJ0LnJlc29sdmUobnVsbCkpKSkpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpO1xuICAgIG51bGwgIT09IHIgPyAoXCJwZW5kaW5nXCIgPT09IG4gPyBcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcbiAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXG4gICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cbiAgICBhd2FpdCBjYyhpLnJlbW90ZVN0b3JlKSA6IFwiYWNrbm93bGVkZ2VkXCIgPT09IG4gfHwgXCJyZWplY3RlZFwiID09PSBuID8gKFxuICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXG4gICAgLy8gb3RoZXIgY2xpZW50cy5cbiAgICBlYShpLCBlLCBzIHx8IG51bGwpLCB0YShpLCBlKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBMKEwodCkubXV0YXRpb25RdWV1ZSkuQ24oZSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgZSkpIDogTygpLCBhd2FpdCB1YShpLCByKSkgOiBcbiAgICAvLyBBIHRocm90dGxlZCB0YWIgbWF5IG5vdCBoYXZlIHNlZW4gdGhlIG11dGF0aW9uIGJlZm9yZSBpdCB3YXMgY29tcGxldGVkXG4gICAgLy8gYW5kIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUsIGluIHdoaWNoIGNhc2Ugd2Ugd29uJ3QgaGF2ZSBjYWNoZWRcbiAgICAvLyB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzLiBJbiB0aGlzIGNhc2Ugd2UgY2FuIHNhZmVseSBpZ25vcmUgdGhlIHVwZGF0ZVxuICAgIC8vIHNpbmNlIHRoYXQgbWVhbnMgd2UgZGlkbid0IGFwcGx5IHRoZSBtdXRhdGlvbiBsb2NhbGx5IGF0IGFsbCAoaWYgd2VcbiAgICAvLyBoYWQsIHdlIHdvdWxkIGhhdmUgY2FjaGVkIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMpLCBhbmQgc28gd2Ugd2lsbCBqdXN0XG4gICAgLy8gc2VlIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcyB2aWEgbm9ybWFsIHJlbW90ZSBkb2N1bWVudCB1cGRhdGVzXG4gICAgLy8gYXMgYXBwbGljYWJsZS5cbiAgICBOKFwiU3luY0VuZ2luZVwiLCBcIkNhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiBcIiArIGUpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gZGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIGlmIChwYShuKSwgSWEobiksICEwID09PSBlICYmICEwICE9PSBuLnZjKSB7XG4gICAgICAgIC8vIFNlY29uZGFyeSB0YWJzIG9ubHkgbWFpbnRhaW4gVmlld3MgZm9yIHRoZWlyIGxvY2FsIGxpc3RlbmVycyBhbmQgdGhlXG4gICAgICAgIC8vIFZpZXdzIGludGVybmFsIHN0YXRlIG1heSBub3QgYmUgMTAwJSBwb3B1bGF0ZWQgKGluIHBhcnRpY3VsYXJcbiAgICAgICAgLy8gc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgdHJhY2sgc3luY2VkRG9jdW1lbnRzLCB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGVcbiAgICAgICAgLy8gc2VydmVyIGNvbnNpZGVycyB0byBiZSBpbiB0aGUgdGFyZ2V0KS4gU28gd2hlbiBhIHNlY29uZGFyeSBiZWNvbWVzXG4gICAgICAgIC8vIHByaW1hcnksIHdlIG5lZWQgdG8gbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBhbGwgdmlld3MgZm9yIGFsbCB0YXJnZXRzXG4gICAgICAgIC8vIG1hdGNoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAgICBjb25zdCB0ID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSwgZSA9IGF3YWl0IHdhKG4sIHQudG9BcnJheSgpKTtcbiAgICAgICAgbi52YyA9ICEwLCBhd2FpdCB5YyhuLnJlbW90ZVN0b3JlLCAhMCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBIdShuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9IGVsc2UgaWYgKCExID09PSBlICYmICExICE9PSBuLnZjKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgbGV0IGUgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbi5fYy5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0xvY2FsUXVlcnlUYXJnZXQoaSkgPyB0LnB1c2goaSkgOiBlID0gZS50aGVuKCgoKSA9PiAobmEobiwgaSksIFxuICAgICAgICAgICAgbHUobi5sb2NhbFN0b3JlLCBpLCBcbiAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApKSkpLCBKdShuLnJlbW90ZVN0b3JlLCBpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBlLCBhd2FpdCB3YShuLCB0KSwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgZS55Yy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIEp1KGUucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICAgICAgfSkpLCBlLkljLlRzKCksIGUueWMgPSBuZXcgTWFwLCBlLmdjID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVjb25jaWxlIHRoZSBxdWVyeSB2aWV3cyBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgdGFyZ2V0cyB3aXRoIHRoZSBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS4gUmFpc2VzIHNuYXBzaG90cyBmb3IgYW55IGNoYW5nZXMgdGhhdCBhZmZlY3QgdGhlIGxvY2FsXG4gKiBjbGllbnQgYW5kIHJldHVybnMgdGhlIHVwZGF0ZWQgc3RhdGUgb2YgYWxsIHRhcmdldCdzIHF1ZXJ5IGRhdGEuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb25cbiAqIEBwYXJhbSB0YXJnZXRzIC0gdGhlIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIHZpZXdzIHRoYXQgbmVlZCB0byBiZSByZWNvbXB1dGVkXG4gKiBAcGFyYW0gdHJhbnNpdGlvblRvUHJpbWFyeSAtIGB0cnVlYCBpZmYgdGhlIHRhYiB0cmFuc2l0aW9ucyBmcm9tIGEgc2Vjb25kYXJ5XG4gKiB0YWIgdG8gYSBwcmltYXJ5IHRhYlxuICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuKSwgbi52YyA9ICExLCBhd2FpdCB5YyhuLnJlbW90ZVN0b3JlLCAhMSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB3YSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCksIGkgPSBbXSwgciA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBjb25zdCBuID0gcy5fYy5nZXQodCk7XG4gICAgICAgIGlmIChuICYmIDAgIT09IG4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IGhhdmUgYSBsb2NhbCBWaWV3LCB3ZSBmZXRjaCB0aGVpciBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICAvLyBmcm9tIExvY2FsU3RvcmUgKGFzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHRoZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQpIGFuZCByZWNvbmNpbGUgdGhlaXIgdmlld3Mgd2l0aCB0aGUgcGVyc2lzdGVkXG4gICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXG4gICAgICAgICAgICBlID0gYXdhaXQgaHUocy5sb2NhbFN0b3JlLCBKbihuWzBdKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBzLndjLmdldCh0KSwgbiA9IGF3YWl0IGhhKHMsIGUpO1xuICAgICAgICAgICAgICAgIG4uc25hcHNob3QgJiYgci5wdXNoKG4uc25hcHNob3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBuZXZlciBleGVjdXRlZCBvbiB0aGlzIGNsaWVudCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gYWxsb2NhdGUgdGhlIHRhcmdldCBpbiBMb2NhbFN0b3JlIGFuZCBpbml0aWFsaXplIGEgbmV3IFZpZXcuXG4gICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgZHUocy5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgICAgIGUgPSBhd2FpdCBodShzLmxvY2FsU3RvcmUsIG4pLCBhd2FpdCBRYyhzLCBfYShuKSwgdCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEsIGUucmVzdW1lVG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGkucHVzaChlKTtcbiAgICB9XG4gICAgcmV0dXJuIHMuZGMubnUociksIGk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGBRdWVyeWAgb2JqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBgVGFyZ2V0YC4gVGhlcmUgaXMgbm8gd2F5IHRvXG4gKiBvYnRhaW4gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIHNvIHdlIHN5bnRoZXNpemUgYSBgUXVlcnlgIGZyb20gdGhlIGBUYXJnZXRgXG4gKiBvYmplY3QuXG4gKlxuICogVGhlIHN5bnRoZXNpemVkIHJlc3VsdCBtaWdodCBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgYnV0XG4gKiBzaW5jZSB0aGUgc3ludGhlc2l6ZWQgYFF1ZXJ5YCBzaG91bGQgcmV0dXJuIHRoZSBzYW1lIHJlc3VsdHMgYXMgdGhlXG4gKiBvcmlnaW5hbCBvbmUgKG9ubHkgdGhlIHByZXNlbnRhdGlvbiBvZiByZXN1bHRzIG1pZ2h0IGRpZmZlciksIHRoZSBwb3RlbnRpYWxcbiAqIGRpZmZlcmVuY2Ugd2lsbCBub3QgY2F1c2UgaXNzdWVzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gX2EodCkge1xuICAgIHJldHVybiBLbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0Lm9yZGVyQnksIHQuZmlsdGVycywgdC5saW1pdCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIG1hKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICByZXR1cm4gTChMKGUubG9jYWxTdG9yZSkucGVyc2lzdGVuY2UpLiRpKCk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBnYSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IEwodCk7XG4gICAgaWYgKGkudmMpIFxuICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcbiAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgIHJldHVybiB2b2lkIE4oXCJTeW5jRW5naW5lXCIsIFwiSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uXCIpO1xuICAgIGNvbnN0IHIgPSBpLl9jLmdldChlKTtcbiAgICBpZiAociAmJiByLmxlbmd0aCA+IDApIHN3aXRjaCAobikge1xuICAgICAgY2FzZSBcImN1cnJlbnRcIjpcbiAgICAgIGNhc2UgXCJub3QtY3VycmVudFwiOlxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgd3UoaS5sb2NhbFN0b3JlLCBzcyhyWzBdKSksIHMgPSBtaS5jcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZShlLCBcImN1cnJlbnRcIiA9PT0gbiwgVmUuRU1QVFlfQllURV9TVFJJTkcpO1xuICAgICAgICAgICAgYXdhaXQgdWEoaSwgdCwgcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgbHUoaS5sb2NhbFN0b3JlLCBlLCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCBuYShpLCBlLCBzKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIE8oKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiB5YSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHBhKHQpO1xuICAgIGlmIChzLnZjKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBpZiAocy5fYy5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAvLyBBIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gYWRkZWQgaW4gYSBwcmV2aW91cyBhdHRlbXB0XG4gICAgICAgICAgICAgICAgTihcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgZHUocy5sb2NhbFN0b3JlLCB0KSwgbiA9IGF3YWl0IGh1KHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICBhd2FpdCBRYyhzLCBfYShlKSwgbi50YXJnZXRJZCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEsIG4ucmVzdW1lVG9rZW4pLCBIdShzLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cbiAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cbiAgICAgICAgcy5fYy5oYXModCkgJiYgXG4gICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXG4gICAgICAgIGF3YWl0IGx1KHMubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBKdShzLnJlbW90ZVN0b3JlLCB0KSwgbmEocywgdCk7XG4gICAgICAgIH0pKS5jYXRjaCh2dCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwYSh0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBXYy5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gYWEuYmluZChudWxsLCBlKSwgXG4gICAgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuID0gSmMuYmluZChudWxsLCBlKSwgZS5kYy5udSA9IERjLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBcbiAgICBlLmRjLlBjID0gQ2MuYmluZChudWxsLCBlLmV2ZW50TWFuYWdlciksIGU7XG59XG5cbmZ1bmN0aW9uIElhKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICByZXR1cm4gZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBZYy5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZSA9IFhjLmJpbmQobnVsbCwgZSksIFxuICAgIGU7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIFNESy4gVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGJ1bmRsZSBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gU3luY0VuZ2luZSB0byB1c2UuXG4gKiBAcGFyYW0gYnVuZGxlUmVhZGVyIC0gQnVuZGxlIHRvIGxvYWQgaW50byB0aGUgU0RLLlxuICogQHBhcmFtIHRhc2sgLSBMb2FkQnVuZGxlVGFzayB1c2VkIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyB0byBwdWJsaWMgQVBJLlxuICovIGZ1bmN0aW9uIFRhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIChcbiAgICAvKiogTG9hZHMgYSBidW5kbGUgYW5kIHJldHVybnMgdGhlIGxpc3Qgb2YgYWZmZWN0ZWQgY29sbGVjdGlvbiBncm91cHMuICovXG4gICAgYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGUuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEwodCksIHMgPSBOaShlLmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLnFzLmdldEJ1bmRsZU1ldGFkYXRhKHQsIGUuaWQpKSkudGhlbigodCA9PiAhIXQgJiYgdC5jcmVhdGVUaW1lLmNvbXBhcmVUbyhzKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovICh0LmxvY2FsU3RvcmUsIHMpKSByZXR1cm4gYXdhaXQgZS5jbG9zZSgpLCBuLl9jb21wbGV0ZVdpdGgoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IHQudG90YWxCeXRlcyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXM6IHQudG90YWxCeXRlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHMpKSwgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICAgICAgbi5fdXBkYXRlUHJvZ3Jlc3MoT2MocykpO1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyAkYyhzLCB0LmxvY2FsU3RvcmUsIGUuc2VyaWFsaXplcik7XG4gICAgICAgICAgICBsZXQgciA9IGF3YWl0IGUuYmMoKTtcbiAgICAgICAgICAgIGZvciAoO3I7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBpLnp1KHIpO1xuICAgICAgICAgICAgICAgIHQgJiYgbi5fdXBkYXRlUHJvZ3Jlc3ModCksIHIgPSBhd2FpdCBlLmJjKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHVhKHQsIG8uSnUsIFxuICAgICAgICAgICAgLyogcmVtb3RlRXZlbnQgKi8gdm9pZCAwKSwgXG4gICAgICAgICAgICAvLyBTYXZlIG1ldGFkYXRhLCBzbyBsb2FkaW5nIHRoZSBzYW1lIGJ1bmRsZSB3aWxsIHNraXAuXG4gICAgICAgICAgICBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIGJ1bmRsZVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLnFzLnNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGBOYW1lZFF1ZXJ5YCBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gcXVlcnkgbmFtZS4gUHJvbWlzZVxuICogcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIGlmIG5vIHBlcnNpc3RlZCBkYXRhIGNhbiBiZSBmb3VuZC5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSwgbi5fY29tcGxldGVXaXRoKG8ucHJvZ3Jlc3MpLCBQcm9taXNlLnJlc29sdmUoby5IdSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBNKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHt0fWApLCBuLl9mYWlsV2l0aCh0KSwgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHMsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLm5vdGlmeUJ1bmRsZUxvYWRlZCh0KTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIEVhIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IEZ1KHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5jcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSh0KSwgXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLmNyZWF0ZVBlcnNpc3RlbmNlKHQpLCBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMubG9jYWxTdG9yZSA9IHRoaXMuY3JlYXRlTG9jYWxTdG9yZSh0KSwgXG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLmNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKHQsIHRoaXMubG9jYWxTdG9yZSksIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyID0gdGhpcy5jcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIodCwgdGhpcy5sb2NhbFN0b3JlKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIodCwgZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUodCkge1xuICAgICAgICByZXR1cm4gc3UodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IGV1LCB0LmluaXRpYWxVc2VyLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgS28oUW8uenMsIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBidTtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG5jbGFzcyBBYSBleHRlbmRzIEVhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0O1xuICAgIH1cbiAgICBjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlcih0LCBlKSB7XG4gICAgICAgIEYodGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSBpbnN0YW5jZW9mIGpvKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBwbyhuLCB0LmFzeW5jUXVldWUsIGUpO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBzby53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogc28uREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBLbygodCA9PiBqby56cyh0LCBlKSksIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggSW5kZXhlZERCIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIHZhIGV4dGVuZHMgRWEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5WYyA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCksIGF3YWl0IHRoaXMuVmMuaW5pdGlhbGl6ZSh0aGlzLCB0KSwgXG4gICAgICAgIC8vIEVucXVldWUgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBzZXNzaW9uXG4gICAgICAgIGF3YWl0IElhKHRoaXMuVmMuc3luY0VuZ2luZSksIGF3YWl0IGNjKHRoaXMuVmMucmVtb3RlU3RvcmUpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5JaSgoKCkgPT4gKHRoaXMuZ2NTY2hlZHVsZXIgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KCksIFxuICAgICAgICB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciAmJiAhdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUodCkge1xuICAgICAgICByZXR1cm4gc3UodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IGV1LCB0LmluaXRpYWxVc2VyLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgcG8obiwgdC5hc3luY1F1ZXVlLCBlKTtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyAkdChlLCB0aGlzLnBlcnNpc3RlbmNlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNdCh0LmFzeW5jUXVldWUsIG4pO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBabyh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksIG4gPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBzby53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogc28uREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBKbyh0aGlzLnN5bmNocm9uaXplVGFicywgZSwgdC5jbGllbnRJZCwgbiwgdC5hc3luY1F1ZXVlLCAkdSgpLCBPdSgpLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIGNyZWF0ZVNoYXJlZENsaWVudFN0YXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBidTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBtdWx0aS10YWIgSW5kZXhlZERCXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBJbiB0aGUgbGVnYWN5IGNsaWVudCwgdGhpcyBwcm92aWRlciBpcyB1c2VkIHRvIHByb3ZpZGUgYm90aCBtdWx0aS10YWIgYW5kXG4gKiBub24tbXVsdGktdGFiIHBlcnNpc3RlbmNlIHNpbmNlIHdlIGNhbm5vdCB0ZWxsIGF0IGJ1aWxkIHRpbWUgd2hldGhlclxuICogYHN5bmNocm9uaXplVGFic2Agd2lsbCBiZSBlbmFibGVkLlxuICovIGNsYXNzIFJhIGV4dGVuZHMgdmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgLyogZm9yY2VPd25lcnNoaXA9ICovICExKSwgdGhpcy5WYyA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICEwO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuVmMuc3luY0VuZ2luZTtcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIFB1ICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBqcjogZmEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIHpyOiBnYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgV3I6IHlhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICAkaTogbWEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIFFyOiBsYS5iaW5kKG51bGwsIGUpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLklpKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRhKHRoaXMuVmMuc3luY0VuZ2luZSwgdCksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKHQgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQoKSA6IHQgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpLCBcbiAgICAgICAgICAgIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyICYmICh0ICYmICF0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydGVkID8gdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSA6IHQgfHwgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAkdSgpO1xuICAgICAgICBpZiAoIVB1LkQoZSkpIHRocm93IG5ldyBVKHEuVU5JTVBMRU1FTlRFRCwgXCJJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuXCIpO1xuICAgICAgICBjb25zdCBuID0gWm8odC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpO1xuICAgICAgICByZXR1cm4gbmV3IFB1KGUsIHQuYXN5bmNRdWV1ZSwgbiwgdC5jbGllbnRJZCwgdC5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIFBhIHtcbiAgICBhc3luYyBpbml0aWFsaXplKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSB0LmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0LnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZShlKSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUoZSksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKGUpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUoZSwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICF0LnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gdCA9PiBIYyh0aGlzLnN5bmNFbmdpbmUsIHQsIDEgLyogT25saW5lU3RhdGVTb3VyY2UuU2hhcmVkQ2xpZW50U3RhdGUgKi8pLCBcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IGNhLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IHljKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBiYztcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEZ1KHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gKHMgPSB0LmRhdGFiYXNlSW5mbywgbmV3IE11KHMpKTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgS3UodCwgZSwgbiwgcyk7XG4gICAgICAgIH0odC5hdXRoQ3JlZGVudGlhbHMsIHQuYXBwQ2hlY2tDcmVkZW50aWFscywgbiwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB0aGlzLmxvY2FsU3RvcmUsIG4gPSB0aGlzLmRhdGFzdG9yZSwgcyA9IHQuYXN5bmNRdWV1ZSwgaSA9IHQgPT4gSGModGhpcy5zeW5jRW5naW5lLCB0LCAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovKSwgXG4gICAgICAgIHIgPSBTdS5EKCkgPyBuZXcgU3UgOiBuZXcgVnUsIG5ldyBqdShlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgdmFyIGUsIG4sIHMsIGksIHI7XG4gICAgICAgIC8qKiBSZS1lbmFibGVzIHRoZSBuZXR3b3JrLiBJZGVtcG90ZW50LiAqLyAgICB9XG4gICAgY3JlYXRlU3luY0VuZ2luZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgICAgICBzLCBpLCByLCBvKSB7XG4gICAgICAgICAgICBjb25zdCB1ID0gbmV3IEtjKHQsIGUsIG4sIHMsIGksIHIpO1xuICAgICAgICAgICAgcmV0dXJuIG8gJiYgKHUudmMgPSAhMCksIHU7XG4gICAgICAgIH0odGhpcy5sb2NhbFN0b3JlLCB0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLmV2ZW50TWFuYWdlciwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSwgdC5pbml0aWFsVXNlciwgdC5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucywgZSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgTihcIlJlbW90ZVN0b3JlXCIsIFwiUmVtb3RlU3RvcmUgc2h1dHRpbmcgZG93bi5cIiksIGUudnUuYWRkKDUgLyogT2ZmbGluZUNhdXNlLlNodXRkb3duICovKSwgXG4gICAgICAgICAgICBhd2FpdCBXdShlKSwgZS5QdS5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIGUuYnUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gYmEodCwgZSA9IDEwMjQwKSB7XG4gICAgbGV0IG4gPSAwO1xuICAgIC8vIFRoZSBUeXBlU2NyaXB0IGRlZmluaXRpb24gZm9yIFJlYWRhYmxlU3RyZWFtUmVhZGVyIGNoYW5nZWQuIFdlIHVzZVxuICAgIC8vIGBhbnlgIGhlcmUgdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGNvbXBpbGUgd2l0aCBkaWZmZXJlbnQgdmVyc2lvbnMuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNDI5NzBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhc3luYyByZWFkKCkge1xuICAgICAgICAgICAgaWYgKG4gPCB0LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5zbGljZShuLCBuICsgZSksXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiArPSBlLCBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY2FuY2VsKCkge30sXG4gICAgICAgIHJlbGVhc2VMb2NrKCkge30sXG4gICAgICAgIGNsb3NlZDogUHJvbWlzZS5yZXNvbHZlKClcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBPbiB3ZWIsIGEgYFJlYWRhYmxlU3RyZWFtYCBpcyB3cmFwcGVkIGFyb3VuZCBieSBhIGBCeXRlU3RyZWFtUmVhZGVyYC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qXG4gKiBBIHdyYXBwZXIgaW1wbGVtZW50YXRpb24gb2YgT2JzZXJ2ZXI8VD4gdGhhdCB3aWxsIGRpc3BhdGNoIGV2ZW50c1xuICogYXN5bmNocm9ub3VzbHkuIFRvIGFsbG93IGltbWVkaWF0ZSBzaWxlbmNpbmcsIGEgbXV0ZSBjYWxsIGlzIGFkZGVkIHdoaWNoXG4gKiBjYXVzZXMgZXZlbnRzIHNjaGVkdWxlZCB0byBubyBsb25nZXIgYmUgcmFpc2VkLlxuICovXG5jbGFzcyBWYSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHNldCB0byB0cnVlLCB3aWxsIG5vdCByYWlzZSBmdXR1cmUgZXZlbnRzLiBOZWNlc3NhcnkgdG8gZGVhbCB3aXRoXG4gICAgICAgICAqIGFzeW5jIGRldGFjaG1lbnQgb2YgbGlzdGVuZXIuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm11dGVkID0gITE7XG4gICAgfVxuICAgIG5leHQodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm5leHQgJiYgdGhpcy5TYyh0aGlzLm9ic2VydmVyLm5leHQsIHQpO1xuICAgIH1cbiAgICBlcnJvcih0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZXJyb3IgPyB0aGlzLlNjKHRoaXMub2JzZXJ2ZXIuZXJyb3IsIHQpIDogayhcIlVuY2F1Z2h0IEVycm9yIGluIHNuYXBzaG90IGxpc3RlbmVyOlwiLCB0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBEYygpIHtcbiAgICAgICAgdGhpcy5tdXRlZCA9ICEwO1xuICAgIH1cbiAgICBTYyh0LCBlKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgfHwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tdXRlZCB8fCB0KGUpO1xuICAgICAgICB9KSwgMCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGJ1bmRsZS5cbiAqXG4gKiBUYWtlcyBhIGJ1bmRsZSBzdHJlYW0gb3IgYnVmZmVyLCBhbmQgcHJlc2VudHMgYWJzdHJhY3Rpb25zIHRvIHJlYWQgYnVuZGxlZFxuICogZWxlbWVudHMgb3V0IG9mIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQuXG4gKi8gY2xhc3MgU2Ege1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgcmVhZGVyIHRvIHJlYWQgZnJvbSB1bmRlcmx5aW5nIGJpbmFyeSBidW5kbGUgZGF0YSBzb3VyY2UuICovXG4gICAgdCwgZSkge1xuICAgICAgICB0aGlzLkNjID0gdCwgdGhpcy5zZXJpYWxpemVyID0gZSwgXG4gICAgICAgIC8qKiBDYWNoZWQgYnVuZGxlIG1ldGFkYXRhLiAqL1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IEssIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMueGMgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMuTmMoKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHQgJiYgdC5RdSgpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKHQuR3UubWV0YWRhdGEpIDogdGhpcy5tZXRhZGF0YS5yZWplY3QobmV3IEVycm9yKGBUaGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYnVuZGxlIGlzIG5vdCBhIG1ldGFkYXRhLCBpdCBpc1xcbiAgICAgICAgICAgICAke0pTT04uc3RyaW5naWZ5KG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuR3UpfWApKTtcbiAgICAgICAgfSksICh0ID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KHQpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5DYy5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIGJjKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMuTmMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyBOYygpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMua2MoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy54Yy5kZWNvZGUodCksIG4gPSBOdW1iZXIoZSk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMuTWMoYGxlbmd0aCBzdHJpbmcgKCR7ZX0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IHRoaXMuJGMobik7XG4gICAgICAgIHJldHVybiBuZXcga2MoSlNPTi5wYXJzZShzKSwgdC5sZW5ndGggKyBuKTtcbiAgICB9XG4gICAgLyoqIEZpcnN0IGluZGV4IG9mICd7JyBmcm9tIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlci4gKi8gICAgT2MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5maW5kSW5kZXgoKHQgPT4gdCA9PT0gXCJ7XCIuY2hhckNvZGVBdCgwKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGludGVybmFsIGJ1ZmZlciwgdW50aWwgdGhlIGZpcnN0ICd7JywgYW5kXG4gICAgICogcmV0dXJuIHRoZSBjb250ZW50LlxuICAgICAqXG4gICAgICogSWYgcmVhY2hlZCBlbmQgb2YgdGhlIHN0cmVhbSwgcmV0dXJucyBhIG51bGwuXG4gICAgICovICAgIGFzeW5jIGtjKCkge1xuICAgICAgICBmb3IgKDt0aGlzLk9jKCkgPCAwOyApIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLkZjKCkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYW5kIHRoZXJlXG4gICAgICAgIC8vIGhhcHBlbnMgdG8gYmUgbm8gbW9yZSBkYXRhIHRvIHByb2Nlc3MuXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLk9jKCk7XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYnV0IHN0aWxsXG4gICAgICAgIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW4gYnJhY2tldC5cbiAgICAgICAgICAgICAgICB0IDwgMCAmJiB0aGlzLk1jKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIGEgbGVuZ3RoIHN0cmluZyBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gYSBzcGVjaWZpZWQgcG9zaXRpb24gZnJvbSB0aGUgaW50ZXJuYWwgYnVmZmVyLCBmb3IgYSBzcGVjaWZpZWRcbiAgICAgKiBudW1iZXIgb2YgYnl0ZXMsIHB1bGxpbmcgbW9yZSBkYXRhIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtIGlmIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgZGVjb2RlZCBmcm9tIHRoZSByZWFkIGJ5dGVzLlxuICAgICAqLyAgICBhc3luYyAkYyh0KSB7XG4gICAgICAgIGZvciAoO3RoaXMuYnVmZmVyLmxlbmd0aCA8IHQ7ICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5GYygpICYmIHRoaXMuTWMoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gbW9yZSBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZSA9IHRoaXMueGMuZGVjb2RlKHRoaXMuYnVmZmVyLnNsaWNlKDAsIHQpKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBqc29uIHN0cmluZy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSh0KSwgZTtcbiAgICB9XG4gICAgTWModCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRocm93IHRoaXMuQ2MuY2FuY2VsKCksIG5ldyBFcnJvcihgSW52YWxpZCBidW5kbGUgZm9ybWF0OiAke3R9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1bGxzIG1vcmUgZGF0YSBmcm9tIHVuZGVybHlpbmcgc3RyZWFtIHRvIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHN0cmVhbSBpcyBmaW5pc2hlZC5cbiAgICAgKi8gICAgYXN5bmMgRmMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLkNjLnJlYWQoKTtcbiAgICAgICAgaWYgKCF0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5sZW5ndGggKyB0LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICBlLnNldCh0aGlzLmJ1ZmZlciksIGUuc2V0KHQudmFsdWUsIHRoaXMuYnVmZmVyLmxlbmd0aCksIHRoaXMuYnVmZmVyID0gZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5kb25lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xuICogcGVyZm9ybSBhbmQgdGhlIGJhc2UgdmVyc2lvbnMgZm9yIGFueSBkb2N1bWVudHMgcmVhZC5cbiAqL1xuY2xhc3MgRGEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0LCBcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IG5ldyBNYXAsIHRoaXMubXV0YXRpb25zID0gW10sIHRoaXMuY29tbWl0dGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgdGhlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIGFzeW5jIGxvb2t1cCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIik7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gTCh0KSwgcyA9IExpKG4uc2VyaWFsaXplcikgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IGUubWFwKCh0ID0+ICRpKG4uc2VyaWFsaXplciwgdCkpKVxuICAgICAgICAgICAgfSwgciA9IGF3YWl0IG4udm8oXCJCYXRjaEdldERvY3VtZW50c1wiLCBzLCBpLCBlLmxlbmd0aCksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gR2kobi5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgICAgICBvLnNldChlLmtleS50b1N0cmluZygpLCBlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIEYoISFlKSwgdS5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpLCB1O1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB0aGlzLnJlY29yZFZlcnNpb24odCkpKSwgZTtcbiAgICB9XG4gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMud3JpdGUobmV3IFlzKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5kZWxldGUoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBodC5mcm9tUGF0aChlKTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IFhzKG4sIHRoaXMucHJlY29uZGl0aW9uKG4pKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEwodCksIHMgPSBMaShuLnNlcmlhbGl6ZXIpICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgd3JpdGVzOiBlLm1hcCgodCA9PiBqaShuLnNlcmlhbGl6ZXIsIHQpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLklvKFwiQ29tbWl0XCIsIHMsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIGUgPSB0LnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0LmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBPKCk7XG4gICAgICAgICAgICAvLyBSZXByZXNlbnQgYSBkZWxldGVkIGRvYyB1c2luZyBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICBlID0gcnQubWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LmtleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKG4pKSBcbiAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNhY3Rpb24gd2lsbCBmYWlsIG5vIG1hdHRlciB3aGF0LlxuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5BQk9SVEVELCBcIkRvY3VtZW50IHZlcnNpb24gY2hhbmdlZCBiZXR3ZWVuIHR3byByZWFkcy5cIik7XG4gICAgICAgIH0gZWxzZSB0aGlzLnJlYWRWZXJzaW9ucy5zZXQodC5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gb2YgdGhpcyBkb2N1bWVudCB3aGVuIGl0IHdhcyByZWFkIGluIHRoaXMgdHJhbnNhY3Rpb24sXG4gICAgICogYXMgYSBwcmVjb25kaXRpb24sIG9yIG5vIHByZWNvbmRpdGlvbiBpZiBpdCB3YXMgbm90IHJlYWQuXG4gICAgICovICAgIHByZWNvbmRpdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuICF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUgPyBlLmlzRXF1YWwocnQubWluKCkpID8gRnMuZXhpc3RzKCExKSA6IEZzLnVwZGF0ZVRpbWUoZSkgOiBGcy5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUpIHtcbiAgICAgICAgICAgIGlmIChlLmlzRXF1YWwocnQubWluKCkpKSBcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxuICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XG4gICAgICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIGJhc2UgcHJlY29uZGl0aW9uIG9uIGRvY3VtZW50IHVwZGF0ZSB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZzLnVwZGF0ZVRpbWUoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBGcy5leGlzdHMoITApO1xuICAgIH1cbiAgICB3cml0ZSh0KSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLnB1c2godCk7XG4gICAgfVxuICAgIGVuc3VyZUNvbW1pdE5vdENhbGxlZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXG4gKiB3aXRoIGJhY2tvZmYuXG4gKi8gY2xhc3MgQ2Ege1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy5kYXRhc3RvcmUgPSBlLCB0aGlzLm9wdGlvbnMgPSBuLCB0aGlzLnVwZGF0ZUZ1bmN0aW9uID0gcywgXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBpLCB0aGlzLkJjID0gbi5tYXhBdHRlbXB0cywgdGhpcy5xbyA9IG5ldyBCdSh0aGlzLmFzeW5jUXVldWUsIFwidHJhbnNhY3Rpb25fcmV0cnlcIiAvKiBUaW1lcklkLlRyYW5zYWN0aW9uUmV0cnkgKi8pO1xuICAgIH1cbiAgICAvKiogUnVucyB0aGUgdHJhbnNhY3Rpb24gYW5kIHNldHMgdGhlIHJlc3VsdCBvbiBkZWZlcnJlZC4gKi8gICAgcnVuKCkge1xuICAgICAgICB0aGlzLkJjIC09IDEsIHRoaXMuTGMoKTtcbiAgICB9XG4gICAgTGMoKSB7XG4gICAgICAgIHRoaXMucW8uTm8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRGEodGhpcy5kYXRhc3RvcmUpLCBlID0gdGhpcy5xYyh0KTtcbiAgICAgICAgICAgIGUgJiYgZS50aGVuKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdC5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZShlKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLlVjKHQpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLlVjKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHFjKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKHQpO1xuICAgICAgICAgICAgcmV0dXJuICFGdChlKSAmJiBlLmNhdGNoICYmIGUudGhlbiA/IGUgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIFVjKHQpIHtcbiAgICAgICAgdGhpcy5CYyA+IDAgJiYgdGhpcy5LYyh0KSA/ICh0aGlzLkJjIC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5MYygpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QodCk7XG4gICAgfVxuICAgIEtjKHQpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUpIHtcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gXCJhYm9ydGVkXCIgPT09IGUgfHwgXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIgPT09IGUgfHwgXCJhbHJlYWR5LWV4aXN0c1wiID09PSBlIHx8ICFvaShlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBGaXJlc3RvcmVDbGllbnQgaXMgYSB0b3AtbGV2ZWwgY2xhc3MgdGhhdCBjb25zdHJ1Y3RzIGFuZCBvd25zIGFsbCBvZiB0aGUgLy9cbiAqIHBpZWNlcyBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgLy9cbiAqIGFzeW5jIHF1ZXVlIHRoYXQgaXMgc2hhcmVkIGJ5IGFsbCBvZiB0aGUgb3RoZXIgY29tcG9uZW50cyBpbiB0aGUgc3lzdGVtLiAvL1xuICovXG5jbGFzcyB4YSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgXG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzIHF1ZXVlIHJlc3BvbnNpYmxlIGZvciBhbGwgb2Ygb3VyIGludGVybmFsIHByb2Nlc3NpbmcuIFdoZW5cbiAgICAgKiB3ZSBnZXQgaW5jb21pbmcgd29yayBmcm9tIHRoZSB1c2VyICh2aWEgcHVibGljIEFQSSkgb3IgdGhlIG5ldHdvcmtcbiAgICAgKiAoaW5jb21pbmcgR1JQQyBtZXNzYWdlcyksIHdlIHNob3VsZCBhbHdheXMgc2NoZWR1bGUgb250byB0aGlzIHF1ZXVlLlxuICAgICAqIFRoaXMgZW5zdXJlcyBhbGwgb2Ygb3VyIHdvcmsgaXMgcHJvcGVybHkgc2VyaWFsaXplZCAoZS5nLiB3ZSBkb24ndFxuICAgICAqIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgb3BlcmF0aW9uIHdoaWxlIHRoZSBwcmV2aW91cyBvbmUgaXMgd2FpdGluZyBmb3JcbiAgICAgKiBhbiBhc3luYyBJL08gdG8gY29tcGxldGUpLlxuICAgICAqL1xuICAgIG4sIHMpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMgPSB0LCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLmRhdGFiYXNlSW5mbyA9IHMsIFxuICAgICAgICB0aGlzLnVzZXIgPSBWLlVOQVVUSEVOVElDQVRFRCwgdGhpcy5jbGllbnRJZCA9IHR0LkEoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIHRoaXMuYXV0aENyZWRlbnRpYWxzLnN0YXJ0KG4sIChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCB1c2VyPVwiLCB0LnVpZCksIGF3YWl0IHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lcih0KSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSB0O1xuICAgICAgICB9KSksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zdGFydChuLCAodCA9PiAoTihcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlJlY2VpdmVkIG5ldyBhcHAgY2hlY2sgdG9rZW49XCIsIHQpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lcih0LCB0aGlzLnVzZXIpKSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXRDb25maWd1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXN5bmNRdWV1ZTogdGhpcy5hc3luY1F1ZXVlLFxuICAgICAgICAgICAgZGF0YWJhc2VJbmZvOiB0aGlzLmRhdGFiYXNlSW5mbyxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aENyZWRlbnRpYWxzOiB0aGlzLmF1dGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGFwcENoZWNrQ3JlZGVudGlhbHM6IHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9IHQ7XG4gICAgfVxuICAgIHNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgY2xpZW50IGhhcyBub3QgYmVlbiB0ZXJtaW5hdGVkLiBFbnN1cmVzIHRoYXQgb3RoZXIgbWV0aG9kcyBvbiAvL1xuICAgICAqIHRoaXMgY2xhc3MgY2Fubm90IGJlIGNhbGxlZCBhZnRlciB0aGUgY2xpZW50IGlzIHRlcm1pbmF0ZWQuIC8vXG4gICAgICovICAgIHZlcmlmeU5vdFRlcm1pbmF0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmFzeW5jUXVldWUuaXNTaHV0dGluZ0Rvd24pIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVudGVyUmVzdHJpY3RlZE1vZGUoKTtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb25saW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnNodXRkb3duKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gRWMoZSwgXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIik7XG4gICAgICAgICAgICAgICAgdC5yZWplY3Qobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgdC5wcm9taXNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gTmEodCwgZSkge1xuICAgIHQuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCB0LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCBlLmluaXRpYWxpemUobik7XG4gICAgbGV0IHMgPSBuLmluaXRpYWxVc2VyO1xuICAgIHQuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChhc3luYyB0ID0+IHtcbiAgICAgICAgcy5pc0VxdWFsKHQpIHx8IChhd2FpdCBpdShlLmxvY2FsU3RvcmUsIHQpLCBzID0gdCk7XG4gICAgfSkpLCBcbiAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcbiAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxuICAgIGUucGVyc2lzdGVuY2Uuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKCgpID0+IHQudGVybWluYXRlKCkpKSwgdC5fb2ZmbGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBrYSh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgJGEodCk7XG4gICAgTihcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBzID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4sIHMpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigodCA9PiBnYyhlLnJlbW90ZVN0b3JlLCB0KSkpLCB0LnNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcigoKHQsIG4pID0+IGdjKGUucmVtb3RlU3RvcmUsIG4pKSksIFxuICAgIHQuX29ubGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG4vKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi8gZnVuY3Rpb24gTWEodCkge1xuICAgIHJldHVybiBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gdC5jb2RlID09PSBxLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5jb2RlID09PSBxLlVOSU1QTEVNRU5URUQgOiAhKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIERPTUV4Y2VwdGlvbiAmJiB0IGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSB8fCAoXG4gICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgMjIgPT09IHQuY29kZSB8fCAyMCA9PT0gdC5jb2RlIHx8IFxuICAgIC8vIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZyBtb2RlIGRpc2FibGVzIEluZGV4ZWREYiBhbmQgcmV0dXJuc1xuICAgIC8vIElOVkFMSURfU1RBVEUgZm9yIGFueSB1c2FnZS5cbiAgICAxMSA9PT0gdC5jb2RlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gJGEodCkge1xuICAgIGlmICghdC5fb2ZmbGluZUNvbXBvbmVudHMpIGlmICh0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB7XG4gICAgICAgIE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyB1c2VyIHByb3ZpZGVkIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IE5hKHQsIHQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29mZmxpbmUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZTtcbiAgICAgICAgICAgIGlmICghTWEobikpIHRocm93IG47XG4gICAgICAgICAgICBNKFwiRXJyb3IgdXNpbmcgdXNlciBwcm92aWRlZCBjYWNoZS4gRmFsbGluZyBiYWNrIHRvIG1lbW9yeSBjYWNoZTogXCIgKyBuKSwgYXdhaXQgTmEodCwgbmV3IEVhKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIGF3YWl0IE5hKHQsIG5ldyBFYSk7XG4gICAgcmV0dXJuIHQuX29mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBPYSh0KSB7XG4gICAgcmV0dXJuIHQuX29ubGluZUNvbXBvbmVudHMgfHwgKHQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPyAoTihcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIHVzZXIgcHJvdmlkZWQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IGthKHQsIHQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29ubGluZSkpIDogKE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBrYSh0LCBuZXcgUGEpKSksIHQuX29ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIEZhKHQpIHtcbiAgICByZXR1cm4gJGEodCkudGhlbigodCA9PiB0LnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIEJhKHQpIHtcbiAgICByZXR1cm4gJGEodCkudGhlbigodCA9PiB0LmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gTGEodCkge1xuICAgIHJldHVybiBPYSh0KS50aGVuKCh0ID0+IHQucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gcWEodCkge1xuICAgIHJldHVybiBPYSh0KS50aGVuKCh0ID0+IHQuc3luY0VuZ2luZSkpO1xufVxuXG5mdW5jdGlvbiBVYSh0KSB7XG4gICAgcmV0dXJuIE9hKHQpLnRoZW4oKHQgPT4gdC5kYXRhc3RvcmUpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gS2EodCkge1xuICAgIGNvbnN0IGUgPSBhd2FpdCBPYSh0KSwgbiA9IGUuZXZlbnRNYW5hZ2VyO1xuICAgIHJldHVybiBuLm9uTGlzdGVuID0gR2MuYmluZChudWxsLCBlLnN5bmNFbmdpbmUpLCBuLm9uVW5saXN0ZW4gPSBqYy5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIFxuICAgIG47XG59XG5cbi8qKiBFbmFibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24gYW5kIHJlLWVucXVldWVzIGFsbCBwZW5kaW5nIG9wZXJhdGlvbnMuICovIGZ1bmN0aW9uIEdhKHQpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IEZhKHQpLCBuID0gYXdhaXQgTGEodCk7XG4gICAgICAgIHJldHVybiBlLnNldE5ldHdvcmtFbmFibGVkKCEwKSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEwodCk7XG4gICAgICAgICAgICByZXR1cm4gZS52dS5kZWxldGUoMCAvKiBPZmZsaW5lQ2F1c2UuVXNlckRpc2FibGVkICovKSwgenUoZSk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKiogRGlzYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbi4gUGVuZGluZyBvcGVyYXRpb25zIHdpbGwgbm90IGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBRYSh0KSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBGYSh0KSwgbiA9IGF3YWl0IExhKHQpO1xuICAgICAgICByZXR1cm4gZS5zZXROZXR3b3JrRW5hYmxlZCghMSksIGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgZS52dS5hZGQoMCAvKiBPZmZsaW5lQ2F1c2UuVXNlckRpc2FibGVkICovKSwgYXdhaXQgV3UoZSksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgZS5idS5zZXQoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiBqYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBLO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gTCh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50KHQsIGUpKSk7XG4gICAgICAgICAgICB9KHQsIGUpO1xuICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShzKSA6IHMuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgVShxLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0gRWModCwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7ZX0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IEJhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHphKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBWYSh7XG4gICAgICAgICAgICBuZXh0OiByID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IFNjKHQsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IHIuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIXUgJiYgci5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBVKHEuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogdSAmJiByLmZyb21DYWNoZSAmJiBzICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IFUocS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBOYyhHbihuLnBhdGgpLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIEt1OiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFZjKHQsIG8pO1xuICAgIH0oYXdhaXQgS2EodCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBXYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBLO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1KHQsIGUsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgTGMoZSwgcy5pciksIHIgPSBpLnNjKHMuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHIsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IEVjKHQsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHtlfSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgQmEodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gSGEodCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBLO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IFZhKHtcbiAgICAgICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gU2ModCwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgVShxLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IE5jKG4sIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgS3U6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gVmModCwgbyk7XG4gICAgfShhd2FpdCBLYSh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIEphKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IFZhKGUpO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBMKHQpLmt1LmFkZChlKSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICBlLm5leHQoKTtcbiAgICB9KGF3YWl0IEthKHQpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4uRGMoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIEwodCkua3UuZGVsZXRlKGUpO1xuICAgICAgICB9KGF3YWl0IEthKHQpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBZYSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIG4gPSBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gaGkoKS5lbmNvZGUodCkgOiB0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTYSh0LCBlKTtcbiAgICAgICAgfShmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBiYSh0LCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBiYShuZXcgVWludDhBcnJheSh0KSwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gdC5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgZSk7XG4gICAgfShuLCBGdShlKSk7XG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgVGEoYXdhaXQgcWEodCksIGksIHMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gWGEodCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTCh0KTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLnFzLmdldE5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KGF3YWl0IEJhKHQpLCBlKSkpO1xufVxuXG5mdW5jdGlvbiBaYSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gbi5pbmRleE1hbmFnZXIsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb25maWd1cmUgaW5kZXhlc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBzLmdldEZpZWxkSW5kZXhlcyh0KS5uZXh0KChuID0+IFxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIENvbXBhcmVzIHR3byBhcnJheSBmb3IgZXF1YWxpdHkgdXNpbmcgY29tcGFyYXRvci4gVGhlIG1ldGhvZCBjb21wdXRlcyB0aGVcbiAqIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgaW4gYGFmdGVyYCBidXQgbm90XG4gKiBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluIGBiZWZvcmVgIGJ1dCBtaXNzaW5nXG4gKiBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIGFycmF5LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgICAgICB0ID0gWyAuLi50IF0sIGUgPSBbIC4uLmUgXSwgdC5zb3J0KG4pLCBlLnNvcnQobik7XG4gICAgICAgICAgICBjb25zdCByID0gdC5sZW5ndGgsIG8gPSBlLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCB1ID0gMCwgYyA9IDA7XG4gICAgICAgICAgICBmb3IgKDt1IDwgbyAmJiBjIDwgcjsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG4odFtjXSwgZVt1XSk7XG4gICAgICAgICAgICAgICAgciA8IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICBpKHRbYysrXSkgOiByID4gMCA/IFxuICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgIHMoZVt1KytdKSA6ICh1KyssIGMrKyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDt1IDwgbzsgKSBzKGVbdSsrXSk7XG4gICAgICAgICAgICBmb3IgKDtjIDwgcjsgKSBpKHRbYysrXSk7XG4gICAgICAgIH0obiwgZSwgd3QsIChlID0+IHtcbiAgICAgICAgICAgIGkucHVzaChzLmFkZEZpZWxkSW5kZXgodCwgZSkpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMuZGVsZXRlRmllbGRJbmRleCh0LCBlKSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IFJ0LndhaXRGb3IoaSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGNsaWVudCBzdGF0ZSBpczpcbiAgICAvLyAgICAgZmlyZXN0b3JlX2NsaWVudHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGluc3RhbmNlX2tleT5cbiAgICAoYXdhaXQgQmEodCksIGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbXBhcmVzIHR3byBgRXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zYCBvYmplY3RzIGZvciBlcXVhbGl0eS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBFeHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnNgIHdpdGggdGhlIHNhbWVcbiAqIG9wdGlvbiB2YWx1ZXMgYXMgdGhlIGdpdmVuIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiB0aCh0KSB7XG4gICAgY29uc3QgZSA9IHt9O1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQudGltZW91dFNlY29uZHMgJiYgKGUudGltZW91dFNlY29uZHMgPSB0LnRpbWVvdXRTZWNvbmRzKSwgZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgZWggPSBuZXcgTWFwO1xuXG4vKipcbiAqIEFuIGluc3RhbmNlIG1hcCB0aGF0IGVuc3VyZXMgb25seSBvbmUgRGF0YXN0b3JlIGV4aXN0cyBwZXIgRmlyZXN0b3JlXG4gKiBpbnN0YW5jZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIG5oKHQsIGUsIG4pIHtcbiAgICBpZiAoIW4pIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSBjYW5ub3QgYmUgY2FsbGVkIHdpdGggYW4gZW1wdHkgJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0d28gYm9vbGVhbiBvcHRpb25zIGFyZSBub3Qgc2V0IGF0IHRoZSBzYW1lIHRpbWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBzaCh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKCEwID09PSBlICYmICEwID09PSBzKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGAke3R9IGFuZCAke259IGNhbm5vdCBiZSB1c2VkIHRvZ2V0aGVyLmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBkb2N1bWVudCAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0IGNvbnRhaW5zXG4gKiBhbiBldmVuIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIGloKHQpIHtcbiAgICBpZiAoIWh0LmlzRG9jdW1lbnRLZXkodCkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlLiBEb2N1bWVudCByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7dH0gaGFzICR7dC5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBjb2xsZWN0aW9uIChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXRcbiAqIGNvbnRhaW5zIGFuIG9kZCBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiByaCh0KSB7XG4gICAgaWYgKGh0LmlzRG9jdW1lbnRLZXkodCkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgY29sbGVjdGlvbiByZWZlcmVuY2UuIENvbGxlY3Rpb24gcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7dH0gaGFzICR7dC5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBpdCdzIGEgbm9uLW51bGwgb2JqZWN0IHdpdGhvdXQgYSBjdXN0b20gcHJvdG90eXBlXG4gKiAoaS5lLiBleGNsdWRlcyBBcnJheSwgRGF0ZSwgZXRjLikuXG4gKi9cbi8qKiBSZXR1cm5zIGEgc3RyaW5nIGRlc2NyaWJpbmcgdGhlIHR5cGUgLyB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgaW5wdXQuICovXG5mdW5jdGlvbiBvaCh0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBcIm51bGxcIjtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQubGVuZ3RoID4gMjAgJiYgKHQgPSBgJHt0LnN1YnN0cmluZygwLCAyMCl9Li4uYCksIFxuICAgIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0IHx8IFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4gXCJcIiArIHQ7XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIHQpIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIFwiYW4gYXJyYXlcIjtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLyoqIHRyeSB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgZm9yIGFuIG9iamVjdC4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodC5jb25zdHJ1Y3RvcikgcmV0dXJuIHQuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLCBvcHRpb25hbGx5IHVud3JhcHBpbmcgQ29tcGF0IHR5cGVzIHRvIGV4cG9zZSB0aGVcbiAqIHVuZGVybHlpbmcgaW5zdGFuY2UuIFRocm93cyBpZiAgYG9iamAgaXMgbm90IGFuIGluc3RhbmNlIG9mIGBUYC5cbiAqXG4gKiBUaGlzIGNhc3QgaXMgdXNlZCBpbiB0aGUgTGl0ZSBhbmQgRnVsbCBTREsgdG8gdmVyaWZ5IGluc3RhbmNlIHR5cGVzIGZvclxuICogYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgcHVibGljIEFQSS5cbiAqIEBpbnRlcm5hbFxuICovICh0KTtcbiAgICAgICAgICAgIHJldHVybiBlID8gYGEgY3VzdG9tICR7ZX0gb2JqZWN0YCA6IFwiYW4gb2JqZWN0XCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdCA/IFwiYSBmdW5jdGlvblwiIDogTygpO1xufVxuXG5mdW5jdGlvbiB1aCh0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5lKSB7XG4gICAgaWYgKFwiX2RlbGVnYXRlXCIgaW4gdCAmJiAoXG4gICAgLy8gVW53cmFwIENvbXBhdCB0eXBlc1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdCA9IHQuX2RlbGVnYXRlKSwgISh0IGluc3RhbmNlb2YgZSkpIHtcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gdC5jb25zdHJ1Y3Rvci5uYW1lKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVHlwZSBkb2VzIG5vdCBtYXRjaCB0aGUgZXhwZWN0ZWQgaW5zdGFuY2UuIERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBTREs/XCIpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBuID0gb2godCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBFeHBlY3RlZCB0eXBlICcke2UubmFtZX0nLCBidXQgaXQgd2FzOiAke259YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIGNoKHQsIGUpIHtcbiAgICBpZiAoZSA8PSAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgcmVxdWlyZXMgYSBwb3NpdGl2ZSBudW1iZXIsIGJ1dCBpdCB3YXM6ICR7ZX0uYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBzZXR0aW5ncygpIGRlZmF1bHRzOlxuLyoqXG4gKiBBIGNvbmNyZXRlIHR5cGUgZGVzY3JpYmluZyBhbGwgdGhlIHZhbHVlcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHZpYSBhXG4gKiB1c2VyLXN1cHBsaWVkIGBGaXJlc3RvcmVTZXR0aW5nc2Agb2JqZWN0LiBUaGlzIGlzIGEgc2VwYXJhdGUgdHlwZSBzbyB0aGF0XG4gKiBkZWZhdWx0cyBjYW4gYmUgc3VwcGxpZWQgYW5kIHRoZSB2YWx1ZSBjYW4gYmUgY2hlY2tlZCBmb3IgZXF1YWxpdHkuXG4gKi9cbmNsYXNzIGFoIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHZhciBlLCBuO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0Lmhvc3QpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQuc3NsKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgcHJvdmlkZSBzc2wgb3B0aW9uIGlmIGhvc3Qgb3B0aW9uIGlzIG5vdCBzZXRcIik7XG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiLCB0aGlzLnNzbCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB0aGlzLmhvc3QgPSB0Lmhvc3QsIHRoaXMuc3NsID0gbnVsbCA9PT0gKGUgPSB0LnNzbCkgfHwgdm9pZCAwID09PSBlIHx8IGU7XG4gICAgICAgIGlmICh0aGlzLmNyZWRlbnRpYWxzID0gdC5jcmVkZW50aWFscywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gISF0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIFxuICAgICAgICB0aGlzLmNhY2hlID0gdC5sb2NhbENhY2hlLCB2b2lkIDAgPT09IHQuY2FjaGVTaXplQnl0ZXMpIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSA0MTk0MzA0MDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoLTEgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdC5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdC5jYWNoZVNpemVCeXRlcztcbiAgICAgICAgfVxuICAgICAgICBzaChcImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmdcIiwgdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBcImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyksIFxuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPSAhIXQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID8gdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSAhMSA6IHZvaWQgMCA9PT0gdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPyB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9IHRydWUgOiBcbiAgICAgICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCBjb2VyY2UgdGhlIHZhbHVlIHRvIGJvb2xlYW4gZXZlbiB0aG91Z2hcbiAgICAgICAgLy8gdGhlIFR5cGVTY3JpcHQgY29tcGlsZXIgaGFzIG5hcnJvd2VkIHRoZSB0eXBlIHRvIGJvb2xlYW4gYWxyZWFkeS5cbiAgICAgICAgLy8gbm9pbnNwZWN0aW9uIFBvaW50bGVzc0Jvb2xlYW5FeHByZXNzaW9uSlNcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSAhIXQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMgPSB0aChudWxsICE9PSAobiA9IHQuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSAmJiB2b2lkIDAgIT09IG4gPyBuIDoge30pLCBcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC50aW1lb3V0U2Vjb25kcykge1xuICAgICAgICAgICAgICAgIGlmIChpc05hTih0LnRpbWVvdXRTZWNvbmRzKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHt0LnRpbWVvdXRTZWNvbmRzfSAobXVzdCBub3QgYmUgTmFOKWApO1xuICAgICAgICAgICAgICAgIGlmICh0LnRpbWVvdXRTZWNvbmRzIDwgNSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHt0LnRpbWVvdXRTZWNvbmRzfSAobWluaW11bSBhbGxvd2VkIHZhbHVlIGlzIDUpYCk7XG4gICAgICAgICAgICAgICAgaWYgKHQudGltZW91dFNlY29uZHMgPiAzMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHt0LnRpbWVvdXRTZWNvbmRzfSAobWF4aW11bSBhbGxvd2VkIHZhbHVlIGlzIDMwKWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICovICh0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyksIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gISF0LnVzZUZldGNoU3RyZWFtcztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IHQuaG9zdCAmJiB0aGlzLnNzbCA9PT0gdC5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gdC5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiAoZSA9IHRoaXMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zLCBcbiAgICAgICAgbiA9IHQuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zLCBlLnRpbWVvdXRTZWNvbmRzID09PSBuLnRpbWVvdXRTZWNvbmRzKSAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgICAgIHZhciBlLCBuO1xuICAgIH1cbn1cblxuY2xhc3MgaGgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSB0LCB0aGlzLl9hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5fZGF0YWJhc2VJZCA9IG4sIFxuICAgICAgICB0aGlzLl9hcHAgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIEZpcmVzdG9yZSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlLWxpdGVcIiwgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBcIihsaXRlKVwiLCB0aGlzLl9zZXR0aW5ncyA9IG5ldyBhaCh7fSksIFxuICAgICAgICB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGBGaXJlc3RvcmVgIHNlcnZpY2VcbiAgICAgKiBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGFwcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hcHApIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwO1xuICAgIH1cbiAgICBnZXQgX2luaXRpYWxpemVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW47XG4gICAgfVxuICAgIGdldCBfdGVybWluYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgX3NldFNldHRpbmdzKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzRnJvemVuKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgaXRzIHNldHRpbmdzIGNhbiBubyBsb25nZXIgYmUgY2hhbmdlZC4gWW91IGNhbiBvbmx5IG1vZGlmeSBzZXR0aW5ncyBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBhaCh0KSwgdm9pZCAwICE9PSB0LmNyZWRlbnRpYWxzICYmICh0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBuZXcgUTtcbiAgICAgICAgICAgIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJmaXJzdFBhcnR5XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBIKHQuc2Vzc2lvbkluZGV4IHx8IFwiMFwiLCB0LmlhbVRva2VuIHx8IG51bGwsIHQuYXV0aFRva2VuRmFjdG9yeSB8fCBudWxsKTtcblxuICAgICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5jbGllbnQ7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGZhaWxlZCBkdWUgdG8gaW52YWxpZCBjcmVkZW50aWFsIHR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odC5jcmVkZW50aWFscykpO1xuICAgIH1cbiAgICBfZ2V0U2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2ZyZWV6ZVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMCwgdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9kZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXJtaW5hdGVUYXNrIHx8ICh0aGlzLl90ZXJtaW5hdGVUYXNrID0gdGhpcy5fdGVybWluYXRlKCkpLCB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYEZpcmVzdG9yZWAgaW5zdGFuY2UuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwcDogdGhpcy5fYXBwLFxuICAgICAgICAgICAgZGF0YWJhc2VJZDogdGhpcy5fZGF0YWJhc2VJZCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLl9zZXR0aW5nc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGVzIGFsbCBjb21wb25lbnRzIHVzZWQgYnkgdGhpcyBjbGllbnQuIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBtZXRob2QgdG8gY2xlYW4gdXAgdGhlaXIgb3duIGRlcGVuZGVuY2llcywgYnV0IG11c3QgYWxzbyBjYWxsIHRoaXNcbiAgICAgKiBtZXRob2QuXG4gICAgICpcbiAgICAgKiBPbmx5IGV2ZXIgY2FsbGVkIG9uY2UuXG4gICAgICovICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIGluc3RhbmNlLiBNdXN0IGJlIGNhbGxlZFxuICogd2hlbiB0aGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgdGVybWluYXRlZC5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IGVoLmdldCh0KTtcbiAgICAgICAgICAgIGUgJiYgKE4oXCJDb21wb25lbnRQcm92aWRlclwiLCBcIlJlbW92aW5nIERhdGFzdG9yZVwiKSwgZWguZGVsZXRlKHQpLCBlLnRlcm1pbmF0ZSgpKTtcbiAgICAgICAgfSh0aGlzKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1vZGlmeSB0aGlzIGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIENsb3VkIEZpcmVzdG9yZSBlbXVsYXRvci5cbiAqXG4gKiBOb3RlOiBUaGlzIG11c3QgYmUgY2FsbGVkIGJlZm9yZSB0aGlzIGluc3RhbmNlIGhhcyBiZWVuIHVzZWQgdG8gZG8gYW55XG4gKiBvcGVyYXRpb25zLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgdG8gY29uZmlndXJlIHRvIGNvbm5lY3QgdG8gdGhlXG4gKiBlbXVsYXRvci5cbiAqIEBwYXJhbSBob3N0IC0gdGhlIGVtdWxhdG9yIGhvc3QgKGV4OiBsb2NhbGhvc3QpLlxuICogQHBhcmFtIHBvcnQgLSB0aGUgZW11bGF0b3IgcG9ydCAoZXg6IDkwMDApLlxuICogQHBhcmFtIG9wdGlvbnMubW9ja1VzZXJUb2tlbiAtIHRoZSBtb2NrIGF1dGggdG9rZW4gdG8gdXNlIGZvciB1bml0IHRlc3RpbmdcbiAqIFNlY3VyaXR5IFJ1bGVzLlxuICovIGZ1bmN0aW9uIGxoKHQsIGUsIG4sIHMgPSB7fSkge1xuICAgIHZhciBpO1xuICAgIGNvbnN0IHIgPSAodCA9IHVoKHQsIGhoKSkuX2dldFNldHRpbmdzKCksIG8gPSBgJHtlfToke259YDtcbiAgICBpZiAoXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiAhPT0gci5ob3N0ICYmIHIuaG9zdCAhPT0gbyAmJiBNKFwiSG9zdCBoYXMgYmVlbiBzZXQgaW4gYm90aCBzZXR0aW5ncygpIGFuZCBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IoKSwgZW11bGF0b3IgaG9zdCB3aWxsIGJlIHVzZWQuXCIpLCBcbiAgICB0Ll9zZXRTZXR0aW5ncyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHIpLCB7XG4gICAgICAgIGhvc3Q6IG8sXG4gICAgICAgIHNzbDogITFcbiAgICB9KSksIHMubW9ja1VzZXJUb2tlbikge1xuICAgICAgICBsZXQgZSwgbjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHMubW9ja1VzZXJUb2tlbikgZSA9IHMubW9ja1VzZXJUb2tlbiwgbiA9IFYuTU9DS19VU0VSOyBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCBjcmVhdGVNb2NrVXNlclRva2VuIHZhbGlkYXRlIGZpcnN0IChjYXRjaGVzIGNvbW1vbiBtaXN0YWtlcyBsaWtlXG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpZWxkIFwidWlkXCIgYW5kIG1pc3NpbmcgZmllbGQgXCJzdWJcIiAvIFwidXNlcl9pZFwiLilcbiAgICAgICAgICAgIGUgPSBjcmVhdGVNb2NrVXNlclRva2VuKHMubW9ja1VzZXJUb2tlbiwgbnVsbCA9PT0gKGkgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgciA9IHMubW9ja1VzZXJUb2tlbi5zdWIgfHwgcy5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIXIpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgICAgICAgICAgbiA9IG5ldyBWKHIpO1xuICAgICAgICB9XG4gICAgICAgIHQuX2F1dGhDcmVkZW50aWFscyA9IG5ldyBqKG5ldyBHKGUsIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50UmVmZXJlbmNlYCByZWZlcnMgdG8gYSBkb2N1bWVudCBsb2NhdGlvbiBpbiBhIEZpcmVzdG9yZSBkYXRhYmFzZVxuICogYW5kIGNhbiBiZSB1c2VkIHRvIHdyaXRlLCByZWFkLCBvciBsaXN0ZW4gdG8gdGhlIGxvY2F0aW9uLiBUaGUgZG9jdW1lbnQgYXRcbiAqIHRoZSByZWZlcmVuY2VkIGxvY2F0aW9uIG1heSBvciBtYXkgbm90IGV4aXN0LlxuICovIGNsYXNzIGZoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSBlLCB0aGlzLl9rZXkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJkb2N1bWVudFwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGdldCBfcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZG9jdW1lbnQncyBpZGVudGlmaWVyIHdpdGhpbiBpdHMgY29sbGVjdGlvbi5cbiAgICAgKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGRvY3VtZW50IChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBiZWxvbmdzIHRvLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IHdoKHRoaXMuZmlyZXN0b3JlLCB0aGlzLmNvbnZlcnRlciwgdGhpcy5fa2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZmgodGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX2tleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5YCByZWZlcnMgdG8gYSBxdWVyeSB3aGljaCB5b3UgY2FuIHJlYWQgb3IgbGlzdGVuIHRvLiBZb3UgY2FuIGFsc29cbiAqIGNvbnN0cnVjdCByZWZpbmVkIGBRdWVyeWAgb2JqZWN0cyBieSBhZGRpbmcgZmlsdGVycyBhbmQgb3JkZXJpbmcuXG4gKi8gY2xhc3MgZGgge1xuICAgIC8vIFRoaXMgaXMgdGhlIGxpdGUgdmVyc2lvbiBvZiB0aGUgUXVlcnkgY2xhc3MgaW4gdGhlIG1haW4gU0RLLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSBlLCB0aGlzLl9xdWVyeSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcInF1ZXJ5XCIsIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZGgodGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX3F1ZXJ5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgQ29sbGVjdGlvblJlZmVyZW5jZWAgb2JqZWN0IGNhbiBiZSB1c2VkIGZvciBhZGRpbmcgZG9jdW1lbnRzLCBnZXR0aW5nXG4gKiBkb2N1bWVudCByZWZlcmVuY2VzLCBhbmQgcXVlcnlpbmcgZm9yIGRvY3VtZW50cyAodXNpbmcge0BsaW5rIChxdWVyeToxKX0pLlxuICovIGNsYXNzIHdoIGV4dGVuZHMgZGgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcih0LCBlLCBHbihuKSksIHRoaXMuX3BhdGggPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJjb2xsZWN0aW9uXCI7XG4gICAgfVxuICAgIC8qKiBUaGUgY29sbGVjdGlvbidzIGlkZW50aWZpZXIuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGNvbGxlY3Rpb24gKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmluZyBgRG9jdW1lbnRSZWZlcmVuY2VgIGlmIHRoaXMgaXMgYVxuICAgICAqIHN1YmNvbGxlY3Rpb24uIElmIHRoaXMgaXNuJ3QgYSBzdWJjb2xsZWN0aW9uLCB0aGUgcmVmZXJlbmNlIGlzIG51bGwuXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9wYXRoLnBvcExhc3QoKTtcbiAgICAgICAgcmV0dXJuIHQuaXNFbXB0eSgpID8gbnVsbCA6IG5ldyBmaCh0aGlzLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IGh0KHQpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgd2godGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX3BhdGgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX2godCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBuaChcImNvbGxlY3Rpb25cIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgaGgpIHtcbiAgICAgICAgY29uc3QgcyA9IHV0LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiByaChzKSwgbmV3IHdoKHQsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcyk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIGZoIHx8IHQgaW5zdGFuY2VvZiB3aCkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZCh1dC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIHJoKHMpLCBuZXcgd2godC5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVsaXRlKTogQ29uc2lkZXIgdXNpbmcgRXJyb3JGYWN0b3J5IC1cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi8wMTMxZTFmL3BhY2thZ2VzL3V0aWwvc3JjL2Vycm9ycy50cyNMMTA2XG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYFF1ZXJ5YCBpbnN0YW5jZSB0aGF0IGluY2x1ZGVzIGFsbCBkb2N1bWVudHMgaW4gdGhlXG4gKiBkYXRhYmFzZSB0aGF0IGFyZSBjb250YWluZWQgaW4gYSBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGVcbiAqIGdpdmVuIGBjb2xsZWN0aW9uSWRgLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBgRmlyZXN0b3JlYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjb2xsZWN0aW9uSWQgLSBJZGVudGlmaWVzIHRoZSBjb2xsZWN0aW9ucyB0byBxdWVyeSBvdmVyLiBFdmVyeVxuICogY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhpcyBJRCBhcyB0aGUgbGFzdCBzZWdtZW50IG9mIGl0cyBwYXRoXG4gKiB3aWxsIGJlIGluY2x1ZGVkLiBDYW5ub3QgY29udGFpbiBhIHNsYXNoLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYFF1ZXJ5YC5cbiAqLyBmdW5jdGlvbiBtaCh0LCBlKSB7XG4gICAgaWYgKHQgPSB1aCh0LCBoaCksIG5oKFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiY29sbGVjdGlvbiBpZFwiLCBlKSwgZS5pbmRleE9mKFwiL1wiKSA+PSAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gSUQgJyR7ZX0nIHBhc3NlZCB0byBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoKS4gQ29sbGVjdGlvbiBJRHMgbXVzdCBub3QgY29udGFpbiAnLycuYCk7XG4gICAgcmV0dXJuIG5ldyBkaCh0LCBcbiAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVbih1dC5lbXB0eVBhdGgoKSwgdCk7XG4gICAgfShlKSk7XG59XG5cbmZ1bmN0aW9uIGdoKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgXG4gICAgLy8gV2UgYWxsb3cgb21pc3Npb24gb2YgJ3BhdGhTdHJpbmcnIGJ1dCBleHBsaWNpdGx5IHByb2hpYml0IHBhc3NpbmcgaW4gYm90aFxuICAgIC8vICd1bmRlZmluZWQnIGFuZCAnbnVsbCcuXG4gICAgMSA9PT0gYXJndW1lbnRzLmxlbmd0aCAmJiAoZSA9IHR0LkEoKSksIG5oKFwiZG9jXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIGhoKSB7XG4gICAgICAgIGNvbnN0IHMgPSB1dC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4gaWgocyksIG5ldyBmaCh0LCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgaHQocykpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBmaCB8fCB0IGluc3RhbmNlb2Ygd2gpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQodXQuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBpaChzKSwgbmV3IGZoKHQuZmlyZXN0b3JlLCB0IGluc3RhbmNlb2Ygd2ggPyB0LmNvbnZlcnRlciA6IG51bGwsIG5ldyBodChzKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlcyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiB5aCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksICh0IGluc3RhbmNlb2YgZmggfHwgdCBpbnN0YW5jZW9mIHdoKSAmJiAoZSBpbnN0YW5jZW9mIGZoIHx8IGUgaW5zdGFuY2VvZiB3aCkgJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiB0LnBhdGggPT09IGUucGF0aCAmJiB0LmNvbnZlcnRlciA9PT0gZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcXVlcmllcyBwb2ludCB0byB0aGUgc2FtZSBjb2xsZWN0aW9uIGFuZCBhcHBseVxuICogdGhlIHNhbWUgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIHBoKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgdCBpbnN0YW5jZW9mIGRoICYmIGUgaW5zdGFuY2VvZiBkaCAmJiAodC5maXJlc3RvcmUgPT09IGUuZmlyZXN0b3JlICYmIFpuKHQuX3F1ZXJ5LCBlLl9xdWVyeSkgJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgSWgge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBUaGUgbGFzdCBwcm9taXNlIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgdGhpcy5HYyA9IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgLy8gQSBsaXN0IG9mIHJldHJ5YWJsZSBvcGVyYXRpb25zLiBSZXRyeWFibGUgb3BlcmF0aW9ucyBhcmUgcnVuIGluIG9yZGVyIGFuZFxuICAgICAgICAvLyByZXRyaWVkIHdpdGggYmFja29mZi5cbiAgICAgICAgdGhpcy5RYyA9IFtdLCBcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gT25jZSBpdCBpcyBzZXQgdG8gdHJ1ZSwgaXQgd2lsbCBub3RcbiAgICAgICAgLy8gYmUgY2hhbmdlZCBhZ2Fpbi5cbiAgICAgICAgdGhpcy5qYyA9ICExLCBcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBzY2hlZHVsZWQgdG8gYmUgcXVldWVkIGluIHRoZSBmdXR1cmUuIE9wZXJhdGlvbnMgYXJlXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBhZnRlciB0aGV5IGFyZSBydW4gb3IgY2FuY2VsZWQuXG4gICAgICAgIHRoaXMuemMgPSBbXSwgXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgdGhpcy5XYyA9IG51bGwsIFxuICAgICAgICAvLyBGbGFnIHNldCB3aGlsZSB0aGVyZSdzIGFuIG91dHN0YW5kaW5nIEFzeW5jUXVldWUgb3BlcmF0aW9uLCB1c2VkIGZvclxuICAgICAgICAvLyBhc3NlcnRpb24gc2FuaXR5LWNoZWNrcy5cbiAgICAgICAgdGhpcy5IYyA9ICExLCBcbiAgICAgICAgLy8gRW5hYmxlZCBkdXJpbmcgc2h1dGRvd24gb24gU2FmYXJpIHRvIHByZXZlbnQgZnV0dXJlIGFjY2VzcyB0byBJbmRleGVkREIuXG4gICAgICAgIHRoaXMuSmMgPSAhMSwgXG4gICAgICAgIC8vIExpc3Qgb2YgVGltZXJJZHMgdG8gZmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IuXG4gICAgICAgIHRoaXMuWWMgPSBbXSwgXG4gICAgICAgIC8vIEJhY2tvZmYgdGltZXIgdXNlZCB0byBzY2hlZHVsZSByZXRyaWVzIGZvciByZXRyeWFibGUgb3BlcmF0aW9uc1xuICAgICAgICB0aGlzLnFvID0gbmV3IEJ1KHRoaXMsIFwiYXN5bmNfcXVldWVfcmV0cnlcIiAvKiBUaW1lcklkLkFzeW5jUXVldWVSZXRyeSAqLyksIFxuICAgICAgICAvLyBWaXNpYmlsaXR5IGhhbmRsZXIgdGhhdCB0cmlnZ2VycyBhbiBpbW1lZGlhdGUgcmV0cnkgb2YgYWxsIHJldHJ5YWJsZVxuICAgICAgICAvLyBvcGVyYXRpb25zLiBNZWFudCB0byBzcGVlZCB1cCByZWNvdmVyeSB3aGVuIHdlIHJlZ2FpbiBmaWxlIHN5c3RlbSBhY2Nlc3NcbiAgICAgICAgLy8gYWZ0ZXIgcGFnZSBjb21lcyBpbnRvIGZvcmVncm91bmQuXG4gICAgICAgIHRoaXMuWGMgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gT3UoKTtcbiAgICAgICAgICAgIHQgJiYgTihcIkFzeW5jUXVldWVcIiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyB0LnZpc2liaWxpdHlTdGF0ZSksIHRoaXMucW8uTW8oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdCA9IE91KCk7XG4gICAgICAgIHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmFkZEV2ZW50TGlzdGVuZXIgJiYgdC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlhjKTtcbiAgICB9XG4gICAgZ2V0IGlzU2h1dHRpbmdEb3duKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qYztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS5cbiAgICAgKiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cbiAgICAgKi8gICAgZW5xdWV1ZUFuZEZvcmdldCh0KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5lbnF1ZXVlKHQpO1xuICAgIH1cbiAgICBlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCh0KSB7XG4gICAgICAgIHRoaXMuWmMoKSwgXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy50YSh0KTtcbiAgICB9XG4gICAgZW50ZXJSZXN0cmljdGVkTW9kZSh0KSB7XG4gICAgICAgIGlmICghdGhpcy5qYykge1xuICAgICAgICAgICAgdGhpcy5qYyA9ICEwLCB0aGlzLkpjID0gdCB8fCAhMTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBPdSgpO1xuICAgICAgICAgICAgZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuWGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVucXVldWUodCkge1xuICAgICAgICBpZiAodGhpcy5aYygpLCB0aGlzLmpjKSBcbiAgICAgICAgLy8gUmV0dXJuIGEgUHJvbWlzZSB3aGljaCBuZXZlciByZXNvbHZlcy5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoKSA9PiB7fSkpO1xuICAgICAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBQcm9taXNlIHRoYXQgd2UgY2FuIHJldHVybiB0byB0aGUgY2FsbGVlLiBUaGlzXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byByZXR1cm4gYSBcImhhbmdpbmcgUHJvbWlzZVwiIG9ubHkgdG8gdGhlIGNhbGxlZSBhbmQgc3RpbGxcbiAgICAgICAgLy8gYWR2YW5jZSB0aGUgcXVldWUgZXZlbiB3aGVuIHRoZSBvcGVyYXRpb24gaXMgbm90IHJ1bi5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IEs7XG4gICAgICAgIHJldHVybiB0aGlzLnRhKCgoKSA9PiB0aGlzLmpjICYmIHRoaXMuSmMgPyBQcm9taXNlLnJlc29sdmUoKSA6ICh0KCkudGhlbihlLnJlc29sdmUsIGUucmVqZWN0KSwgXG4gICAgICAgIGUucHJvbWlzZSkpKS50aGVuKCgoKSA9PiBlLnByb21pc2UpKTtcbiAgICB9XG4gICAgZW5xdWV1ZVJldHJ5YWJsZSh0KSB7XG4gICAgICAgIHRoaXMuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuUWMucHVzaCh0KSwgdGhpcy5lYSgpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBuZXh0IG9wZXJhdGlvbiBmcm9tIHRoZSByZXRyeWFibGUgcXVldWUuIElmIHRoZSBvcGVyYXRpb24gZmFpbHMsXG4gICAgICogcmVzY2hlZHVsZXMgd2l0aCBiYWNrb2ZmLlxuICAgICAqLyAgICBhc3luYyBlYSgpIHtcbiAgICAgICAgaWYgKDAgIT09IHRoaXMuUWMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuUWNbMF0oKSwgdGhpcy5RYy5zaGlmdCgpLCB0aGlzLnFvLnJlc2V0KCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFEdCh0KSkgdGhyb3cgdDtcbiAvLyBGYWlsdXJlIHdpbGwgYmUgaGFuZGxlZCBieSBBc3luY1F1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE4oXCJBc3luY1F1ZXVlXCIsIFwiT3BlcmF0aW9uIGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBlcnJvcjogXCIgKyB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuUWMubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBhZGRpdGlvbmFsIG9wZXJhdGlvbnMsIHdlIHJlLXNjaGVkdWxlIGByZXRyeU5leHRPcCgpYC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHJ1biByZXRyeWFibGUgb3BlcmF0aW9ucyB0aGF0IGZhaWxlZCBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZWlyIGluaXRpYWwgYXR0ZW1wdCBzaW5jZSB3ZSBkb24ndCBrbm93IHdoZXRoZXIgdGhleSBhcmUgYWxyZWFkeVxuICAgICAgICAgICAgLy8gZW5xdWV1ZWQuIElmLCBmb3IgZXhhbXBsZSwgYG9wMWAsIGBvcDJgLCBgb3AzYCBhcmUgZW5xdWV1ZWQgYW5kIGBvcDFgXG4gICAgICAgICAgICAvLyBuZWVkcyB0byAgYmUgcmUtcnVuLCB3ZSB3aWxsIHJ1biBgb3AxYCwgYG9wMWAsIGBvcDJgIHVzaW5nIHRoZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBlbnF1ZXVlZCBjYWxscyB0byBgcmV0cnlOZXh0T3AoKWAuIGBvcDMoKWAgd2lsbCB0aGVuIHJ1biBpbiB0aGVcbiAgICAgICAgICAgIC8vIGNhbGwgc2NoZWR1bGVkIGhlcmUuXG4gICAgICAgICAgICAvLyBTaW5jZSBgYmFja29mZkFuZFJ1bigpYCBjYW5jZWxzIGFuIGV4aXN0aW5nIGJhY2tvZmYgYW5kIHNjaGVkdWxlcyBhXG4gICAgICAgICAgICAvLyBuZXcgYmFja29mZiBvbiBldmVyeSBjYWxsLCB0aGVyZSBpcyBvbmx5IGV2ZXIgYSBzaW5nbGUgYWRkaXRpb25hbFxuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIHRoaXMucW8uTm8oKCgpID0+IHRoaXMuZWEoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRhKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuR2MudGhlbigoKCkgPT4gKHRoaXMuSGMgPSAhMCwgdCgpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuV2MgPSB0LCB0aGlzLkhjID0gITE7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKipcbiAqIENocm9tZSBpbmNsdWRlcyBFcnJvci5tZXNzYWdlIGluIEVycm9yLnN0YWNrLiBPdGhlciBicm93c2VycyBkbyBub3QuXG4gKiBUaGlzIHJldHVybnMgZXhwZWN0ZWQgb3V0cHV0IG9mIG1lc3NhZ2UgKyBzdGFjayB3aGVuIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSBlcnJvciAtIEVycm9yIG9yIEZpcmVzdG9yZUVycm9yXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IHQubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHQuc3RhY2sgJiYgKGUgPSB0LnN0YWNrLmluY2x1ZGVzKHQubWVzc2FnZSkgPyB0LnN0YWNrIDogdC5tZXNzYWdlICsgXCJcXG5cIiArIHQuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQpO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyBrKFwiSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiBcIiwgZSksIHQ7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+ICh0aGlzLkhjID0gITEsIHQpKSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLkdjID0gZSwgZTtcbiAgICB9XG4gICAgZW5xdWV1ZUFmdGVyRGVsYXkodCwgZSwgbikge1xuICAgICAgICB0aGlzLlpjKCksIFxuICAgICAgICAvLyBGYXN0LWZvcndhcmQgZGVsYXlzIGZvciB0aW1lcklkcyB0aGF0IGhhdmUgYmVlbiBvdmVycmlkZW4uXG4gICAgICAgIHRoaXMuWWMuaW5kZXhPZih0KSA+IC0xICYmIChlID0gMCk7XG4gICAgICAgIGNvbnN0IHMgPSBUYy5jcmVhdGVBbmRTY2hlZHVsZSh0aGlzLCB0LCBlLCBuLCAodCA9PiB0aGlzLm5hKHQpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnpjLnB1c2gocyksIHM7XG4gICAgfVxuICAgIFpjKCkge1xuICAgICAgICB0aGlzLldjICYmIE8oKTtcbiAgICB9XG4gICAgdmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpIHt9XG4gICAgLyoqXG4gICAgICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBxdWV1ZWQgdGFza3MgYXJlIGZpbmlzaGVkIGV4ZWN1dGluZy4gRGVsYXllZFxuICAgICAqIG9wZXJhdGlvbnMgYXJlIG5vdCBydW4uXG4gICAgICovICAgIGFzeW5jIHNhKCkge1xuICAgICAgICAvLyBPcGVyYXRpb25zIGluIHRoZSBxdWV1ZSBwcmlvciB0byBkcmFpbmluZyBtYXkgaGF2ZSBlbnF1ZXVlZCBhZGRpdGlvbmFsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIEtlZXAgZHJhaW5pbmcgdGhlIHF1ZXVlIHVudGlsIHRoZSB0YWlsIGlzIG5vIGxvbmdlciBhZHZhbmNlZCxcbiAgICAgICAgLy8gd2hpY2ggaW5kaWNhdGVzIHRoYXQgbm8gbW9yZSBuZXcgb3BlcmF0aW9ucyB3ZXJlIGVucXVldWVkIGFuZCB0aGF0IGFsbFxuICAgICAgICAvLyBvcGVyYXRpb25zIHdlcmUgZXhlY3V0ZWQuXG4gICAgICAgIGxldCB0O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB0ID0gdGhpcy5HYywgYXdhaXQgdDtcbiAgICAgICAgfSB3aGlsZSAodCAhPT0gdGhpcy5HYyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi8gICAgaWEodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy56YykgaWYgKGUudGltZXJJZCA9PT0gdCkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogUnVucyBzb21lIG9yIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMgZWFybHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGFzdFRpbWVySWQgLSBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWRcbiAgICAgKiB3aWxsIGJlIGRyYWluZWQuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMuXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgb3BlcmF0aW9ucyBoYXZlIGJlZW4gcnVuLlxuICAgICAqLyAgICByYSh0KSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCBkcmFpbmluZyBtYXkgZ2VuZXJhdGUgbW9yZSBkZWxheWVkIG9wcywgc28gd2UgZG8gdGhhdCBmaXJzdC5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2EoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxuICAgICAgICAgICAgdGhpcy56Yy5zb3J0KCgodCwgZSkgPT4gdC50YXJnZXRUaW1lTXMgLSBlLnRhcmdldFRpbWVNcykpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuemMpIGlmIChlLnNraXBEZWxheSgpLCBcImFsbFwiIC8qIFRpbWVySWQuQWxsICovICE9PSB0ICYmIGUudGltZXJJZCA9PT0gdCkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zYSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogU2tpcCBhbGwgc3Vic2VxdWVudCBkZWxheXMgZm9yIGEgdGltZXIgaWQuXG4gICAgICovICAgIG9hKHQpIHtcbiAgICAgICAgdGhpcy5ZYy5wdXNoKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIG9uY2UgYSBEZWxheWVkT3BlcmF0aW9uIGlzIHJ1biBvciBjYW5jZWxlZC4gKi8gICAgbmEodCkge1xuICAgICAgICAvLyBOT1RFOiBpbmRleE9mIC8gc2xpY2UgYXJlIE8obiksIGJ1dCBkZWxheWVkT3BlcmF0aW9ucyBpcyBleHBlY3RlZCB0byBiZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuemMuaW5kZXhPZih0KTtcbiAgICAgICAgdGhpcy56Yy5zcGxpY2UoZSwgMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBUaCh0KSB7XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGFuIG9iamVjdCBhbmQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG9mIHRoZSBzcGVjaWZpZWRcbiAqIG1ldGhvZHMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0KSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSB0O1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgaWYgKHQgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bdF0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAodCwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzIEVoIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IEssIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiB0LFxuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2godCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKHQpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcih0KSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHQsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb25zdGFudCB1c2VkIHRvIGluZGljYXRlIHRoZSBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uIHNob3VsZCBiZSBkaXNhYmxlZC5cbiAqIFNldCB0aGlzIHZhbHVlIGFzIHRoZSBgY2FjaGVTaXplQnl0ZXNgIG9uIHRoZSBzZXR0aW5ncyBwYXNzZWQgdG8gdGhlXG4gKiB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBjb25zdCBBaCA9IC0xO1xuXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyBjbGFzcyB2aCBleHRlbmRzIGhoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiwgcyksIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBpdCdzIGEge0BsaW5rIEZpcmVzdG9yZX0gb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZVwiLCB0aGlzLl9xdWV1ZSA9IG5ldyBJaCwgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSAobnVsbCA9PSBzID8gdm9pZCAwIDogcy5uYW1lKSB8fCBcIltERUZBVUxUXVwiO1xuICAgIH1cbiAgICBfdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50IHx8IFxuICAgICAgICAvLyBUaGUgY2xpZW50IG11c3QgYmUgaW5pdGlhbGl6ZWQgdG8gZW5zdXJlIHRoYXQgYWxsIHN1YnNlcXVlbnQgQVBJXG4gICAgICAgIC8vIHVzYWdlIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICAgIFZoKHRoaXMpLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LiBJZiB0aGUgY3VzdG9tIHNldHRpbmdzIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiBpc1xuICogZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIG5hbWUgb2YgZGF0YWJhc2UuXG4gKiBAcmV0dXJucyBBIG5ld2x5IGluaXRpYWxpemVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICovIGZ1bmN0aW9uIFJoKHQsIGUsIG4pIHtcbiAgICBuIHx8IChuID0gXCIoZGVmYXVsdClcIik7XG4gICAgY29uc3QgcyA9IF9nZXRQcm92aWRlcih0LCBcImZpcmVzdG9yZVwiKTtcbiAgICBpZiAocy5pc0luaXRpYWxpemVkKG4pKSB7XG4gICAgICAgIGNvbnN0IHQgPSBzLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiBuXG4gICAgICAgIH0pLCBpID0gcy5nZXRPcHRpb25zKG4pO1xuICAgICAgICBpZiAoZGVlcEVxdWFsKGksIGUpKSByZXR1cm4gdDtcbiAgICAgICAgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcImluaXRpYWxpemVGaXJlc3RvcmUoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoIGRpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVGaXJlc3RvcmUoKSB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0RmlyZXN0b3JlKCkgdG8gcmV0dXJuIHRoZSBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLlwiKTtcbiAgICB9XG4gICAgaWYgKHZvaWQgMCAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiB2b2lkIDAgIT09IGUubG9jYWxDYWNoZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlIGFuZCBjYWNoZVNpemVCeXRlcyBjYW5ub3QgYmUgc3BlY2lmaWVkIGF0IHRoZSBzYW1lIHRpbWUgYXMgY2FjaGVTaXplQnl0ZXMgd2lsbGJlIGRlcHJlY2F0ZWQuIEluc3RlYWQsIHNwZWNpZnkgdGhlIGNhY2hlIHNpemUgaW4gdGhlIGNhY2hlIG9iamVjdFwiKTtcbiAgICBpZiAodm9pZCAwICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIC0xICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIGUuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgIHJldHVybiBzLmluaXRpYWxpemUoe1xuICAgICAgICBvcHRpb25zOiBlLFxuICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gUGgoZSwgbikge1xuICAgIGNvbnN0IHMgPSBcIm9iamVjdFwiID09IHR5cGVvZiBlID8gZSA6IGdldEFwcCgpLCBpID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IGUgOiBuIHx8IFwiKGRlZmF1bHQpXCIsIHIgPSBfZ2V0UHJvdmlkZXIocywgXCJmaXJlc3RvcmVcIikuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgaWRlbnRpZmllcjogaVxuICAgIH0pO1xuICAgIGlmICghci5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgY29uc3QgdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydChcImZpcmVzdG9yZVwiKTtcbiAgICAgICAgdCAmJiBsaChyLCAuLi50KTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gYmgodCkge1xuICAgIHJldHVybiB0Ll9maXJlc3RvcmVDbGllbnQgfHwgVmgodCksIHQuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIHQuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gVmgodCkge1xuICAgIHZhciBlLCBuLCBzO1xuICAgIGNvbnN0IGkgPSB0Ll9mcmVlemVTZXR0aW5ncygpLCByID0gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3ICRlKHQsIGUsIG4sIHMuaG9zdCwgcy5zc2wsIHMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIHRoKHMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSwgcy51c2VGZXRjaFN0cmVhbXMpO1xuICAgIH0odC5fZGF0YWJhc2VJZCwgKG51bGwgPT09IChlID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9wdGlvbnMuYXBwSWQpIHx8IFwiXCIsIHQuX3BlcnNpc3RlbmNlS2V5LCBpKTtcbiAgICB0Ll9maXJlc3RvcmVDbGllbnQgPSBuZXcgeGEodC5fYXV0aENyZWRlbnRpYWxzLCB0Ll9hcHBDaGVja0NyZWRlbnRpYWxzLCB0Ll9xdWV1ZSwgciksIFxuICAgIChudWxsID09PSAobiA9IGkuY2FjaGUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uX29mZmxpbmVDb21wb25lbnRQcm92aWRlcikgJiYgKG51bGwgPT09IChzID0gaS5jYWNoZSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIpICYmICh0Ll9maXJlc3RvcmVDbGllbnQuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPSB7XG4gICAgICAgIF9vZmZsaW5lS2luZDogaS5jYWNoZS5raW5kLFxuICAgICAgICBfb2ZmbGluZTogaS5jYWNoZS5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyLFxuICAgICAgICBfb25saW5lOiBpLmNhY2hlLl9vbmxpbmVDb21wb25lbnRQcm92aWRlclxuICAgIH0pO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUZpcmVzdG9yZX0sIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfSBvclxuICoge0BsaW5rIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2V9LlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZSBpdFxuICogcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogUGVyc2lzdGVuY2UgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIG1ham9yIHJlbGVhc2UuIEluc3RlYWQsIHNldFxuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byBhbiBpbnN0YW5jZSBvZiBgSW5kZXhlZERiTG9jYWxDYWNoZWAgdG9cbiAqIHR1cm4gb24gSW5kZXhlZERiIGNhY2hlLiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2hlbiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgXG4gKiBpcyBhbHJlYWR5IHNwZWNpZmllZCB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbi5cbiAqLyBmdW5jdGlvbiBTaCh0LCBlKSB7XG4gICAgQmgodCA9IHVoKHQsIHZoKSk7XG4gICAgY29uc3QgbiA9IGJoKHQpO1xuICAgIGlmIChuLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiU0RLIGNhY2hlIGlzIGFscmVhZHkgc3BlY2lmaWVkLlwiKTtcbiAgICBNKFwiZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gdGhlIGZ1dHVyZSwgeW91IGNhbiB1c2UgYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCBpbnN0ZWFkLlwiKTtcbiAgICBjb25zdCBzID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgaSA9IG5ldyBQYTtcbiAgICByZXR1cm4gQ2gobiwgaSwgbmV3IHZhKGksIHMuY2FjaGVTaXplQnl0ZXMsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgbXVsdGktdGFiIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuIElmIGVuYWJsZWRcbiAqIGFjcm9zcyBhbGwgdGFicywgYWxsIG9wZXJhdGlvbnMgc2hhcmUgYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLCBpbmNsdWRpbmdcbiAqIHNoYXJlZCBleGVjdXRpb24gb2YgcXVlcmllcyBhbmQgbGF0ZW5jeS1jb21wZW5zYXRlZCBsb2NhbCBkb2N1bWVudCB1cGRhdGVzXG4gKiBhY3Jvc3MgYWxsIGNvbm5lY3RlZCBpbnN0YW5jZXMuXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2VcbiAqIGl0IHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYiBhbmRcbiAqICAgICBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnRcbiAqIHN0b3JhZ2UuXG4gKiBAZGVwcmVjYXRlZCBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciByZWxlYXNlLiBJbnN0ZWFkLCBzZXRcbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgdG8gYW4gaW5zdGFuY2Ugb2YgYEluZGV4ZWREYkxvY2FsQ2FjaGVgIHRvXG4gKiB0dXJuIG9uIGluZGV4ZWRkYiBjYWNoZS4gQ2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdoZW4gYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYFxuICogaXMgYWxyZWFkeSBzcGVjaWZpZWQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKi8gZnVuY3Rpb24gRGgodCkge1xuICAgIEJoKHQgPSB1aCh0LCB2aCkpO1xuICAgIGNvbnN0IGUgPSBiaCh0KTtcbiAgICBpZiAoZS5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlNESyBjYWNoZSBpcyBhbHJlYWR5IHNwZWNpZmllZC5cIik7XG4gICAgTShcImVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gdGhlIGZ1dHVyZSwgeW91IGNhbiB1c2UgYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCBpbnN0ZWFkLlwiKTtcbiAgICBjb25zdCBuID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgcyA9IG5ldyBQYTtcbiAgICByZXR1cm4gQ2goZSwgcywgbmV3IFJhKHMsIG4uY2FjaGVTaXplQnl0ZXMpKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYm90aCB0aGUgYE9mZmxpbmVDb21wb25lbnRQcm92aWRlcmAgYW5kIGBPbmxpbmVDb21wb25lbnRQcm92aWRlcmAuXG4gKiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYSByZWNvdmVyYWJsZSBlcnJvciAoc2VlXG4gKiBgY2FuUmVjb3ZlckZyb21JbmRleGVkRGJFcnJvcigpYCBiZWxvdyksIHRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlamVjdGVkXG4gKiBidXQgdGhlIGNsaWVudCByZW1haW5zIHVzYWJsZS5cbiAqLyBmdW5jdGlvbiBDaCh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBLO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgTmEodCwgbiksIGF3YWl0IGthKHQsIGUpLCBzLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQ7XG4gICAgICAgICAgICBpZiAoIU1hKGUpKSB0aHJvdyBlO1xuICAgICAgICAgICAgTShcIkVycm9yIGVuYWJsaW5nIGluZGV4ZWRkYiBjYWNoZS4gRmFsbGluZyBiYWNrIHRvIG1lbW9yeSBjYWNoZTogXCIgKyBlKSwgcy5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9KSkudGhlbigoKCkgPT4gcy5wcm9taXNlKSk7XG59XG5cbi8qKlxuICogQ2xlYXJzIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UuIFRoaXMgaW5jbHVkZXMgcGVuZGluZyB3cml0ZXMgYW5kIGNhY2hlZFxuICogZG9jdW1lbnRzLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIHdoaWxlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBpcyBub3Qgc3RhcnRlZCAoYWZ0ZXIgdGhlIGFwcCBpc1xuICogdGVybWluYXRlZCBvciB3aGVuIHRoZSBhcHAgaXMgZmlyc3QgaW5pdGlhbGl6ZWQpLiBPbiBzdGFydHVwLCB0aGlzIGZ1bmN0aW9uXG4gKiBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuIHtAbGlua1xuICogaW5pdGlhbGl6ZUZpcmVzdG9yZX0gb3Ige0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9KSkuIElmIHRoZSB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgc3RpbGwgcnVubmluZywgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBlcnJvciBjb2RlXG4gKiBvZiBgZmFpbGVkLXByZWNvbmRpdGlvbmAuXG4gKlxuICogTm90ZTogYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGhlbHAgd3JpdGVcbiAqIHJlbGlhYmxlIHRlc3RzIHRoYXQgdXNlIENsb3VkIEZpcmVzdG9yZS4gSXQgdXNlcyBhbiBlZmZpY2llbnQgbWVjaGFuaXNtIGZvclxuICogZHJvcHBpbmcgZXhpc3RpbmcgZGF0YSBidXQgZG9lcyBub3QgYXR0ZW1wdCB0byBzZWN1cmVseSBvdmVyd3JpdGUgb3JcbiAqIG90aGVyd2lzZSBtYWtlIGNhY2hlZCBkYXRhIHVucmVjb3ZlcmFibGUuIEZvciBhcHBsaWNhdGlvbnMgdGhhdCBhcmUgc2Vuc2l0aXZlXG4gKiB0byB0aGUgZGlzY2xvc3VyZSBvZiBjYWNoZWQgZGF0YSBpbiBiZXR3ZWVuIHVzZXIgc2Vzc2lvbnMsIHdlIHN0cm9uZ2x5XG4gKiByZWNvbW1lbmQgbm90IGVuYWJsaW5nIHBlcnNpc3RlbmNlIGF0IGFsbC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGNsZWFyIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlIGlzXG4gKiBjbGVhcmVkLiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gKi8gZnVuY3Rpb24geGgodCkge1xuICAgIGlmICh0Ll9pbml0aWFsaXplZCAmJiAhdC5fdGVybWluYXRlZCkgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlBlcnNpc3RlbmNlIGNhbiBvbmx5IGJlIGNsZWFyZWQgYmVmb3JlIGEgRmlyZXN0b3JlIGluc3RhbmNlIGlzIGluaXRpYWxpemVkIG9yIGFmdGVyIGl0IGlzIHRlcm1pbmF0ZWQuXCIpO1xuICAgIGNvbnN0IGUgPSBuZXcgSztcbiAgICByZXR1cm4gdC5fcXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJ0LkQoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0ICsgXCJtYWluXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgYnQuZGVsZXRlKGUpO1xuICAgICAgICAgICAgfShabyh0Ll9kYXRhYmFzZUlkLCB0Ll9wZXJzaXN0ZW5jZUtleSkpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgZS5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSksIGUucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIE5oKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IEs7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gWmMoYXdhaXQgcWEodCksIGUpKSksIGUucHJvbWlzZTtcbiAgICB9KGJoKHQgPSB1aCh0LCB2aCkpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24ga2godCkge1xuICAgIHJldHVybiBHYShiaCh0ID0gdWgodCwgdmgpKSk7XG59XG5cbi8qKlxuICogRGlzYWJsZXMgbmV0d29yayB1c2FnZSBmb3IgdGhpcyBpbnN0YW5jZS4gSXQgY2FuIGJlIHJlLWVuYWJsZWQgdmlhIHtAbGlua1xuICogZW5hYmxlTmV0d29ya30uIFdoaWxlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLCBhbnkgc25hcHNob3QgbGlzdGVuZXJzLFxuICogYGdldERvYygpYCBvciBgZ2V0RG9jcygpYCBjYWxscyB3aWxsIHJldHVybiByZXN1bHRzIGZyb20gY2FjaGUsIGFuZCBhbnkgd3JpdGVcbiAqIG9wZXJhdGlvbnMgd2lsbCBiZSBxdWV1ZWQgdW50aWwgdGhlIG5ldHdvcmsgaXMgcmVzdG9yZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGRpc2FibGVkLlxuICovIGZ1bmN0aW9uIE1oKHQpIHtcbiAgICByZXR1cm4gUWEoYmgodCA9IHVoKHQsIHZoKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICpcbiAqIFRlcm1pbmF0aW9uIGRvZXMgbm90IGNhbmNlbCBhbnkgcGVuZGluZyB3cml0ZXMsIGFuZCBhbnkgcHJvbWlzZXMgdGhhdCBhcmVcbiAqIGF3YWl0aW5nIGEgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHdpbGwgbm90IGJlIHJlc29sdmVkLiBJZiB5b3UgaGF2ZVxuICogcGVyc2lzdGVuY2UgZW5hYmxlZCwgdGhlIG5leHQgdGltZSB5b3Ugc3RhcnQgdGhpcyBpbnN0YW5jZSwgaXQgd2lsbCByZXN1bWVcbiAqIHNlbmRpbmcgdGhlc2Ugd3JpdGVzIHRvIHRoZSBzZXJ2ZXIuXG4gKlxuICogTm90ZTogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBpcyBub3QgcmVxdWlyZWQuIFRoaXNcbiAqIGZ1bmN0aW9uIGlzIHVzZWZ1bCBvbmx5IHdoZW4geW91IHdhbnQgdG8gZm9yY2UgdGhpcyBpbnN0YW5jZSB0byByZWxlYXNlIGFsbFxuICogb2YgaXRzIHJlc291cmNlcyBvciBpbiBjb21iaW5hdGlvbiB3aXRoIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHRvXG4gKiBlbnN1cmUgdGhhdCBhbGwgbG9jYWwgc3RhdGUgaXMgZGVzdHJveWVkIGJldHdlZW4gdGVzdCBydW5zLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgaW5zdGFuY2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiB0ZXJtaW5hdGVkLlxuICovIGZ1bmN0aW9uICRoKHQpIHtcbiAgICByZXR1cm4gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSh0LmFwcCwgXCJmaXJlc3RvcmVcIiwgdC5fZGF0YWJhc2VJZC5kYXRhYmFzZSksIHQuX2RlbGV0ZSgpO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGxvYWQgYnVuZGxlcyBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkXG4gKiBvYmplY3RzIGFyZSBgQXJyYXlCdWZmZXJgLCBgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT5gIG9yIGBzdHJpbmdgLlxuICpcbiAqIEByZXR1cm5zIEEgYExvYWRCdW5kbGVUYXNrYCBvYmplY3QsIHdoaWNoIG5vdGlmaWVzIGNhbGxlcnMgd2l0aCBwcm9ncmVzc1xuICogdXBkYXRlcywgYW5kIGNvbXBsZXRpb24gb3IgZXJyb3IgZXZlbnRzLiBJdCBjYW4gYmUgdXNlZCBhcyBhXG4gKiBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gT2godCwgZSkge1xuICAgIGNvbnN0IG4gPSBiaCh0ID0gdWgodCwgdmgpKSwgcyA9IG5ldyBFaDtcbiAgICByZXR1cm4gWWEobiwgdC5fZGF0YWJhc2VJZCwgZSwgcyksIHM7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlblxuICogbmFtZS5cbiAqXG4gKiBUaGUgbmFtZWQgcXVlcmllcyBhcmUgcGFja2FnZWQgIGludG8gYnVuZGxlcyBvbiB0aGUgc2VydmVyIHNpZGUgKGFsb25nXG4gKiB3aXRoIHJlc3VsdGluZyBkb2N1bWVudHMpLCBhbmQgbG9hZGVkIHRvIGxvY2FsIGNhY2hlIHVzaW5nIGBsb2FkQnVuZGxlYC4gT25jZVxuICogaW4gbG9jYWwgY2FjaGUsIHVzZSB0aGlzIG1ldGhvZCB0byBleHRyYWN0IGEge0BsaW5rIFF1ZXJ5fSBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gcmVhZCB0aGUgcXVlcnkgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aXRoIHRoZSBRdWVyeSBvciBgbnVsbGAuXG4gKi8gZnVuY3Rpb24gRmgodCwgZSkge1xuICAgIHJldHVybiBYYShiaCh0ID0gdWgodCwgdmgpKSwgZSkudGhlbigoZSA9PiBlID8gbmV3IGRoKHQsIG51bGwsIGUucXVlcnkpIDogbnVsbCkpO1xufVxuXG5mdW5jdGlvbiBCaCh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkIHx8IHQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYWdncmVnYXRpb24gdGhhdCBjYW4gYmUgcGVyZm9ybWVkIGJ5IEZpcmVzdG9yZS5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuY2xhc3MgTGgge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBBZ2dyZWdhdGVGaWVsZDxUPlxuICAgICAqIEBwYXJhbSBfYWdncmVnYXRlVHlwZSBTcGVjaWZpZXMgdGhlIHR5cGUgb2YgYWdncmVnYXRpb24gb3BlcmF0aW9uIHRvIHBlcmZvcm0uXG4gICAgICogQHBhcmFtIF9pbnRlcm5hbEZpZWxkUGF0aCBPcHRpb25hbGx5IHNwZWNpZmllcyB0aGUgZmllbGQgdGhhdCBpcyBhZ2dyZWdhdGVkLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRPRE8gKHN1bS9hdmcpIG1ha2UgYWdncmVnYXRlVHlwZSBwdWJsaWMgd2hlbiB0aGUgZmVhdHVyZSBpcyBzdXBwb3J0ZWRcbiAgICB0ID0gXCJjb3VudFwiLCBlKSB7XG4gICAgICAgIHRoaXMuX2FnZ3JlZ2F0ZVR5cGUgPSB0LCB0aGlzLl9pbnRlcm5hbEZpZWxkUGF0aCA9IGUsIFxuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJBZ2dyZWdhdGVGaWVsZFwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgcmVzdWx0cyBvZiBleGVjdXRpbmcgYW4gYWdncmVnYXRpb24gcXVlcnkuXG4gKi8gY2xhc3MgcWgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX2RhdGEgPSBuLCBcbiAgICAgICAgLyoqIEEgdHlwZSBzdHJpbmcgdG8gdW5pcXVlbHkgaWRlbnRpZnkgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiQWdncmVnYXRlUXVlcnlTbmFwc2hvdFwiLCB0aGlzLnF1ZXJ5ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcmVzdWx0cyBvZiB0aGUgYWdncmVnYXRpb25zIHBlcmZvcm1lZCBvdmVyIHRoZSB1bmRlcmx5aW5nXG4gICAgICogcXVlcnkuXG4gICAgICpcbiAgICAgKiBUaGUga2V5cyBvZiB0aGUgcmV0dXJuZWQgb2JqZWN0IHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhvc2Ugb2YgdGhlXG4gICAgICogYEFnZ3JlZ2F0ZVNwZWNgIG9iamVjdCBzcGVjaWZpZWQgdG8gdGhlIGFnZ3JlZ2F0aW9uIG1ldGhvZCwgYW5kIHRoZSB2YWx1ZXNcbiAgICAgKiB3aWxsIGJlIHRoZSBjb3JyZXNwb25kaW5nIGFnZ3JlZ2F0aW9uIHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByZXN1bHRzIG9mIHRoZSBhZ2dyZWdhdGlvbnMgcGVyZm9ybWVkIG92ZXIgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBxdWVyeS5cbiAgICAgKi8gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRPYmplY3RNYXAodGhpcy5fZGF0YSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhcnJheSBvZiBieXRlcy5cbiAqLyBjbGFzcyBVaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX2J5dGVTdHJpbmcgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIEJhc2U2NCBzdHJpbmcsIGNvbnZlcnRpbmcgaXQgdG9cbiAgICAgKiBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlNjQgLSBUaGUgQmFzZTY0IHN0cmluZyB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWgoVmUuZnJvbUJhc2U2NFN0cmluZyh0KSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gY29uc3RydWN0IGRhdGEgZnJvbSBCYXNlNjQgc3RyaW5nOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gVWludDhBcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSBVaW50OEFycmF5IHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaChWZS5mcm9tVWludDhBcnJheSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgYXMgYSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgQmFzZTY0LWVuY29kZWQgc3RyaW5nIGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b0Jhc2U2NCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGluIGEgbmV3IGBVaW50OEFycmF5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBVaW50OEFycmF5IGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9VaW50OEFycmF5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiQnl0ZXMoYmFzZTY0OiBcIiArIHRoaXMudG9CYXNlNjQoKSArIFwiKVwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBCeXRlc2Agb2JqZWN0IHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLmlzRXF1YWwodC5fYnl0ZVN0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBGaWVsZFBhdGhgIHJlZmVycyB0byBhIGZpZWxkIGluIGEgZG9jdW1lbnQuIFRoZSBwYXRoIG1heSBjb25zaXN0IG9mIGFcbiAqIHNpbmdsZSBmaWVsZCBuYW1lIChyZWZlcnJpbmcgdG8gYSB0b3AtbGV2ZWwgZmllbGQgaW4gdGhlIGRvY3VtZW50KSwgb3IgYVxuICogbGlzdCBvZiBmaWVsZCBuYW1lcyAocmVmZXJyaW5nIHRvIGEgbmVzdGVkIGZpZWxkIGluIHRoZSBkb2N1bWVudCkuXG4gKlxuICogQ3JlYXRlIGEgYEZpZWxkUGF0aGAgYnkgcHJvdmlkaW5nIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXG4gKi8gY2xhc3MgS2gge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSBpZiAoMCA9PT0gdFtlXS5sZW5ndGgpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IGF0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbCh0Ll9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIEdoKCkge1xuICAgIHJldHVybiBuZXcgS2goXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgUWgge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3Mgamgge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTkwIHx8IHQgPiA5MCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtMTgwIHx8IGUgPiAxODApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgdGhpcy5fbGF0ID0gdCwgdGhpcy5fbG9uZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsb25naXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEdlb1BvaW50YCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IHQuX2xhdCAmJiB0aGlzLl9sb25nID09PSB0Ll9sb25nO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgR2VvUG9pbnQuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBldCh0aGlzLl9sYXQsIHQuX2xhdCkgfHwgZXQodGhpcy5fbG9uZywgdC5fbG9uZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB6aCA9IC9eX18uKl9fJC87XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqLyBjbGFzcyBXaCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyB6cyh0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcganModCwgdGhpcy5kYXRhLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi8gY2xhc3MgSGgge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IHpzKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEpoKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBVc2VyRGF0YVNvdXJjZS5TZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyBZaCB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBzLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLnVhKCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSByIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0IGNhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5jYTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgIGFhKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBZaChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCB0KSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgaGEodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy5hYSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgbGE6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5mYSh0KSwgcztcbiAgICB9XG4gICAgZGEodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy5hYSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgbGE6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy51YSgpLCBzO1xuICAgIH1cbiAgICB3YSh0KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy5hYSh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICBsYTogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hKHQpIHtcbiAgICAgICAgcmV0dXJuIGdsKHQsIHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSwgdGhpcy5zZXR0aW5ncy5tYSB8fCAhMSwgdGhpcy5wYXRoLCB0aGlzLnNldHRpbmdzLmdhKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovICAgIGNvbnRhaW5zKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5maWVsZE1hc2suZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZSkpKSB8fCB2b2lkIDAgIT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUuZmllbGQpKSk7XG4gICAgfVxuICAgIHVhKCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKHRoaXMucGF0aCkgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnBhdGgubGVuZ3RoOyB0KyspIHRoaXMuZmEodGhpcy5wYXRoLmdldCh0KSk7XG4gICAgfVxuICAgIGZhKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB0aHJvdyB0aGlzLl9hKFwiRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICBpZiAoSmgodGhpcy5jYSkgJiYgemgudGVzdCh0KSkgdGhyb3cgdGhpcy5fYSgnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcbiAqIGNsYXNzZXMuXG4gKi8gY2xhc3MgWGgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gZSwgdGhpcy5zZXJpYWxpemVyID0gbiB8fCBGdSh0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIHlhKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IFloKHtcbiAgICAgICAgICAgIGNhOiB0LFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogZSxcbiAgICAgICAgICAgIGdhOiBuLFxuICAgICAgICAgICAgcGF0aDogYXQuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICBsYTogITEsXG4gICAgICAgICAgICBtYTogc1xuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuc2VyaWFsaXplciwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFpoKHQpIHtcbiAgICBjb25zdCBlID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IEZ1KHQuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgWGgodC5fZGF0YWJhc2VJZCwgISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIG4pO1xufVxuXG4vKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbC4gKi8gZnVuY3Rpb24gdGwodCwgZSwgbiwgcywgaSwgciA9IHt9KSB7XG4gICAgY29uc3QgbyA9IHQueWEoci5tZXJnZSB8fCByLm1lcmdlRmllbGRzID8gMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyA6IDAgLyogVXNlckRhdGFTb3VyY2UuU2V0ICovICwgZSwgbiwgaSk7XG4gICAgZGwoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCBzKTtcbiAgICBjb25zdCB1ID0gbGwocywgbyk7XG4gICAgbGV0IGMsIGE7XG4gICAgaWYgKHIubWVyZ2UpIGMgPSBuZXcgUmUoby5maWVsZE1hc2spLCBhID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygci5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IHdsKGUsIHMsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBGaWVsZCAnJHtpfScgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5gKTtcbiAgICAgICAgICAgIHlsKHQsIGkpIHx8IHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBjID0gbmV3IFJlKHQpLCBhID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKCh0ID0+IGMuY292ZXJzKHQuZmllbGQpKSk7XG4gICAgfSBlbHNlIGMgPSBudWxsLCBhID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBXaChuZXcgdW4odSksIGMsIGEpO1xufVxuXG5jbGFzcyBlbCBleHRlbmRzIFFoIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGlmICgyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovICE9PSB0LmNhKSB0aHJvdyAxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyA9PT0gdC5jYSA/IHQuX2EoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiB0Ll9hKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGVsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gbmwodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgWWgoe1xuICAgICAgICBjYTogMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyAsXG4gICAgICAgIGdhOiBlLnNldHRpbmdzLmdhLFxuICAgICAgICBtZXRob2ROYW1lOiB0Ll9tZXRob2ROYW1lLFxuICAgICAgICBsYTogblxuICAgIH0sIGUuZGF0YWJhc2VJZCwgZS5zZXJpYWxpemVyLCBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xufVxuXG5jbGFzcyBzbCBleHRlbmRzIFFoIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTXModC5wYXRoLCBuZXcgYnMpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBzbDtcbiAgICB9XG59XG5cbmNsYXNzIGlsIGV4dGVuZHMgUWgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMucGEgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBubCh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLnBhLm1hcCgodCA9PiBobCh0LCBlKSkpLCBzID0gbmV3IFZzKG4pO1xuICAgICAgICByZXR1cm4gbmV3IE1zKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIHJsIGV4dGVuZHMgUWgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMucGEgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBubCh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLnBhLm1hcCgodCA9PiBobCh0LCBlKSkpLCBzID0gbmV3IERzKG4pO1xuICAgICAgICByZXR1cm4gbmV3IE1zKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIG9sIGV4dGVuZHMgUWgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuSWEgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgeHModC5zZXJpYWxpemVyLCBFcyh0LnNlcmlhbGl6ZXIsIHRoaXMuSWEpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNcyh0LnBhdGgsIGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqLyBmdW5jdGlvbiB1bCh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHQueWEoMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gLCBlLCBuKTtcbiAgICBkbChcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHMpO1xuICAgIGNvbnN0IHIgPSBbXSwgbyA9IHVuLmVtcHR5KCk7XG4gICAgZ2UocywgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IHUgPSBtbChlLCB0LCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHMgPSBnZXRNb2R1bGFySW5zdGFuY2Uocyk7XG4gICAgICAgIGNvbnN0IGMgPSBpLmRhKHUpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIGVsKSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHIucHVzaCh1KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaGwocywgYyk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHIucHVzaCh1KSwgby5zZXQodSwgdCkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IHUgPSBuZXcgUmUocik7XG4gICAgcmV0dXJuIG5ldyBIaChvLCB1LCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIGNsKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICBjb25zdCBvID0gdC55YSgxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyAsIGUsIG4pLCB1ID0gWyB3bChlLCBzLCBuKSBdLCBjID0gWyBpIF07XG4gICAgaWYgKHIubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy5gKTtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0ICs9IDIpIHUucHVzaCh3bChlLCByW3RdKSksIGMucHVzaChyW3QgKyAxXSk7XG4gICAgY29uc3QgYSA9IFtdLCBoID0gdW4uZW1wdHkoKTtcbiAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcGljayB0aGUgbGFzdCB2YWx1ZSBmb3IgYSBmaWVsZCBpZiB0aGVcbiAgICAvLyB1c2VyIHNwZWNpZmllZCB0aGUgZmllbGQgbXVsdGlwbGUgdGltZXMuXG4gICAgZm9yIChsZXQgdCA9IHUubGVuZ3RoIC0gMTsgdCA+PSAwOyAtLXQpIGlmICgheWwoYSwgdVt0XSkpIHtcbiAgICAgICAgY29uc3QgZSA9IHVbdF07XG4gICAgICAgIGxldCBuID0gY1t0XTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHMgPSBvLmRhKGUpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIGVsKSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIGEucHVzaChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaGwobiwgcyk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKGEucHVzaChlKSwgaC5zZXQoZSwgdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgUmUoYSk7XG4gICAgcmV0dXJuIG5ldyBIaChoLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIGFsKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgIHJldHVybiBobChuLCB0LnlhKHMgPyA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gOiAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovICwgZSkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB1c2VyIGRhdGEgdG8gUHJvdG9idWYgVmFsdWVzLlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIERhdGEgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGNvbnRleHQgLSBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcbiAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXG4gKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cbiAqLyBmdW5jdGlvbiBobCh0LCBlKSB7XG4gICAgaWYgKGZsKFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiBkbChcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCBlLCB0KSwgbGwodCwgZSk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBRaCkgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBkZWxldGVGaWVsZCgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghSmgoZS5jYSkpIHRocm93IGUuX2EoYCR7dC5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghZS5wYXRoKSB0aHJvdyBlLl9hKGAke3QuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gdC5fdG9GaWVsZFRyYW5zZm9ybShlKTtcbiAgICAgICAgbiAmJiBlLmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKHQsIGUpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IHQgJiYgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgZS5wYXRoICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKGUuc2V0dGluZ3MubGEgJiYgNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovICE9PSBlLmNhKSB0aHJvdyBlLl9hKFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBobChpLCBlLndhKHMpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IHQgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICB0ID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaCh0KSwgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09PSAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0KSByZXR1cm4gRXMoZS5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gaXQuZnJvbURhdGUodCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBEaShlLnNlcmlhbGl6ZXIsIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgaXQpIHtcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBiYWNrZW5kIHRydW5jYXRlcyBwcmVjaXNpb24gZG93biB0byBtaWNyb3NlY29uZHMuIFRvIGVuc3VyZVxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxuICAgICAgICAgICAgLy8gdHJ1bmNhdGlvbiBpbW1lZGlhdGVseSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBiYWNrZW5kIHRvIGRvIHRoYXQuXG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IGl0KHQuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcih0Lm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBEaShlLnNlcmlhbGl6ZXIsIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgamgpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHQubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiB0LmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVoKSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogQ2koZS5zZXJpYWxpemVyLCB0Ll9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGZoKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5kYXRhYmFzZUlkLCBzID0gdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXMuaXNFcXVhbChuKSkgdGhyb3cgZS5fYShgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGtpKHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkIHx8IGUuZGF0YWJhc2VJZCwgdC5fa2V5LnBhdGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGUuX2EoYFVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiAke29oKHQpfWApO1xuICAgIH1cbiAgICAvKipcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIGxsKHQsIGUpIHtcbiAgICBjb25zdCBuID0ge307XG4gICAgcmV0dXJuIHllKHQpID8gXG4gICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxuICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxuICAgIGUucGF0aCAmJiBlLnBhdGgubGVuZ3RoID4gMCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCkgOiBnZSh0LCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IGhsKHMsIGUuaGEodCkpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG5bdF0gPSBpKTtcbiAgICB9KSksIHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZmwodCkge1xuICAgIHJldHVybiAhKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCB8fCB0IGluc3RhbmNlb2YgQXJyYXkgfHwgdCBpbnN0YW5jZW9mIERhdGUgfHwgdCBpbnN0YW5jZW9mIGl0IHx8IHQgaW5zdGFuY2VvZiBqaCB8fCB0IGluc3RhbmNlb2YgVWggfHwgdCBpbnN0YW5jZW9mIGZoIHx8IHQgaW5zdGFuY2VvZiBRaCk7XG59XG5cbmZ1bmN0aW9uIGRsKHQsIGUsIG4pIHtcbiAgICBpZiAoIWZsKG4pIHx8ICFmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQgJiYgKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBudWxsID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpO1xuICAgIH0obikpIHtcbiAgICAgICAgY29uc3QgcyA9IG9oKG4pO1xuICAgICAgICB0aHJvdyBcImFuIG9iamVjdFwiID09PSBzID8gZS5fYSh0ICsgXCIgYSBjdXN0b20gb2JqZWN0XCIpIDogZS5fYSh0ICsgXCIgXCIgKyBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIHdsKHQsIGUsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggd2l0aCB0aGUgZmlyZXN0b3JlLWV4cFxuICAgIC8vIEZpZWxkUGF0aC5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSBpbnN0YW5jZW9mIEtoKSByZXR1cm4gZS5faW50ZXJuYWxQYXRoO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gbWwodCwgZSk7XG4gICAgdGhyb3cgZ2woXCJGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIFwiLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xufVxuXG4vKipcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cbiAqLyBjb25zdCBfbCA9IG5ldyBSZWdFeHAoXCJbflxcXFwqL1xcXFxbXFxcXF1dXCIpO1xuXG4vKipcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxuICogd2FzIHRocm93bi5cbiAqIEBwYXJhbSBtZXRob2ROYW1lIC0gVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmVcbiAqIHNwbGl0IG9uIGRvdHMuXG4gKiBAcGFyYW0gdGFyZ2V0RG9jIC0gVGhlIGRvY3VtZW50IGFnYWluc3Qgd2hpY2ggdGhlIGZpZWxkIHBhdGggd2lsbCBiZVxuICogZXZhbHVhdGVkLlxuICovIGZ1bmN0aW9uIG1sKHQsIGUsIG4pIHtcbiAgICBpZiAoZS5zZWFyY2goX2wpID49IDApIHRocm93IGdsKGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluICd+JywgJyonLCAnLycsICdbJywgb3IgJ10nYCwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IEtoKC4uLmUuc3BsaXQoXCIuXCIpKS5faW50ZXJuYWxQYXRoO1xuICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgdGhyb3cgZ2woYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgLCB0LCBcbiAgICAgICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnbCh0LCBlLCBuLCBzLCBpKSB7XG4gICAgY29uc3QgciA9IHMgJiYgIXMuaXNFbXB0eSgpLCBvID0gdm9pZCAwICE9PSBpO1xuICAgIGxldCB1ID0gYEZ1bmN0aW9uICR7ZX0oKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGFgO1xuICAgIG4gJiYgKHUgKz0gXCIgKHZpYSBgdG9GaXJlc3RvcmUoKWApXCIpLCB1ICs9IFwiLiBcIjtcbiAgICBsZXQgYyA9IFwiXCI7XG4gICAgcmV0dXJuIChyIHx8IG8pICYmIChjICs9IFwiIChmb3VuZFwiLCByICYmIChjICs9IGAgaW4gZmllbGQgJHtzfWApLCBvICYmIChjICs9IGAgaW4gZG9jdW1lbnQgJHtpfWApLCBcbiAgICBjICs9IFwiKVwiKSwgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCB1ICsgdCArIGMpO1xufVxuXG4vKiogQ2hlY2tzIGBoYXlzdGFja2AgaWYgRmllbGRQYXRoIGBuZWVkbGVgIGlzIHByZXNlbnQuIFJ1bnMgaW4gTyhuKS4gKi8gZnVuY3Rpb24geWwodCwgZSkge1xuICAgIHJldHVybiB0LnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgcGwge1xuICAgIC8vIE5vdGU6IFRoaXMgY2xhc3MgaXMgc3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHRoZSBEb2N1bWVudFNuYXBzaG90IGluXG4gICAgLy8gdGhlIGxlZ2FjeSBTREsuIFRoZSBjaGFuZ2VzIGFyZTpcbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90TWV0YWRhdGEuXG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE9wdGlvbnMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX2tleSA9IG4sIHRoaXMuX2RvY3VtZW50ID0gcywgXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IGk7XG4gICAgfVxuICAgIC8qKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcHJvdmlkZXMgdGhlIGRvY3VtZW50J3MgSUQuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgIGZvciB0aGUgZG9jdW1lbnQgaW5jbHVkZWQgaW4gdGhlIGBEb2N1bWVudFNuYXBzaG90YC5cbiAgICAgKi8gICAgZ2V0IHJlZigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmaCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlciwgdGhpcy5fa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZG9jdW1lbnQgYXQgdGhlIHNuYXBzaG90J3MgbG9jYXRpb24gZXhpc3RzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgXG4gICAgICogaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IElsKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoVGwoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSkgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIElsIGV4dGVuZHMgcGwge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgYGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKWAgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gVGwodCwgZSkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gbWwodCwgZSkgOiBlIGluc3RhbmNlb2YgS2ggPyBlLl9pbnRlcm5hbFBhdGggOiBlLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBFbCh0KSB7XG4gICAgaWYgKFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovID09PSB0LmxpbWl0VHlwZSAmJiAwID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGgpIHRocm93IG5ldyBVKHEuVU5JTVBMRU1FTlRFRCwgXCJsaW1pdFRvTGFzdCgpIHF1ZXJpZXMgcmVxdWlyZSBzcGVjaWZ5aW5nIGF0IGxlYXN0IG9uZSBvcmRlckJ5KCkgY2xhdXNlXCIpO1xufVxuXG4vKipcbiAqIEFuIGBBcHBsaWFibGVDb25zdHJhaW50YCBpcyBhbiBhYnN0cmFjdGlvbiBvZiBhIGNvbnN0cmFpbnQgdGhhdCBjYW4gYmUgYXBwbGllZFxuICogdG8gYSBGaXJlc3RvcmUgcXVlcnkuXG4gKi8gY2xhc3MgQWwge31cblxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0sXG4gKiB7QGxpbmsgb3JkZXJCeX0sIHtAbGluayAoc3RhcnRBdDoxKX0sIHtAbGluayAoc3RhcnRBZnRlcjoxKX0sIHtAbGlua1xuICogKGVuZEJlZm9yZToxKX0sIHtAbGluayAoZW5kQXQ6MSl9LCB7QGxpbmsgbGltaXR9LCB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0XG4gKiBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgdmwgZXh0ZW5kcyBBbCB7fVxuXG5mdW5jdGlvbiBSbCh0LCBlLCAuLi5uKSB7XG4gICAgbGV0IHMgPSBbXTtcbiAgICBlIGluc3RhbmNlb2YgQWwgJiYgcy5wdXNoKGUpLCBzID0gcy5jb25jYXQobiksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZmlsdGVyKCh0ID0+IHQgaW5zdGFuY2VvZiBWbCkpLmxlbmd0aCwgbiA9IHQuZmlsdGVyKCh0ID0+IHQgaW5zdGFuY2VvZiBQbCkpLmxlbmd0aDtcbiAgICAgICAgaWYgKGUgPiAxIHx8IGUgPiAwICYmIG4gPiAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZFF1ZXJ5LiBXaGVuIHVzaW5nIGNvbXBvc2l0ZSBmaWx0ZXJzLCB5b3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lIGZpbHRlciBhdCB0aGUgdG9wIGxldmVsLiBDb25zaWRlciBuZXN0aW5nIHRoZSBtdWx0aXBsZSBmaWx0ZXJzIHdpdGhpbiBhbiBgYW5kKC4uLilgIHN0YXRlbWVudC4gRm9yIGV4YW1wbGU6IGNoYW5nZSBgcXVlcnkocXVlcnksIHdoZXJlKC4uLiksIG9yKC4uLikpYCB0byBgcXVlcnkocXVlcnksIGFuZCh3aGVyZSguLi4pLCBvciguLi4pKSlgLlwiKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIENvbnZlcnRzIEZpcmVzdG9yZSdzIGludGVybmFsIHR5cGVzIHRvIHRoZSBKYXZhU2NyaXB0IHR5cGVzIHRoYXQgd2UgZXhwb3NlXG4gKiB0byB0aGUgdXNlci5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyAocyk7XG4gICAgZm9yIChjb25zdCBlIG9mIHMpIHQgPSBlLl9hcHBseSh0KTtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnlcbiAqIGEgRmlyZXN0b3JlIHF1ZXJ5IGJ5IGZpbHRlcmluZyBvbiBvbmUgb3IgbW9yZSBkb2N1bWVudCBmaWVsZHMuXG4gKiBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9IGFuZCBjYW4gdGhlblxuICogYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnNcbiAqIHRoaXMgYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBQbCBleHRlbmRzIHZsIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuX2ZpZWxkID0gdCwgdGhpcy5fb3AgPSBlLCB0aGlzLl92YWx1ZSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwid2hlcmVcIjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFBsKHQsIGUsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5fcGFyc2UodCk7XG4gICAgICAgIHJldHVybiBRbCh0Ll9xdWVyeSwgZSksIG5ldyBkaCh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIFluKHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxuICAgIF9wYXJzZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBaaCh0LmZpcmVzdG9yZSksIG4gPSBmdW5jdGlvbih0LCBlLCBuLCBzLCBpLCByLCBvKSB7XG4gICAgICAgICAgICBsZXQgdTtcbiAgICAgICAgICAgIGlmIChpLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgIGlmIChcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IHIgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHIpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIFlvdSBjYW4ndCBwZXJmb3JtICcke3J9JyBxdWVyaWVzIG9uIGRvY3VtZW50SWQoKS5gKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSByIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSByKSB7XG4gICAgICAgICAgICAgICAgICAgIEdsKG8sIHIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBvKSBlLnB1c2goS2wocywgdCwgbikpO1xuICAgICAgICAgICAgICAgICAgICB1ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB1ID0gS2wocywgdCwgbyk7XG4gICAgICAgICAgICB9IGVsc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICE9PSByICYmIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICE9PSByICYmIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovICE9PSByIHx8IEdsKG8sIHIpLCBcbiAgICAgICAgICAgIHUgPSBhbChuLCBlLCBvLCBcbiAgICAgICAgICAgIC8qIGFsbG93QXJyYXlzPSAqLyBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHIgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHIpO1xuICAgICAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShpLCByLCB1KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgXCJ3aGVyZVwiLCBlLCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgdGhpcy5fZmllbGQsIHRoaXMuX29wLCB0aGlzLl92YWx1ZSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fSB0aGF0IGVuZm9yY2VzIHRoYXQgZG9jdW1lbnRzXG4gKiBtdXN0IGNvbnRhaW4gdGhlIHNwZWNpZmllZCBmaWVsZCBhbmQgdGhhdCB0aGUgdmFsdWUgc2hvdWxkIHNhdGlzZnkgdGhlXG4gKiByZWxhdGlvbiBjb25zdHJhaW50IHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCB0byBjb21wYXJlXG4gKiBAcGFyYW0gb3BTdHIgLSBUaGUgb3BlcmF0aW9uIHN0cmluZyAoZS5nIFwiJmx0O1wiLCBcIiZsdDs9XCIsIFwiPT1cIiwgXCImbHQ7XCIsXG4gKiAgIFwiJmx0Oz1cIiwgXCIhPVwiKS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBmb3IgY29tcGFyaXNvblxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBibCh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGUsIGkgPSBUbChcIndoZXJlXCIsIHQpO1xuICAgIHJldHVybiBQbC5fY3JlYXRlKGksIHMsIG4pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHNcbiAqIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5IGJ5IHBlcmZvcm1pbmcgdGhlIGxvZ2ljYWwgT1Igb3IgQU5EIG9mIG11bHRpcGxlXG4gKiB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9cyBvciB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fXMuXG4gKiBgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIG9yfSBvclxuICoge0BsaW5rIGFuZH0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnlcbiAqIGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGUgYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGAuXG4gKi8gY2xhc3MgVmwgZXh0ZW5kcyBBbCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5fcXVlcnlDb25zdHJhaW50cyA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWbCh0LCBlKTtcbiAgICB9XG4gICAgX3BhcnNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3F1ZXJ5Q29uc3RyYWludHMubWFwKChlID0+IGUuX3BhcnNlKHQpKSkuZmlsdGVyKCh0ID0+IHQuZ2V0RmlsdGVycygpLmxlbmd0aCA+IDApKTtcbiAgICAgICAgcmV0dXJuIDEgPT09IGUubGVuZ3RoID8gZVswXSA6IGduLmNyZWF0ZShlLCB0aGlzLl9nZXRPcGVyYXRvcigpKTtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3BhcnNlKHQpO1xuICAgICAgICByZXR1cm4gMCA9PT0gZS5nZXRGaWx0ZXJzKCkubGVuZ3RoID8gdCA6IChmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbiA9IHQ7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5nZXRGbGF0dGVuZWRGaWx0ZXJzKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgcykgUWwobiwgdCksIG4gPSBZbihuLCB0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVja3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBmaWx0ZXIgb3BlcmF0b3JzIGFyZSBpbmNsdWRlZCBpbiB0aGUgZ2l2ZW4gbGlzdCBvZiBmaWx0ZXJzIGFuZFxuICAgICAgICAvLyByZXR1cm5zIHRoZSBmaXJzdCBvbmUgdGhhdCBpcywgb3IgbnVsbCBpZiBub25lIGFyZS5cbiAgICAgICAgKHQuX3F1ZXJ5LCBlKSwgbmV3IGRoKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgWW4odC5fcXVlcnksIGUpKSk7XG4gICAgfVxuICAgIF9nZXRRdWVyeUNvbnN0cmFpbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnlDb25zdHJhaW50cztcbiAgICB9XG4gICAgX2dldE9wZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gXCJhbmRcIiA9PT0gdGhpcy50eXBlID8gXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gOiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0gdGhhdCBpcyBhIGRpc2p1bmN0aW9uIG9mXG4gKiB0aGUgZ2l2ZW4gZmlsdGVyIGNvbnN0cmFpbnRzLiBBIGRpc2p1bmN0aW9uIGZpbHRlciBpbmNsdWRlcyBhIGRvY3VtZW50IGlmIGl0XG4gKiBzYXRpc2ZpZXMgYW55IG9mIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gT3B0aW9uYWwuIFRoZSBsaXN0IG9mXG4gKiB7QGxpbmsgUXVlcnlGaWx0ZXJDb25zdHJhaW50fXMgdG8gcGVyZm9ybSBhIGRpc2p1bmN0aW9uIGZvci4gVGhlc2UgbXVzdCBiZVxuICogY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayB3aGVyZX0sIHtAbGluayBvcn0sIG9yIHtAbGluayBhbmR9LlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gU2woLi4udCkge1xuICAgIC8vIE9ubHkgc3VwcG9ydCBRdWVyeUZpbHRlckNvbnN0cmFpbnRzXG4gICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB6bChcIm9yXCIsIHQpKSksIFZsLl9jcmVhdGUoXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovICwgdCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fSB0aGF0IGlzIGEgY29uanVuY3Rpb24gb2ZcbiAqIHRoZSBnaXZlbiBmaWx0ZXIgY29uc3RyYWludHMuIEEgY29uanVuY3Rpb24gZmlsdGVyIGluY2x1ZGVzIGEgZG9jdW1lbnQgaWYgaXRcbiAqIHNhdGlzZmllcyBhbGwgb2YgdGhlIGdpdmVuIGZpbHRlcnMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5Q29uc3RyYWludHMgLSBPcHRpb25hbC4gVGhlIGxpc3Qgb2ZcbiAqIHtAbGluayBRdWVyeUZpbHRlckNvbnN0cmFpbnR9cyB0byBwZXJmb3JtIGEgY29uanVuY3Rpb24gZm9yLiBUaGVzZSBtdXN0IGJlXG4gKiBjcmVhdGVkIHdpdGggY2FsbHMgdG8ge0BsaW5rIHdoZXJlfSwge0BsaW5rIG9yfSwgb3Ige0BsaW5rIGFuZH0uXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBEbCguLi50KSB7XG4gICAgLy8gT25seSBzdXBwb3J0IFF1ZXJ5RmlsdGVyQ29uc3RyYWludHNcbiAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHpsKFwiYW5kXCIsIHQpKSksIFZsLl9jcmVhdGUoXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gLCB0KTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeU9yZGVyQnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIHNvcnQgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnkgYVxuICogRmlyZXN0b3JlIHF1ZXJ5LiBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nXG4gKiB7QGxpbmsgb3JkZXJCeX0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnlcbiAqIGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeU9yZGVyQnlDb25zdHJhaW50YC5cbiAqXG4gKiBOb3RlOiBEb2N1bWVudHMgdGhhdCBkbyBub3QgY29udGFpbiB0aGUgb3JkZXJCeSBmaWVsZCB3aWxsIG5vdCBiZSBwcmVzZW50IGluXG4gKiB0aGUgcXVlcnkgcmVzdWx0LlxuICovIGNsYXNzIENsIGV4dGVuZHMgdmwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5fZmllbGQgPSB0LCB0aGlzLl9kaXJlY3Rpb24gPSBlLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIm9yZGVyQnlcIjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IENsKHQsIGUpO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuc3RhcnRBdCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIHN0YXJ0QXQoKSBvciBzdGFydEFmdGVyKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmVuZEF0KSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgZW5kQXQoKSBvciBlbmRCZWZvcmUoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBkbihlLCBuKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGpuKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IG9yZGVyIGJ5LiBJdCBtdXN0IG1hdGNoIGFueSBpbmVxdWFsaXR5LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gem4odCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IG4gJiYgamwodCwgbiwgZS5maWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSh0LCBzKSwgcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZSBhIGBCb3VuZGAgZnJvbSBhIHF1ZXJ5IGFuZCBhIGRvY3VtZW50LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgYEJvdW5kYCB3aWxsIGFsd2F5cyBpbmNsdWRlIHRoZSBrZXkgb2YgdGhlIGRvY3VtZW50XG4gKiBhbmQgc28gb25seSB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgd2lsbCBjb21wYXJlIGVxdWFsIHRvIHRoZSByZXR1cm5lZFxuICogcG9zaXRpb24uXG4gKlxuICogV2lsbCB0aHJvdyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgY29udGFpbiBhbGwgZmllbGRzIG9mIHRoZSBvcmRlciBieVxuICogb2YgdGhlIHF1ZXJ5IG9yIGlmIGFueSBvZiB0aGUgZmllbGRzIGluIHRoZSBvcmRlciBieSBhcmUgYW4gdW5jb21taXR0ZWRcbiAqIHNlcnZlciB0aW1lc3RhbXAuXG4gKi8gKHQuX3F1ZXJ5LCB0aGlzLl9maWVsZCwgdGhpcy5fZGlyZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyBkaCh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGUgdGhhdCBvcmRlckJ5IGRvZXMgbm90IGxpc3QgdGhlIHNhbWUga2V5IHR3aWNlLlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbIGUgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVuKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIG4sIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnR9IHRoYXQgc29ydHMgdGhlIHF1ZXJ5IHJlc3VsdCBieSB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCwgb3B0aW9uYWxseSBpbiBkZXNjZW5kaW5nIG9yZGVyIGluc3RlYWQgb2YgYXNjZW5kaW5nLlxuICpcbiAqIE5vdGU6IERvY3VtZW50cyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgZmllbGQgd2lsbCBub3QgYmUgcHJlc2VudFxuICogaW4gdGhlIHF1ZXJ5IHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIGZpZWxkIHRvIHNvcnQgYnkuXG4gKiBAcGFyYW0gZGlyZWN0aW9uU3RyIC0gT3B0aW9uYWwgZGlyZWN0aW9uIHRvIHNvcnQgYnkgKCdhc2MnIG9yICdkZXNjJykuIElmXG4gKiBub3Qgc3BlY2lmaWVkLCBvcmRlciB3aWxsIGJlIGFzY2VuZGluZy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeU9yZGVyQnlDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiB4bCh0LCBlID0gXCJhc2NcIikge1xuICAgIGNvbnN0IG4gPSBlLCBzID0gVGwoXCJvcmRlckJ5XCIsIHQpO1xuICAgIHJldHVybiBDbC5fY3JlYXRlKHMsIG4pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5TGltaXRDb25zdHJhaW50YCBpcyB1c2VkIHRvIGxpbWl0IHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5XG4gKiBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqIGBRdWVyeUxpbWl0Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayBsaW1pdH0gb3JcbiAqIHtAbGluayBsaW1pdFRvTGFzdH0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXdcbiAqIHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUxpbWl0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgTmwgZXh0ZW5kcyB2bCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5fbGltaXQgPSBlLCB0aGlzLl9saW1pdFR5cGUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgTmwodCwgZSwgbik7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZGgodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBYbih0Ll9xdWVyeSwgdGhpcy5fbGltaXQsIHRoaXMuX2xpbWl0VHlwZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmdcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBrbCh0KSB7XG4gICAgcmV0dXJuIGNoKFwibGltaXRcIiwgdCksIE5sLl9jcmVhdGUoXCJsaW1pdFwiLCB0LCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBsYXN0IG1hdGNoaW5nXG4gKiBkb2N1bWVudHMuXG4gKlxuICogWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgYG9yZGVyQnlgIGNsYXVzZSBmb3IgYGxpbWl0VG9MYXN0YCBxdWVyaWVzLFxuICogb3RoZXJ3aXNlIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93biBkdXJpbmcgZXhlY3V0aW9uLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIE1sKHQpIHtcbiAgICByZXR1cm4gY2goXCJsaW1pdFRvTGFzdFwiLCB0KSwgTmwuX2NyZWF0ZShcImxpbWl0VG9MYXN0XCIsIHQsIFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeVN0YXJ0QXRDb25zdHJhaW50YCBpcyB1c2VkIHRvIGV4Y2x1ZGUgZG9jdW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIGFcbiAqIHJlc3VsdCBzZXQgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlTdGFydEF0Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayAoc3RhcnRBdDoxKX0gb3JcbiAqIHtAbGluayAoc3RhcnRBZnRlcjoxKX0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYVxuICogbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeVN0YXJ0QXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyAkbCBleHRlbmRzIHZsIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgdCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLl9kb2NPckZpZWxkcyA9IGUsIHRoaXMuX2luY2x1c2l2ZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyAkbCh0LCBlLCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFVsKHQsIHRoaXMudHlwZSwgdGhpcy5fZG9jT3JGaWVsZHMsIHRoaXMuX2luY2x1c2l2ZSk7XG4gICAgICAgIHJldHVybiBuZXcgZGgodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVuKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgZSwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE9sKC4uLnQpIHtcbiAgICByZXR1cm4gJGwuX2NyZWF0ZShcInN0YXJ0QXRcIiwgdCwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBGbCguLi50KSB7XG4gICAgcmV0dXJuICRsLl9jcmVhdGUoXCJzdGFydEFmdGVyXCIsIHQsIFxuICAgIC8qaW5jbHVzaXZlPSovICExKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUVuZEF0Q29uc3RyYWludGAgaXMgdXNlZCB0byBleGNsdWRlIGRvY3VtZW50cyBmcm9tIHRoZSBlbmQgb2YgYVxuICogcmVzdWx0IHNldCByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqIGBRdWVyeUVuZEF0Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayAoZW5kQXQ6MSl9IG9yXG4gKiB7QGxpbmsgKGVuZEJlZm9yZToxKX0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXdcbiAqIHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUVuZEF0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgQmwgZXh0ZW5kcyB2bCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5fZG9jT3JGaWVsZHMgPSBlLCB0aGlzLl9pbmNsdXNpdmUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmwodCwgZSwgbik7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBVbCh0LCB0aGlzLnR5cGUsIHRoaXMuX2RvY09yRmllbGRzLCB0aGlzLl9pbmNsdXNpdmUpO1xuICAgICAgICByZXR1cm4gbmV3IGRoKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgZSk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIExsKC4uLnQpIHtcbiAgICByZXR1cm4gQmwuX2NyZWF0ZShcImVuZEJlZm9yZVwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbmZ1bmN0aW9uIHFsKC4uLnQpIHtcbiAgICByZXR1cm4gQmwuX2NyZWF0ZShcImVuZEF0XCIsIHQsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBib3VuZCBmcm9tIGEgZG9jdW1lbnQgb3IgZmllbGRzICovIGZ1bmN0aW9uIFVsKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoblswXSA9IGdldE1vZHVsYXJJbnN0YW5jZShuWzBdKSwgblswXSBpbnN0YW5jZW9mIHBsKSByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBpZiAoIXMpIHRocm93IG5ldyBVKHEuTk9UX0ZPVU5ELCBgQ2FuJ3QgdXNlIGEgRG9jdW1lbnRTbmFwc2hvdCB0aGF0IGRvZXNuJ3QgZXhpc3QgZm9yICR7bn0oKS5gKTtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICAvLyBCZWNhdXNlIHBlb3BsZSBleHBlY3QgdG8gY29udGludWUvZW5kIGEgcXVlcnkgYXQgdGhlIGV4YWN0IGRvY3VtZW50XG4gICAgICAgIC8vIHByb3ZpZGVkLCB3ZSBuZWVkIHRvIHVzZSB0aGUgaW1wbGljaXQgc29ydCBvcmRlciByYXRoZXIgdGhhbiB0aGUgZXhwbGljaXRcbiAgICAgICAgLy8gc29ydCBvcmRlciwgYmVjYXVzZSBpdCdzIGd1YXJhbnRlZWQgdG8gY29udGFpbiB0aGUgZG9jdW1lbnQga2V5LiBUaGF0IHdheVxuICAgICAgICAvLyB0aGUgcG9zaXRpb24gYmVjb21lcyB1bmFtYmlndW91cyBhbmQgdGhlIHF1ZXJ5IGNvbnRpbnVlcy9lbmRzIGV4YWN0bHkgYXRcbiAgICAgICAgLy8gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiBXaXRob3V0IHRoZSBrZXkgKGJ5IHVzaW5nIHRoZSBleHBsaWNpdCBzb3J0XG4gICAgICAgIC8vIG9yZGVycyksIG11bHRpcGxlIGRvY3VtZW50cyBjb3VsZCBtYXRjaCB0aGUgcG9zaXRpb24sIHlpZWxkaW5nIGR1cGxpY2F0ZVxuICAgICAgICAvLyByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBIbih0KSkgaWYgKG4uZmllbGQuaXNLZXlGaWVsZCgpKSByLnB1c2goV2UoZSwgcy5rZXkpKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy5kYXRhLmZpZWxkKG4uZmllbGQpO1xuICAgICAgICAgICAgaWYgKE5lKHQpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgXCInICsgbi5maWVsZCArICdcIiBpcyBhbiB1bmNvbW1pdHRlZCBzZXJ2ZXIgdGltZXN0YW1wLiAoU2luY2UgdGhlIHZhbHVlIG9mIHRoaXMgZmllbGQgaXMgdW5rbm93biwgeW91IGNhbm5vdCBzdGFydC9lbmQgYSBxdWVyeSB3aXRoIGl0LiknKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uZmllbGQuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkICcke3R9JyAodXNlZCBhcyB0aGUgb3JkZXJCeSkgZG9lcyBub3QgZXhpc3QuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBobihyLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDb252ZXJ0cyBhIGxpc3Qgb2YgZmllbGQgdmFsdWVzIHRvIGEgYEJvdW5kYCBmb3IgdGhlIGdpdmVuIHF1ZXJ5LlxuICovICh0Ll9xdWVyeSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGUsIG5bMF0uX2RvY3VtZW50LCBzKTtcbiAgICB7XG4gICAgICAgIGNvbnN0IGkgPSBaaCh0LmZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgICAgICAvLyBVc2UgZXhwbGljaXQgb3JkZXIgYnkncyBiZWNhdXNlIGl0IGhhcyB0byBtYXRjaCB0aGUgcXVlcnkgdGhlIHVzZXIgbWFkZVxuICAgICAgICAgICAgY29uc3QgbyA9IHQuZXhwbGljaXRPcmRlckJ5O1xuICAgICAgICAgICAgaWYgKGkubGVuZ3RoID4gby5sZW5ndGgpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYFRvbyBtYW55IGFyZ3VtZW50cyBwcm92aWRlZCB0byAke3N9KCkuIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBudW1iZXIgb2Ygb3JkZXJCeSgpIGNsYXVzZXNgKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgaS5sZW5ndGg7IHIrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBpW3JdO1xuICAgICAgICAgICAgICAgIGlmIChvW3JdLmZpZWxkLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgYykgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIGRvY3VtZW50IElEIGluICR7c30oKSwgYnV0IGdvdCBhICR7dHlwZW9mIGN9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghV24odCkgJiYgLTEgIT09IGMuaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGFuZCBvcmRlcmluZyBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtzfSgpIG11c3QgYmUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke2N9JyBjb250YWlucyBhIHNsYXNoLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5wYXRoLmNoaWxkKHV0LmZyb21TdHJpbmcoYykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWh0LmlzRG9jdW1lbnRLZXkobikpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBvcmRlcmluZyBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtzfSgpIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke259JyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IGh0KG4pO1xuICAgICAgICAgICAgICAgICAgICB1LnB1c2goV2UoZSwgaSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhbChuLCBzLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgdS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgaG4odSwgcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBkb2N1bWVudElkVmFsdWVgIGludG8gYSBgUmVmZXJlbmNlVmFsdWVgLCB0aHJvd2luZ1xuICogYXBwcm9wcmlhdGUgZXJyb3JzIGlmIHRoZSB2YWx1ZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGEgYERvY3VtZW50UmVmZXJlbmNlYFxuICogb3IgYHN0cmluZ2AsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxuICovICh0Ll9xdWVyeSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGksIGUsIG4sIHMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gS2wodCwgZSwgbikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiAobiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKSkpIHtcbiAgICAgICAgaWYgKFwiXCIgPT09IG4pIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgZG9jdW1lbnQgSUQsIGJ1dCBpdCB3YXMgYW4gZW1wdHkgc3RyaW5nLlwiKTtcbiAgICAgICAgaWYgKCFXbihlKSAmJiAtMSAhPT0gbi5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYnkgZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtufScgY29udGFpbnMgYSAnLycgY2hhcmFjdGVyLmApO1xuICAgICAgICBjb25zdCBzID0gZS5wYXRoLmNoaWxkKHV0LmZyb21TdHJpbmcobikpO1xuICAgICAgICBpZiAoIWh0LmlzRG9jdW1lbnRLZXkocykpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHByb3ZpZGVkIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke3N9JyBpcyBub3QgYmVjYXVzZSBpdCBoYXMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cyAoJHtzLmxlbmd0aH0pLmApO1xuICAgICAgICByZXR1cm4gV2UodCwgbmV3IGh0KHMpKTtcbiAgICB9XG4gICAgaWYgKG4gaW5zdGFuY2VvZiBmaCkgcmV0dXJuIFdlKHQsIG4uX2tleSk7XG4gICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIHN0cmluZyBvciBhIERvY3VtZW50UmVmZXJlbmNlLCBidXQgaXQgd2FzOiAke29oKG4pfS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgcGFzc2VkIGludG8gYSBkaXNqdW5jdGl2ZSBmaWx0ZXIgc2F0aXNmaWVzIGFsbFxuICogYXJyYXkgcmVxdWlyZW1lbnRzLlxuICovIGZ1bmN0aW9uIEdsKHQsIGUpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodCkgfHwgMCA9PT0gdC5sZW5ndGgpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIEEgbm9uLWVtcHR5IGFycmF5IGlzIHJlcXVpcmVkIGZvciAnJHtlLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xufVxuXG4vKipcbiAqIEdpdmVuIGFuIG9wZXJhdG9yLCByZXR1cm5zIHRoZSBzZXQgb2Ygb3BlcmF0b3JzIHRoYXQgY2Fubm90IGJlIHVzZWQgd2l0aCBpdC5cbiAqXG4gKiBUaGlzIGlzIG5vdCBhIGNvbXByZWhlbnNpdmUgY2hlY2ssIGFuZCB0aGlzIGZ1bmN0aW9uIHNob3VsZCBiZSByZW1vdmVkIGluIHRoZVxuICogbG9uZyB0ZXJtLiBWYWxpZGF0aW9ucyBzaG91bGQgb2NjdXIgaW4gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLlxuICpcbiAqIE9wZXJhdG9ycyBpbiBhIHF1ZXJ5IG11c3QgYWRoZXJlIHRvIHRoZSBmb2xsb3dpbmcgc2V0IG9mIHJ1bGVzOlxuICogMS4gT25seSBvbmUgaW5lcXVhbGl0eSBwZXIgcXVlcnkuXG4gKiAyLiBgTk9UX0lOYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFycmF5LCBkaXNqdW5jdGl2ZSwgb3IgYE5PVF9FUVVBTGAgb3BlcmF0b3JzLlxuICovIGZ1bmN0aW9uIFFsKHQsIGUpIHtcbiAgICBpZiAoZS5pc0luZXF1YWxpdHkoKSkge1xuICAgICAgICBjb25zdCBuID0gem4odCksIHMgPSBlLmZpZWxkO1xuICAgICAgICBpZiAobnVsbCAhPT0gbiAmJiAhbi5pc0VxdWFsKHMpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBBbGwgd2hlcmUgZmlsdGVycyB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgbXVzdCBiZSBvbiB0aGUgc2FtZSBmaWVsZC4gQnV0IHlvdSBoYXZlIGluZXF1YWxpdHkgZmlsdGVycyBvbiAnJHtuLnRvU3RyaW5nKCl9JyBhbmQgJyR7cy50b1N0cmluZygpfSdgKTtcbiAgICAgICAgY29uc3QgaSA9IGpuKHQpO1xuICAgICAgICBudWxsICE9PSBpICYmIGpsKHQsIHMsIGkpO1xuICAgIH1cbiAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZm9yIChjb25zdCB0IG9mIG4uZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBpZiAoZS5pbmRleE9mKHQub3ApID49IDApIHJldHVybiB0Lm9wO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9KHQuZmlsdGVycywgZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF07XG5cbiAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyBdO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH0oZS5vcCkpO1xuICAgIGlmIChudWxsICE9PSBuKSBcbiAgICAvLyBTcGVjaWFsIGNhc2Ugd2hlbiBpdCdzIGEgZHVwbGljYXRlIG9wIHRvIGdpdmUgYSBzbGlnaHRseSBjbGVhcmVyIGVycm9yIG1lc3NhZ2UuXG4gICAgdGhyb3cgbiA9PT0gZS5vcCA/IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgJyR7ZS5vcC50b1N0cmluZygpfScgZmlsdGVyLmApIDogbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgJyR7ZS5vcC50b1N0cmluZygpfScgZmlsdGVycyB3aXRoICcke24udG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG59XG5cbmZ1bmN0aW9uIGpsKHQsIGUsIG4pIHtcbiAgICBpZiAoIW4uaXNFcXVhbChlKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGhhdmUgYSB3aGVyZSBmaWx0ZXIgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG9uIGZpZWxkICcke2UudG9TdHJpbmcoKX0nIGFuZCBzbyB5b3UgbXVzdCBhbHNvIHVzZSAnJHtlLnRvU3RyaW5nKCl9JyBhcyB5b3VyIGZpcnN0IGFyZ3VtZW50IHRvIG9yZGVyQnkoKSwgYnV0IHlvdXIgZmlyc3Qgb3JkZXJCeSgpIGlzIG9uIGZpZWxkICcke24udG9TdHJpbmcoKX0nIGluc3RlYWQuYCk7XG59XG5cbmZ1bmN0aW9uIHpsKHQsIGUpIHtcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgUGwgfHwgZSBpbnN0YW5jZW9mIFZsKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIHJlcXVpcmVzIEFwcGxpYWJsZUNvbnN0cmFpbnRzIGNyZWF0ZWQgd2l0aCBhIGNhbGwgdG8gJ3doZXJlKC4uLiknLCAnb3IoLi4uKScsIG9yICdhbmQoLi4uKScuYCk7XG59XG5cbmNsYXNzIFdsIHtcbiAgICBjb252ZXJ0VmFsdWUodCwgZSA9IFwibm9uZVwiKSB7XG4gICAgICAgIHN3aXRjaCAoTGUodCkpIHtcbiAgICAgICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZTtcblxuICAgICAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIENlKHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKHQudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZTtcblxuICAgICAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRCeXRlcyh4ZSh0LmJ5dGVzVmFsdWUpKTtcblxuICAgICAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFJlZmVyZW5jZSh0LnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0R2VvUG9pbnQodC5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXkodC5hcnJheVZhbHVlLCBlKTtcblxuICAgICAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3QodC5tYXBWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgTygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRPYmplY3QodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0TWFwKHQuZmllbGRzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIGNvbnZlcnRPYmplY3RNYXAodCwgZSA9IFwibm9uZVwiKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7fTtcbiAgICAgICAgcmV0dXJuIGdlKHQsICgodCwgcykgPT4ge1xuICAgICAgICAgICAgblt0XSA9IHRoaXMuY29udmVydFZhbHVlKHMsIGUpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIGNvbnZlcnRHZW9Qb2ludCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgamgoQ2UodC5sYXRpdHVkZSksIENlKHQubG9uZ2l0dWRlKSk7XG4gICAgfVxuICAgIGNvbnZlcnRBcnJheSh0LCBlKSB7XG4gICAgICAgIHJldHVybiAodC52YWx1ZXMgfHwgW10pLm1hcCgodCA9PiB0aGlzLmNvbnZlcnRWYWx1ZSh0LCBlKSkpO1xuICAgIH1cbiAgICBjb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcInByZXZpb3VzXCI6XG4gICAgICAgICAgICBjb25zdCBuID0ga2UodCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHRoaXMuY29udmVydFZhbHVlKG4sIGUpO1xuXG4gICAgICAgICAgY2FzZSBcImVzdGltYXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKE1lKHQpKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0VGltZXN0YW1wKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IERlKHQpO1xuICAgICAgICByZXR1cm4gbmV3IGl0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG4gICAgfVxuICAgIGNvbnZlcnREb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB1dC5mcm9tU3RyaW5nKHQpO1xuICAgICAgICBGKHVyKG4pKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBPZShuLmdldCgxKSwgbi5nZXQoMykpLCBpID0gbmV3IGh0KG4ucG9wRmlyc3QoNSkpO1xuICAgICAgICByZXR1cm4gcy5pc0VxdWFsKGUpIHx8IFxuICAgICAgICAvLyBUT0RPKGIvNjQxMzAyMDIpOiBTb21laG93IHN1cHBvcnQgZm9yZWlnbiByZWZlcmVuY2VzLlxuICAgICAgICBrKGBEb2N1bWVudCAke2l9IGNvbnRhaW5zIGEgZG9jdW1lbnQgcmVmZXJlbmNlIHdpdGhpbiBhIGRpZmZlcmVudCBkYXRhYmFzZSAoJHtzLnByb2plY3RJZH0vJHtzLmRhdGFiYXNlfSkgd2hpY2ggaXMgbm90IHN1cHBvcnRlZC4gSXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgcmVmZXJlbmNlIGluIHRoZSBjdXJyZW50IGRhdGFiYXNlICgke2UucHJvamVjdElkfS8ke2UuZGF0YWJhc2V9KSBpbnN0ZWFkLmApLCBcbiAgICAgICAgaTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnZlcnRzIGN1c3RvbSBtb2RlbCBvYmplY3Qgb2YgdHlwZSBUIGludG8gYERvY3VtZW50RGF0YWAgYnkgYXBwbHlpbmcgdGhlXG4gKiBjb252ZXJ0ZXIgaWYgaXQgZXhpc3RzLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIGNvbnZlcnRpbmcgdXNlciBvYmplY3RzIHRvIGBEb2N1bWVudERhdGFgXG4gKiBiZWNhdXNlIHdlIHdhbnQgdG8gcHJvdmlkZSB0aGUgdXNlciB3aXRoIGEgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlIGlmXG4gKiB0aGVpciBgc2V0KClgIG9yIGZhaWxzIGR1ZSB0byBpbnZhbGlkIGRhdGEgb3JpZ2luYXRpbmcgZnJvbSBhIGB0b0ZpcmVzdG9yZSgpYFxuICogY2FsbC5cbiAqLyBmdW5jdGlvbiBIbCh0LCBlLCBuKSB7XG4gICAgbGV0IHM7XG4gICAgLy8gQ2FzdCB0byBgYW55YCBpbiBvcmRlciB0byBzYXRpc2Z5IHRoZSB1bmlvbiB0eXBlIGNvbnN0cmFpbnQgb25cbiAgICAvLyB0b0ZpcmVzdG9yZSgpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0dXJuIHMgPSB0ID8gbiAmJiAobi5tZXJnZSB8fCBuLm1lcmdlRmllbGRzKSA/IHQudG9GaXJlc3RvcmUoZSwgbikgOiB0LnRvRmlyZXN0b3JlKGUpIDogZSwgXG4gICAgcztcbn1cblxuY2xhc3MgSmwgZXh0ZW5kcyBXbCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVWgodCk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkodCwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IGZoKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIHN1bSBvZlxuICogYSBzcGVjaWZpZWQgZmllbGQgb3ZlciBhIHJhbmdlIG9mIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiBhIHF1ZXJ5LlxuICogQHBhcmFtIGZpZWxkIFNwZWNpZmllcyB0aGUgZmllbGQgdG8gc3VtIGFjcm9zcyB0aGUgcmVzdWx0IHNldC5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBZbCh0KSB7XG4gICAgcmV0dXJuIG5ldyBMaChcInN1bVwiLCB3bChcInN1bVwiLCB0KSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGF2ZXJhZ2Ugb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIGF2ZXJhZ2UgYWNyb3NzIHRoZSByZXN1bHQgc2V0LlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIFhsKHQpIHtcbiAgICByZXR1cm4gbmV3IExoKFwiYXZnXCIsIHdsKFwiYXZlcmFnZVwiLCB0KSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGNvdW50IG9mXG4gKiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBabCgpIHtcbiAgICByZXR1cm4gbmV3IExoKFwiY291bnRcIik7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvICdBZ2dyZWdhdGVGaWVsZGAgaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cbiAqXG4gKiBAcGFyYW0gbGVmdCBDb21wYXJlIHRoaXMgQWdncmVnYXRlRmllbGQgdG8gdGhlIGByaWdodGAuXG4gKiBAcGFyYW0gcmlnaHQgQ29tcGFyZSB0aGlzIEFnZ3JlZ2F0ZUZpZWxkIHRvIHRoZSBgbGVmdGAuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gdGYodCwgZSkge1xuICAgIHZhciBuLCBzO1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgTGggJiYgZSBpbnN0YW5jZW9mIExoICYmIHQuX2FnZ3JlZ2F0ZVR5cGUgPT09IGUuX2FnZ3JlZ2F0ZVR5cGUgJiYgKG51bGwgPT09IChuID0gdC5faW50ZXJuYWxGaWVsZFBhdGgpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY2Fub25pY2FsU3RyaW5nKCkpID09PSAobnVsbCA9PT0gKHMgPSBlLl9pbnRlcm5hbEZpZWxkUGF0aCkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYW5vbmljYWxTdHJpbmcoKSk7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCBpbnN0YW5jZXMgZm9yIGVxdWFsaXR5LlxuICpcbiAqIFR3byBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIFwiZXF1YWxcIiBpZiB0aGV5IGhhdmVcbiAqIHVuZGVybHlpbmcgcXVlcmllcyB0aGF0IGNvbXBhcmUgZXF1YWwsIGFuZCB0aGUgc2FtZSBkYXRhLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gVGhlIGZpcnN0IGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gVGhlIHNlY29uZCBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gY29tcGFyZS5cbiAqXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIFwiZXF1YWxcIiwgYXMgZGVmaW5lZCBhYm92ZSwgb3IgYGZhbHNlYFxuICogb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIGVmKHQsIGUpIHtcbiAgICByZXR1cm4gcGgodC5xdWVyeSwgZS5xdWVyeSkgJiYgZGVlcEVxdWFsKHQuZGF0YSgpLCBlLmRhdGEoKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE1ldGFkYXRhIGFib3V0IGEgc25hcHNob3QsIGRlc2NyaWJpbmcgdGhlIHN0YXRlIG9mIHRoZSBzbmFwc2hvdC5cbiAqLyBjbGFzcyBuZiB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9IHQsIHRoaXMuZnJvbUNhY2hlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFNuYXBzaG90TWV0YWRhdGFgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNQZW5kaW5nV3JpdGVzID09PSB0Lmhhc1BlbmRpbmdXcml0ZXMgJiYgdGhpcy5mcm9tQ2FjaGUgPT09IHQuZnJvbUNhY2hlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIHNmIGV4dGVuZHMgcGwge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiwgcywgciksIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX2ZpcmVzdG9yZUltcGwgPSB0LCB0aGlzLm1ldGFkYXRhID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YSBleGlzdHMuIFRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZXhpc3RzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyByZih0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCB0aGlzLm1ldGFkYXRhLCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSwgdC5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYSBgc2VydmVyVGltZXN0YW1wKClgIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzZXQgdG9cbiAgICAgKiBpdHMgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBieVxuICAgICAqIHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyB0aGUgZmllbGQgaXMgcmV0cmlldmVkXG4gICAgICogZnJvbSB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wc1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0LCBlID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChUbChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIHQpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKG4sIGUuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyByZiBleHRlbmRzIHNmIHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEodCA9IHt9KSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeVNuYXBzaG90YCBjb250YWlucyB6ZXJvIG9yIG1vcmUgYERvY3VtZW50U25hcHNob3RgIG9iamVjdHNcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnRzIGNhbiBiZSBhY2Nlc3NlZCBhcyBhblxuICogYXJyYXkgdmlhIHRoZSBgZG9jc2AgcHJvcGVydHkgb3IgZW51bWVyYXRlZCB1c2luZyB0aGUgYGZvckVhY2hgIG1ldGhvZC4gVGhlXG4gKiBudW1iZXIgb2YgZG9jdW1lbnRzIGNhbiBiZSBkZXRlcm1pbmVkIHZpYSB0aGUgYGVtcHR5YCBhbmQgYHNpemVgXG4gKiBwcm9wZXJ0aWVzLlxuICovIGNsYXNzIG9mIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9zbmFwc2hvdCA9IHMsIHRoaXMubWV0YWRhdGEgPSBuZXcgbmYocy5oYXNQZW5kaW5nV3JpdGVzLCBzLmZyb21DYWNoZSksIFxuICAgICAgICB0aGlzLnF1ZXJ5ID0gbjtcbiAgICB9XG4gICAgLyoqIEFuIGFycmF5IG9mIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBkb2NzKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUpKSksIHQ7XG4gICAgfVxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3Muc2l6ZTtcbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlcmUgYXJlIG5vIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIG9mIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdpdGggYSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBmb3JcbiAgICAgKiBlYWNoIGRvY3VtZW50IGluIHRoZSBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gdGhpc0FyZyAtIFRoZSBgdGhpc2AgYmluZGluZyBmb3IgdGhlIGNhbGxiYWNrLlxuICAgICAqLyAgICBmb3JFYWNoKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fc25hcHNob3QuZG9jcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIHQuY2FsbChlLCBuZXcgcmYodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgbi5rZXksIG4sIG5ldyBuZih0aGlzLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5rZXkpLCB0aGlzLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0aGlzLnF1ZXJ5LmNvbnZlcnRlcikpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGRvY3VtZW50cyBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHNuYXBzaG90LiBJZiB0aGlzXG4gICAgICogaXMgdGhlIGZpcnN0IHNuYXBzaG90LCBhbGwgZG9jdW1lbnRzIHdpbGwgYmUgaW4gdGhlIGxpc3QgYXMgJ2FkZGVkJ1xuICAgICAqIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGBTbmFwc2hvdExpc3Rlbk9wdGlvbnNgIHRoYXQgY29udHJvbCB3aGV0aGVyIG1ldGFkYXRhLW9ubHlcbiAgICAgKiBjaGFuZ2VzIChpLmUuIG9ubHkgYERvY3VtZW50U25hcHNob3QubWV0YWRhdGFgIGNoYW5nZWQpIHNob3VsZCB0cmlnZ2VyXG4gICAgICogc25hcHNob3QgZXZlbnRzLlxuICAgICAqLyAgICBkb2NDaGFuZ2VzKHQgPSB7fSkge1xuICAgICAgICBjb25zdCBlID0gISF0LmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIGlmIChlICYmIHRoaXMuX3NuYXBzaG90LmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVG8gaW5jbHVkZSBtZXRhZGF0YSBjaGFuZ2VzIHdpdGggeW91ciBkb2N1bWVudCBjaGFuZ2VzLCB5b3UgbXVzdCBhbHNvIHBhc3MgeyBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOnRydWUgfSB0byBvblNuYXBzaG90KCkuXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkQ2hhbmdlcyAmJiB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9PT0gZSB8fCAodGhpcy5fY2FjaGVkQ2hhbmdlcyA9IFxuICAgICAgICAvKiogQ2FsY3VsYXRlcyB0aGUgYXJyYXkgb2YgYERvY3VtZW50Q2hhbmdlYHMgZm9yIGEgZ2l2ZW4gYFZpZXdTbmFwc2hvdGAuICovXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmICh0Ll9zbmFwc2hvdC5vbGREb2NzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5tYXAoKG4gPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IHJmKHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIG4uZG9jLmtleSwgbi5kb2MsIG5ldyBuZih0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kb2MsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiBlKytcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQSBgRG9jdW1lbnRTZXRgIHRoYXQgaXMgdXBkYXRlZCBpbmNyZW1lbnRhbGx5IGFzIGNoYW5nZXMgYXJlIGFwcGxpZWQgdG8gdXNlXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9va3VwIHRoZSBpbmRleCBvZiBhIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGxldCBuID0gdC5fc25hcHNob3Qub2xkRG9jcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5maWx0ZXIoKHQgPT4gZSB8fCAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gIT09IHQudHlwZSkpLm1hcCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgcmYodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgZS5kb2Mua2V5LCBlLmRvYywgbmV3IG5mKHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhlLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlcik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gLTEsIHIgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAhPT0gZS50eXBlICYmIChpID0gbi5pbmRleE9mKGUuZG9jLmtleSksIG4gPSBuLmRlbGV0ZShlLmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICE9PSBlLnR5cGUgJiYgKG4gPSBuLmFkZChlLmRvYyksIHIgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSksIFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB1ZihlLnR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogclxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0aGlzLCBlKSwgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSBlKSwgdGhpcy5fY2FjaGVkQ2hhbmdlcztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVmKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgcmV0dXJuIFwiYWRkZWRcIjtcblxuICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgY2FzZSAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gOlxuICAgICAgICByZXR1cm4gXCJtb2RpZmllZFwiO1xuXG4gICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgcmV0dXJuIFwicmVtb3ZlZFwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTygpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVleHApOiBBZGQgdGVzdHMgZm9yIHNuYXBzaG90RXF1YWwgd2l0aCBkaWZmZXJlbnQgc25hcHNob3Rcbi8vIG1ldGFkYXRhXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKi8gZnVuY3Rpb24gY2YodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2Ygc2YgJiYgZSBpbnN0YW5jZW9mIHNmID8gdC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgdC5fa2V5LmlzRXF1YWwoZS5fa2V5KSAmJiAobnVsbCA9PT0gdC5fZG9jdW1lbnQgPyBudWxsID09PSBlLl9kb2N1bWVudCA6IHQuX2RvY3VtZW50LmlzRXF1YWwoZS5fZG9jdW1lbnQpKSAmJiB0Ll9jb252ZXJ0ZXIgPT09IGUuX2NvbnZlcnRlciA6IHQgaW5zdGFuY2VvZiBvZiAmJiBlIGluc3RhbmNlb2Ygb2YgJiYgKHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIHBoKHQucXVlcnksIGUucXVlcnkpICYmIHQubWV0YWRhdGEuaXNFcXVhbChlLm1ldGFkYXRhKSAmJiB0Ll9zbmFwc2hvdC5pc0VxdWFsKGUuX3NuYXBzaG90KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogTm90ZTogYGdldERvYygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZiB5b3UgYXJlXG4gKiBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsIGludm9rZVxuICoge0BsaW5rIGdldERvY0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0byBmZXRjaC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGFmKHQpIHtcbiAgICB0ID0gdWgodCwgZmgpO1xuICAgIGNvbnN0IGUgPSB1aCh0LmZpcmVzdG9yZSwgdmgpO1xuICAgIHJldHVybiB6YShiaChlKSwgdC5fa2V5KS50aGVuKChuID0+IEFmKGUsIHQsIG4pKSk7XG59XG5cbmNsYXNzIGhmIGV4dGVuZHMgV2wge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IFVoKHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBmaCh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBsZih0KSB7XG4gICAgdCA9IHVoKHQsIGZoKTtcbiAgICBjb25zdCBlID0gdWgodC5maXJlc3RvcmUsIHZoKSwgbiA9IGJoKGUpLCBzID0gbmV3IGhmKGUpO1xuICAgIHJldHVybiBqYShuLCB0Ll9rZXkpLnRoZW4oKG4gPT4gbmV3IHNmKGUsIHMsIHQuX2tleSwgbiwgbmV3IG5mKG51bGwgIT09IG4gJiYgbi5oYXNMb2NhbE11dGF0aW9ucywgXG4gICAgLyogZnJvbUNhY2hlPSAqLyAhMCksIHQuY29udmVydGVyKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSB0aGUgc2VydmVyLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZmYodCkge1xuICAgIHQgPSB1aCh0LCBmaCk7XG4gICAgY29uc3QgZSA9IHVoKHQuZmlyZXN0b3JlLCB2aCk7XG4gICAgcmV0dXJuIHphKGJoKGUpLCB0Ll9rZXksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBBZihlLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jcygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5XG4gKiB3YWl0aW5nIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZlxuICogeW91IGFyZSBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsXG4gKiBpbnZva2Uge0BsaW5rIGdldERvY3NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NzRnJvbVNlcnZlcn0uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGRmKHQpIHtcbiAgICB0ID0gdWgodCwgZGgpO1xuICAgIGNvbnN0IGUgPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCBuID0gYmgoZSksIHMgPSBuZXcgaGYoZSk7XG4gICAgcmV0dXJuIEVsKHQuX3F1ZXJ5KSwgSGEobiwgdC5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IG9mKGUsIHMsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVtcHR5IHJlc3VsdCBzZXQgaWYgbm8gZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBxdWVyeSBhcmUgY3VycmVudGx5XG4gKiBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIHdmKHQpIHtcbiAgICB0ID0gdWgodCwgZGgpO1xuICAgIGNvbnN0IGUgPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCBuID0gYmgoZSksIHMgPSBuZXcgaGYoZSk7XG4gICAgcmV0dXJuIFdhKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBvZihlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIHRoZVxuICogc2VydmVyLiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIF9mKHQpIHtcbiAgICB0ID0gdWgodCwgZGgpO1xuICAgIGNvbnN0IGUgPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCBuID0gYmgoZSksIHMgPSBuZXcgaGYoZSk7XG4gICAgcmV0dXJuIEhhKG4sIHQuX3F1ZXJ5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gbmV3IG9mKGUsIHMsIHQsIG4pKSk7XG59XG5cbmZ1bmN0aW9uIG1mKHQsIGUsIG4pIHtcbiAgICB0ID0gdWgodCwgZmgpO1xuICAgIGNvbnN0IHMgPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCBpID0gSGwodC5jb252ZXJ0ZXIsIGUsIG4pO1xuICAgIHJldHVybiBFZihzLCBbIHRsKFpoKHMpLCBcInNldERvY1wiLCB0Ll9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCBuKS50b011dGF0aW9uKHQuX2tleSwgRnMubm9uZSgpKSBdKTtcbn1cblxuZnVuY3Rpb24gZ2YodCwgZSwgbiwgLi4ucykge1xuICAgIHQgPSB1aCh0LCBmaCk7XG4gICAgY29uc3QgaSA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIHIgPSBaaChpKTtcbiAgICBsZXQgbztcbiAgICBvID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKFxuICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBLaCA/IGNsKHIsIFwidXBkYXRlRG9jXCIsIHQuX2tleSwgZSwgbiwgcykgOiB1bChyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUpO1xuICAgIHJldHVybiBFZihpLCBbIG8udG9NdXRhdGlvbih0Ll9rZXksIEZzLmV4aXN0cyghMCkpIF0pO1xufVxuXG4vKipcbiAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBzcGVjaWZpZWQgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGRlbGV0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIGRlbGV0ZWQgZnJvbSB0aGUgYmFja2VuZCAobm90ZSB0aGF0IGl0IHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIHlmKHQpIHtcbiAgICByZXR1cm4gRWYodWgodC5maXJlc3RvcmUsIHZoKSwgWyBuZXcgWXModC5fa2V5LCBGcy5ub25lKCkpIF0pO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBkb2N1bWVudCB0byBzcGVjaWZpZWQgYENvbGxlY3Rpb25SZWZlcmVuY2VgIHdpdGggdGhlIGdpdmVuIGRhdGEsXG4gKiBhc3NpZ25pbmcgaXQgYSBkb2N1bWVudCBJRCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvbiB0byBhZGQgdGhpcyBkb2N1bWVudCB0by5cbiAqIEBwYXJhbSBkYXRhIC0gQW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRhdGEgZm9yIHRoZSBuZXcgZG9jdW1lbnQuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50UmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGVcbiAqIG5ld2x5IGNyZWF0ZWQgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgYmFja2VuZCAoTm90ZSB0aGF0IGl0XG4gKiB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBwZih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIHMgPSBnaCh0KSwgaSA9IEhsKHQuY29udmVydGVyLCBlKTtcbiAgICByZXR1cm4gRWYobiwgWyB0bChaaCh0LmZpcmVzdG9yZSksIFwiYWRkRG9jXCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gdC5jb252ZXJ0ZXIsIHt9KS50b011dGF0aW9uKHMuX2tleSwgRnMuZXhpc3RzKCExKSkgXSkudGhlbigoKCkgPT4gcykpO1xufVxuXG5mdW5jdGlvbiBJZih0LCAuLi5lKSB7XG4gICAgdmFyIG4sIHMsIGk7XG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KTtcbiAgICBsZXQgciA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITFcbiAgICB9LCBvID0gMDtcbiAgICBcIm9iamVjdFwiICE9IHR5cGVvZiBlW29dIHx8IFRoKGVbb10pIHx8IChyID0gZVtvXSwgbysrKTtcbiAgICBjb25zdCB1ID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiByLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXNcbiAgICB9O1xuICAgIGlmIChUaChlW29dKSkge1xuICAgICAgICBjb25zdCB0ID0gZVtvXTtcbiAgICAgICAgZVtvXSA9IG51bGwgPT09IChuID0gdC5uZXh0KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmJpbmQodCksIGVbbyArIDFdID0gbnVsbCA9PT0gKHMgPSB0LmVycm9yKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmJpbmQodCksIFxuICAgICAgICBlW28gKyAyXSA9IG51bGwgPT09IChpID0gdC5jb21wbGV0ZSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaW5kKHQpO1xuICAgIH1cbiAgICBsZXQgYywgYSwgaDtcbiAgICBpZiAodCBpbnN0YW5jZW9mIGZoKSBhID0gdWgodC5maXJlc3RvcmUsIHZoKSwgaCA9IEduKHQuX2tleS5wYXRoKSwgYyA9IHtcbiAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICBlW29dICYmIGVbb10oQWYoYSwgdCwgbikpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgIH07IGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gdWgodCwgZGgpO1xuICAgICAgICBhID0gdWgobi5maXJlc3RvcmUsIHZoKSwgaCA9IG4uX3F1ZXJ5O1xuICAgICAgICBjb25zdCBzID0gbmV3IGhmKGEpO1xuICAgICAgICBjID0ge1xuICAgICAgICAgICAgbmV4dDogdCA9PiB7XG4gICAgICAgICAgICAgICAgZVtvXSAmJiBlW29dKG5ldyBvZihhLCBzLCBuLCB0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgICAgIH0sIEVsKHQuX3F1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBWYShzKSwgciA9IG5ldyBOYyhlLCBpLCBuKTtcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBWYyhhd2FpdCBLYSh0KSwgcikpKSwgKCkgPT4ge1xuICAgICAgICAgICAgaS5EYygpLCB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gU2MoYXdhaXQgS2EodCksIHIpKSk7XG4gICAgICAgIH07XG4gICAgfShiaChhKSwgaCwgdSwgYyk7XG59XG5cbmZ1bmN0aW9uIFRmKHQsIGUpIHtcbiAgICByZXR1cm4gSmEoYmgodCA9IHVoKHQsIHZoKSksIFRoKGUpID8gZSA6IHtcbiAgICAgICAgbmV4dDogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIExvY2FsbHkgd3JpdGVzIGBtdXRhdGlvbnNgIG9uIHRoZSBhc3luYyBxdWV1ZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIEVmKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IEs7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gemMoYXdhaXQgcWEodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbiAgICB9KGJoKHQpLCBlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHtAbGluayBWaWV3U25hcHNob3R9IHRoYXQgY29udGFpbnMgdGhlIHNpbmdsZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHJlZmBcbiAqIHRvIGEge0BsaW5rIERvY3VtZW50U25hcHNob3R9LlxuICovIGZ1bmN0aW9uIEFmKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbi5kb2NzLmdldChlLl9rZXkpLCBpID0gbmV3IGhmKHQpO1xuICAgIHJldHVybiBuZXcgc2YodCwgaSwgZS5fa2V5LCBzLCBuZXcgbmYobi5oYXNQZW5kaW5nV3JpdGVzLCBuLmZyb21DYWNoZSksIGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiB0aGUgZ2l2ZW4gcXVlcnksXG4gKiB3aXRob3V0IGFjdHVhbGx5IGRvd25sb2FkaW5nIHRoZSBkb2N1bWVudHMuXG4gKlxuICogVXNpbmcgdGhpcyBmdW5jdGlvbiB0byBjb3VudCB0aGUgZG9jdW1lbnRzIGlzIGVmZmljaWVudCBiZWNhdXNlIG9ubHkgdGhlXG4gKiBmaW5hbCBjb3VudCwgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGlzIGRvd25sb2FkZWQuIFRoaXMgZnVuY3Rpb24gY2FuIGV2ZW5cbiAqIGNvdW50IHRoZSBkb2N1bWVudHMgaWYgdGhlIHJlc3VsdCBzZXQgd291bGQgYmUgcHJvaGliaXRpdmVseSBsYXJnZSB0b1xuICogZG93bmxvYWQgZW50aXJlbHkgKGUuZy4gdGhvdXNhbmRzIG9mIGRvY3VtZW50cykuXG4gKlxuICogVGhlIHJlc3VsdCByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgaXMgcHJlc2VudGVkLCB1bmFsdGVyZWQsIHdpdGhvdXRcbiAqIGNvbnNpZGVyaW5nIGFueSBsb2NhbCBzdGF0ZS4gVGhhdCBpcywgZG9jdW1lbnRzIGluIHRoZSBsb2NhbCBjYWNoZSBhcmUgbm90XG4gKiB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24sIG5laXRoZXIgYXJlIGxvY2FsIG1vZGlmaWNhdGlvbnMgbm90IHlldFxuICogc3luY2hyb25pemVkIHdpdGggdGhlIHNlcnZlci4gUHJldmlvdXNseS1kb3dubG9hZGVkIHJlc3VsdHMsIGlmIGFueSwgYXJlIG5vdFxuICogdXNlZDogZXZlcnkgcmVxdWVzdCB1c2luZyB0aGlzIHNvdXJjZSBuZWNlc3NhcmlseSBpbnZvbHZlcyBhIHJvdW5kIHRyaXAgdG9cbiAqIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHdob3NlIHJlc3VsdCBzZXQgc2l6ZSB0byBjYWxjdWxhdGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIGNvdW50OyB0aGUgY291bnQgY2FuIGJlXG4gKiByZXRyaWV2ZWQgZnJvbSBgc25hcHNob3QuZGF0YSgpLmNvdW50YCwgd2hlcmUgYHNuYXBzaG90YCBpcyB0aGVcbiAqIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byB3aGljaCB0aGUgcmV0dXJuZWQgUHJvbWlzZSByZXNvbHZlcy5cbiAqLyBmdW5jdGlvbiB2Zih0KSB7XG4gICAgcmV0dXJuIFJmKHQsIHtcbiAgICAgICAgY291bnQ6IFpsKClcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcGVjaWZpZWQgYWdncmVnYXRpb25zIG92ZXIgdGhlIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0XG4gKiBzZXQgb2YgdGhlIGdpdmVuIHF1ZXJ5LCB3aXRob3V0IGFjdHVhbGx5IGRvd25sb2FkaW5nIHRoZSBkb2N1bWVudHMuXG4gKlxuICogVXNpbmcgdGhpcyBmdW5jdGlvbiB0byBwZXJmb3JtIGFnZ3JlZ2F0aW9ucyBpcyBlZmZpY2llbnQgYmVjYXVzZSBvbmx5IHRoZVxuICogZmluYWwgYWdncmVnYXRpb24gdmFsdWVzLCBub3QgdGhlIGRvY3VtZW50cycgZGF0YSwgaXMgZG93bmxvYWRlZC4gVGhpc1xuICogZnVuY3Rpb24gY2FuIGV2ZW4gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgb2YgdGhlIGRvY3VtZW50cyBpZiB0aGUgcmVzdWx0IHNldFxuICogd291bGQgYmUgcHJvaGliaXRpdmVseSBsYXJnZSB0byBkb3dubG9hZCBlbnRpcmVseSAoZS5nLiB0aG91c2FuZHMgb2YgZG9jdW1lbnRzKS5cbiAqXG4gKiBUaGUgcmVzdWx0IHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlciBpcyBwcmVzZW50ZWQsIHVuYWx0ZXJlZCwgd2l0aG91dFxuICogY29uc2lkZXJpbmcgYW55IGxvY2FsIHN0YXRlLiBUaGF0IGlzLCBkb2N1bWVudHMgaW4gdGhlIGxvY2FsIGNhY2hlIGFyZSBub3RcbiAqIHRha2VuIGludG8gY29uc2lkZXJhdGlvbiwgbmVpdGhlciBhcmUgbG9jYWwgbW9kaWZpY2F0aW9ucyBub3QgeWV0XG4gKiBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc2VydmVyLiBQcmV2aW91c2x5LWRvd25sb2FkZWQgcmVzdWx0cywgaWYgYW55LCBhcmUgbm90XG4gKiB1c2VkOiBldmVyeSByZXF1ZXN0IHVzaW5nIHRoaXMgc291cmNlIG5lY2Vzc2FyaWx5IGludm9sdmVzIGEgcm91bmQgdHJpcCB0b1xuICogdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHdob3NlIHJlc3VsdCBzZXQgdG8gYWdncmVnYXRlIG92ZXIuXG4gKiBAcGFyYW0gYWdncmVnYXRlU3BlYyBBbiBgQWdncmVnYXRlU3BlY2Agb2JqZWN0IHRoYXQgc3BlY2lmaWVzIHRoZSBhZ2dyZWdhdGVzXG4gKiB0byBwZXJmb3JtIG92ZXIgdGhlIHJlc3VsdCBzZXQuIFRoZSBBZ2dyZWdhdGVTcGVjIHNwZWNpZmllcyBhbGlhc2VzIGZvciBlYWNoXG4gKiBhZ2dyZWdhdGUsIHdoaWNoIGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBhZ2dyZWdhdGUgcmVzdWx0LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFnZ3JlZ2F0ZVNuYXBzaG90ID0gYXdhaXQgZ2V0QWdncmVnYXRlRnJvbVNlcnZlcihxdWVyeSwge1xuICogICBjb3VudE9mRG9jczogY291bnQoKSxcbiAqICAgdG90YWxIb3Vyczogc3VtKCdob3VycycpLFxuICogICBhdmVyYWdlU2NvcmU6IGF2ZXJhZ2UoJ3Njb3JlJylcbiAqIH0pO1xuICpcbiAqIGNvbnN0IGNvdW50T2ZEb2NzOiBudW1iZXIgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkuY291bnRPZkRvY3M7XG4gKiBjb25zdCB0b3RhbEhvdXJzOiBudW1iZXIgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkudG90YWxIb3VycztcbiAqIGNvbnN0IGF2ZXJhZ2VTY29yZTogbnVtYmVyIHwgbnVsbCA9IGFnZ3JlZ2F0ZVNuYXBzaG90LmRhdGEoKS5hdmVyYWdlU2NvcmU7XG4gKiBgYGBcbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiBSZih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIHMgPSBiaChuKSwgaSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIHMpICYmIG4ucHVzaChlKHRbc10sIHMsIHQpKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfShlLCAoKHQsIGUpID0+IG5ldyBuaShlLCB0Ll9hZ2dyZWdhdGVUeXBlLCB0Ll9pbnRlcm5hbEZpZWxkUGF0aCkpKTtcbiAgICAvLyBSdW4gdGhlIGFnZ3JlZ2F0aW9uIGFuZCBjb252ZXJ0IHRoZSByZXN1bHRzXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8gKHN1bS9hdmcpIHNob3VsZCB3ZSB1cGRhdGUgdGhpcyB0byB1c2UgdGhlIGV2ZW50IG1hbmFnZXI/XG4gICAgICAgICAgICAvLyBJbXBsZW1lbnQgYW5kIGNhbGwgZXhlY3V0ZUFnZ3JlZ2F0ZVF1ZXJ5VmlhU25hcHNob3RMaXN0ZW5lciwgc2ltaWxhclxuICAgICAgICAgICAgLy8gdG8gdGhlIGltcGxlbWVudGF0aW9uIGluIGZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXJcbiAgICAgICAgICAgIC8vIGFib3ZlXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8yNzc2MjgzODQpOiBjaGVjayBgY2FuVXNlTmV0d29yaygpYCBhbmQgaGFuZGxlIG11bHRpLXRhYi5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgVWEodCk7XG4gICAgICAgICAgICAgICAgcy5yZXNvbHZlKEd1KGksIGUsIG4pKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBzLnJlamVjdCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBzLnByb21pc2U7XG4gICAgfShzLCB0Ll9xdWVyeSwgaSkudGhlbigoZSA9PiBcbiAgICAvKipcbiAqIENvbnZlcnRzIHRoZSBjb3JlIGFnZ3JlZ3JhdGlvbiByZXN1bHQgdG8gYW4gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgXG4gKiB0aGF0IGNhbiBiZSByZXR1cm5lZCB0byB0aGUgY29uc3VtZXIuXG4gKiBAcGFyYW0gcXVlcnlcbiAqIEBwYXJhbSBhZ2dyZWdhdGVSZXN1bHQgQ29yZSBhZ2dyZWdhdGlvbiByZXN1bHRcbiAqIEBpbnRlcm5hbFxuICovXG4gICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IGhmKHQpO1xuICAgICAgICByZXR1cm4gbmV3IHFoKGUsIHMsIG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAobiwgdCwgZSkpKTtcbn1cblxuY2xhc3MgUGYge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlcIiwgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgUGEsIChudWxsID09IHQgPyB2b2lkIDAgOiB0LmdhcmJhZ2VDb2xsZWN0b3IpID8gdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gdC5nYXJiYWdlQ29sbGVjdG9yLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgOiB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgRWE7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgYmYge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIHRoaXMua2luZCA9IFwicGVyc2lzdGVudFwiLCAobnVsbCA9PSB0ID8gdm9pZCAwIDogdC50YWJNYW5hZ2VyKSA/ICh0LnRhYk1hbmFnZXIuX2luaXRpYWxpemUodCksIFxuICAgICAgICBlID0gdC50YWJNYW5hZ2VyKSA6IChlID0gJGYodm9pZCAwKSwgZS5faW5pdGlhbGl6ZSh0KSksIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gZS5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIFxuICAgICAgICB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBlLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgVmYge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeUVhZ2VyXCIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBFYTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBTZiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeUxydVwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgQWEodCk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBNZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3JgLiBUaGlzIGlzIGFsc28gdGhlXG4gKiBkZWZhdWx0IGdhcmJhZ2UgY29sbGVjdG9yIHVubGVzcyBpdCBpcyBleHBsaWNpdGx5IHNwZWNpZmllZCBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gRGYoKSB7XG4gICAgcmV0dXJuIG5ldyBWZjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBNZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9yYC5cbiAqXG4gKiBBIHRhcmdldCBzaXplIGNhbiBiZSBzcGVjaWZpZWQgYXMgcGFydCBvZiB0aGUgc2V0dGluZyBwYXJhbWV0ZXIuIFRoZVxuICogY29sbGVjdG9yIHdpbGwgc3RhcnQgZGVsZXRpbmcgZG9jdW1lbnRzIG9uY2UgdGhlIGNhY2hlIHNpemUgZXhjZWVkc1xuICogdGhlIGdpdmVuIHNpemUuIFRoZSBkZWZhdWx0IGNhY2hlIHNpemUgaXMgNDBNQiAoNDAgKiAxMDI0ICogMTAyNCBieXRlcykuXG4gKi8gZnVuY3Rpb24gQ2YodCkge1xuICAgIHJldHVybiBuZXcgU2YobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5jYWNoZVNpemVCeXRlcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5TG9jYWxDYWNoZWAuIFRoZSBpbnN0YW5jZSBjYW4gYmUgc2V0IHRvXG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIHRlbGwgdGhlIFNESyB3aGljaCBjYWNoZSBsYXllciB0byB1c2UuXG4gKi8gZnVuY3Rpb24geGYodCkge1xuICAgIHJldHVybiBuZXcgUGYodCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudExvY2FsQ2FjaGVgLiBUaGUgaW5zdGFuY2UgY2FuIGJlIHNldCB0b1xuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byB0ZWxsIHRoZSBTREsgd2hpY2ggY2FjaGUgbGF5ZXIgdG8gdXNlLlxuICpcbiAqIFBlcnNpc3RlbnQgY2FjaGUgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICovIGZ1bmN0aW9uIE5mKHQpIHtcbiAgICByZXR1cm4gbmV3IGJmKHQpO1xufVxuXG5jbGFzcyBrZiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmZvcmNlT3duZXJzaGlwID0gdCwgdGhpcy5raW5kID0gXCJwZXJzaXN0ZW50U2luZ2xlVGFiXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgX2luaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBQYSwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IHZhKHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCBudWxsID09IHQgPyB2b2lkIDAgOiB0LmNhY2hlU2l6ZUJ5dGVzLCB0aGlzLmZvcmNlT3duZXJzaGlwKTtcbiAgICB9XG59XG5cbmNsYXNzIE1mIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJQZXJzaXN0ZW50TXVsdGlwbGVUYWJcIjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBfaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IFBhLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgUmEodGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuY2FjaGVTaXplQnl0ZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlcmAuXG4gKlxuICogQHBhcmFtIHNldHRpbmdzIENvbmZpZ3VyZXMgdGhlIGNyZWF0ZWQgdGFiIG1hbmFnZXIuXG4gKi8gZnVuY3Rpb24gJGYodCkge1xuICAgIHJldHVybiBuZXcga2YobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5mb3JjZU93bmVyc2hpcCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudE11bHRpcGxlVGFiTWFuYWdlcmAuXG4gKi8gZnVuY3Rpb24gT2YoKSB7XG4gICAgcmV0dXJuIG5ldyBNZjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgRmYgPSB7XG4gICAgbWF4QXR0ZW1wdHM6IDVcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqL1xuY2xhc3MgQmYge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9jb21taXRIYW5kbGVyID0gZSwgdGhpcy5fbXV0YXRpb25zID0gW10sIHRoaXMuX2NvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgdGhpcy5fZGF0YVJlYWRlciA9IFpoKHQpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgcyA9IExmKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBIbChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSB0bCh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2guc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKHMuX2tleSwgRnMubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gTGYodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgS2ggPyBjbCh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgZSwgbiwgcykgOiB1bCh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24oaS5fa2V5LCBGcy5leGlzdHMoITApKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgV3JpdGVCYXRjaGAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGUgPSBMZih0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChuZXcgWXMoZS5fa2V5LCBGcy5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tbWl0cyBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGlzIHdyaXRlIGJhdGNoIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdCBvZiB0aGVzZSB3cml0ZXMgd2lsbCBvbmx5IGJlIHJlZmxlY3RlZCBpbiBkb2N1bWVudCByZWFkcyB0aGF0XG4gICAgICogb2NjdXIgYWZ0ZXIgdGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMuIElmIHRoZSBjbGllbnQgaXMgb2ZmbGluZSwgdGhlXG4gICAgICogd3JpdGUgZmFpbHMuIElmIHlvdSB3b3VsZCBsaWtlIHRvIHNlZSBsb2NhbCBtb2RpZmljYXRpb25zIG9yIGJ1ZmZlciB3cml0ZXNcbiAgICAgKiB1bnRpbCB0aGUgY2xpZW50IGlzIG9ubGluZSwgdXNlIHRoZSBmdWxsIEZpcmVzdG9yZSBTREsuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCBvbmNlIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoZSBiYXRjaCBoYXZlIGJlZW5cbiAgICAgKiBzdWNjZXNzZnVsbHkgd3JpdHRlbiB0byB0aGUgYmFja2VuZCBhcyBhbiBhdG9taWMgdW5pdCAobm90ZSB0aGF0IGl0IHdvbid0XG4gICAgICogcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gICAgICovICAgIGNvbW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpLCB0aGlzLl9jb21taXR0ZWQgPSAhMCwgdGhpcy5fbXV0YXRpb25zLmxlbmd0aCA+IDAgPyB0aGlzLl9jb21taXRIYW5kbGVyKHRoaXMuX211dGF0aW9ucykgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgX3ZlcmlmeU5vdENvbW1pdHRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbW1pdHRlZCkgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBMZih0LCBlKSB7XG4gICAgaWYgKCh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKS5maXJlc3RvcmUgIT09IGUpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJQcm92aWRlZCBkb2N1bWVudCByZWZlcmVuY2UgaXMgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgaW5zdGFuY2UuXCIpO1xuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVE9ETyhtcnNjaG1pZHQpIENvbnNpZGVyIHVzaW5nIGBCYXNlVHJhbnNhY3Rpb25gIGFzIHRoZSBiYXNlIGNsYXNzIGluIHRoZVxuLy8gbGVnYWN5IFNESy5cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbmNsYXNzIHFmIGV4dGVuZHMgY2xhc3Mge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl90cmFuc2FjdGlvbiA9IGUsIHRoaXMuX2RhdGFSZWFkZXIgPSBaaCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBMZih0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IEpsKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5sb29rdXAoWyBlLl9rZXkgXSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAoIXQgfHwgMSAhPT0gdC5sZW5ndGgpIHJldHVybiBPKCk7XG4gICAgICAgICAgICBjb25zdCBzID0gdFswXTtcbiAgICAgICAgICAgIGlmIChzLmlzRm91bmREb2N1bWVudCgpKSByZXR1cm4gbmV3IHBsKHRoaXMuX2ZpcmVzdG9yZSwgbiwgcy5rZXksIHMsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChzLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IHBsKHRoaXMuX2ZpcmVzdG9yZSwgbiwgZS5fa2V5LCBudWxsLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICB0aHJvdyBPKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IExmKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBIbChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSB0bCh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLnNldChzLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICBjb25zdCBpID0gTGYodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgS2ggPyBjbCh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogdWwodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gTGYodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZShlLl9rZXkpLCB0aGlzO1xuICAgIH1cbn0ge1xuICAgIC8vIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgVHJhbnNhY3Rpb24gQVBJIGluIHRoZSBMaXRlIFNES1xuICAgIC8vIGJ1dCBpcyBzdWJjbGFzc2VkIGluIG9yZGVyIHRvIHJldHVybiBpdHMgb3duIERvY3VtZW50U25hcHNob3QgdHlwZXMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLl9maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IExmKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgaGYodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldCh0KS50aGVuKCh0ID0+IG5ldyBzZih0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgdC5fZG9jdW1lbnQsIG5ldyBuZihcbiAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gITEsIFxuICAgICAgICAvKiBmcm9tQ2FjaGU9ICovICExKSwgZS5jb252ZXJ0ZXIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBnaXZlbiBgdXBkYXRlRnVuY3Rpb25gIGFuZCB0aGVuIGF0dGVtcHRzIHRvIGNvbW1pdCB0aGUgY2hhbmdlc1xuICogYXBwbGllZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uLiBJZiBhbnkgZG9jdW1lbnQgcmVhZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBoYXMgY2hhbmdlZCwgQ2xvdWQgRmlyZXN0b3JlIHJldHJpZXMgdGhlIGB1cGRhdGVGdW5jdGlvbmAuIElmIGl0IGZhaWxzIHRvXG4gKiBjb21taXQgYWZ0ZXIgNSBhdHRlbXB0cywgdGhlIHRyYW5zYWN0aW9uIGZhaWxzLlxuICpcbiAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBpcyA1MDAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBGaXJlc3RvcmUgZGF0YWJhc2UgdG8gcnVuIHRoaXNcbiAqIHRyYW5zYWN0aW9uIGFnYWluc3QuXG4gKiBAcGFyYW0gdXBkYXRlRnVuY3Rpb24gLSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBjb250ZXh0LlxuICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgbWF4aW11bSBudW1iZXIgb2YgYXR0ZW1wdHMgdG9cbiAqIGNvbW1pdC5cbiAqIEByZXR1cm5zIElmIHRoZSB0cmFuc2FjdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IG9yIHdhcyBleHBsaWNpdGx5IGFib3J0ZWRcbiAqICh0aGUgYHVwZGF0ZUZ1bmN0aW9uYCByZXR1cm5lZCBhIGZhaWxlZCBwcm9taXNlKSwgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlXG4gKiBgdXBkYXRlRnVuY3Rpb24gYGlzIHJldHVybmVkIGhlcmUuIE90aGVyd2lzZSwgaWYgdGhlIHRyYW5zYWN0aW9uIGZhaWxlZCwgYVxuICogcmVqZWN0ZWQgcHJvbWlzZSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGZhaWx1cmUgZXJyb3IgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gVWYodCwgZSwgbikge1xuICAgIHQgPSB1aCh0LCB2aCk7XG4gICAgY29uc3QgcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgRmYpLCBuKTtcbiAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAodC5tYXhBdHRlbXB0cyA8IDEpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJNYXggYXR0ZW1wdHMgbXVzdCBiZSBhdCBsZWFzdCAxXCIpO1xuICAgIH0ocyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBhd2FpdCBVYSh0KTtcbiAgICAgICAgICAgIG5ldyBDYSh0LmFzeW5jUXVldWUsIGksIG4sIGUsIHMpLnJ1bigpO1xuICAgICAgICB9KSksIHMucHJvbWlzZTtcbiAgICB9KGJoKHQpLCAobiA9PiBlKG5ldyBxZih0LCBuKSkpLCBzKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIGZvciB1c2Ugd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IG9yXG4gKiB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IHdpdGggYHttZXJnZTogdHJ1ZX1gIHRvIG1hcmsgYSBmaWVsZCBmb3IgZGVsZXRpb24uXG4gKi8gZnVuY3Rpb24gS2YoKSB7XG4gICAgcmV0dXJuIG5ldyBlbChcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiBHZigpIHtcbiAgICByZXR1cm4gbmV3IHNsKFwic2VydmVyVGltZXN0YW1wXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXlcbiAqIHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gRWFjaCBzcGVjaWZpZWQgZWxlbWVudCB0aGF0IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QgaW4gdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC4gSWYgdGhlIGZpZWxkIGJlaW5nXG4gKiBtb2RpZmllZCBpcyBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXlcbiAqIGNvbnRhaW5pbmcgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byB1bmlvbiBpbnRvIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYC5cbiAqLyBmdW5jdGlvbiBRZiguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IGlsKFwiYXJyYXlVbmlvblwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gamYoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBybChcImFycmF5UmVtb3ZlXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gemYodCkge1xuICAgIHJldHVybiBuZXcgb2woXCJpbmNyZW1lbnRcIiwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB3cml0ZSBiYXRjaCwgdXNlZCBmb3IgcGVyZm9ybWluZyBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGVcbiAqIGF0b21pYyBvcGVyYXRpb24uIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB7QGxpbmsgV3JpdGVCYXRjaH1cbiAqIGlzIDUwMC5cbiAqXG4gKiBVbmxpa2UgdHJhbnNhY3Rpb25zLCB3cml0ZSBiYXRjaGVzIGFyZSBwZXJzaXN0ZWQgb2ZmbGluZSBhbmQgdGhlcmVmb3JlIGFyZVxuICogcHJlZmVyYWJsZSB3aGVuIHlvdSBkb24ndCBuZWVkIHRvIGNvbmRpdGlvbiB5b3VyIHdyaXRlcyBvbiByZWFkIGRhdGEuXG4gKlxuICogQHJldHVybnMgQSB7QGxpbmsgV3JpdGVCYXRjaH0gdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGV4ZWN1dGUgbXVsdGlwbGVcbiAqIHdyaXRlcy5cbiAqLyBmdW5jdGlvbiBXZih0KSB7XG4gICAgcmV0dXJuIGJoKHQgPSB1aCh0LCB2aCkpLCBuZXcgQmYodCwgKGUgPT4gRWYodCwgZSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gSGYodCwgZSkge1xuICAgIHZhciBuO1xuICAgIGNvbnN0IHMgPSBiaCh0ID0gdWgodCwgdmgpKTtcbiAgICBpZiAoIXMuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgfHwgXCJtZW1vcnlcIiA9PT0gKG51bGwgPT09IChuID0gcy5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5fb2ZmbGluZUtpbmQpKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IHJldHVybiBhbiBlcnJvciBpZiB0aGUgdXNlciBoYXMgbm90IGVuYWJsZWRcbiAgICAvLyBwZXJzaXN0ZW5jZSBzaW5jZSBgZW5hYmxlSW5kZXhlZGRiUGVyc2lzdGVuY2UoKWAgY2FuIGZhaWwgb24gdGhlIFdlYi5cbiAgICByZXR1cm4gTShcIkNhbm5vdCBlbmFibGUgaW5kZXhlcyB3aGVuIHBlcnNpc3RlbmNlIGlzIGRpc2FibGVkXCIpLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkZhaWxlZCB0byBwYXJzZSBKU09OOiBcIiArIChudWxsID09IHQgPyB2b2lkIDAgOiB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0KSA6IHQsIG4gPSBbXTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZS5pbmRleGVzKSkgZm9yIChjb25zdCB0IG9mIGUuaW5kZXhlcykge1xuICAgICAgICAgICAgY29uc3QgZSA9IEpmKHQsIFwiY29sbGVjdGlvbkdyb3VwXCIpLCBzID0gW107XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0LmZpZWxkcykpIGZvciAoY29uc3QgZSBvZiB0LmZpZWxkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBtbChcInNldEluZGV4Q29uZmlndXJhdGlvblwiLCBKZihlLCBcImZpZWxkUGF0aFwiKSk7XG4gICAgICAgICAgICAgICAgXCJDT05UQUlOU1wiID09PSBlLmFycmF5Q29uZmlnID8gcy5wdXNoKG5ldyBfdCh0LCAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLykpIDogXCJBU0NFTkRJTkdcIiA9PT0gZS5vcmRlciA/IHMucHVzaChuZXcgX3QodCwgMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSkgOiBcIkRFU0NFTkRJTkdcIiA9PT0gZS5vcmRlciAmJiBzLnB1c2gobmV3IF90KHQsIDEgLyogSW5kZXhLaW5kLkRFU0NFTkRJTkcgKi8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG4ucHVzaChuZXcgbHQobHQuVU5LTk9XTl9JRCwgZSwgcywgZ3QuZW1wdHkoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH0oZSk7XG4gICAgcmV0dXJuIFphKHMsIGkpO1xufVxuXG5mdW5jdGlvbiBKZih0LCBlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIHRbZV0pIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJNaXNzaW5nIHN0cmluZyB2YWx1ZSBmb3I6IFwiICsgZSk7XG4gICAgcmV0dXJuIHRbZV07XG59XG5cbi8qKlxuICogQ2xvdWQgRmlyZXN0b3JlXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi8gIWZ1bmN0aW9uKHQsIGUgPSAhMCkge1xuICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgIFMgPSB0O1xuICAgIH0oU0RLX1ZFUlNJT04pLCBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImZpcmVzdG9yZVwiLCAoKHQsIHtpbnN0YW5jZUlkZW50aWZpZXI6IG4sIG9wdGlvbnM6IHN9KSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLCByID0gbmV3IHZoKG5ldyB6KHQuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIpKSwgbmV3IFkodC5nZXRQcm92aWRlcihcImFwcC1jaGVjay1pbnRlcm5hbFwiKSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5hcHBseSh0Lm9wdGlvbnMsIFsgXCJwcm9qZWN0SWRcIiBdKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCAnXCJwcm9qZWN0SWRcIiBub3QgcHJvdmlkZWQgaW4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcC4nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgT2UodC5vcHRpb25zLnByb2plY3RJZCwgZSk7XG4gICAgICAgIH0oaSwgbiksIGkpO1xuICAgICAgICByZXR1cm4gcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdXNlRmV0Y2hTdHJlYW1zOiBlXG4gICAgICAgIH0sIHMpLCByLl9zZXRTZXR0aW5ncyhzKSwgcjtcbiAgICB9KSwgXCJQVUJMSUNcIikuc2V0TXVsdGlwbGVJbnN0YW5jZXMoITApKSwgcmVnaXN0ZXJWZXJzaW9uKGIsIFwiMy4xMi4yXCIsIHQpLCBcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxuICAgIHJlZ2lzdGVyVmVyc2lvbihiLCBcIjMuMTIuMlwiLCBcImVzbTIwMTdcIik7XG59KCk7XG5cbmV4cG9ydCB7IFdsIGFzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIsIExoIGFzIEFnZ3JlZ2F0ZUZpZWxkLCBxaCBhcyBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90LCBVaCBhcyBCeXRlcywgQWggYXMgQ0FDSEVfU0laRV9VTkxJTUlURUQsIHdoIGFzIENvbGxlY3Rpb25SZWZlcmVuY2UsIGZoIGFzIERvY3VtZW50UmVmZXJlbmNlLCBzZiBhcyBEb2N1bWVudFNuYXBzaG90LCBLaCBhcyBGaWVsZFBhdGgsIFFoIGFzIEZpZWxkVmFsdWUsIHZoIGFzIEZpcmVzdG9yZSwgVSBhcyBGaXJlc3RvcmVFcnJvciwgamggYXMgR2VvUG9pbnQsIEVoIGFzIExvYWRCdW5kbGVUYXNrLCBkaCBhcyBRdWVyeSwgVmwgYXMgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50LCB2bCBhcyBRdWVyeUNvbnN0cmFpbnQsIHJmIGFzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgQmwgYXMgUXVlcnlFbmRBdENvbnN0cmFpbnQsIFBsIGFzIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50LCBObCBhcyBRdWVyeUxpbWl0Q29uc3RyYWludCwgQ2wgYXMgUXVlcnlPcmRlckJ5Q29uc3RyYWludCwgb2YgYXMgUXVlcnlTbmFwc2hvdCwgJGwgYXMgUXVlcnlTdGFydEF0Q29uc3RyYWludCwgbmYgYXMgU25hcHNob3RNZXRhZGF0YSwgaXQgYXMgVGltZXN0YW1wLCBxZiBhcyBUcmFuc2FjdGlvbiwgQmYgYXMgV3JpdGVCYXRjaCwgT2UgYXMgX0RhdGFiYXNlSWQsIGh0IGFzIF9Eb2N1bWVudEtleSwgWCBhcyBfRW1wdHlBcHBDaGVja1Rva2VuUHJvdmlkZXIsIFEgYXMgX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIsIGF0IGFzIF9GaWVsZFBhdGgsIGNpIGFzIF9UZXN0aW5nSG9va3MsIHVoIGFzIF9jYXN0LCBCIGFzIF9kZWJ1Z0Fzc2VydCwgYmUgYXMgX2lzQmFzZTY0QXZhaWxhYmxlLCBNIGFzIF9sb2dXYXJuLCBzaCBhcyBfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciwgcGYgYXMgYWRkRG9jLCB0ZiBhcyBhZ2dyZWdhdGVGaWVsZEVxdWFsLCBlZiBhcyBhZ2dyZWdhdGVRdWVyeVNuYXBzaG90RXF1YWwsIERsIGFzIGFuZCwgamYgYXMgYXJyYXlSZW1vdmUsIFFmIGFzIGFycmF5VW5pb24sIFhsIGFzIGF2ZXJhZ2UsIHhoIGFzIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UsIF9oIGFzIGNvbGxlY3Rpb24sIG1oIGFzIGNvbGxlY3Rpb25Hcm91cCwgbGggYXMgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yLCBabCBhcyBjb3VudCwgeWYgYXMgZGVsZXRlRG9jLCBLZiBhcyBkZWxldGVGaWVsZCwgTWggYXMgZGlzYWJsZU5ldHdvcmssIGdoIGFzIGRvYywgR2ggYXMgZG9jdW1lbnRJZCwgU2ggYXMgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UsIERoIGFzIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UsIGtoIGFzIGVuYWJsZU5ldHdvcmssIHFsIGFzIGVuZEF0LCBMbCBhcyBlbmRCZWZvcmUsIGJoIGFzIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQsIEVmIGFzIGV4ZWN1dGVXcml0ZSwgUmYgYXMgZ2V0QWdncmVnYXRlRnJvbVNlcnZlciwgdmYgYXMgZ2V0Q291bnRGcm9tU2VydmVyLCBhZiBhcyBnZXREb2MsIGxmIGFzIGdldERvY0Zyb21DYWNoZSwgZmYgYXMgZ2V0RG9jRnJvbVNlcnZlciwgZGYgYXMgZ2V0RG9jcywgd2YgYXMgZ2V0RG9jc0Zyb21DYWNoZSwgX2YgYXMgZ2V0RG9jc0Zyb21TZXJ2ZXIsIFBoIGFzIGdldEZpcmVzdG9yZSwgemYgYXMgaW5jcmVtZW50LCBSaCBhcyBpbml0aWFsaXplRmlyZXN0b3JlLCBrbCBhcyBsaW1pdCwgTWwgYXMgbGltaXRUb0xhc3QsIE9oIGFzIGxvYWRCdW5kbGUsIERmIGFzIG1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvciwgeGYgYXMgbWVtb3J5TG9jYWxDYWNoZSwgQ2YgYXMgbWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvciwgRmggYXMgbmFtZWRRdWVyeSwgSWYgYXMgb25TbmFwc2hvdCwgVGYgYXMgb25TbmFwc2hvdHNJblN5bmMsIFNsIGFzIG9yLCB4bCBhcyBvcmRlckJ5LCBOZiBhcyBwZXJzaXN0ZW50TG9jYWxDYWNoZSwgT2YgYXMgcGVyc2lzdGVudE11bHRpcGxlVGFiTWFuYWdlciwgJGYgYXMgcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIsIFJsIGFzIHF1ZXJ5LCBwaCBhcyBxdWVyeUVxdWFsLCB5aCBhcyByZWZFcXVhbCwgVWYgYXMgcnVuVHJhbnNhY3Rpb24sIEdmIGFzIHNlcnZlclRpbWVzdGFtcCwgbWYgYXMgc2V0RG9jLCBIZiBhcyBzZXRJbmRleENvbmZpZ3VyYXRpb24sIHggYXMgc2V0TG9nTGV2ZWwsIGNmIGFzIHNuYXBzaG90RXF1YWwsIEZsIGFzIHN0YXJ0QWZ0ZXIsIE9sIGFzIHN0YXJ0QXQsIFlsIGFzIHN1bSwgJGggYXMgdGVybWluYXRlLCBnZiBhcyB1cGRhdGVEb2MsIE5oIGFzIHdhaXRGb3JQZW5kaW5nV3JpdGVzLCBibCBhcyB3aGVyZSwgV2YgYXMgd3JpdGVCYXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjkuMjIuMlwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG5cbmltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XG5pbXBvcnQgeyBnZXRGaXJlc3RvcmUsIGNvbGxlY3Rpb24gfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICBhcGlLZXk6IHByb2Nlc3MuZW52LkFQSV9LRVksXG4gIGF1dGhEb21haW46IFwid2hlcmUtaXMtd2FsZG8tNGViOGYuZmlyZWJhc2VhcHAuY29tXCIsXG4gIHByb2plY3RJZDogXCJ3aGVyZS1pcy13YWxkby00ZWI4ZlwiLFxuICBzdG9yYWdlQnVja2V0OiBcIndoZXJlLWlzLXdhbGRvLTRlYjhmLmFwcHNwb3QuY29tXCIsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjcyMTE0Nzc4MjU0NVwiLFxuICBhcHBJZDogXCIxOjcyMTE0Nzc4MjU0NTp3ZWI6MzVkOTc2ZGNkNzg3N2M4Yjc0MjYzMFwiLFxufTtcblxuY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG5cbmNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7XG5cbmV4cG9ydCB7IGFwcCwgZGIsIGNvbGxlY3Rpb24gfTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXNoYWRvdyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbmltcG9ydCB7IGNvbGxlY3Rpb24sIGRvYywgZ2V0RG9jcywgc2V0RG9jIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuaW1wb3J0IHsgYXBwLCBkYiB9IGZyb20gXCIuL2ZpcmViYXNlXCI7XG5cbmNvbnNvbGUubG9nKFwiYXBwLWxvZ2ljLmpzIHNheXM6IHRoaXMgc2VlbSB0byBiZSB3b3JraW5nXCIpO1xuXG5leHBvcnQgY29uc3QgTG9jYXRpb25NYW5hZ2VyID0gKCgpID0+IHtcbiAgY29uc3QgYmFja2dyb3VuZEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZEltZ1wiKTtcblxuICBjb25zdCBjaGFyYWN0ZXJzID0ge1xuICAgIGJvd3NlcjogeyBsZWZ0OiAxNDMwLCB0b3A6IDMxMzAsIHJpZ2h0OiAxNzMwLCBib3R0b206IDM0MjQgfSxcbiAgICBuZW86IHsgbGVmdDogNjkwLCB0b3A6IDQ3MDAsIHJpZ2h0OiA5MDAsIGJvdHRvbTogNDkwMCB9LFxuICAgIHdhbGRvOiB7IGxlZnQ6IDE0NTAsIHRvcDogNjU1MCwgcmlnaHQ6IDE2NTAsIGJvdHRvbTogNjc1MCB9LFxuICB9O1xuXG4gIGNvbnN0IGdldENvb3JkaW5hdGVzID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgcmVjdCA9IGJhY2tncm91bmRJbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgY29uc3QgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcbiAgICAvLyBjb25zb2xlLmxvZyhgWDogJHt4fSwgWTogJHt5fWApO1xuXG4gICAgY29uc3QgcmVmZXJlbmNlV2lkdGggPSAxOTIwO1xuICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgY29uc3Qgc2NhbGluZ0ZhY3RvciA9IHNjcmVlbldpZHRoIC8gcmVmZXJlbmNlV2lkdGg7XG5cbiAgICBjb25zdCBzY2FsZWRYID0geCAvIHNjYWxpbmdGYWN0b3I7XG4gICAgY29uc3Qgc2NhbGVkWSA9IHkgLyBzY2FsaW5nRmFjdG9yO1xuXG4gICAgLy8gY29uc29sZS5sb2coYFNjYWxlZCBYOiAke3NjYWxlZFh9LCBTY2FsZWQgWTogJHtzY2FsZWRZfWApO1xuXG4gICAgcmV0dXJuIHsgeCwgeSwgc2NhbGVkWCwgc2NhbGVkWSB9O1xuICB9O1xuXG4gIGNvbnN0IGlzV2l0aGluQXJlYSA9IChjb29yZGluYXRlcywgYXJlYSkgPT4ge1xuICAgIGNvbnN0IHsgc2NhbGVkWCwgc2NhbGVkWSB9ID0gY29vcmRpbmF0ZXM7XG4gICAgY29uc3QgeyBsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20gfSA9IGFyZWE7XG5cbiAgICByZXR1cm4gKFxuICAgICAgc2NhbGVkWCA+PSBsZWZ0ICYmIHNjYWxlZFggPD0gcmlnaHQgJiYgc2NhbGVkWSA+PSB0b3AgJiYgc2NhbGVkWSA8PSBib3R0b21cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IGNhcHR1cmVDaGFyYWN0ZXJBcmVhID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSBnZXRDb29yZGluYXRlcyhldmVudCk7XG4gICAgLy8gY29uc29sZS5sb2coYFg6ICR7Y29vcmRpbmF0ZXMueH0sIFk6ICR7Y29vcmRpbmF0ZXMueX1gKTtcblxuICAgIGxldCBjaGFyYWN0ZXJGb3VuZCA9IGZhbHNlO1xuXG4gICAgT2JqZWN0LmtleXMoY2hhcmFjdGVycykuZm9yRWFjaCgoY2hhcmFjdGVyKSA9PiB7XG4gICAgICBpZiAoaXNXaXRoaW5BcmVhKGNvb3JkaW5hdGVzLCBjaGFyYWN0ZXJzW2NoYXJhY3Rlcl0pKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke2NoYXJhY3Rlcn1gKTtcbiAgICAgICAgY2hhcmFjdGVyRm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFjaGFyYWN0ZXJGb3VuZCkge1xuICAgICAgY29uc29sZS5sb2coXCJObyBjaGFyYWN0ZXIgZm91bmRcIik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY2hhcmFjdGVycyxcbiAgICBnZXRDb29yZGluYXRlcyxcbiAgICBjYXB0dXJlQ2hhcmFjdGVyQXJlYSxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBGaXJlc3RvcmVNYW5hZ2VyID0gKCgpID0+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gIGNvbnN0IGNoYXJhY3RlcnMgPSBMb2NhdGlvbk1hbmFnZXIuY2hhcmFjdGVycztcblxuICBjb25zdCBzdG9yZUNoYXJhY3RlckxvY2F0aW9ucyA9ICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgT2JqZWN0LmVudHJpZXMoY2hhcmFjdGVycykuZm9yRWFjaChcbiAgICAgICAgKFtjaGFyYWN0ZXIsIHsgbGVmdCwgdG9wLCByaWdodCwgYm90dG9tIH1dKSA9PiB7XG4gICAgICAgICAgc2V0RG9jKGRvYyhkYiwgXCJjaGFyYWN0ZXJMb2NhdGlvbnNcIiwgY2hhcmFjdGVyKSwge1xuICAgICAgICAgICAgbGVmdCxcbiAgICAgICAgICAgIHRvcCxcbiAgICAgICAgICAgIHJpZ2h0LFxuICAgICAgICAgICAgYm90dG9tLFxuICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke2NoYXJhY3Rlcn0gbG9jYXRpb24gc3RvcmVkIHN1Y2Nlc3NmdWxseS5gKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHN0b3JpbmcgJHtjaGFyYWN0ZXJ9IGxvY2F0aW9uOmAsIGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc3RvcmluZyBjaGFyYWN0ZXIgbG9jYXRpb25zOlwiLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldENoYXJhY3RlckxvY2F0aW9ucyA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsIFwiY2hhcmFjdGVyTG9jYXRpb25zXCIpKTtcblxuICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IGRvYy5pZDtcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20gfSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2NoYXJhY3Rlcn06ICgke2xlZnR9LCAke3RvcH0sICR7cmlnaHR9LCAke2JvdHRvbX0pYCk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgY2hhcmFjdGVyIGxvY2F0aW9uczpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB2ZXJpZnlDbGlja2VkUG9zaXRpb24gPSBhc3luYyAoeCwgeSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgXCJjaGFyYWN0ZXJMb2NhdGlvbnNcIikpO1xuICAgICAgbGV0IGZvdW5kQ2hhcmFjdGVyID0gbnVsbDtcblxuICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IGRvYy5pZDtcbiAgICAgICAgY29uc3QgeyBsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20gfSA9IGRvYy5kYXRhKCk7XG5cbiAgICAgICAgaWYgKHggPj0gbGVmdCAmJiB4IDw9IHJpZ2h0ICYmIHkgPj0gdG9wICYmIHkgPD0gYm90dG9tKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYENsaWNrZWQgd2l0aGluICR7Y2hhcmFjdGVyfSdzIGFyZWEuYCk7XG4gICAgICAgICAgZm91bmRDaGFyYWN0ZXIgPSBjaGFyYWN0ZXI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZm91bmRDaGFyYWN0ZXI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB2ZXJpZnlpbmcgY2xpY2tlZCBwb3NpdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHN0b3JlVXNlclRpbWUgPSBhc3luYyAodXNlcm5hbWUsIHRpbWUpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgXCJ1c2VyVGltZXNcIiwgdXNlcm5hbWUpLCB7IHRpbWUgfSk7XG4gICAgICBjb25zb2xlLmxvZyhgVXNlciB0aW1lIHN0b3JlZCBzdWNjZXNzZnVsbHkgZm9yICR7dXNlcm5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHN0b3JpbmcgdXNlciB0aW1lIGZvciAke3VzZXJuYW1lfTpgLCBlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBjb25zdCBnZXRBbGxVc2VyVGltZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCBcInVzZXJUaW1lc1wiKSk7XG5cbiAgICAgIGNvbnN0IHVzZXJUaW1lcyA9IFtdO1xuICAgICAgc25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gZG9jLmlkO1xuICAgICAgICBjb25zdCB7IHRpbWUgfSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIHVzZXJUaW1lcy5wdXNoKHsgdXNlcm5hbWUsIHRpbWUgfSk7XG4gICAgICB9KTtcblxuICAgICAgdXNlclRpbWVzLnNvcnQoKGEsIGIpID0+IGEudGltZS5sb2NhbGVDb21wYXJlKGIudGltZSkpO1xuXG4gICAgICB1c2VyVGltZXMuZm9yRWFjaCgodXNlclRpbWUpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFVzZXJuYW1lOiAke3VzZXJUaW1lLnVzZXJuYW1lfSwgVGltZTogJHt1c2VyVGltZS50aW1lfWApO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB1c2VyVGltZXM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXRyaWV2aW5nIHVzZXIgdGltZXM6XCIsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzdG9yZUNoYXJhY3RlckxvY2F0aW9ucyxcbiAgICBnZXRDaGFyYWN0ZXJMb2NhdGlvbnMsXG4gICAgdmVyaWZ5Q2xpY2tlZFBvc2l0aW9uLFxuICAgIHN0b3JlVXNlclRpbWUsXG4gICAgZ2V0QWxsVXNlclRpbWVzLFxuICB9O1xufSkoKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWN5Y2xlXG5pbXBvcnQgeyBDb250cm9sbGVyLCBSZW5kZXJlciB9IGZyb20gXCIuL2ludGVyZmFjZVwiO1xuaW1wb3J0IHsgRmlyZXN0b3JlTWFuYWdlciB9IGZyb20gXCIuL2FwcC1sb2dpY1wiO1xuXG5jb25zb2xlLmxvZyhcInV0aWxzLmpzIHNheXM6IHRoaXMgc2VlbSB0byBiZSB3b3JraW5nXCIpO1xuXG5leHBvcnQgY29uc3QgSW50ZXJmYWNlSGVscGVycyA9ICgoKSA9PiB7XG4gIGNvbnN0IHRpbWVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZXJcIik7XG5cbiAgbGV0IHRpbWVySW50ZXJ2YWw7XG5cbiAgY29uc3QgZm9ybWF0VGltZSA9IChzZWNvbmRzKSA9PiB7XG4gICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICAgIGNvbnN0IGZvcm1hdHRlZEhvdXJzID0gU3RyaW5nKGhvdXJzKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkTWludXRlcyA9IFN0cmluZyhtaW51dGVzKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkU2Vjb25kcyA9IFN0cmluZyhzZWNvbmRzICUgNjApLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICByZXR1cm4gYCR7Zm9ybWF0dGVkSG91cnN9OiR7Zm9ybWF0dGVkTWludXRlc306JHtmb3JtYXR0ZWRTZWNvbmRzfWA7XG4gIH07XG5cbiAgY29uc3Qgc3RhcnRUaW1lciA9ICgpID0+IHtcbiAgICBsZXQgc2Vjb25kcyA9IDA7XG5cbiAgICBjb25zdCB1cGRhdGVUaW1lciA9ICgpID0+IHtcbiAgICAgIHNlY29uZHMgKz0gMTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBmb3JtYXRUaW1lKHNlY29uZHMpO1xuICAgICAgdGltZXJFbGVtZW50LnRleHRDb250ZW50ID0gZm9ybWF0dGVkVGltZTtcbiAgICB9O1xuXG4gICAgdGltZXJJbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZVRpbWVyLCAxMDAwKTtcbiAgfTtcblxuICBjb25zdCBzdG9wVGltZXIgPSAoKSA9PiB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aW1lckludGVydmFsKTtcbiAgfTtcblxuICBjb25zdCByZXNldFRpbWVyID0gKCkgPT4ge1xuICAgIHN0b3BUaW1lcigpO1xuICAgIHRpbWVyRWxlbWVudC50ZXh0Q29udGVudCA9IFwiMDA6MDA6MDBcIjtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVDb3VudCA9ICgpID0+IHtcbiAgICBjb25zdCBjb3VudEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdW50XCIpO1xuICAgIGNvbnN0IGZvdW5kQ291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmdyYXllZC1vdXRcIikubGVuZ3RoO1xuICAgIGNvdW50RWxlbWVudC50ZXh0Q29udGVudCA9IGAke2ZvdW5kQ291bnR9LzNgO1xuICB9O1xuXG4gIGNvbnN0IHJlc2V0Q291bnQgPSAoKSA9PiB7XG4gICAgY29uc3QgY291bnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3VudFwiKTtcbiAgICBjb3VudEVsZW1lbnQudGV4dENvbnRlbnQgPSBcIjAvM1wiO1xuICB9O1xuXG4gIGNvbnN0IGdyYXlPdXRDaGFyYWN0ZXJJY29uID0gKGNoYXJhY3RlcklkKSA9PiB7XG4gICAgY29uc3QgY2hhcmFjdGVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNoYXJhY3RlcklkKTtcbiAgICBpZiAoY2hhcmFjdGVyRWxlbWVudCkge1xuICAgICAgY2hhcmFjdGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ3JheWVkLW91dFwiKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2xlYXJDaGFyYWN0ZXJJY29ucyA9ICgpID0+IHtcbiAgICBjb25zdCBjaGFyYWN0ZXJJZHMgPSBbXCJib3dzZXJcIiwgXCJuZW9cIiwgXCJ3YWxkb1wiXTtcbiAgICBjaGFyYWN0ZXJJZHMuZm9yRWFjaCgoY2hhcmFjdGVySWQpID0+IHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjaGFyYWN0ZXJJZCk7XG4gICAgICBpZiAoY2hhcmFjdGVyRWxlbWVudCkge1xuICAgICAgICBjaGFyYWN0ZXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJncmF5ZWQtb3V0XCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHNob3dNb2RhbCA9IChtb2RhbCkgPT4ge1xuICAgIGNvbnN0IG92ZXJsYXkgPSBtb2RhbC5jbG9zZXN0KFwiLm92ZXJsYXlcIik7XG4gICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICB9O1xuXG4gIGNvbnN0IGhpZGVNb2RhbCA9IChtb2RhbCkgPT4ge1xuICAgIGNvbnN0IG92ZXJsYXkgPSBtb2RhbC5jbG9zZXN0KFwiLm92ZXJsYXlcIik7XG4gICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9O1xuXG4gIGNvbnN0IHNldFBvc2l0aW9uID0gKGVsZW1lbnQsIHgsIHkpID0+IHtcbiAgICBjb25zdCBwb3NpdGlvbmVkID0gZWxlbWVudDtcbiAgICBwb3NpdGlvbmVkLnN0eWxlLmxlZnQgPSBgJHt4fXB4YDtcbiAgICBwb3NpdGlvbmVkLnN0eWxlLnRvcCA9IGAke3l9cHhgO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZURpdiA9IChjbGFzc05hbWUsIHRleHQpID0+IHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRpdi5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgaWYgKHRleHQpIHtcbiAgICAgIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuICAgIHJldHVybiBkaXY7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlQnV0dG9uID0gKHRleHQsIGNoYXJhY3RlcikgPT4ge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICBidXR0b24udHlwZSA9IFwiYnV0dG9uXCI7XG4gICAgYnV0dG9uLmRhdGFzZXQuY2hhcmFjdGVyID0gY2hhcmFjdGVyO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgQ29udHJvbGxlci5oYW5kbGVCdXR0b25DbGljayk7XG4gICAgcmV0dXJuIGJ1dHRvbjtcbiAgfTtcblxuICBjb25zdCByZW1vdmVFbGVtZW50ID0gKGVsZW1lbnQpID0+IHtcbiAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdldExlYWRlcmJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVuZGdhbWUgaW5wdXRcIik7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXRVc2VybmFtZVwiKTtcblxuICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAodXNlcm5hbWUpIHtcbiAgICAgICAgRmlyZXN0b3JlTWFuYWdlci5zdG9yZVVzZXJUaW1lKHVzZXJuYW1lLCB0aW1lckVsZW1lbnQudGV4dENvbnRlbnQpO1xuICAgICAgICBjb25zdCB1c2VyVGltZXMgPSBhd2FpdCBGaXJlc3RvcmVNYW5hZ2VyLmdldEFsbFVzZXJUaW1lcygpO1xuICAgICAgICBSZW5kZXJlci5jcmVhdGVUYWJsZSh1c2VyVGltZXMpO1xuICAgICAgICBJbnRlcmZhY2VIZWxwZXJzLnNob3dNb2RhbChcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmxlYWRlcmJvYXJkXCIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlU3VibWl0KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0VGltZXIsXG4gICAgc3RvcFRpbWVyLFxuICAgIHJlc2V0VGltZXIsXG4gICAgcmVzZXRDb3VudCxcbiAgICB1cGRhdGVDb3VudCxcbiAgICBncmF5T3V0Q2hhcmFjdGVySWNvbixcbiAgICBjbGVhckNoYXJhY3Rlckljb25zLFxuICAgIHNob3dNb2RhbCxcbiAgICBoaWRlTW9kYWwsXG4gICAgc2V0UG9zaXRpb24sXG4gICAgY3JlYXRlRGl2LFxuICAgIGNyZWF0ZUJ1dHRvbixcbiAgICByZW1vdmVFbGVtZW50LFxuICAgIGdldExlYWRlcmJvYXJkLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IExvZ2ljSGVscGVycyA9ICgoKSA9PiB7XG4gIC8vIC4uLlxufSkoKTtcbiIsIi8vIDMuIEZpbmFsIHN0eWxpbmc6IEZvbnRzIC0tPiBIZWFkZXIgKGJ1dHRvbiArIGFuaW1hdGlvbikgLS0+XG4vLyA0LiBNYXliZTogSW1wcm92ZSBjb2RlIGlmIHBvc3NpYmxlIC0tPiBBZGQgc2xpZGVzaG93IGFuZCBhbm90aGVyIG1hcFxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWN5Y2xlXG5pbXBvcnQgeyBJbnRlcmZhY2VIZWxwZXJzIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IEZpcmVzdG9yZU1hbmFnZXIsIExvY2F0aW9uTWFuYWdlciB9IGZyb20gXCIuL2FwcC1sb2dpY1wiO1xuXG5jb25zb2xlLmxvZyhcImludGVyZmFjZS5qcyBzYXlzOiB0aGlzIHNlZW0gdG8gYmUgd29ya2luZ1wiKTtcblxuZXhwb3J0IGNvbnN0IFJlbmRlcmVyID0gKCgpID0+IHtcbiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcblxuICBjb25zdCBjaXJjbGVzID0gW107XG4gIGNvbnN0IHBvcHVwcyA9IFtdO1xuXG4gIGNvbnN0IGNyZWF0ZUZlZWRiYWNrTXNnID0gKG1lc3NhZ2UsIHgsIHksIGNvbG9yID0gXCJyZWRcIikgPT4ge1xuICAgIGNvbnN0IGZlZWRiYWNrTXNnID0gSW50ZXJmYWNlSGVscGVycy5jcmVhdGVEaXYoXCJmZWVkYmFja1wiLCBtZXNzYWdlKTtcbiAgICBJbnRlcmZhY2VIZWxwZXJzLnNldFBvc2l0aW9uKGZlZWRiYWNrTXNnLCB4IC0gMTUwLCB5IC0gMTAwKTtcbiAgICBmZWVkYmFja01zZy5zdHlsZS5iYWNrZ3JvdW5kID0gYHJnYmEoJHtcbiAgICAgIGNvbG9yID09PSBcImdyZWVuXCIgPyBcIjAsIDI1NSwgMFwiIDogXCIyNTUsIDAsIDBcIlxuICAgIH0sIDAuNylgO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZmVlZGJhY2tNc2cpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBmZWVkYmFja01zZy5yZW1vdmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVDaXJjbGUgPSAoKSA9PiB7XG4gICAgaWYgKGNpcmNsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2lyY2xlVG9SZW1vdmUgPSBjaXJjbGVzLnBvcCgpO1xuICAgICAgSW50ZXJmYWNlSGVscGVycy5yZW1vdmVFbGVtZW50KGNpcmNsZVRvUmVtb3ZlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlQ2lyY2xlID0gKHgsIHkpID0+IHtcbiAgICBjb25zdCBjaXJjbGUgPSBJbnRlcmZhY2VIZWxwZXJzLmNyZWF0ZURpdihcImNpcmNsZVwiKTtcbiAgICBJbnRlcmZhY2VIZWxwZXJzLnNldFBvc2l0aW9uKGNpcmNsZSwgeCAtIDUwLCB5IC0gNTApO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcbiAgICBjaXJjbGVzLnB1c2goY2lyY2xlKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVQb3B1cCA9ICgpID0+IHtcbiAgICBpZiAocG9wdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHBvcHVwVG9SZW1vdmUgPSBwb3B1cHMucG9wKCk7XG4gICAgICBJbnRlcmZhY2VIZWxwZXJzLnJlbW92ZUVsZW1lbnQocG9wdXBUb1JlbW92ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVBvcHVwID0gKHgsIHksIGZvdW5kQ2hhcmFjdGVycykgPT4ge1xuICAgIGNvbnN0IHBvcHVwID0gSW50ZXJmYWNlSGVscGVycy5jcmVhdGVEaXYoXCJjaG9pY2VcIik7XG4gICAgSW50ZXJmYWNlSGVscGVycy5zZXRQb3NpdGlvbihwb3B1cCwgeCArIDYwLCB5IC0gNzApO1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgIHsgdGV4dDogXCJCb3dzZXJcIiwgY2hhcmFjdGVyOiBcImJvd3NlclwiIH0sXG4gICAgICB7IHRleHQ6IFwiTmVvXCIsIGNoYXJhY3RlcjogXCJuZW9cIiB9LFxuICAgICAgeyB0ZXh0OiBcIldhbGRvXCIsIGNoYXJhY3RlcjogXCJ3YWxkb1wiIH0sXG4gICAgXTtcblxuICAgIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICBjb25zdCBjaG9pY2UgPSBJbnRlcmZhY2VIZWxwZXJzLmNyZWF0ZUJ1dHRvbihcbiAgICAgICAgb3B0aW9uLnRleHQsXG4gICAgICAgIG9wdGlvbi5jaGFyYWN0ZXJcbiAgICAgICk7XG5cbiAgICAgIGlmIChmb3VuZENoYXJhY3RlcnMuaW5jbHVkZXMob3B0aW9uLmNoYXJhY3RlcikpIHtcbiAgICAgICAgY2hvaWNlLmNsYXNzTGlzdC5hZGQoXCJmb3VuZFwiKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNob2ljZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgQ29udHJvbGxlci5oYW5kbGVCdXR0b25DbGljayk7XG4gICAgICB9XG5cbiAgICAgIHBvcHVwLmFwcGVuZENoaWxkKGNob2ljZSk7XG4gICAgfSk7XG5cbiAgICBjb250ZW50LmFwcGVuZENoaWxkKHBvcHVwKTtcbiAgICBwb3B1cHMucHVzaChwb3B1cCk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlVGFibGUgPSAodXNlclRpbWVzKSA9PiB7XG4gICAgY29uc3Qgc2NvcmVib2FyZFRhYmxlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFibGVCb2R5XCIpO1xuICAgIHNjb3JlYm9hcmRUYWJsZUJvZHkudGV4dENvbnRlbnQgPSBcIlwiO1xuXG4gICAgLy8gVEhJUyBMSU5FIENBVVNFUyBFUlJPUlxuICAgIHVzZXJUaW1lcy5mb3JFYWNoKCh1c2VyVGltZSkgPT4ge1xuICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgICAgY29uc3QgdXNlcm5hbWVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgdXNlcm5hbWVDZWxsLnRleHRDb250ZW50ID0gdXNlclRpbWUudXNlcm5hbWU7XG4gICAgICBjb25zdCB0aW1lQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgIHRpbWVDZWxsLnRleHRDb250ZW50ID0gdXNlclRpbWUudGltZTtcblxuICAgICAgcm93LmFwcGVuZENoaWxkKHVzZXJuYW1lQ2VsbCk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQodGltZUNlbGwpO1xuICAgICAgc2NvcmVib2FyZFRhYmxlQm9keS5hcHBlbmRDaGlsZChyb3cpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgY3JlYXRlRmVlZGJhY2tNc2csXG4gICAgcmVtb3ZlQ2lyY2xlLFxuICAgIGNyZWF0ZUNpcmNsZSxcbiAgICByZW1vdmVQb3B1cCxcbiAgICBjcmVhdGVQb3B1cCxcbiAgICBjcmVhdGVUYWJsZSxcbiAgfTtcbn0pKCk7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0XG5leHBvcnQgY29uc3QgQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG4gIGNvbnN0IGRyb3Bkb3duQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkcm9wZG93bkJ1dHRvblwiKTtcbiAgY29uc3QgZHJvcGRvd25NZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkcm9wZG93bk1lbnVcIik7XG4gIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGFydEJ1dHRvblwiKTtcbiAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5QWdhaW5CdXR0b25cIik7XG4gIGNvbnN0IGluaXRpYWxNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwuaW5pdGlhbFwiKTtcbiAgY29uc3QgZW5kZ2FtZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC5lbmRnYW1lXCIpO1xuICBjb25zdCBsZWFkZXJib2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC5sZWFkZXJib2FyZFwiKTtcblxuICBsZXQgaXNHYW1lU3RhcnRlZCA9IGZhbHNlO1xuICBsZXQgaXNBZGRpbmdDaXJjbGUgPSBmYWxzZTtcbiAgbGV0IGlzQWRkaW5nUG9wdXAgPSBmYWxzZTtcbiAgbGV0IHNlbGVjdGVkQ2hhcmFjdGVyID0gbnVsbDtcbiAgY29uc3QgZm91bmRDaGFyYWN0ZXJzID0gW107XG5cbiAgY29uc3Qgc3RhcnRHYW1lID0gKCkgPT4ge1xuICAgIGlmICghaXNHYW1lU3RhcnRlZCkge1xuICAgICAgSW50ZXJmYWNlSGVscGVycy5oaWRlTW9kYWwoaW5pdGlhbE1vZGFsKTtcbiAgICAgIEludGVyZmFjZUhlbHBlcnMuc3RhcnRUaW1lcigpO1xuICAgICAgaXNHYW1lU3RhcnRlZCA9IHRydWU7XG4gICAgICBpc0FkZGluZ0NpcmNsZSA9IHRydWU7XG4gICAgICBpc0FkZGluZ1BvcHVwID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVzZXRHYW1lID0gKCkgPT4ge1xuICAgIGlzR2FtZVN0YXJ0ZWQgPSBmYWxzZTtcbiAgICBpc0FkZGluZ0NpcmNsZSA9IGZhbHNlO1xuICAgIGlzQWRkaW5nUG9wdXAgPSBmYWxzZTtcbiAgICBzZWxlY3RlZENoYXJhY3RlciA9IG51bGw7XG4gICAgZm91bmRDaGFyYWN0ZXJzLmxlbmd0aCA9IDA7XG5cbiAgICBJbnRlcmZhY2VIZWxwZXJzLnJlc2V0Q291bnQoKTtcbiAgICBJbnRlcmZhY2VIZWxwZXJzLnJlc2V0VGltZXIoKTtcbiAgICBJbnRlcmZhY2VIZWxwZXJzLmNsZWFyQ2hhcmFjdGVySWNvbnMoKTtcbiAgICBJbnRlcmZhY2VIZWxwZXJzLmhpZGVNb2RhbChsZWFkZXJib2FyZE1vZGFsKTtcbiAgICBJbnRlcmZhY2VIZWxwZXJzLmhpZGVNb2RhbChlbmRnYW1lTW9kYWwpO1xuICAgIEludGVyZmFjZUhlbHBlcnMuc2hvd01vZGFsKGluaXRpYWxNb2RhbCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ29udGVudENsaWNrID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgaWYgKFxuICAgICAgIWlzR2FtZVN0YXJ0ZWQgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiaGVhZGVyXCIpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xvc2VzdChcImZvb3RlclwiKSB8fFxuICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIub3ZlcmxheVwiKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0FkZGluZ0NpcmNsZSkge1xuICAgICAgY29uc3QgeyB4LCB5LCBzY2FsZWRYLCBzY2FsZWRZIH0gPSBMb2NhdGlvbk1hbmFnZXIuZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpO1xuICAgICAgUmVuZGVyZXIuY3JlYXRlQ2lyY2xlKHgsIHkpO1xuICAgICAgUmVuZGVyZXIuY3JlYXRlUG9wdXAoeCwgeSwgZm91bmRDaGFyYWN0ZXJzKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgc2VsZWN0ZWRDaGFyYWN0ZXIgPSBhd2FpdCBGaXJlc3RvcmVNYW5hZ2VyLnZlcmlmeUNsaWNrZWRQb3NpdGlvbihcbiAgICAgICAgICBzY2FsZWRYLFxuICAgICAgICAgIHNjYWxlZFlcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB2ZXJpZnlpbmcgY2xpY2tlZCBwb3NpdGlvbjpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBSZW5kZXJlci5yZW1vdmVDaXJjbGUoKTtcbiAgICAgIFJlbmRlcmVyLnJlbW92ZVBvcHVwKCk7XG4gICAgfVxuXG4gICAgaXNBZGRpbmdDaXJjbGUgPSAhaXNBZGRpbmdDaXJjbGU7XG4gICAgaXNBZGRpbmdQb3B1cCA9ICFpc0FkZGluZ1BvcHVwO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUJ1dHRvbkNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgeyB4LCB5IH0gPSBMb2NhdGlvbk1hbmFnZXIuZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpO1xuICAgIFJlbmRlcmVyLnJlbW92ZVBvcHVwKCk7XG5cbiAgICBjb25zdCBjbGlja2VkQ2hhcmFjdGVyID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyO1xuXG4gICAgaWYgKHNlbGVjdGVkQ2hhcmFjdGVyID09PSBjbGlja2VkQ2hhcmFjdGVyKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRDaGFyYWN0ZXIgPVxuICAgICAgICBzZWxlY3RlZENoYXJhY3Rlci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgIHNlbGVjdGVkQ2hhcmFjdGVyLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBSZW5kZXJlci5jcmVhdGVGZWVkYmFja01zZyhgRm91bmQgJHtmb3JtYXR0ZWRDaGFyYWN0ZXJ9IWAsIHgsIHksIFwiZ3JlZW5cIik7XG5cbiAgICAgIEludGVyZmFjZUhlbHBlcnMuZ3JheU91dENoYXJhY3Rlckljb24oY2xpY2tlZENoYXJhY3Rlcik7XG4gICAgICBJbnRlcmZhY2VIZWxwZXJzLnVwZGF0ZUNvdW50KCk7XG5cbiAgICAgIGZvdW5kQ2hhcmFjdGVycy5wdXNoKGNsaWNrZWRDaGFyYWN0ZXIpO1xuICAgICAgUmVuZGVyZXIucmVtb3ZlUG9wdXAoKTtcbiAgICAgIFJlbmRlcmVyLmNyZWF0ZVBvcHVwKHgsIHksIGZvdW5kQ2hhcmFjdGVycyk7XG5cbiAgICAgIGlmIChmb3VuZENoYXJhY3RlcnMubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIEludGVyZmFjZUhlbHBlcnMuc3RvcFRpbWVyKCk7XG4gICAgICAgIEludGVyZmFjZUhlbHBlcnMuZ2V0TGVhZGVyYm9hcmQoKTtcbiAgICAgICAgSW50ZXJmYWNlSGVscGVycy5zaG93TW9kYWwoZW5kZ2FtZU1vZGFsKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgUmVuZGVyZXIuY3JlYXRlRmVlZGJhY2tNc2coXCJLZWVwIGxvb2tpbmchXCIsIHgsIHkpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIGNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNvbnRlbnRDbGljayk7XG5cbiAgICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jaG9pY2UgYnV0dG9uXCIpO1xuICAgIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJ1dHRvbkNsaWNrKTtcbiAgICB9KTtcblxuICAgIGRyb3Bkb3duQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkcm9wZG93bk1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XG4gICAgICBkcm9wZG93bkJ1dHRvbi50ZXh0Q29udGVudCA9IGRyb3Bkb3duTWVudS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93XCIpXG4gICAgICAgID8gXCLilrIgSGlkZSBDaGFyYWN0ZXJzIOKWslwiXG4gICAgICAgIDogXCLilrwgU2hvdyBDaGFyYWN0ZXJzIOKWvFwiO1xuICAgIH0pO1xuXG4gICAgc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN0YXJ0R2FtZSk7XG5cbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdFVzZXJuYW1lXCIpO1xuICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgSW50ZXJmYWNlSGVscGVycy5oaWRlTW9kYWwoZW5kZ2FtZU1vZGFsKTtcbiAgICB9KTtcblxuICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVzZXRHYW1lKTtcblxuICAgIEludGVyZmFjZUhlbHBlcnMuaGlkZU1vZGFsKGxlYWRlcmJvYXJkTW9kYWwpO1xuICAgIEludGVyZmFjZUhlbHBlcnMuaGlkZU1vZGFsKGVuZGdhbWVNb2RhbCk7XG4gICAgSW50ZXJmYWNlSGVscGVycy5zaG93TW9kYWwoaW5pdGlhbE1vZGFsKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQsXG4gICAgaGFuZGxlQnV0dG9uQ2xpY2ssXG4gIH07XG59KSgpO1xuXG5Db250cm9sbGVyLmluaXQoKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDk1NCk7XG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMjU5KTtcbiJdLCJuYW1lcyI6WyJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwicCIsImkiLCJsZW5ndGgiLCJjIiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkVOQ09ERURfVkFMUyIsInRoaXMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsImluaXRfIiwiYnl0ZVRvQ2hhck1hcCIsIm91dHB1dCIsImJ5dGUxIiwiaGF2ZUJ5dGUyIiwiYnl0ZTIiLCJoYXZlQnl0ZTMiLCJieXRlMyIsIm91dEJ5dGUxIiwib3V0Qnl0ZTIiLCJvdXRCeXRlMyIsIm91dEJ5dGU0IiwicHVzaCIsImpvaW4iLCJlbmNvZGVTdHJpbmciLCJidG9hIiwiZGVjb2RlU3RyaW5nIiwiYnl0ZXMiLCJwb3MiLCJjMSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImMyIiwidSIsImMzIiwiYnl0ZUFycmF5VG9TdHJpbmciLCJkZWNvZGVTdHJpbmdUb0J5dGVBcnJheSIsImNoYXJUb0J5dGVNYXAiLCJjaGFyQXQiLCJieXRlNCIsIkRlY29kZUJhc2U2NFN0cmluZ0Vycm9yIiwiY29uc3RydWN0b3IiLCJzdXBlciIsImFyZ3VtZW50cyIsIm5hbWUiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsInJlcGxhY2UiLCJnZXREZWZhdWx0cyIsInNlbGYiLCJ3aW5kb3ciLCJnIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImRlZmF1bHRzSnNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiZG9jdW1lbnQiLCJtYXRjaCIsImNvb2tpZSIsImUiLCJkZWNvZGVkIiwiY29uc29sZSIsImVycm9yIiwiYmFzZTY0RGVjb2RlIiwiZ2V0RGVmYXVsdHNGcm9tQ29va2llIiwiaW5mbyIsImdldERlZmF1bHRBcHBDb25maWciLCJfYSIsImNvbmZpZyIsIkRlZmVycmVkIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJQcm9taXNlIiwid3JhcENhbGxiYWNrIiwiY2FsbGJhY2siLCJ2YWx1ZSIsImNhdGNoIiwiRmlyZWJhc2VFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY3VzdG9tRGF0YSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJkYXRhIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJfIiwia2V5IiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJhIiwiYiIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiayIsImluY2x1ZGVzIiwiYVByb3AiLCJiUHJvcCIsImlzT2JqZWN0IiwidGhpbmciLCJfZGVsZWdhdGUiLCJDb21wb25lbnQiLCJpbnN0YW5jZUZhY3RvcnkiLCJ0eXBlIiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJtb2RlIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJzZXRTZXJ2aWNlUHJvcHMiLCJwcm9wcyIsInNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb21wb25lbnQiLCJpbnN0YW5jZXMiLCJNYXAiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJnZXQiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJoYXMiLCJkZWZlcnJlZCIsInNldCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldEltbWVkaWF0ZSIsIm9wdGlvbnMiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZW50cmllcyIsImNsZWFySW5zdGFuY2UiLCJkZWxldGUiLCJhc3luYyIsInNlcnZpY2VzIiwiZnJvbSIsInZhbHVlcyIsImFsbCIsImZpbHRlciIsIm1hcCIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJhZGQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwibm93IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWV0aG9kIiwiTG9nZ2VyIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJfdXNlckxvZ0hhbmRsZXIiLCJ2YWwiLCJUeXBlRXJyb3IiLCJzZXRMb2dMZXZlbCIsImxvZ0hhbmRsZXIiLCJ1c2VyTG9nSGFuZGxlciIsImRlYnVnIiwibG9nIiwid2FybiIsImluc3RhbmNlT2ZBbnkiLCJvYmplY3QiLCJjb25zdHJ1Y3RvcnMiLCJzb21lIiwiaWRiUHJveHlhYmxlVHlwZXMiLCJjdXJzb3JBZHZhbmNlTWV0aG9kcyIsImN1cnNvclJlcXVlc3RNYXAiLCJXZWFrTWFwIiwidHJhbnNhY3Rpb25Eb25lTWFwIiwidHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwIiwidHJhbnNmb3JtQ2FjaGUiLCJyZXZlcnNlVHJhbnNmb3JtQ2FjaGUiLCJpZGJQcm94eVRyYXBzIiwidGFyZ2V0IiwicHJvcCIsInJlY2VpdmVyIiwiSURCVHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZU5hbWVzIiwib2JqZWN0U3RvcmUiLCJ0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlIiwiZnVuYyIsIklEQkRhdGFiYXNlIiwidHJhbnNhY3Rpb24iLCJJREJDdXJzb3IiLCJhZHZhbmNlIiwiY29udGludWUiLCJjb250aW51ZVByaW1hcnlLZXkiLCJhcHBseSIsInVud3JhcCIsInN0b3JlTmFtZXMiLCJ0eCIsImNhbGwiLCJzb3J0IiwiZG9uZSIsInVubGlzdGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlIiwiRE9NRXhjZXB0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJQcm94eSIsIklEQlJlcXVlc3QiLCJyZXF1ZXN0Iiwic3VjY2VzcyIsInJlc3VsdCIsInRoZW4iLCJwcm9taXNpZnlSZXF1ZXN0IiwibmV3VmFsdWUiLCJyZWFkTWV0aG9kcyIsIndyaXRlTWV0aG9kcyIsImNhY2hlZE1ldGhvZHMiLCJnZXRNZXRob2QiLCJ0YXJnZXRGdW5jTmFtZSIsInVzZUluZGV4IiwiaXNXcml0ZSIsInN0b3JlTmFtZSIsInN0b3JlIiwiaW5kZXgiLCJzaGlmdCIsIm9sZFRyYXBzIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJ2ZXJzaW9uIiwibG9nU3RyaW5nIiwibmFtZSRvIiwidmVyc2lvbiQxIiwibG9nZ2VyIiwiUExBVEZPUk1fTE9HX1NUUklORyIsIl9hcHBzIiwiX2NvbXBvbmVudHMiLCJfYWRkQ29tcG9uZW50IiwiYXBwIiwiX3JlZ2lzdGVyQ29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIkRCX05BTUUiLCJEQl9WRVJTSU9OIiwiU1RPUkVfTkFNRSIsImRiUHJvbWlzZSIsImdldERiUHJvbWlzZSIsImJsb2NrZWQiLCJ1cGdyYWRlIiwiYmxvY2tpbmciLCJ0ZXJtaW5hdGVkIiwiaW5kZXhlZERCIiwib3BlbiIsIm9wZW5Qcm9taXNlIiwiZXZlbnQiLCJvbGRWZXJzaW9uIiwibmV3VmVyc2lvbiIsImRiIiwib3BlbkRCIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJvcmlnaW5hbEVycm9yTWVzc2FnZSIsIndyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCIiwiaGVhcnRiZWF0T2JqZWN0IiwicHV0IiwiY29tcHV0ZUtleSIsImlkYkdldEVycm9yIiwiYXBwSWQiLCJIZWFydGJlYXRTZXJ2aWNlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIkhlYXJ0YmVhdFN0b3JhZ2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UiLCJyZWFkIiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImxhc3RTZW50SGVhcnRiZWF0RGF0ZSIsImhlYXJ0YmVhdHMiLCJzaW5nbGVEYXRlSGVhcnRiZWF0IiwiaGJUaW1lc3RhbXAiLCJ2YWx1ZU9mIiwib3ZlcndyaXRlIiwiaGVhcnRiZWF0c1RvU2VuZCIsInVuc2VudEVudHJpZXMiLCJoZWFydGJlYXRzQ2FjaGUiLCJtYXhTaXplIiwic2xpY2UiLCJoZWFydGJlYXRFbnRyeSIsImZpbmQiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3RyaW5naWZ5Iiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwicHJlRXhpc3QiLCJEQl9DSEVDS19OQU1FIiwib25zdWNjZXNzIiwiY2xvc2UiLCJkZWxldGVEYXRhYmFzZSIsIm9udXBncmFkZW5lZWRlZCIsIm9uZXJyb3IiLCJpZGJIZWFydGJlYXRPYmplY3QiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwiZ2xvYmFsIiwiZXNtIiwiZ29vZyIsImwiLCJhYSIsImNhIiwiTWF0aCIsInJhbmRvbSIsImRhIiwiZWEiLCJiaW5kIiwiZmEiLCJkIiwidW5zaGlmdCIsInEiLCJGdW5jdGlvbiIsInRvU3RyaW5nIiwiaW5kZXhPZiIsImhhIiwiciIsIiQiLCJhYyIsImYiLCJoIiwibiIsInYiLCJzIiwibyIsInNhIiwiTiIsImhhc093blByb3BlcnR5Iiwia2EiLCJtYSIsIm5hIiwidyIsImRlZmF1bHRQcmV2ZW50ZWQiLCJvYSIsImRlZmluZVByb3BlcnR5IiwieCIsInRlc3QiLCJwYSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInkiLCJxYSIsInphIiwiRGEiLCJ0YSIsInoiLCJ1YSIsInZhIiwid2EiLCJ0b0xvd2VyQ2FzZSIsInhhIiwieWEiLCJkb2N1bWVudE1vZGUiLCJBYSIsIkJhIiwiZXhlYyIsIkNhIiwicGFyc2VGbG9hdCIsInBhcnNlSW50IiwiRmEiLCJBIiwicmVsYXRlZFRhcmdldCIsImJ1dHRvbiIsInNjcmVlblkiLCJzY3JlZW5YIiwiY2xpZW50WSIsImNsaWVudFgiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5Iiwic3RhdGUiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiR2EiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiSGEiLCJJYSIsIkphIiwibGlzdGVuZXIiLCJwcm94eSIsInNyYyIsImNhcHR1cmUiLCJsYSIsImlhIiwiS2EiLCJOYSIsIlBhIiwiUWEiLCJzcGxpdCIsIlJhIiwiU2EiLCJVYSIsInNwbGljZSIsIlRhIiwiVmEiLCJXYSIsIllhIiwib25jZSIsIlphIiwiJGEiLCJPIiwiYWIiLCJiYiIsImViIiwiY2IiLCJhdHRhY2hFdmVudCIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJQIiwiZmIiLCJnYiIsImRldGFjaEV2ZW50IiwiaGFuZGxlRXZlbnQiLCJCIiwiUyIsIkoiLCJDIiwiaWIiLCJjb25jYXQiLCJ0IiwiamIiLCJsYiIsIm1iIiwibmV4dCIsIm9iIiwiaiIsInBiIiwicmVzZXQiLCJxYiIsInJiIiwic2V0VGltZW91dCIsInNiIiwidGIiLCJ2YiIsInViIiwid2IiLCJ4YiIsImdhIiwiVCIsImNsZWFyVGltZW91dCIsInliIiwiTnVtYmVyIiwiemIiLCJtIiwic3RhcnQiLCJBYiIsIkJiIiwiQ2IiLCJEYiIsIkZiIiwiR2IiLCJEIiwiSmIiLCJFYSIsIkUiLCJMYiIsIk1iIiwiTmIiLCJPYiIsIlBiIiwiU1RBVF9FVkVOVCIsInN0YXQiLCJGIiwiUWIiLCJzaXplIiwiUmIiLCJTYiIsIk5PX0VSUk9SIiwiRWIiLCJUSU1FT1VUIiwiSWIiLCJUYiIsIktiIiwiJGIiLCJVYiIsIlZiIiwiV2IiLCJYYiIsIk9QRU4iLCJIYiIsIlliIiwiWmIiLCJiYyIsIlciLCJVIiwiY2MiLCJWIiwiSSIsIkwiLCJHIiwiWSIsIk0iLCJiYSIsIksiLCJkYyIsIlhNTEh0dHBSZXF1ZXN0IiwiZWMiLCJmYyIsImdjIiwiaGMiLCJpYyIsImpjIiwia2MiLCJsYyIsIm5iIiwib2MiLCJyYyIsInVjIiwicWMiLCJ2YyIsInBjIiwiaXNOYU4iLCJ3YyIsIm5jIiwiSCIsInNjIiwiYWJvcnQiLCJ4YyIsInljIiwiemMiLCJBYyIsIkJjIiwicmEiLCJMYSIsIk1hIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJDYyIsIkRjIiwiRWMiLCJGYyIsIkdjIiwiSGMiLCJLYyIsImZvckVhY2giLCJaIiwiSmMiLCJJYyIsImphIiwibWMiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsInN0cmVhbSIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInRyaW0iLCJPYSIsInRjIiwiY2FuY2VsIiwiTGMiLCJSZWdFeHAiLCJOYyIsIk9jIiwiUGMiLCJRYyIsIlJjIiwiJGMiLCJYYyIsIlNjIiwiWWMiLCJmbG9vciIsImFicyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsIlpjIiwiVGMiLCJlbmNvZGVVUklDb21wb25lbnQiLCJVYyIsIlZjIiwiV2MiLCJNYyIsImFkIiwiY2QiLCJkZCIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImVkIiwiZmQiLCJjbGVhciIsImdkIiwiaGQiLCJpZCIsImtkIiwib25sb2FkIiwib25hYm9ydCIsIm9udGltZW91dCIsImxkIiwibWQiLCJyZWFkeVN0YXRlIiwibmQiLCJzdGF0dXMiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZSIsInN0YXR1c1RleHQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJIZWFkZXJzIiwicWQiLCJYYSIsInBkIiwib2QiLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJib2R5IiwiZmV0Y2giLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJSZWFkYWJsZVN0cmVhbSIsImdldFJlYWRlciIsInRleHQiLCJVaW50OEFycmF5Iiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsInJkIiwic2QiLCJ0ZCIsInVkIiwidmQiLCJ5ZCIsInpkIiwiQWQiLCJsb2NhdGlvbiIsInByb3RvY29sIiwid2QiLCJtb3pSZXNwb25zZUFycmF5QnVmZmVyIiwiQmQiLCJDZCIsIkRkIiwiaW50ZXJuYWxDaGFubmVsUGFyYW1zIiwiRWQiLCJ4bWxIdHRwRmFjdG9yeSIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsImVuY29kZUluaXRNZXNzYWdlSGVhZGVycyIsImZvcmNlTG9uZ1BvbGxpbmciLCJkZXRlY3RCdWZmZXJpbmdQcm94eSIsImxvbmdQb2xsaW5nVGltZW91dCIsIkZkIiwiR2QiLCJzZW5kQmVhY29uIiwiSW1hZ2UiLCJIZCIsIkxkIiwiS2QiLCJyb3VuZCIsIm1pbiIsIm1heCIsIkpkIiwiTWQiLCJJZCIsImlzQWN0aXZlIiwiamQiLCJob3N0bmFtZSIsInBvcnQiLCJOZCIsIk9kIiwiUSIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJpbml0TWVzc2FnZUhlYWRlcnMiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJzZW5kUmF3SnNvbiIsImh0dHBTZXNzaW9uSWRQYXJhbSIsIlIiLCJQZCIsIl9faGVhZGVyc19fIiwic3RhdHVzQ29kZSIsIl9fc3RhdHVzX18iLCJfX3NtX18iLCJRZCIsImJsb2NrU2l6ZSIsIlNkIiwidG9VcHBlckNhc2UiLCJnZXRQcm90b3R5cGVPZiIsIkZvcm1EYXRhIiwid2l0aENyZWRlbnRpYWxzIiwidGltZW91dCIsInhkIiwia2IiLCJfX2RhdGFfXyIsIlRkIiwiaXNGaW5pdGUiLCJVZCIsIldkIiwiWGQiLCJYIiwiWmQiLCIkZCIsImFlIiwiWWQiLCJiZSIsImNlaWwiLCJMTjIiLCJwb3ciLCJhbmQiLCJvciIsInhvciIsImNyZWF0ZVdlYkNoYW5uZWwiLCJIVFRQX0VSUk9SIiwiQ09NUExFVEUiLCJFdmVudFR5cGUiLCJDTE9TRSIsIk1FU1NBR0UiLCJsaXN0ZW4iLCJsaXN0ZW5PbmNlIiwiZ2V0TGFzdEVycm9yIiwiZ2V0TGFzdEVycm9yQ29kZSIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlSnNvbiIsImdldFJlc3BvbnNlVGV4dCIsInNldFdpdGhDcmVkZW50aWFscyIsImRpZ2VzdCIsInVwZGF0ZSIsIm11bHRpcGx5IiwibW9kdWxvIiwiY29tcGFyZSIsInRvTnVtYmVyIiwiZ2V0Qml0cyIsImZyb21OdW1iZXIiLCJmcm9tU3RyaW5nIiwiVmQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiZ2V0U3RhdEV2ZW50VGFyZ2V0IiwiRXJyb3JDb2RlIiwiRXZlbnQiLCJTdGF0IiwiUFJPWFkiLCJOT1BST1hZIiwiRmV0Y2hYbWxIdHRwRmFjdG9yeSIsIldlYkNoYW5uZWwiLCJYaHJJbyIsIk1kNSIsIkludGVnZXIiLCJ1aWQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJ0b0tleSIsImlzRXF1YWwiLCJVTkFVVEhFTlRJQ0FURUQiLCJHT09HTEVfQ1JFREVOVElBTFMiLCJGSVJTVF9QQVJUWSIsIk1PQ0tfVVNFUiIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJVTkFWQUlMQUJMRSIsIkRBVEFfTE9TUyIsInVzZXIiLCJnZXRUb2tlbiIsImludmFsaWRhdGVUb2tlbiIsImVucXVldWVSZXRyeWFibGUiLCJzaHV0ZG93biIsInRva2VuIiwiY2hhbmdlTGlzdGVuZXIiLCJjdXJyZW50VXNlciIsImZvcmNlUmVmcmVzaCIsImF1dGgiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsImFjY2Vzc1Rva2VuIiwicmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIiLCJnZXRVaWQiLCJhcHBDaGVjayIsImFkZFRva2VuTGlzdGVuZXIiLCJyZW1vdmVUb2tlbkxpc3RlbmVyIiwiY3J5cHRvIiwibXNDcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJ0dCIsInN0YXRpYyIsImV0IiwibnQiLCJldmVyeSIsIml0Iiwic2Vjb25kcyIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsImdldFRpbWUiLCJ0b0RhdGUiLCJ0b01pbGxpcyIsIl9jb21wYXJlVG8iLCJ0b0pTT04iLCJwYWRTdGFydCIsInJ0IiwidGltZXN0YW1wIiwiY29tcGFyZVRvIiwidG9NaWNyb3NlY29uZHMiLCJ0b1RpbWVzdGFtcCIsIm90Iiwic2VnbWVudHMiLCJvZmZzZXQiLCJsZW4iLCJjb21wYXJhdG9yIiwiY2hpbGQiLCJsaW1pdCIsImNvbnN0cnVjdCIsInBvcEZpcnN0IiwicG9wTGFzdCIsImZpcnN0U2VnbWVudCIsImxhc3RTZWdtZW50IiwiaXNFbXB0eSIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwidG9BcnJheSIsInV0IiwiY2Fub25pY2FsU3RyaW5nIiwiY3QiLCJhdCIsImlzVmFsaWRJZGVudGlmaWVyIiwiaXNLZXlGaWVsZCIsImh0IiwicGF0aCIsImVtcHR5UGF0aCIsImNvbGxlY3Rpb25Hcm91cCIsImhhc0NvbGxlY3Rpb25JZCIsImdldENvbGxlY3Rpb25Hcm91cCIsImdldENvbGxlY3Rpb25QYXRoIiwicHQiLCJJdCIsInJlYWRUaW1lIiwiZG9jdW1lbnRLZXkiLCJsYXJnZXN0QmF0Y2hJZCIsImVtcHR5IiwiVHQiLCJFdCIsIkF0Iiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJhZGRPbkNvbW1pdHRlZExpc3RlbmVyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwidnQiLCJSdCIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiRHQiLCJPdCIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJ3cml0ZVNlcXVlbmNlTnVtYmVyIiwiRnQiLCJCdCIsIm1lIiwiZ2UiLCJ5ZSIsInBlIiwicm9vdCIsIlRlIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJyZW1vdmUiLCJsZWZ0IiwicmlnaHQiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiSWUiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVja01heERlcHRoIiwiY2hlY2siLCJFZSIsImZpcnN0IiwibGFzdCIsImZvckVhY2hJblJhbmdlIiwiZm9yRWFjaFdoaWxlIiwiZmlyc3RBZnRlck9yRXF1YWwiLCJBZSIsInVuaW9uV2l0aCIsIml0ZXIiLCJSZSIsImZpZWxkcyIsImNvdmVycyIsIlBlIiwiVmUiLCJiaW5hcnlTdHJpbmciLCJTeW1ib2wiLCJpdGVyYXRvciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwiU2UiLCJEZSIsInN1YnN0ciIsIm5hbm9zIiwiQ2UiLCJ4ZSIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIk5lIiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwia2UiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJNZSIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCIkZSIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJsb25nUG9sbGluZ09wdGlvbnMiLCJ1c2VGZXRjaFN0cmVhbXMiLCJPZSIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiaXNEZWZhdWx0RGF0YWJhc2UiLCJGZSIsIkxlIiwiZW4iLCJxZSIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsIlVlIiwiS2UiLCJHZSIsIlFlIiwiamUiLCJmcm9tTmFtZSIsIkhlIiwiSmUiLCJZZSIsIlhlIiwiWmUiLCJ0biIsInVuIiwiZmllbGQiLCJnZXRGaWVsZHNNYXAiLCJzZXRBbGwiLCJhcHBseUNoYW5nZXMiLCJjbG9uZSIsImNuIiwiYW4iLCJkb2N1bWVudFR5cGUiLCJjcmVhdGVUaW1lIiwiZG9jdW1lbnRTdGF0ZSIsImNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQiLCJjb252ZXJ0VG9Ob0RvY3VtZW50IiwiY29udmVydFRvVW5rbm93bkRvY3VtZW50Iiwic2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJzZXRSZWFkVGltZSIsImhhc0xvY2FsTXV0YXRpb25zIiwiaGFzQ29tbWl0dGVkTXV0YXRpb25zIiwiaGFzUGVuZGluZ1dyaXRlcyIsImlzVmFsaWREb2N1bWVudCIsImlzRm91bmREb2N1bWVudCIsImlzTm9Eb2N1bWVudCIsImlzVW5rbm93bkRvY3VtZW50IiwibXV0YWJsZUNvcHkiLCJobiIsInBvc2l0aW9uIiwiaW5jbHVzaXZlIiwibG4iLCJkaXIiLCJmbiIsImRuIiwid24iLCJfbiIsIm1uIiwib3AiLCJjcmVhdGVLZXlGaWVsZEluRmlsdGVyIiwiUG4iLCJEbiIsIkNuIiwieG4iLCJObiIsImJuIiwiVm4iLCJtYXRjaGVzIiwibWF0Y2hlc0NvbXBhcmlzb24iLCJpc0luZXF1YWxpdHkiLCJnZXRGbGF0dGVuZWRGaWx0ZXJzIiwiZ2V0RmlsdGVycyIsImdldEZpcnN0SW5lcXVhbGl0eUZpZWxkIiwiZ24iLCJmaWx0ZXJzIiwibHQiLCJ5biIsInJlZHVjZSIsImZ0IiwiSW4iLCJUbiIsIkVuIiwiQW4iLCJSbiIsIlNuIiwibnVsbFZhbHVlIiwia24iLCJvcmRlckJ5Iiwic3RhcnRBdCIsImVuZEF0IiwiZHQiLCJNbiIsIiRuIiwiT24iLCJGbiIsImlzRG9jdW1lbnRLZXkiLCJVbiIsImV4cGxpY2l0T3JkZXJCeSIsImxpbWl0VHlwZSIsInd0IiwiX3QiLCJHbiIsIlFuIiwiSG4iLCJ6biIsImpuIiwia2V5RmllbGQiLCJKbiIsIlhuIiwiWm4iLCJ0cyIsImVzIiwibnMiLCJpcyIsInJzIiwib3MiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJpbm5lclNpemUiLCJ1cyIsImNzIiwiYXMiLCJocyIsImxzIiwib3ZlcmxheWVkRG9jdW1lbnQiLCJmcyIsIndzIiwiZHMiLCJfcyIsIm1zIiwiZ3MiLCJ5cyIsIklzIiwidXNlUHJvdG8zSnNvbiIsIlRzIiwiRXMiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIkx0IiwiQXMiLCJ2cyIsImJzIiwiVnMiLCJTcyIsIkRzIiwiQ3MiLCJQcyIsIk5zIiwiZ3QiLCJzZXJpYWxpemVyIiwiUnMiLCJ4cyIsImVsZW1lbnRzIiwia3MiLCJPcyIsInRyYW5zZm9ybVJlc3VsdHMiLCJGcyIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJpc05vbmUiLCJCcyIsIkxzIiwicXMiLCJZcyIsIm5vbmUiLCJqcyIsInpzIiwiVXMiLCJIcyIsImZpZWxkVHJhbnNmb3JtcyIsInByZWNvbmRpdGlvbiIsIldzIiwiS3MiLCJKcyIsImZpZWxkTWFzayIsIkdzIiwidHJhbnNmb3JtIiwiUXMiLCIkcyIsImdldEZpZWxkTWFzayIsIlhzIiwiWnMiLCJiYXRjaElkIiwibG9jYWxXcml0ZVRpbWUiLCJiYXNlTXV0YXRpb25zIiwibXV0YXRpb25zIiwiYXBwbHlUb1JlbW90ZURvY3VtZW50IiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsImFwcGx5VG9Mb2NhbERvY3VtZW50U2V0IiwibXV0YXRlZEZpZWxkcyIsInRpIiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJlaSIsIm11dGF0aW9uIiwiZ2V0S2V5Iiwic2kiLCJjb3VudCIsInVuY2hhbmdlZE5hbWVzIiwiaWkiLCJyaSIsInVpIiwiY2kiLCJvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzIiwiYWkiLCJvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoIiwibm90aWZ5T25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCIsImxpIiwiZmkiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsImRpIiwiRGF0YVZpZXciLCJidWZmZXIiLCJnZXRVaW50MzIiLCJ3aSIsImJpdG1hcCIsInBhZGRpbmciLCJoYXNoQ291bnQiLCJfaSIsIm1pIiwic25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q2hhbmdlcyIsInRhcmdldE1pc21hdGNoZXMiLCJkb2N1bWVudFVwZGF0ZXMiLCJyZXNvbHZlZExpbWJvRG9jdW1lbnRzIiwiZ2kiLCJjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UiLCJyZXN1bWVUb2tlbiIsImN1cnJlbnQiLCJhZGRlZERvY3VtZW50cyIsIm1vZGlmaWVkRG9jdW1lbnRzIiwicmVtb3ZlZERvY3VtZW50cyIsInlpIiwiUHQiLCJyZW1vdmVkVGFyZ2V0SWRzIiwiYnQiLCJwaSIsInRhcmdldElkIiwiVnQiLCJJaSIsInRhcmdldElkcyIsImNhdXNlIiwiVGkiLCJTdCIsInZpIiwiQ3QiLCJ4dCIsIk50Iiwia3QiLCJNdCIsIiR0IiwicXQiLCJVdCIsIkt0IiwiRWkiLCJHdCIsIlF0IiwianQiLCJ6dCIsIkFpIiwiV3QiLCJIdCIsIkp0IiwiWXQiLCJYdCIsImZvckVhY2hUYXJnZXQiLCJadCIsInRlIiwicmVtb3ZlVGFyZ2V0IiwiZWUiLCJuZSIsInNlIiwibmV3Tm9Eb2N1bWVudCIsImllIiwicmUiLCJsb2NhbENhY2hlQ291bnQiLCJleGlzdGVuY2VGaWx0ZXJDb3VudCIsImJsb29tRmlsdGVyIiwiYXBwbGllZCIsImJpdG1hcExlbmd0aCIsImJpdHMiLCJvZSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJ1ZSIsImNlIiwicHVycG9zZSIsImhlIiwibGUiLCJSaSIsImFzYyIsImRlc2MiLCJQaSIsImluIiwiYmkiLCJWaSIsIlNpIiwiRGkiLCJDaSIsInhpIiwiTmkiLCJmcm9tVGltZXN0YW1wIiwia2kiLCJNaSIsInVyIiwiJGkiLCJPaSIsInFpIiwiRmkiLCJMaSIsIlVpIiwiSGkiLCJkb2N1bWVudHMiLCJKaSIsInN0cnVjdHVyZWRRdWVyeSIsInBhcmVudCIsImNvbGxlY3Rpb25JZCIsImFsbERlc2NlbmRhbnRzIiwicnIiLCJ3aGVyZSIsInNyIiwiZGlyZWN0aW9uIiwidHIiLCJiZWZvcmUiLCJZaSIsIkJpIiwiWmkiLCJpciIsIktuIiwidW5hcnlGaWx0ZXIiLCJOYU4iLCJmaWVsZEZpbHRlciIsImNvbXBvc2l0ZUZpbHRlciIsImVyIiwibnIiLCJmaWVsZFBhdGgiLCJmcm9tU2VydmVyRm9ybWF0IiwiZmllbGRQYXRocyIsImNyIiwic2VxdWVuY2VOdW1iZXIiLCJsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiZXhwZWN0ZWRDb3VudCIsIndpdGhTZXF1ZW5jZU51bWJlciIsIndpdGhSZXN1bWVUb2tlbiIsIndpdGhFeHBlY3RlZENvdW50Iiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJhciIsImZlIiwieXIiLCJiciIsIl9lIiwidmUiLCJ6ciIsInJuIiwiV3IiLCJhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwiZ2V0RW50cmllcyIsImFkZEZpZWxkSW5kZXgiLCJkZWxldGVGaWVsZEluZGV4IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQiLCJnZXRJbmRleFR5cGUiLCJnZXRGaWVsZEluZGV4ZXMiLCJnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUiLCJnZXRNaW5PZmZzZXQiLCJnZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwIiwidXBkYXRlQ29sbGVjdGlvbkdyb3VwIiwidXBkYXRlSW5kZXhFbnRyaWVzIiwic28iLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSIsIkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCIsIkRFRkFVTFQiLCJESVNBQkxFRCIsImxvIiwidm8iLCJjaGFuZ2VzIiwiY2hhbmdlc0FwcGxpZWQiLCJhZGRFbnRyeSIsImFzc2VydE5vdEFwcGxpZWQiLCJyZW1vdmVFbnRyeSIsIm5ld0ludmFsaWREb2N1bWVudCIsImdldEVudHJ5IiwiZ2V0RnJvbUNhY2hlIiwiZ2V0QWxsRnJvbUNhY2hlIiwiTm8iLCJrbyIsInJlbW90ZURvY3VtZW50Q2FjaGUiLCJtdXRhdGlvblF1ZXVlIiwiZG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJpbmRleE1hbmFnZXIiLCJnZXREb2N1bWVudCIsImdldE92ZXJsYXkiLCJnZXREb2N1bWVudHMiLCJnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyIsInBvcHVsYXRlT3ZlcmxheXMiLCJjb21wdXRlVmlld3MiLCJnZXRPdmVybGF5ZWREb2N1bWVudHMiLCJnZXRPdmVybGF5cyIsInJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwic2F2ZU92ZXJsYXlzIiwicmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5IiwiV24iLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkiLCJnZXROZXh0RG9jdW1lbnRzIiwiZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwIiwiZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uIiwiTW8iLCJnZXRCdW5kbGVNZXRhZGF0YSIsInNhdmVCdW5kbGVNZXRhZGF0YSIsImdldE5hbWVkUXVlcnkiLCJzYXZlTmFtZWRRdWVyeSIsInF1ZXJ5IiwiYnVuZGxlZFF1ZXJ5IiwiJG8iLCJvdmVybGF5cyIsIndlIiwicmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkIiwiT28iLCJGbyIsImFkZFJlZmVyZW5jZSIsInJlbW92ZVJlZmVyZW5jZSIsInBzIiwiY29udGFpbnNLZXkiLCJCbyIsInJlZmVyZW5jZURlbGVnYXRlIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJQT1NJVElWRV9JTkZJTklUWSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJMbyIsImRvY3MiLCJzZXRJbmRleE1hbmFnZXIiLCJuZXdDaGFuZ2VCdWZmZXIiLCJxbyIsImdldFNpemUiLCJVbyIsInBlcnNpc3RlbmNlIiwibGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImhpZ2hlc3RUYXJnZXRJZCIsInRhcmdldENvdW50IiwiTXMiLCJnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwiZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyIiwiYWxsb2NhdGVUYXJnZXRJZCIsInNldFRhcmdldHNNZXRhZGF0YSIsImFkZFRhcmdldERhdGEiLCJ1cGRhdGVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldHMiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsImdldFRhcmdldENvdW50IiwiZ2V0VGFyZ2V0RGF0YSIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiS28iLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsImdldEluZGV4TWFuYWdlciIsImdldERvY3VtZW50T3ZlcmxheUNhY2hlIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFRhcmdldENhY2hlIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsImdldEJ1bmRsZUNhY2hlIiwicnVuVHJhbnNhY3Rpb24iLCJHbyIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsIlFvIiwiZnJvbVBhdGgiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwidHUiLCJmcm9tQ2FjaGUiLCJkb2NDaGFuZ2VzIiwiZG9jIiwiZXUiLCJLaSIsIkdpIiwiUWkiLCJqaSIsInppIiwiV2kiLCJ5dCIsIm51IiwiWGkiLCJsb2NhbERvY3VtZW50cyIsImNvbGxlY3RHYXJiYWdlIiwiY29sbGVjdCIsIml1IiwicmVtb3ZlZEJhdGNoSWRzIiwiYWRkZWRCYXRjaElkcyIsIm91IiwiYXUiLCJsdSIsImZ1IiwiX3UiLCJzcyIsIlJ1IiwiYWN0aXZlVGFyZ2V0SWRzIiwibHIiLCJkciIsImhyIiwidXBkYXRlVGltZU1zIiwiYnUiLCJIciIsIkpyIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJWdSIsIllyIiwiU3UiLCJYciIsIlpyIiwiZW8iLCJubyIsImlvIiwiRHUiLCJDdSIsInh1IiwiQmF0Y2hHZXREb2N1bWVudHMiLCJDb21taXQiLCJSdW5RdWVyeSIsIlJ1bkFnZ3JlZ2F0aW9uUXVlcnkiLCJOdSIsInJvIiwib28iLCJ1byIsImNvIiwiYW8iLCJobyIsIm9uTWVzc2FnZSIsImZvIiwid28iLCJfbyIsImt1IiwiTXUiLCJkYXRhYmFzZUluZm8iLCJtbyIsInlvIiwicG8iLCJJbyIsIlRvIiwiRW8iLCJBbyIsIlJvIiwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zIiwidGltZW91dFNlY29uZHMiLCJPdSIsIkZ1IiwiQnUiLCJ0aW1lcklkIiwiUG8iLCJibyIsIlZvIiwiU28iLCJEbyIsIkNvIiwieG8iLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsInNraXBEZWxheSIsIkx1IiwiY29ubmVjdGlvbiIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwiam8iLCJ6byIsIldvIiwiSG8iLCJKbyIsIllvIiwiWG8iLCJabyIsImVucXVldWVBbmRGb3JnZXQiLCJxdSIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJkb2N1bWVudERlbGV0ZSIsImRvY3VtZW50UmVtb3ZlIiwic3UiLCJhZGRUYXJnZXQiLCJsYWJlbHMiLCJVdSIsInJ1IiwibGFzdFN0cmVhbVRva2VuIiwidXUiLCJzdHJlYW1Ub2tlbiIsIndyaXRlUmVzdWx0cyIsImNvbW1pdFRpbWUiLCJjdSIsImh1Iiwid3JpdGVzIiwidXBkYXRlTWFzayIsInZlcmlmeSIsInVwZGF0ZVRyYW5zZm9ybXMiLCJzZXRUb1NlcnZlclZhbHVlIiwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzIiwicmVtb3ZlQWxsRnJvbUFycmF5IiwiaW5jcmVtZW50IiwiY3VycmVudERvY3VtZW50IiwiS3UiLCJhdXRoQ3JlZGVudGlhbHMiLCJhcHBDaGVja0NyZWRlbnRpYWxzIiwidGVybWluYXRlIiwiUXUiLCJhc3luY1F1ZXVlIiwid3UiLCJtdSIsImd1IiwieXUiLCJwdSIsIkl1IiwiVHUiLCJqdSIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJFdSIsIkF1IiwidnUiLCJQdSIsIld1IiwienUiLCJIdSIsIlp1IiwiWXUiLCJKdSIsIlh1IiwicmVqZWN0TGlzdGVuIiwiYXBwbHlSZW1vdGVFdmVudCIsIl9jIiwiYXBwbHlTdWNjZXNzZnVsV3JpdGUiLCJvaSIsInJlamVjdEZhaWxlZFdyaXRlIiwidmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcyIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJzdG9wIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwidGltZXJIYW5kbGUiLCJoYW5kbGVEZWxheUVsYXBzZWQiLCJrZXllZE1hcCIsInNvcnRlZFNldCIsInRyYWNrIiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiaGFzQ2FjaGVkUmVzdWx0cyIsImVtcHR5U2V0IiwibGlzdGVuZXJzIiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwiJHUiLCJvbkVycm9yIiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsImZyb21Jbml0aWFsRG9jdW1lbnRzIiwic25hcHNob3QiLCJ2aWV3IiwicmVtb3RlU3RvcmUiLCJldmVudE1hbmFnZXIiLCJzaGFyZWRDbGllbnRTdGF0ZSIsIm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zIiwiaXNQcmltYXJ5Q2xpZW50IiwidHJhY2tSZW1vdmFscyIsInN5bmNocm9uaXplVGFicyIsImNyZWF0ZVNoYXJlZENsaWVudFN0YXRlIiwiY3JlYXRlUGVyc2lzdGVuY2UiLCJjcmVhdGVMb2NhbFN0b3JlIiwiZ2NTY2hlZHVsZXIiLCJjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlciIsImluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsImNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsImluaXRpYWxVc2VyIiwiY3JlYXRlRGF0YXN0b3JlIiwiY3JlYXRlUmVtb3RlU3RvcmUiLCJjcmVhdGVFdmVudE1hbmFnZXIiLCJzeW5jRW5naW5lIiwiY3JlYXRlU3luY0VuZ2luZSIsIm9ic2VydmVyIiwibXV0ZWQiLCJjbGllbnRJZCIsImF1dGhDcmVkZW50aWFsTGlzdGVuZXIiLCJhcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lciIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJpc1NodXR0aW5nRG93biIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCIsIl9vbmxpbmVDb21wb25lbnRzIiwiX29mZmxpbmVDb21wb25lbnRzIiwiZ2V0Q29uZmlndXJhdGlvbiIsIl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyIiwiX29mZmxpbmUiLCJfb25saW5lIiwib25MaXN0ZW4iLCJvblVubGlzdGVuIiwic291cmNlIiwidGgiLCJlaCIsIm5oIiwiaWgiLCJyaCIsIm9oIiwidWgiLCJhaCIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJsb2NhbENhY2hlIiwiY2FjaGVTaXplQnl0ZXMiLCJzaCIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMiLCJoaCIsIl9hdXRoQ3JlZGVudGlhbHMiLCJfYXBwQ2hlY2tDcmVkZW50aWFscyIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9pbml0aWFsaXplZCIsIl90ZXJtaW5hdGVkIiwiX3Rlcm1pbmF0ZVRhc2siLCJfc2V0U2V0dGluZ3MiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsImF1dGhUb2tlbkZhY3RvcnkiLCJjbGllbnQiLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwic2V0dGluZ3MiLCJmaCIsImNvbnZlcnRlciIsIl9rZXkiLCJmaXJlc3RvcmUiLCJfcGF0aCIsIndoIiwid2l0aENvbnZlcnRlciIsImRoIiwiX3F1ZXJ5IiwiX2giLCJnaCIsIkloIiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsInN0YWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJ2aCIsIl9xdWV1ZSIsIl9maXJlc3RvcmVDbGllbnQiLCJWaCIsImJoIiwiX29mZmxpbmVDb21wb25lbnRQcm92aWRlciIsIl9vbmxpbmVDb21wb25lbnRQcm92aWRlciIsIl9vZmZsaW5lS2luZCIsImtpbmQiLCJVaCIsIl9ieXRlU3RyaW5nIiwiS2giLCJfaW50ZXJuYWxQYXRoIiwiUWgiLCJfbWV0aG9kTmFtZSIsImpoIiwiX2xhdCIsIl9sb25nIiwiemgiLCJXaCIsInRvTXV0YXRpb24iLCJKaCIsIlloIiwiZ2wiLCJtZXRob2ROYW1lIiwiY29udGFpbnMiLCJYaCIsIlpoIiwidGwiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiZGwiLCJsbCIsIndsIiwieWwiLCJobCIsImZsIiwiX3RvRmllbGRUcmFuc2Zvcm0iLCJmcm9tRGF0ZSIsIm1sIiwiX2wiLCJzZWFyY2giLCJwbCIsIl9maXJlc3RvcmUiLCJfdXNlckRhdGFXcml0ZXIiLCJfZG9jdW1lbnQiLCJfY29udmVydGVyIiwicmVmIiwiSWwiLCJmcm9tRmlyZXN0b3JlIiwiY29udmVydFZhbHVlIiwiVGwiLCJXbCIsImNvbnZlcnRUaW1lc3RhbXAiLCJjb252ZXJ0U2VydmVyVGltZXN0YW1wIiwiY29udmVydEJ5dGVzIiwiY29udmVydFJlZmVyZW5jZSIsImNvbnZlcnRHZW9Qb2ludCIsImNvbnZlcnRBcnJheSIsImNvbnZlcnRPYmplY3QiLCJjb252ZXJ0T2JqZWN0TWFwIiwiY29udmVydERvY3VtZW50S2V5IiwibmYiLCJzZiIsIl9maXJlc3RvcmVJbXBsIiwibWV0YWRhdGEiLCJyZiIsInNlcnZlclRpbWVzdGFtcHMiLCJvZiIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsInVmIiwiaGYiLCJkZiIsIkVsIiwibWYiLCJ0b0ZpcmVzdG9yZSIsIkhsIiwiRWYiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsImdldEFwcCIsInByb2R1Y3ROYW1lIiwiX2IiLCJlbXVsYXRvckhvc3RzIiwiZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCIsInNlcGFyYXRvckluZGV4IiwibGFzdEluZGV4T2YiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQiLCJtb2NrVXNlclRva2VuIiwicHJvamVjdCIsImlhdCIsInN1YiIsInVzZXJfaWQiLCJwYXlsb2FkIiwiaXNzIiwiYXVkIiwiZXhwIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduX2luX3Byb3ZpZGVyIiwiaWRlbnRpdGllcyIsImFsZyIsImNyZWF0ZU1vY2tVc2VyVG9rZW4iLCJsaCIsImFwaUtleSIsImF1dGhEb21haW4iLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJMb2NhdGlvbk1hbmFnZXIiLCJiYWNrZ3JvdW5kSW1nIiwiZ2V0RWxlbWVudEJ5SWQiLCJjaGFyYWN0ZXJzIiwiYm93c2VyIiwidG9wIiwiYm90dG9tIiwibmVvIiwid2FsZG8iLCJnZXRDb29yZGluYXRlcyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzY2FsaW5nRmFjdG9yIiwiaW5uZXJXaWR0aCIsInNjYWxlZFgiLCJzY2FsZWRZIiwiY2FwdHVyZUNoYXJhY3RlckFyZWEiLCJjb29yZGluYXRlcyIsImNoYXJhY3RlckZvdW5kIiwiY2hhcmFjdGVyIiwiYXJlYSIsImlzV2l0aGluQXJlYSIsIkZpcmVzdG9yZU1hbmFnZXIiLCJzdG9yZUNoYXJhY3RlckxvY2F0aW9ucyIsImdldENoYXJhY3RlckxvY2F0aW9ucyIsInZlcmlmeUNsaWNrZWRQb3NpdGlvbiIsImZvdW5kQ2hhcmFjdGVyIiwic3RvcmVVc2VyVGltZSIsInVzZXJuYW1lIiwidGltZSIsImdldEFsbFVzZXJUaW1lcyIsInVzZXJUaW1lcyIsImxvY2FsZUNvbXBhcmUiLCJ1c2VyVGltZSIsIkludGVyZmFjZUhlbHBlcnMiLCJ0aW1lckVsZW1lbnQiLCJ0aW1lckludGVydmFsIiwic3RvcFRpbWVyIiwiY2xlYXJJbnRlcnZhbCIsInN0YXJ0VGltZXIiLCJzZXRJbnRlcnZhbCIsImZvcm1hdHRlZFRpbWUiLCJob3VycyIsIm1pbnV0ZXMiLCJmb3JtYXRUaW1lIiwidGV4dENvbnRlbnQiLCJyZXNldFRpbWVyIiwicmVzZXRDb3VudCIsInVwZGF0ZUNvdW50IiwiY291bnRFbGVtZW50IiwiZm91bmRDb3VudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJncmF5T3V0Q2hhcmFjdGVySWNvbiIsImNoYXJhY3RlcklkIiwiY2hhcmFjdGVyRWxlbWVudCIsImNsYXNzTGlzdCIsImNsZWFyQ2hhcmFjdGVySWNvbnMiLCJzaG93TW9kYWwiLCJtb2RhbCIsImNsb3Nlc3QiLCJzdHlsZSIsImRpc3BsYXkiLCJoaWRlTW9kYWwiLCJzZXRQb3NpdGlvbiIsImVsZW1lbnQiLCJwb3NpdGlvbmVkIiwiY3JlYXRlRGl2IiwiY2xhc3NOYW1lIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUJ1dHRvbiIsImRhdGFzZXQiLCJDb250cm9sbGVyIiwiaGFuZGxlQnV0dG9uQ2xpY2siLCJyZW1vdmVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZ2V0TGVhZGVyYm9hcmQiLCJ1c2VybmFtZUlucHV0IiwicXVlcnlTZWxlY3RvciIsIlJlbmRlcmVyIiwiY3JlYXRlVGFibGUiLCJjb250ZW50IiwiY2lyY2xlcyIsInBvcHVwcyIsImNyZWF0ZUZlZWRiYWNrTXNnIiwiZmVlZGJhY2tNc2ciLCJiYWNrZ3JvdW5kIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaXJjbGUiLCJjaXJjbGVUb1JlbW92ZSIsImNyZWF0ZUNpcmNsZSIsImNpcmNsZSIsInJlbW92ZVBvcHVwIiwicG9wdXBUb1JlbW92ZSIsImNyZWF0ZVBvcHVwIiwiZm91bmRDaGFyYWN0ZXJzIiwicG9wdXAiLCJvcHRpb24iLCJjaG9pY2UiLCJzY29yZWJvYXJkVGFibGVCb2R5Iiwicm93IiwidXNlcm5hbWVDZWxsIiwidGltZUNlbGwiLCJkcm9wZG93bkJ1dHRvbiIsImRyb3Bkb3duTWVudSIsInN0YXJ0QnV0dG9uIiwicGxheUFnYWluQnV0dG9uIiwiaW5pdGlhbE1vZGFsIiwiZW5kZ2FtZU1vZGFsIiwibGVhZGVyYm9hcmRNb2RhbCIsImlzR2FtZVN0YXJ0ZWQiLCJpc0FkZGluZ0NpcmNsZSIsImlzQWRkaW5nUG9wdXAiLCJzZWxlY3RlZENoYXJhY3RlciIsInN0YXJ0R2FtZSIsInJlc2V0R2FtZSIsImhhbmRsZUNvbnRlbnRDbGljayIsImNsaWNrZWRDaGFyYWN0ZXIiLCJmb3JtYXR0ZWRDaGFyYWN0ZXIiLCJpbml0IiwidG9nZ2xlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwiZW51bWVyYWJsZSIsIm9iaiJdLCJzb3VyY2VSb290IjoiIn0=
(()=>{"use strict";const e=(()=>{const e=document.getElementById("backgroundImg");return{getCoordinates:t=>{const o=e.getBoundingClientRect(),n=t.clientX-o.left,c=t.clientY-o.top;console.log(`X: ${n}, Y: ${c}`);const r=window.innerWidth,l=n/(r/1920),s=c/(r/1920),a=l-100,d=s-100,i=l+100,g=s+100;return console.log(`Scaled X: ${l}, Scaled Y: ${s}`),console.log(`Area: (${a}, ${d}) to (${i}, ${g})`),l>=1450&&l<=1650&&s>=6550&&s<=6750?console.log("Found Waldo"):console.log("Not Found"),{x:n,y:c}},formatTime:e=>{const t=Math.floor(e/3600),o=Math.floor(e%3600/60);return`${String(t).padStart(2,"0")}:${String(o).padStart(2,"0")}:${String(e%60).padStart(2,"0")}`}}})();console.log("interface.js says: this seem to be working");const t=(()=>{const e=document.getElementById("content"),n=document.getElementById("overlay"),c=[],r=[],l=(e,t)=>{const o=document.createElement("div");return o.className=e,t&&(o.textContent=t),o},s=(e,t,o)=>{const n=e;n.style.left=`${t}px`,n.style.top=`${o}px`},a=e=>{e.parentNode&&e.parentNode.removeChild(e)};return{createDiv:l,setPosition:s,createFeedbackMsg:(t,o,n)=>{const c=l("feedback",t);s(c,o-150,n-100),c.style.background="rgba(255, 0, 0, 0.7)",e.appendChild(c),setTimeout((()=>{c.remove()}),5e3)},createLink:(e,t)=>{const o=document.createElement("a");return o.textContent=e,o.href="#",o.addEventListener("click",t),o},showOverlay:()=>{n.style.display="flex"},hideOverlay:()=>{n.style.display="none"},removeElement:a,removeCircle:()=>{if(c.length>0){const e=c.pop();a(e)}},createCircle:(t,o)=>{const n=l("circle");s(n,t-50,o-50),e.appendChild(n),c.push(n)},removePopup:()=>{if(r.length>0){const e=r.pop();a(e)}},createPopup:(n,c)=>{const a=l("choice");s(a,n+60,c-70),["Bowser","Neo","Waldo"].forEach((e=>{const n=t.createLink(e,o.handleLinkClick);a.appendChild(n)})),e.appendChild(a),r.push(a)}}})(),o=(()=>{const o=document.getElementById("content"),n=document.getElementById("dropdownButton"),c=document.getElementById("dropdownMenu"),r=document.getElementById("startButton"),l=document.getElementById("timer");let s=!1,a=!1,d=!1;const i=()=>{s||(t.hideOverlay(),(()=>{let t=0;setInterval((()=>{t+=1;const o=e.formatTime(t);l.textContent=o}),1e3)})(),s=!0,a=!0,d=!0)},g=o=>{if(s&&!o.target.closest("header")&&!o.target.closest("footer")&&o.target!==r){if(a){const{x:n,y:c}=e.getCoordinates(o);t.createCircle(n,c),t.createPopup(n,c)}else t.removeCircle(),t.removePopup();a=!a,d=!d}},m=o=>{o.preventDefault(),console.log("handelLinkClick() triggered");const{x:n,y:c}=e.getCoordinates(o);t.removePopup(),t.createFeedbackMsg("Keep looking!",n,c)};return{init:()=>{o.addEventListener("click",g),document.querySelectorAll(".choice a").forEach((e=>{e.addEventListener("click",m)})),n.addEventListener("click",(()=>{c.classList.toggle("show"),n.textContent=c.classList.contains("show")?"▲ Hide Characters ▲":"▼ Show Characters ▼"})),r.addEventListener("click",i),t.showOverlay()},handleLinkClick:m}})();o.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixTQUFXVixFQUpuQixDQVNBLEdBQUlHLEVBQWdCLENBQ2xCLE1BQU0sRUFBRS9FLEVBQUMsRUFBRUcsR0FBTVgsRUFBaUJJLGVBQWVDLEdBQ2pENEIsRUFBU3FDLGFBQWE5RCxFQUFHRyxHQUN6QnNCLEVBQVMwQyxZQUFZbkUsRUFBR0csRUFDMUIsTUFDRXNCLEVBQVNpQyxlQUNUakMsRUFBU3dDLGNBR1hjLEdBQWtCQSxFQUNsQkMsR0FBaUJBLENBWmpCLENBWThCLEVBRzFCUCxFQUFtQjVFLElBR3ZCQSxFQUFNMkYsaUJBRU5sRixRQUFRQyxJQUFJLCtCQUNaLE1BQU0sRUFBRVAsRUFBQyxFQUFFRyxHQUFNWCxFQUFpQkksZUFBZUMsR0FDakQ0QixFQUFTd0MsY0FDVHhDLEVBQVNrQixrQkFBa0IsZ0JBQWlCM0MsRUFBR0csRUFBRSxFQXVCbkQsTUFBTyxDQUNMc0YsS0FyQlcsS0FDWC9ELEVBQVE0QixpQkFBaUIsUUFBUytCLEdBRXBCM0YsU0FBU2dHLGlCQUFpQixhQUNsQ3JCLFNBQVNqQixJQUNiQSxFQUFLRSxpQkFBaUIsUUFBU21CLEVBQWdCLElBR2pEQyxFQUFlcEIsaUJBQWlCLFNBQVMsS0FDdkNxQixFQUFhZ0IsVUFBVUMsT0FBTyxRQUM5QmxCLEVBQWV2QyxZQUFjd0MsRUFBYWdCLFVBQVVFLFNBQVMsUUFDekQsc0JBQ0EscUJBQXFCLElBRzNCakIsRUFBWXRCLGlCQUFpQixRQUFTMkIsR0FFdEN4RCxFQUFTOEIsYUFBYSxFQUt0QmtCLGtCQUVILEVBM0ZrQixHQTZGbkJELEVBQVdpQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9zcmMvaW50ZXJmYWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBJbnRlcmZhY2VIZWxwZXJzID0gKCgpID0+IHtcbiAgY29uc3QgYmFja2dyb3VuZEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZEltZ1wiKTtcblxuICBjb25zdCBnZXRDb29yZGluYXRlcyA9IChldmVudCkgPT4ge1xuICAgIC8vIEdldCB0aGUgcG9zaXRpb24gYW5kIGRpbWVuc2lvbnMgb2YgdGhlIGJhY2tncm91bmRJbWcgZWxlbWVudFxuICAgIGNvbnN0IHJlY3QgPSBiYWNrZ3JvdW5kSW1nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSB4IGFuZCB5IGNvb3JkaW5hdGVzIG9mIHRoZSBjbGljayByZWxhdGl2ZSB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZVxuICAgIC8vIGJhY2tncm91bmRJbWcgZWxlbWVudFxuICAgIGNvbnN0IHggPSBldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0O1xuICAgIGNvbnN0IHkgPSBldmVudC5jbGllbnRZIC0gcmVjdC50b3A7XG4gICAgY29uc29sZS5sb2coYFg6ICR7eH0sIFk6ICR7eX1gKTtcblxuICAgIGNvbnN0IHJlZmVyZW5jZVdpZHRoID0gMTkyMDsgLy8gUmVmZXJlbmNlIHdpZHRoIG9mIHRoZSBjb29yZGluYXRlIHN5c3RlbVxuXG4gICAgY29uc3Qgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGluZyBmYWN0b3IgZm9yIHRoZSB3aWR0aCBhbmQgaGVpZ2h0XG4gICAgY29uc3Qgd2lkdGhTY2FsaW5nRmFjdG9yID0gc2NyZWVuV2lkdGggLyByZWZlcmVuY2VXaWR0aDtcbiAgICBjb25zdCBoZWlnaHRTY2FsaW5nRmFjdG9yID0gc2NyZWVuV2lkdGggLyByZWZlcmVuY2VXaWR0aDtcblxuICAgIC8vIFNjYWxlIHRoZSB4IGFuZCB5IGNvb3JkaW5hdGVzIGJhc2VkIG9uIHRoZSBzY2FsaW5nIGZhY3RvcnNcbiAgICBjb25zdCBzY2FsZWRYID0geCAvIHdpZHRoU2NhbGluZ0ZhY3RvcjtcbiAgICBjb25zdCBzY2FsZWRZID0geSAvIGhlaWdodFNjYWxpbmdGYWN0b3I7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIGNoYXJhY3RlciBhcmVhXG4gICAgY29uc3QgYXJlYUxlZnQgPSBzY2FsZWRYIC0gMTAwOyAvLyAxNTAgcGl4ZWxzIHRvIHRoZSBsZWZ0IG9mIHRoZSBjbGlja2VkIHBvaW50XG4gICAgY29uc3QgYXJlYVRvcCA9IHNjYWxlZFkgLSAxMDA7IC8vIDE1MCBwaXhlbHMgYWJvdmUgdGhlIGNsaWNrZWQgcG9pbnRcbiAgICBjb25zdCBhcmVhUmlnaHQgPSBzY2FsZWRYICsgMTAwOyAvLyAxNTAgcGl4ZWxzIHRvIHRoZSByaWdodCBvZiB0aGUgY2xpY2tlZCBwb2ludFxuICAgIGNvbnN0IGFyZWFCb3R0b20gPSBzY2FsZWRZICsgMTAwOyAvLyAxNTAgcGl4ZWxzIGJlbG93IHRoZSBjbGlja2VkIHBvaW50XG5cbiAgICAvLyBCb3dzZXIgKHdvcmtzKVxuICAgIGNvbnN0IGJvd3NlckxlZnQgPSAxNDMwO1xuICAgIGNvbnN0IGJvd3NlclRvcCA9IDMxMzA7XG4gICAgY29uc3QgYm93c2VyUmlnaHQgPSAxNzMwO1xuICAgIGNvbnN0IGJvd3NlckJvdHRvbSA9IDM0MjQ7XG5cbiAgICAvLyBOZW8gKHdvcmtzKVxuICAgIGNvbnN0IG5lb0xlZnQgPSA2OTA7XG4gICAgY29uc3QgbmVvVG9wID0gNDcwMDtcbiAgICBjb25zdCBuZW9SaWdodCA9IDkwMDtcbiAgICBjb25zdCBuZW9Cb3R0b20gPSA0OTAwO1xuXG4gICAgLy8gV2FsZG8gKHdvcmtzKVxuICAgIGNvbnN0IHdhbGRvTGVmdCA9IDE0NTA7XG4gICAgY29uc3Qgd2FsZG9Ub3AgPSA2NTUwO1xuICAgIGNvbnN0IHdhbGRvUmlnaHQgPSAxNjUwO1xuICAgIGNvbnN0IHdhbGRvQm90dG9tID0gNjc1MDtcblxuICAgIGNvbnNvbGUubG9nKGBTY2FsZWQgWDogJHtzY2FsZWRYfSwgU2NhbGVkIFk6ICR7c2NhbGVkWX1gKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBBcmVhOiAoJHthcmVhTGVmdH0sICR7YXJlYVRvcH0pIHRvICgke2FyZWFSaWdodH0sICR7YXJlYUJvdHRvbX0pYFxuICAgICk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgY2xpY2sgaXMgd2l0aGluIHRoZSBzcGVjaWZpZWQgYXJlYVxuICAgIGlmIChcbiAgICAgIHNjYWxlZFggPj0gd2FsZG9MZWZ0ICYmXG4gICAgICBzY2FsZWRYIDw9IHdhbGRvUmlnaHQgJiZcbiAgICAgIHNjYWxlZFkgPj0gd2FsZG9Ub3AgJiZcbiAgICAgIHNjYWxlZFkgPD0gd2FsZG9Cb3R0b21cbiAgICApIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRm91bmQgV2FsZG9cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm90IEZvdW5kXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7IHgsIHkgfTtcbiAgfTtcblxuICBjb25zdCBmb3JtYXRUaW1lID0gKHNlY29uZHMpID0+IHtcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChzZWNvbmRzICUgMzYwMCkgLyA2MCk7XG4gICAgY29uc3QgZm9ybWF0dGVkSG91cnMgPSBTdHJpbmcoaG91cnMpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRNaW51dGVzID0gU3RyaW5nKG1pbnV0ZXMpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRTZWNvbmRzID0gU3RyaW5nKHNlY29uZHMgJSA2MCkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgIHJldHVybiBgJHtmb3JtYXR0ZWRIb3Vyc306JHtmb3JtYXR0ZWRNaW51dGVzfToke2Zvcm1hdHRlZFNlY29uZHN9YDtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldENvb3JkaW5hdGVzLFxuICAgIGZvcm1hdFRpbWUsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgY29uc3QgTG9naWNIZWxwZXJzID0gKCgpID0+IHtcbiAgLy8gLi4uXG59KSgpO1xuIiwiLy8gVE8gRE86XG4vLyBBZGRpdGlvbmFsIGNsZWFudXAgaWYgbmVjZXNzYXJ5XG4vLyBDb250aW51ZSB3aXRoIDEwLlxuXG5pbXBvcnQgeyBJbnRlcmZhY2VIZWxwZXJzIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuY29uc29sZS5sb2coXCJpbnRlcmZhY2UuanMgc2F5czogdGhpcyBzZWVtIHRvIGJlIHdvcmtpbmdcIik7XG5cbmNvbnN0IFJlbmRlcmVyID0gKCgpID0+IHtcbiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3ZlcmxheVwiKTtcblxuICBjb25zdCBjaXJjbGVzID0gW107XG4gIGNvbnN0IHBvcHVwcyA9IFtdO1xuXG4gIGNvbnN0IGNyZWF0ZURpdiA9IChjbGFzc05hbWUsIHRleHQpID0+IHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRpdi5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgaWYgKHRleHQpIHtcbiAgICAgIGRpdi50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuICAgIHJldHVybiBkaXY7XG4gIH07XG5cbiAgY29uc3Qgc2V0UG9zaXRpb24gPSAoZWxlbWVudCwgeCwgeSkgPT4ge1xuICAgIGNvbnN0IHBvc2l0aW9uZWQgPSBlbGVtZW50O1xuICAgIHBvc2l0aW9uZWQuc3R5bGUubGVmdCA9IGAke3h9cHhgO1xuICAgIHBvc2l0aW9uZWQuc3R5bGUudG9wID0gYCR7eX1weGA7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlRmVlZGJhY2tNc2cgPSAobWVzc2FnZSwgeCwgeSkgPT4ge1xuICAgIGNvbnN0IGZlZWRiYWNrTXNnID0gY3JlYXRlRGl2KFwiZmVlZGJhY2tcIiwgbWVzc2FnZSk7XG4gICAgc2V0UG9zaXRpb24oZmVlZGJhY2tNc2csIHggLSAxNTAsIHkgLSAxMDApO1xuICAgIGZlZWRiYWNrTXNnLnN0eWxlLmJhY2tncm91bmQgPSBcInJnYmEoMjU1LCAwLCAwLCAwLjcpXCI7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZChmZWVkYmFja01zZyk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGZlZWRiYWNrTXNnLnJlbW92ZSgpO1xuICAgIH0sIDUwMDApO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZUxpbmsgPSAodGV4dCwgY2xpY2tIYW5kbGVyKSA9PiB7XG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGxpbmsudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIGxpbmsuaHJlZiA9IFwiI1wiO1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrSGFuZGxlcik7XG4gICAgcmV0dXJuIGxpbms7XG4gIH07XG5cbiAgY29uc3Qgc2hvd092ZXJsYXkgPSAoKSA9PiB7XG4gICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gIH07XG5cbiAgY29uc3QgaGlkZU92ZXJsYXkgPSAoKSA9PiB7XG4gICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlRWxlbWVudCA9IChlbGVtZW50KSA9PiB7XG4gICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZW1vdmVDaXJjbGUgPSAoKSA9PiB7XG4gICAgaWYgKGNpcmNsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgY2lyY2xlVG9SZW1vdmUgPSBjaXJjbGVzLnBvcCgpO1xuICAgICAgcmVtb3ZlRWxlbWVudChjaXJjbGVUb1JlbW92ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZUNpcmNsZSA9ICh4LCB5KSA9PiB7XG4gICAgY29uc3QgY2lyY2xlID0gY3JlYXRlRGl2KFwiY2lyY2xlXCIpO1xuICAgIHNldFBvc2l0aW9uKGNpcmNsZSwgeCAtIDUwLCB5IC0gNTApO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcbiAgICBjaXJjbGVzLnB1c2goY2lyY2xlKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVQb3B1cCA9ICgpID0+IHtcbiAgICBpZiAocG9wdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHBvcHVwVG9SZW1vdmUgPSBwb3B1cHMucG9wKCk7XG4gICAgICByZW1vdmVFbGVtZW50KHBvcHVwVG9SZW1vdmUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBjcmVhdGVQb3B1cCA9ICh4LCB5KSA9PiB7XG4gICAgY29uc3QgcG9wdXAgPSBjcmVhdGVEaXYoXCJjaG9pY2VcIik7XG4gICAgc2V0UG9zaXRpb24ocG9wdXAsIHggKyA2MCwgeSAtIDcwKTtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBbXCJCb3dzZXJcIiwgXCJOZW9cIiwgXCJXYWxkb1wiXTtcbiAgICBvcHRpb25zLmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICBjb25zdCBjaG9pY2UgPSBSZW5kZXJlci5jcmVhdGVMaW5rKG9wdGlvbiwgQ29udHJvbGxlci5oYW5kbGVMaW5rQ2xpY2spO1xuICAgICAgcG9wdXAuYXBwZW5kQ2hpbGQoY2hvaWNlKTtcbiAgICB9KTtcblxuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocG9wdXApO1xuICAgIHBvcHVwcy5wdXNoKHBvcHVwKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGNyZWF0ZURpdixcbiAgICBzZXRQb3NpdGlvbixcbiAgICBjcmVhdGVGZWVkYmFja01zZyxcbiAgICBjcmVhdGVMaW5rLFxuICAgIHNob3dPdmVybGF5LFxuICAgIGhpZGVPdmVybGF5LFxuICAgIHJlbW92ZUVsZW1lbnQsXG4gICAgcmVtb3ZlQ2lyY2xlLFxuICAgIGNyZWF0ZUNpcmNsZSxcbiAgICByZW1vdmVQb3B1cCxcbiAgICBjcmVhdGVQb3B1cCxcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuICBjb25zdCBkcm9wZG93bkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHJvcGRvd25CdXR0b25cIik7XG4gIGNvbnN0IGRyb3Bkb3duTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHJvcGRvd25NZW51XCIpO1xuICBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhcnRCdXR0b25cIik7XG4gIGNvbnN0IHRpbWVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZXJcIik7XG5cbiAgbGV0IGlzR2FtZVN0YXJ0ZWQgPSBmYWxzZTtcbiAgbGV0IGlzQWRkaW5nQ2lyY2xlID0gZmFsc2U7XG4gIGxldCBpc0FkZGluZ1BvcHVwID0gZmFsc2U7XG5cbiAgY29uc3Qgc3RhcnRUaW1lciA9ICgpID0+IHtcbiAgICBsZXQgc2Vjb25kcyA9IDA7XG5cbiAgICBjb25zdCB1cGRhdGVUaW1lciA9ICgpID0+IHtcbiAgICAgIHNlY29uZHMgKz0gMTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBJbnRlcmZhY2VIZWxwZXJzLmZvcm1hdFRpbWUoc2Vjb25kcyk7XG4gICAgICB0aW1lckVsZW1lbnQudGV4dENvbnRlbnQgPSBmb3JtYXR0ZWRUaW1lO1xuICAgIH07XG5cbiAgICBzZXRJbnRlcnZhbCh1cGRhdGVUaW1lciwgMTAwMCk7XG4gIH07XG5cbiAgY29uc3Qgc3RhcnRHYW1lID0gKCkgPT4ge1xuICAgIGlmICghaXNHYW1lU3RhcnRlZCkge1xuICAgICAgUmVuZGVyZXIuaGlkZU92ZXJsYXkoKTtcbiAgICAgIHN0YXJ0VGltZXIoKTtcbiAgICAgIGlzR2FtZVN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgaXNBZGRpbmdDaXJjbGUgPSB0cnVlO1xuICAgICAgaXNBZGRpbmdQb3B1cCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNvbnRlbnRDbGljayA9IChldmVudCkgPT4ge1xuICAgIGlmIChcbiAgICAgICFpc0dhbWVTdGFydGVkIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xvc2VzdChcImhlYWRlclwiKSB8fFxuICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJmb290ZXJcIikgfHxcbiAgICAgIGV2ZW50LnRhcmdldCA9PT0gc3RhcnRCdXR0b25cbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNBZGRpbmdDaXJjbGUpIHtcbiAgICAgIGNvbnN0IHsgeCwgeSB9ID0gSW50ZXJmYWNlSGVscGVycy5nZXRDb29yZGluYXRlcyhldmVudCk7XG4gICAgICBSZW5kZXJlci5jcmVhdGVDaXJjbGUoeCwgeSk7XG4gICAgICBSZW5kZXJlci5jcmVhdGVQb3B1cCh4LCB5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgUmVuZGVyZXIucmVtb3ZlQ2lyY2xlKCk7XG4gICAgICBSZW5kZXJlci5yZW1vdmVQb3B1cCgpO1xuICAgIH1cblxuICAgIGlzQWRkaW5nQ2lyY2xlID0gIWlzQWRkaW5nQ2lyY2xlO1xuICAgIGlzQWRkaW5nUG9wdXAgPSAhaXNBZGRpbmdQb3B1cDtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVMaW5rQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBsaW5rLCBzbyB0aGF0IHRoZSB1c2VyIGRvZXNuJ3RcbiAgICAvLyBnZXQgdGhyb3duIHVwIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2UgZm9yIGVhY2ggbGluayBjbGlja1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zb2xlLmxvZyhcImhhbmRlbExpbmtDbGljaygpIHRyaWdnZXJlZFwiKTtcbiAgICBjb25zdCB7IHgsIHkgfSA9IEludGVyZmFjZUhlbHBlcnMuZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpO1xuICAgIFJlbmRlcmVyLnJlbW92ZVBvcHVwKCk7XG4gICAgUmVuZGVyZXIuY3JlYXRlRmVlZGJhY2tNc2coXCJLZWVwIGxvb2tpbmchXCIsIHgsIHkpO1xuICB9O1xuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgY29udGVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ29udGVudENsaWNrKTtcblxuICAgIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jaG9pY2UgYVwiKTtcbiAgICBsaW5rcy5mb3JFYWNoKChsaW5rKSA9PiB7XG4gICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVMaW5rQ2xpY2spO1xuICAgIH0pO1xuXG4gICAgZHJvcGRvd25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGRyb3Bkb3duTWVudS5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcbiAgICAgIGRyb3Bkb3duQnV0dG9uLnRleHRDb250ZW50ID0gZHJvcGRvd25NZW51LmNsYXNzTGlzdC5jb250YWlucyhcInNob3dcIilcbiAgICAgICAgPyBcIuKWsiBIaWRlIENoYXJhY3RlcnMg4payXCJcbiAgICAgICAgOiBcIuKWvCBTaG93IENoYXJhY3RlcnMg4pa8XCI7XG4gICAgfSk7XG5cbiAgICBzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3RhcnRHYW1lKTtcblxuICAgIFJlbmRlcmVyLnNob3dPdmVybGF5KCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICAgIGhhbmRsZUxpbmtDbGljayxcbiAgfTtcbn0pKCk7XG5cbkNvbnRyb2xsZXIuaW5pdCgpO1xuIl0sIm5hbWVzIjpbIkludGVyZmFjZUhlbHBlcnMiLCJiYWNrZ3JvdW5kSW1nIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvb3JkaW5hdGVzIiwiZXZlbnQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwieCIsImNsaWVudFgiLCJsZWZ0IiwieSIsImNsaWVudFkiLCJ0b3AiLCJjb25zb2xlIiwibG9nIiwic2NyZWVuV2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwic2NhbGVkWCIsInNjYWxlZFkiLCJhcmVhTGVmdCIsImFyZWFUb3AiLCJhcmVhUmlnaHQiLCJhcmVhQm90dG9tIiwiZm9ybWF0VGltZSIsInNlY29uZHMiLCJob3VycyIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZXMiLCJTdHJpbmciLCJwYWRTdGFydCIsIlJlbmRlcmVyIiwiY29udGVudCIsIm92ZXJsYXkiLCJjaXJjbGVzIiwicG9wdXBzIiwiY3JlYXRlRGl2IiwiY2xhc3NOYW1lIiwidGV4dCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNldFBvc2l0aW9uIiwiZWxlbWVudCIsInBvc2l0aW9uZWQiLCJzdHlsZSIsInJlbW92ZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJjcmVhdGVGZWVkYmFja01zZyIsIm1lc3NhZ2UiLCJmZWVkYmFja01zZyIsImJhY2tncm91bmQiLCJhcHBlbmRDaGlsZCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJjcmVhdGVMaW5rIiwiY2xpY2tIYW5kbGVyIiwibGluayIsImhyZWYiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd092ZXJsYXkiLCJkaXNwbGF5IiwiaGlkZU92ZXJsYXkiLCJyZW1vdmVDaXJjbGUiLCJsZW5ndGgiLCJjaXJjbGVUb1JlbW92ZSIsInBvcCIsImNyZWF0ZUNpcmNsZSIsImNpcmNsZSIsInB1c2giLCJyZW1vdmVQb3B1cCIsInBvcHVwVG9SZW1vdmUiLCJjcmVhdGVQb3B1cCIsInBvcHVwIiwiZm9yRWFjaCIsIm9wdGlvbiIsImNob2ljZSIsIkNvbnRyb2xsZXIiLCJoYW5kbGVMaW5rQ2xpY2siLCJkcm9wZG93bkJ1dHRvbiIsImRyb3Bkb3duTWVudSIsInN0YXJ0QnV0dG9uIiwidGltZXJFbGVtZW50IiwiaXNHYW1lU3RhcnRlZCIsImlzQWRkaW5nQ2lyY2xlIiwiaXNBZGRpbmdQb3B1cCIsInN0YXJ0R2FtZSIsInNldEludGVydmFsIiwiZm9ybWF0dGVkVGltZSIsInN0YXJ0VGltZXIiLCJoYW5kbGVDb250ZW50Q2xpY2siLCJ0YXJnZXQiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJpbml0IiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIl0sInNvdXJjZVJvb3QiOiIifQ==
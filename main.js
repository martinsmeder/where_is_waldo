console.log("app-logic.js says: this seem to be working"),(()=>{"use strict";const e=(()=>{const e=document.getElementById("backgroundImg");return{getCoordinates:t=>{const n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}},formatTime:e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60);return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(e%60).padStart(2,"0")}`}}})();console.log("interface.js says: this seem to be working");const t=(()=>{const e=document.getElementById("content"),o=document.getElementById("overlay"),r=[],c=[],s=(e,t)=>{const n=document.createElement("div");return n.className=e,t&&(n.textContent=t),n},l=(e,t,n)=>{const o=e;o.style.left=`${t}px`,o.style.top=`${n}px`},a=e=>{e.parentNode&&e.parentNode.removeChild(e)};return{createDiv:s,setPosition:l,createFeedbackMsg:(t,n,o)=>{const r=s("feedback",t);l(r,n-150,o-100),r.style.background="rgba(255, 0, 0, 0.7)",e.appendChild(r),setTimeout((()=>{r.remove()}),5e3)},createLink:(e,t)=>{const n=document.createElement("a");return n.textContent=e,n.href="#",n.addEventListener("click",t),n},showOverlay:()=>{o.style.display="flex"},hideOverlay:()=>{o.style.display="none"},removeElement:a,removeCircle:()=>{if(r.length>0){const e=r.pop();a(e)}},createCircle:(t,n)=>{const o=s("circle");l(o,t-50,n-50),e.appendChild(o),r.push(o)},removePopup:()=>{if(c.length>0){const e=c.pop();a(e)}},createPopup:(o,r)=>{const a=s("choice");l(a,o+60,r-70),["Bowser","Neo","Waldo"].forEach((e=>{const o=t.createLink(e,n.handleLinkClick);a.appendChild(o)})),e.appendChild(a),c.push(a)}}})(),n=(()=>{const n=document.getElementById("content"),o=document.getElementById("dropdownButton"),r=document.getElementById("dropdownMenu"),c=document.getElementById("startButton"),s=document.getElementById("timer");let l=!1,a=!1,i=!1;const d=()=>{l||(t.hideOverlay(),(()=>{let t=0;setInterval((()=>{t+=1;const n=e.formatTime(t);s.textContent=n}),1e3)})(),l=!0,a=!0,i=!0)},p=n=>{if(l&&!n.target.closest("header")&&!n.target.closest("footer")&&n.target!==c){if(a){const{x:o,y:r}=e.getCoordinates(n);t.createCircle(o,r),t.createPopup(o,r)}else t.removeCircle(),t.removePopup();a=!a,i=!i}},m=n=>{n.preventDefault(),console.log("handelLinkClick() triggered");const{x:o,y:r}=e.getCoordinates(n);t.removePopup(),t.createFeedbackMsg("Keep looking!",o,r)};return{init:()=>{n.addEventListener("click",p),document.querySelectorAll(".choice a").forEach((e=>{e.addEventListener("click",m)})),o.addEventListener("click",(()=>{r.classList.toggle("show"),o.textContent=r.classList.contains("show")?"▲ Hide Characters ▲":"▼ Show Characters ▼"})),c.addEventListener("click",d),t.showOverlay()},handleLinkClick:m}})();n.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGtCQUFrQixnQkFBaUJoQyxFQUFHRyxFQUFFLEVBdUJuRCxNQUFPLENBQ0wyRSxLQXJCVyxLQUNYL0QsRUFBUTRCLGlCQUFpQixRQUFTK0IsR0FFcEJoRixTQUFTcUYsaUJBQWlCLGFBQ2xDckIsU0FBU2pCLElBQ2JBLEVBQUtFLGlCQUFpQixRQUFTbUIsRUFBZ0IsSUFHakRDLEVBQWVwQixpQkFBaUIsU0FBUyxLQUN2Q3FCLEVBQWFnQixVQUFVQyxPQUFPLFFBQzlCbEIsRUFBZXZDLFlBQWN3QyxFQUFhZ0IsVUFBVUUsU0FBUyxRQUN6RCxzQkFDQSxxQkFBcUIsSUFHM0JqQixFQUFZdEIsaUJBQWlCLFFBQVMyQixHQUV0Q3hELEVBQVM4QixhQUFhLEVBS3RCa0Isa0JBRUgsRUE1RmtCLEdBOEZuQkQsRUFBV2lCLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93aGVyZV9pc193YWxkby8uL3NyYy9hcHAtbG9naWMuanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2hlcmVfaXNfd2FsZG8vLi9zcmMvaW50ZXJmYWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKFwiYXBwLWxvZ2ljLmpzIHNheXM6IHRoaXMgc2VlbSB0byBiZSB3b3JraW5nXCIpO1xuIiwiZXhwb3J0IGNvbnN0IEludGVyZmFjZUhlbHBlcnMgPSAoKCkgPT4ge1xuICBjb25zdCBiYWNrZ3JvdW5kSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kSW1nXCIpO1xuXG4gIGNvbnN0IGdldENvb3JkaW5hdGVzID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgcmVjdCA9IGJhY2tncm91bmRJbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgeCA9IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQ7XG4gICAgY29uc3QgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcDtcbiAgICByZXR1cm4geyB4LCB5IH07XG4gIH07XG5cbiAgY29uc3QgZm9ybWF0VGltZSA9IChzZWNvbmRzKSA9PiB7XG4gICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICAgIGNvbnN0IGZvcm1hdHRlZEhvdXJzID0gU3RyaW5nKGhvdXJzKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkTWludXRlcyA9IFN0cmluZyhtaW51dGVzKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkU2Vjb25kcyA9IFN0cmluZyhzZWNvbmRzICUgNjApLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICByZXR1cm4gYCR7Zm9ybWF0dGVkSG91cnN9OiR7Zm9ybWF0dGVkTWludXRlc306JHtmb3JtYXR0ZWRTZWNvbmRzfWA7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRDb29yZGluYXRlcyxcbiAgICBmb3JtYXRUaW1lLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IExvZ2ljSGVscGVycyA9ICgoKSA9PiB7XG4gIC8vIC4uLlxufSkoKTtcbiIsIi8vIFRPIERPOlxuLy8gQWRkaXRpb25hbCBjbGVhbnVwIGlmIG5lY2Vzc2FyeVxuLy8gQ29udGludWUgd2l0aCAxMC5cblxuaW1wb3J0IHsgSW50ZXJmYWNlSGVscGVycyB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmNvbnNvbGUubG9nKFwiaW50ZXJmYWNlLmpzIHNheXM6IHRoaXMgc2VlbSB0byBiZSB3b3JraW5nXCIpO1xuXG5jb25zdCBSZW5kZXJlciA9ICgoKSA9PiB7XG4gIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG4gIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm92ZXJsYXlcIik7XG5cbiAgY29uc3QgY2lyY2xlcyA9IFtdO1xuICBjb25zdCBwb3B1cHMgPSBbXTtcblxuICBjb25zdCBjcmVhdGVEaXYgPSAoY2xhc3NOYW1lLCB0ZXh0KSA9PiB7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkaXYuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgIGlmICh0ZXh0KSB7XG4gICAgICBkaXYudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIH1cbiAgICByZXR1cm4gZGl2O1xuICB9O1xuXG4gIGNvbnN0IHNldFBvc2l0aW9uID0gKGVsZW1lbnQsIHgsIHkpID0+IHtcbiAgICBjb25zdCBwb3NpdGlvbmVkID0gZWxlbWVudDtcbiAgICBwb3NpdGlvbmVkLnN0eWxlLmxlZnQgPSBgJHt4fXB4YDtcbiAgICBwb3NpdGlvbmVkLnN0eWxlLnRvcCA9IGAke3l9cHhgO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZUZlZWRiYWNrTXNnID0gKG1lc3NhZ2UsIHgsIHkpID0+IHtcbiAgICBjb25zdCBmZWVkYmFja01zZyA9IGNyZWF0ZURpdihcImZlZWRiYWNrXCIsIG1lc3NhZ2UpO1xuICAgIHNldFBvc2l0aW9uKGZlZWRiYWNrTXNnLCB4IC0gMTUwLCB5IC0gMTAwKTtcbiAgICBmZWVkYmFja01zZy5zdHlsZS5iYWNrZ3JvdW5kID0gXCJyZ2JhKDI1NSwgMCwgMCwgMC43KVwiO1xuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZmVlZGJhY2tNc2cpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBmZWVkYmFja01zZy5yZW1vdmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVMaW5rID0gKHRleHQsIGNsaWNrSGFuZGxlcikgPT4ge1xuICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsaW5rLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICBsaW5rLmhyZWYgPSBcIiNcIjtcbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbGlja0hhbmRsZXIpO1xuICAgIHJldHVybiBsaW5rO1xuICB9O1xuXG4gIGNvbnN0IHNob3dPdmVybGF5ID0gKCkgPT4ge1xuICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICB9O1xuXG4gIGNvbnN0IGhpZGVPdmVybGF5ID0gKCkgPT4ge1xuICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZUVsZW1lbnQgPSAoZWxlbWVudCkgPT4ge1xuICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlQ2lyY2xlID0gKCkgPT4ge1xuICAgIGlmIChjaXJjbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNpcmNsZVRvUmVtb3ZlID0gY2lyY2xlcy5wb3AoKTtcbiAgICAgIHJlbW92ZUVsZW1lbnQoY2lyY2xlVG9SZW1vdmUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBjcmVhdGVDaXJjbGUgPSAoeCwgeSkgPT4ge1xuICAgIGNvbnN0IGNpcmNsZSA9IGNyZWF0ZURpdihcImNpcmNsZVwiKTtcbiAgICBzZXRQb3NpdGlvbihjaXJjbGUsIHggLSA1MCwgeSAtIDUwKTtcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGNpcmNsZSk7XG4gICAgY2lyY2xlcy5wdXNoKGNpcmNsZSk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlUG9wdXAgPSAoKSA9PiB7XG4gICAgaWYgKHBvcHVwcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBwb3B1cFRvUmVtb3ZlID0gcG9wdXBzLnBvcCgpO1xuICAgICAgcmVtb3ZlRWxlbWVudChwb3B1cFRvUmVtb3ZlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUG9wdXAgPSAoeCwgeSkgPT4ge1xuICAgIGNvbnN0IHBvcHVwID0gY3JlYXRlRGl2KFwiY2hvaWNlXCIpO1xuICAgIHNldFBvc2l0aW9uKHBvcHVwLCB4ICsgNjAsIHkgLSA3MCk7XG5cbiAgICBjb25zdCBvcHRpb25zID0gW1wiQm93c2VyXCIsIFwiTmVvXCIsIFwiV2FsZG9cIl07XG4gICAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgY29uc3QgY2hvaWNlID0gUmVuZGVyZXIuY3JlYXRlTGluayhvcHRpb24sIENvbnRyb2xsZXIuaGFuZGxlTGlua0NsaWNrKTtcbiAgICAgIHBvcHVwLmFwcGVuZENoaWxkKGNob2ljZSk7XG4gICAgfSk7XG5cbiAgICBjb250ZW50LmFwcGVuZENoaWxkKHBvcHVwKTtcbiAgICBwb3B1cHMucHVzaChwb3B1cCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVEaXYsXG4gICAgc2V0UG9zaXRpb24sXG4gICAgY3JlYXRlRmVlZGJhY2tNc2csXG4gICAgY3JlYXRlTGluayxcbiAgICBzaG93T3ZlcmxheSxcbiAgICBoaWRlT3ZlcmxheSxcbiAgICByZW1vdmVFbGVtZW50LFxuICAgIHJlbW92ZUNpcmNsZSxcbiAgICBjcmVhdGVDaXJjbGUsXG4gICAgcmVtb3ZlUG9wdXAsXG4gICAgY3JlYXRlUG9wdXAsXG4gIH07XG59KSgpO1xuXG5jb25zdCBDb250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbiAgY29uc3QgZHJvcGRvd25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyb3Bkb3duQnV0dG9uXCIpO1xuICBjb25zdCBkcm9wZG93bk1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRyb3Bkb3duTWVudVwiKTtcbiAgLy8gY29uc3QgYmFja2dyb3VuZEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZEltZ1wiKTtcbiAgY29uc3Qgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0QnV0dG9uXCIpO1xuICBjb25zdCB0aW1lckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpbWVyXCIpO1xuXG4gIGxldCBpc0dhbWVTdGFydGVkID0gZmFsc2U7XG4gIGxldCBpc0FkZGluZ0NpcmNsZSA9IGZhbHNlO1xuICBsZXQgaXNBZGRpbmdQb3B1cCA9IGZhbHNlO1xuXG4gIGNvbnN0IHN0YXJ0VGltZXIgPSAoKSA9PiB7XG4gICAgbGV0IHNlY29uZHMgPSAwO1xuXG4gICAgY29uc3QgdXBkYXRlVGltZXIgPSAoKSA9PiB7XG4gICAgICBzZWNvbmRzICs9IDE7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gSW50ZXJmYWNlSGVscGVycy5mb3JtYXRUaW1lKHNlY29uZHMpO1xuICAgICAgdGltZXJFbGVtZW50LnRleHRDb250ZW50ID0gZm9ybWF0dGVkVGltZTtcbiAgICB9O1xuXG4gICAgc2V0SW50ZXJ2YWwodXBkYXRlVGltZXIsIDEwMDApO1xuICB9O1xuXG4gIGNvbnN0IHN0YXJ0R2FtZSA9ICgpID0+IHtcbiAgICBpZiAoIWlzR2FtZVN0YXJ0ZWQpIHtcbiAgICAgIFJlbmRlcmVyLmhpZGVPdmVybGF5KCk7XG4gICAgICBzdGFydFRpbWVyKCk7XG4gICAgICBpc0dhbWVTdGFydGVkID0gdHJ1ZTtcbiAgICAgIGlzQWRkaW5nQ2lyY2xlID0gdHJ1ZTtcbiAgICAgIGlzQWRkaW5nUG9wdXAgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVDb250ZW50Q2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoXG4gICAgICAhaXNHYW1lU3RhcnRlZCB8fFxuICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJoZWFkZXJcIikgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiZm9vdGVyXCIpIHx8XG4gICAgICBldmVudC50YXJnZXQgPT09IHN0YXJ0QnV0dG9uXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQWRkaW5nQ2lyY2xlKSB7XG4gICAgICBjb25zdCB7IHgsIHkgfSA9IEludGVyZmFjZUhlbHBlcnMuZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpO1xuICAgICAgUmVuZGVyZXIuY3JlYXRlQ2lyY2xlKHgsIHkpO1xuICAgICAgUmVuZGVyZXIuY3JlYXRlUG9wdXAoeCwgeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlbmRlcmVyLnJlbW92ZUNpcmNsZSgpO1xuICAgICAgUmVuZGVyZXIucmVtb3ZlUG9wdXAoKTtcbiAgICB9XG5cbiAgICBpc0FkZGluZ0NpcmNsZSA9ICFpc0FkZGluZ0NpcmNsZTtcbiAgICBpc0FkZGluZ1BvcHVwID0gIWlzQWRkaW5nUG9wdXA7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlTGlua0NsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUgbGluaywgc28gdGhhdCB0aGUgdXNlciBkb2Vzbid0XG4gICAgLy8gZ2V0IHRocm93biB1cCB0byB0aGUgdG9wIG9mIHRoZSBwYWdlIGZvciBlYWNoIGxpbmsgY2xpY2tcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc29sZS5sb2coXCJoYW5kZWxMaW5rQ2xpY2soKSB0cmlnZ2VyZWRcIik7XG4gICAgY29uc3QgeyB4LCB5IH0gPSBJbnRlcmZhY2VIZWxwZXJzLmdldENvb3JkaW5hdGVzKGV2ZW50KTtcbiAgICBSZW5kZXJlci5yZW1vdmVQb3B1cCgpO1xuICAgIFJlbmRlcmVyLmNyZWF0ZUZlZWRiYWNrTXNnKFwiS2VlcCBsb29raW5nIVwiLCB4LCB5KTtcbiAgfTtcblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIGNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNvbnRlbnRDbGljayk7XG5cbiAgICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2hvaWNlIGFcIik7XG4gICAgbGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTGlua0NsaWNrKTtcbiAgICB9KTtcblxuICAgIGRyb3Bkb3duQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkcm9wZG93bk1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XG4gICAgICBkcm9wZG93bkJ1dHRvbi50ZXh0Q29udGVudCA9IGRyb3Bkb3duTWVudS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93XCIpXG4gICAgICAgID8gXCLilrIgSGlkZSBDaGFyYWN0ZXJzIOKWslwiXG4gICAgICAgIDogXCLilrwgU2hvdyBDaGFyYWN0ZXJzIOKWvFwiO1xuICAgIH0pO1xuXG4gICAgc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN0YXJ0R2FtZSk7XG5cbiAgICBSZW5kZXJlci5zaG93T3ZlcmxheSgpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdCxcbiAgICBoYW5kbGVMaW5rQ2xpY2ssXG4gIH07XG59KSgpO1xuXG5Db250cm9sbGVyLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiSW50ZXJmYWNlSGVscGVycyIsImJhY2tncm91bmRJbWciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29vcmRpbmF0ZXMiLCJldmVudCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwiY2xpZW50WCIsImxlZnQiLCJ5IiwiY2xpZW50WSIsInRvcCIsImZvcm1hdFRpbWUiLCJzZWNvbmRzIiwiaG91cnMiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGVzIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJSZW5kZXJlciIsImNvbnRlbnQiLCJvdmVybGF5IiwiY2lyY2xlcyIsInBvcHVwcyIsImNyZWF0ZURpdiIsImNsYXNzTmFtZSIsInRleHQiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJzZXRQb3NpdGlvbiIsImVsZW1lbnQiLCJwb3NpdGlvbmVkIiwic3R5bGUiLCJyZW1vdmVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiY3JlYXRlRmVlZGJhY2tNc2ciLCJtZXNzYWdlIiwiZmVlZGJhY2tNc2ciLCJiYWNrZ3JvdW5kIiwiYXBwZW5kQ2hpbGQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwiY3JlYXRlTGluayIsImNsaWNrSGFuZGxlciIsImxpbmsiLCJocmVmIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3dPdmVybGF5IiwiZGlzcGxheSIsImhpZGVPdmVybGF5IiwicmVtb3ZlQ2lyY2xlIiwibGVuZ3RoIiwiY2lyY2xlVG9SZW1vdmUiLCJwb3AiLCJjcmVhdGVDaXJjbGUiLCJjaXJjbGUiLCJwdXNoIiwicmVtb3ZlUG9wdXAiLCJwb3B1cFRvUmVtb3ZlIiwiY3JlYXRlUG9wdXAiLCJwb3B1cCIsImZvckVhY2giLCJvcHRpb24iLCJjaG9pY2UiLCJDb250cm9sbGVyIiwiaGFuZGxlTGlua0NsaWNrIiwiZHJvcGRvd25CdXR0b24iLCJkcm9wZG93bk1lbnUiLCJzdGFydEJ1dHRvbiIsInRpbWVyRWxlbWVudCIsImlzR2FtZVN0YXJ0ZWQiLCJpc0FkZGluZ0NpcmNsZSIsImlzQWRkaW5nUG9wdXAiLCJzdGFydEdhbWUiLCJzZXRJbnRlcnZhbCIsImZvcm1hdHRlZFRpbWUiLCJzdGFydFRpbWVyIiwiaGFuZGxlQ29udGVudENsaWNrIiwidGFyZ2V0IiwiY2xvc2VzdCIsInByZXZlbnREZWZhdWx0IiwiaW5pdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJjb250YWlucyJdLCJzb3VyY2VSb290IjoiIn0=